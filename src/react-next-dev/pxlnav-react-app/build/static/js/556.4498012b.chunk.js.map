{"version":3,"file":"static/js/556.4498012b.chunk.js","mappings":"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","sources":["components/pxlNav|lazy|groupOptions: {}|namespace object","components/libs/three/three.core.min.js","components/libs/three/three.module.min.js","components/libs/three/fflate.module.js","components/libs/three/NURBSUtils.js","components/libs/three/NURBSCurve.js","components/libs/three/FBXLoader.js","components/libs/three/meshopt_decoder.module.js","components/libs/three/BufferGeometryUtils.js","components/libs/three/GLTFLoader.js","components/libs/three/DRACOLoader.js","components/libs/three/WorkerPool.js","components/libs/three/ktx-parse.module.js","components/libs/three/zstddec.module.js","components/libs/three/ColorSpaces.js","components/libs/three/KTX2Loader.js","components/pxlNav/core/Enums.js","components/pxlNav/core/FileIO.js","components/pxlNav/core/Options.js","components/pxlRooms/SaltFlatsEnvironment/Shaders.js","components/pxlRooms/SaltFlatsEnvironment/SaltFlatsEnvironment.js","components/pxlRooms/index.js","components/libs/three/CopyShader.js","components/libs/three/Pass.js","components/libs/three/ShaderPass.js","components/libs/three/MaskPass.js","components/libs/three/EffectComposer.js","components/libs/three/RenderPass.js","components/libs/three/LuminosityHighPassShader.js","components/libs/three/UnrealBloomPass.js","components/pxlNav/gui/utils/svgUtils.js","components/pxlNav/gui/GUIBase.js","components/pxlNav/gui/ShaderEditor.js","components/pxlNav/hud/elements/elementBase.js","components/pxlNav/hud/elements/dragRegion.js","components/pxlNav/hud/elements/thumbstick.js","components/pxlNav/pxlBase.js","components/pxlNav/core/Utils.js","components/pxlNav/core/QualityController.js","components/pxlNav/core/CookieManager.js","components/pxlNav/core/Timer.js","components/pxlNav/core/User.js","components/pxlNav/core/Device.js","components/pxlNav/core/Colliders.js","components/pxlNav/core/Animation.js","components/pxlNav/Environment.js","components/pxlNav/gui/GUI.js","components/pxlNav/hud/HUD.js","components/pxlNav/cam/Camera.js","components/pxlNav/cam/AutoCamera.js","components/pxlNav/media/MusicUtils.js","components/pxlNav/media/Audio.js","components/pxlNav/media/Video.js","components/pxlNav/shaders/core/ShaderHeader.js","components/pxlNav/shaders/core/Default.js","components/pxlNav/shaders/core/DefaultShift.js","components/pxlNav/shaders/core/CamPosVert.js","components/pxlNav/shaders/core/DiscardFrag.js","components/pxlNav/shaders/animated/AnimatedTexture.js","components/pxlNav/shaders/animated/ClickableBevel.js","components/pxlNav/shaders/animated/PortalBaseShader.js","components/pxlNav/shaders/objects/rgbaMapShader.js","components/pxlNav/shaders/objects/ItemBaseShader.js","components/pxlNav/shaders/objects/ItemShader.js","components/pxlNav/shaders/objects/PxlPrincipled.js","components/pxlNav/effects/particles/shaders/EmberWisps.js","components/pxlNav/effects/particles/shaders/FloatingDust.js","components/pxlNav/effects/particles/shaders/HeightMap.js","components/pxlNav/effects/particles/shaders/Smoke.js","components/pxlNav/effects/particles/shaders/SnowShader.js","components/pxlNav/shaders/rendering/WorldPositionPass.js","components/pxlNav/shaders/rendering/GlowPassShader.js","components/pxlNav/shaders/rendering/TextureStorePass.js","components/pxlNav/shaders/rendering/CompLayersPostProcess.js","components/pxlNav/shaders/rendering/AntiAliasingPostProcess.js","components/pxlNav/shaders/rendering/DirectionalBlurPass.js","components/pxlNav/shaders/rendering/MotionBlurPostProcess.js","components/pxlNav/shaders/rendering/ChroAberPostProcess.js","components/pxlNav/shaders/rendering/LKingPostProcess.js","components/pxlNav/shaders/rendering/InfiniteZoomPostProcess.js","components/pxlNav/shaders/rendering/StarFieldPostProcess.js","components/pxlNav/shaders/rendering/WarpPostProcess.js","components/pxlNav/shaders/rendering/FinalOverlayPostProcess.js","components/pxlNav/shaders/scene/BGScreen.js","components/pxlNav/shaders/scene/SkyObject.js","components/pxlNav/shaders/shaders.js","components/pxlNav/effects/particles/ParticleBase.js","components/pxlNav/effects/effects.js","components/pxlNav/effects/particles/BillowSmoke.js","components/pxlNav/effects/particles/EmberWisps.js","components/pxlNav/effects/particles/FloatingDust.js","components/pxlNav/effects/particles/HeightMap.js","components/pxlNav/RoomClass.js","components/pxlNav.js","components/pxlNav/extensions/Extensions.js","components/pxlNav/extensions|lazy|/^/.*/.js$/|groupOptions: {}|namespace object"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 546;\nmodule.exports = webpackEmptyAsyncContext;","/**\r\n * @license\r\n * Copyright 2010-2024 Three.js Authors\r\n * SPDX-License-Identifier: MIT\r\n */\r\nconst t=\"171\",e={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},i=0,r=1,n=2,o=3,a=0,h=1,l=2,c=3,u=0,d=1,p=2,m=0,y=1,f=2,g=3,x=4,b=5,v=100,w=101,M=102,S=103,_=104,A=200,T=201,z=202,C=203,I=204,B=205,k=206,E=207,R=208,P=209,O=210,F=211,N=212,L=213,V=214,W=0,U=1,j=2,D=3,H=4,q=5,J=6,X=7,Y=0,Z=1,G=2,$=0,Q=1,K=2,tt=3,et=4,st=5,it=6,rt=7,nt=\"attached\",ot=\"detached\",at=300,ht=301,lt=302,ct=303,ut=304,dt=306,pt=1e3,mt=1001,yt=1002,ft=1003,gt=1004,xt=1004,bt=1005,vt=1005,wt=1006,Mt=1007,St=1007,_t=1008,At=1008,Tt=1009,zt=1010,Ct=1011,It=1012,Bt=1013,kt=1014,Et=1015,Rt=1016,Pt=1017,Ot=1018,Ft=1020,Nt=35902,Lt=1021,Vt=1022,Wt=1023,Ut=1024,jt=1025,Dt=1026,Ht=1027,qt=1028,Jt=1029,Xt=1030,Yt=1031,Zt=1032,Gt=1033,$t=33776,Qt=33777,Kt=33778,te=33779,ee=35840,se=35841,ie=35842,re=35843,ne=36196,oe=37492,ae=37496,he=37808,le=37809,ce=37810,ue=37811,de=37812,pe=37813,me=37814,ye=37815,fe=37816,ge=37817,xe=37818,be=37819,ve=37820,we=37821,Me=36492,Se=36494,_e=36495,Ae=36283,Te=36284,ze=36285,Ce=36286,Ie=2200,Be=2201,ke=2202,Ee=2300,Re=2301,Pe=2302,Oe=2400,Fe=2401,Ne=2402,Le=2500,Ve=2501,We=0,Ue=1,je=2,De=3200,He=3201,qe=3202,Je=3203,Xe=0,Ye=1,Ze=\"\",Ge=\"srgb\",$e=\"srgb-linear\",Qe=\"linear\",Ke=\"srgb\",ts=0,es=7680,ss=7681,is=7682,rs=7683,ns=34055,os=34056,as=5386,hs=512,ls=513,cs=514,us=515,ds=516,ps=517,ms=518,ys=519,fs=512,gs=513,xs=514,bs=515,vs=516,ws=517,Ms=518,Ss=519,_s=35044,As=35048,Ts=35040,zs=35045,Cs=35049,Is=35041,Bs=35046,ks=35050,Es=35042,Rs=\"100\",Ps=\"300 es\",Os=2e3,Fs=2001;class Ns{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(e)&&s[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[t]&&-1!==s[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const s=e.slice(0);for(let e=0,i=s.length;e<i;e++)s[e].call(this,t);t.target=null}}}const Ls=[\"00\",\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"0a\",\"0b\",\"0c\",\"0d\",\"0e\",\"0f\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"1a\",\"1b\",\"1c\",\"1d\",\"1e\",\"1f\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"2a\",\"2b\",\"2c\",\"2d\",\"2e\",\"2f\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"3a\",\"3b\",\"3c\",\"3d\",\"3e\",\"3f\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"4a\",\"4b\",\"4c\",\"4d\",\"4e\",\"4f\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"5a\",\"5b\",\"5c\",\"5d\",\"5e\",\"5f\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"6a\",\"6b\",\"6c\",\"6d\",\"6e\",\"6f\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"7a\",\"7b\",\"7c\",\"7d\",\"7e\",\"7f\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"8a\",\"8b\",\"8c\",\"8d\",\"8e\",\"8f\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"9a\",\"9b\",\"9c\",\"9d\",\"9e\",\"9f\",\"a0\",\"a1\",\"a2\",\"a3\",\"a4\",\"a5\",\"a6\",\"a7\",\"a8\",\"a9\",\"aa\",\"ab\",\"ac\",\"ad\",\"ae\",\"af\",\"b0\",\"b1\",\"b2\",\"b3\",\"b4\",\"b5\",\"b6\",\"b7\",\"b8\",\"b9\",\"ba\",\"bb\",\"bc\",\"bd\",\"be\",\"bf\",\"c0\",\"c1\",\"c2\",\"c3\",\"c4\",\"c5\",\"c6\",\"c7\",\"c8\",\"c9\",\"ca\",\"cb\",\"cc\",\"cd\",\"ce\",\"cf\",\"d0\",\"d1\",\"d2\",\"d3\",\"d4\",\"d5\",\"d6\",\"d7\",\"d8\",\"d9\",\"da\",\"db\",\"dc\",\"dd\",\"de\",\"df\",\"e0\",\"e1\",\"e2\",\"e3\",\"e4\",\"e5\",\"e6\",\"e7\",\"e8\",\"e9\",\"ea\",\"eb\",\"ec\",\"ed\",\"ee\",\"ef\",\"f0\",\"f1\",\"f2\",\"f3\",\"f4\",\"f5\",\"f6\",\"f7\",\"f8\",\"f9\",\"fa\",\"fb\",\"fc\",\"fd\",\"fe\",\"ff\"];let Vs=1234567;const Ws=Math.PI/180,Us=180/Math.PI;function js(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,s=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ls[255&t]+Ls[t>>8&255]+Ls[t>>16&255]+Ls[t>>24&255]+\"-\"+Ls[255&e]+Ls[e>>8&255]+\"-\"+Ls[e>>16&15|64]+Ls[e>>24&255]+\"-\"+Ls[63&s|128]+Ls[s>>8&255]+\"-\"+Ls[s>>16&255]+Ls[s>>24&255]+Ls[255&i]+Ls[i>>8&255]+Ls[i>>16&255]+Ls[i>>24&255]).toLowerCase()}function Ds(t,e,s){return Math.max(e,Math.min(s,t))}function Hs(t,e){return(t%e+e)%e}function qs(t,e,s){return(1-s)*t+s*e}function Js(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error(\"Invalid component type.\")}}function Xs(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error(\"Invalid component type.\")}}const Ys={DEG2RAD:Ws,RAD2DEG:Us,generateUUID:js,clamp:Ds,euclideanModulo:Hs,mapLinear:function(t,e,s,i,r){return i+(t-e)*(r-i)/(s-e)},inverseLerp:function(t,e,s){return t!==e?(s-t)/(e-t):0},lerp:qs,damp:function(t,e,s,i){return qs(t,e,1-Math.exp(-s*i))},pingpong:function(t,e=1){return e-Math.abs(Hs(t,2*e)-e)},smoothstep:function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*(3-2*t)},smootherstep:function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Vs=t);let e=Vs+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*Ws},radToDeg:function(t){return t*Us},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,s,i,r){const n=Math.cos,o=Math.sin,a=n(s/2),h=o(s/2),l=n((e+i)/2),c=o((e+i)/2),u=n((e-i)/2),d=o((e-i)/2),p=n((i-e)/2),m=o((i-e)/2);switch(r){case\"XYX\":t.set(a*c,h*u,h*d,a*l);break;case\"YZY\":t.set(h*d,a*c,h*u,a*l);break;case\"ZXZ\":t.set(h*u,h*d,a*c,a*l);break;case\"XZX\":t.set(a*c,h*m,h*p,a*l);break;case\"YXY\":t.set(h*p,a*c,h*m,a*l);break;case\"ZYZ\":t.set(h*m,h*p,a*c,a*l);break;default:console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: \"+r)}},normalize:Xs,denormalize:Js};class Zs{constructor(t=0,e=0){Zs.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error(\"index is out of range: \"+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,s=this.y,i=t.elements;return this.x=i[0]*e+i[3]*s+i[6],this.y=i[1]*e+i[4]*s+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Ds(this.x,t.x,e.x),this.y=Ds(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Ds(this.x,t,e),this.y=Ds(this.y,t,e),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ds(s,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(Ds(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y;return e*e+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const s=Math.cos(e),i=Math.sin(e),r=this.x-t.x,n=this.y-t.y;return this.x=r*s-n*i+t.x,this.y=r*i+n*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Gs{constructor(t,e,s,i,r,n,o,a,h){Gs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,s,i,r,n,o,a,h)}set(t,e,s,i,r,n,o,a,h){const l=this.elements;return l[0]=t,l[1]=i,l[2]=o,l[3]=e,l[4]=r,l[5]=a,l[6]=s,l[7]=n,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this}extractBasis(t,e,s){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,n=s[0],o=s[3],a=s[6],h=s[1],l=s[4],c=s[7],u=s[2],d=s[5],p=s[8],m=i[0],y=i[3],f=i[6],g=i[1],x=i[4],b=i[7],v=i[2],w=i[5],M=i[8];return r[0]=n*m+o*g+a*v,r[3]=n*y+o*x+a*w,r[6]=n*f+o*b+a*M,r[1]=h*m+l*g+c*v,r[4]=h*y+l*x+c*w,r[7]=h*f+l*b+c*M,r[2]=u*m+d*g+p*v,r[5]=u*y+d*x+p*w,r[8]=u*f+d*b+p*M,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*n*l-e*o*h-s*r*l+s*o*a+i*r*h-i*n*a}invert(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=l*n-o*h,u=o*a-l*r,d=h*r-n*a,p=e*c+s*u+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=c*m,t[1]=(i*h-l*s)*m,t[2]=(o*s-i*n)*m,t[3]=u*m,t[4]=(l*e-i*a)*m,t[5]=(i*r-o*e)*m,t[6]=d*m,t[7]=(s*a-h*e)*m,t[8]=(n*e-s*r)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,s,i,r,n,o){const a=Math.cos(r),h=Math.sin(r);return this.set(s*a,s*h,-s*(a*n+h*o)+n+t,-i*h,i*a,-i*(-h*n+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply($s.makeScale(t,e)),this}rotate(t){return this.premultiply($s.makeRotation(-t)),this}translate(t,e){return this.premultiply($s.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<9;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<9;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const $s=new Gs;function Qs(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Ks={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ti(t,e){return new Ks[t](e)}function ei(t){return document.createElementNS(\"http://www.w3.org/1999/xhtml\",t)}function si(){const t=ei(\"canvas\");return t.style.display=\"block\",t}const ii={};function ri(t){t in ii||(ii[t]=!0,console.warn(t))}function ni(t,e,s){return new Promise((function(i,r){setTimeout((function n(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(n,s);break;default:i()}}),s)}))}function oi(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function ai(t){const e=t.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}const hi=(new Gs).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),li=(new Gs).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ci(){const t={enabled:!0,workingColorSpace:$e,spaces:{},convert:function(t,e,s){return!1!==this.enabled&&e!==s&&e&&s?(this.spaces[e].transfer===Ke&&(t.r=di(t.r),t.g=di(t.g),t.b=di(t.b)),this.spaces[e].primaries!==this.spaces[s].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Ke&&(t.r=pi(t.r),t.g=pi(t.g),t.b=pi(t.b)),t):t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return\"\"===t?Qe:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,s){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],s=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[$e]:{primaries:e,whitePoint:i,transfer:Qe,toXYZ:hi,fromXYZ:li,luminanceCoefficients:s,workingColorSpaceConfig:{unpackColorSpace:Ge},outputColorSpaceConfig:{drawingBufferColorSpace:Ge}},[Ge]:{primaries:e,whitePoint:i,transfer:Ke,toXYZ:hi,fromXYZ:li,luminanceCoefficients:s,outputColorSpaceConfig:{drawingBufferColorSpace:Ge}}}),t}const ui=ci();function di(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function pi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let mi;class yi{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if(\"undefined\"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===mi&&(mi=ei(\"canvas\")),mi.width=t.width,mi.height=t.height;const s=mi.getContext(\"2d\");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),e=mi}return e.width>2048||e.height>2048?(console.warn(\"THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons\",t),e.toDataURL(\"image/jpeg\",.6)):e.toDataURL(\"image/png\")}static sRGBToLinear(t){if(\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=ei(\"canvas\");e.width=t.width,e.height=t.height;const s=e.getContext(\"2d\");s.drawImage(t,0,0,t.width,t.height);const i=s.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*di(r[t]/255);return s.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*di(e[t]/255)):e[t]=di(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn(\"THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.\"),t}}let fi=0;class gi{constructor(t=null){this.isSource=!0,Object.defineProperty(this,\"id\",{value:fi++}),this.uuid=js(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||\"string\"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const s={uuid:this.uuid,url:\"\"},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,s=i.length;e<s;e++)i[e].isDataTexture?t.push(xi(i[e].image)):t.push(xi(i[e]))}else t=xi(i);s.url=t}return e||(t.images[this.uuid]=s),s}}function xi(t){return\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap?yi.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn(\"THREE.Texture: Unable to serialize Texture.\"),{})}let bi=0;class vi extends Ns{constructor(t=vi.DEFAULT_IMAGE,e=vi.DEFAULT_MAPPING,s=1001,i=1001,r=1006,n=1008,o=1023,a=Tt,h=vi.DEFAULT_ANISOTROPY,l=\"\"){super(),this.isTexture=!0,Object.defineProperty(this,\"id\",{value:bi++}),this.uuid=js(),this.name=\"\",this.source=new gi(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=s,this.wrapT=i,this.magFilter=r,this.minFilter=n,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Zs(0,0),this.repeat=new Zs(1,1),this.center=new Zs(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||\"string\"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const s={metadata:{version:4.6,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),e||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:\"dispose\"})}transformUv(t){if(this.mapping!==at)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case pt:t.x=t.x-Math.floor(t.x);break;case mt:t.x=t.x<0?0:1;break;case yt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case pt:t.y=t.y-Math.floor(t.y);break;case mt:t.y=t.y<0?0:1;break;case yt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}vi.DEFAULT_IMAGE=null,vi.DEFAULT_MAPPING=at,vi.DEFAULT_ANISOTROPY=1;class wi{constructor(t=0,e=0,s=0,i=1){wi.prototype.isVector4=!0,this.x=t,this.y=e,this.z=s,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error(\"index is out of range: \"+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,s=this.y,i=this.z,r=this.w,n=t.elements;return this.x=n[0]*e+n[4]*s+n[8]*i+n[12]*r,this.y=n[1]*e+n[5]*s+n[9]*i+n[13]*r,this.z=n[2]*e+n[6]*s+n[10]*i+n[14]*r,this.w=n[3]*e+n[7]*s+n[11]*i+n[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,s,i,r;const n=.01,o=.1,a=t.elements,h=a[0],l=a[4],c=a[8],u=a[1],d=a[5],p=a[9],m=a[2],y=a[6],f=a[10];if(Math.abs(l-u)<n&&Math.abs(c-m)<n&&Math.abs(p-y)<n){if(Math.abs(l+u)<o&&Math.abs(c+m)<o&&Math.abs(p+y)<o&&Math.abs(h+d+f-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(h+1)/2,a=(d+1)/2,g=(f+1)/2,x=(l+u)/4,b=(c+m)/4,v=(p+y)/4;return t>a&&t>g?t<n?(s=0,i=.707106781,r=.707106781):(s=Math.sqrt(t),i=x/s,r=b/s):a>g?a<n?(s=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),s=x/i,r=v/i):g<n?(s=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),s=b/r,i=v/r),this.set(s,i,r,e),this}let g=Math.sqrt((y-p)*(y-p)+(c-m)*(c-m)+(u-l)*(u-l));return Math.abs(g)<.001&&(g=1),this.x=(y-p)/g,this.y=(c-m)/g,this.z=(u-l)/g,this.w=Math.acos((h+d+f-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Ds(this.x,t.x,e.x),this.y=Ds(this.y,t.y,e.y),this.z=Ds(this.z,t.z,e.z),this.w=Ds(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Ds(this.x,t,e),this.y=Ds(this.y,t,e),this.z=Ds(this.z,t,e),this.w=Ds(this.w,t,e),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ds(s,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this.w=t.w+(e.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Mi extends Ns{constructor(t=1,e=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new wi(0,0,t,e),this.scissorTest=!1,this.viewport=new wi(0,0,t,e);const i={width:t,height:e,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const r=new vi(i,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);r.flipY=!1,r.generateMipmaps=s.generateMipmaps,r.internalFormat=s.internalFormat,this.textures=[];const n=s.count;for(let t=0;t<n;t++)this.textures[t]=r.clone(),this.textures[t].isRenderTargetTexture=!0;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,s=1){if(this.width!==t||this.height!==e||this.depth!==s){this.width=t,this.height=e,this.depth=s;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=s;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,s=t.textures.length;e<s;e++)this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new gi(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:\"dispose\"})}}class Si extends Mi{constructor(t=1,e=1,s={}){super(t,e,s),this.isWebGLRenderTarget=!0}}class _i extends vi{constructor(t=null,e=1,s=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:s,depth:i},this.magFilter=ft,this.minFilter=ft,this.wrapR=mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ai extends Si{constructor(t=1,e=1,s=1,i={}){super(t,e,i),this.isWebGLArrayRenderTarget=!0,this.depth=s,this.texture=new _i(null,t,e,s),this.texture.isRenderTargetTexture=!0}}class Ti extends vi{constructor(t=null,e=1,s=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:s,depth:i},this.magFilter=ft,this.minFilter=ft,this.wrapR=mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class zi extends Si{constructor(t=1,e=1,s=1,i={}){super(t,e,i),this.isWebGL3DRenderTarget=!0,this.depth=s,this.texture=new Ti(null,t,e,s),this.texture.isRenderTargetTexture=!0}}class Ci{constructor(t=0,e=0,s=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=s,this._w=i}static slerpFlat(t,e,s,i,r,n,o){let a=s[i+0],h=s[i+1],l=s[i+2],c=s[i+3];const u=r[n+0],d=r[n+1],p=r[n+2],m=r[n+3];if(0===o)return t[e+0]=a,t[e+1]=h,t[e+2]=l,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=m);if(c!==m||a!==u||h!==d||l!==p){let t=1-o;const e=a*u+h*d+l*p+c*m,s=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),n=Math.atan2(r,e*s);t=Math.sin(t*n)/r,o=Math.sin(o*n)/r}const r=o*s;if(a=a*t+u*r,h=h*t+d*r,l=l*t+p*r,c=c*t+m*r,t===1-o){const t=1/Math.sqrt(a*a+h*h+l*l+c*c);a*=t,h*=t,l*=t,c*=t}}t[e]=a,t[e+1]=h,t[e+2]=l,t[e+3]=c}static multiplyQuaternionsFlat(t,e,s,i,r,n){const o=s[i],a=s[i+1],h=s[i+2],l=s[i+3],c=r[n],u=r[n+1],d=r[n+2],p=r[n+3];return t[e]=o*p+l*c+a*d-h*u,t[e+1]=a*p+l*u+h*c-o*d,t[e+2]=h*p+l*d+o*u-a*c,t[e+3]=l*p-o*c-a*u-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,s,i){return this._x=t,this._y=e,this._z=s,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const s=t._x,i=t._y,r=t._z,n=t._order,o=Math.cos,a=Math.sin,h=o(s/2),l=o(i/2),c=o(r/2),u=a(s/2),d=a(i/2),p=a(r/2);switch(n){case\"XYZ\":this._x=u*l*c+h*d*p,this._y=h*d*c-u*l*p,this._z=h*l*p+u*d*c,this._w=h*l*c-u*d*p;break;case\"YXZ\":this._x=u*l*c+h*d*p,this._y=h*d*c-u*l*p,this._z=h*l*p-u*d*c,this._w=h*l*c+u*d*p;break;case\"ZXY\":this._x=u*l*c-h*d*p,this._y=h*d*c+u*l*p,this._z=h*l*p+u*d*c,this._w=h*l*c-u*d*p;break;case\"ZYX\":this._x=u*l*c-h*d*p,this._y=h*d*c+u*l*p,this._z=h*l*p-u*d*c,this._w=h*l*c+u*d*p;break;case\"YZX\":this._x=u*l*c+h*d*p,this._y=h*d*c+u*l*p,this._z=h*l*p-u*d*c,this._w=h*l*c-u*d*p;break;case\"XZY\":this._x=u*l*c-h*d*p,this._y=h*d*c-u*l*p,this._z=h*l*p+u*d*c,this._w=h*l*c+u*d*p;break;default:console.warn(\"THREE.Quaternion: .setFromEuler() encountered an unknown order: \"+n)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const s=e/2,i=Math.sin(s);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,s=e[0],i=e[4],r=e[8],n=e[1],o=e[5],a=e[9],h=e[2],l=e[6],c=e[10],u=s+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(l-a)*t,this._y=(r-h)*t,this._z=(n-i)*t}else if(s>o&&s>c){const t=2*Math.sqrt(1+s-o-c);this._w=(l-a)/t,this._x=.25*t,this._y=(i+n)/t,this._z=(r+h)/t}else if(o>c){const t=2*Math.sqrt(1+o-s-c);this._w=(r-h)/t,this._x=(i+n)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+c-s-o);this._w=(n-i)/t,this._x=(r+h)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let s=t.dot(e)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ds(this.dot(t),-1,1)))}rotateTowards(t,e){const s=this.angleTo(t);if(0===s)return this;const i=Math.min(1,e/s);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const s=t._x,i=t._y,r=t._z,n=t._w,o=e._x,a=e._y,h=e._z,l=e._w;return this._x=s*l+n*o+i*h-r*a,this._y=i*l+n*a+r*o-s*h,this._z=r*l+n*h+s*a-i*o,this._w=n*l-s*o-i*a-r*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const s=this._x,i=this._y,r=this._z,n=this._w;let o=n*t._w+s*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=n,this._x=s,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*n+e*this._w,this._x=t*s+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this}const h=Math.sqrt(a),l=Math.atan2(h,o),c=Math.sin((1-e)*l)/h,u=Math.sin(e*l)/h;return this._w=n*c+this._w*u,this._x=s*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,s){return this.copy(t).slerp(e,s)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),s=Math.random(),i=Math.sqrt(1-s),r=Math.sqrt(s);return this.set(i*Math.sin(t),i*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ii{constructor(t=0,e=0,s=0){Ii.prototype.isVector3=!0,this.x=t,this.y=e,this.z=s}set(t,e,s){return void 0===s&&(s=this.z),this.x=t,this.y=e,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error(\"index is out of range: \"+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(ki.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ki.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,s=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*s+r[6]*i,this.y=r[1]*e+r[4]*s+r[7]*i,this.z=r[2]*e+r[5]*s+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,s=this.y,i=this.z,r=t.elements,n=1/(r[3]*e+r[7]*s+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*s+r[8]*i+r[12])*n,this.y=(r[1]*e+r[5]*s+r[9]*i+r[13])*n,this.z=(r[2]*e+r[6]*s+r[10]*i+r[14])*n,this}applyQuaternion(t){const e=this.x,s=this.y,i=this.z,r=t.x,n=t.y,o=t.z,a=t.w,h=2*(n*i-o*s),l=2*(o*e-r*i),c=2*(r*s-n*e);return this.x=e+a*h+n*c-o*l,this.y=s+a*l+o*h-r*c,this.z=i+a*c+r*l-n*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,s=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*s+r[8]*i,this.y=r[1]*e+r[5]*s+r[9]*i,this.z=r[2]*e+r[6]*s+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Ds(this.x,t.x,e.x),this.y=Ds(this.y,t.y,e.y),this.z=Ds(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Ds(this.x,t,e),this.y=Ds(this.y,t,e),this.z=Ds(this.z,t,e),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ds(s,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const s=t.x,i=t.y,r=t.z,n=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*n-s*a,this.z=s*o-i*n,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const s=t.dot(this)/e;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Bi.copy(this).projectOnVector(t),this.sub(Bi)}reflect(t){return this.sub(Bi.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(Ds(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y,i=this.z-t.z;return e*e+s*s+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,s){const i=Math.sin(e)*t;return this.x=i*Math.sin(s),this.y=Math.cos(e)*t,this.z=i*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,s=Math.sqrt(1-e*e);return this.x=s*Math.cos(t),this.y=e,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Bi=new Ii,ki=new Ci;class Ei{constructor(t=new Ii(1/0,1/0,1/0),e=new Ii(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e+=3)this.expandByPoint(Pi.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,s=t.count;e<s;e++)this.expandByPoint(Pi.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const s=Pi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(void 0!==s){const i=s.getAttribute(\"position\");if(!0===e&&void 0!==i&&!0!==t.isInstancedMesh)for(let e=0,s=i.count;e<s;e++)!0===t.isMesh?t.getVertexPosition(e,Pi):Pi.fromBufferAttribute(i,e),Pi.applyMatrix4(t.matrixWorld),this.expandByPoint(Pi);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Oi.copy(t.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),Oi.copy(s.boundingBox)),Oi.applyMatrix4(t.matrixWorld),this.union(Oi)}const i=t.children;for(let t=0,s=i.length;t<s;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Pi),Pi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,s;return t.normal.x>0?(e=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),e<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ji),Di.subVectors(this.max,ji),Fi.subVectors(t.a,ji),Ni.subVectors(t.b,ji),Li.subVectors(t.c,ji),Vi.subVectors(Ni,Fi),Wi.subVectors(Li,Ni),Ui.subVectors(Fi,Li);let e=[0,-Vi.z,Vi.y,0,-Wi.z,Wi.y,0,-Ui.z,Ui.y,Vi.z,0,-Vi.x,Wi.z,0,-Wi.x,Ui.z,0,-Ui.x,-Vi.y,Vi.x,0,-Wi.y,Wi.x,0,-Ui.y,Ui.x,0];return!!Ji(e,Fi,Ni,Li,Di)&&(e=[1,0,0,0,1,0,0,0,1],!!Ji(e,Fi,Ni,Li,Di)&&(Hi.crossVectors(Vi,Wi),e=[Hi.x,Hi.y,Hi.z],Ji(e,Fi,Ni,Li,Di)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Pi).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Pi).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ri[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ri[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ri[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ri[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ri[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ri[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ri[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ri[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ri)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ri=[new Ii,new Ii,new Ii,new Ii,new Ii,new Ii,new Ii,new Ii],Pi=new Ii,Oi=new Ei,Fi=new Ii,Ni=new Ii,Li=new Ii,Vi=new Ii,Wi=new Ii,Ui=new Ii,ji=new Ii,Di=new Ii,Hi=new Ii,qi=new Ii;function Ji(t,e,s,i,r){for(let n=0,o=t.length-3;n<=o;n+=3){qi.fromArray(t,n);const o=r.x*Math.abs(qi.x)+r.y*Math.abs(qi.y)+r.z*Math.abs(qi.z),a=e.dot(qi),h=s.dot(qi),l=i.dot(qi);if(Math.max(-Math.max(a,h,l),Math.min(a,h,l))>o)return!1}return!0}const Xi=new Ei,Yi=new Ii,Zi=new Ii;class Gi{constructor(t=new Ii,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const s=this.center;void 0!==e?s.copy(e):Xi.setFromPoints(t).getCenter(s);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,s.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const s=this.center.distanceToSquared(t);return e.copy(t),s>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Yi.subVectors(t,this.center);const e=Yi.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),s=.5*(t-this.radius);this.center.addScaledVector(Yi,s/t),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Zi.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Yi.copy(t.center).add(Zi)),this.expandByPoint(Yi.copy(t.center).sub(Zi))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const $i=new Ii,Qi=new Ii,Ki=new Ii,tr=new Ii,er=new Ii,sr=new Ii,ir=new Ii;class rr{constructor(t=new Ii,e=new Ii(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,$i)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const s=e.dot(this.direction);return s<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=$i.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):($i.copy(this.origin).addScaledVector(this.direction,e),$i.distanceToSquared(t))}distanceSqToSegment(t,e,s,i){Qi.copy(t).add(e).multiplyScalar(.5),Ki.copy(e).sub(t).normalize(),tr.copy(this.origin).sub(Qi);const r=.5*t.distanceTo(e),n=-this.direction.dot(Ki),o=tr.dot(this.direction),a=-tr.dot(Ki),h=tr.lengthSq(),l=Math.abs(1-n*n);let c,u,d,p;if(l>0)if(c=n*a-o,u=n*o-a,p=r*l,c>=0)if(u>=-p)if(u<=p){const t=1/l;c*=t,u*=t,d=c*(c+n*u+2*o)+u*(n*c+u+2*a)+h}else u=r,c=Math.max(0,-(n*u+o)),d=-c*c+u*(u+2*a)+h;else u=-r,c=Math.max(0,-(n*u+o)),d=-c*c+u*(u+2*a)+h;else u<=-p?(c=Math.max(0,-(-n*r+o)),u=c>0?-r:Math.min(Math.max(-r,-a),r),d=-c*c+u*(u+2*a)+h):u<=p?(c=0,u=Math.min(Math.max(-r,-a),r),d=u*(u+2*a)+h):(c=Math.max(0,-(n*r+o)),u=c>0?r:Math.min(Math.max(-r,-a),r),d=-c*c+u*(u+2*a)+h);else u=n>0?-r:r,c=Math.max(0,-(n*u+o)),d=-c*c+u*(u+2*a)+h;return s&&s.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(Qi).addScaledVector(Ki,u),d}intersectSphere(t,e){$i.subVectors(t.center,this.origin);const s=$i.dot(this.direction),i=$i.dot($i)-s*s,r=t.radius*t.radius;if(i>r)return null;const n=Math.sqrt(r-i),o=s-n,a=s+n;return a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/e;return s>=0?s:null}intersectPlane(t,e){const s=this.distanceToPlane(t);return null===s?null:this.at(s,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let s,i,r,n,o,a;const h=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,u=this.origin;return h>=0?(s=(t.min.x-u.x)*h,i=(t.max.x-u.x)*h):(s=(t.max.x-u.x)*h,i=(t.min.x-u.x)*h),l>=0?(r=(t.min.y-u.y)*l,n=(t.max.y-u.y)*l):(r=(t.max.y-u.y)*l,n=(t.min.y-u.y)*l),s>n||r>i?null:((r>s||isNaN(s))&&(s=r),(n<i||isNaN(i))&&(i=n),c>=0?(o=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(o=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),s>a||o>i?null:((o>s||s!=s)&&(s=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(s>=0?s:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,$i)}intersectTriangle(t,e,s,i,r){er.subVectors(e,t),sr.subVectors(s,t),ir.crossVectors(er,sr);let n,o=this.direction.dot(ir);if(o>0){if(i)return null;n=1}else{if(!(o<0))return null;n=-1,o=-o}tr.subVectors(this.origin,t);const a=n*this.direction.dot(sr.crossVectors(tr,sr));if(a<0)return null;const h=n*this.direction.dot(er.cross(tr));if(h<0)return null;if(a+h>o)return null;const l=-n*tr.dot(ir);return l<0?null:this.at(l/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class nr{constructor(t,e,s,i,r,n,o,a,h,l,c,u,d,p,m,y){nr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,s,i,r,n,o,a,h,l,c,u,d,p,m,y)}set(t,e,s,i,r,n,o,a,h,l,c,u,d,p,m,y){const f=this.elements;return f[0]=t,f[4]=e,f[8]=s,f[12]=i,f[1]=r,f[5]=n,f[9]=o,f[13]=a,f[2]=h,f[6]=l,f[10]=c,f[14]=u,f[3]=d,f[7]=p,f[11]=m,f[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new nr).fromArray(this.elements)}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}copyPosition(t){const e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,s=t.elements,i=1/or.setFromMatrixColumn(t,0).length(),r=1/or.setFromMatrixColumn(t,1).length(),n=1/or.setFromMatrixColumn(t,2).length();return e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=0,e[4]=s[4]*r,e[5]=s[5]*r,e[6]=s[6]*r,e[7]=0,e[8]=s[8]*n,e[9]=s[9]*n,e[10]=s[10]*n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,s=t.x,i=t.y,r=t.z,n=Math.cos(s),o=Math.sin(s),a=Math.cos(i),h=Math.sin(i),l=Math.cos(r),c=Math.sin(r);if(\"XYZ\"===t.order){const t=n*l,s=n*c,i=o*l,r=o*c;e[0]=a*l,e[4]=-a*c,e[8]=h,e[1]=s+i*h,e[5]=t-r*h,e[9]=-o*a,e[2]=r-t*h,e[6]=i+s*h,e[10]=n*a}else if(\"YXZ\"===t.order){const t=a*l,s=a*c,i=h*l,r=h*c;e[0]=t+r*o,e[4]=i*o-s,e[8]=n*h,e[1]=n*c,e[5]=n*l,e[9]=-o,e[2]=s*o-i,e[6]=r+t*o,e[10]=n*a}else if(\"ZXY\"===t.order){const t=a*l,s=a*c,i=h*l,r=h*c;e[0]=t-r*o,e[4]=-n*c,e[8]=i+s*o,e[1]=s+i*o,e[5]=n*l,e[9]=r-t*o,e[2]=-n*h,e[6]=o,e[10]=n*a}else if(\"ZYX\"===t.order){const t=n*l,s=n*c,i=o*l,r=o*c;e[0]=a*l,e[4]=i*h-s,e[8]=t*h+r,e[1]=a*c,e[5]=r*h+t,e[9]=s*h-i,e[2]=-h,e[6]=o*a,e[10]=n*a}else if(\"YZX\"===t.order){const t=n*a,s=n*h,i=o*a,r=o*h;e[0]=a*l,e[4]=r-t*c,e[8]=i*c+s,e[1]=c,e[5]=n*l,e[9]=-o*l,e[2]=-h*l,e[6]=s*c+i,e[10]=t-r*c}else if(\"XZY\"===t.order){const t=n*a,s=n*h,i=o*a,r=o*h;e[0]=a*l,e[4]=-c,e[8]=h*l,e[1]=t*c+r,e[5]=n*l,e[9]=s*c-i,e[2]=i*c-s,e[6]=o*l,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(hr,t,lr)}lookAt(t,e,s){const i=this.elements;return dr.subVectors(t,e),0===dr.lengthSq()&&(dr.z=1),dr.normalize(),cr.crossVectors(s,dr),0===cr.lengthSq()&&(1===Math.abs(s.z)?dr.x+=1e-4:dr.z+=1e-4,dr.normalize(),cr.crossVectors(s,dr)),cr.normalize(),ur.crossVectors(dr,cr),i[0]=cr.x,i[4]=ur.x,i[8]=dr.x,i[1]=cr.y,i[5]=ur.y,i[9]=dr.y,i[2]=cr.z,i[6]=ur.z,i[10]=dr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,n=s[0],o=s[4],a=s[8],h=s[12],l=s[1],c=s[5],u=s[9],d=s[13],p=s[2],m=s[6],y=s[10],f=s[14],g=s[3],x=s[7],b=s[11],v=s[15],w=i[0],M=i[4],S=i[8],_=i[12],A=i[1],T=i[5],z=i[9],C=i[13],I=i[2],B=i[6],k=i[10],E=i[14],R=i[3],P=i[7],O=i[11],F=i[15];return r[0]=n*w+o*A+a*I+h*R,r[4]=n*M+o*T+a*B+h*P,r[8]=n*S+o*z+a*k+h*O,r[12]=n*_+o*C+a*E+h*F,r[1]=l*w+c*A+u*I+d*R,r[5]=l*M+c*T+u*B+d*P,r[9]=l*S+c*z+u*k+d*O,r[13]=l*_+c*C+u*E+d*F,r[2]=p*w+m*A+y*I+f*R,r[6]=p*M+m*T+y*B+f*P,r[10]=p*S+m*z+y*k+f*O,r[14]=p*_+m*C+y*E+f*F,r[3]=g*w+x*A+b*I+v*R,r[7]=g*M+x*T+b*B+v*P,r[11]=g*S+x*z+b*k+v*O,r[15]=g*_+x*C+b*E+v*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[4],i=t[8],r=t[12],n=t[1],o=t[5],a=t[9],h=t[13],l=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+r*a*c-i*h*c-r*o*u+s*h*u+i*o*d-s*a*d)+t[7]*(+e*a*d-e*h*u+r*n*u-i*n*d+i*h*l-r*a*l)+t[11]*(+e*h*c-e*o*d-r*n*c+s*n*d+r*o*l-s*h*l)+t[15]*(-i*o*l-e*a*c+e*o*u+i*n*c-s*n*u+s*a*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,s){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=s),this}invert(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],n=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],p=t[12],m=t[13],y=t[14],f=t[15],g=c*y*h-m*u*h+m*a*d-o*y*d-c*a*f+o*u*f,x=p*u*h-l*y*h-p*a*d+n*y*d+l*a*f-n*u*f,b=l*m*h-p*c*h+p*o*d-n*m*d-l*o*f+n*c*f,v=p*c*a-l*m*a-p*o*u+n*m*u+l*o*y-n*c*y,w=e*g+s*x+i*b+r*v;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return t[0]=g*M,t[1]=(m*u*r-c*y*r-m*i*d+s*y*d+c*i*f-s*u*f)*M,t[2]=(o*y*r-m*a*r+m*i*h-s*y*h-o*i*f+s*a*f)*M,t[3]=(c*a*r-o*u*r-c*i*h+s*u*h+o*i*d-s*a*d)*M,t[4]=x*M,t[5]=(l*y*r-p*u*r+p*i*d-e*y*d-l*i*f+e*u*f)*M,t[6]=(p*a*r-n*y*r-p*i*h+e*y*h+n*i*f-e*a*f)*M,t[7]=(n*u*r-l*a*r+l*i*h-e*u*h-n*i*d+e*a*d)*M,t[8]=b*M,t[9]=(p*c*r-l*m*r-p*s*d+e*m*d+l*s*f-e*c*f)*M,t[10]=(n*m*r-p*o*r+p*s*h-e*m*h-n*s*f+e*o*f)*M,t[11]=(l*o*r-n*c*r-l*s*h+e*c*h+n*s*d-e*o*d)*M,t[12]=v*M,t[13]=(l*m*i-p*c*i+p*s*u-e*m*u-l*s*y+e*c*y)*M,t[14]=(p*o*i-n*m*i-p*s*a+e*m*a+n*s*y-e*o*y)*M,t[15]=(n*c*i-l*o*i+l*s*a-e*c*a-n*s*u+e*o*u)*M,this}scale(t){const e=this.elements,s=t.x,i=t.y,r=t.z;return e[0]*=s,e[4]*=i,e[8]*=r,e[1]*=s,e[5]*=i,e[9]*=r,e[2]*=s,e[6]*=i,e[10]*=r,e[3]*=s,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,i))}makeTranslation(t,e,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const s=Math.cos(e),i=Math.sin(e),r=1-s,n=t.x,o=t.y,a=t.z,h=r*n,l=r*o;return this.set(h*n+s,h*o-i*a,h*a+i*o,0,h*o+i*a,l*o+s,l*a-i*n,0,h*a-i*o,l*a+i*n,r*a*a+s,0,0,0,0,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,e,s,i,r,n){return this.set(1,s,r,0,t,1,n,0,e,i,1,0,0,0,0,1),this}compose(t,e,s){const i=this.elements,r=e._x,n=e._y,o=e._z,a=e._w,h=r+r,l=n+n,c=o+o,u=r*h,d=r*l,p=r*c,m=n*l,y=n*c,f=o*c,g=a*h,x=a*l,b=a*c,v=s.x,w=s.y,M=s.z;return i[0]=(1-(m+f))*v,i[1]=(d+b)*v,i[2]=(p-x)*v,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(u+f))*w,i[6]=(y+g)*w,i[7]=0,i[8]=(p+x)*M,i[9]=(y-g)*M,i[10]=(1-(u+m))*M,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,s){const i=this.elements;let r=or.set(i[0],i[1],i[2]).length();const n=or.set(i[4],i[5],i[6]).length(),o=or.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],ar.copy(this);const a=1/r,h=1/n,l=1/o;return ar.elements[0]*=a,ar.elements[1]*=a,ar.elements[2]*=a,ar.elements[4]*=h,ar.elements[5]*=h,ar.elements[6]*=h,ar.elements[8]*=l,ar.elements[9]*=l,ar.elements[10]*=l,e.setFromRotationMatrix(ar),s.x=r,s.y=n,s.z=o,this}makePerspective(t,e,s,i,r,n,o=2e3){const a=this.elements,h=2*r/(e-t),l=2*r/(s-i),c=(e+t)/(e-t),u=(s+i)/(s-i);let d,p;if(o===Os)d=-(n+r)/(n-r),p=-2*n*r/(n-r);else{if(o!==Fs)throw new Error(\"THREE.Matrix4.makePerspective(): Invalid coordinate system: \"+o);d=-n/(n-r),p=-n*r/(n-r)}return a[0]=h,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,s,i,r,n,o=2e3){const a=this.elements,h=1/(e-t),l=1/(s-i),c=1/(n-r),u=(e+t)*h,d=(s+i)*l;let p,m;if(o===Os)p=(n+r)*c,m=-2*c;else{if(o!==Fs)throw new Error(\"THREE.Matrix4.makeOrthographic(): Invalid coordinate system: \"+o);p=r*c,m=-1*c}return a[0]=2*h,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=m,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<16;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<16;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}const or=new Ii,ar=new nr,hr=new Ii(0,0,0),lr=new Ii(1,1,1),cr=new Ii,ur=new Ii,dr=new Ii,pr=new nr,mr=new Ci;class yr{constructor(t=0,e=0,s=0,i=yr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=s,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,s,i=this._order){return this._x=t,this._y=e,this._z=s,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,s=!0){const i=t.elements,r=i[0],n=i[4],o=i[8],a=i[1],h=i[5],l=i[9],c=i[2],u=i[6],d=i[10];switch(e){case\"XYZ\":this._y=Math.asin(Ds(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-n,r)):(this._x=Math.atan2(u,h),this._z=0);break;case\"YXZ\":this._x=Math.asin(-Ds(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,h)):(this._y=Math.atan2(-c,r),this._z=0);break;case\"ZXY\":this._x=Math.asin(Ds(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-n,h)):(this._y=0,this._z=Math.atan2(a,r));break;case\"ZYX\":this._y=Math.asin(-Ds(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-n,h));break;case\"YZX\":this._z=Math.asin(Ds(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,d));break;case\"XZY\":this._z=Math.asin(-Ds(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(u,h),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn(\"THREE.Euler: .setFromRotationMatrix() encountered an unknown order: \"+e)}return this._order=e,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,e,s){return pr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(pr,e,s)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return mr.setFromEuler(this),this.setFromQuaternion(mr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}yr.DEFAULT_ORDER=\"XYZ\";class fr{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let gr=0;const xr=new Ii,br=new Ci,vr=new nr,wr=new Ii,Mr=new Ii,Sr=new Ii,_r=new Ci,Ar=new Ii(1,0,0),Tr=new Ii(0,1,0),zr=new Ii(0,0,1),Cr={type:\"added\"},Ir={type:\"removed\"},Br={type:\"childadded\",child:null},kr={type:\"childremoved\",child:null};class Er extends Ns{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,\"id\",{value:gr++}),this.uuid=js(),this.name=\"\",this.type=\"Object3D\",this.parent=null,this.children=[],this.up=Er.DEFAULT_UP.clone();const t=new Ii,e=new yr,s=new Ci,i=new Ii(1,1,1);e._onChange((function(){s.setFromEuler(e,!1)})),s._onChange((function(){e.setFromQuaternion(s,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nr},normalMatrix:{value:new Gs}}),this.matrix=new nr,this.matrixWorld=new nr,this.matrixAutoUpdate=Er.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return br.setFromAxisAngle(t,e),this.quaternion.multiply(br),this}rotateOnWorldAxis(t,e){return br.setFromAxisAngle(t,e),this.quaternion.premultiply(br),this}rotateX(t){return this.rotateOnAxis(Ar,t)}rotateY(t){return this.rotateOnAxis(Tr,t)}rotateZ(t){return this.rotateOnAxis(zr,t)}translateOnAxis(t,e){return xr.copy(t).applyQuaternion(this.quaternion),this.position.add(xr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ar,t)}translateY(t){return this.translateOnAxis(Tr,t)}translateZ(t){return this.translateOnAxis(zr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(vr.copy(this.matrixWorld).invert())}lookAt(t,e,s){t.isVector3?wr.copy(t):wr.set(t,e,s);const i=this.parent;this.updateWorldMatrix(!0,!1),Mr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vr.lookAt(Mr,wr,this.up):vr.lookAt(wr,Mr,this.up),this.quaternion.setFromRotationMatrix(vr),i&&(vr.extractRotation(i.matrixWorld),br.setFromRotationMatrix(vr),this.quaternion.premultiply(br.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Cr),Br.child=t,this.dispatchEvent(Br),Br.child=null):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ir),kr.child=t,this.dispatchEvent(kr),kr.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),vr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),vr.multiply(t.parent.matrixWorld)),t.applyMatrix4(vr),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Cr),Br.child=t,this.dispatchEvent(Br),Br.child=null,this}getObjectById(t){return this.getObjectByProperty(\"id\",t)}getObjectByName(t){return this.getObjectByProperty(\"name\",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let s=0,i=this.children.length;s<i;s++){const i=this.children[s].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e,s=[]){this[t]===e&&s.push(this);const i=this.children;for(let r=0,n=i.length;r<n;r++)i[r].getObjectsByProperty(t,e,s);return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mr,t,Sr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mr,_r,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let s=0,i=e.length;s<i;s++)e[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let s=0,i=e.length;s<i;s++)e[s].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let s=0,i=e.length;s<i;s++){e[s].updateMatrixWorld(t)}}updateWorldMatrix(t,e){const s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,s=t.length;e<s;e++){t[e].updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||\"string\"==typeof t,s={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:\"Object\",generator:\"Object3D.toJSON\"});const i={};function r(e,s){return void 0===e[s.uuid]&&(e[s.uuid]=s.toJSON(t)),s.uuid}if(i.uuid=this.uuid,i.type=this.type,\"\"!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type=\"InstancedMesh\",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type=\"BatchedMesh\",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const s=e.shapes;if(Array.isArray(s))for(let e=0,i=s.length;e<i;e++){const i=s[e];r(t.shapes,i)}else r(t.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let s=0,i=this.material.length;s<i;s++)e.push(r(t.materials,this.material[s]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const s=this.animations[e];i.animations.push(r(t.animations,s))}}if(e){const e=n(t.geometries),i=n(t.materials),r=n(t.textures),o=n(t.images),a=n(t.shapes),h=n(t.skeletons),l=n(t.animations),c=n(t.nodes);e.length>0&&(s.geometries=e),i.length>0&&(s.materials=i),r.length>0&&(s.textures=r),o.length>0&&(s.images=o),a.length>0&&(s.shapes=a),h.length>0&&(s.skeletons=h),l.length>0&&(s.animations=l),c.length>0&&(s.nodes=c)}return s.object=i,s;function n(t){const e=[];for(const s in t){const i=t[s];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const s=t.children[e];this.add(s.clone())}return this}}Er.DEFAULT_UP=new Ii(0,1,0),Er.DEFAULT_MATRIX_AUTO_UPDATE=!0,Er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Rr=new Ii,Pr=new Ii,Or=new Ii,Fr=new Ii,Nr=new Ii,Lr=new Ii,Vr=new Ii,Wr=new Ii,Ur=new Ii,jr=new Ii,Dr=new wi,Hr=new wi,qr=new wi;class Jr{constructor(t=new Ii,e=new Ii,s=new Ii){this.a=t,this.b=e,this.c=s}static getNormal(t,e,s,i){i.subVectors(s,e),Rr.subVectors(t,e),i.cross(Rr);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,s,i,r){Rr.subVectors(i,e),Pr.subVectors(s,e),Or.subVectors(t,e);const n=Rr.dot(Rr),o=Rr.dot(Pr),a=Rr.dot(Or),h=Pr.dot(Pr),l=Pr.dot(Or),c=n*h-o*o;if(0===c)return r.set(0,0,0),null;const u=1/c,d=(h*a-o*l)*u,p=(n*l-o*a)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,s,i){return null!==this.getBarycoord(t,e,s,i,Fr)&&(Fr.x>=0&&Fr.y>=0&&Fr.x+Fr.y<=1)}static getInterpolation(t,e,s,i,r,n,o,a){return null===this.getBarycoord(t,e,s,i,Fr)?(a.x=0,a.y=0,\"z\"in a&&(a.z=0),\"w\"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,Fr.x),a.addScaledVector(n,Fr.y),a.addScaledVector(o,Fr.z),a)}static getInterpolatedAttribute(t,e,s,i,r,n){return Dr.setScalar(0),Hr.setScalar(0),qr.setScalar(0),Dr.fromBufferAttribute(t,e),Hr.fromBufferAttribute(t,s),qr.fromBufferAttribute(t,i),n.setScalar(0),n.addScaledVector(Dr,r.x),n.addScaledVector(Hr,r.y),n.addScaledVector(qr,r.z),n}static isFrontFacing(t,e,s,i){return Rr.subVectors(s,e),Pr.subVectors(t,e),Rr.cross(Pr).dot(i)<0}set(t,e,s){return this.a.copy(t),this.b.copy(e),this.c.copy(s),this}setFromPointsAndIndices(t,e,s,i){return this.a.copy(t[e]),this.b.copy(t[s]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,s,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Rr.subVectors(this.c,this.b),Pr.subVectors(this.a,this.b),.5*Rr.cross(Pr).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Jr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Jr.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,s,i,r){return Jr.getInterpolation(t,this.a,this.b,this.c,e,s,i,r)}containsPoint(t){return Jr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Jr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const s=this.a,i=this.b,r=this.c;let n,o;Nr.subVectors(i,s),Lr.subVectors(r,s),Wr.subVectors(t,s);const a=Nr.dot(Wr),h=Lr.dot(Wr);if(a<=0&&h<=0)return e.copy(s);Ur.subVectors(t,i);const l=Nr.dot(Ur),c=Lr.dot(Ur);if(l>=0&&c<=l)return e.copy(i);const u=a*c-l*h;if(u<=0&&a>=0&&l<=0)return n=a/(a-l),e.copy(s).addScaledVector(Nr,n);jr.subVectors(t,r);const d=Nr.dot(jr),p=Lr.dot(jr);if(p>=0&&d<=p)return e.copy(r);const m=d*h-a*p;if(m<=0&&h>=0&&p<=0)return o=h/(h-p),e.copy(s).addScaledVector(Lr,o);const y=l*p-d*c;if(y<=0&&c-l>=0&&d-p>=0)return Vr.subVectors(r,i),o=(c-l)/(c-l+(d-p)),e.copy(i).addScaledVector(Vr,o);const f=1/(y+m+u);return n=m*f,o=u*f,e.copy(s).addScaledVector(Nr,n).addScaledVector(Lr,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yr={h:0,s:0,l:0},Zr={h:0,s:0,l:0};function Gr(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+6*(e-t)*(2/3-s):t}class $r{constructor(t,e,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,s)}set(t,e,s){if(void 0===e&&void 0===s){const e=t;e&&e.isColor?this.copy(e):\"number\"==typeof e?this.setHex(e):\"string\"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ge){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ui.toWorkingColorSpace(this,e),this}setRGB(t,e,s,i=ui.workingColorSpace){return this.r=t,this.g=e,this.b=s,ui.toWorkingColorSpace(this,i),this}setHSL(t,e,s,i=ui.workingColorSpace){if(t=Hs(t,1),e=Ds(e,0,1),s=Ds(s,0,1),0===e)this.r=this.g=this.b=s;else{const i=s<=.5?s*(1+e):s+e-s*e,r=2*s-i;this.r=Gr(r,i,t+1/3),this.g=Gr(r,i,t),this.b=Gr(r,i,t-1/3)}return ui.toWorkingColorSpace(this,i),this}setStyle(t,e=Ge){function s(e){void 0!==e&&parseFloat(e)<1&&console.warn(\"THREE.Color: Alpha component of \"+t+\" will be ignored.\")}let i;if(i=/^(\\w+)\\(([^\\)]*)\\)/.exec(t)){let r;const n=i[1],o=i[2];switch(n){case\"rgb\":case\"rgba\":if(r=/^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(o))return s(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(o))return s(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case\"hsl\":case\"hsla\":if(r=/^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(o))return s(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn(\"THREE.Color: Unknown color model \"+t)}}else if(i=/^\\#([A-Fa-f\\d]+)$/.exec(t)){const s=i[1],r=s.length;if(3===r)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(s,16),e);console.warn(\"THREE.Color: Invalid hex color \"+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ge){const s=Xr[t.toLowerCase()];return void 0!==s?this.setHex(s,e):console.warn(\"THREE.Color: Unknown color \"+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=di(t.r),this.g=di(t.g),this.b=di(t.b),this}copyLinearToSRGB(t){return this.r=pi(t.r),this.g=pi(t.g),this.b=pi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ge){return ui.fromWorkingColorSpace(Qr.copy(this),t),65536*Math.round(Ds(255*Qr.r,0,255))+256*Math.round(Ds(255*Qr.g,0,255))+Math.round(Ds(255*Qr.b,0,255))}getHexString(t=Ge){return(\"000000\"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=ui.workingColorSpace){ui.fromWorkingColorSpace(Qr.copy(this),e);const s=Qr.r,i=Qr.g,r=Qr.b,n=Math.max(s,i,r),o=Math.min(s,i,r);let a,h;const l=(o+n)/2;if(o===n)a=0,h=0;else{const t=n-o;switch(h=l<=.5?t/(n+o):t/(2-n-o),n){case s:a=(i-r)/t+(i<r?6:0);break;case i:a=(r-s)/t+2;break;case r:a=(s-i)/t+4}a/=6}return t.h=a,t.s=h,t.l=l,t}getRGB(t,e=ui.workingColorSpace){return ui.fromWorkingColorSpace(Qr.copy(this),e),t.r=Qr.r,t.g=Qr.g,t.b=Qr.b,t}getStyle(t=Ge){ui.fromWorkingColorSpace(Qr.copy(this),t);const e=Qr.r,s=Qr.g,i=Qr.b;return t!==Ge?`color(${t} ${e.toFixed(3)} ${s.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*s)},${Math.round(255*i)})`}offsetHSL(t,e,s){return this.getHSL(Yr),this.setHSL(Yr.h+t,Yr.s+e,Yr.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,s){return this.r=t.r+(e.r-t.r)*s,this.g=t.g+(e.g-t.g)*s,this.b=t.b+(e.b-t.b)*s,this}lerpHSL(t,e){this.getHSL(Yr),t.getHSL(Zr);const s=qs(Yr.h,Zr.h,e),i=qs(Yr.s,Zr.s,e),r=qs(Yr.l,Zr.l,e);return this.setHSL(s,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,s=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*s+r[6]*i,this.g=r[1]*e+r[4]*s+r[7]*i,this.b=r[2]*e+r[5]*s+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new $r;$r.NAMES=Xr;let Kr=0;class tn extends Ns{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,\"id\",{value:Kr++}),this.uuid=js(),this.name=\"\",this.type=\"Material\",this.blending=1,this.side=u,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $r(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=es,this.stencilZFail=es,this.stencilZPass=es,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const s=t[e];if(void 0===s){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(s):i&&i.isVector3&&s&&s.isVector3?i.copy(s):this[e]=s:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||\"string\"==typeof t;e&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:\"Material\",generator:\"Material.toJSON\"}};function i(t){const e=[];for(const s in t){const i=t[s];delete i.metadata,e.push(i)}return e}if(s.uuid=this.uuid,s.type=this.type,\"\"!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),this.side!==u&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==es&&(s.stencilFail=this.stencilFail),this.stencilZFail!==es&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==es&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(s.textures=e),r.length>0&&(s.images=r)}return s}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let s=null;if(null!==e){const t=e.length;s=new Array(t);for(let i=0;i!==t;++i)s[i]=e[i].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:\"dispose\"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn(\"Material: onBuild() has been removed.\")}}class en extends tn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type=\"MeshBasicMaterial\",this.color=new $r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const sn=rn();function rn(){const t=new ArrayBuffer(4),e=new Float32Array(t),s=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(i[t]=0,i[256|t]=32768,r[t]=24,r[256|t]=24):e<-14?(i[t]=1024>>-e-14,i[256|t]=1024>>-e-14|32768,r[t]=-e-1,r[256|t]=-e-1):e<=15?(i[t]=e+15<<10,i[256|t]=e+15<<10|32768,r[t]=13,r[256|t]=13):e<128?(i[t]=31744,i[256|t]=64512,r[t]=24,r[256|t]=24):(i[t]=31744,i[256|t]=64512,r[t]=13,r[256|t]=13)}const n=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,s=0;for(;0==(8388608&e);)e<<=1,s-=8388608;e&=-8388609,s+=947912704,n[t]=e|s}for(let t=1024;t<2048;++t)n[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)o[t]=t<<23;o[31]=1199570944,o[32]=2147483648;for(let t=33;t<63;++t)o[t]=2147483648+(t-32<<23);o[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(a[t]=1024);return{floatView:e,uint32View:s,baseTable:i,shiftTable:r,mantissaTable:n,exponentTable:o,offsetTable:a}}function nn(t){Math.abs(t)>65504&&console.warn(\"THREE.DataUtils.toHalfFloat(): Value out of range.\"),t=Ds(t,-65504,65504),sn.floatView[0]=t;const e=sn.uint32View[0],s=e>>23&511;return sn.baseTable[s]+((8388607&e)>>sn.shiftTable[s])}function on(t){const e=t>>10;return sn.uint32View[0]=sn.mantissaTable[sn.offsetTable[e]+(1023&t)]+sn.exponentTable[e],sn.floatView[0]}const an={toHalfFloat:nn,fromHalfFloat:on},hn=new Ii,ln=new Zs;class cn{constructor(t,e,s=!1){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.isBufferAttribute=!0,this.name=\"\",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=s,this.usage=_s,this.updateRanges=[],this.gpuType=Et,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,s){t*=this.itemSize,s*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[s+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,s=this.count;e<s;e++)ln.fromBufferAttribute(this,e),ln.applyMatrix3(t),this.setXY(e,ln.x,ln.y);else if(3===this.itemSize)for(let e=0,s=this.count;e<s;e++)hn.fromBufferAttribute(this,e),hn.applyMatrix3(t),this.setXYZ(e,hn.x,hn.y,hn.z);return this}applyMatrix4(t){for(let e=0,s=this.count;e<s;e++)hn.fromBufferAttribute(this,e),hn.applyMatrix4(t),this.setXYZ(e,hn.x,hn.y,hn.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)hn.fromBufferAttribute(this,e),hn.applyNormalMatrix(t),this.setXYZ(e,hn.x,hn.y,hn.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)hn.fromBufferAttribute(this,e),hn.transformDirection(t),this.setXYZ(e,hn.x,hn.y,hn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let s=this.array[t*this.itemSize+e];return this.normalized&&(s=Js(s,this.array)),s}setComponent(t,e,s){return this.normalized&&(s=Xs(s,this.array)),this.array[t*this.itemSize+e]=s,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Js(e,this.array)),e}setX(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Js(e,this.array)),e}setY(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Js(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Js(e,this.array)),e}setW(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,s){return t*=this.itemSize,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array)),this.array[t+0]=e,this.array[t+1]=s,this}setXYZ(t,e,s,i){return t*=this.itemSize,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array),i=Xs(i,this.array)),this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=i,this}setXYZW(t,e,s,i,r){return t*=this.itemSize,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array),i=Xs(i,this.array),r=Xs(r,this.array)),this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return\"\"!==this.name&&(t.name=this.name),this.usage!==_s&&(t.usage=this.usage),t}}class un extends cn{constructor(t,e,s){super(new Int8Array(t),e,s)}}class dn extends cn{constructor(t,e,s){super(new Uint8Array(t),e,s)}}class pn extends cn{constructor(t,e,s){super(new Uint8ClampedArray(t),e,s)}}class mn extends cn{constructor(t,e,s){super(new Int16Array(t),e,s)}}class yn extends cn{constructor(t,e,s){super(new Uint16Array(t),e,s)}}class fn extends cn{constructor(t,e,s){super(new Int32Array(t),e,s)}}class gn extends cn{constructor(t,e,s){super(new Uint32Array(t),e,s)}}class xn extends cn{constructor(t,e,s){super(new Uint16Array(t),e,s),this.isFloat16BufferAttribute=!0}getX(t){let e=on(this.array[t*this.itemSize]);return this.normalized&&(e=Js(e,this.array)),e}setX(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize]=nn(e),this}getY(t){let e=on(this.array[t*this.itemSize+1]);return this.normalized&&(e=Js(e,this.array)),e}setY(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize+1]=nn(e),this}getZ(t){let e=on(this.array[t*this.itemSize+2]);return this.normalized&&(e=Js(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize+2]=nn(e),this}getW(t){let e=on(this.array[t*this.itemSize+3]);return this.normalized&&(e=Js(e,this.array)),e}setW(t,e){return this.normalized&&(e=Xs(e,this.array)),this.array[t*this.itemSize+3]=nn(e),this}setXY(t,e,s){return t*=this.itemSize,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array)),this.array[t+0]=nn(e),this.array[t+1]=nn(s),this}setXYZ(t,e,s,i){return t*=this.itemSize,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array),i=Xs(i,this.array)),this.array[t+0]=nn(e),this.array[t+1]=nn(s),this.array[t+2]=nn(i),this}setXYZW(t,e,s,i,r){return t*=this.itemSize,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array),i=Xs(i,this.array),r=Xs(r,this.array)),this.array[t+0]=nn(e),this.array[t+1]=nn(s),this.array[t+2]=nn(i),this.array[t+3]=nn(r),this}}class bn extends cn{constructor(t,e,s){super(new Float32Array(t),e,s)}}let vn=0;const wn=new nr,Mn=new Er,Sn=new Ii,_n=new Ei,An=new Ei,Tn=new Ii;class zn extends Ns{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,\"id\",{value:vn++}),this.uuid=js(),this.name=\"\",this.type=\"BufferGeometry\",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Qs(t)?gn:yn)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,s=0){this.groups.push({start:t,count:e,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const e=(new Gs).getNormalMatrix(t);s.applyNormalMatrix(e),s.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return wn.makeRotationFromQuaternion(t),this.applyMatrix4(wn),this}rotateX(t){return wn.makeRotationX(t),this.applyMatrix4(wn),this}rotateY(t){return wn.makeRotationY(t),this.applyMatrix4(wn),this}rotateZ(t){return wn.makeRotationZ(t),this.applyMatrix4(wn),this}translate(t,e,s){return wn.makeTranslation(t,e,s),this.applyMatrix4(wn),this}scale(t,e,s){return wn.makeScale(t,e,s),this.applyMatrix4(wn),this}lookAt(t){return Mn.lookAt(t),Mn.updateMatrix(),this.applyMatrix4(Mn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sn).negate(),this.translate(Sn.x,Sn.y,Sn.z),this}setFromPoints(t){const e=this.getAttribute(\"position\");if(void 0===e){const e=[];for(let s=0,i=t.length;s<i;s++){const i=t[s];e.push(i.x,i.y,i.z||0)}this.setAttribute(\"position\",new bn(e,3))}else{const s=Math.min(t.length,e.count);for(let i=0;i<s;i++){const s=t[i];e.setXYZ(i,s.x,s.y,s.z||0)}t.length>e.count&&console.warn(\"THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.\"),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ei);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error(\"THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.\",this),void this.boundingBox.set(new Ii(-1/0,-1/0,-1/0),new Ii(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,s=e.length;t<s;t++){const s=e[t];_n.setFromBufferAttribute(s),this.morphTargetsRelative?(Tn.addVectors(this.boundingBox.min,_n.min),this.boundingBox.expandByPoint(Tn),Tn.addVectors(this.boundingBox.max,_n.max),this.boundingBox.expandByPoint(Tn)):(this.boundingBox.expandByPoint(_n.min),this.boundingBox.expandByPoint(_n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error(\"THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.\",this),void this.boundingSphere.set(new Ii,1/0);if(t){const s=this.boundingSphere.center;if(_n.setFromBufferAttribute(t),e)for(let t=0,s=e.length;t<s;t++){const s=e[t];An.setFromBufferAttribute(s),this.morphTargetsRelative?(Tn.addVectors(_n.min,An.min),_n.expandByPoint(Tn),Tn.addVectors(_n.max,An.max),_n.expandByPoint(Tn)):(_n.expandByPoint(An.min),_n.expandByPoint(An.max))}_n.getCenter(s);let i=0;for(let e=0,r=t.count;e<r;e++)Tn.fromBufferAttribute(t,e),i=Math.max(i,s.distanceToSquared(Tn));if(e)for(let r=0,n=e.length;r<n;r++){const n=e[r],o=this.morphTargetsRelative;for(let e=0,r=n.count;e<r;e++)Tn.fromBufferAttribute(n,e),o&&(Sn.fromBufferAttribute(t,e),Tn.add(Sn)),i=Math.max(i,s.distanceToSquared(Tn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error(\"THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)\");const s=e.position,i=e.normal,r=e.uv;!1===this.hasAttribute(\"tangent\")&&this.setAttribute(\"tangent\",new cn(new Float32Array(4*s.count),4));const n=this.getAttribute(\"tangent\"),o=[],a=[];for(let t=0;t<s.count;t++)o[t]=new Ii,a[t]=new Ii;const h=new Ii,l=new Ii,c=new Ii,u=new Zs,d=new Zs,p=new Zs,m=new Ii,y=new Ii;function f(t,e,i){h.fromBufferAttribute(s,t),l.fromBufferAttribute(s,e),c.fromBufferAttribute(s,i),u.fromBufferAttribute(r,t),d.fromBufferAttribute(r,e),p.fromBufferAttribute(r,i),l.sub(h),c.sub(h),d.sub(u),p.sub(u);const n=1/(d.x*p.y-p.x*d.y);isFinite(n)&&(m.copy(l).multiplyScalar(p.y).addScaledVector(c,-d.y).multiplyScalar(n),y.copy(c).multiplyScalar(d.x).addScaledVector(l,-p.x).multiplyScalar(n),o[t].add(m),o[e].add(m),o[i].add(m),a[t].add(y),a[e].add(y),a[i].add(y))}let g=this.groups;0===g.length&&(g=[{start:0,count:t.count}]);for(let e=0,s=g.length;e<s;++e){const s=g[e],i=s.start;for(let e=i,r=i+s.count;e<r;e+=3)f(t.getX(e+0),t.getX(e+1),t.getX(e+2))}const x=new Ii,b=new Ii,v=new Ii,w=new Ii;function M(t){v.fromBufferAttribute(i,t),w.copy(v);const e=o[t];x.copy(e),x.sub(v.multiplyScalar(v.dot(e))).normalize(),b.crossVectors(w,e);const s=b.dot(a[t])<0?-1:1;n.setXYZW(t,x.x,x.y,x.z,s)}for(let e=0,s=g.length;e<s;++e){const s=g[e],i=s.start;for(let e=i,r=i+s.count;e<r;e+=3)M(t.getX(e+0)),M(t.getX(e+1)),M(t.getX(e+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute(\"position\");if(void 0!==e){let s=this.getAttribute(\"normal\");if(void 0===s)s=new cn(new Float32Array(3*e.count),3),this.setAttribute(\"normal\",s);else for(let t=0,e=s.count;t<e;t++)s.setXYZ(t,0,0,0);const i=new Ii,r=new Ii,n=new Ii,o=new Ii,a=new Ii,h=new Ii,l=new Ii,c=new Ii;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),m=t.getX(u+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),n.fromBufferAttribute(e,m),l.subVectors(n,r),c.subVectors(i,r),l.cross(c),o.fromBufferAttribute(s,d),a.fromBufferAttribute(s,p),h.fromBufferAttribute(s,m),o.add(l),a.add(l),h.add(l),s.setXYZ(d,o.x,o.y,o.z),s.setXYZ(p,a.x,a.y,a.z),s.setXYZ(m,h.x,h.y,h.z)}else for(let t=0,o=e.count;t<o;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),n.fromBufferAttribute(e,t+2),l.subVectors(n,r),c.subVectors(i,r),l.cross(c),s.setXYZ(t+0,l.x,l.y,l.z),s.setXYZ(t+1,l.x,l.y,l.z),s.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,s=t.count;e<s;e++)Tn.fromBufferAttribute(t,e),Tn.normalize(),t.setXYZ(e,Tn.x,Tn.y,Tn.z)}toNonIndexed(){function t(t,e){const s=t.array,i=t.itemSize,r=t.normalized,n=new s.constructor(e.length*i);let o=0,a=0;for(let r=0,h=e.length;r<h;r++){o=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)n[a++]=s[o++]}return new cn(n,i,r)}if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.\"),this;const e=new zn,s=this.index.array,i=this.attributes;for(const r in i){const n=t(i[r],s);e.setAttribute(r,n)}const r=this.morphAttributes;for(const i in r){const n=[],o=r[i];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],s);n.push(i)}e.morphAttributes[i]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,s=n.length;t<s;t++){const s=n[t];e.addGroup(s.start,s.count,s.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const s in e)void 0!==e[s]&&(t[s]=e[s]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const s=this.attributes;for(const e in s){const i=s[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const s=this.morphAttributes[e],n=[];for(let e=0,i=s.length;e<i;e++){const i=s[e];n.push(i.toJSON(t.data))}n.length>0&&(i[e]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const s=t.index;null!==s&&this.setIndex(s.clone(e));const i=t.attributes;for(const t in i){const s=i[t];this.setAttribute(t,s.clone(e))}const r=t.morphAttributes;for(const t in r){const s=[],i=r[t];for(let t=0,r=i.length;t<r;t++)s.push(i[t].clone(e));this.morphAttributes[t]=s}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:\"dispose\"})}}const Cn=new nr,In=new rr,Bn=new Gi,kn=new Ii,En=new Ii,Rn=new Ii,Pn=new Ii,On=new Ii,Fn=new Ii,Nn=new Ii,Ln=new Ii;class Vn extends Er{constructor(t=new zn,e=new en){super(),this.isMesh=!0,this.type=\"Mesh\",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const s=t[e[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=s.length;t<e;t++){const e=s[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const s=this.geometry,i=s.attributes.position,r=s.morphAttributes.position,n=s.morphTargetsRelative;e.fromBufferAttribute(i,t);const o=this.morphTargetInfluences;if(r&&o){Fn.set(0,0,0);for(let s=0,i=r.length;s<i;s++){const i=o[s],a=r[s];0!==i&&(On.fromBufferAttribute(a,t),n?Fn.addScaledVector(On,i):Fn.addScaledVector(On.sub(e),i))}e.add(Fn)}return e}raycast(t,e){const s=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===s.boundingSphere&&s.computeBoundingSphere(),Bn.copy(s.boundingSphere),Bn.applyMatrix4(r),In.copy(t.ray).recast(t.near),!1===Bn.containsPoint(In.origin)){if(null===In.intersectSphere(Bn,kn))return;if(In.origin.distanceToSquared(kn)>(t.far-t.near)**2)return}Cn.copy(r).invert(),In.copy(t.ray).applyMatrix4(Cn),null!==s.boundingBox&&!1===In.intersectsBox(s.boundingBox)||this._computeIntersections(t,e,In)}}_computeIntersections(t,e,s){let i;const r=this.geometry,n=this.material,o=r.index,a=r.attributes.position,h=r.attributes.uv,l=r.attributes.uv1,c=r.attributes.normal,u=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(n))for(let r=0,a=u.length;r<a;r++){const a=u[r],p=n[a.materialIndex];for(let r=Math.max(a.start,d.start),n=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));r<n;r+=3){i=Wn(this,p,t,s,h,l,c,o.getX(r),o.getX(r+1),o.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=a.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);r<a;r+=3){i=Wn(this,n,t,s,h,l,c,o.getX(r),o.getX(r+1),o.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}else if(void 0!==a)if(Array.isArray(n))for(let r=0,o=u.length;r<o;r++){const o=u[r],p=n[o.materialIndex];for(let r=Math.max(o.start,d.start),n=Math.min(a.count,Math.min(o.start+o.count,d.start+d.count));r<n;r+=3){i=Wn(this,p,t,s,h,l,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);r<o;r+=3){i=Wn(this,n,t,s,h,l,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}}}function Wn(t,e,s,i,r,n,o,a,h,l){t.getVertexPosition(a,En),t.getVertexPosition(h,Rn),t.getVertexPosition(l,Pn);const c=function(t,e,s,i,r,n,o,a){let h;if(h=e.side===d?i.intersectTriangle(o,n,r,!0,a):i.intersectTriangle(r,n,o,e.side===u,a),null===h)return null;Ln.copy(a),Ln.applyMatrix4(t.matrixWorld);const l=s.ray.origin.distanceTo(Ln);return l<s.near||l>s.far?null:{distance:l,point:Ln.clone(),object:t}}(t,e,s,i,En,Rn,Pn,Nn);if(c){const t=new Ii;Jr.getBarycoord(Nn,En,Rn,Pn,t),r&&(c.uv=Jr.getInterpolatedAttribute(r,a,h,l,t,new Zs)),n&&(c.uv1=Jr.getInterpolatedAttribute(n,a,h,l,t,new Zs)),o&&(c.normal=Jr.getInterpolatedAttribute(o,a,h,l,t,new Ii),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const e={a:a,b:h,c:l,normal:new Ii,materialIndex:0};Jr.getNormal(En,Rn,Pn,e.normal),c.face=e,c.barycoord=t}return c}class Un extends zn{constructor(t=1,e=1,s=1,i=1,r=1,n=1){super(),this.type=\"BoxGeometry\",this.parameters={width:t,height:e,depth:s,widthSegments:i,heightSegments:r,depthSegments:n};const o=this;i=Math.floor(i),r=Math.floor(r),n=Math.floor(n);const a=[],h=[],l=[],c=[];let u=0,d=0;function p(t,e,s,i,r,n,p,m,y,f,g){const x=n/y,b=p/f,v=n/2,w=p/2,M=m/2,S=y+1,_=f+1;let A=0,T=0;const z=new Ii;for(let n=0;n<_;n++){const o=n*b-w;for(let a=0;a<S;a++){const u=a*x-v;z[t]=u*i,z[e]=o*r,z[s]=M,h.push(z.x,z.y,z.z),z[t]=0,z[e]=0,z[s]=m>0?1:-1,l.push(z.x,z.y,z.z),c.push(a/y),c.push(1-n/f),A+=1}}for(let t=0;t<f;t++)for(let e=0;e<y;e++){const s=u+e+S*t,i=u+e+S*(t+1),r=u+(e+1)+S*(t+1),n=u+(e+1)+S*t;a.push(s,i,n),a.push(i,r,n),T+=6}o.addGroup(d,T,g),d+=T,u+=A}p(\"z\",\"y\",\"x\",-1,-1,s,e,t,n,r,0),p(\"z\",\"y\",\"x\",1,-1,s,e,-t,n,r,1),p(\"x\",\"z\",\"y\",1,1,t,s,e,i,n,2),p(\"x\",\"z\",\"y\",1,-1,t,s,-e,i,n,3),p(\"x\",\"y\",\"z\",1,-1,t,e,s,i,r,4),p(\"x\",\"y\",\"z\",-1,-1,t,e,-s,i,r,5),this.setIndex(a),this.setAttribute(\"position\",new bn(h,3)),this.setAttribute(\"normal\",new bn(l,3)),this.setAttribute(\"uv\",new bn(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Un(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function jn(t){const e={};for(const s in t){e[s]={};for(const i in t[s]){const r=t[s][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn(\"UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().\"),e[s][i]=null):e[s][i]=r.clone():Array.isArray(r)?e[s][i]=r.slice():e[s][i]=r}}return e}function Dn(t){const e={};for(let s=0;s<t.length;s++){const i=jn(t[s]);for(const t in i)e[t]=i[t]}return e}function Hn(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:ui.workingColorSpace}const qn={clone:jn,merge:Dn};class Jn extends tn{constructor(t){super(),this.isShaderMaterial=!0,this.type=\"ShaderMaterial\",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",this.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=jn(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let s=0;s<t.length;s++)e.push(t[s].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const i=this.uniforms[s].value;i&&i.isTexture?e.uniforms[s]={type:\"t\",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[s]={type:\"c\",value:i.getHex()}:i&&i.isVector2?e.uniforms[s]={type:\"v2\",value:i.toArray()}:i&&i.isVector3?e.uniforms[s]={type:\"v3\",value:i.toArray()}:i&&i.isVector4?e.uniforms[s]={type:\"v4\",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[s]={type:\"m3\",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[s]={type:\"m4\",value:i.toArray()}:e.uniforms[s]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const s={};for(const t in this.extensions)!0===this.extensions[t]&&(s[t]=!0);return Object.keys(s).length>0&&(e.extensions=s),e}}class Xn extends Er{constructor(){super(),this.isCamera=!0,this.type=\"Camera\",this.matrixWorldInverse=new nr,this.projectionMatrix=new nr,this.projectionMatrixInverse=new nr,this.coordinateSystem=Os}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Yn=new Ii,Zn=new Zs,Gn=new Zs;class $n extends Xn{constructor(t=50,e=1,s=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type=\"PerspectiveCamera\",this.fov=t,this.zoom=1,this.near=s,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Us*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Ws*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Us*Math.atan(Math.tan(.5*Ws*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,s){Yn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Yn.x,Yn.y).multiplyScalar(-t/Yn.z),Yn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(Yn.x,Yn.y).multiplyScalar(-t/Yn.z)}getViewSize(t,e){return this.getViewBounds(t,Zn,Gn),e.subVectors(Gn,Zn)}setViewOffset(t,e,s,i,r,n){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Ws*this.fov)/this.zoom,s=2*e,i=this.aspect*s,r=-.5*i;const n=this.view;if(null!==this.view&&this.view.enabled){const t=n.fullWidth,o=n.fullHeight;r+=n.offsetX*i/t,e-=n.offsetY*s/o,i*=n.width/t,s*=n.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Qn=-90;class Kn extends Er{constructor(t,e,s){super(),this.type=\"CubeCamera\",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new $n(Qn,1,t,e);i.layers=this.layers,this.add(i);const r=new $n(Qn,1,t,e);r.layers=this.layers,this.add(r);const n=new $n(Qn,1,t,e);n.layers=this.layers,this.add(n);const o=new $n(Qn,1,t,e);o.layers=this.layers,this.add(o);const a=new $n(Qn,1,t,e);a.layers=this.layers,this.add(a);const h=new $n(Qn,1,t,e);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[s,i,r,n,o,a]=e;for(const t of e)this.remove(t);if(t===Os)s.up.set(0,1,0),s.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),n.up.set(0,0,1),n.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==Fs)throw new Error(\"THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: \"+t);s.up.set(0,-1,0),s.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),n.up.set(0,0,-1),n.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,n,o,a,h,l]=this.children,c=t.getRenderTarget(),u=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),p=t.xr.enabled;t.xr.enabled=!1;const m=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,i),t.render(e,r),t.setRenderTarget(s,1,i),t.render(e,n),t.setRenderTarget(s,2,i),t.render(e,o),t.setRenderTarget(s,3,i),t.render(e,a),t.setRenderTarget(s,4,i),t.render(e,h),s.texture.generateMipmaps=m,t.setRenderTarget(s,5,i),t.render(e,l),t.setRenderTarget(c,u,d),t.xr.enabled=p,s.texture.needsPMREMUpdate=!0}}class to extends vi{constructor(t,e,s,i,r,n,o,a,h,l){super(t=void 0!==t?t:[],e=void 0!==e?e:ht,s,i,r,n,o,a,h,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class eo extends Si{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1},i=[s,s,s,s,s,s];this.texture=new to(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:wt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:\"\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\t\\t\\t\\t\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\n\\t\\t\\t\\t\\t#include <begin_vertex>\\n\\t\\t\\t\\t\\t#include <project_vertex>\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\",fragmentShader:\"\\n\\n\\t\\t\\t\\tuniform sampler2D tEquirect;\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\t#include <common>\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvec3 direction = normalize( vWorldDirection );\\n\\n\\t\\t\\t\\t\\tvec2 sampleUV = equirectUv( direction );\\n\\n\\t\\t\\t\\t\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\"},i=new Un(5,5,5),r=new Jn({name:\"CubemapFromEquirect\",uniforms:jn(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:d,blending:0});r.uniforms.tEquirect.value=e;const n=new Vn(i,r),o=e.minFilter;e.minFilter===_t&&(e.minFilter=wt);return new Kn(1,10,this).update(t,n),e.minFilter=o,n.geometry.dispose(),n.material.dispose(),this}clear(t,e,s,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,s,i);t.setRenderTarget(r)}}class so{constructor(t,e=25e-5){this.isFogExp2=!0,this.name=\"\",this.color=new $r(t),this.density=e}clone(){return new so(this.color,this.density)}toJSON(){return{type:\"FogExp2\",name:this.name,color:this.color.getHex(),density:this.density}}}class io{constructor(t,e=1,s=1e3){this.isFog=!0,this.name=\"\",this.color=new $r(t),this.near=e,this.far=s}clone(){return new io(this.color,this.near,this.far)}toJSON(){return{type:\"Fog\",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ro extends Er{constructor(){super(),this.isScene=!0,this.type=\"Scene\",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new yr,this.environmentIntensity=1,this.environmentRotation=new yr,this.overrideMaterial=null,\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class no{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=_s,this.updateRanges=[],this.version=0,this.uuid=js()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,s){t*=this.stride,s*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[s+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=js()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(e,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=js()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const oo=new Ii;class ao{constructor(t,e,s,i=!1){this.isInterleavedBufferAttribute=!0,this.name=\"\",this.data=t,this.itemSize=e,this.offset=s,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,s=this.data.count;e<s;e++)oo.fromBufferAttribute(this,e),oo.applyMatrix4(t),this.setXYZ(e,oo.x,oo.y,oo.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)oo.fromBufferAttribute(this,e),oo.applyNormalMatrix(t),this.setXYZ(e,oo.x,oo.y,oo.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)oo.fromBufferAttribute(this,e),oo.transformDirection(t),this.setXYZ(e,oo.x,oo.y,oo.z);return this}getComponent(t,e){let s=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(s=Js(s,this.array)),s}setComponent(t,e,s){return this.normalized&&(s=Xs(s,this.array)),this.data.array[t*this.data.stride+this.offset+e]=s,this}setX(t,e){return this.normalized&&(e=Xs(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Xs(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Xs(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Xs(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Js(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Js(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Js(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Js(e,this.array)),e}setXY(t,e,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=s,this}setXYZ(t,e,s,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array),i=Xs(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=i,this}setXYZW(t,e,s,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Xs(e,this.array),s=Xs(s,this.array),i=Xs(i,this.array),r=Xs(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log(\"THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.\");const t=[];for(let e=0;e<this.count;e++){const s=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[s+e])}return new cn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ao(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log(\"THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.\");const t=[];for(let e=0;e<this.count;e++){const s=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[s+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ho extends tn{constructor(t){super(),this.isSpriteMaterial=!0,this.type=\"SpriteMaterial\",this.color=new $r(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let lo;const co=new Ii,uo=new Ii,po=new Ii,mo=new Zs,yo=new Zs,fo=new nr,go=new Ii,xo=new Ii,bo=new Ii,vo=new Zs,wo=new Zs,Mo=new Zs;class So extends Er{constructor(t=new ho){if(super(),this.isSprite=!0,this.type=\"Sprite\",void 0===lo){lo=new zn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new no(t,5);lo.setIndex([0,1,2,0,2,3]),lo.setAttribute(\"position\",new ao(e,3,0,!1)),lo.setAttribute(\"uv\",new ao(e,2,3,!1))}this.geometry=lo,this.material=t,this.center=new Zs(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.'),uo.setFromMatrixScale(this.matrixWorld),fo.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),po.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&uo.multiplyScalar(-po.z);const s=this.material.rotation;let i,r;0!==s&&(r=Math.cos(s),i=Math.sin(s));const n=this.center;_o(go.set(-.5,-.5,0),po,n,uo,i,r),_o(xo.set(.5,-.5,0),po,n,uo,i,r),_o(bo.set(.5,.5,0),po,n,uo,i,r),vo.set(0,0),wo.set(1,0),Mo.set(1,1);let o=t.ray.intersectTriangle(go,xo,bo,!1,co);if(null===o&&(_o(xo.set(-.5,.5,0),po,n,uo,i,r),wo.set(0,1),o=t.ray.intersectTriangle(go,bo,xo,!1,co),null===o))return;const a=t.ray.origin.distanceTo(co);a<t.near||a>t.far||e.push({distance:a,point:co.clone(),uv:Jr.getInterpolation(co,go,xo,bo,vo,wo,Mo,new Zs),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function _o(t,e,s,i,r,n){mo.subVectors(t,s).addScalar(.5).multiply(i),void 0!==r?(yo.x=n*mo.x-r*mo.y,yo.y=r*mo.x+n*mo.y):yo.copy(mo),t.copy(e),t.x+=yo.x,t.y+=yo.y,t.applyMatrix4(fo)}const Ao=new Ii,To=new Ii;class zo extends Er{constructor(){super(),this._currentLevel=0,this.type=\"LOD\",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,s=e.length;t<s;t++){const s=e[t];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,s=0){e=Math.abs(e);const i=this.levels;let r;for(r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,hysteresis:s,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let s=0;s<e.length;s++)if(e[s].distance===t){const t=e.splice(s,1);return this.remove(t[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let s,i;for(s=1,i=e.length;s<i;s++){let i=e[s].distance;if(e[s].object.visible&&(i-=i*e[s].hysteresis),t<i)break}return e[s-1].object}return null}raycast(t,e){if(this.levels.length>0){Ao.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(Ao);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Ao.setFromMatrixPosition(t.matrixWorld),To.setFromMatrixPosition(this.matrixWorld);const s=Ao.distanceTo(To)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){let t=e[i].distance;if(e[i].object.visible&&(t-=t*e[i].hysteresis),!(s>=t))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const s=this.levels;for(let t=0,i=s.length;t<i;t++){const i=s[t];e.object.levels.push({object:i.object.uuid,distance:i.distance,hysteresis:i.hysteresis})}return e}}const Co=new Ii,Io=new wi,Bo=new wi,ko=new Ii,Eo=new nr,Ro=new Ii,Po=new Gi,Oo=new nr,Fo=new rr;class No extends Vn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type=\"SkinnedMesh\",this.bindMode=nt,this.bindMatrix=new nr,this.bindMatrixInverse=new nr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ei),this.boundingBox.makeEmpty();const e=t.getAttribute(\"position\");for(let t=0;t<e.count;t++)this.getVertexPosition(t,Ro),this.boundingBox.expandByPoint(Ro)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Gi),this.boundingSphere.makeEmpty();const e=t.getAttribute(\"position\");for(let t=0;t<e.count;t++)this.getVertexPosition(t,Ro),this.boundingSphere.expandByPoint(Ro)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const s=this.material,i=this.matrixWorld;void 0!==s&&(null===this.boundingSphere&&this.computeBoundingSphere(),Po.copy(this.boundingSphere),Po.applyMatrix4(i),!1!==t.ray.intersectsSphere(Po)&&(Oo.copy(i).invert(),Fo.copy(t.ray).applyMatrix4(Oo),null!==this.boundingBox&&!1===Fo.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,Fo)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new wi,e=this.geometry.attributes.skinWeight;for(let s=0,i=e.count;s<i;s++){t.fromBufferAttribute(e,s);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===nt?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ot?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)}applyBoneTransform(t,e){const s=this.skeleton,i=this.geometry;Io.fromBufferAttribute(i.attributes.skinIndex,t),Bo.fromBufferAttribute(i.attributes.skinWeight,t),Co.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=Bo.getComponent(t);if(0!==i){const r=Io.getComponent(t);Eo.multiplyMatrices(s.bones[r].matrixWorld,s.boneInverses[r]),e.addScaledVector(ko.copy(Co).applyMatrix4(Eo),i)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Lo extends Er{constructor(){super(),this.isBone=!0,this.type=\"Bone\"}}class Vo extends vi{constructor(t=null,e=1,s=1,i,r,n,o,a,h=1003,l=1003,c,u){super(null,n,o,a,h,l,i,r,c,u),this.isDataTexture=!0,this.image={data:t,width:e,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Wo=new nr,Uo=new nr;class jo{constructor(t=[],e=[]){this.uuid=js(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn(\"THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.\"),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new nr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new nr;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,s=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:Uo;Wo.multiplyMatrices(r,e[i]),Wo.toArray(s,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new jo(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const s=new Vo(e,t,t,Wt,Et);return s.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=s,this}getBoneByName(t){for(let e=0,s=this.bones.length;e<s;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let s=0,i=t.bones.length;s<i;s++){const i=t.bones[s];let r=e[i];void 0===r&&(console.warn(\"THREE.Skeleton: No bone found with UUID:\",i),r=new Lo),this.bones.push(r),this.boneInverses.push((new nr).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:\"Skeleton\",generator:\"Skeleton.toJSON\"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,s=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const n=s[i];t.boneInverses.push(n.toArray())}return t}}class Do extends cn{constructor(t,e,s,i=1){super(t,e,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Ho=new nr,qo=new nr,Jo=[],Xo=new Ei,Yo=new nr,Zo=new Vn,Go=new Gi;class $o extends Vn{constructor(t,e,s){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Do(new Float32Array(16*s),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<s;t++)this.setMatrixAt(t,Yo)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Ei),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<e;s++)this.getMatrixAt(s,Ho),Xo.copy(t.boundingBox).applyMatrix4(Ho),this.boundingBox.union(Xo)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Gi),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<e;s++)this.getMatrixAt(s,Ho),Go.copy(t.boundingSphere).applyMatrix4(Ho),this.boundingSphere.union(Go)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const s=e.morphTargetInfluences,i=this.morphTexture.source.data.data,r=t*(s.length+1)+1;for(let t=0;t<s.length;t++)s[t]=i[r+t]}raycast(t,e){const s=this.matrixWorld,i=this.count;if(Zo.geometry=this.geometry,Zo.material=this.material,void 0!==Zo.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Go.copy(this.boundingSphere),Go.applyMatrix4(s),!1!==t.ray.intersectsSphere(Go)))for(let r=0;r<i;r++){this.getMatrixAt(r,Ho),qo.multiplyMatrices(s,Ho),Zo.matrixWorld=qo,Zo.raycast(t,Jo);for(let t=0,s=Jo.length;t<s;t++){const s=Jo[t];s.instanceId=r,s.object=this,e.push(s)}Jo.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Do(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const s=e.morphTargetInfluences,i=s.length+1;null===this.morphTexture&&(this.morphTexture=new Vo(new Float32Array(i*this.count),i,this.count,qt,Et));const r=this.morphTexture.source.data.data;let n=0;for(let t=0;t<s.length;t++)n+=s[t];const o=this.geometry.morphTargetsRelative?1:1-n,a=i*t;r[a]=o,r.set(s,a+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:\"dispose\"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const Qo=new Ii,Ko=new Ii,ta=new Gs;class ea{constructor(t=new Ii(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,s,i){return this.normal.set(t,e,s),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,s){const i=Qo.subVectors(s,e).cross(Ko.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const s=t.delta(Qo),i=this.normal.dot(s);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(s,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return e<0&&s>0||s<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const s=e||ta.getNormalMatrix(t),i=this.coplanarPoint(Qo).applyMatrix4(t),r=this.normal.applyMatrix3(s).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const sa=new Gi,ia=new Ii;class ra{constructor(t=new ea,e=new ea,s=new ea,i=new ea,r=new ea,n=new ea){this.planes=[t,e,s,i,r,n]}set(t,e,s,i,r,n){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(s),o[3].copy(i),o[4].copy(r),o[5].copy(n),this}copy(t){const e=this.planes;for(let s=0;s<6;s++)e[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,e=2e3){const s=this.planes,i=t.elements,r=i[0],n=i[1],o=i[2],a=i[3],h=i[4],l=i[5],c=i[6],u=i[7],d=i[8],p=i[9],m=i[10],y=i[11],f=i[12],g=i[13],x=i[14],b=i[15];if(s[0].setComponents(a-r,u-h,y-d,b-f).normalize(),s[1].setComponents(a+r,u+h,y+d,b+f).normalize(),s[2].setComponents(a+n,u+l,y+p,b+g).normalize(),s[3].setComponents(a-n,u-l,y-p,b-g).normalize(),s[4].setComponents(a-o,u-c,y-m,b-x).normalize(),e===Os)s[5].setComponents(a+o,u+c,y+m,b+x).normalize();else{if(e!==Fs)throw new Error(\"THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: \"+e);s[5].setComponents(o,c,m,x).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),sa.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),sa.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(sa)}intersectsSprite(t){return sa.center.set(0,0,0),sa.radius=.7071067811865476,sa.applyMatrix4(t.matrixWorld),this.intersectsSphere(sa)}intersectsSphere(t){const e=this.planes,s=t.center,i=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(s)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let s=0;s<6;s++){const i=e[s];if(ia.x=i.normal.x>0?t.max.x:t.min.x,ia.y=i.normal.y>0?t.max.y:t.min.y,ia.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ia)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let s=0;s<6;s++)if(e[s].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function na(t,e){return t-e}function oa(t,e){return t.z-e.z}function aa(t,e){return e.z-t.z}class ha{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,s,i){const r=this.pool,n=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];n.push(o),this.index++,o.start=t,o.count=e,o.z=s,o.index=i}reset(){this.list.length=0,this.index=0}}const la=new nr,ca=new $r(1,1,1),ua=new ra,da=new Ei,pa=new Gi,ma=new Ii,ya=new Ii,fa=new Ii,ga=new ha,xa=new Vn,ba=[];function va(t,e,s=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let n=0;n<r;n++)for(let r=0;r<i;r++)e.setComponent(n+s,r,t.getComponent(n,r))}else e.array.set(t.array,s*i);e.needsUpdate=!0}function wa(t,e){if(t.constructor!==e.constructor){const s=Math.min(t.length,e.length);for(let i=0;i<s;i++)e[i]=t[i]}else{const s=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,s))}}class Ma extends Vn{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(t,e,s=2*e,i){super(new zn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=s,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let t=Math.sqrt(4*this._maxInstanceCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),s=new Vo(e,t,t,Wt,Et);this._matricesTexture=s}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),s=new Vo(e,t,t,Jt,kt);this._indirectTexture=s}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),s=new Vo(e,t,t,Wt,Et);s.colorSpace=ui.workingColorSpace,this._colorsTexture=s}_initializeGeometry(t){const e=this.geometry,s=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in t.attributes){const r=t.getAttribute(i),{array:n,itemSize:o,normalized:a}=r,h=new n.constructor(s*o),l=new cn(h,o,a);e.setAttribute(i,l)}if(null!==t.getIndex()){const t=s>65535?new Uint32Array(i):new Uint16Array(i);e.setIndex(new cn(t,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have \"index\".');for(const s in e.attributes){if(!t.hasAttribute(s))throw new Error(`THREE.BatchedMesh: Added geometry missing \"${s}\". All geometries must have consistent attributes.`);const i=t.getAttribute(s),r=e.getAttribute(s);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error(\"THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.\")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ei);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let s=0,i=e.length;s<i;s++){if(!1===e[s].active)continue;const i=e[s].geometryIndex;this.getMatrixAt(s,la),this.getBoundingBoxAt(i,da).applyMatrix4(la),t.union(da)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gi);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let s=0,i=e.length;s<i;s++){if(!1===e[s].active)continue;const i=e[s].geometryIndex;this.getMatrixAt(s,la),this.getBoundingSphereAt(i,pa).applyMatrix4(la),t.union(pa)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error(\"THREE.BatchedMesh: Maximum item count reached.\");const e={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(na),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=e):(s=this._instanceInfo.length,this._instanceInfo.push(e));const i=this._matricesTexture;la.identity().toArray(i.image.data,16*s),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(ca.toArray(r.image.data,4*s),r.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,s=-1){this._initializeGeometry(t),this._validateGeometry(t);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===e?t.getAttribute(\"position\").count:e;const n=t.getIndex();if(null!==n&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===s?n.count:s),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error(\"THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.\");let o;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(na),o=this._availableGeometryIds.shift(),r[o]=i):(o=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(o,t),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,o}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error(\"THREE.BatchedMesh: Maximum geometry count reached.\");this._validateGeometry(e);const s=this.geometry,i=null!==s.getIndex(),r=s.getIndex(),n=e.getIndex(),o=this._geometryInfo[t];if(i&&n.count>o.reservedIndexCount||e.attributes.position.count>o.reservedVertexCount)throw new Error(\"THREE.BatchedMesh: Reserved space not large enough for provided geometry.\");const a=o.vertexStart,h=o.reservedVertexCount;o.vertexCount=e.getAttribute(\"position\").count;for(const t in s.attributes){const i=e.getAttribute(t),r=s.getAttribute(t);va(i,r,a);const n=i.itemSize;for(let t=i.count,e=h;t<e;t++){const e=a+t;for(let t=0;t<n;t++)r.setComponent(e,t,0)}r.needsUpdate=!0,r.addUpdateRange(a*n,h*n)}if(i){const t=o.indexStart,s=o.reservedIndexCount;o.indexCount=e.getIndex().count;for(let e=0;e<n.count;e++)r.setX(t+e,a+n.getX(e));for(let e=n.count,i=s;e<i;e++)r.setX(t+e,a);r.needsUpdate=!0,r.addUpdateRange(t,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,null!==e.boundingBox&&(o.boundingBox=e.boundingBox.clone()),o.boundingSphere=null,null!==e.boundingSphere&&(o.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||!1===e[t].active)return this;const s=this._instanceInfo;for(let e=0,i=s.length;e<i;e++)s[e].geometryIndex===t&&this.deleteInstance(e);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const s=this._geometryInfo,i=s.map(((t,e)=>e)).sort(((t,e)=>s[t].vertexStart-s[e].vertexStart)),r=this.geometry;for(let n=0,o=s.length;n<o;n++){const o=i[n],a=s[o];if(!1!==a.active){if(null!==r.index){if(a.indexStart!==e){const{indexStart:s,vertexStart:i,reservedIndexCount:n}=a,o=r.index,h=o.array,l=t-i;for(let t=s;t<s+n;t++)h[t]=h[t]+l;o.array.copyWithin(e,s,s+n),o.addUpdateRange(e,n),a.indexStart=e}e+=a.reservedIndexCount}if(a.vertexStart!==t){const{vertexStart:e,reservedVertexCount:s}=a,i=r.attributes;for(const r in i){const n=i[r],{array:o,itemSize:a}=n;o.copyWithin(t*a,e*a,(e+s)*a),n.addUpdateRange(t*a,s*a)}a.vertexStart=t}t+=a.reservedVertexCount,a.start=r.index?a.indexStart:a.vertexStart,this._nextIndexStart=r.index?a.indexStart+a.reservedIndexCount:0,this._nextVertexStart=a.vertexStart+a.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const s=this.geometry,i=this._geometryInfo[t];if(null===i.boundingBox){const t=new Ei,e=s.index,r=s.attributes.position;for(let s=i.start,n=i.start+i.count;s<n;s++){let i=s;e&&(i=e.getX(i)),t.expandByPoint(ma.fromBufferAttribute(r,i))}i.boundingBox=t}return e.copy(i.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const s=this.geometry,i=this._geometryInfo[t];if(null===i.boundingSphere){const e=new Gi;this.getBoundingBoxAt(t,da),da.getCenter(e.center);const r=s.index,n=s.attributes.position;let o=0;for(let t=i.start,s=i.start+i.count;t<s;t++){let s=t;r&&(s=r.getX(s)),ma.fromBufferAttribute(n,s),o=Math.max(o,e.center.distanceToSquared(ma))}e.radius=Math.sqrt(o),i.boundingSphere=e}return e.copy(i.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const s=this._matricesTexture,i=this._matricesTexture.image.data;return e.toArray(i,16*t),s.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,16*t)}setColorAt(t,e){return this.validateInstanceId(t),null===this._colorsTexture&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,4*t),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,4*t)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e||(this._instanceInfo[t].visible=e,this._visibilityChanged=!0),this}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const s=this._geometryInfo[t];return e.vertexStart=s.vertexStart,e.vertexCount=s.vertexCount,e.reservedVertexCount=s.reservedVertexCount,e.indexStart=s.indexStart,e.indexCount=s.indexCount,e.reservedIndexCount=s.reservedIndexCount,e.start=s.start,e.count=s.count,e}setInstanceCount(t){const e=this._availableInstanceIds,s=this._instanceInfo;for(e.sort(na);e[e.length-1]===s.length;)s.pop(),e.pop();if(t<s.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const i=new Int32Array(t),r=new Int32Array(t);wa(this._multiDrawCounts,i),wa(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=t;const n=this._indirectTexture,o=this._matricesTexture,a=this._colorsTexture;n.dispose(),this._initIndirectTexture(),wa(n.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),wa(o.image.data,this._matricesTexture.image.data),a&&(a.dispose(),this._initColorsTexture(),wa(a.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const s=[...this._geometryInfo].filter((t=>t.active));if(Math.max(...s.map((t=>t.vertexStart+t.reservedVertexCount)))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...s.map((t=>t.indexStart+t.reservedIndexCount)))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`)}const i=this.geometry;i.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new zn,this._initializeGeometry(i));const r=this.geometry;i.index&&wa(i.index.array,r.index.array);for(const t in i.attributes)wa(i.attributes[t].array,r.attributes[t].array)}raycast(t,e){const s=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,n=this.geometry;xa.material=this.material,xa.geometry.index=n.index,xa.geometry.attributes=n.attributes,null===xa.geometry.boundingBox&&(xa.geometry.boundingBox=new Ei),null===xa.geometry.boundingSphere&&(xa.geometry.boundingSphere=new Gi);for(let n=0,o=s.length;n<o;n++){if(!s[n].visible||!s[n].active)continue;const o=s[n].geometryIndex,a=i[o];xa.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(n,xa.matrixWorld).premultiply(r),this.getBoundingBoxAt(o,xa.geometry.boundingBox),this.getBoundingSphereAt(o,xa.geometry.boundingSphere),xa.raycast(t,ba);for(let t=0,s=ba.length;t<s;t++){const s=ba[t];s.object=this,s.batchId=n,e.push(s)}ba.length=0}xa.material=null,xa.geometry.index=null,xa.geometry.attributes={},xa.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map((t=>({...t,boundingBox:null!==t.boundingBox?t.boundingBox.clone():null,boundingSphere:null!==t.boundingSphere?t.boundingSphere.clone():null}))),this._instanceInfo=t._instanceInfo.map((t=>({...t}))),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,e,s,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const n=i.getIndex(),o=null===n?1:n.array.BYTES_PER_ELEMENT,a=this._instanceInfo,h=this._multiDrawStarts,l=this._multiDrawCounts,c=this._geometryInfo,u=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;u&&(la.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse).multiply(this.matrixWorld),ua.setFromProjectionMatrix(la,t.coordinateSystem));let m=0;if(this.sortObjects){la.copy(this.matrixWorld).invert(),ma.setFromMatrixPosition(s.matrixWorld).applyMatrix4(la),ya.set(0,0,-1).transformDirection(s.matrixWorld).transformDirection(la);for(let t=0,e=a.length;t<e;t++)if(a[t].visible&&a[t].active){const e=a[t].geometryIndex;this.getMatrixAt(t,la),this.getBoundingSphereAt(e,pa).applyMatrix4(la);let s=!1;if(u&&(s=!ua.intersectsSphere(pa)),!s){const s=c[e],i=fa.subVectors(pa.center,ma).dot(ya);ga.push(s.start,s.count,i,t)}}const t=ga.list,e=this.customSort;null===e?t.sort(r.transparent?aa:oa):e.call(this,t,s);for(let e=0,s=t.length;e<s;e++){const s=t[e];h[m]=s.start*o,l[m]=s.count,p[m]=s.index,m++}ga.reset()}else for(let t=0,e=a.length;t<e;t++)if(a[t].visible&&a[t].active){const e=a[t].geometryIndex;let s=!1;if(u&&(this.getMatrixAt(t,la),this.getBoundingSphereAt(e,pa).applyMatrix4(la),s=!ua.intersectsSphere(pa)),!s){const s=c[e];h[m]=s.start*o,l[m]=s.count,p[m]=t,m++}}d.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(t,e,s,i,r,n){this.onBeforeRender(t,null,i,r,n)}}class Sa extends tn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type=\"LineBasicMaterial\",this.color=new $r(16777215),this.map=null,this.linewidth=1,this.linecap=\"round\",this.linejoin=\"round\",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const _a=new Ii,Aa=new Ii,Ta=new nr,za=new rr,Ca=new Gi,Ia=new Ii,Ba=new Ii;class ka extends Er{constructor(t=new zn,e=new Sa){super(),this.isLine=!0,this.type=\"Line\",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,s=[0];for(let t=1,i=e.count;t<i;t++)_a.fromBufferAttribute(e,t-1),Aa.fromBufferAttribute(e,t),s[t]=s[t-1],s[t]+=_a.distanceTo(Aa);t.setAttribute(\"lineDistance\",new bn(s,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");return this}raycast(t,e){const s=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,n=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Ca.copy(s.boundingSphere),Ca.applyMatrix4(i),Ca.radius+=r,!1===t.ray.intersectsSphere(Ca))return;Ta.copy(i).invert(),za.copy(t.ray).applyMatrix4(Ta);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,h=this.isLineSegments?2:1,l=s.index,c=s.attributes.position;if(null!==l){const s=Math.max(0,n.start),i=Math.min(l.count,n.start+n.count);for(let r=s,n=i-1;r<n;r+=h){const s=l.getX(r),i=l.getX(r+1),n=Ea(this,t,za,a,s,i);n&&e.push(n)}if(this.isLineLoop){const r=l.getX(i-1),n=l.getX(s),o=Ea(this,t,za,a,r,n);o&&e.push(o)}}else{const s=Math.max(0,n.start),i=Math.min(c.count,n.start+n.count);for(let r=s,n=i-1;r<n;r+=h){const s=Ea(this,t,za,a,r,r+1);s&&e.push(s)}if(this.isLineLoop){const r=Ea(this,t,za,a,i-1,s);r&&e.push(r)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const s=t[e[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=s.length;t<e;t++){const e=s[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Ea(t,e,s,i,r,n){const o=t.geometry.attributes.position;_a.fromBufferAttribute(o,r),Aa.fromBufferAttribute(o,n);if(s.distanceSqToSegment(_a,Aa,Ia,Ba)>i)return;Ia.applyMatrix4(t.matrixWorld);const a=e.ray.origin.distanceTo(Ia);return a<e.near||a>e.far?void 0:{distance:a,point:Ba.clone().applyMatrix4(t.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:t}}const Ra=new Ii,Pa=new Ii;class Oa extends ka{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type=\"LineSegments\"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,s=[];for(let t=0,i=e.count;t<i;t+=2)Ra.fromBufferAttribute(e,t),Pa.fromBufferAttribute(e,t+1),s[t]=0===t?0:s[t-1],s[t+1]=s[t]+Ra.distanceTo(Pa);t.setAttribute(\"lineDistance\",new bn(s,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");return this}}class Fa extends ka{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type=\"LineLoop\"}}class Na extends tn{constructor(t){super(),this.isPointsMaterial=!0,this.type=\"PointsMaterial\",this.color=new $r(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const La=new nr,Va=new rr,Wa=new Gi,Ua=new Ii;class ja extends Er{constructor(t=new zn,e=new Na){super(),this.isPoints=!0,this.type=\"Points\",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const s=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,n=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Wa.copy(s.boundingSphere),Wa.applyMatrix4(i),Wa.radius+=r,!1===t.ray.intersectsSphere(Wa))return;La.copy(i).invert(),Va.copy(t.ray).applyMatrix4(La);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,h=s.index,l=s.attributes.position;if(null!==h){for(let s=Math.max(0,n.start),r=Math.min(h.count,n.start+n.count);s<r;s++){const r=h.getX(s);Ua.fromBufferAttribute(l,r),Da(Ua,r,a,i,t,e,this)}}else{for(let s=Math.max(0,n.start),r=Math.min(l.count,n.start+n.count);s<r;s++)Ua.fromBufferAttribute(l,s),Da(Ua,s,a,i,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const s=t[e[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=s.length;t<e;t++){const e=s[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Da(t,e,s,i,r,n,o){const a=Va.distanceSqToPoint(t);if(a<s){const s=new Ii;Va.closestPointToPoint(t,s),s.applyMatrix4(i);const h=r.ray.origin.distanceTo(s);if(h<r.near||h>r.far)return;n.push({distance:h,distanceToRay:Math.sqrt(a),point:s,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Ha extends Er{constructor(){super(),this.isGroup=!0,this.type=\"Group\"}}class qa extends vi{constructor(t,e,s,i,r,n,o,a,h){super(t,e,s,i,r,n,o,a,h),this.isVideoTexture=!0,this.minFilter=void 0!==n?n:wt,this.magFilter=void 0!==r?r:wt,this.generateMipmaps=!1;const l=this;\"requestVideoFrameCallback\"in t&&t.requestVideoFrameCallback((function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1===\"requestVideoFrameCallback\"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Ja extends vi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ft,this.minFilter=ft,this.generateMipmaps=!1,this.needsUpdate=!0}}class Xa extends vi{constructor(t,e,s,i,r,n,o,a,h,l,c,u){super(null,n,o,a,h,l,i,r,c,u),this.isCompressedTexture=!0,this.image={width:e,height:s},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class Ya extends Xa{constructor(t,e,s,i,r,n){super(t,e,s,r,n),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=mt,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Za extends Xa{constructor(t,e,s){super(void 0,t[0].width,t[0].height,e,s,ht),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class Ga extends vi{constructor(t,e,s,i,r,n,o,a,h){super(t,e,s,i,r,n,o,a,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $a extends vi{constructor(t,e,s,i,r,n,o,a,h,l=1026){if(l!==Dt&&l!==Ht)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===s&&l===Dt&&(s=kt),void 0===s&&l===Ht&&(s=1020),super(null,i,r,n,o,a,l,s,h),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==o?o:ft,this.minFilter=void 0!==a?a:ft,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Qa{constructor(){this.type=\"Curve\",this.arcLengthDivisions=200}getPoint(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null}getPointAt(t,e){const s=this.getUtoTmapping(t);return this.getPoint(s,e)}getPoints(t=5){const e=[];for(let s=0;s<=t;s++)e.push(this.getPoint(s/t));return e}getSpacedPoints(t=5){const e=[];for(let s=0;s<=t;s++)e.push(this.getPointAt(s/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let s,i=this.getPoint(0),r=0;e.push(0);for(let n=1;n<=t;n++)s=this.getPoint(n/t),r+=s.distanceTo(i),e.push(r),i=s;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const s=this.getLengths();let i=0;const r=s.length;let n;n=e||t*s[r-1];let o,a=0,h=r-1;for(;a<=h;)if(i=Math.floor(a+(h-a)/2),o=s[i]-n,o<0)a=i+1;else{if(!(o>0)){h=i;break}h=i-1}if(i=h,s[i]===n)return i/(r-1);const l=s[i];return(i+(n-l)/(s[i+1]-l))/(r-1)}getTangent(t,e){const s=1e-4;let i=t-s,r=t+s;i<0&&(i=0),r>1&&(r=1);const n=this.getPoint(i),o=this.getPoint(r),a=e||(n.isVector2?new Zs:new Ii);return a.copy(o).sub(n).normalize(),a}getTangentAt(t,e){const s=this.getUtoTmapping(t);return this.getTangent(s,e)}computeFrenetFrames(t,e){const s=new Ii,i=[],r=[],n=[],o=new Ii,a=new nr;for(let e=0;e<=t;e++){const s=e/t;i[e]=this.getTangentAt(s,new Ii)}r[0]=new Ii,n[0]=new Ii;let h=Number.MAX_VALUE;const l=Math.abs(i[0].x),c=Math.abs(i[0].y),u=Math.abs(i[0].z);l<=h&&(h=l,s.set(1,0,0)),c<=h&&(h=c,s.set(0,1,0)),u<=h&&s.set(0,0,1),o.crossVectors(i[0],s).normalize(),r[0].crossVectors(i[0],o),n[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),n[e]=n[e-1].clone(),o.crossVectors(i[e-1],i[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(Ds(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(a.makeRotationAxis(o,t))}n[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(Ds(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let s=1;s<=t;s++)r[s].applyMatrix4(a.makeRotationAxis(i[s],e*s)),n[s].crossVectors(i[s],r[s])}return{tangents:i,normals:r,binormals:n}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:\"Curve\",generator:\"Curve.toJSON\"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Ka extends Qa{constructor(t=0,e=0,s=1,i=1,r=0,n=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type=\"EllipseCurve\",this.aX=t,this.aY=e,this.xRadius=s,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=n,this.aClockwise=o,this.aRotation=a}getPoint(t,e=new Zs){const s=e,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const n=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=n?0:i),!0!==this.aClockwise||n||(r===i?r=-i:r-=i);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),s=a-this.aX,i=h-this.aY;a=s*t-i*e+this.aX,h=s*e+i*t+this.aY}return s.set(a,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class th extends Ka{constructor(t,e,s,i,r,n){super(t,e,s,s,i,r,n),this.isArcCurve=!0,this.type=\"ArcCurve\"}}function eh(){let t=0,e=0,s=0,i=0;function r(r,n,o,a){t=r,e=o,s=-3*r+3*n-2*o-a,i=2*r-2*n+o+a}return{initCatmullRom:function(t,e,s,i,n){r(e,s,n*(s-t),n*(i-e))},initNonuniformCatmullRom:function(t,e,s,i,n,o,a){let h=(e-t)/n-(s-t)/(n+o)+(s-e)/o,l=(s-e)/o-(i-e)/(o+a)+(i-s)/a;h*=o,l*=o,r(e,s,h,l)},calc:function(r){const n=r*r;return t+e*r+s*n+i*(n*r)}}}const sh=new Ii,ih=new eh,rh=new eh,nh=new eh;class oh extends Qa{constructor(t=[],e=!1,s=\"centripetal\",i=.5){super(),this.isCatmullRomCurve3=!0,this.type=\"CatmullRomCurve3\",this.points=t,this.closed=e,this.curveType=s,this.tension=i}getPoint(t,e=new Ii){const s=e,i=this.points,r=i.length,n=(r-(this.closed?0:1))*t;let o,a,h=Math.floor(n),l=n-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/r)+1)*r:0===l&&h===r-1&&(h=r-2,l=1),this.closed||h>0?o=i[(h-1)%r]:(sh.subVectors(i[0],i[1]).add(i[0]),o=sh);const c=i[h%r],u=i[(h+1)%r];if(this.closed||h+2<r?a=i[(h+2)%r]:(sh.subVectors(i[r-1],i[r-2]).add(i[r-1]),a=sh),\"centripetal\"===this.curveType||\"chordal\"===this.curveType){const t=\"chordal\"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(c),t),s=Math.pow(c.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(a),t);s<1e-4&&(s=1),e<1e-4&&(e=s),i<1e-4&&(i=s),ih.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,e,s,i),rh.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,e,s,i),nh.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,e,s,i)}else\"catmullrom\"===this.curveType&&(ih.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),rh.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),nh.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return s.set(ih.calc(l),rh.calc(l),nh.calc(l)),s}copy(t){super.copy(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,s=this.points.length;e<s;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push((new Ii).fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function ah(t,e,s,i,r){const n=.5*(i-e),o=.5*(r-s),a=t*t;return(2*s-2*i+n+o)*(t*a)+(-3*s+3*i-2*n-o)*a+n*t+s}function hh(t,e,s,i){return function(t,e){const s=1-t;return s*s*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,s)+function(t,e){return t*t*e}(t,i)}function lh(t,e,s,i,r){return function(t,e){const s=1-t;return s*s*s*e}(t,e)+function(t,e){const s=1-t;return 3*s*s*t*e}(t,s)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}class ch extends Qa{constructor(t=new Zs,e=new Zs,s=new Zs,i=new Zs){super(),this.isCubicBezierCurve=!0,this.type=\"CubicBezierCurve\",this.v0=t,this.v1=e,this.v2=s,this.v3=i}getPoint(t,e=new Zs){const s=e,i=this.v0,r=this.v1,n=this.v2,o=this.v3;return s.set(lh(t,i.x,r.x,n.x,o.x),lh(t,i.y,r.y,n.y,o.y)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class uh extends Qa{constructor(t=new Ii,e=new Ii,s=new Ii,i=new Ii){super(),this.isCubicBezierCurve3=!0,this.type=\"CubicBezierCurve3\",this.v0=t,this.v1=e,this.v2=s,this.v3=i}getPoint(t,e=new Ii){const s=e,i=this.v0,r=this.v1,n=this.v2,o=this.v3;return s.set(lh(t,i.x,r.x,n.x,o.x),lh(t,i.y,r.y,n.y,o.y),lh(t,i.z,r.z,n.z,o.z)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class dh extends Qa{constructor(t=new Zs,e=new Zs){super(),this.isLineCurve=!0,this.type=\"LineCurve\",this.v1=t,this.v2=e}getPoint(t,e=new Zs){const s=e;return 1===t?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Zs){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class ph extends Qa{constructor(t=new Ii,e=new Ii){super(),this.isLineCurve3=!0,this.type=\"LineCurve3\",this.v1=t,this.v2=e}getPoint(t,e=new Ii){const s=e;return 1===t?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Ii){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class mh extends Qa{constructor(t=new Zs,e=new Zs,s=new Zs){super(),this.isQuadraticBezierCurve=!0,this.type=\"QuadraticBezierCurve\",this.v0=t,this.v1=e,this.v2=s}getPoint(t,e=new Zs){const s=e,i=this.v0,r=this.v1,n=this.v2;return s.set(hh(t,i.x,r.x,n.x),hh(t,i.y,r.y,n.y)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class yh extends Qa{constructor(t=new Ii,e=new Ii,s=new Ii){super(),this.isQuadraticBezierCurve3=!0,this.type=\"QuadraticBezierCurve3\",this.v0=t,this.v1=e,this.v2=s}getPoint(t,e=new Ii){const s=e,i=this.v0,r=this.v1,n=this.v2;return s.set(hh(t,i.x,r.x,n.x),hh(t,i.y,r.y,n.y),hh(t,i.z,r.z,n.z)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class fh extends Qa{constructor(t=[]){super(),this.isSplineCurve=!0,this.type=\"SplineCurve\",this.points=t}getPoint(t,e=new Zs){const s=e,i=this.points,r=(i.length-1)*t,n=Math.floor(r),o=r-n,a=i[0===n?n:n-1],h=i[n],l=i[n>i.length-2?i.length-1:n+1],c=i[n>i.length-3?i.length-1:n+2];return s.set(ah(o,a.x,h.x,l.x,c.x),ah(o,a.y,h.y,l.y,c.y)),s}copy(t){super.copy(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,s=this.points.length;e<s;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push((new Zs).fromArray(s))}return this}}var gh=Object.freeze({__proto__:null,ArcCurve:th,CatmullRomCurve3:oh,CubicBezierCurve:ch,CubicBezierCurve3:uh,EllipseCurve:Ka,LineCurve:dh,LineCurve3:ph,QuadraticBezierCurve:mh,QuadraticBezierCurve3:yh,SplineCurve:fh});class xh extends Qa{constructor(){super(),this.type=\"CurvePath\",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const s=!0===t.isVector2?\"LineCurve\":\"LineCurve3\";this.curves.push(new gh[s](e,t))}return this}getPoint(t,e){const s=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=s){const t=i[r]-s,n=this.curves[r],o=n.getLength(),a=0===o?0:1-t/o;return n.getPointAt(a,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let s=0,i=this.curves.length;s<i;s++)e+=this.curves[s].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let s=0;s<=t;s++)e.push(this.getPoint(s/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let s;for(let i=0,r=this.curves;i<r.length;i++){const n=r[i],o=n.isEllipseCurve?2*t:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?t*n.points.length:t,a=n.getPoints(o);for(let t=0;t<a.length;t++){const i=a[t];s&&s.equals(i)||(e.push(i),s=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,s=t.curves.length;e<s;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,s=this.curves.length;e<s;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,s=t.curves.length;e<s;e++){const s=t.curves[e];this.curves.push((new gh[s.type]).fromJSON(s))}return this}}class bh extends xh{constructor(t){super(),this.type=\"Path\",this.currentPoint=new Zs,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,s=t.length;e<s;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const s=new dh(this.currentPoint.clone(),new Zs(t,e));return this.curves.push(s),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,s,i){const r=new mh(this.currentPoint.clone(),new Zs(t,e),new Zs(s,i));return this.curves.push(r),this.currentPoint.set(s,i),this}bezierCurveTo(t,e,s,i,r,n){const o=new ch(this.currentPoint.clone(),new Zs(t,e),new Zs(s,i),new Zs(r,n));return this.curves.push(o),this.currentPoint.set(r,n),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),s=new fh(e);return this.curves.push(s),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,s,i,r,n){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,s,i,r,n),this}absarc(t,e,s,i,r,n){return this.absellipse(t,e,s,s,i,r,n),this}ellipse(t,e,s,i,r,n,o,a){const h=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+h,e+l,s,i,r,n,o,a),this}absellipse(t,e,s,i,r,n,o,a){const h=new Ka(t,e,s,i,r,n,o,a);if(this.curves.length>0){const t=h.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(h);const l=h.getPoint(1);return this.currentPoint.copy(l),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class vh extends zn{constructor(t=[new Zs(0,-.5),new Zs(.5,0),new Zs(0,.5)],e=12,s=0,i=2*Math.PI){super(),this.type=\"LatheGeometry\",this.parameters={points:t,segments:e,phiStart:s,phiLength:i},e=Math.floor(e),i=Ds(i,0,2*Math.PI);const r=[],n=[],o=[],a=[],h=[],l=1/e,c=new Ii,u=new Zs,d=new Ii,p=new Ii,m=new Ii;let y=0,f=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:y=t[e+1].x-t[e].x,f=t[e+1].y-t[e].y,d.x=1*f,d.y=-y,d.z=0*f,m.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case t.length-1:a.push(m.x,m.y,m.z);break;default:y=t[e+1].x-t[e].x,f=t[e+1].y-t[e].y,d.x=1*f,d.y=-y,d.z=0*f,p.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),a.push(d.x,d.y,d.z),m.copy(p)}for(let r=0;r<=e;r++){const d=s+r*l*i,p=Math.sin(d),m=Math.cos(d);for(let s=0;s<=t.length-1;s++){c.x=t[s].x*p,c.y=t[s].y,c.z=t[s].x*m,n.push(c.x,c.y,c.z),u.x=r/e,u.y=s/(t.length-1),o.push(u.x,u.y);const i=a[3*s+0]*p,l=a[3*s+1],d=a[3*s+0]*m;h.push(i,l,d)}}for(let s=0;s<e;s++)for(let e=0;e<t.length-1;e++){const i=e+s*t.length,n=i,o=i+t.length,a=i+t.length+1,h=i+1;r.push(n,o,h),r.push(a,h,o)}this.setIndex(r),this.setAttribute(\"position\",new bn(n,3)),this.setAttribute(\"uv\",new bn(o,2)),this.setAttribute(\"normal\",new bn(h,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new vh(t.points,t.segments,t.phiStart,t.phiLength)}}class wh extends vh{constructor(t=1,e=1,s=4,i=8){const r=new bh;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(s),i),this.type=\"CapsuleGeometry\",this.parameters={radius:t,length:e,capSegments:s,radialSegments:i}}static fromJSON(t){return new wh(t.radius,t.length,t.capSegments,t.radialSegments)}}class Mh extends zn{constructor(t=1,e=32,s=0,i=2*Math.PI){super(),this.type=\"CircleGeometry\",this.parameters={radius:t,segments:e,thetaStart:s,thetaLength:i},e=Math.max(3,e);const r=[],n=[],o=[],a=[],h=new Ii,l=new Zs;n.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let r=0,c=3;r<=e;r++,c+=3){const u=s+r/e*i;h.x=t*Math.cos(u),h.y=t*Math.sin(u),n.push(h.x,h.y,h.z),o.push(0,0,1),l.x=(n[c]/t+1)/2,l.y=(n[c+1]/t+1)/2,a.push(l.x,l.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute(\"position\",new bn(n,3)),this.setAttribute(\"normal\",new bn(o,3)),this.setAttribute(\"uv\",new bn(a,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Mh(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Sh extends zn{constructor(t=1,e=1,s=1,i=32,r=1,n=!1,o=0,a=2*Math.PI){super(),this.type=\"CylinderGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:s,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:o,thetaLength:a};const h=this;i=Math.floor(i),r=Math.floor(r);const l=[],c=[],u=[],d=[];let p=0;const m=[],y=s/2;let f=0;function g(s){const r=p,n=new Zs,m=new Ii;let g=0;const x=!0===s?t:e,b=!0===s?1:-1;for(let t=1;t<=i;t++)c.push(0,y*b,0),u.push(0,b,0),d.push(.5,.5),p++;const v=p;for(let t=0;t<=i;t++){const e=t/i*a+o,s=Math.cos(e),r=Math.sin(e);m.x=x*r,m.y=y*b,m.z=x*s,c.push(m.x,m.y,m.z),u.push(0,b,0),n.x=.5*s+.5,n.y=.5*r*b+.5,d.push(n.x,n.y),p++}for(let t=0;t<i;t++){const e=r+t,i=v+t;!0===s?l.push(i,i+1,e):l.push(i+1,i,e),g+=3}h.addGroup(f,g,!0===s?1:2),f+=g}!function(){const n=new Ii,g=new Ii;let x=0;const b=(e-t)/s;for(let h=0;h<=r;h++){const l=[],f=h/r,x=f*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*a+o,h=Math.sin(r),m=Math.cos(r);g.x=x*h,g.y=-f*s+y,g.z=x*m,c.push(g.x,g.y,g.z),n.set(h,b,m).normalize(),u.push(n.x,n.y,n.z),d.push(e,1-f),l.push(p++)}m.push(l)}for(let s=0;s<i;s++)for(let i=0;i<r;i++){const n=m[i][s],o=m[i+1][s],a=m[i+1][s+1],h=m[i][s+1];(t>0||0!==i)&&(l.push(n,o,h),x+=3),(e>0||i!==r-1)&&(l.push(o,a,h),x+=3)}h.addGroup(f,x,0),f+=x}(),!1===n&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(l),this.setAttribute(\"position\",new bn(c,3)),this.setAttribute(\"normal\",new bn(u,3)),this.setAttribute(\"uv\",new bn(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Sh(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class _h extends Sh{constructor(t=1,e=1,s=32,i=1,r=!1,n=0,o=2*Math.PI){super(0,t,e,s,i,r,n,o),this.type=\"ConeGeometry\",this.parameters={radius:t,height:e,radialSegments:s,heightSegments:i,openEnded:r,thetaStart:n,thetaLength:o}}static fromJSON(t){return new _h(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ah extends zn{constructor(t=[],e=[],s=1,i=0){super(),this.type=\"PolyhedronGeometry\",this.parameters={vertices:t,indices:e,radius:s,detail:i};const r=[],n=[];function o(t,e,s,i){const r=i+1,n=[];for(let i=0;i<=r;i++){n[i]=[];const o=t.clone().lerp(s,i/r),a=e.clone().lerp(s,i/r),h=r-i;for(let t=0;t<=h;t++)n[i][t]=0===t&&i===r?o:o.clone().lerp(a,t/h)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const s=Math.floor(e/2);e%2==0?(a(n[t][s+1]),a(n[t+1][s]),a(n[t][s])):(a(n[t][s+1]),a(n[t+1][s+1]),a(n[t+1][s]))}}function a(t){r.push(t.x,t.y,t.z)}function h(e,s){const i=3*e;s.x=t[i+0],s.y=t[i+1],s.z=t[i+2]}function l(t,e,s,i){i<0&&1===t.x&&(n[e]=t.x-1),0===s.x&&0===s.z&&(n[e]=i/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){const s=new Ii,i=new Ii,r=new Ii;for(let n=0;n<e.length;n+=3)h(e[n+0],s),h(e[n+1],i),h(e[n+2],r),o(s,i,r,t)}(i),function(t){const e=new Ii;for(let s=0;s<r.length;s+=3)e.x=r[s+0],e.y=r[s+1],e.z=r[s+2],e.normalize().multiplyScalar(t),r[s+0]=e.x,r[s+1]=e.y,r[s+2]=e.z}(s),function(){const t=new Ii;for(let s=0;s<r.length;s+=3){t.x=r[s+0],t.y=r[s+1],t.z=r[s+2];const i=c(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);n.push(i,1-o)}var e;(function(){const t=new Ii,e=new Ii,s=new Ii,i=new Ii,o=new Zs,a=new Zs,h=new Zs;for(let u=0,d=0;u<r.length;u+=9,d+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),s.set(r[u+6],r[u+7],r[u+8]),o.set(n[d+0],n[d+1]),a.set(n[d+2],n[d+3]),h.set(n[d+4],n[d+5]),i.copy(t).add(e).add(s).divideScalar(3);const p=c(i);l(o,d+0,t,p),l(a,d+2,e,p),l(h,d+4,s,p)}})(),function(){for(let t=0;t<n.length;t+=6){const e=n[t+0],s=n[t+2],i=n[t+4],r=Math.max(e,s,i),o=Math.min(e,s,i);r>.9&&o<.1&&(e<.2&&(n[t+0]+=1),s<.2&&(n[t+2]+=1),i<.2&&(n[t+4]+=1))}}()}(),this.setAttribute(\"position\",new bn(r,3)),this.setAttribute(\"normal\",new bn(r.slice(),3)),this.setAttribute(\"uv\",new bn(n,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ah(t.vertices,t.indices,t.radius,t.details)}}class Th extends Ah{constructor(t=1,e=0){const s=(1+Math.sqrt(5))/2,i=1/s;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-s,0,-i,s,0,i,-s,0,i,s,-i,-s,0,-i,s,0,i,-s,0,i,s,0,-s,0,-i,s,0,-i,-s,0,i,s,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type=\"DodecahedronGeometry\",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Th(t.radius,t.detail)}}const zh=new Ii,Ch=new Ii,Ih=new Ii,Bh=new Jr;class kh extends zn{constructor(t=null,e=1){if(super(),this.type=\"EdgesGeometry\",this.parameters={geometry:t,thresholdAngle:e},null!==t){const s=4,i=Math.pow(10,s),r=Math.cos(Ws*e),n=t.getIndex(),o=t.getAttribute(\"position\"),a=n?n.count:o.count,h=[0,0,0],l=[\"a\",\"b\",\"c\"],c=new Array(3),u={},d=[];for(let t=0;t<a;t+=3){n?(h[0]=n.getX(t),h[1]=n.getX(t+1),h[2]=n.getX(t+2)):(h[0]=t,h[1]=t+1,h[2]=t+2);const{a:e,b:s,c:a}=Bh;if(e.fromBufferAttribute(o,h[0]),s.fromBufferAttribute(o,h[1]),a.fromBufferAttribute(o,h[2]),Bh.getNormal(Ih),c[0]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,c[1]=`${Math.round(s.x*i)},${Math.round(s.y*i)},${Math.round(s.z*i)}`,c[2]=`${Math.round(a.x*i)},${Math.round(a.y*i)},${Math.round(a.z*i)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,s=c[t],i=c[e],n=Bh[l[t]],o=Bh[l[e]],a=`${s}_${i}`,p=`${i}_${s}`;p in u&&u[p]?(Ih.dot(u[p].normal)<=r&&(d.push(n.x,n.y,n.z),d.push(o.x,o.y,o.z)),u[p]=null):a in u||(u[a]={index0:h[t],index1:h[e],normal:Ih.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:s}=u[t];zh.fromBufferAttribute(o,e),Ch.fromBufferAttribute(o,s),d.push(zh.x,zh.y,zh.z),d.push(Ch.x,Ch.y,Ch.z)}this.setAttribute(\"position\",new bn(d,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Eh extends bh{constructor(t){super(t),this.uuid=js(),this.type=\"Shape\",this.holes=[]}getPointsHoles(t){const e=[];for(let s=0,i=this.holes.length;s<i;s++)e[s]=this.holes[s].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,s=t.holes.length;e<s;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,s=this.holes.length;e<s;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,s=t.holes.length;e<s;e++){const s=t.holes[e];this.holes.push((new bh).fromJSON(s))}return this}}const Rh=function(t,e,s=2){const i=e&&e.length,r=i?e[0]*s:t.length;let n=Ph(t,0,r,s,!0);const o=[];if(!n||n.next===n.prev)return o;let a,h,l,c,u,d,p;if(i&&(n=function(t,e,s,i){const r=[];let n,o,a,h,l;for(n=0,o=e.length;n<o;n++)a=e[n]*i,h=n<o-1?e[n+1]*i:t.length,l=Ph(t,a,h,i,!1),l===l.next&&(l.steiner=!0),r.push(qh(l));for(r.sort(Uh),n=0;n<r.length;n++)s=jh(r[n],s);return s}(t,e,n,s)),t.length>80*s){a=l=t[0],h=c=t[1];for(let e=s;e<r;e+=s)u=t[e],d=t[e+1],u<a&&(a=u),d<h&&(h=d),u>l&&(l=u),d>c&&(c=d);p=Math.max(l-a,c-h),p=0!==p?32767/p:0}return Fh(n,o,s,a,h,p,0),o};function Ph(t,e,s,i,r){let n,o;if(r===function(t,e,s,i){let r=0;for(let n=e,o=s-i;n<s;n+=i)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}(t,e,s,i)>0)for(n=e;n<s;n+=i)o=el(n,t[n],t[n+1],o);else for(n=s-i;n>=e;n-=i)o=el(n,t[n],t[n+1],o);return o&&Zh(o,o.next)&&(sl(o),o=o.next),o}function Oh(t,e){if(!t)return t;e||(e=t);let s,i=t;do{if(s=!1,i.steiner||!Zh(i,i.next)&&0!==Yh(i.prev,i,i.next))i=i.next;else{if(sl(i),i=e=i.prev,i===i.next)break;s=!0}}while(s||i!==e);return e}function Fh(t,e,s,i,r,n,o){if(!t)return;!o&&n&&function(t,e,s,i){let r=t;do{0===r.z&&(r.z=Hh(r.x,r.y,e,s,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,s,i,r,n,o,a,h,l=1;do{for(s=t,t=null,n=null,o=0;s;){for(o++,i=s,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(h=l;a>0||h>0&&i;)0!==a&&(0===h||!i||s.z<=i.z)?(r=s,s=s.nextZ,a--):(r=i,i=i.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;s=i}n.nextZ=null,l*=2}while(o>1)}(r)}(t,i,r,n);let a,h,l=t;for(;t.prev!==t.next;)if(a=t.prev,h=t.next,n?Lh(t,i,r,n):Nh(t))e.push(a.i/s|0),e.push(t.i/s|0),e.push(h.i/s|0),sl(t),t=h.next,l=h.next;else if((t=h)===l){o?1===o?Fh(t=Vh(Oh(t),e,s),e,s,i,r,n,2):2===o&&Wh(t,e,s,i,r,n):Fh(Oh(t),e,s,i,r,n,1);break}}function Nh(t){const e=t.prev,s=t,i=t.next;if(Yh(e,s,i)>=0)return!1;const r=e.x,n=s.x,o=i.x,a=e.y,h=s.y,l=i.y,c=r<n?r<o?r:o:n<o?n:o,u=a<h?a<l?a:l:h<l?h:l,d=r>n?r>o?r:o:n>o?n:o,p=a>h?a>l?a:l:h>l?h:l;let m=i.next;for(;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=u&&m.y<=p&&Jh(r,a,n,h,o,l,m.x,m.y)&&Yh(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Lh(t,e,s,i){const r=t.prev,n=t,o=t.next;if(Yh(r,n,o)>=0)return!1;const a=r.x,h=n.x,l=o.x,c=r.y,u=n.y,d=o.y,p=a<h?a<l?a:l:h<l?h:l,m=c<u?c<d?c:d:u<d?u:d,y=a>h?a>l?a:l:h>l?h:l,f=c>u?c>d?c:d:u>d?u:d,g=Hh(p,m,e,s,i),x=Hh(y,f,e,s,i);let b=t.prevZ,v=t.nextZ;for(;b&&b.z>=g&&v&&v.z<=x;){if(b.x>=p&&b.x<=y&&b.y>=m&&b.y<=f&&b!==r&&b!==o&&Jh(a,c,h,u,l,d,b.x,b.y)&&Yh(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,v.x>=p&&v.x<=y&&v.y>=m&&v.y<=f&&v!==r&&v!==o&&Jh(a,c,h,u,l,d,v.x,v.y)&&Yh(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;b&&b.z>=g;){if(b.x>=p&&b.x<=y&&b.y>=m&&b.y<=f&&b!==r&&b!==o&&Jh(a,c,h,u,l,d,b.x,b.y)&&Yh(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;v&&v.z<=x;){if(v.x>=p&&v.x<=y&&v.y>=m&&v.y<=f&&v!==r&&v!==o&&Jh(a,c,h,u,l,d,v.x,v.y)&&Yh(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Vh(t,e,s){let i=t;do{const r=i.prev,n=i.next.next;!Zh(r,n)&&Gh(r,i,i.next,n)&&Kh(r,n)&&Kh(n,r)&&(e.push(r.i/s|0),e.push(i.i/s|0),e.push(n.i/s|0),sl(i),sl(i.next),i=t=n),i=i.next}while(i!==t);return Oh(i)}function Wh(t,e,s,i,r,n){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&Xh(o,t)){let a=tl(o,t);return o=Oh(o,o.next),a=Oh(a,a.next),Fh(o,e,s,i,r,n,0),void Fh(a,e,s,i,r,n,0)}t=t.next}o=o.next}while(o!==t)}function Uh(t,e){return t.x-e.x}function jh(t,e){const s=function(t,e){let s,i=e,r=-1/0;const n=t.x,o=t.y;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){const t=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=n&&t>r&&(r=t,s=i.x<i.next.x?i:i.next,t===n))return s}i=i.next}while(i!==e);if(!s)return null;const a=s,h=s.x,l=s.y;let c,u=1/0;i=s;do{n>=i.x&&i.x>=h&&n!==i.x&&Jh(o<l?n:r,o,h,l,o<l?r:n,o,i.x,i.y)&&(c=Math.abs(o-i.y)/(n-i.x),Kh(i,t)&&(c<u||c===u&&(i.x>s.x||i.x===s.x&&Dh(s,i)))&&(s=i,u=c)),i=i.next}while(i!==a);return s}(t,e);if(!s)return e;const i=tl(s,t);return Oh(i,i.next),Oh(s,s.next)}function Dh(t,e){return Yh(t.prev,t,e.prev)<0&&Yh(e.next,t,t.next)<0}function Hh(t,e,s,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-s)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qh(t){let e=t,s=t;do{(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next}while(e!==t);return s}function Jh(t,e,s,i,r,n,o,a){return(r-o)*(e-a)>=(t-o)*(n-a)&&(t-o)*(i-a)>=(s-o)*(e-a)&&(s-o)*(n-a)>=(r-o)*(i-a)}function Xh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==e.i&&s.next.i!==e.i&&Gh(s,s.next,t,e))return!0;s=s.next}while(s!==t);return!1}(t,e)&&(Kh(t,e)&&Kh(e,t)&&function(t,e){let s=t,i=!1;const r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{s.y>n!=s.next.y>n&&s.next.y!==s.y&&r<(s.next.x-s.x)*(n-s.y)/(s.next.y-s.y)+s.x&&(i=!i),s=s.next}while(s!==t);return i}(t,e)&&(Yh(t.prev,t,e.prev)||Yh(t,e.prev,e))||Zh(t,e)&&Yh(t.prev,t,t.next)>0&&Yh(e.prev,e,e.next)>0)}function Yh(t,e,s){return(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y)}function Zh(t,e){return t.x===e.x&&t.y===e.y}function Gh(t,e,s,i){const r=Qh(Yh(t,e,s)),n=Qh(Yh(t,e,i)),o=Qh(Yh(s,i,t)),a=Qh(Yh(s,i,e));return r!==n&&o!==a||(!(0!==r||!$h(t,s,e))||(!(0!==n||!$h(t,i,e))||(!(0!==o||!$h(s,t,i))||!(0!==a||!$h(s,e,i)))))}function $h(t,e,s){return e.x<=Math.max(t.x,s.x)&&e.x>=Math.min(t.x,s.x)&&e.y<=Math.max(t.y,s.y)&&e.y>=Math.min(t.y,s.y)}function Qh(t){return t>0?1:t<0?-1:0}function Kh(t,e){return Yh(t.prev,t,t.next)<0?Yh(t,e,t.next)>=0&&Yh(t,t.prev,e)>=0:Yh(t,e,t.prev)<0||Yh(t,t.next,e)<0}function tl(t,e){const s=new il(t.i,t.x,t.y),i=new il(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,s.next=r,r.prev=s,i.next=s,s.prev=i,n.next=i,i.prev=n,i}function el(t,e,s,i){const r=new il(t,e,s);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function sl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function il(t,e,s){this.i=t,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class rl{static area(t){const e=t.length;let s=0;for(let i=e-1,r=0;r<e;i=r++)s+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*s}static isClockWise(t){return rl.area(t)<0}static triangulateShape(t,e){const s=[],i=[],r=[];nl(t),ol(s,t);let n=t.length;e.forEach(nl);for(let t=0;t<e.length;t++)i.push(n),n+=e[t].length,ol(s,e[t]);const o=Rh(s,i);for(let t=0;t<o.length;t+=3)r.push(o.slice(t,t+3));return r}}function nl(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ol(t,e){for(let s=0;s<e.length;s++)t.push(e[s].x),t.push(e[s].y)}class al extends zn{constructor(t=new Eh([new Zs(.5,.5),new Zs(-.5,.5),new Zs(-.5,-.5),new Zs(.5,-.5)]),e={}){super(),this.type=\"ExtrudeGeometry\",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const s=this,i=[],r=[];for(let e=0,s=t.length;e<s;e++){n(t[e])}function n(t){const n=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1,h=void 0!==e.depth?e.depth:1;let l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:c-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const m=e.extrudePath,y=void 0!==e.UVGenerator?e.UVGenerator:hl;let f,g,x,b,v,w=!1;m&&(f=m.getSpacedPoints(a),w=!0,l=!1,g=m.computeFrenetFrames(a,!1),x=new Ii,b=new Ii,v=new Ii),l||(p=0,c=0,u=0,d=0);const M=t.extractPoints(o);let S=M.shape;const _=M.holes;if(!rl.isClockWise(S)){S=S.reverse();for(let t=0,e=_.length;t<e;t++){const e=_[t];rl.isClockWise(e)&&(_[t]=e.reverse())}}const A=rl.triangulateShape(S,_),T=S;for(let t=0,e=_.length;t<e;t++){const e=_[t];S=S.concat(e)}function z(t,e,s){return e||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),t.clone().addScaledVector(e,s)}const C=S.length,I=A.length;function B(t,e,s){let i,r,n;const o=t.x-e.x,a=t.y-e.y,h=s.x-t.x,l=s.y-t.y,c=o*o+a*a,u=o*l-a*h;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(c),d=Math.sqrt(h*h+l*l),p=e.x-a/u,m=e.y+o/u,y=((s.x-l/d-p)*l-(s.y+h/d-m)*h)/(o*l-a*h);i=p+o*y-t.x,r=m+a*y-t.y;const f=i*i+r*r;if(f<=2)return new Zs(i,r);n=Math.sqrt(f/2)}else{let t=!1;o>Number.EPSILON?h>Number.EPSILON&&(t=!0):o<-Number.EPSILON?h<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(l)&&(t=!0),t?(i=-a,r=o,n=Math.sqrt(c)):(i=o,r=a,n=Math.sqrt(c/2))}return new Zs(i/n,r/n)}const k=[];for(let t=0,e=T.length,s=e-1,i=t+1;t<e;t++,s++,i++)s===e&&(s=0),i===e&&(i=0),k[t]=B(T[t],T[s],T[i]);const E=[];let R,P=k.concat();for(let t=0,e=_.length;t<e;t++){const e=_[t];R=[];for(let t=0,s=e.length,i=s-1,r=t+1;t<s;t++,i++,r++)i===s&&(i=0),r===s&&(r=0),R[t]=B(e[t],e[i],e[r]);E.push(R),P=P.concat(R)}for(let t=0;t<p;t++){const e=t/p,s=c*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=T.length;t<e;t++){const e=z(T[t],k[t],i);N(e.x,e.y,-s)}for(let t=0,e=_.length;t<e;t++){const e=_[t];R=E[t];for(let t=0,r=e.length;t<r;t++){const r=z(e[t],R[t],i);N(r.x,r.y,-s)}}}const O=u+d;for(let t=0;t<C;t++){const e=l?z(S[t],P[t],O):S[t];w?(b.copy(g.normals[0]).multiplyScalar(e.x),x.copy(g.binormals[0]).multiplyScalar(e.y),v.copy(f[0]).add(b).add(x),N(v.x,v.y,v.z)):N(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<C;e++){const s=l?z(S[e],P[e],O):S[e];w?(b.copy(g.normals[t]).multiplyScalar(s.x),x.copy(g.binormals[t]).multiplyScalar(s.y),v.copy(f[t]).add(b).add(x),N(v.x,v.y,v.z)):N(s.x,s.y,h/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,s=c*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=T.length;t<e;t++){const e=z(T[t],k[t],i);N(e.x,e.y,h+s)}for(let t=0,e=_.length;t<e;t++){const e=_[t];R=E[t];for(let t=0,r=e.length;t<r;t++){const r=z(e[t],R[t],i);w?N(r.x,r.y+f[a-1].y,f[a-1].x+s):N(r.x,r.y,h+s)}}}function F(t,e){let s=t.length;for(;--s>=0;){const i=s;let r=s-1;r<0&&(r=t.length-1);for(let t=0,s=a+2*p;t<s;t++){const s=C*t,n=C*(t+1);V(e+i+s,e+r+s,e+r+n,e+i+n)}}}function N(t,e,s){n.push(t),n.push(e),n.push(s)}function L(t,e,r){W(t),W(e),W(r);const n=i.length/3,o=y.generateTopUV(s,i,n-3,n-2,n-1);U(o[0]),U(o[1]),U(o[2])}function V(t,e,r,n){W(t),W(e),W(n),W(e),W(r),W(n);const o=i.length/3,a=y.generateSideWallUV(s,i,o-6,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[3]),U(a[1]),U(a[2]),U(a[3])}function W(t){i.push(n[3*t+0]),i.push(n[3*t+1]),i.push(n[3*t+2])}function U(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(l){let t=0,e=C*t;for(let t=0;t<I;t++){const s=A[t];L(s[2]+e,s[1]+e,s[0]+e)}t=a+2*p,e=C*t;for(let t=0;t<I;t++){const s=A[t];L(s[0]+e,s[1]+e,s[2]+e)}}else{for(let t=0;t<I;t++){const e=A[t];L(e[2],e[1],e[0])}for(let t=0;t<I;t++){const e=A[t];L(e[0]+C*a,e[1]+C*a,e[2]+C*a)}}s.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;F(T,e),e+=T.length;for(let t=0,s=_.length;t<s;t++){const s=_[t];F(s,e),e+=s.length}s.addGroup(t,i.length/3-t,1)}()}this.setAttribute(\"position\",new bn(i,3)),this.setAttribute(\"uv\",new bn(r,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,s){if(s.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];s.shapes.push(i.uuid)}else s.shapes.push(t.uuid);s.options=Object.assign({},e),void 0!==e.extrudePath&&(s.options.extrudePath=e.extrudePath.toJSON());return s}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const s=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];s.push(r)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new gh[i.type]).fromJSON(i)),new al(s,t.options)}}const hl={generateTopUV:function(t,e,s,i,r){const n=e[3*s],o=e[3*s+1],a=e[3*i],h=e[3*i+1],l=e[3*r],c=e[3*r+1];return[new Zs(n,o),new Zs(a,h),new Zs(l,c)]},generateSideWallUV:function(t,e,s,i,r,n){const o=e[3*s],a=e[3*s+1],h=e[3*s+2],l=e[3*i],c=e[3*i+1],u=e[3*i+2],d=e[3*r],p=e[3*r+1],m=e[3*r+2],y=e[3*n],f=e[3*n+1],g=e[3*n+2];return Math.abs(a-c)<Math.abs(o-l)?[new Zs(o,1-h),new Zs(l,1-u),new Zs(d,1-m),new Zs(y,1-g)]:[new Zs(a,1-h),new Zs(c,1-u),new Zs(p,1-m),new Zs(f,1-g)]}};class ll extends Ah{constructor(t=1,e=0){const s=(1+Math.sqrt(5))/2;super([-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type=\"IcosahedronGeometry\",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ll(t.radius,t.detail)}}class cl extends Ah{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type=\"OctahedronGeometry\",this.parameters={radius:t,detail:e}}static fromJSON(t){return new cl(t.radius,t.detail)}}class ul extends zn{constructor(t=1,e=1,s=1,i=1){super(),this.type=\"PlaneGeometry\",this.parameters={width:t,height:e,widthSegments:s,heightSegments:i};const r=t/2,n=e/2,o=Math.floor(s),a=Math.floor(i),h=o+1,l=a+1,c=t/o,u=e/a,d=[],p=[],m=[],y=[];for(let t=0;t<l;t++){const e=t*u-n;for(let s=0;s<h;s++){const i=s*c-r;p.push(i,-e,0),m.push(0,0,1),y.push(s/o),y.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<o;e++){const s=e+h*t,i=e+h*(t+1),r=e+1+h*(t+1),n=e+1+h*t;d.push(s,i,n),d.push(i,r,n)}this.setIndex(d),this.setAttribute(\"position\",new bn(p,3)),this.setAttribute(\"normal\",new bn(m,3)),this.setAttribute(\"uv\",new bn(y,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ul(t.width,t.height,t.widthSegments,t.heightSegments)}}class dl extends zn{constructor(t=.5,e=1,s=32,i=1,r=0,n=2*Math.PI){super(),this.type=\"RingGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:s,phiSegments:i,thetaStart:r,thetaLength:n},s=Math.max(3,s);const o=[],a=[],h=[],l=[];let c=t;const u=(e-t)/(i=Math.max(1,i)),d=new Ii,p=new Zs;for(let t=0;t<=i;t++){for(let t=0;t<=s;t++){const i=r+t/s*n;d.x=c*Math.cos(i),d.y=c*Math.sin(i),a.push(d.x,d.y,d.z),h.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,l.push(p.x,p.y)}c+=u}for(let t=0;t<i;t++){const e=t*(s+1);for(let t=0;t<s;t++){const i=t+e,r=i,n=i+s+1,a=i+s+2,h=i+1;o.push(r,n,h),o.push(n,a,h)}}this.setIndex(o),this.setAttribute(\"position\",new bn(a,3)),this.setAttribute(\"normal\",new bn(h,3)),this.setAttribute(\"uv\",new bn(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new dl(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class pl extends zn{constructor(t=new Eh([new Zs(0,.5),new Zs(-.5,-.5),new Zs(.5,-.5)]),e=12){super(),this.type=\"ShapeGeometry\",this.parameters={shapes:t,curveSegments:e};const s=[],i=[],r=[],n=[];let o=0,a=0;if(!1===Array.isArray(t))h(t);else for(let e=0;e<t.length;e++)h(t[e]),this.addGroup(o,a,e),o+=a,a=0;function h(t){const o=i.length/3,h=t.extractPoints(e);let l=h.shape;const c=h.holes;!1===rl.isClockWise(l)&&(l=l.reverse());for(let t=0,e=c.length;t<e;t++){const e=c[t];!0===rl.isClockWise(e)&&(c[t]=e.reverse())}const u=rl.triangulateShape(l,c);for(let t=0,e=c.length;t<e;t++){const e=c[t];l=l.concat(e)}for(let t=0,e=l.length;t<e;t++){const e=l[t];i.push(e.x,e.y,0),r.push(0,0,1),n.push(e.x,e.y)}for(let t=0,e=u.length;t<e;t++){const e=u[t],i=e[0]+o,r=e[1]+o,n=e[2]+o;s.push(i,r,n),a+=3}}this.setIndex(s),this.setAttribute(\"position\",new bn(i,3)),this.setAttribute(\"normal\",new bn(r,3)),this.setAttribute(\"uv\",new bn(n,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let s=0,i=t.length;s<i;s++){const i=t[s];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const s=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];s.push(r)}return new pl(s,t.curveSegments)}}class ml extends zn{constructor(t=1,e=32,s=16,i=0,r=2*Math.PI,n=0,o=Math.PI){super(),this.type=\"SphereGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:s,phiStart:i,phiLength:r,thetaStart:n,thetaLength:o},e=Math.max(3,Math.floor(e)),s=Math.max(2,Math.floor(s));const a=Math.min(n+o,Math.PI);let h=0;const l=[],c=new Ii,u=new Ii,d=[],p=[],m=[],y=[];for(let d=0;d<=s;d++){const f=[],g=d/s;let x=0;0===d&&0===n?x=.5/e:d===s&&a===Math.PI&&(x=-.5/e);for(let s=0;s<=e;s++){const a=s/e;c.x=-t*Math.cos(i+a*r)*Math.sin(n+g*o),c.y=t*Math.cos(n+g*o),c.z=t*Math.sin(i+a*r)*Math.sin(n+g*o),p.push(c.x,c.y,c.z),u.copy(c).normalize(),m.push(u.x,u.y,u.z),y.push(a+x,1-g),f.push(h++)}l.push(f)}for(let t=0;t<s;t++)for(let i=0;i<e;i++){const e=l[t][i+1],r=l[t][i],o=l[t+1][i],h=l[t+1][i+1];(0!==t||n>0)&&d.push(e,r,h),(t!==s-1||a<Math.PI)&&d.push(r,o,h)}this.setIndex(d),this.setAttribute(\"position\",new bn(p,3)),this.setAttribute(\"normal\",new bn(m,3)),this.setAttribute(\"uv\",new bn(y,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ml(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class yl extends Ah{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type=\"TetrahedronGeometry\",this.parameters={radius:t,detail:e}}static fromJSON(t){return new yl(t.radius,t.detail)}}class fl extends zn{constructor(t=1,e=.4,s=12,i=48,r=2*Math.PI){super(),this.type=\"TorusGeometry\",this.parameters={radius:t,tube:e,radialSegments:s,tubularSegments:i,arc:r},s=Math.floor(s),i=Math.floor(i);const n=[],o=[],a=[],h=[],l=new Ii,c=new Ii,u=new Ii;for(let n=0;n<=s;n++)for(let d=0;d<=i;d++){const p=d/i*r,m=n/s*Math.PI*2;c.x=(t+e*Math.cos(m))*Math.cos(p),c.y=(t+e*Math.cos(m))*Math.sin(p),c.z=e*Math.sin(m),o.push(c.x,c.y,c.z),l.x=t*Math.cos(p),l.y=t*Math.sin(p),u.subVectors(c,l).normalize(),a.push(u.x,u.y,u.z),h.push(d/i),h.push(n/s)}for(let t=1;t<=s;t++)for(let e=1;e<=i;e++){const s=(i+1)*t+e-1,r=(i+1)*(t-1)+e-1,o=(i+1)*(t-1)+e,a=(i+1)*t+e;n.push(s,r,a),n.push(r,o,a)}this.setIndex(n),this.setAttribute(\"position\",new bn(o,3)),this.setAttribute(\"normal\",new bn(a,3)),this.setAttribute(\"uv\",new bn(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fl(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class gl extends zn{constructor(t=1,e=.4,s=64,i=8,r=2,n=3){super(),this.type=\"TorusKnotGeometry\",this.parameters={radius:t,tube:e,tubularSegments:s,radialSegments:i,p:r,q:n},s=Math.floor(s),i=Math.floor(i);const o=[],a=[],h=[],l=[],c=new Ii,u=new Ii,d=new Ii,p=new Ii,m=new Ii,y=new Ii,f=new Ii;for(let o=0;o<=s;++o){const x=o/s*r*Math.PI*2;g(x,r,n,t,d),g(x+.01,r,n,t,p),y.subVectors(p,d),f.addVectors(p,d),m.crossVectors(y,f),f.crossVectors(m,y),m.normalize(),f.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,n=-e*Math.cos(r),p=e*Math.sin(r);c.x=d.x+(n*f.x+p*m.x),c.y=d.y+(n*f.y+p*m.y),c.z=d.z+(n*f.z+p*m.z),a.push(c.x,c.y,c.z),u.subVectors(c,d).normalize(),h.push(u.x,u.y,u.z),l.push(o/s),l.push(t/i)}}for(let t=1;t<=s;t++)for(let e=1;e<=i;e++){const s=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),n=(i+1)*t+e,a=(i+1)*(t-1)+e;o.push(s,r,a),o.push(r,n,a)}function g(t,e,s,i,r){const n=Math.cos(t),o=Math.sin(t),a=s/e*t,h=Math.cos(a);r.x=i*(2+h)*.5*n,r.y=i*(2+h)*o*.5,r.z=i*Math.sin(a)*.5}this.setIndex(o),this.setAttribute(\"position\",new bn(a,3)),this.setAttribute(\"normal\",new bn(h,3)),this.setAttribute(\"uv\",new bn(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gl(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class xl extends zn{constructor(t=new yh(new Ii(-1,-1,0),new Ii(-1,1,0),new Ii(1,1,0)),e=64,s=1,i=8,r=!1){super(),this.type=\"TubeGeometry\",this.parameters={path:t,tubularSegments:e,radius:s,radialSegments:i,closed:r};const n=t.computeFrenetFrames(e,r);this.tangents=n.tangents,this.normals=n.normals,this.binormals=n.binormals;const o=new Ii,a=new Ii,h=new Zs;let l=new Ii;const c=[],u=[],d=[],p=[];function m(r){l=t.getPointAt(r/e,l);const h=n.normals[r],d=n.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),n=-Math.cos(e);a.x=n*h.x+r*d.x,a.y=n*h.y+r*d.y,a.z=n*h.z+r*d.z,a.normalize(),u.push(a.x,a.y,a.z),o.x=l.x+s*a.x,o.y=l.y+s*a.y,o.z=l.z+s*a.z,c.push(o.x,o.y,o.z)}}!function(){for(let t=0;t<e;t++)m(t);m(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let s=0;s<=i;s++)h.x=t/e,h.y=s/i,d.push(h.x,h.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const s=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),n=(i+1)*t+e,o=(i+1)*(t-1)+e;p.push(s,r,o),p.push(r,n,o)}}()}(),this.setIndex(p),this.setAttribute(\"position\",new bn(c,3)),this.setAttribute(\"normal\",new bn(u,3)),this.setAttribute(\"uv\",new bn(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new xl((new gh[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class bl extends zn{constructor(t=null){if(super(),this.type=\"WireframeGeometry\",this.parameters={geometry:t},null!==t){const e=[],s=new Set,i=new Ii,r=new Ii;if(null!==t.index){const n=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,h=a.length;t<h;++t){const h=a[t],l=h.start;for(let t=l,a=l+h.count;t<a;t+=3)for(let a=0;a<3;a++){const h=o.getX(t+a),l=o.getX(t+(a+1)%3);i.fromBufferAttribute(n,h),r.fromBufferAttribute(n,l),!0===vl(i,r,s)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const n=t.attributes.position;for(let t=0,o=n.count/3;t<o;t++)for(let o=0;o<3;o++){const a=3*t+o,h=3*t+(o+1)%3;i.fromBufferAttribute(n,a),r.fromBufferAttribute(n,h),!0===vl(i,r,s)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute(\"position\",new bn(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function vl(t,e,s){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==s.has(i)&&!0!==s.has(r)&&(s.add(i),s.add(r),!0)}var wl=Object.freeze({__proto__:null,BoxGeometry:Un,CapsuleGeometry:wh,CircleGeometry:Mh,ConeGeometry:_h,CylinderGeometry:Sh,DodecahedronGeometry:Th,EdgesGeometry:kh,ExtrudeGeometry:al,IcosahedronGeometry:ll,LatheGeometry:vh,OctahedronGeometry:cl,PlaneGeometry:ul,PolyhedronGeometry:Ah,RingGeometry:dl,ShapeGeometry:pl,SphereGeometry:ml,TetrahedronGeometry:yl,TorusGeometry:fl,TorusKnotGeometry:gl,TubeGeometry:xl,WireframeGeometry:bl});class Ml extends tn{constructor(t){super(),this.isShadowMaterial=!0,this.type=\"ShadowMaterial\",this.color=new $r(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class Sl extends Jn{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type=\"RawShaderMaterial\"}}class _l extends tn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type=\"MeshStandardMaterial\",this.defines={STANDARD:\"\"},this.color=new $r(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:\"\"},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Al extends _l{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.type=\"MeshPhysicalMaterial\",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Zs(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,\"reflectivity\",{get:function(){return Ds(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $r(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $r(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $r(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class Tl extends tn{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type=\"MeshPhongMaterial\",this.color=new $r(16777215),this.specular=new $r(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class zl extends tn{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:\"\"},this.type=\"MeshToonMaterial\",this.color=new $r(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Cl extends tn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type=\"MeshNormalMaterial\",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Il extends tn{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type=\"MeshLambertMaterial\",this.color=new $r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Bl extends tn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type=\"MeshDepthMaterial\",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class kl extends tn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type=\"MeshDistanceMaterial\",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class El extends tn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:\"\"},this.type=\"MeshMatcapMaterial\",this.color=new $r(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:\"\"},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Rl extends Sa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type=\"LineDashedMaterial\",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Pl(t,e,s){return!t||!s&&t.constructor===e?t:\"number\"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Ol(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fl(t){const e=t.length,s=new Array(e);for(let t=0;t!==e;++t)s[t]=t;return s.sort((function(e,s){return t[e]-t[s]})),s}function Nl(t,e,s){const i=t.length,r=new t.constructor(i);for(let n=0,o=0;o!==i;++n){const i=s[n]*e;for(let s=0;s!==e;++s)r[o++]=t[i+s]}return r}function Ll(t,e,s,i){let r=1,n=t[0];for(;void 0!==n&&void 0===n[i];)n=t[r++];if(void 0===n)return;let o=n[i];if(void 0!==o)if(Array.isArray(o))do{o=n[i],void 0!==o&&(e.push(n.time),s.push.apply(s,o)),n=t[r++]}while(void 0!==n);else if(void 0!==o.toArray)do{o=n[i],void 0!==o&&(e.push(n.time),o.toArray(s,s.length)),n=t[r++]}while(void 0!==n);else do{o=n[i],void 0!==o&&(e.push(n.time),s.push(o)),n=t[r++]}while(void 0!==n)}const Vl={convertArray:Pl,isTypedArray:Ol,getKeyframeOrder:Fl,sortedArray:Nl,flattenJSON:Ll,subclip:function(t,e,s,i,r=30){const n=t.clone();n.name=e;const o=[];for(let t=0;t<n.tracks.length;++t){const e=n.tracks[t],a=e.getValueSize(),h=[],l=[];for(let t=0;t<e.times.length;++t){const n=e.times[t]*r;if(!(n<s||n>=i)){h.push(e.times[t]);for(let s=0;s<a;++s)l.push(e.values[t*a+s])}}0!==h.length&&(e.times=Pl(h,e.times.constructor),e.values=Pl(l,e.values.constructor),o.push(e))}n.tracks=o;let a=1/0;for(let t=0;t<n.tracks.length;++t)a>n.tracks[t].times[0]&&(a=n.tracks[t].times[0]);for(let t=0;t<n.tracks.length;++t)n.tracks[t].shift(-1*a);return n.resetDuration(),n},makeClipAdditive:function(t,e=0,s=t,i=30){i<=0&&(i=30);const r=s.tracks.length,n=e/i;for(let e=0;e<r;++e){const i=s.tracks[e],r=i.ValueTypeName;if(\"bool\"===r||\"string\"===r)continue;const o=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===o)continue;let a=0;const h=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=h/3);let l=0;const c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);const u=i.times.length-1;let d;if(n<=i.times[0]){const t=a,e=h-a;d=i.values.slice(t,e)}else if(n>=i.times[u]){const t=u*h+a,e=t+h-a;d=i.values.slice(t,e)}else{const t=i.createInterpolant(),e=a,s=h-a;t.evaluate(n),d=t.resultBuffer.slice(e,s)}if(\"quaternion\"===r){(new Ci).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let t=0;t<p;++t){const e=t*c+l;if(\"quaternion\"===r)Ci.multiplyQuaternionsFlat(o.values,e,d,0,o.values,e);else{const t=c-2*l;for(let s=0;s<t;++s)o.values[e+s]-=d[s]}}}return t.blendMode=Ve,t}};class Wl{constructor(t,e,s,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(s),this.sampleValues=e,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let s=this._cachedIndex,i=e[s],r=e[s-1];t:{e:{let n;s:{i:if(!(t<i)){for(let n=s+2;;){if(void 0===i){if(t<r)break i;return s=e.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===n)break;if(r=i,i=e[++s],t<i)break e}n=e.length;break s}if(t>=r)break t;{const o=e[1];t<o&&(s=2,r=o);for(let n=s-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(s===n)break;if(i=r,r=e[--s-1],t>=r)break e}n=s,s=0}}for(;s<n;){const i=s+n>>>1;t<e[i]?n=i:s=i+1}if(i=e[s],r=e[s-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return s=e.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,r,i)}return this.interpolate_(s,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,s=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=s[r+t];return e}interpolate_(){throw new Error(\"call to abstract method\")}intervalChanged_(){}}class Ul extends Wl{constructor(t,e,s,i){super(t,e,s,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Oe,endingEnd:Oe}}intervalChanged_(t,e,s){const i=this.parameterPositions;let r=t-2,n=t+1,o=i[r],a=i[n];if(void 0===o)switch(this.getSettings_().endingStart){case Fe:r=t,o=2*e-s;break;case Ne:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=s}if(void 0===a)switch(this.getSettings_().endingEnd){case Fe:n=t,a=2*s-e;break;case Ne:n=1,a=s+i[1]-i[0];break;default:n=t-1,a=e}const h=.5*(s-e),l=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(a-s),this._offsetPrev=r*l,this._offsetNext=n*l}interpolate_(t,e,s,i){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(s-e)/(i-e),m=p*p,y=m*p,f=-u*y+2*u*m-u*p,g=(1+u)*y+(-1.5-2*u)*m+(-.5+u)*p+1,x=(-1-d)*y+(1.5+d)*m+.5*p,b=d*y-d*m;for(let t=0;t!==o;++t)r[t]=f*n[l+t]+g*n[h+t]+x*n[a+t]+b*n[c+t];return r}}class jl extends Wl{constructor(t,e,s,i){super(t,e,s,i)}interpolate_(t,e,s,i){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=(s-e)/(i-e),c=1-l;for(let t=0;t!==o;++t)r[t]=n[h+t]*c+n[a+t]*l;return r}}class Dl extends Wl{constructor(t,e,s,i){super(t,e,s,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Hl{constructor(t,e,s,i){if(void 0===t)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===e||0===e.length)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+t);this.name=t,this.times=Pl(e,this.TimeBufferType),this.values=Pl(s,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let s;if(e.toJSON!==this.toJSON)s=e.toJSON(t);else{s={name:t.name,times:Pl(t.times,Array),values:Pl(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(s.interpolation=e)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Dl(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new jl(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Ul(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Ee:e=this.InterpolantFactoryMethodDiscrete;break;case Re:e=this.InterpolantFactoryMethodLinear;break;case Pe:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn(\"THREE.KeyframeTrack:\",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ee;case this.InterpolantFactoryMethodLinear:return Re;case this.InterpolantFactoryMethodSmooth:return Pe}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let s=0,i=e.length;s!==i;++s)e[s]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let s=0,i=e.length;s!==i;++s)e[s]*=t}return this}trim(t,e){const s=this.times,i=s.length;let r=0,n=i-1;for(;r!==i&&s[r]<t;)++r;for(;-1!==n&&s[n]>e;)--n;if(++n,0!==r||n!==i){r>=n&&(n=Math.max(n,1),r=n-1);const t=this.getValueSize();this.times=s.slice(r,n),this.values=this.values.slice(r*t,n*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),t=!1);const s=this.times,i=this.values,r=s.length;0===r&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),t=!1);let n=null;for(let e=0;e!==r;e++){const i=s[e];if(\"number\"==typeof i&&isNaN(i)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,e,i),t=!1;break}if(null!==n&&n>i){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,e,i,n),t=!1;break}n=i}if(void 0!==i&&Ol(i))for(let e=0,s=i.length;e!==s;++e){const s=i[e];if(isNaN(s)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,e,s),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),s=this.getValueSize(),i=this.getInterpolation()===Pe,r=t.length-1;let n=1;for(let o=1;o<r;++o){let r=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(i)r=!0;else{const t=o*s,i=t-s,n=t+s;for(let o=0;o!==s;++o){const s=e[t+o];if(s!==e[i+o]||s!==e[n+o]){r=!0;break}}}if(r){if(o!==n){t[n]=t[o];const i=o*s,r=n*s;for(let t=0;t!==s;++t)e[r+t]=e[i+t]}++n}}if(r>0){t[n]=t[r];for(let t=r*s,i=n*s,o=0;o!==s;++o)e[i+o]=e[t+o];++n}return n!==t.length?(this.times=t.slice(0,n),this.values=e.slice(0,n*s)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),s=new(0,this.constructor)(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Hl.prototype.TimeBufferType=Float32Array,Hl.prototype.ValueBufferType=Float32Array,Hl.prototype.DefaultInterpolation=Re;class ql extends Hl{constructor(t,e,s){super(t,e,s)}}ql.prototype.ValueTypeName=\"bool\",ql.prototype.ValueBufferType=Array,ql.prototype.DefaultInterpolation=Ee,ql.prototype.InterpolantFactoryMethodLinear=void 0,ql.prototype.InterpolantFactoryMethodSmooth=void 0;class Jl extends Hl{}Jl.prototype.ValueTypeName=\"color\";class Xl extends Hl{}Xl.prototype.ValueTypeName=\"number\";class Yl extends Wl{constructor(t,e,s,i){super(t,e,s,i)}interpolate_(t,e,s,i){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=(s-e)/(i-e);let h=t*o;for(let t=h+o;h!==t;h+=4)Ci.slerpFlat(r,0,n,h-o,n,h,a);return r}}class Zl extends Hl{InterpolantFactoryMethodLinear(t){return new Yl(this.times,this.values,this.getValueSize(),t)}}Zl.prototype.ValueTypeName=\"quaternion\",Zl.prototype.InterpolantFactoryMethodSmooth=void 0;class Gl extends Hl{constructor(t,e,s){super(t,e,s)}}Gl.prototype.ValueTypeName=\"string\",Gl.prototype.ValueBufferType=Array,Gl.prototype.DefaultInterpolation=Ee,Gl.prototype.InterpolantFactoryMethodLinear=void 0,Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class $l extends Hl{}$l.prototype.ValueTypeName=\"vector\";class Ql{constructor(t=\"\",e=-1,s=[],i=2500){this.name=t,this.tracks=s,this.duration=e,this.blendMode=i,this.uuid=js(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],s=t.tracks,i=1/(t.fps||1);for(let t=0,r=s.length;t!==r;++t)e.push(Kl(s[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],s=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=s.length;t!==i;++t)e.push(Hl.toJSON(s[t]));return i}static CreateFromMorphTargetSequence(t,e,s,i){const r=e.length,n=[];for(let t=0;t<r;t++){let o=[],a=[];o.push((t+r-1)%r,t,(t+1)%r),a.push(0,1,0);const h=Fl(o);o=Nl(o,1,h),a=Nl(a,1,h),i||0!==o[0]||(o.push(r),a.push(a[0])),n.push(new Xl(\".morphTargetInfluences[\"+e[t].name+\"]\",o,a).scale(1/s))}return new this(t,-1,n)}static findByName(t,e){let s=t;if(!Array.isArray(t)){const e=t;s=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<s.length;t++)if(s[t].name===e)return s[t];return null}static CreateClipsFromMorphTargetSequences(t,e,s){const i={},r=/^([\\w-]*?)([\\d]+)$/;for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s.name.match(r);if(n&&n.length>1){const t=n[1];let e=i[t];e||(i[t]=e=[]),e.push(s)}}const n=[];for(const t in i)n.push(this.CreateFromMorphTargetSequence(t,i[t],e,s));return n}static parseAnimation(t,e){if(!t)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;const s=function(t,e,s,i,r){if(0!==s.length){const n=[],o=[];Ll(s,n,o,i),0!==n.length&&r.push(new t(e,n,o))}},i=[],r=t.name||\"default\",n=t.fps||30,o=t.blendMode;let a=t.length||-1;const h=t.hierarchy||[];for(let t=0;t<h.length;t++){const r=h[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let s=0;s<r[e].morphTargets.length;s++)t[r[e].morphTargets[s]]=-1;for(const s in t){const t=[],n=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),n.push(i.morphTarget===s?1:0)}i.push(new Xl(\".morphTargetInfluence[\"+s+\"]\",t,n))}a=t.length*n}else{const n=\".bones[\"+e[t].name+\"]\";s($l,n+\".position\",r,\"pos\",i),s(Zl,n+\".quaternion\",r,\"rot\",i),s($l,n+\".scale\",r,\"scl\",i)}}if(0===i.length)return null;return new this(r,a,i,o)}resetDuration(){let t=0;for(let e=0,s=this.tracks.length;e!==s;++e){const s=this.tracks[e];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Kl(t){if(void 0===t.type)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");const e=function(t){switch(t.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return Xl;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return $l;case\"color\":return Jl;case\"quaternion\":return Zl;case\"bool\":case\"boolean\":return ql;case\"string\":return Gl}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+t)}(t.type);if(void 0===t.times){const e=[],s=[];Ll(t.keys,e,s,\"value\"),t.times=e,t.values=s}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const tc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class ec{constructor(t,e,s){const i=this;let r,n=!1,o=0,a=0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=s,this.itemStart=function(t){a++,!1===n&&void 0!==i.onStart&&i.onStart(t,o,a),n=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){const e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,s=h.length;e<s;e+=2){const s=h[e],i=h[e+1];if(s.global&&(s.lastIndex=0),s.test(t))return i}return null}}}const sc=new ec;class ic{constructor(t){this.manager=void 0!==t?t:sc,this.crossOrigin=\"anonymous\",this.withCredentials=!1,this.path=\"\",this.resourcePath=\"\",this.requestHeader={}}load(){}loadAsync(t,e){const s=this;return new Promise((function(i,r){s.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}ic.DEFAULT_MATERIAL_NAME=\"__DEFAULT\";const rc={};class nc extends Error{constructor(t,e){super(t),this.response=e}}class oc extends ic{constructor(t){super(t)}load(t,e,s,i){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=tc.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==rc[t])return void rc[t].push({onLoad:e,onProgress:s,onError:i});rc[t]=[],rc[t].push({onLoad:e,onProgress:s,onError:i});const n=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?\"include\":\"same-origin\"}),o=this.mimeType,a=this.responseType;fetch(n).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),\"undefined\"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const s=rc[t],i=e.body.getReader(),r=e.headers.get(\"X-File-Size\")||e.headers.get(\"Content-Length\"),n=r?parseInt(r):0,o=0!==n;let a=0;const h=new ReadableStream({start(t){!function e(){i.read().then((({done:i,value:r})=>{if(i)t.close();else{a+=r.byteLength;const i=new ProgressEvent(\"progress\",{lengthComputable:o,loaded:a,total:n});for(let t=0,e=s.length;t<e;t++){const e=s[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}}),(e=>{t.error(e)}))}()}});return new Response(h)}throw new nc(`fetch for \"${e.url}\" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(a){case\"arraybuffer\":return t.arrayBuffer();case\"blob\":return t.blob();case\"document\":return t.text().then((t=>(new DOMParser).parseFromString(t,o)));case\"json\":return t.json();default:if(void 0===o)return t.text();{const e=/charset=\"?([^;\"\\s]*)\"?/i.exec(o),s=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(s);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{tc.add(t,e);const s=rc[t];delete rc[t];for(let t=0,i=s.length;t<i;t++){const i=s[t];i.onLoad&&i.onLoad(e)}})).catch((e=>{const s=rc[t];if(void 0===s)throw this.manager.itemError(t),e;delete rc[t];for(let t=0,i=s.length;t<i;t++){const i=s[t];i.onError&&i.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class ac extends ic{constructor(t){super(t)}load(t,e,s,i){const r=this,n=new oc(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(r.parse(JSON.parse(s)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),s,i)}parse(t){const e=[];for(let s=0;s<t.length;s++){const i=Ql.parse(t[s]);e.push(i)}return e}}class hc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=this,n=[],o=new Xa,a=new oc(this.manager);a.setPath(this.path),a.setResponseType(\"arraybuffer\"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let h=0;function l(l){a.load(t[l],(function(t){const s=r.parse(t,!0);n[l]={width:s.width,height:s.height,format:s.format,mipmaps:s.mipmaps},h+=1,6===h&&(1===s.mipmapCount&&(o.minFilter=wt),o.image=n,o.format=s.format,o.needsUpdate=!0,e&&e(o))}),s,i)}if(Array.isArray(t))for(let e=0,s=t.length;e<s;++e)l(e);else a.load(t,(function(t){const s=r.parse(t,!0);if(s.isCubemap){const t=s.mipmaps.length/s.mipmapCount;for(let e=0;e<t;e++){n[e]={mipmaps:[]};for(let t=0;t<s.mipmapCount;t++)n[e].mipmaps.push(s.mipmaps[e*s.mipmapCount+t]),n[e].format=s.format,n[e].width=s.width,n[e].height=s.height}o.image=n}else o.image.width=s.width,o.image.height=s.height,o.mipmaps=s.mipmaps;1===s.mipmapCount&&(o.minFilter=wt),o.format=s.format,o.needsUpdate=!0,e&&e(o)}),s,i);return o}}class lc extends ic{constructor(t){super(t)}load(t,e,s,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,n=tc.get(t);if(void 0!==n)return r.manager.itemStart(t),setTimeout((function(){e&&e(n),r.manager.itemEnd(t)}),0),n;const o=ei(\"img\");function a(){l(),tc.add(t,this),e&&e(this),r.manager.itemEnd(t)}function h(e){l(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function l(){o.removeEventListener(\"load\",a,!1),o.removeEventListener(\"error\",h,!1)}return o.addEventListener(\"load\",a,!1),o.addEventListener(\"error\",h,!1),\"data:\"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class cc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=new to;r.colorSpace=Ge;const n=new lc(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);let o=0;function a(s){n.load(t[s],(function(t){r.images[s]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let e=0;e<t.length;++e)a(e);return r}}class uc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=this,n=new Vo,o=new oc(this.manager);return o.setResponseType(\"arraybuffer\"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,(function(t){let s;try{s=r.parse(t)}catch(t){if(void 0===i)return void console.error(t);i(t)}void 0!==s.image?n.image=s.image:void 0!==s.data&&(n.image.width=s.width,n.image.height=s.height,n.image.data=s.data),n.wrapS=void 0!==s.wrapS?s.wrapS:mt,n.wrapT=void 0!==s.wrapT?s.wrapT:mt,n.magFilter=void 0!==s.magFilter?s.magFilter:wt,n.minFilter=void 0!==s.minFilter?s.minFilter:wt,n.anisotropy=void 0!==s.anisotropy?s.anisotropy:1,void 0!==s.colorSpace&&(n.colorSpace=s.colorSpace),void 0!==s.flipY&&(n.flipY=s.flipY),void 0!==s.format&&(n.format=s.format),void 0!==s.type&&(n.type=s.type),void 0!==s.mipmaps&&(n.mipmaps=s.mipmaps,n.minFilter=_t),1===s.mipmapCount&&(n.minFilter=wt),void 0!==s.generateMipmaps&&(n.generateMipmaps=s.generateMipmaps),n.needsUpdate=!0,e&&e(n,s)}),s,i),n}}class dc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=new vi,n=new lc(this.manager);return n.setCrossOrigin(this.crossOrigin),n.setPath(this.path),n.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),s,i),r}}class pc extends Er{constructor(t,e=1){super(),this.isLight=!0,this.type=\"Light\",this.color=new $r(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(e.object.target=this.target.uuid),e}}class mc extends pc{constructor(t,e,s){super(t,s),this.isHemisphereLight=!0,this.type=\"HemisphereLight\",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $r(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const yc=new nr,fc=new Ii,gc=new Ii;class xc{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Zs(512,512),this.map=null,this.mapPass=null,this.matrix=new nr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ra,this._frameExtents=new Zs(1,1),this._viewportCount=1,this._viewports=[new wi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,s=this.matrix;fc.setFromMatrixPosition(t.matrixWorld),e.position.copy(fc),gc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(gc),e.updateMatrixWorld(),yc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yc),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(yc)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class bc extends xc{constructor(){super(new $n(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,s=2*Us*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;s===e.fov&&i===e.aspect&&r===e.far||(e.fov=s,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class vc extends pc{constructor(t,e,s=0,i=Math.PI/3,r=0,n=2){super(t,e),this.isSpotLight=!0,this.type=\"SpotLight\",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.target=new Er,this.distance=s,this.angle=i,this.penumbra=r,this.decay=n,this.map=null,this.shadow=new bc}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const wc=new nr,Mc=new Ii,Sc=new Ii;class _c extends xc{constructor(){super(new $n(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Zs(4,2),this._viewportCount=6,this._viewports=[new wi(2,1,1,1),new wi(0,1,1,1),new wi(3,1,1,1),new wi(1,1,1,1),new wi(3,0,1,1),new wi(1,0,1,1)],this._cubeDirections=[new Ii(1,0,0),new Ii(-1,0,0),new Ii(0,0,1),new Ii(0,0,-1),new Ii(0,1,0),new Ii(0,-1,0)],this._cubeUps=[new Ii(0,1,0),new Ii(0,1,0),new Ii(0,1,0),new Ii(0,1,0),new Ii(0,0,1),new Ii(0,0,-1)]}updateMatrices(t,e=0){const s=this.camera,i=this.matrix,r=t.distance||s.far;r!==s.far&&(s.far=r,s.updateProjectionMatrix()),Mc.setFromMatrixPosition(t.matrixWorld),s.position.copy(Mc),Sc.copy(s.position),Sc.add(this._cubeDirections[e]),s.up.copy(this._cubeUps[e]),s.lookAt(Sc),s.updateMatrixWorld(),i.makeTranslation(-Mc.x,-Mc.y,-Mc.z),wc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wc)}}class Ac extends pc{constructor(t,e,s=0,i=2){super(t,e),this.isPointLight=!0,this.type=\"PointLight\",this.distance=s,this.decay=i,this.shadow=new _c}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Tc extends Xn{constructor(t=-1,e=1,s=1,i=-1,r=.1,n=2e3){super(),this.isOrthographicCamera=!0,this.type=\"OrthographicCamera\",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=s,this.bottom=i,this.near=r,this.far=n,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,s,i,r,n){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=s-t,n=s+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,n=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,n,o,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}class zc extends xc{constructor(){super(new Tc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Cc extends pc{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type=\"DirectionalLight\",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.target=new Er,this.shadow=new zc}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Ic extends pc{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type=\"AmbientLight\"}}class Bc extends pc{constructor(t,e,s=10,i=10){super(t,e),this.isRectAreaLight=!0,this.type=\"RectAreaLight\",this.width=s,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class kc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ii)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const s=t.x,i=t.y,r=t.z,n=this.coefficients;return e.copy(n[0]).multiplyScalar(.282095),e.addScaledVector(n[1],.488603*i),e.addScaledVector(n[2],.488603*r),e.addScaledVector(n[3],.488603*s),e.addScaledVector(n[4],s*i*1.092548),e.addScaledVector(n[5],i*r*1.092548),e.addScaledVector(n[6],.315392*(3*r*r-1)),e.addScaledVector(n[7],s*r*1.092548),e.addScaledVector(n[8],.546274*(s*s-i*i)),e}getIrradianceAt(t,e){const s=t.x,i=t.y,r=t.z,n=this.coefficients;return e.copy(n[0]).multiplyScalar(.886227),e.addScaledVector(n[1],1.023328*i),e.addScaledVector(n[2],1.023328*r),e.addScaledVector(n[3],1.023328*s),e.addScaledVector(n[4],.858086*s*i),e.addScaledVector(n[5],.858086*i*r),e.addScaledVector(n[6],.743125*r*r-.247708),e.addScaledVector(n[7],.858086*s*r),e.addScaledVector(n[8],.429043*(s*s-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(t.coefficients[s],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let s=0;s<9;s++)this.coefficients[s].lerp(t.coefficients[s],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const s=this.coefficients;for(let i=0;i<9;i++)s[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const s=this.coefficients;for(let i=0;i<9;i++)s[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const s=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*s,e[4]=1.092548*s*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*s*r,e[8]=.546274*(s*s-i*i)}}class Ec extends pc{constructor(t=new kc,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class Rc extends ic{constructor(t){super(t),this.textures={}}load(t,e,s,i){const r=this,n=new oc(r.manager);n.setPath(r.path),n.setRequestHeader(r.requestHeader),n.setWithCredentials(r.withCredentials),n.load(t,(function(s){try{e(r.parse(JSON.parse(s)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),s,i)}parse(t){const e=this.textures;function s(t){return void 0===e[t]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",t),e[t]}const i=this.createMaterialFromType(t.type);if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new $r).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(i.dispersion=t.dispersion),void 0!==t.iridescence&&(i.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(i.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(i.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(i.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(i.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(i.depthFunc=t.depthFunc),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(i.blendSrc=t.blendSrc),void 0!==t.blendDst&&(i.blendDst=t.blendDst),void 0!==t.blendEquation&&(i.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(i.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(i.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(i.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(i.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),void 0!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(i.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&(\"number\"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(i.uniforms[e]={},r.type){case\"t\":i.uniforms[e].value=s(r.value);break;case\"c\":i.uniforms[e].value=(new $r).setHex(r.value);break;case\"v2\":i.uniforms[e].value=(new Zs).fromArray(r.value);break;case\"v3\":i.uniforms[e].value=(new Ii).fromArray(r.value);break;case\"v4\":i.uniforms[e].value=(new wi).fromArray(r.value);break;case\"m3\":i.uniforms[e].value=(new Gs).fromArray(r.value);break;case\"m4\":i.uniforms[e].value=(new nr).fromArray(r.value);break;default:i.uniforms[e].value=r.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(i.glslVersion=t.glslVersion),void 0!==t.extensions)for(const e in t.extensions)i.extensions[e]=t.extensions[e];if(void 0!==t.lights&&(i.lights=t.lights),void 0!==t.clipping&&(i.clipping=t.clipping),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=s(t.map)),void 0!==t.matcap&&(i.matcap=s(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=s(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=s(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=s(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new Zs).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=s(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=s(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=s(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=s(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=s(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=s(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=s(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=s(t.envMap)),void 0!==t.envMapRotation&&i.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=s(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=s(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=s(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=s(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=s(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=s(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Zs).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(i.iridescenceMap=s(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(i.iridescenceThicknessMap=s(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(i.transmissionMap=s(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=s(t.thicknessMap)),void 0!==t.anisotropyMap&&(i.anisotropyMap=s(t.anisotropyMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=s(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=s(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return Rc.createMaterialFromType(t)}static createMaterialFromType(t){return new{ShadowMaterial:Ml,SpriteMaterial:ho,RawShaderMaterial:Sl,ShaderMaterial:Jn,PointsMaterial:Na,MeshPhysicalMaterial:Al,MeshStandardMaterial:_l,MeshPhongMaterial:Tl,MeshToonMaterial:zl,MeshNormalMaterial:Cl,MeshLambertMaterial:Il,MeshDepthMaterial:Bl,MeshDistanceMaterial:kl,MeshBasicMaterial:en,MeshMatcapMaterial:El,LineDashedMaterial:Rl,LineBasicMaterial:Sa,Material:tn}[t]}}class Pc{static decodeText(t){if(console.warn(\"THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead.\"),\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e=\"\";for(let s=0,i=t.length;s<i;s++)e+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf(\"/\");return-1===e?\"./\":t.slice(0,e+1)}static resolveURL(t,e){return\"string\"!=typeof t||\"\"===t?\"\":(/^https?:\\/\\//i.test(e)&&/^\\//.test(t)&&(e=e.replace(/(^https?:\\/\\/[^\\/]+).*/i,\"$1\")),/^(https?:)?\\/\\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Oc extends zn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type=\"InstancedBufferGeometry\",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class Fc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=this,n=new oc(r.manager);n.setPath(r.path),n.setRequestHeader(r.requestHeader),n.setWithCredentials(r.withCredentials),n.load(t,(function(s){try{e(r.parse(JSON.parse(s)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),s,i)}parse(t){const e={},s={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],n=function(t,e){if(void 0!==s[e])return s[e];const i=t.arrayBuffers,r=i[e],n=new Uint32Array(r).buffer;return s[e]=n,n}(t,r.buffer),o=ti(r.type,n),a=new no(o,r.stride);return a.uuid=r.uuid,e[i]=a,a}const r=t.isInstancedBufferGeometry?new Oc:new zn,n=t.data.index;if(void 0!==n){const t=ti(n.type,n.array);r.setIndex(new cn(t,1))}const o=t.data.attributes;for(const e in o){const s=o[e];let n;if(s.isInterleavedBufferAttribute){const e=i(t.data,s.data);n=new ao(e,s.itemSize,s.offset,s.normalized)}else{const t=ti(s.type,s.array);n=new(s.isInstancedBufferAttribute?Do:cn)(t,s.itemSize,s.normalized)}void 0!==s.name&&(n.name=s.name),void 0!==s.usage&&n.setUsage(s.usage),r.setAttribute(e,n)}const a=t.data.morphAttributes;if(a)for(const e in a){const s=a[e],n=[];for(let e=0,r=s.length;e<r;e++){const r=s[e];let o;if(r.isInterleavedBufferAttribute){const e=i(t.data,r.data);o=new ao(e,r.itemSize,r.offset,r.normalized)}else{const t=ti(r.type,r.array);o=new cn(t,r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),n.push(o)}r.morphAttributes[e]=n}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let t=0,e=h.length;t!==e;++t){const e=h[t];r.addGroup(e.start,e.count,e.materialIndex)}const l=t.data.boundingSphere;if(void 0!==l){const t=new Ii;void 0!==l.center&&t.fromArray(l.center),r.boundingSphere=new Gi(t,l.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class Nc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=this,n=\"\"===this.path?Pc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const o=new oc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(s){let n=null;try{n=JSON.parse(s)}catch(e){return void 0!==i&&i(e),void console.error(\"THREE:ObjectLoader: Can't parse \"+t+\".\",e.message)}const o=n.metadata;if(void 0===o||void 0===o.type||\"geometry\"===o.type.toLowerCase())return void 0!==i&&i(new Error(\"THREE.ObjectLoader: Can't load \"+t)),void console.error(\"THREE.ObjectLoader: Can't load \"+t);r.parse(n,e)}),s,i)}async loadAsync(t,e){const s=\"\"===this.path?Pc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const i=new oc(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),n=JSON.parse(r),o=n.metadata;if(void 0===o||void 0===o.type||\"geometry\"===o.type.toLowerCase())throw new Error(\"THREE.ObjectLoader: Can't load \"+t);return await this.parseAsync(n)}parse(t,e){const s=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),n=this.parseImages(t.images,(function(){void 0!==e&&e(h)})),o=this.parseTextures(t.textures,n),a=this.parseMaterials(t.materials,o),h=this.parseObject(t.object,r,a,o,s),l=this.parseSkeletons(t.skeletons,h);if(this.bindSkeletons(h,l),this.bindLightTargets(h),void 0!==e){let t=!1;for(const e in n)if(n[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(h)}return h}async parseAsync(t){const e=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,s),r=await this.parseImagesAsync(t.images),n=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,n),a=this.parseObject(t.object,i,o,n,e),h=this.parseSkeletons(t.skeletons,a);return this.bindSkeletons(a,h),this.bindLightTargets(a),a}parseShapes(t){const e={};if(void 0!==t)for(let s=0,i=t.length;s<i;s++){const i=(new Eh).fromJSON(t[s]);e[i.uuid]=i}return e}parseSkeletons(t,e){const s={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let e=0,r=t.length;e<r;e++){const r=(new jo).fromJSON(t[e],i);s[r.uuid]=r}return s}parseGeometries(t,e){const s={};if(void 0!==t){const i=new Fc;for(let r=0,n=t.length;r<n;r++){let n;const o=t[r];switch(o.type){case\"BufferGeometry\":case\"InstancedBufferGeometry\":n=i.parse(o);break;default:o.type in wl?n=wl[o.type].fromJSON(o,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type \"${o.type}\"`)}n.uuid=o.uuid,void 0!==o.name&&(n.name=o.name),void 0!==o.userData&&(n.userData=o.userData),s[o.uuid]=n}}return s}parseMaterials(t,e){const s={},i={};if(void 0!==t){const r=new Rc;r.setTextures(e);for(let e=0,n=t.length;e<n;e++){const n=t[e];void 0===s[n.uuid]&&(s[n.uuid]=r.parse(n)),i[n.uuid]=s[n.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let s=0;s<t.length;s++){const i=t[s],r=Ql.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const s=this,i={};let r;function n(t){if(\"string\"==typeof t){const e=t;return function(t){return s.manager.itemStart(t),r.load(t,(function(){s.manager.itemEnd(t)}),void 0,(function(){s.manager.itemError(t),s.manager.itemEnd(t)}))}(/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(e)?e:s.resourcePath+e)}return t.data?{data:ti(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const s=new ec(e);r=new lc(s),r.setCrossOrigin(this.crossOrigin);for(let e=0,s=t.length;e<s;e++){const s=t[e],r=s.url;if(Array.isArray(r)){const t=[];for(let e=0,s=r.length;e<s;e++){const s=n(r[e]);null!==s&&(s instanceof HTMLImageElement?t.push(s):t.push(new Vo(s.data,s.width,s.height)))}i[s.uuid]=new gi(t)}else{const t=n(s.url);i[s.uuid]=new gi(t)}}}return i}async parseImagesAsync(t){const e=this,s={};let i;async function r(t){if(\"string\"==typeof t){const s=t,r=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(s)?s:e.resourcePath+s;return await i.loadAsync(r)}return t.data?{data:ti(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new lc(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],n=i.url;if(Array.isArray(n)){const t=[];for(let e=0,s=n.length;e<s;e++){const s=n[e],i=await r(s);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new Vo(i.data,i.width,i.height)))}s[i.uuid]=new gi(t)}else{const t=await r(i.url);s[i.uuid]=new gi(t)}}}return s}parseTextures(t,e){function s(t,e){return\"number\"==typeof t?t:(console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",t),e[t])}const i={};if(void 0!==t)for(let r=0,n=t.length;r<n;r++){const n=t[r];void 0===n.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',n.uuid),void 0===e[n.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",n.image);const o=e[n.image],a=o.data;let h;Array.isArray(a)?(h=new to,6===a.length&&(h.needsUpdate=!0)):(h=a&&a.data?new Vo:new vi,a&&(h.needsUpdate=!0)),h.source=o,h.uuid=n.uuid,void 0!==n.name&&(h.name=n.name),void 0!==n.mapping&&(h.mapping=s(n.mapping,Lc)),void 0!==n.channel&&(h.channel=n.channel),void 0!==n.offset&&h.offset.fromArray(n.offset),void 0!==n.repeat&&h.repeat.fromArray(n.repeat),void 0!==n.center&&h.center.fromArray(n.center),void 0!==n.rotation&&(h.rotation=n.rotation),void 0!==n.wrap&&(h.wrapS=s(n.wrap[0],Vc),h.wrapT=s(n.wrap[1],Vc)),void 0!==n.format&&(h.format=n.format),void 0!==n.internalFormat&&(h.internalFormat=n.internalFormat),void 0!==n.type&&(h.type=n.type),void 0!==n.colorSpace&&(h.colorSpace=n.colorSpace),void 0!==n.minFilter&&(h.minFilter=s(n.minFilter,Wc)),void 0!==n.magFilter&&(h.magFilter=s(n.magFilter,Wc)),void 0!==n.anisotropy&&(h.anisotropy=n.anisotropy),void 0!==n.flipY&&(h.flipY=n.flipY),void 0!==n.generateMipmaps&&(h.generateMipmaps=n.generateMipmaps),void 0!==n.premultiplyAlpha&&(h.premultiplyAlpha=n.premultiplyAlpha),void 0!==n.unpackAlignment&&(h.unpackAlignment=n.unpackAlignment),void 0!==n.compareFunction&&(h.compareFunction=n.compareFunction),void 0!==n.userData&&(h.userData=n.userData),i[n.uuid]=h}return i}parseObject(t,e,s,i,r){let n,o,a;function h(t){return void 0===e[t]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",t),e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===s[r]&&console.warn(\"THREE.ObjectLoader: Undefined material\",r),e.push(s[r])}return e}return void 0===s[t]&&console.warn(\"THREE.ObjectLoader: Undefined material\",t),s[t]}}function c(t){return void 0===i[t]&&console.warn(\"THREE.ObjectLoader: Undefined texture\",t),i[t]}switch(t.type){case\"Scene\":n=new ro,void 0!==t.background&&(Number.isInteger(t.background)?n.background=new $r(t.background):n.background=c(t.background)),void 0!==t.environment&&(n.environment=c(t.environment)),void 0!==t.fog&&(\"Fog\"===t.fog.type?n.fog=new io(t.fog.color,t.fog.near,t.fog.far):\"FogExp2\"===t.fog.type&&(n.fog=new so(t.fog.color,t.fog.density)),\"\"!==t.fog.name&&(n.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(n.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(n.backgroundIntensity=t.backgroundIntensity),void 0!==t.backgroundRotation&&n.backgroundRotation.fromArray(t.backgroundRotation),void 0!==t.environmentIntensity&&(n.environmentIntensity=t.environmentIntensity),void 0!==t.environmentRotation&&n.environmentRotation.fromArray(t.environmentRotation);break;case\"PerspectiveCamera\":n=new $n(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case\"OrthographicCamera\":n=new Tc(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case\"AmbientLight\":n=new Ic(t.color,t.intensity);break;case\"DirectionalLight\":n=new Cc(t.color,t.intensity),n.target=t.target||\"\";break;case\"PointLight\":n=new Ac(t.color,t.intensity,t.distance,t.decay);break;case\"RectAreaLight\":n=new Bc(t.color,t.intensity,t.width,t.height);break;case\"SpotLight\":n=new vc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),n.target=t.target||\"\";break;case\"HemisphereLight\":n=new mc(t.color,t.groundColor,t.intensity);break;case\"LightProbe\":n=(new Ec).fromJSON(t);break;case\"SkinnedMesh\":o=h(t.geometry),a=l(t.material),n=new No(o,a),void 0!==t.bindMode&&(n.bindMode=t.bindMode),void 0!==t.bindMatrix&&n.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(n.skeleton=t.skeleton);break;case\"Mesh\":o=h(t.geometry),a=l(t.material),n=new Vn(o,a);break;case\"InstancedMesh\":o=h(t.geometry),a=l(t.material);const e=t.count,s=t.instanceMatrix,i=t.instanceColor;n=new $o(o,a,e),n.instanceMatrix=new Do(new Float32Array(s.array),16),void 0!==i&&(n.instanceColor=new Do(new Float32Array(i.array),i.itemSize));break;case\"BatchedMesh\":o=h(t.geometry),a=l(t.material),n=new Ma(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,a),n.geometry=o,n.perObjectFrustumCulled=t.perObjectFrustumCulled,n.sortObjects=t.sortObjects,n._drawRanges=t.drawRanges,n._reservedRanges=t.reservedRanges,n._visibility=t.visibility,n._active=t.active,n._bounds=t.bounds.map((t=>{const e=new Ei;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);const s=new Gi;return s.radius=t.sphereRadius,s.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:s}})),n._maxInstanceCount=t.maxInstanceCount,n._maxVertexCount=t.maxVertexCount,n._maxIndexCount=t.maxIndexCount,n._geometryInitialized=t.geometryInitialized,n._geometryCount=t.geometryCount,n._matricesTexture=c(t.matricesTexture.uuid),void 0!==t.colorsTexture&&(n._colorsTexture=c(t.colorsTexture.uuid));break;case\"LOD\":n=new zo;break;case\"Line\":n=new ka(h(t.geometry),l(t.material));break;case\"LineLoop\":n=new Fa(h(t.geometry),l(t.material));break;case\"LineSegments\":n=new Oa(h(t.geometry),l(t.material));break;case\"PointCloud\":case\"Points\":n=new ja(h(t.geometry),l(t.material));break;case\"Sprite\":n=new So(l(t.material));break;case\"Group\":n=new Ha;break;case\"Bone\":n=new Lo;break;default:n=new Er}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.up&&n.up.fromArray(t.up),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.intensity&&(n.shadow.intensity=t.shadow.intensity),void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(n.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)n.add(this.parseObject(o[t],e,s,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const s=e[t];n.animations.push(r[s])}}if(\"LOD\"===t.type){void 0!==t.autoUpdate&&(n.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const s=e[t],i=n.getObjectByProperty(\"uuid\",s.object);void 0!==i&&n.addLevel(i,s.distance,s.hysteresis)}}return n}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const s=e[t.skeleton];void 0===s?console.warn(\"THREE.ObjectLoader: No skeleton found with UUID:\",t.skeleton):t.bind(s,t.bindMatrix)}}))}bindLightTargets(t){t.traverse((function(e){if(e.isDirectionalLight||e.isSpotLight){const s=e.target,i=t.getObjectByProperty(\"uuid\",s);e.target=void 0!==i?i:new Er}}))}}const Lc={UVMapping:at,CubeReflectionMapping:ht,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},Vc={RepeatWrapping:pt,ClampToEdgeWrapping:mt,MirroredRepeatWrapping:yt},Wc={NearestFilter:ft,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:wt,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:_t};class Uc extends ic{constructor(t){super(t),this.isImageBitmapLoader=!0,\"undefined\"==typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),\"undefined\"==typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),this.options={premultiplyAlpha:\"none\"}}setOptions(t){return this.options=t,this}load(t,e,s,i){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,n=tc.get(t);if(void 0!==n)return r.manager.itemStart(t),n.then?void n.then((s=>{e&&e(s),r.manager.itemEnd(t)})).catch((t=>{i&&i(t)})):(setTimeout((function(){e&&e(n),r.manager.itemEnd(t)}),0),n);const o={};o.credentials=\"anonymous\"===this.crossOrigin?\"same-origin\":\"include\",o.headers=this.requestHeader;const a=fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:\"none\"}))})).then((function(s){return tc.add(t,s),e&&e(s),r.manager.itemEnd(t),s})).catch((function(e){i&&i(e),tc.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)}));tc.add(t,a),r.manager.itemStart(t)}}let jc;class Dc{static getContext(){return void 0===jc&&(jc=new(window.AudioContext||window.webkitAudioContext)),jc}static setContext(t){jc=t}}class Hc extends ic{constructor(t){super(t)}load(t,e,s,i){const r=this,n=new oc(this.manager);function o(e){i?i(e):console.error(e),r.manager.itemError(t)}n.setResponseType(\"arraybuffer\"),n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(t){try{const s=t.slice(0);Dc.getContext().decodeAudioData(s,(function(t){e(t)})).catch(o)}catch(t){o(t)}}),s,i)}}const qc=new nr,Jc=new nr,Xc=new nr;class Yc{constructor(){this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new $n,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $n,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Xc.copy(t.projectionMatrix);const s=e.eyeSep/2,i=s*e.near/e.focus,r=e.near*Math.tan(Ws*e.fov*.5)/e.zoom;let n,o;Jc.elements[12]=-s,qc.elements[12]=s,n=-r*e.aspect+i,o=r*e.aspect+i,Xc.elements[0]=2*e.near/(o-n),Xc.elements[8]=(o+n)/(o-n),this.cameraL.projectionMatrix.copy(Xc),n=-r*e.aspect-i,o=r*e.aspect-i,Xc.elements[0]=2*e.near/(o-n),Xc.elements[8]=(o+n)/(o-n),this.cameraR.projectionMatrix.copy(Xc)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Jc),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(qc)}}class Zc extends $n{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Gc{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$c(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=$c();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function $c(){return performance.now()}const Qc=new Ii,Kc=new Ci,tu=new Ii,eu=new Ii;class su extends Er{constructor(){super(),this.type=\"AudioListener\",this.context=Dc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gc}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qc,Kc,tu),eu.set(0,0,-1).applyQuaternion(Kc),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Qc.x,t),e.positionY.linearRampToValueAtTime(Qc.y,t),e.positionZ.linearRampToValueAtTime(Qc.z,t),e.forwardX.linearRampToValueAtTime(eu.x,t),e.forwardY.linearRampToValueAtTime(eu.y,t),e.forwardZ.linearRampToValueAtTime(eu.z,t),e.upX.linearRampToValueAtTime(s.x,t),e.upY.linearRampToValueAtTime(s.y,t),e.upZ.linearRampToValueAtTime(s.z,t)}else e.setPosition(Qc.x,Qc.y,Qc.z),e.setOrientation(eu.x,eu.y,eu.z,s.x,s.y,s.z)}}class iu extends Er{constructor(t){super(),this.type=\"Audio\",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=\"empty\",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaStreamNode\",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType=\"buffer\",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn(\"THREE.Audio: Audio is already playing.\");if(!1===this.hasPlaybackControl)return void console.warn(\"THREE.Audio: this Audio has no playback control.\");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}stop(t=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),\"buffer\"!==t.sourceType?(console.warn(\"THREE.Audio: Audio source type cannot be copied.\"),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const ru=new Ii,nu=new Ci,ou=new Ii,au=new Ii;class hu extends iu{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel=\"HRTF\",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,s){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=s,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(ru,nu,ou),au.set(0,0,1).applyQuaternion(nu);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ru.x,t),e.positionY.linearRampToValueAtTime(ru.y,t),e.positionZ.linearRampToValueAtTime(ru.z,t),e.orientationX.linearRampToValueAtTime(au.x,t),e.orientationY.linearRampToValueAtTime(au.y,t),e.orientationZ.linearRampToValueAtTime(au.z,t)}else e.setPosition(ru.x,ru.y,ru.z),e.setOrientation(au.x,au.y,au.z)}}class lu{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let s=0;s<e.length;s++)t+=e[s];return t/e.length}}class cu{constructor(t,e,s){let i,r,n;switch(this.binding=t,this.valueSize=s,e){case\"quaternion\":i=this._slerp,r=this._slerpAdditive,n=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case\"string\":case\"bool\":i=this._select,r=this._select,n=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:i=this._lerp,r=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=n,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const s=this.buffer,i=this.valueSize,r=t*i+i;let n=this.cumulativeWeight;if(0===n){for(let t=0;t!==i;++t)s[r+t]=s[t];n=e}else{n+=e;const t=e/n;this._mixBufferRegion(s,r,0,t,i)}this.cumulativeWeight=n}accumulateAdditive(t){const e=this.buffer,s=this.valueSize,i=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,s=this.buffer,i=t*e+e,r=this.cumulativeWeight,n=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(s,i,t,1-r,e)}n>0&&this._mixBufferRegionAdditive(s,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(s[t]!==s[t+e]){o.setValue(s,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,s=this.valueSize,i=s*this._origIndex;t.getValue(e,i);for(let t=s,r=i;t!==r;++t)e[t]=e[i+t%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let s=t;s<e;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[e+s]=this.buffer[t+s]}_select(t,e,s,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[s+i]}_slerp(t,e,s,i){Ci.slerpFlat(t,e,t,e,t,s,i)}_slerpAdditive(t,e,s,i,r){const n=this._workIndex*r;Ci.multiplyQuaternionsFlat(t,n,t,e,t,s),Ci.slerpFlat(t,e,t,e,t,n,i)}_lerp(t,e,s,i,r){const n=1-i;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*n+t[s+o]*i}}_lerpAdditive(t,e,s,i,r){for(let n=0;n!==r;++n){const r=e+n;t[r]=t[r]+t[s+n]*i}}}const uu=\"\\\\[\\\\]\\\\.:\\\\/\",du=new RegExp(\"[\"+uu+\"]\",\"g\"),pu=\"[^\"+uu+\"]\",mu=\"[^\"+uu.replace(\"\\\\.\",\"\")+\"]\",yu=new RegExp(\"^\"+/((?:WC+[\\/:])*)/.source.replace(\"WC\",pu)+/(WCOD+)?/.source.replace(\"WCOD\",mu)+/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",pu)+/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",pu)+\"$\"),fu=[\"material\",\"materials\",\"bones\",\"map\"];class gu{constructor(t,e,s){this.path=e,this.parsedPath=s||gu.parseTrackName(e),this.node=gu.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,s){return t&&t.isAnimationObjectGroup?new gu.Composite(t,e,s):new gu(t,e,s)}static sanitizeNodeName(t){return t.replace(/\\s/g,\"_\").replace(du,\"\")}static parseTrackName(t){const e=yu.exec(t);if(null===e)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+t);const s={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=s.nodeName&&s.nodeName.lastIndexOf(\".\");if(void 0!==i&&-1!==i){const t=s.nodeName.substring(i+1);-1!==fu.indexOf(t)&&(s.nodeName=s.nodeName.substring(0,i),s.objectName=t)}if(null===s.propertyName||0===s.propertyName.length)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+t);return s}static findNode(t,e){if(void 0===e||\"\"===e||\".\"===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(e);if(void 0!==s)return s}if(t.children){const s=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const n=s(r.children);if(n)return n}return null},i=s(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const s=this.resolvedProperty;for(let i=0,r=s.length;i!==r;++i)t[e++]=s[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const s=this.resolvedProperty;for(let i=0,r=s.length;i!==r;++i)s[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const s=this.resolvedProperty;for(let i=0,r=s.length;i!==r;++i)s[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const s=this.resolvedProperty;for(let i=0,r=s.length;i!==r;++i)s[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,s=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=gu.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn(\"THREE.PropertyBinding: No target node found for track: \"+this.path+\".\");if(s){let i=e.objectIndex;switch(s){case\"materials\":if(!t.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!t.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);t=t.material.materials;break;case\"bones\":if(!t.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case\"map\":if(\"map\"in t){t=t.map;break}if(!t.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!t.material.map)return void console.error(\"THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.\",this);t=t.material.map;break;default:if(void 0===t[s])return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);t=t[s]}if(void 0!==i){if(void 0===t[i])return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,t);t=t[i]}}const n=t[i];if(void 0===n){const s=e.nodeName;return void console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+s+\".\"+i+\" but it wasn't found.\",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if(\"morphTargetInfluences\"===i){if(!t.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(!t.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=r}else void 0!==n.fromArray&&void 0!==n.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=n):Array.isArray(n)?(a=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gu.Composite=class{constructor(t,e,s){const i=s||gu.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const s=this._targetGroup.nCachedObjects_,i=this._bindings[s];void 0!==i&&i.getValue(t,e)}setValue(t,e){const s=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=s.length;i!==r;++i)s[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,s=t.length;e!==s;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,s=t.length;e!==s;++e)t[e].unbind()}},gu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},gu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},gu.prototype.GetterByBindingType=[gu.prototype._getValue_direct,gu.prototype._getValue_array,gu.prototype._getValue_arrayElement,gu.prototype._getValue_toArray],gu.prototype.SetterByBindingTypeAndVersioning=[[gu.prototype._setValue_direct,gu.prototype._setValue_direct_setNeedsUpdate,gu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gu.prototype._setValue_array,gu.prototype._setValue_array_setNeedsUpdate,gu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gu.prototype._setValue_arrayElement,gu.prototype._setValue_arrayElement_setNeedsUpdate,gu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gu.prototype._setValue_fromArray,gu.prototype._setValue_fromArray_setNeedsUpdate,gu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class xu{constructor(){this.isAnimationObjectGroup=!0,this.uuid=js(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,s=arguments.length;e!==s;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,s=this._paths,i=this._parsedPaths,r=this._bindings,n=r.length;let o,a=t.length,h=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const c=arguments[l],u=c.uuid;let d=e[u];if(void 0===d){d=a++,e[u]=d,t.push(c);for(let t=0,e=n;t!==e;++t)r[t].push(new gu(c,s[t],i[t]))}else if(d<h){o=t[d];const a=--h,l=t[a];e[l.uuid]=d,t[d]=l,e[u]=a,t[a]=c;for(let t=0,e=n;t!==e;++t){const e=r[t],n=e[a];let o=e[d];e[d]=n,void 0===o&&(o=new gu(c,s[t],i[t])),e[a]=o}}else t[d]!==o&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=h}remove(){const t=this._objects,e=this._indicesByUUID,s=this._bindings,i=s.length;let r=this.nCachedObjects_;for(let n=0,o=arguments.length;n!==o;++n){const o=arguments[n],a=o.uuid,h=e[a];if(void 0!==h&&h>=r){const n=r++,l=t[n];e[l.uuid]=h,t[h]=l,e[a]=n,t[n]=o;for(let t=0,e=i;t!==e;++t){const e=s[t],i=e[n],r=e[h];e[h]=i,e[n]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,s=this._bindings,i=s.length;let r=this.nCachedObjects_,n=t.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,h=e[a];if(void 0!==h)if(delete e[a],h<r){const o=--r,a=t[o],l=--n,c=t[l];e[a.uuid]=h,t[h]=a,e[c.uuid]=o,t[o]=c,t.pop();for(let t=0,e=i;t!==e;++t){const e=s[t],i=e[o],r=e[l];e[h]=i,e[o]=r,e.pop()}}else{const r=--n,o=t[r];r>0&&(e[o.uuid]=h),t[h]=o,t.pop();for(let t=0,e=i;t!==e;++t){const e=s[t];e[h]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const s=this._bindingsIndicesByPath;let i=s[t];const r=this._bindings;if(void 0!==i)return r[i];const n=this._paths,o=this._parsedPaths,a=this._objects,h=a.length,l=this.nCachedObjects_,c=new Array(h);i=r.length,s[t]=i,n.push(t),o.push(e),r.push(c);for(let s=l,i=a.length;s!==i;++s){const i=a[s];c[s]=new gu(i,t,e)}return c}unsubscribe_(t){const e=this._bindingsIndicesByPath,s=e[t];if(void 0!==s){const i=this._paths,r=this._parsedPaths,n=this._bindings,o=n.length-1,a=n[o];e[t[o]]=s,n[s]=a,n.pop(),r[s]=r[o],r.pop(),i[s]=i[o],i.pop()}}}class bu{constructor(t,e,s=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=s,this.blendMode=i;const r=e.tracks,n=r.length,o=new Array(n),a={endingStart:Oe,endingEnd:Oe};for(let t=0;t!==n;++t){const e=r[t].createInterpolant(null);o[t]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,s){if(t.fadeOut(e),this.fadeIn(e),s){const s=this._clip.duration,i=t._clip.duration,r=i/s,n=s/i;t.warp(1,r,e),this.warp(n,1,e)}return this}crossFadeTo(t,e,s){return t.crossFadeFrom(this,e,s)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,s){const i=this._mixer,r=i.time,n=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,h=o.sampleValues;return a[0]=r,a[1]=r+s,h[0]=t/n,h[1]=e/n,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,s,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*s;i<0||0===s?e=0:(this._startTime=null,e=s*i)}e*=this._updateTimeScale(t);const n=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===Ve)for(let s=0,i=t.length;s!==i;++s)t[s].evaluate(n),e[s].accumulateAdditive(o);else for(let s=0,r=t.length;s!==r;++s)t[s].evaluate(n),e[s].accumulate(i,o)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const s=this._weightInterpolant;if(null!==s){const i=s.evaluate(t)[0];e*=i,t>s.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const s=this._timeScaleInterpolant;if(null!==s){e*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,s=this.loop;let i=this.time+t,r=this._loopCount;const n=2202===s;if(0===t)return-1===r?i:n&&1==(1&r)?e-i:i;if(2200===s){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),i>=e||i<0){const s=Math.floor(i/e);i-=e*s,r+=Math.abs(s);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,n)}else this._setEndings(!1,!1,n);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:s})}}else this.time=i;if(n&&1==(1&r))return e-i}return i}_setEndings(t,e,s){const i=this._interpolantSettings;s?(i.endingStart=Fe,i.endingEnd=Fe):(i.endingStart=t?this.zeroSlopeAtStart?Fe:Oe:Ne,i.endingEnd=e?this.zeroSlopeAtEnd?Fe:Oe:Ne)}_scheduleFading(t,e,s){const i=this._mixer,r=i.time;let n=this._weightInterpolant;null===n&&(n=i._lendControlInterpolant(),this._weightInterpolant=n);const o=n.parameterPositions,a=n.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=s,this}}const vu=new Float32Array(1);class wu extends Ns{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const s=t._localRoot||this._root,i=t._clip.tracks,r=i.length,n=t._propertyBindings,o=t._interpolants,a=s.uuid,h=this._bindingsByRootAndName;let l=h[a];void 0===l&&(l={},h[a]=l);for(let t=0;t!==r;++t){const r=i[t],h=r.name;let c=l[h];if(void 0!==c)++c.referenceCount,n[t]=c;else{if(c=n[t],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,a,h));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;c=new cu(gu.create(s,h,i),r.ValueTypeName,r.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,a,h),n[t]=c}o[t].resultBuffer=c.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,s=t._clip.uuid,i=this._actionsByClip[s];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,s,e)}const e=t._propertyBindings;for(let t=0,s=e.length;t!==s;++t){const s=e[t];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,s=e.length;t!==s;++t){const s=e[t];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,s){const i=this._actions,r=this._actionsByClip;let n=r[e];if(void 0===n)n={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=n;else{const e=n.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),n.actionByRoot[s]=t}_removeInactiveAction(t){const e=this._actions,s=e[e.length-1],i=t._cacheIndex;s._cacheIndex=i,e[i]=s,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,n=this._actionsByClip,o=n[r],a=o.knownActions,h=a[a.length-1],l=t._byClipCacheIndex;h._byClipCacheIndex=l,a[l]=h,a.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete n[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,s=e.length;t!==s;++t){const s=e[t];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,s=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=s,e[s]=r}_takeBackAction(t){const e=this._actions,s=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=s,e[s]=r}_addInactiveBinding(t,e,s){const i=this._bindingsByRootAndName,r=this._bindings;let n=i[e];void 0===n&&(n={},i[e]=n),n[s]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,s=t.binding,i=s.rootNode.uuid,r=s.path,n=this._bindingsByRootAndName,o=n[i],a=e[e.length-1],h=t._cacheIndex;a._cacheIndex=h,e[h]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete n[i]}_lendBinding(t){const e=this._bindings,s=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=s,e[s]=r}_takeBackBinding(t){const e=this._bindings,s=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=s,e[s]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let s=t[e];return void 0===s&&(s=new jl(new Float32Array(2),new Float32Array(2),1,vu),s.__cacheIndex=e,t[e]=s),s}_takeBackControlInterpolant(t){const e=this._controlInterpolants,s=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=s,e[s]=r}clipAction(t,e,s){const i=e||this._root,r=i.uuid;let n=\"string\"==typeof t?Ql.findByName(i,t):t;const o=null!==n?n.uuid:t,a=this._actionsByClip[o];let h=null;if(void 0===s&&(s=null!==n?n.blendMode:Le),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===s)return t;h=a.knownActions[0],null===n&&(n=h._clip)}if(null===n)return null;const l=new bu(this,n,e,s);return this._bindAction(l,h),this._addInactiveAction(l,o,r),l}existingAction(t,e){const s=e||this._root,i=s.uuid,r=\"string\"==typeof t?Ql.findByName(s,t):t,n=r?r.uuid:t,o=this._actionsByClip[n];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,s=this._nActiveActions,i=this.time+=t,r=Math.sign(t),n=this._accuIndex^=1;for(let o=0;o!==s;++o){e[o]._update(i,t,r,n)}const o=this._bindings,a=this._nActiveBindings;for(let t=0;t!==a;++t)o[t].apply(n);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,s=t.uuid,i=this._actionsByClip,r=i[s];if(void 0!==r){const t=r.knownActions;for(let s=0,i=t.length;s!==i;++s){const i=t[s];this._deactivateAction(i);const r=i._cacheIndex,n=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,n._cacheIndex=r,e[r]=n,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[s]}}uncacheRoot(t){const e=t.uuid,s=this._actionsByClip;for(const t in s){const i=s[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const s=this.existingAction(t,e);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class Mu{constructor(t){this.value=t}clone(){return new Mu(void 0===this.value.clone?this.value:this.value.clone())}}let Su=0;class _u extends Ns{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,\"id\",{value:Su++}),this.name=\"\",this.usage=_s,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:\"dispose\"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let t=0,s=e.length;t<s;t++){const s=Array.isArray(e[t])?e[t]:[e[t]];for(let t=0;t<s.length;t++)this.uniforms.push(s[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Au extends no{constructor(t,e,s=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Tu{constructor(t,e,s,i,r){this.isGLBufferAttribute=!0,this.name=\"\",this.buffer=t,this.type=e,this.itemSize=s,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const zu=new nr;class Cu{constructor(t,e,s=0,i=1/0){this.ray=new rr(t,e),this.near=s,this.far=i,this.camera=null,this.layers=new fr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error(\"THREE.Raycaster: Unsupported camera type: \"+e.type)}setFromXRController(t){return zu.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(zu),this}intersectObject(t,e=!0,s=[]){return Bu(t,this,s,e),s.sort(Iu),s}intersectObjects(t,e=!0,s=[]){for(let i=0,r=t.length;i<r;i++)Bu(t[i],this,s,e);return s.sort(Iu),s}}function Iu(t,e){return t.distance-e.distance}function Bu(t,e,s,i){let r=!0;if(t.layers.test(e.layers)){!1===t.raycast(e,s)&&(r=!1)}if(!0===r&&!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)Bu(i[t],e,s,!0)}}class ku{constructor(t=1,e=0,s=0){return this.radius=t,this.phi=e,this.theta=s,this}set(t,e,s){return this.radius=t,this.phi=e,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Ds(this.phi,t,Math.PI-t),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,s){return this.radius=Math.sqrt(t*t+e*e+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(Ds(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Eu{constructor(t=1,e=0,s=0){return this.radius=t,this.theta=e,this.y=s,this}set(t,e,s){return this.radius=t,this.theta=e,this.y=s,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,s){return this.radius=Math.sqrt(t*t+s*s),this.theta=Math.atan2(t,s),this.y=e,this}clone(){return(new this.constructor).copy(this)}}class Ru{constructor(t,e,s,i){Ru.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==t&&this.set(t,e,s,i)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let s=0;s<4;s++)this.elements[s]=t[s+e];return this}set(t,e,s,i){const r=this.elements;return r[0]=t,r[2]=e,r[1]=s,r[3]=i,this}}const Pu=new Zs;class Ou{constructor(t=new Zs(1/0,1/0),e=new Zs(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const s=Pu.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Pu).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Fu=new Ii,Nu=new Ii;class Lu{constructor(t=new Ii,e=new Ii){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Fu.subVectors(t,this.start),Nu.subVectors(this.end,this.start);const s=Nu.dot(Nu);let i=Nu.dot(Fu)/s;return e&&(i=Ds(i,0,1)),i}closestPointToPoint(t,e,s){const i=this.closestPointToPointParameter(t,e);return this.delta(s).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Vu=new Ii;class Wu extends Er{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type=\"SpotLightHelper\";const s=new zn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,s=32;t<s;t++,e++){const r=t/s*Math.PI*2,n=e/s*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(n),Math.sin(n),1)}s.setAttribute(\"position\",new bn(i,3));const r=new Sa({fog:!1,toneMapped:!1});this.cone=new Oa(s,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Vu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Vu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Uu=new Ii,ju=new nr,Du=new nr;class Hu extends Oa{constructor(t){const e=qu(t),s=new zn,i=[],r=[],n=new $r(0,0,1),o=new $r(0,1,0);for(let t=0;t<e.length;t++){const s=e[t];s.parent&&s.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(n.r,n.g,n.b),r.push(o.r,o.g,o.b))}s.setAttribute(\"position\",new bn(i,3)),s.setAttribute(\"color\",new bn(r,3));super(s,new Sa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type=\"SkeletonHelper\",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,s=this.geometry,i=s.getAttribute(\"position\");Du.copy(this.root.matrixWorld).invert();for(let t=0,s=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(ju.multiplyMatrices(Du,r.matrixWorld),Uu.setFromMatrixPosition(ju),i.setXYZ(s,Uu.x,Uu.y,Uu.z),ju.multiplyMatrices(Du,r.parent.matrixWorld),Uu.setFromMatrixPosition(ju),i.setXYZ(s+1,Uu.x,Uu.y,Uu.z),s+=2)}s.getAttribute(\"position\").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function qu(t){const e=[];!0===t.isBone&&e.push(t);for(let s=0;s<t.children.length;s++)e.push.apply(e,qu(t.children[s]));return e}class Ju extends Vn{constructor(t,e,s){super(new ml(e,4,2),new en({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=s,this.type=\"PointLightHelper\",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Xu=new Ii,Yu=new $r,Zu=new $r;class Gu extends Er{constructor(t,e,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type=\"HemisphereLightHelper\";const i=new cl(e);i.rotateY(.5*Math.PI),this.material=new en({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute(\"position\"),n=new Float32Array(3*r.count);i.setAttribute(\"color\",new cn(n,3)),this.add(new Vn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute(\"color\");Yu.copy(this.light.color),Zu.copy(this.light.groundColor);for(let t=0,s=e.count;t<s;t++){const i=t<s/2?Yu:Zu;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(Xu.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $u extends Oa{constructor(t=10,e=10,s=4473924,i=8947848){s=new $r(s),i=new $r(i);const r=e/2,n=t/e,o=t/2,a=[],h=[];for(let t=0,l=0,c=-o;t<=e;t++,c+=n){a.push(-o,0,c,o,0,c),a.push(c,0,-o,c,0,o);const e=t===r?s:i;e.toArray(h,l),l+=3,e.toArray(h,l),l+=3,e.toArray(h,l),l+=3,e.toArray(h,l),l+=3}const l=new zn;l.setAttribute(\"position\",new bn(a,3)),l.setAttribute(\"color\",new bn(h,3));super(l,new Sa({vertexColors:!0,toneMapped:!1})),this.type=\"GridHelper\"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qu extends Oa{constructor(t=10,e=16,s=8,i=64,r=4473924,n=8947848){r=new $r(r),n=new $r(n);const o=[],a=[];if(e>1)for(let s=0;s<e;s++){const i=s/e*(2*Math.PI),h=Math.sin(i)*t,l=Math.cos(i)*t;o.push(0,0,0),o.push(h,0,l);const c=1&s?r:n;a.push(c.r,c.g,c.b),a.push(c.r,c.g,c.b)}for(let e=0;e<s;e++){const h=1&e?r:n,l=t-t/s*e;for(let t=0;t<i;t++){let e=t/i*(2*Math.PI),s=Math.sin(e)*l,r=Math.cos(e)*l;o.push(s,0,r),a.push(h.r,h.g,h.b),e=(t+1)/i*(2*Math.PI),s=Math.sin(e)*l,r=Math.cos(e)*l,o.push(s,0,r),a.push(h.r,h.g,h.b)}}const h=new zn;h.setAttribute(\"position\",new bn(o,3)),h.setAttribute(\"color\",new bn(a,3));super(h,new Sa({vertexColors:!0,toneMapped:!1})),this.type=\"PolarGridHelper\"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ku=new Ii,td=new Ii,ed=new Ii;class sd extends Er{constructor(t,e,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type=\"DirectionalLightHelper\",void 0===e&&(e=1);let i=new zn;i.setAttribute(\"position\",new bn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new Sa({fog:!1,toneMapped:!1});this.lightPlane=new ka(i,r),this.add(this.lightPlane),i=new zn,i.setAttribute(\"position\",new bn([0,0,0,0,0,1],3)),this.targetLine=new ka(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Ku.setFromMatrixPosition(this.light.matrixWorld),td.setFromMatrixPosition(this.light.target.matrixWorld),ed.subVectors(td,Ku),this.lightPlane.lookAt(td),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(td),this.targetLine.scale.z=ed.length()}}const id=new Ii,rd=new Xn;class nd extends Oa{constructor(t){const e=new zn,s=new Sa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],n={};function o(t,e){a(t),a(e)}function a(t){i.push(0,0,0),r.push(0,0,0),void 0===n[t]&&(n[t]=[]),n[t].push(i.length/3-1)}o(\"n1\",\"n2\"),o(\"n2\",\"n4\"),o(\"n4\",\"n3\"),o(\"n3\",\"n1\"),o(\"f1\",\"f2\"),o(\"f2\",\"f4\"),o(\"f4\",\"f3\"),o(\"f3\",\"f1\"),o(\"n1\",\"f1\"),o(\"n2\",\"f2\"),o(\"n3\",\"f3\"),o(\"n4\",\"f4\"),o(\"p\",\"n1\"),o(\"p\",\"n2\"),o(\"p\",\"n3\"),o(\"p\",\"n4\"),o(\"u1\",\"u2\"),o(\"u2\",\"u3\"),o(\"u3\",\"u1\"),o(\"c\",\"t\"),o(\"p\",\"c\"),o(\"cn1\",\"cn2\"),o(\"cn3\",\"cn4\"),o(\"cf1\",\"cf2\"),o(\"cf3\",\"cf4\"),e.setAttribute(\"position\",new bn(i,3)),e.setAttribute(\"color\",new bn(r,3)),super(e,s),this.type=\"CameraHelper\",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=n,this.update();const h=new $r(16755200),l=new $r(16711680),c=new $r(43775),u=new $r(16777215),d=new $r(3355443);this.setColors(h,l,c,u,d)}setColors(t,e,s,i,r){const n=this.geometry.getAttribute(\"color\");n.setXYZ(0,t.r,t.g,t.b),n.setXYZ(1,t.r,t.g,t.b),n.setXYZ(2,t.r,t.g,t.b),n.setXYZ(3,t.r,t.g,t.b),n.setXYZ(4,t.r,t.g,t.b),n.setXYZ(5,t.r,t.g,t.b),n.setXYZ(6,t.r,t.g,t.b),n.setXYZ(7,t.r,t.g,t.b),n.setXYZ(8,t.r,t.g,t.b),n.setXYZ(9,t.r,t.g,t.b),n.setXYZ(10,t.r,t.g,t.b),n.setXYZ(11,t.r,t.g,t.b),n.setXYZ(12,t.r,t.g,t.b),n.setXYZ(13,t.r,t.g,t.b),n.setXYZ(14,t.r,t.g,t.b),n.setXYZ(15,t.r,t.g,t.b),n.setXYZ(16,t.r,t.g,t.b),n.setXYZ(17,t.r,t.g,t.b),n.setXYZ(18,t.r,t.g,t.b),n.setXYZ(19,t.r,t.g,t.b),n.setXYZ(20,t.r,t.g,t.b),n.setXYZ(21,t.r,t.g,t.b),n.setXYZ(22,t.r,t.g,t.b),n.setXYZ(23,t.r,t.g,t.b),n.setXYZ(24,e.r,e.g,e.b),n.setXYZ(25,e.r,e.g,e.b),n.setXYZ(26,e.r,e.g,e.b),n.setXYZ(27,e.r,e.g,e.b),n.setXYZ(28,e.r,e.g,e.b),n.setXYZ(29,e.r,e.g,e.b),n.setXYZ(30,e.r,e.g,e.b),n.setXYZ(31,e.r,e.g,e.b),n.setXYZ(32,s.r,s.g,s.b),n.setXYZ(33,s.r,s.g,s.b),n.setXYZ(34,s.r,s.g,s.b),n.setXYZ(35,s.r,s.g,s.b),n.setXYZ(36,s.r,s.g,s.b),n.setXYZ(37,s.r,s.g,s.b),n.setXYZ(38,i.r,i.g,i.b),n.setXYZ(39,i.r,i.g,i.b),n.setXYZ(40,r.r,r.g,r.b),n.setXYZ(41,r.r,r.g,r.b),n.setXYZ(42,r.r,r.g,r.b),n.setXYZ(43,r.r,r.g,r.b),n.setXYZ(44,r.r,r.g,r.b),n.setXYZ(45,r.r,r.g,r.b),n.setXYZ(46,r.r,r.g,r.b),n.setXYZ(47,r.r,r.g,r.b),n.setXYZ(48,r.r,r.g,r.b),n.setXYZ(49,r.r,r.g,r.b),n.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;rd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),od(\"c\",e,t,rd,0,0,-1),od(\"t\",e,t,rd,0,0,1),od(\"n1\",e,t,rd,-1,-1,-1),od(\"n2\",e,t,rd,1,-1,-1),od(\"n3\",e,t,rd,-1,1,-1),od(\"n4\",e,t,rd,1,1,-1),od(\"f1\",e,t,rd,-1,-1,1),od(\"f2\",e,t,rd,1,-1,1),od(\"f3\",e,t,rd,-1,1,1),od(\"f4\",e,t,rd,1,1,1),od(\"u1\",e,t,rd,.7,1.1,-1),od(\"u2\",e,t,rd,-.7,1.1,-1),od(\"u3\",e,t,rd,0,2,-1),od(\"cf1\",e,t,rd,-1,0,1),od(\"cf2\",e,t,rd,1,0,1),od(\"cf3\",e,t,rd,0,-1,1),od(\"cf4\",e,t,rd,0,1,1),od(\"cn1\",e,t,rd,-1,0,-1),od(\"cn2\",e,t,rd,1,0,-1),od(\"cn3\",e,t,rd,0,-1,-1),od(\"cn4\",e,t,rd,0,1,-1),t.getAttribute(\"position\").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function od(t,e,s,i,r,n,o){id.set(r,n,o).unproject(i);const a=e[t];if(void 0!==a){const t=s.getAttribute(\"position\");for(let e=0,s=a.length;e<s;e++)t.setXYZ(a[e],id.x,id.y,id.z)}}const ad=new Ei;class hd extends Oa{constructor(t,e=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new zn;r.setIndex(new cn(s,1)),r.setAttribute(\"position\",new cn(i,3)),super(r,new Sa({color:e,toneMapped:!1})),this.object=t,this.type=\"BoxHelper\",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\"),void 0!==this.object&&ad.setFromObject(this.object),ad.isEmpty())return;const e=ad.min,s=ad.max,i=this.geometry.attributes.position,r=i.array;r[0]=s.x,r[1]=s.y,r[2]=s.z,r[3]=e.x,r[4]=s.y,r[5]=s.z,r[6]=e.x,r[7]=e.y,r[8]=s.z,r[9]=s.x,r[10]=e.y,r[11]=s.z,r[12]=s.x,r[13]=s.y,r[14]=e.z,r[15]=e.x,r[16]=s.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=s.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ld extends Oa{constructor(t,e=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new zn;i.setIndex(new cn(s,1)),i.setAttribute(\"position\",new bn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new Sa({color:e,toneMapped:!1})),this.box=t,this.type=\"Box3Helper\",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cd extends ka{constructor(t,e=1,s=16776960){const i=s,r=new zn;r.setAttribute(\"position\",new bn([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new Sa({color:i,toneMapped:!1})),this.type=\"PlaneHelper\",this.plane=t,this.size=e;const n=new zn;n.setAttribute(\"position\",new bn([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),n.computeBoundingSphere(),this.add(new Vn(n,new en({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const ud=new Ii;let dd,pd;class md extends Er{constructor(t=new Ii(0,0,1),e=new Ii(0,0,0),s=1,i=16776960,r=.2*s,n=.2*r){super(),this.type=\"ArrowHelper\",void 0===dd&&(dd=new zn,dd.setAttribute(\"position\",new bn([0,0,0,0,1,0],3)),pd=new Sh(0,.5,1,5,1),pd.translate(0,-.5,0)),this.position.copy(e),this.line=new ka(dd,new Sa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vn(pd,new en({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(s,r,n)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{ud.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(ud,e)}}setLength(t,e=.2*t,s=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(s,e,s),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class yd extends Oa{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],s=new zn;s.setAttribute(\"position\",new bn(e,3)),s.setAttribute(\"color\",new bn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(s,new Sa({vertexColors:!0,toneMapped:!1})),this.type=\"AxesHelper\"}setColors(t,e,s){const i=new $r,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(s),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fd{constructor(){this.type=\"ShapePath\",this.color=new $r,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new bh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,s,i){return this.currentPath.quadraticCurveTo(t,e,s,i),this}bezierCurveTo(t,e,s,i,r,n){return this.currentPath.bezierCurveTo(t,e,s,i,r,n),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const s=e.length;let i=!1;for(let r=s-1,n=0;n<s;r=n++){let s=e[r],o=e[n],a=o.x-s.x,h=o.y-s.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(s=e[n],a=-a,o=e[r],h=-h),t.y<s.y||t.y>o.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{const e=h*(t.x-s.x)-a*(t.y-s.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==s.y)continue;if(o.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=o.x)return!0}}return i}const s=rl.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,n,o;const a=[];if(1===i.length)return n=i[0],o=new Eh,o.curves=n.curves,a.push(o),a;let h=!s(i[0].getPoints());h=t?!h:h;const l=[],c=[];let u,d,p=[],m=0;c[m]=void 0,p[m]=[];for(let e=0,o=i.length;e<o;e++)n=i[e],u=n.getPoints(),r=s(u),r=t?!r:r,r?(!h&&c[m]&&m++,c[m]={s:new Eh,p:u},c[m].s.curves=n.curves,h&&m++,p[m]=[]):p[m].push({h:n,p:u[0]});if(!c[0])return function(t){const e=[];for(let s=0,i=t.length;s<i;s++){const i=t[s],r=new Eh;r.curves=i.curves,e.push(r)}return e}(i);if(c.length>1){let t=!1,s=0;for(let t=0,e=c.length;t<e;t++)l[t]=[];for(let i=0,r=c.length;i<r;i++){const r=p[i];for(let n=0;n<r.length;n++){const o=r[n];let a=!0;for(let r=0;r<c.length;r++)e(o.p,c[r].p)&&(i!==r&&s++,a?(a=!1,l[r].push(o)):t=!0);a&&l[i].push(o)}}s>0&&!1===t&&(p=l)}for(let t=0,e=c.length;t<e;t++){o=c[t].s,a.push(o),d=p[t];for(let t=0,e=d.length;t<e;t++)o.holes.push(d[t].h)}return a}}class gd extends Ns{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function xd(t,e,s,i){const r=function(t){switch(t){case Tt:case zt:return{byteLength:1,components:1};case It:case Ct:case Rt:return{byteLength:2,components:1};case Pt:case Ot:return{byteLength:2,components:4};case kt:case Bt:case Et:return{byteLength:4,components:1};case Nt:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(i);switch(s){case 1021:case 1024:return t*e;case 1025:return t*e*2;case qt:case Jt:return t*e/r.components*r.byteLength;case 1030:case 1031:return t*e*2/r.components*r.byteLength;case 1022:return t*e*3/r.components*r.byteLength;case Wt:case 1033:return t*e*4/r.components*r.byteLength;case 33776:case 33777:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case 33778:case 33779:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case 35841:case 35843:return Math.max(t,16)*Math.max(e,8)/4;case 35840:case 35842:return Math.max(t,8)*Math.max(e,8)/2;case 36196:case 37492:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case 37496:case 37808:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case 37809:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case 37810:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case 37811:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case 37812:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case 37813:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case 37814:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case 37815:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case 37816:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case 37817:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case 37818:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case 37819:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case 37820:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case 37821:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case 36492:case 36494:case 36495:return Math.ceil(t/4)*Math.ceil(e/4)*16;case 36283:case 36284:return Math.ceil(t/4)*Math.ceil(e/4)*8;case 36285:case 36286:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${s} format.`)}const bd={contain:function(t,e){const s=t.image&&t.image.width?t.image.width/t.image.height:1;return s>e?(t.repeat.x=1,t.repeat.y=s/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/s,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t},cover:function(t,e){const s=t.image&&t.image.width?t.image.width/t.image.height:1;return s>e?(t.repeat.x=e/s,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=s/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t},fill:function(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t},getByteLength:xd};class vd extends Si{constructor(t=1,e=1,s=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the \"count\" parameter to enable MRT.'),super(t,e,{...i,count:s}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"register\",{detail:{revision:t}})),\"undefined\"!=typeof window&&(window.__THREE__?console.warn(\"WARNING: Multiple instances of Three.js being imported.\"):window.__THREE__=t);export{et as ACESFilmicToneMapping,v as AddEquation,G as AddOperation,Ve as AdditiveAnimationBlendMode,f as AdditiveBlending,it as AgXToneMapping,Lt as AlphaFormat,Ss as AlwaysCompare,U as AlwaysDepth,ys as AlwaysStencilFunc,Ic as AmbientLight,bu as AnimationAction,Ql as AnimationClip,ac as AnimationLoader,wu as AnimationMixer,xu as AnimationObjectGroup,Vl as AnimationUtils,th as ArcCurve,Zc as ArrayCamera,md as ArrowHelper,nt as AttachedBindMode,iu as Audio,lu as AudioAnalyser,Dc as AudioContext,su as AudioListener,Hc as AudioLoader,yd as AxesHelper,d as BackSide,De as BasicDepthPacking,a as BasicShadowMap,Ma as BatchedMesh,Lo as Bone,ql as BooleanKeyframeTrack,Ou as Box2,Ei as Box3,ld as Box3Helper,Un as BoxGeometry,hd as BoxHelper,cn as BufferAttribute,zn as BufferGeometry,Fc as BufferGeometryLoader,zt as ByteType,tc as Cache,Xn as Camera,nd as CameraHelper,Ga as CanvasTexture,wh as CapsuleGeometry,oh as CatmullRomCurve3,tt as CineonToneMapping,Mh as CircleGeometry,mt as ClampToEdgeWrapping,Gc as Clock,$r as Color,Jl as ColorKeyframeTrack,ui as ColorManagement,Ya as CompressedArrayTexture,Za as CompressedCubeTexture,Xa as CompressedTexture,hc as CompressedTextureLoader,_h as ConeGeometry,L as ConstantAlphaFactor,F as ConstantColorFactor,gd as Controls,Kn as CubeCamera,ht as CubeReflectionMapping,lt as CubeRefractionMapping,to as CubeTexture,cc as CubeTextureLoader,dt as CubeUVReflectionMapping,ch as CubicBezierCurve,uh as CubicBezierCurve3,Ul as CubicInterpolant,r as CullFaceBack,n as CullFaceFront,o as CullFaceFrontBack,i as CullFaceNone,Qa as Curve,xh as CurvePath,b as CustomBlending,st as CustomToneMapping,Sh as CylinderGeometry,Eu as Cylindrical,Ti as Data3DTexture,_i as DataArrayTexture,Vo as DataTexture,uc as DataTextureLoader,an as DataUtils,rs as DecrementStencilOp,os as DecrementWrapStencilOp,sc as DefaultLoadingManager,Dt as DepthFormat,Ht as DepthStencilFormat,$a as DepthTexture,ot as DetachedBindMode,Cc as DirectionalLight,sd as DirectionalLightHelper,Dl as DiscreteInterpolant,Th as DodecahedronGeometry,p as DoubleSide,k as DstAlphaFactor,R as DstColorFactor,ks as DynamicCopyUsage,As as DynamicDrawUsage,Cs as DynamicReadUsage,kh as EdgesGeometry,Ka as EllipseCurve,xs as EqualCompare,H as EqualDepth,cs as EqualStencilFunc,ct as EquirectangularReflectionMapping,ut as EquirectangularRefractionMapping,yr as Euler,Ns as EventDispatcher,al as ExtrudeGeometry,oc as FileLoader,xn as Float16BufferAttribute,bn as Float32BufferAttribute,Et as FloatType,io as Fog,so as FogExp2,Ja as FramebufferTexture,u as FrontSide,ra as Frustum,Tu as GLBufferAttribute,Rs as GLSL1,Ps as GLSL3,vs as GreaterCompare,J as GreaterDepth,Ms as GreaterEqualCompare,q as GreaterEqualDepth,ms as GreaterEqualStencilFunc,ds as GreaterStencilFunc,$u as GridHelper,Ha as Group,Rt as HalfFloatType,mc as HemisphereLight,Gu as HemisphereLightHelper,ll as IcosahedronGeometry,Uc as ImageBitmapLoader,lc as ImageLoader,yi as ImageUtils,is as IncrementStencilOp,ns as IncrementWrapStencilOp,Do as InstancedBufferAttribute,Oc as InstancedBufferGeometry,Au as InstancedInterleavedBuffer,$o as InstancedMesh,mn as Int16BufferAttribute,fn as Int32BufferAttribute,un as Int8BufferAttribute,Bt as IntType,no as InterleavedBuffer,ao as InterleavedBufferAttribute,Wl as Interpolant,Ee as InterpolateDiscrete,Re as InterpolateLinear,Pe as InterpolateSmooth,as as InvertStencilOp,es as KeepStencilOp,Hl as KeyframeTrack,zo as LOD,vh as LatheGeometry,fr as Layers,gs as LessCompare,j as LessDepth,bs as LessEqualCompare,D as LessEqualDepth,us as LessEqualStencilFunc,ls as LessStencilFunc,pc as Light,Ec as LightProbe,ka as Line,Lu as Line3,Sa as LineBasicMaterial,dh as LineCurve,ph as LineCurve3,Rl as LineDashedMaterial,Fa as LineLoop,Oa as LineSegments,wt as LinearFilter,jl as LinearInterpolant,At as LinearMipMapLinearFilter,St as LinearMipMapNearestFilter,_t as LinearMipmapLinearFilter,Mt as LinearMipmapNearestFilter,$e as LinearSRGBColorSpace,Q as LinearToneMapping,Qe as LinearTransfer,ic as Loader,Pc as LoaderUtils,ec as LoadingManager,Ie as LoopOnce,ke as LoopPingPong,Be as LoopRepeat,jt as LuminanceAlphaFormat,Ut as LuminanceFormat,e as MOUSE,tn as Material,Rc as MaterialLoader,Ys as MathUtils,Ru as Matrix2,Gs as Matrix3,nr as Matrix4,_ as MaxEquation,Vn as Mesh,en as MeshBasicMaterial,Bl as MeshDepthMaterial,kl as MeshDistanceMaterial,Il as MeshLambertMaterial,El as MeshMatcapMaterial,Cl as MeshNormalMaterial,Tl as MeshPhongMaterial,Al as MeshPhysicalMaterial,_l as MeshStandardMaterial,zl as MeshToonMaterial,S as MinEquation,yt as MirroredRepeatWrapping,Z as MixOperation,x as MultiplyBlending,Y as MultiplyOperation,ft as NearestFilter,vt as NearestMipMapLinearFilter,xt as NearestMipMapNearestFilter,bt as NearestMipmapLinearFilter,gt as NearestMipmapNearestFilter,rt as NeutralToneMapping,fs as NeverCompare,W as NeverDepth,hs as NeverStencilFunc,m as NoBlending,Ze as NoColorSpace,$ as NoToneMapping,Le as NormalAnimationBlendMode,y as NormalBlending,ws as NotEqualCompare,X as NotEqualDepth,ps as NotEqualStencilFunc,Xl as NumberKeyframeTrack,Er as Object3D,Nc as ObjectLoader,Ye as ObjectSpaceNormalMap,cl as OctahedronGeometry,T as OneFactor,V as OneMinusConstantAlphaFactor,N as OneMinusConstantColorFactor,E as OneMinusDstAlphaFactor,P as OneMinusDstColorFactor,B as OneMinusSrcAlphaFactor,C as OneMinusSrcColorFactor,Tc as OrthographicCamera,h as PCFShadowMap,l as PCFSoftShadowMap,bh as Path,$n as PerspectiveCamera,ea as Plane,ul as PlaneGeometry,cd as PlaneHelper,Ac as PointLight,Ju as PointLightHelper,ja as Points,Na as PointsMaterial,Qu as PolarGridHelper,Ah as PolyhedronGeometry,hu as PositionalAudio,gu as PropertyBinding,cu as PropertyMixer,mh as QuadraticBezierCurve,yh as QuadraticBezierCurve3,Ci as Quaternion,Zl as QuaternionKeyframeTrack,Yl as QuaternionLinearInterpolant,Us as RAD2DEG,ze as RED_GREEN_RGTC2_Format,Ae as RED_RGTC1_Format,t as REVISION,He as RGBADepthPacking,Wt as RGBAFormat,Gt as RGBAIntegerFormat,be as RGBA_ASTC_10x10_Format,fe as RGBA_ASTC_10x5_Format,ge as RGBA_ASTC_10x6_Format,xe as RGBA_ASTC_10x8_Format,ve as RGBA_ASTC_12x10_Format,we as RGBA_ASTC_12x12_Format,he as RGBA_ASTC_4x4_Format,le as RGBA_ASTC_5x4_Format,ce as RGBA_ASTC_5x5_Format,ue as RGBA_ASTC_6x5_Format,de as RGBA_ASTC_6x6_Format,pe as RGBA_ASTC_8x5_Format,me as RGBA_ASTC_8x6_Format,ye as RGBA_ASTC_8x8_Format,Me as RGBA_BPTC_Format,ae as RGBA_ETC2_EAC_Format,re as RGBA_PVRTC_2BPPV1_Format,ie as RGBA_PVRTC_4BPPV1_Format,Qt as RGBA_S3TC_DXT1_Format,Kt as RGBA_S3TC_DXT3_Format,te as RGBA_S3TC_DXT5_Format,qe as RGBDepthPacking,Vt as RGBFormat,Zt as RGBIntegerFormat,Se as RGB_BPTC_SIGNED_Format,_e as RGB_BPTC_UNSIGNED_Format,ne as RGB_ETC1_Format,oe as RGB_ETC2_Format,se as RGB_PVRTC_2BPPV1_Format,ee as RGB_PVRTC_4BPPV1_Format,$t as RGB_S3TC_DXT1_Format,Je as RGDepthPacking,Xt as RGFormat,Yt as RGIntegerFormat,Sl as RawShaderMaterial,rr as Ray,Cu as Raycaster,Bc as RectAreaLight,qt as RedFormat,Jt as RedIntegerFormat,K as ReinhardToneMapping,Mi as RenderTarget,pt as RepeatWrapping,ss as ReplaceStencilOp,M as ReverseSubtractEquation,dl as RingGeometry,Ce as SIGNED_RED_GREEN_RGTC2_Format,Te as SIGNED_RED_RGTC1_Format,Ge as SRGBColorSpace,Ke as SRGBTransfer,ro as Scene,Jn as ShaderMaterial,Ml as ShadowMaterial,Eh as Shape,pl as ShapeGeometry,fd as ShapePath,rl as ShapeUtils,Ct as ShortType,jo as Skeleton,Hu as SkeletonHelper,No as SkinnedMesh,gi as Source,Gi as Sphere,ml as SphereGeometry,ku as Spherical,kc as SphericalHarmonics3,fh as SplineCurve,vc as SpotLight,Wu as SpotLightHelper,So as Sprite,ho as SpriteMaterial,I as SrcAlphaFactor,O as SrcAlphaSaturateFactor,z as SrcColorFactor,Bs as StaticCopyUsage,_s as StaticDrawUsage,zs as StaticReadUsage,Yc as StereoCamera,Es as StreamCopyUsage,Ts as StreamDrawUsage,Is as StreamReadUsage,Gl as StringKeyframeTrack,w as SubtractEquation,g as SubtractiveBlending,s as TOUCH,Xe as TangentSpaceNormalMap,yl as TetrahedronGeometry,vi as Texture,dc as TextureLoader,bd as TextureUtils,fl as TorusGeometry,gl as TorusKnotGeometry,Jr as Triangle,je as TriangleFanDrawMode,Ue as TriangleStripDrawMode,We as TrianglesDrawMode,xl as TubeGeometry,at as UVMapping,yn as Uint16BufferAttribute,gn as Uint32BufferAttribute,dn as Uint8BufferAttribute,pn as Uint8ClampedBufferAttribute,Mu as Uniform,_u as UniformsGroup,qn as UniformsUtils,Tt as UnsignedByteType,Ft as UnsignedInt248Type,Nt as UnsignedInt5999Type,kt as UnsignedIntType,Pt as UnsignedShort4444Type,Ot as UnsignedShort5551Type,It as UnsignedShortType,c as VSMShadowMap,Zs as Vector2,Ii as Vector3,wi as Vector4,$l as VectorKeyframeTrack,qa as VideoTexture,zi as WebGL3DRenderTarget,Ai as WebGLArrayRenderTarget,Os as WebGLCoordinateSystem,eo as WebGLCubeRenderTarget,vd as WebGLMultipleRenderTargets,Si as WebGLRenderTarget,Fs as WebGPUCoordinateSystem,bl as WireframeGeometry,Ne as WrapAroundEnding,Oe as ZeroCurvatureEnding,A as ZeroFactor,Fe as ZeroSlopeEnding,ts as ZeroStencilOp,Qs as arrayNeedsUint32,jn as cloneUniforms,si as createCanvasElement,ei as createElementNS,xd as getByteLength,Hn as getUnlitUniformColorSpace,Dn as mergeUniforms,ni as probeAsync,oi as toNormalizedProjectionMatrix,ai as toReversedProjectionMatrix,ri as warnOnce};\r\n","/**\r\n * @license\r\n * Copyright 2010-2024 Three.js Authors\r\n * SPDX-License-Identifier: MIT\r\n */\r\nimport{Color as e,Matrix3 as t,Vector2 as n,mergeUniforms as i,Vector3 as r,CubeUVReflectionMapping as a,Mesh as o,BoxGeometry as s,ShaderMaterial as l,cloneUniforms as c,BackSide as d,ColorManagement as u,SRGBTransfer as f,PlaneGeometry as p,FrontSide as m,getUnlitUniformColorSpace as h,Euler as _,Matrix4 as g,IntType as v,RGBAFormat as E,HalfFloatType as S,UnsignedByteType as T,FloatType as M,Plane as x,EquirectangularReflectionMapping as R,EquirectangularRefractionMapping as A,WebGLCubeRenderTarget as b,CubeReflectionMapping as C,CubeRefractionMapping as L,PerspectiveCamera as P,NoToneMapping as U,MeshBasicMaterial as w,BufferGeometry as D,BufferAttribute as y,WebGLRenderTarget as I,NoBlending as N,OrthographicCamera as O,LinearFilter as F,LinearSRGBColorSpace as B,warnOnce as H,arrayNeedsUint32 as G,Uint32BufferAttribute as V,Uint16BufferAttribute as z,Vector4 as k,DataArrayTexture as W,LessEqualCompare as X,Texture as Y,DepthTexture as j,Data3DTexture as K,CubeTexture as q,GLSL3 as Z,CustomToneMapping as $,NeutralToneMapping as Q,AgXToneMapping as J,ACESFilmicToneMapping as ee,CineonToneMapping as te,ReinhardToneMapping as ne,LinearToneMapping as ie,PCFShadowMap as re,PCFSoftShadowMap as ae,VSMShadowMap as oe,LinearTransfer as se,AddOperation as le,MixOperation as ce,MultiplyOperation as de,ObjectSpaceNormalMap as ue,TangentSpaceNormalMap as fe,NormalBlending as pe,DoubleSide as me,UniformsUtils as he,Layers as _e,Frustum as ge,MeshDepthMaterial as ve,RGBADepthPacking as Ee,MeshDistanceMaterial as Se,NearestFilter as Te,LessEqualDepth as Me,AddEquation as xe,SubtractEquation as Re,ReverseSubtractEquation as Ae,ZeroFactor as be,OneFactor as Ce,SrcColorFactor as Le,SrcAlphaFactor as Pe,SrcAlphaSaturateFactor as Ue,DstColorFactor as we,DstAlphaFactor as De,OneMinusSrcColorFactor as ye,OneMinusSrcAlphaFactor as Ie,OneMinusDstColorFactor as Ne,OneMinusDstAlphaFactor as Oe,ConstantColorFactor as Fe,OneMinusConstantColorFactor as Be,ConstantAlphaFactor as He,OneMinusConstantAlphaFactor as Ge,CustomBlending as Ve,MultiplyBlending as ze,SubtractiveBlending as ke,AdditiveBlending as We,CullFaceNone as Xe,CullFaceBack as Ye,CullFaceFront as je,MinEquation as Ke,MaxEquation as qe,NotEqualDepth as Ze,GreaterDepth as $e,GreaterEqualDepth as Qe,EqualDepth as Je,LessDepth as et,AlwaysDepth as tt,NeverDepth as nt,RepeatWrapping as it,ClampToEdgeWrapping as rt,MirroredRepeatWrapping as at,NearestMipmapNearestFilter as ot,NearestMipmapLinearFilter as st,LinearMipmapNearestFilter as lt,LinearMipmapLinearFilter as ct,NeverCompare as dt,AlwaysCompare as ut,LessCompare as ft,EqualCompare as pt,GreaterEqualCompare as mt,GreaterCompare as ht,NotEqualCompare as _t,NoColorSpace as gt,DepthStencilFormat as vt,getByteLength as Et,UnsignedIntType as St,UnsignedInt248Type as Tt,UnsignedShortType as Mt,DepthFormat as xt,createElementNS as Rt,UnsignedShort4444Type as At,UnsignedShort5551Type as bt,UnsignedInt5999Type as Ct,ByteType as Lt,ShortType as Pt,AlphaFormat as Ut,RGBFormat as wt,LuminanceFormat as Dt,LuminanceAlphaFormat as yt,RedFormat as It,RedIntegerFormat as Nt,RGFormat as Ot,RGIntegerFormat as Ft,RGBAIntegerFormat as Bt,RGB_S3TC_DXT1_Format as Ht,RGBA_S3TC_DXT1_Format as Gt,RGBA_S3TC_DXT3_Format as Vt,RGBA_S3TC_DXT5_Format as zt,RGB_PVRTC_4BPPV1_Format as kt,RGB_PVRTC_2BPPV1_Format as Wt,RGBA_PVRTC_4BPPV1_Format as Xt,RGBA_PVRTC_2BPPV1_Format as Yt,RGB_ETC1_Format as jt,RGB_ETC2_Format as Kt,RGBA_ETC2_EAC_Format as qt,RGBA_ASTC_4x4_Format as Zt,RGBA_ASTC_5x4_Format as $t,RGBA_ASTC_5x5_Format as Qt,RGBA_ASTC_6x5_Format as Jt,RGBA_ASTC_6x6_Format as en,RGBA_ASTC_8x5_Format as tn,RGBA_ASTC_8x6_Format as nn,RGBA_ASTC_8x8_Format as rn,RGBA_ASTC_10x5_Format as an,RGBA_ASTC_10x6_Format as on,RGBA_ASTC_10x8_Format as sn,RGBA_ASTC_10x10_Format as ln,RGBA_ASTC_12x10_Format as cn,RGBA_ASTC_12x12_Format as dn,RGBA_BPTC_Format as un,RGB_BPTC_SIGNED_Format as fn,RGB_BPTC_UNSIGNED_Format as pn,RED_RGTC1_Format as mn,SIGNED_RED_RGTC1_Format as hn,RED_GREEN_RGTC2_Format as _n,SIGNED_RED_GREEN_RGTC2_Format as gn,Group as vn,EventDispatcher as En,ArrayCamera as Sn,RAD2DEG as Tn,createCanvasElement as Mn,SRGBColorSpace as xn,REVISION as Rn,toNormalizedProjectionMatrix as An,toReversedProjectionMatrix as bn,probeAsync as Cn,WebGLCoordinateSystem as Ln}from\"./three.core.min.js\";export{AdditiveAnimationBlendMode,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxHelper,BufferGeometryLoader,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CircleGeometry,Clock,ColorKeyframeTrack,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,Controls,CubeCamera,CubeTextureLoader,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceFrontBack,Curve,CurvePath,CylinderGeometry,Cylindrical,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualStencilFunc,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Fog,FogExp2,FramebufferTexture,GLBufferAttribute,GLSL1,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NeverStencilFunc,NormalAnimationBlendMode,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,OctahedronGeometry,Path,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RGBDepthPacking,RGBIntegerFormat,RGDepthPacking,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RenderTarget,ReplaceStencilOp,RingGeometry,Scene,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,TOUCH,TetrahedronGeometry,TextureLoader,TextureUtils,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,VectorKeyframeTrack,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLMultipleRenderTargets,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroSlopeEnding,ZeroStencilOp}from\"./three.core.min.js\";function Pn(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Un(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,a=i.byteLength,o=e.createBuffer();let s;if(e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)s=e.FLOAT;else if(i instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=e.SHORT;else if(i instanceof Uint32Array)s=e.UNSIGNED_INT;else if(i instanceof Int32Array)s=e.INT;else if(i instanceof Int8Array)s=e.BYTE;else if(i instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error(\"THREE.WebGLAttributes: Unsupported buffer data format: \"+i);s=e.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:a}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error(\"THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.\");!function(t,n,i){const r=n.array,a=n.updateRanges;if(e.bindBuffer(i,t),0===a.length)e.bufferSubData(i,0,r);else{a.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<a.length;e++){const n=a[t],i=a[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,a[t]=i)}a.length=t+1;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.bufferSubData(i,n.start*r.BYTES_PER_ELEMENT,r,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}const wn={alphahash_fragment:\"#ifdef USE_ALPHAHASH\\n\\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\\n#endif\",alphahash_pars_fragment:\"#ifdef USE_ALPHAHASH\\n\\tconst float ALPHA_HASH_SCALE = 0.05;\\n\\tfloat hash2D( vec2 value ) {\\n\\t\\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\\n\\t}\\n\\tfloat hash3D( vec3 value ) {\\n\\t\\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\\n\\t}\\n\\tfloat getAlphaHashThreshold( vec3 position ) {\\n\\t\\tfloat maxDeriv = max(\\n\\t\\t\\tlength( dFdx( position.xyz ) ),\\n\\t\\t\\tlength( dFdy( position.xyz ) )\\n\\t\\t);\\n\\t\\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\\n\\t\\tvec2 pixScales = vec2(\\n\\t\\t\\texp2( floor( log2( pixScale ) ) ),\\n\\t\\t\\texp2( ceil( log2( pixScale ) ) )\\n\\t\\t);\\n\\t\\tvec2 alpha = vec2(\\n\\t\\t\\thash3D( floor( pixScales.x * position.xyz ) ),\\n\\t\\t\\thash3D( floor( pixScales.y * position.xyz ) )\\n\\t\\t);\\n\\t\\tfloat lerpFactor = fract( log2( pixScale ) );\\n\\t\\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\\n\\t\\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\\n\\t\\tvec3 cases = vec3(\\n\\t\\t\\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\\n\\t\\t\\t( x - 0.5 * a ) / ( 1.0 - a ),\\n\\t\\t\\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\\n\\t\\t);\\n\\t\\tfloat threshold = ( x < ( 1.0 - a ) )\\n\\t\\t\\t? ( ( x < a ) ? cases.x : cases.y )\\n\\t\\t\\t: cases.z;\\n\\t\\treturn clamp( threshold , 1.0e-6, 1.0 );\\n\\t}\\n#endif\",alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef USE_ALPHATEST\\n\\t#ifdef ALPHA_TO_COVERAGE\\n\\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\\n\\tif ( diffuseColor.a == 0.0 ) discard;\\n\\t#else\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n\\t#endif\\n#endif\",alphatest_pars_fragment:\"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_CLEARCOAT ) \\n\\t\\tclearcoatSpecularIndirect *= ambientOcclusion;\\n\\t#endif\\n\\t#if defined( USE_SHEEN ) \\n\\t\\tsheenSpecularIndirect *= ambientOcclusion;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",batching_pars_vertex:\"#ifdef USE_BATCHING\\n\\t#if ! defined( GL_ANGLE_multi_draw )\\n\\t#define gl_DrawID _gl_DrawID\\n\\tuniform int _gl_DrawID;\\n\\t#endif\\n\\tuniform highp sampler2D batchingTexture;\\n\\tuniform highp usampler2D batchingIdTexture;\\n\\tmat4 getBatchingMatrix( const in float i ) {\\n\\t\\tint size = textureSize( batchingTexture, 0 ).x;\\n\\t\\tint j = int( i ) * 4;\\n\\t\\tint x = j % size;\\n\\t\\tint y = j / size;\\n\\t\\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\\n\\t\\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\\n\\t\\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\\n\\t\\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\\n\\t\\treturn mat4( v1, v2, v3, v4 );\\n\\t}\\n\\tfloat getIndirectIndex( const in int i ) {\\n\\t\\tint size = textureSize( batchingIdTexture, 0 ).x;\\n\\t\\tint x = i % size;\\n\\t\\tint y = i / size;\\n\\t\\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\\n\\t}\\n#endif\\n#ifdef USE_BATCHING_COLOR\\n\\tuniform sampler2D batchingColorTexture;\\n\\tvec3 getBatchingColor( const in float i ) {\\n\\t\\tint size = textureSize( batchingColorTexture, 0 ).x;\\n\\t\\tint j = int( i );\\n\\t\\tint x = j % size;\\n\\t\\tint y = j / size;\\n\\t\\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\\n\\t}\\n#endif\",batching_vertex:\"#ifdef USE_BATCHING\\n\\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\\n#ifdef USE_ALPHAHASH\\n\\tvPosition = vec3( position );\\n#endif\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\",bsdfs:\"float G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n} // validated\",iridescence_fragment:\"#ifdef USE_IRIDESCENCE\\n\\tconst mat3 XYZ_TO_REC709 = mat3(\\n\\t\\t 3.2404542, -0.9692660,  0.0556434,\\n\\t\\t-1.5371385,  1.8760108, -0.2040259,\\n\\t\\t-0.4985314,  0.0415560,  1.0572252\\n\\t);\\n\\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\\n\\t\\tvec3 sqrtF0 = sqrt( fresnel0 );\\n\\t\\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\\n\\t}\\n\\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\\n\\t}\\n\\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\\n\\t}\\n\\tvec3 evalSensitivity( float OPD, vec3 shift ) {\\n\\t\\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\\n\\t\\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\\n\\t\\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\\n\\t\\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\\n\\t\\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\\n\\t\\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\\n\\t\\txyz /= 1.0685e-7;\\n\\t\\tvec3 rgb = XYZ_TO_REC709 * xyz;\\n\\t\\treturn rgb;\\n\\t}\\n\\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\\n\\t\\tvec3 I;\\n\\t\\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\\n\\t\\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\\n\\t\\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\\n\\t\\tif ( cosTheta2Sq < 0.0 ) {\\n\\t\\t\\treturn vec3( 1.0 );\\n\\t\\t}\\n\\t\\tfloat cosTheta2 = sqrt( cosTheta2Sq );\\n\\t\\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\\n\\t\\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\\n\\t\\tfloat T121 = 1.0 - R12;\\n\\t\\tfloat phi12 = 0.0;\\n\\t\\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\\n\\t\\tfloat phi21 = PI - phi12;\\n\\t\\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\\t\\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\\n\\t\\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\\n\\t\\tvec3 phi23 = vec3( 0.0 );\\n\\t\\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\\n\\t\\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\\n\\t\\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\\n\\t\\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\\n\\t\\tvec3 phi = vec3( phi21 ) + phi23;\\n\\t\\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\\n\\t\\tvec3 r123 = sqrt( R123 );\\n\\t\\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\\n\\t\\tvec3 C0 = R12 + Rs;\\n\\t\\tI = C0;\\n\\t\\tvec3 Cm = Rs - T121;\\n\\t\\tfor ( int m = 1; m <= 2; ++ m ) {\\n\\t\\t\\tCm *= r123;\\n\\t\\t\\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\\n\\t\\t\\tI += Cm * Sm;\\n\\t\\t}\\n\\t\\treturn max( I, vec3( 0.0 ) );\\n\\t}\\n#endif\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vBumpMapUv );\\n\\t\\tvec2 dSTdy = dFdy( vBumpMapUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\\n\\t\\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#ifdef ALPHA_TO_COVERAGE\\n\\t\\tfloat distanceToPlane, distanceGradient;\\n\\t\\tfloat clipOpacity = 1.0;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\\n\\t\\t\\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\\n\\t\\t\\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\\n\\t\\t\\tif ( clipOpacity == 0.0 ) discard;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\t\\tfloat unionClipOpacity = 1.0;\\n\\t\\t\\t#pragma unroll_loop_start\\n\\t\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\t\\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\\n\\t\\t\\t\\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\\n\\t\\t\\t\\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\\n\\t\\t\\t}\\n\\t\\t\\t#pragma unroll_loop_end\\n\\t\\t\\tclipOpacity *= 1.0 - unionClipOpacity;\\n\\t\\t#endif\\n\\t\\tdiffuseColor.a *= clipOpacity;\\n\\t\\tif ( diffuseColor.a == 0.0 ) discard;\\n\\t#else\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\t\\tbool clipped = true;\\n\\t\\t\\t#pragma unroll_loop_start\\n\\t\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t\\t}\\n\\t\\t\\t#pragma unroll_loop_end\\n\\t\\t\\tif ( clipped ) discard;\\n\\t\\t#endif\\n\\t#endif\\n#endif\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\",color_fragment:\"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\\n#ifdef USE_BATCHING_COLOR\\n\\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\\n\\tvColor.xyz *= batchingColor.xyz;\\n#endif\",common:\"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nvec3 pow2( const in vec3 x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\n#ifdef USE_ALPHAHASH\\n\\tvarying vec3 vPosition;\\n#endif\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n} // validated\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\\n\\t\\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\\n\\t\\tuv.x *= CUBEUV_TEXEL_WIDTH;\\n\\t\\tuv.y *= CUBEUV_TEXEL_HEIGHT;\\n\\t\\t#ifdef texture2DGradEXT\\n\\t\\t\\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t\\t#endif\\n\\t}\\n\\t#define cubeUV_r0 1.0\\n\\t#define cubeUV_m0 - 2.0\\n\\t#define cubeUV_r1 0.8\\n\\t#define cubeUV_m1 - 1.0\\n\\t#define cubeUV_r4 0.4\\n\\t#define cubeUV_m4 2.0\\n\\t#define cubeUV_r5 0.305\\n\\t#define cubeUV_m5 3.0\\n\\t#define cubeUV_r6 0.21\\n\\t#define cubeUV_m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= cubeUV_r1 ) {\\n\\t\\t\\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\\n\\t\\t} else if ( roughness >= cubeUV_r4 ) {\\n\\t\\t\\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\\n\\t\\t} else if ( roughness >= cubeUV_r5 ) {\\n\\t\\t\\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\\n\\t\\t} else if ( roughness >= cubeUV_r6 ) {\\n\\t\\t\\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\",defaultnormal_vertex:\"vec3 transformedNormal = objectNormal;\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = objectTangent;\\n#endif\\n#ifdef USE_BATCHING\\n\\tmat3 bm = mat3( batchingMatrix );\\n\\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\\n\\ttransformedNormal = bm * transformedNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\ttransformedTangent = bm * transformedTangent;\\n\\t#endif\\n#endif\\n#ifdef USE_INSTANCING\\n\\tmat3 im = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\\n\\ttransformedNormal = im * transformedNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\ttransformedTangent = im * transformedTangent;\\n\\t#endif\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\\n#endif\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\\n\\t\\temissiveColor = sRGBTransferEOTF( emissiveColor );\\n\\t#endif\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",colorspace_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",colorspace_pars_fragment:\"vec4 LinearTransferOETF( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 sRGBTransferEOTF( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 sRGBTransferOETF( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",envmap_common_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform mat3 envMapRotation;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\",envmap_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\tvec3 reflectVec = reflect( - viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\\n\\t\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t\\tvec3 bentNormal = cross( bitangent, viewDir );\\n\\t\\t\\t\\tbentNormal = normalize( cross( bentNormal, bitangent ) );\\n\\t\\t\\t\\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\\n\\t\\t\\t\\treturn getIBLRadiance( viewDir, bentNormal, roughness );\\n\\t\\t\\t#else\\n\\t\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t\\t#endif\\n\\t\\t}\\n\\t#endif\\n#endif\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",fog_vertex:\"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",gradientmap_pars_fragment:\"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\tvec2 fw = fwidth( coord ) * 0.5;\\n\\t\\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\\n\\t#endif\\n}\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_fragment:\"LambertMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularStrength = specularStrength;\",lights_lambert_pars_fragment:\"varying vec3 vViewPosition;\\nstruct LambertMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Lambert\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Lambert\",lights_pars_begin:\"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\n#if defined( USE_LIGHT_PROBES )\\n\\tuniform vec3 lightProbe[ 9 ];\\n#endif\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometryPosition;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometryPosition;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",lights_toon_fragment:\"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\",lights_toon_pars_fragment:\"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\tmaterial.ior = ior;\\n\\t#ifdef USE_SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULAR_COLORMAP\\n\\t\\t\\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULAR_INTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_DISPERSION\\n\\tmaterial.dispersion = dispersion;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tmaterial.iridescence = iridescence;\\n\\tmaterial.iridescenceIOR = iridescenceIOR;\\n\\t#ifdef USE_IRIDESCENCEMAP\\n\\t\\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\t\\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\\n\\t#else\\n\\t\\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\\n\\t#endif\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEEN_COLORMAP\\n\\t\\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\\n\\t#endif\\n#endif\\n#ifdef USE_ANISOTROPY\\n\\t#ifdef USE_ANISOTROPYMAP\\n\\t\\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\\n\\t\\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\\n\\t\\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\\n\\t#else\\n\\t\\tvec2 anisotropyV = anisotropyVector;\\n\\t#endif\\n\\tmaterial.anisotropy = length( anisotropyV );\\n\\tif( material.anisotropy == 0.0 ) {\\n\\t\\tanisotropyV = vec2( 1.0, 0.0 );\\n\\t} else {\\n\\t\\tanisotropyV /= material.anisotropy;\\n\\t\\tmaterial.anisotropy = saturate( material.anisotropy );\\n\\t}\\n\\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\\n\\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\\n\\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\\n#endif\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\tfloat dispersion;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tfloat iridescence;\\n\\t\\tfloat iridescenceIOR;\\n\\t\\tfloat iridescenceThickness;\\n\\t\\tvec3 iridescenceFresnel;\\n\\t\\tvec3 iridescenceF0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n\\t#ifdef IOR\\n\\t\\tfloat ior;\\n\\t#endif\\n\\t#ifdef USE_TRANSMISSION\\n\\t\\tfloat transmission;\\n\\t\\tfloat transmissionAlpha;\\n\\t\\tfloat thickness;\\n\\t\\tfloat attenuationDistance;\\n\\t\\tvec3 attenuationColor;\\n\\t#endif\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tfloat anisotropy;\\n\\t\\tfloat alphaT;\\n\\t\\tvec3 anisotropyT;\\n\\t\\tvec3 anisotropyB;\\n\\t#endif\\n};\\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\\nvec3 sheenSpecularDirect = vec3( 0.0 );\\nvec3 sheenSpecularIndirect = vec3(0.0 );\\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\\n    float x2 = x * x;\\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\n#ifdef USE_ANISOTROPY\\n\\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\\n\\t\\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\\n\\t\\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\\n\\t\\tfloat v = 0.5 / ( gv + gl );\\n\\t\\treturn saturate(v);\\n\\t}\\n\\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\\n\\t\\tfloat a2 = alphaT * alphaB;\\n\\t\\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\\n\\t\\thighp float v2 = dot( v, v );\\n\\t\\tfloat w2 = a2 / v2;\\n\\t\\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\\n\\t}\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\\n\\t\\tvec3 f0 = material.clearcoatF0;\\n\\t\\tfloat f90 = material.clearcoatF90;\\n\\t\\tfloat roughness = material.clearcoatRoughness;\\n\\t\\tfloat alpha = pow2( roughness );\\n\\t\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\t\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\t\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\t\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\t\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\t\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t\\treturn F * ( V * D );\\n\\t}\\n#endif\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\\n\\tvec3 f0 = material.specularColor;\\n\\tfloat f90 = material.specularF90;\\n\\tfloat roughness = material.roughness;\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tF = mix( F, material.iridescenceFresnel, material.iridescence );\\n\\t#endif\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tfloat dotTL = dot( material.anisotropyT, lightDir );\\n\\t\\tfloat dotTV = dot( material.anisotropyT, viewDir );\\n\\t\\tfloat dotTH = dot( material.anisotropyT, halfDir );\\n\\t\\tfloat dotBL = dot( material.anisotropyB, lightDir );\\n\\t\\tfloat dotBV = dot( material.anisotropyB, viewDir );\\n\\t\\tfloat dotBH = dot( material.anisotropyB, halfDir );\\n\\t\\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\\n\\t\\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\\n\\t#else\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t#endif\\n\\treturn F * ( V * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\n#ifdef USE_IRIDESCENCE\\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#else\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#endif\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\\n\\t#else\\n\\t\\tvec3 Fr = specularColor;\\n\\t#endif\\n\\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometryNormal;\\n\\t\\tvec3 viewDir = geometryViewDir;\\n\\t\\tvec3 position = geometryPosition;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\\n\\t#else\\n\\t\\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\t#endif\\n\\tvec3 totalScattering = singleScattering + multiScattering;\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",lights_fragment_begin:\"\\nvec3 geometryPosition = - vViewPosition;\\nvec3 geometryNormal = normal;\\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\nvec3 geometryClearcoatNormal = vec3( 0.0 );\\n#ifdef USE_CLEARCOAT\\n\\tgeometryClearcoatNormal = clearcoatNormal;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\\n\\tif ( material.iridescenceThickness == 0.0 ) {\\n\\t\\tmaterial.iridescence = 0.0;\\n\\t} else {\\n\\t\\tmaterial.iridescence = saturate( material.iridescence );\\n\\t}\\n\\tif ( material.iridescence > 0.0 ) {\\n\\t\\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\\n\\t\\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\\n\\t}\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometryPosition, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tvec4 spotColor;\\n\\tvec3 spotLightCoord;\\n\\tbool inSpotLightMap;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\\n\\t\\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\\n\\t\\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\\n\\t\\t#else\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#endif\\n\\t\\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\\n\\t\\t\\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\\n\\t\\t\\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\\n\\t\\t\\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\\n\\t\\t\\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\\n\\t\\t#endif\\n\\t\\t#undef SPOT_LIGHT_MAP_INDEX\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if defined( USE_LIGHT_PROBES )\\n\\t\\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometryNormal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\\n\\t#else\\n\\t\\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF )\\n\\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\tvFragDepth = 1.0 + gl_Position.w;\\n\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\\n\\t#endif\\n\\tdiffuseColor *= sampledDiffuseColor;\\n#endif\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\t#if defined( USE_POINTS_UV )\\n\\t\\tvec2 uv = vUv;\\n\\t#else\\n\\t\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\t#endif\\n#endif\\n#ifdef USE_MAP\\n\\tdiffuseColor *= texture2D( map, uv );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\",map_particle_pars_fragment:\"#if defined( USE_POINTS_UV )\\n\\tvarying vec2 vUv;\\n#else\\n\\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\t\\tuniform mat3 uvTransform;\\n\\t#endif\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphinstance_vertex:\"#ifdef USE_INSTANCING_MORPH\\n\\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\\n\\t}\\n#endif\",morphcolor_vertex:\"#if defined( USE_MORPHCOLORS )\\n\\tvColor *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t#if defined( USE_COLOR_ALPHA )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t#elif defined( USE_COLOR )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\\n\\t\\t#endif\\n\\t}\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\\n\\t}\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_INSTANCING_MORPH\\n\\t\\tuniform float morphTargetBaseInfluence;\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t#endif\\n\\tuniform sampler2DArray morphTargetsTexture;\\n\\tuniform ivec2 morphTargetsTextureSize;\\n\\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\\n\\t\\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\\n\\t\\tint y = texelIndex / morphTargetsTextureSize.x;\\n\\t\\tint x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\\n\\t\\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\\n\\t}\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\\n\\t}\\n#endif\",normal_fragment_begin:\"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = dFdx( vViewPosition );\\n\\tvec3 fdy = dFdy( vViewPosition );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal *= faceDirection;\\n\\t#endif\\n#endif\\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\\n\\t#else\\n\\t\\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\\n\\t\\t#if defined( USE_NORMALMAP )\\n\\t\\t\\tvNormalMapUv\\n\\t\\t#elif defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tvClearcoatNormalMapUv\\n\\t\\t#else\\n\\t\\t\\tvUv\\n\\t\\t#endif\\n\\t\\t);\\n\\t#endif\\n\\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\\n\\t\\ttbn[0] *= faceDirection;\\n\\t\\ttbn[1] *= faceDirection;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\\n\\t#else\\n\\t\\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\\n\\t#endif\\n\\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\\n\\t\\ttbn2[0] *= faceDirection;\\n\\t\\ttbn2[1] *= faceDirection;\\n\\t#endif\\n#endif\\nvec3 nonPerturbedNormal = normal;\",normal_fragment_maps:\"#ifdef USE_NORMALMAP_OBJECTSPACE\\n\\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\tnormal = normalize( tbn * mapN );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\",normal_pars_fragment:\"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\",normal_pars_vertex:\"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\",normal_vertex:\"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef USE_NORMALMAP_OBJECTSPACE\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\\n\\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( uv.st );\\n\\t\\tvec2 st1 = dFdy( uv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\\n\\t\\treturn mat3( T * scale, B * scale, N );\\n\\t}\\n#endif\",clearcoat_normal_fragment_begin:\"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = nonPerturbedNormal;\\n#endif\",clearcoat_normal_fragment_maps:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\\n#endif\",clearcoat_pars_fragment:\"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\",iridescence_pars_fragment:\"#ifdef USE_IRIDESCENCEMAP\\n\\tuniform sampler2D iridescenceMap;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform sampler2D iridescenceThicknessMap;\\n#endif\",opaque_fragment:\"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= material.transmissionAlpha;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\\nconst float Inv255 = 1. / 255.;\\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tif( v <= 0.0 )\\n\\t\\treturn vec4( 0., 0., 0., 0. );\\n\\tif( v >= 1.0 )\\n\\t\\treturn vec4( 1., 1., 1., 1. );\\n\\tfloat vuf;\\n\\tfloat af = modf( v * PackFactors.a, vuf );\\n\\tfloat bf = modf( vuf * ShiftRight8, vuf );\\n\\tfloat gf = modf( vuf * ShiftRight8, vuf );\\n\\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\\n}\\nvec3 packDepthToRGB( const in float v ) {\\n\\tif( v <= 0.0 )\\n\\t\\treturn vec3( 0., 0., 0. );\\n\\tif( v >= 1.0 )\\n\\t\\treturn vec3( 1., 1., 1. );\\n\\tfloat vuf;\\n\\tfloat bf = modf( v * PackFactors.b, vuf );\\n\\tfloat gf = modf( vuf * ShiftRight8, vuf );\\n\\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\\n}\\nvec2 packDepthToRG( const in float v ) {\\n\\tif( v <= 0.0 )\\n\\t\\treturn vec2( 0., 0. );\\n\\tif( v >= 1.0 )\\n\\t\\treturn vec2( 1., 1. );\\n\\tfloat vuf;\\n\\tfloat gf = modf( v * 256., vuf );\\n\\treturn vec2( vuf * Inv255, gf );\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors4 );\\n}\\nfloat unpackRGBToDepth( const in vec3 v ) {\\n\\treturn dot( v, UnpackFactors3 );\\n}\\nfloat unpackRGToDepth( const in vec2 v ) {\\n\\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\\n}\\nvec4 pack2HalfToRGBA( const in vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( const in vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\\n\\treturn depth * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * depth - far );\\n}\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_BATCHING\\n\\tmvPosition = batchingMatrix * mvPosition;\\n#endif\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#if NUM_SPOT_LIGHT_COORDS > 0\\n\\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#if NUM_SPOT_LIGHT_MAPS > 0\\n\\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowIntensity;\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowIntensity;\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowIntensity;\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\\n\\t\\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn mix( 1.0, shadow, shadowIntensity );\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\t\\n\\t\\tfloat lightToPositionLength = length( lightToPosition );\\n\\t\\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\\n\\t\\t\\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\t\\tdp += shadowBias;\\n\\t\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\t\\tshadow = (\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn mix( 1.0, shadow, shadowIntensity );\\n\\t}\\n#endif\",shadowmap_pars_vertex:\"#if NUM_SPOT_LIGHT_COORDS > 0\\n\\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\\n\\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowIntensity;\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowIntensity;\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowIntensity;\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\",shadowmap_vertex:\"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\\n\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\tvec4 shadowWorldPosition;\\n#endif\\n#if defined( USE_SHADOWMAP )\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if NUM_SPOT_LIGHT_COORDS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition;\\n\\t\\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t\\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\\n\\t\\t#endif\\n\\t\\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\tuniform highp sampler2D boneTexture;\\n\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\tint size = textureSize( boneTexture, 0 ).x;\\n\\t\\tint j = int( i ) * 4;\\n\\t\\tint x = j % size;\\n\\t\\tint y = j / size;\\n\\t\\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\\n\\t\\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\\n\\t\\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\\n\\t\\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\\n\\t\\treturn mat4( v1, v2, v3, v4 );\\n\\t}\\n#endif\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn saturate( toneMappingExposure * color );\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 CineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\\n\\tvec3( 1.6605, - 0.1246, - 0.0182 ),\\n\\tvec3( - 0.5876, 1.1329, - 0.1006 ),\\n\\tvec3( - 0.0728, - 0.0083, 1.1187 )\\n);\\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\\n\\tvec3( 0.6274, 0.0691, 0.0164 ),\\n\\tvec3( 0.3293, 0.9195, 0.0880 ),\\n\\tvec3( 0.0433, 0.0113, 0.8956 )\\n);\\nvec3 agxDefaultContrastApprox( vec3 x ) {\\n\\tvec3 x2 = x * x;\\n\\tvec3 x4 = x2 * x2;\\n\\treturn + 15.5 * x4 * x2\\n\\t\\t- 40.14 * x4 * x\\n\\t\\t+ 31.96 * x4\\n\\t\\t- 6.868 * x2 * x\\n\\t\\t+ 0.4298 * x2\\n\\t\\t+ 0.1191 * x\\n\\t\\t- 0.00232;\\n}\\nvec3 AgXToneMapping( vec3 color ) {\\n\\tconst mat3 AgXInsetMatrix = mat3(\\n\\t\\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\\n\\t\\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\\n\\t\\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\\n\\t);\\n\\tconst mat3 AgXOutsetMatrix = mat3(\\n\\t\\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\\n\\t\\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\\n\\t\\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\\n\\t);\\n\\tconst float AgxMinEv = - 12.47393;\\tconst float AgxMaxEv = 4.026069;\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\\n\\tcolor = AgXInsetMatrix * color;\\n\\tcolor = max( color, 1e-10 );\\tcolor = log2( color );\\n\\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\\n\\tcolor = clamp( color, 0.0, 1.0 );\\n\\tcolor = agxDefaultContrastApprox( color );\\n\\tcolor = AgXOutsetMatrix * color;\\n\\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\\n\\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\\n\\tcolor = clamp( color, 0.0, 1.0 );\\n\\treturn color;\\n}\\nvec3 NeutralToneMapping( vec3 color ) {\\n\\tconst float StartCompression = 0.8 - 0.04;\\n\\tconst float Desaturation = 0.15;\\n\\tcolor *= toneMappingExposure;\\n\\tfloat x = min( color.r, min( color.g, color.b ) );\\n\\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\\n\\tcolor -= offset;\\n\\tfloat peak = max( color.r, max( color.g, color.b ) );\\n\\tif ( peak < StartCompression ) return color;\\n\\tfloat d = 1. - StartCompression;\\n\\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\\n\\tcolor *= newPeak / peak;\\n\\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\\n\\treturn mix( color, vec3( newPeak ), g );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\",transmission_fragment:\"#ifdef USE_TRANSMISSION\\n\\tmaterial.transmission = transmission;\\n\\tmaterial.transmissionAlpha = 1.0;\\n\\tmaterial.thickness = thickness;\\n\\tmaterial.attenuationDistance = attenuationDistance;\\n\\tmaterial.attenuationColor = attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmitted = getIBLVolumeRefraction(\\n\\t\\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\\n\\t\\tmaterial.attenuationColor, material.attenuationDistance );\\n\\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\\n\\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\\n#endif\",transmission_pars_fragment:\"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tfloat w0( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\\n\\t}\\n\\tfloat w1( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\\n\\t}\\n\\tfloat w2( float a ){\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\\n\\t}\\n\\tfloat w3( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * a * a );\\n\\t}\\n\\tfloat g0( float a ) {\\n\\t\\treturn w0( a ) + w1( a );\\n\\t}\\n\\tfloat g1( float a ) {\\n\\t\\treturn w2( a ) + w3( a );\\n\\t}\\n\\tfloat h0( float a ) {\\n\\t\\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\\n\\t}\\n\\tfloat h1( float a ) {\\n\\t\\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\\n\\t}\\n\\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\\n\\t\\tuv = uv * texelSize.zw + 0.5;\\n\\t\\tvec2 iuv = floor( uv );\\n\\t\\tvec2 fuv = fract( uv );\\n\\t\\tfloat g0x = g0( fuv.x );\\n\\t\\tfloat g1x = g1( fuv.x );\\n\\t\\tfloat h0x = h0( fuv.x );\\n\\t\\tfloat h1x = h1( fuv.x );\\n\\t\\tfloat h0y = h0( fuv.y );\\n\\t\\tfloat h1y = h1( fuv.y );\\n\\t\\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\\n\\t\\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\\n\\t\\t\\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\\n\\t}\\n\\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\\n\\t\\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\\n\\t\\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\\n\\t\\tvec2 fLodSizeInv = 1.0 / fLodSize;\\n\\t\\tvec2 cLodSizeInv = 1.0 / cLodSize;\\n\\t\\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\\n\\t\\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\\n\\t\\treturn mix( fSample, cSample, fract( lod ) );\\n\\t}\\n\\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\\n\\t\\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\\n\\t}\\n\\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tif ( isinf( attenuationDistance ) ) {\\n\\t\\t\\treturn vec3( 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\\n\\t\\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\\n\\t\\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\\n\\t\\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tvec4 transmittedLight;\\n\\t\\tvec3 transmittance;\\n\\t\\t#ifdef USE_DISPERSION\\n\\t\\t\\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\\n\\t\\t\\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\\n\\t\\t\\tfor ( int i = 0; i < 3; i ++ ) {\\n\\t\\t\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\\n\\t\\t\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\t\\n\\t\\t\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\t\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\t\\t\\trefractionCoords += 1.0;\\n\\t\\t\\t\\trefractionCoords /= 2.0;\\n\\t\\t\\n\\t\\t\\t\\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\\n\\t\\t\\t\\ttransmittedLight[ i ] = transmissionSample[ i ];\\n\\t\\t\\t\\ttransmittedLight.a += transmissionSample.a;\\n\\t\\t\\t\\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\\n\\t\\t\\t}\\n\\t\\t\\ttransmittedLight.a /= 3.0;\\n\\t\\t\\n\\t\\t#else\\n\\t\\t\\n\\t\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\t\\trefractionCoords += 1.0;\\n\\t\\t\\trefractionCoords /= 2.0;\\n\\t\\t\\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\t\\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\t\\n\\t\\t#endif\\n\\t\\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\\n\\t}\\n#endif\",uv_pars_fragment:\"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvarying vec2 vUv;\\n#endif\\n#ifdef USE_MAP\\n\\tvarying vec2 vMapUv;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tvarying vec2 vAlphaMapUv;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tvarying vec2 vLightMapUv;\\n#endif\\n#ifdef USE_AOMAP\\n\\tvarying vec2 vAoMapUv;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tvarying vec2 vBumpMapUv;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tvarying vec2 vNormalMapUv;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tvarying vec2 vEmissiveMapUv;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tvarying vec2 vMetalnessMapUv;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tvarying vec2 vRoughnessMapUv;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tvarying vec2 vAnisotropyMapUv;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tvarying vec2 vClearcoatMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvarying vec2 vClearcoatNormalMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tvarying vec2 vClearcoatRoughnessMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tvarying vec2 vIridescenceMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tvarying vec2 vIridescenceThicknessMapUv;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tvarying vec2 vSheenColorMapUv;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tvarying vec2 vSheenRoughnessMapUv;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tvarying vec2 vSpecularMapUv;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tvarying vec2 vSpecularColorMapUv;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tvarying vec2 vSpecularIntensityMapUv;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tuniform mat3 transmissionMapTransform;\\n\\tvarying vec2 vTransmissionMapUv;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tuniform mat3 thicknessMapTransform;\\n\\tvarying vec2 vThicknessMapUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvarying vec2 vUv;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform mat3 mapTransform;\\n\\tvarying vec2 vMapUv;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform mat3 alphaMapTransform;\\n\\tvarying vec2 vAlphaMapUv;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tuniform mat3 lightMapTransform;\\n\\tvarying vec2 vLightMapUv;\\n#endif\\n#ifdef USE_AOMAP\\n\\tuniform mat3 aoMapTransform;\\n\\tvarying vec2 vAoMapUv;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tuniform mat3 bumpMapTransform;\\n\\tvarying vec2 vBumpMapUv;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tuniform mat3 normalMapTransform;\\n\\tvarying vec2 vNormalMapUv;\\n#endif\\n#ifdef USE_DISPLACEMENTMAP\\n\\tuniform mat3 displacementMapTransform;\\n\\tvarying vec2 vDisplacementMapUv;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tuniform mat3 emissiveMapTransform;\\n\\tvarying vec2 vEmissiveMapUv;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tuniform mat3 metalnessMapTransform;\\n\\tvarying vec2 vMetalnessMapUv;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tuniform mat3 roughnessMapTransform;\\n\\tvarying vec2 vRoughnessMapUv;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tuniform mat3 anisotropyMapTransform;\\n\\tvarying vec2 vAnisotropyMapUv;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tuniform mat3 clearcoatMapTransform;\\n\\tvarying vec2 vClearcoatMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform mat3 clearcoatNormalMapTransform;\\n\\tvarying vec2 vClearcoatNormalMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform mat3 clearcoatRoughnessMapTransform;\\n\\tvarying vec2 vClearcoatRoughnessMapUv;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tuniform mat3 sheenColorMapTransform;\\n\\tvarying vec2 vSheenColorMapUv;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tuniform mat3 sheenRoughnessMapTransform;\\n\\tvarying vec2 vSheenRoughnessMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tuniform mat3 iridescenceMapTransform;\\n\\tvarying vec2 vIridescenceMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform mat3 iridescenceThicknessMapTransform;\\n\\tvarying vec2 vIridescenceThicknessMapUv;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tuniform mat3 specularMapTransform;\\n\\tvarying vec2 vSpecularMapUv;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tuniform mat3 specularColorMapTransform;\\n\\tvarying vec2 vSpecularColorMapUv;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tuniform mat3 specularIntensityMapTransform;\\n\\tvarying vec2 vSpecularIntensityMapUv;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tuniform mat3 transmissionMapTransform;\\n\\tvarying vec2 vTransmissionMapUv;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tuniform mat3 thicknessMapTransform;\\n\\tvarying vec2 vThicknessMapUv;\\n#endif\",uv_vertex:\"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvUv = vec3( uv, 1 ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_AOMAP\\n\\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_DISPLACEMENTMAP\\n\\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_BATCHING\\n\\t\\tworldPosition = batchingMatrix * worldPosition;\\n\\t#endif\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",background_frag:\"uniform sampler2D t2D;\\nuniform float backgroundIntensity;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\",backgroundCube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",backgroundCube_frag:\"#ifdef ENVMAP_TYPE_CUBE\\n\\tuniform samplerCube envMap;\\n#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\tuniform sampler2D envMap;\\n#endif\\nuniform float flipEnvMap;\\nuniform float backgroundBlurriness;\\nuniform float backgroundIntensity;\\nuniform mat3 backgroundRotation;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\\n\\t#else\\n\\t\\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = texColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\",depth_vert:\"#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <clipping_planes_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#elif DEPTH_PACKING == 3202\\n\\t\\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\\n\\t#elif DEPTH_PACKING == 3203\\n\\t\\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\\n\\t#endif\\n}\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",equirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",meshbasic_vert:\"#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshlambert_frag:\"#define LAMBERT\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_lambert_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_lambert_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",meshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",meshnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\\n\\t#ifdef OPAQUE\\n\\t\\tgl_FragColor.a = 1.0;\\n\\t#endif\\n}\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphysical_vert:\"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\",meshphysical_frag:\"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define USE_SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef USE_SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULAR_COLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULAR_INTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_DISPERSION\\n\\tuniform float dispersion;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tuniform float iridescence;\\n\\tuniform float iridescenceIOR;\\n\\tuniform float iridescenceThicknessMinimum;\\n\\tuniform float iridescenceThicknessMaximum;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEEN_COLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\n#ifdef USE_ANISOTROPY\\n\\tuniform vec2 anisotropyVector;\\n\\t#ifdef USE_ANISOTROPYMAP\\n\\t\\tuniform sampler2D anisotropyMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <iridescence_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <iridescence_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\\n\\t#endif\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshtoon_vert:\"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <batching_pars_vertex>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshtoon_frag:\"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n#ifdef USE_POINTS_UV\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\nvoid main() {\\n\\t#ifdef USE_POINTS_UV\\n\\t\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\t#endif\\n\\t#include <color_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",shadow_vert:\"#include <common>\\n#include <batching_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <batching_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphinstance_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <logdepthbuf_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n}\",sprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix[ 3 ];\\n\\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",sprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n}\"},Dn={common:{diffuse:{value:new e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new t},alphaMap:{value:null},alphaMapTransform:{value:new t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new t}},envmap:{envMap:{value:null},envMapRotation:{value:new t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new t},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new t},alphaTest:{value:0},uvTransform:{value:new t}},sprite:{diffuse:{value:new e(16777215)},opacity:{value:1},center:{value:new n(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new t},alphaMap:{value:null},alphaMapTransform:{value:new t},alphaTest:{value:0}}},yn={basic:{uniforms:i([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:i([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,Dn.lights,{emissive:{value:new e(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:i([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,Dn.lights,{emissive:{value:new e(0)},specular:{value:new e(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:i([Dn.common,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.roughnessmap,Dn.metalnessmap,Dn.fog,Dn.lights,{emissive:{value:new e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:i([Dn.common,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.gradientmap,Dn.fog,Dn.lights,{emissive:{value:new e(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:i([Dn.common,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:i([Dn.points,Dn.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:i([Dn.common,Dn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:i([Dn.common,Dn.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:i([Dn.common,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:i([Dn.sprite,Dn.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new t}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:i([Dn.common,Dn.displacementmap,{referencePosition:{value:new r},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:i([Dn.lights,Dn.fog,{color:{value:new e(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};yn.physical={uniforms:i([yn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new t},clearcoatNormalScale:{value:new n(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new t},sheen:{value:0},sheenColor:{value:new e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new t},transmissionSamplerSize:{value:new n},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new t},attenuationDistance:{value:0},attenuationColor:{value:new e(0)},specularColor:{value:new e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new t},anisotropyVector:{value:new n},anisotropyMap:{value:null},anisotropyMapTransform:{value:new t}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};const In={r:0,b:0,g:0},Nn=new _,On=new g;function Fn(t,n,i,r,_,g,v){const E=new e(0);let S,T,M=!0===g?0:1,x=null,R=0,A=null;function b(e){let t=!0===e.isScene?e.background:null;if(t&&t.isTexture){t=(e.backgroundBlurriness>0?i:n).get(t)}return t}function C(e,n){e.getRGB(In,h(t)),r.buffers.color.setClear(In.r,In.g,In.b,n,v)}return{getClearColor:function(){return E},setClearColor:function(e,t=1){E.set(e),M=t,C(E,M)},getClearAlpha:function(){return M},setClearAlpha:function(e){M=e,C(E,M)},render:function(e){let n=!1;const i=b(e);null===i?C(E,M):i&&i.isColor&&(C(i,1),n=!0);const a=t.xr.getEnvironmentBlendMode();\"additive\"===a?r.buffers.color.setClear(0,0,0,1,v):\"alpha-blend\"===a&&r.buffers.color.setClear(0,0,0,0,v),(t.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,n){const i=b(n);i&&(i.isCubeTexture||i.mapping===a)?(void 0===T&&(T=new o(new s(1,1,1),new l({name:\"BackgroundCubeMaterial\",uniforms:c(yn.backgroundCube.uniforms),vertexShader:yn.backgroundCube.vertexShader,fragmentShader:yn.backgroundCube.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),T.geometry.deleteAttribute(\"normal\"),T.geometry.deleteAttribute(\"uv\"),T.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(T.material,\"envMap\",{get:function(){return this.uniforms.envMap.value}}),_.update(T)),Nn.copy(n.backgroundRotation),Nn.x*=-1,Nn.y*=-1,Nn.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Nn.y*=-1,Nn.z*=-1),T.material.uniforms.envMap.value=i,T.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,T.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,T.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,T.material.uniforms.backgroundRotation.value.setFromMatrix4(On.makeRotationFromEuler(Nn)),T.material.toneMapped=u.getTransfer(i.colorSpace)!==f,x===i&&R===i.version&&A===t.toneMapping||(T.material.needsUpdate=!0,x=i,R=i.version,A=t.toneMapping),T.layers.enableAll(),e.unshift(T,T.geometry,T.material,0,0,null)):i&&i.isTexture&&(void 0===S&&(S=new o(new p(2,2),new l({name:\"BackgroundMaterial\",uniforms:c(yn.background.uniforms),vertexShader:yn.background.vertexShader,fragmentShader:yn.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute(\"normal\"),Object.defineProperty(S.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),_.update(S)),S.material.uniforms.t2D.value=i,S.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,S.material.toneMapped=u.getTransfer(i.colorSpace)!==f,!0===i.matrixAutoUpdate&&i.updateMatrix(),S.material.uniforms.uvTransform.value.copy(i.matrix),x===i&&R===i.version&&A===t.toneMapping||(S.material.needsUpdate=!0,x=i,R=i.version,A=t.toneMapping),S.layers.enableAll(),e.unshift(S,S.geometry,S.material,0,0,null))},dispose:function(){void 0!==T&&(T.geometry.dispose(),T.material.dispose()),void 0!==S&&(S.geometry.dispose(),S.material.dispose())}}}function Bn(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=c(null);let a=r,o=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],i=[],r=[];for(let e=0;e<n;e++)t[e]=0,i[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){const e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function u(e){f(e,0)}function f(t,n){const i=a.newAttributes,r=a.enabledAttributes,o=a.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function p(){const t=a.newAttributes,n=a.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function m(t,n,i,r,a,o,s){!0===s?e.vertexAttribIPointer(t,n,i,a,o):e.vertexAttribPointer(t,n,i,r,a,o)}function h(){_(),o=!0,a!==r&&(a=r,s(a.object))}function _(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,h,_){let g=!1;const E=function(t,n,r){const a=!0===r.wireframe;let o=i[t.id];void 0===o&&(o={},i[t.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];void 0===l&&(l=c(e.createVertexArray()),s[a]=l);return l}(h,l,r);a!==E&&(a=E,s(a.object)),g=function(e,t,n,i){const r=a.attributes,o=t.attributes;let s=0;const l=n.getAttributes();for(const t in l){if(l[t].location>=0){const n=r[t];let i=o[t];if(void 0===i&&(\"instanceMatrix\"===t&&e.instanceMatrix&&(i=e.instanceMatrix),\"instanceColor\"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;s++}}return a.attributesNum!==s||a.index!==i}(n,h,l,_),g&&function(e,t,n,i){const r={},o=t.attributes;let s=0;const l=n.getAttributes();for(const t in l){if(l[t].location>=0){let n=o[t];void 0===n&&(\"instanceMatrix\"===t&&e.instanceMatrix&&(n=e.instanceMatrix),\"instanceColor\"===t&&e.instanceColor&&(n=e.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[t]=i,s++}}a.attributes=r,a.attributesNum=s,a.index=i}(n,h,l,_),null!==_&&t.update(_,e.ELEMENT_ARRAY_BUFFER),(g||o)&&(o=!1,function(n,i,r,a){d();const o=a.attributes,s=r.getAttributes(),l=i.defaultAttributeValues;for(const i in s){const r=s[i];if(r.location>=0){let s=o[i];if(void 0===s&&(\"instanceMatrix\"===i&&n.instanceMatrix&&(s=n.instanceMatrix),\"instanceColor\"===i&&n.instanceColor&&(s=n.instanceColor)),void 0!==s){const i=s.normalized,o=s.itemSize,l=t.get(s);if(void 0===l)continue;const c=l.buffer,d=l.type,p=l.bytesPerElement,h=d===e.INT||d===e.UNSIGNED_INT||s.gpuType===v;if(s.isInterleavedBufferAttribute){const t=s.data,l=t.stride,_=s.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)f(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)u(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,o/r.locationSize,d,i,l*p,(_+o/r.locationSize*e)*p,h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)f(r.location+e,s.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)u(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,o/r.locationSize,d,i,o*p,o/r.locationSize*e*p,h)}}else if(void 0!==l){const t=l[i];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(n,r,l,h),null!==_&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(_).buffer))},reset:h,resetDefaultState:_,dispose:function(){h();for(const e in i){const t=i[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;const t=i[e.id];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e.id]},releaseStatesOfProgram:function(e){for(const t in i){const n=i[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)l(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:u,disableUnusedAttributes:p}}function Hn(e,t,n){let i;function r(t,r,a){0!==a&&(e.drawArraysInstanced(i,t,r,a),n.update(r,i,a))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,a){if(0===a)return;t.get(\"WEBGL_multi_draw\").multiDrawArraysWEBGL(i,e,0,r,0,a);let o=0;for(let e=0;e<a;e++)o+=r[e];n.update(o,i,1)},this.renderMultiDrawInstances=function(e,a,o,s){if(0===o)return;const l=t.get(\"WEBGL_multi_draw\");if(null===l)for(let t=0;t<e.length;t++)r(e[t],a[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,a,0,s,0,o);let t=0;for(let e=0;e<o;e++)t+=a[e]*s[e];n.update(t,i,1)}}}function Gn(e,t,n,i){let r;function a(t){if(\"highp\"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return\"highp\";t=\"mediump\"}return\"mediump\"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?\"mediump\":\"lowp\"}let o=void 0!==n.precision?n.precision:\"highp\";const s=a(o);s!==o&&(console.warn(\"THREE.WebGLRenderer:\",o,\"not supported, using\",s,\"instead.\"),o=s);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has(\"EXT_clip_control\"),d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has(\"EXT_texture_filter_anisotropic\")){const n=t.get(\"EXT_texture_filter_anisotropic\");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,textureFormatReadable:function(t){return t===E||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===S&&(t.has(\"EXT_color_buffer_half_float\")||t.has(\"EXT_color_buffer_float\"));return!(n!==T&&i.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==M&&!r)},precision:o,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:d,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Vn(e){const n=this;let i=null,r=0,a=!1,o=!1;const s=new x,l=new t,c={value:null,needsUpdate:!1};function d(e,t,i,r){const a=null!==e?e.length:0;let o=null;if(0!==a){if(o=c.value,!0!==r||null===o){const n=i+4*a,r=t.matrixWorldInverse;l.getNormalMatrix(r),(null===o||o.length<n)&&(o=new Float32Array(n));for(let t=0,n=i;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(r,l),s.normal.toArray(o,n),o[n+3]=s.constant}c.value=o,c.needsUpdate=!0}return n.numPlanes=a,n.numIntersection=0,o}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||a;return a=t,r=e.length,n},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){i=d(e,t,0)},this.setState=function(t,s,l){const u=t.clippingPlanes,f=t.clipIntersection,p=t.clipShadows,m=e.get(t);if(!a||null===u||0===u.length||o&&!p)o?d(null):function(){c.value!==i&&(c.value=i,c.needsUpdate=r>0);n.numPlanes=r,n.numIntersection=0}();else{const e=o?0:r,t=4*e;let n=m.clippingState||null;c.value=n,n=d(u,s,t,l);for(let e=0;e!==t;++e)n[e]=i[e];m.clippingState=n,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=e}}}function zn(e){let t=new WeakMap;function n(e,t){return t===R?e.mapping=C:t===A&&(e.mapping=L),e}function i(e){const n=e.target;n.removeEventListener(\"dispose\",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(a===R||a===A){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const o=new b(a.height);return o.fromEquirectangularTexture(e,r),t.set(r,o),r.addEventListener(\"dispose\",i),n(o.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}const kn=[.125,.215,.35,.446,.526,.582],Wn=20,Xn=new O,Yn=new e;let jn=null,Kn=0,qn=0,Zn=!1;const $n=(1+Math.sqrt(5))/2,Qn=1/$n,Jn=[new r(-$n,Qn,0),new r($n,Qn,0),new r(-Qn,0,$n),new r(Qn,0,$n),new r(0,$n,-Qn),new r(0,$n,Qn),new r(-1,1,-1),new r(1,1,-1),new r(-1,1,1),new r(1,1,1)];class ei{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){jn=this._renderer.getRenderTarget(),Kn=this._renderer.getActiveCubeFace(),qn=this._renderer.getActiveMipmapLevel(),Zn=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ri(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ii(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jn,Kn,qn),this._renderer.xr.enabled=Zn,e.scissorTest=!1,ni(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===C||e.mapping===L?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jn=this._renderer.getRenderTarget(),Kn=this._renderer.getActiveCubeFace(),qn=this._renderer.getActiveMipmapLevel(),Zn=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:F,minFilter:F,generateMipmaps:!1,type:S,format:E,colorSpace:B,depthBuffer:!1},i=ti(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ti(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const a=e-4+1+kn.length;for(let o=0;o<a;o++){const a=Math.pow(2,r);n.push(a);let s=1/a;o>e-4?s=kn[o-e+4-1]:0===o&&(s=0),i.push(s);const l=1/(a-2),c=-l,d=1+l,u=[c,c,d,c,d,d,c,c,d,d,c,d],f=6,p=6,m=3,h=2,_=1,g=new Float32Array(m*p*f),v=new Float32Array(h*p*f),E=new Float32Array(_*p*f);for(let e=0;e<f;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,m*p*e),v.set(u,h*p*e);const r=[e,e,e,e,e,e];E.set(r,_*p*e)}const S=new D;S.setAttribute(\"position\",new y(g,m)),S.setAttribute(\"uv\",new y(v,h)),S.setAttribute(\"faceIndex\",new y(E,_)),t.push(S),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(Wn),a=new r(0,1,0),o=new l({name:\"SphericalGaussianBlur\",defines:{n:Wn,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:ai(),fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform int samples;\\n\\t\\t\\tuniform float weights[ n ];\\n\\t\\t\\tuniform bool latitudinal;\\n\\t\\t\\tuniform float dTheta;\\n\\t\\t\\tuniform float mipInt;\\n\\t\\t\\tuniform vec3 poleAxis;\\n\\n\\t\\t\\t#define ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t#include <cube_uv_reflection_fragment>\\n\\n\\t\\t\\tvec3 getSample( float theta, vec3 axis ) {\\n\\n\\t\\t\\t\\tfloat cosTheta = cos( theta );\\n\\t\\t\\t\\t// Rodrigues' axis-angle rotation\\n\\t\\t\\t\\tvec3 sampleDirection = vOutputDirection * cosTheta\\n\\t\\t\\t\\t\\t+ cross( axis, vOutputDirection ) * sin( theta )\\n\\t\\t\\t\\t\\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\\n\\n\\t\\t\\t\\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\\n\\n\\t\\t\\t\\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\\n\\n\\t\\t\\t\\t\\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\taxis = normalize( axis );\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t\\t\\t\\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\\n\\n\\t\\t\\t\\tfor ( int i = 1; i < n; i++ ) {\\n\\n\\t\\t\\t\\t\\tif ( i >= samples ) {\\n\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tfloat theta = dTheta * float( i );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\t\\t\",blending:N,depthTest:!1,depthWrite:!1});return o}(i,e,t)}return i}_compileMaterial(e){const t=new o(this._lodPlanes[0],e);this._renderer.compile(t,Xn)}_sceneToCubeUV(e,t,n,i){const r=new P(90,1,t,n),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,f=c.toneMapping;c.getClearColor(Yn),c.toneMapping=U,c.autoClear=!1;const p=new w({name:\"PMREM.Background\",side:d,depthWrite:!1,depthTest:!1}),m=new o(new s,p);let h=!1;const _=e.background;_?_.isColor&&(p.color.copy(_),e.background=null,h=!0):(p.color.copy(Yn),h=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(r.up.set(0,a[t],0),r.lookAt(l[t],0,0)):1===n?(r.up.set(0,0,a[t]),r.lookAt(0,l[t],0)):(r.up.set(0,a[t],0),r.lookAt(0,0,l[t]));const o=this._cubeSize;ni(i,n*o,t>2?o:0,o,o),c.setRenderTarget(i),h&&c.render(m,r),c.render(e,r)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=f,c.autoClear=u,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===C||e.mapping===L;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=ri()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ii());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new o(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;ni(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,Xn)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let t=1;t<i;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=Jn[(i-t-1)%Jn.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,\"latitudinal\",r),this._halfBlur(a,e,n,n,i,\"longitudinal\",r)}_halfBlur(e,t,n,i,r,a,s){const l=this._renderer,c=this._blurMaterial;\"latitudinal\"!==a&&\"longitudinal\"!==a&&console.error(\"blur direction must be either latitudinal or longitudinal!\");const d=new o(this._lodPlanes[i],c),u=c.uniforms,f=this._sizeLods[n]-1,p=isFinite(r)?Math.PI/(2*f):2*Math.PI/39,m=r/p,h=isFinite(r)?1+Math.floor(3*m):Wn;h>Wn&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${h} samples when the maximum is set to 20`);const _=[];let g=0;for(let e=0;e<Wn;++e){const t=e/m,n=Math.exp(-t*t/2);_.push(n),0===e?g+=n:e<h&&(g+=2*n)}for(let e=0;e<_.length;e++)_[e]=_[e]/g;u.envMap.value=e.texture,u.samples.value=h,u.weights.value=_,u.latitudinal.value=\"latitudinal\"===a,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=p,u.mipInt.value=v-n;const E=this._sizeLods[i];ni(t,3*E*(i>v-4?i-v+4:0),4*(this._cubeSize-E),3*E,2*E),l.setRenderTarget(t),l.render(d,Xn)}}function ti(e,t,n){const i=new I(e,t,n);return i.texture.mapping=a,i.texture.name=\"PMREM.cubeUv\",i.scissorTest=!0,i}function ni(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function ii(){return new l({name:\"EquirectangularToCubeUV\",uniforms:{envMap:{value:null}},vertexShader:ai(),fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\n\\t\\t\\t#include <common>\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 outputDirection = normalize( vOutputDirection );\\n\\t\\t\\t\\tvec2 uv = equirectUv( outputDirection );\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\\n\\n\\t\\t\\t}\\n\\t\\t\",blending:N,depthTest:!1,depthWrite:!1})}function ri(){return new l({name:\"CubemapToCubeUV\",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ai(),fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tuniform float flipEnvMap;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform samplerCube envMap;\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\\n\\n\\t\\t\\t}\\n\\t\\t\",blending:N,depthTest:!1,depthWrite:!1})}function ai(){return\"\\n\\n\\t\\tprecision mediump float;\\n\\t\\tprecision mediump int;\\n\\n\\t\\tattribute float faceIndex;\\n\\n\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t// RH coordinate system; PMREM face-indexing convention\\n\\t\\tvec3 getDirection( vec2 uv, float face ) {\\n\\n\\t\\t\\tuv = 2.0 * uv - 1.0;\\n\\n\\t\\t\\tvec3 direction = vec3( uv, 1.0 );\\n\\n\\t\\t\\tif ( face == 0.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx; // ( 1, v, u ) pos x\\n\\n\\t\\t\\t} else if ( face == 1.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\\n\\n\\t\\t\\t} else if ( face == 2.0 ) {\\n\\n\\t\\t\\t\\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\\n\\n\\t\\t\\t} else if ( face == 3.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\\n\\n\\t\\t\\t} else if ( face == 4.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\\n\\n\\t\\t\\t} else if ( face == 5.0 ) {\\n\\n\\t\\t\\t\\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn direction;\\n\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvOutputDirection = getDirection( uv, faceIndex );\\n\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t}\\n\\t\"}function oi(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener(\"dispose\",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,o=a===R||a===A,s=a===C||a===L;if(o||s){let a=t.get(r);const l=void 0!==a?a.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new ei(e)),a=o?n.fromEquirectangular(r,a):n.fromCubemap(r,a),a.texture.pmremVersion=r.pmremVersion,t.set(r,a),a.texture;if(void 0!==a)return a.texture;{const l=r.image;return o&&l&&l.height>0||s&&l&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(l)?(null===n&&(n=new ei(e)),a=o?n.fromEquirectangular(r):n.fromCubemap(r),a.texture.pmremVersion=r.pmremVersion,t.set(r,a),r.addEventListener(\"dispose\",i),a.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function si(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case\"WEBGL_depth_texture\":i=e.getExtension(\"WEBGL_depth_texture\")||e.getExtension(\"MOZ_WEBGL_depth_texture\")||e.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":i=e.getExtension(\"EXT_texture_filter_anisotropic\")||e.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||e.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":i=e.getExtension(\"WEBGL_compressed_texture_s3tc\")||e.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||e.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":i=e.getExtension(\"WEBGL_compressed_texture_pvrtc\")||e.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n(\"EXT_color_buffer_float\"),n(\"WEBGL_clip_cull_distance\"),n(\"OES_texture_float_linear\"),n(\"EXT_color_buffer_half_float\"),n(\"WEBGL_multisampled_render_to_texture\"),n(\"WEBGL_render_shared_exponent\")},get:function(e){const t=n(e);return null===t&&H(\"THREE.WebGLRenderer: \"+e+\" extension not supported.\"),t}}}function li(e,t,n,i){const r={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener(\"dispose\",o),delete r[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let o=0;if(null!==i){const e=i.array;o=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;o=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const s=new(G(n)?V:z)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener(\"dispose\",o),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const n in i)t.update(i[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function ci(e,t,n){let i,r,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(i,o,r,t*a,s),n.update(o,i,s))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(i,o,r,t*a),n.update(o,i,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0===o)return;t.get(\"WEBGL_multi_draw\").multiDrawElementsWEBGL(i,a,0,r,e,0,o);let s=0;for(let e=0;e<o;e++)s+=a[e];n.update(s,i,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const d=t.get(\"WEBGL_multi_draw\");if(null===d)for(let t=0;t<e.length;t++)o(e[t]/a,s[t],c[t]);else{d.multiDrawElementsInstancedWEBGL(i,s,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*c[e];n.update(t,i,1)}}}function di(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",i)}}}}function ui(e,t,i){const r=new WeakMap,a=new k;return{update:function(o,s,l){const c=o.morphTargetInfluences,d=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,u=void 0!==d?d.length:0;let f=r.get(s);if(void 0===f||f.count!==u){void 0!==f&&f.texture.dispose();const p=void 0!==s.morphAttributes.position,m=void 0!==s.morphAttributes.normal,h=void 0!==s.morphAttributes.color,_=s.morphAttributes.position||[],g=s.morphAttributes.normal||[],v=s.morphAttributes.color||[];let E=0;!0===p&&(E=1),!0===m&&(E=2),!0===h&&(E=3);let S=s.attributes.position.count*E,T=1;S>t.maxTextureSize&&(T=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);const x=new Float32Array(S*T*4*u),R=new W(x,S,T,u);R.type=M,R.needsUpdate=!0;const A=4*E;for(let C=0;C<u;C++){const L=_[C],P=g[C],U=v[C],w=S*T*4*C;for(let D=0;D<L.count;D++){const y=D*A;!0===p&&(a.fromBufferAttribute(L,D),x[w+y+0]=a.x,x[w+y+1]=a.y,x[w+y+2]=a.z,x[w+y+3]=0),!0===m&&(a.fromBufferAttribute(P,D),x[w+y+4]=a.x,x[w+y+5]=a.y,x[w+y+6]=a.z,x[w+y+7]=0),!0===h&&(a.fromBufferAttribute(U,D),x[w+y+8]=a.x,x[w+y+9]=a.y,x[w+y+10]=a.z,x[w+y+11]=4===U.itemSize?a.w:1)}}function b(){R.dispose(),r.delete(s),s.removeEventListener(\"dispose\",b)}f={count:u,texture:R,size:new n(S,T)},r.set(s,f),s.addEventListener(\"dispose\",b)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(e,\"morphTexture\",o.morphTexture,i);else{let I=0;for(let O=0;O<c.length;O++)I+=c[O];const N=s.morphTargetsRelative?1:1-I;l.getUniforms().setValue(e,\"morphTargetBaseInfluence\",N),l.getUniforms().setValue(e,\"morphTargetInfluences\",c)}l.getUniforms().setValue(e,\"morphTargetsTexture\",f.texture,i),l.getUniforms().setValue(e,\"morphTargetsTextureSize\",f.size)}}}function fi(e,t,n,i){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener(\"dispose\",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const s=i.render.frame,l=o.geometry,c=t.get(o,l);if(r.get(c)!==s&&(t.update(c),r.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener(\"dispose\",a)&&o.addEventListener(\"dispose\",a),r.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),r.set(o,s))),o.isSkinnedMesh){const e=o.skeleton;r.get(e)!==s&&(e.update(),r.set(e,s))}return c},dispose:function(){r=new WeakMap}}}const pi=new Y,mi=new j(1,1),hi=new W,_i=new K,gi=new q,vi=[],Ei=[],Si=new Float32Array(16),Ti=new Float32Array(9),Mi=new Float32Array(4);function xi(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=vi[r];if(void 0===a&&(a=new Float32Array(r),vi[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function Ri(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Ai(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function bi(e,t){let n=Ei[t];void 0===n&&(n=new Int32Array(t),Ei[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Ci(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Li(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ri(n,t))return;e.uniform2fv(this.addr,t),Ai(n,t)}}function Pi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ri(n,t))return;e.uniform3fv(this.addr,t),Ai(n,t)}}function Ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ri(n,t))return;e.uniform4fv(this.addr,t),Ai(n,t)}}function wi(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Ri(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ai(n,t)}else{if(Ri(n,i))return;Mi.set(i),e.uniformMatrix2fv(this.addr,!1,Mi),Ai(n,i)}}function Di(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Ri(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ai(n,t)}else{if(Ri(n,i))return;Ti.set(i),e.uniformMatrix3fv(this.addr,!1,Ti),Ai(n,i)}}function yi(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Ri(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ai(n,t)}else{if(Ri(n,i))return;Si.set(i),e.uniformMatrix4fv(this.addr,!1,Si),Ai(n,i)}}function Ii(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ni(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ri(n,t))return;e.uniform2iv(this.addr,t),Ai(n,t)}}function Oi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ri(n,t))return;e.uniform3iv(this.addr,t),Ai(n,t)}}function Fi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ri(n,t))return;e.uniform4iv(this.addr,t),Ai(n,t)}}function Bi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Hi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ri(n,t))return;e.uniform2uiv(this.addr,t),Ai(n,t)}}function Gi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ri(n,t))return;e.uniform3uiv(this.addr,t),Ai(n,t)}}function Vi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ri(n,t))return;e.uniform4uiv(this.addr,t),Ai(n,t)}}function zi(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let a;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(mi.compareFunction=X,a=mi):a=pi,n.setTexture2D(t||a,r)}function ki(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||_i,r)}function Wi(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||gi,r)}function Xi(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||hi,r)}function Yi(e,t){e.uniform1fv(this.addr,t)}function ji(e,t){const n=xi(t,this.size,2);e.uniform2fv(this.addr,n)}function Ki(e,t){const n=xi(t,this.size,3);e.uniform3fv(this.addr,n)}function qi(e,t){const n=xi(t,this.size,4);e.uniform4fv(this.addr,n)}function Zi(e,t){const n=xi(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function $i(e,t){const n=xi(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Qi(e,t){const n=xi(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ji(e,t){e.uniform1iv(this.addr,t)}function er(e,t){e.uniform2iv(this.addr,t)}function tr(e,t){e.uniform3iv(this.addr,t)}function nr(e,t){e.uniform4iv(this.addr,t)}function ir(e,t){e.uniform1uiv(this.addr,t)}function rr(e,t){e.uniform2uiv(this.addr,t)}function ar(e,t){e.uniform3uiv(this.addr,t)}function or(e,t){e.uniform4uiv(this.addr,t)}function sr(e,t,n){const i=this.cache,r=t.length,a=bi(n,r);Ri(i,a)||(e.uniform1iv(this.addr,a),Ai(i,a));for(let e=0;e!==r;++e)n.setTexture2D(t[e]||pi,a[e])}function lr(e,t,n){const i=this.cache,r=t.length,a=bi(n,r);Ri(i,a)||(e.uniform1iv(this.addr,a),Ai(i,a));for(let e=0;e!==r;++e)n.setTexture3D(t[e]||_i,a[e])}function cr(e,t,n){const i=this.cache,r=t.length,a=bi(n,r);Ri(i,a)||(e.uniform1iv(this.addr,a),Ai(i,a));for(let e=0;e!==r;++e)n.setTextureCube(t[e]||gi,a[e])}function dr(e,t,n){const i=this.cache,r=t.length,a=bi(n,r);Ri(i,a)||(e.uniform1iv(this.addr,a),Ai(i,a));for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||hi,a[e])}class ur{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Ci;case 35664:return Li;case 35665:return Pi;case 35666:return Ui;case 35674:return wi;case 35675:return Di;case 35676:return yi;case 5124:case 35670:return Ii;case 35667:case 35671:return Ni;case 35668:case 35672:return Oi;case 35669:case 35673:return Fi;case 5125:return Bi;case 36294:return Hi;case 36295:return Gi;case 36296:return Vi;case 35678:case 36198:case 36298:case 36306:case 35682:return zi;case 35679:case 36299:case 36307:return ki;case 35680:case 36300:case 36308:case 36293:return Wi;case 36289:case 36303:case 36311:case 36292:return Xi}}(t.type)}}class fr{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Yi;case 35664:return ji;case 35665:return Ki;case 35666:return qi;case 35674:return Zi;case 35675:return $i;case 35676:return Qi;case 5124:case 35670:return Ji;case 35667:case 35671:return er;case 35668:case 35672:return tr;case 35669:case 35673:return nr;case 5125:return ir;case 36294:return rr;case 36295:return ar;case 36296:return or;case 35678:case 36198:case 36298:case 36306:case 35682:return sr;case 35679:case 36299:case 36307:return lr;case 35680:case 36300:case 36308:case 36293:return cr;case 36289:case 36303:case 36311:case 36292:return dr}}(t.type)}}class pr{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const mr=/(\\w+)(\\])?(\\[|\\.)?/g;function hr(e,t){e.seq.push(t),e.map[t.id]=t}function _r(e,t,n){const i=e.name,r=i.length;for(mr.lastIndex=0;;){const a=mr.exec(i),o=mr.lastIndex;let s=a[1];const l=\"]\"===a[2],c=a[3];if(l&&(s|=0),void 0===c||\"[\"===c&&o+2===r){hr(n,void 0===c?new ur(s,e,t):new fr(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new pr(s),hr(n,e)),n=e}}}class gr{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);_r(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function vr(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const Er=37297;let Sr=0;const Tr=new t;function Mr(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&\"\"===r)return\"\";const a=/ERROR: 0:(\\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+\"\\n\\n\"+r+\"\\n\\n\"+function(e,t){const n=e.split(\"\\n\"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=r;e<a;e++){const r=e+1;i.push(`${r===t?\">\":\" \"} ${r}: ${n[e]}`)}return i.join(\"\\n\")}(e.getShaderSource(t),i)}return r}function xr(e,t){const n=function(e){u._getMatrix(Tr,u.workingColorSpace,e);const t=`mat3( ${Tr.elements.map((e=>e.toFixed(4)))} )`;switch(u.getTransfer(e)){case se:return[t,\"LinearTransferOETF\"];case f:return[t,\"sRGBTransferOETF\"];default:return console.warn(\"THREE.WebGLProgram: Unsupported color space: \",e),[t,\"LinearTransferOETF\"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,\"}\"].join(\"\\n\")}function Rr(e,t){let n;switch(t){case ie:n=\"Linear\";break;case ne:n=\"Reinhard\";break;case te:n=\"Cineon\";break;case ee:n=\"ACESFilmic\";break;case J:n=\"AgX\";break;case Q:n=\"Neutral\";break;case $:n=\"Custom\";break;default:console.warn(\"THREE.WebGLProgram: Unsupported toneMapping:\",t),n=\"Linear\"}return\"vec3 \"+e+\"( vec3 color ) { return \"+n+\"ToneMapping( color ); }\"}const Ar=new r;function br(){u.getLuminanceCoefficients(Ar);return[\"float luminance( const in vec3 rgb ) {\",`\\tconst vec3 weights = vec3( ${Ar.x.toFixed(4)}, ${Ar.y.toFixed(4)}, ${Ar.z.toFixed(4)} );`,\"\\treturn dot( weights, rgb );\",\"}\"].join(\"\\n\")}function Cr(e){return\"\"!==e}function Lr(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Pr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ur=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function wr(e){return e.replace(Ur,yr)}const Dr=new Map;function yr(e,t){let n=wn[t];if(void 0===n){const e=Dr.get(t);if(void 0===e)throw new Error(\"Can not resolve #include <\"+t+\">\");n=wn[e],console.warn('THREE.WebGLRenderer: Shader chunk \"%s\" has been deprecated. Use \"%s\" instead.',t,e)}return wr(n)}const Ir=/#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;function Nr(e){return e.replace(Ir,Or)}function Or(e,t,n,i){let r=\"\";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\\[\\s*i\\s*\\]/g,\"[ \"+e+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function Fr(e){let t=`precision ${e.precision} float;\\n\\tprecision ${e.precision} int;\\n\\tprecision ${e.precision} sampler2D;\\n\\tprecision ${e.precision} samplerCube;\\n\\tprecision ${e.precision} sampler3D;\\n\\tprecision ${e.precision} sampler2DArray;\\n\\tprecision ${e.precision} sampler2DShadow;\\n\\tprecision ${e.precision} samplerCubeShadow;\\n\\tprecision ${e.precision} sampler2DArrayShadow;\\n\\tprecision ${e.precision} isampler2D;\\n\\tprecision ${e.precision} isampler3D;\\n\\tprecision ${e.precision} isamplerCube;\\n\\tprecision ${e.precision} isampler2DArray;\\n\\tprecision ${e.precision} usampler2D;\\n\\tprecision ${e.precision} usampler3D;\\n\\tprecision ${e.precision} usamplerCube;\\n\\tprecision ${e.precision} usampler2DArray;\\n\\t`;return\"highp\"===e.precision?t+=\"\\n#define HIGH_PRECISION\":\"mediump\"===e.precision?t+=\"\\n#define MEDIUM_PRECISION\":\"lowp\"===e.precision&&(t+=\"\\n#define LOW_PRECISION\"),t}function Br(e,t,n,i){const r=e.getContext(),o=n.defines;let s=n.vertexShader,l=n.fragmentShader;const c=function(e){let t=\"SHADOWMAP_TYPE_BASIC\";return e.shadowMapType===re?t=\"SHADOWMAP_TYPE_PCF\":e.shadowMapType===ae?t=\"SHADOWMAP_TYPE_PCF_SOFT\":e.shadowMapType===oe&&(t=\"SHADOWMAP_TYPE_VSM\"),t}(n),d=function(e){let t=\"ENVMAP_TYPE_CUBE\";if(e.envMap)switch(e.envMapMode){case C:case L:t=\"ENVMAP_TYPE_CUBE\";break;case a:t=\"ENVMAP_TYPE_CUBE_UV\"}return t}(n),u=function(e){let t=\"ENVMAP_MODE_REFLECTION\";e.envMap&&e.envMapMode===L&&(t=\"ENVMAP_MODE_REFRACTION\");return t}(n),f=function(e){let t=\"ENVMAP_BLENDING_NONE\";if(e.envMap)switch(e.combine){case de:t=\"ENVMAP_BLENDING_MULTIPLY\";break;case ce:t=\"ENVMAP_BLENDING_MIX\";break;case le:t=\"ENVMAP_BLENDING_ADD\"}return t}(n),p=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),m=function(e){return[e.extensionClipCullDistance?\"#extension GL_ANGLE_clip_cull_distance : require\":\"\",e.extensionMultiDraw?\"#extension GL_ANGLE_multi_draw : require\":\"\"].filter(Cr).join(\"\\n\")}(n),h=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push(\"#define \"+n+\" \"+i)}return t.join(\"\\n\")}(o),_=r.createProgram();let g,v,E=n.glslVersion?\"#version \"+n.glslVersion+\"\\n\":\"\";n.isRawShaderMaterial?(g=[\"#define SHADER_TYPE \"+n.shaderType,\"#define SHADER_NAME \"+n.shaderName,h].filter(Cr).join(\"\\n\"),g.length>0&&(g+=\"\\n\"),v=[\"#define SHADER_TYPE \"+n.shaderType,\"#define SHADER_NAME \"+n.shaderName,h].filter(Cr).join(\"\\n\"),v.length>0&&(v+=\"\\n\")):(g=[Fr(n),\"#define SHADER_TYPE \"+n.shaderType,\"#define SHADER_NAME \"+n.shaderName,h,n.extensionClipCullDistance?\"#define USE_CLIP_DISTANCE\":\"\",n.batching?\"#define USE_BATCHING\":\"\",n.batchingColor?\"#define USE_BATCHING_COLOR\":\"\",n.instancing?\"#define USE_INSTANCING\":\"\",n.instancingColor?\"#define USE_INSTANCING_COLOR\":\"\",n.instancingMorph?\"#define USE_INSTANCING_MORPH\":\"\",n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+u:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMapObjectSpace?\"#define USE_NORMALMAP_OBJECTSPACE\":\"\",n.normalMapTangentSpace?\"#define USE_NORMALMAP_TANGENTSPACE\":\"\",n.displacementMap?\"#define USE_DISPLACEMENTMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.anisotropy?\"#define USE_ANISOTROPY\":\"\",n.anisotropyMap?\"#define USE_ANISOTROPYMAP\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.iridescenceMap?\"#define USE_IRIDESCENCEMAP\":\"\",n.iridescenceThicknessMap?\"#define USE_IRIDESCENCE_THICKNESSMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.specularColorMap?\"#define USE_SPECULAR_COLORMAP\":\"\",n.specularIntensityMap?\"#define USE_SPECULAR_INTENSITYMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.alphaHash?\"#define USE_ALPHAHASH\":\"\",n.transmission?\"#define USE_TRANSMISSION\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",n.sheenColorMap?\"#define USE_SHEEN_COLORMAP\":\"\",n.sheenRoughnessMap?\"#define USE_SHEEN_ROUGHNESSMAP\":\"\",n.mapUv?\"#define MAP_UV \"+n.mapUv:\"\",n.alphaMapUv?\"#define ALPHAMAP_UV \"+n.alphaMapUv:\"\",n.lightMapUv?\"#define LIGHTMAP_UV \"+n.lightMapUv:\"\",n.aoMapUv?\"#define AOMAP_UV \"+n.aoMapUv:\"\",n.emissiveMapUv?\"#define EMISSIVEMAP_UV \"+n.emissiveMapUv:\"\",n.bumpMapUv?\"#define BUMPMAP_UV \"+n.bumpMapUv:\"\",n.normalMapUv?\"#define NORMALMAP_UV \"+n.normalMapUv:\"\",n.displacementMapUv?\"#define DISPLACEMENTMAP_UV \"+n.displacementMapUv:\"\",n.metalnessMapUv?\"#define METALNESSMAP_UV \"+n.metalnessMapUv:\"\",n.roughnessMapUv?\"#define ROUGHNESSMAP_UV \"+n.roughnessMapUv:\"\",n.anisotropyMapUv?\"#define ANISOTROPYMAP_UV \"+n.anisotropyMapUv:\"\",n.clearcoatMapUv?\"#define CLEARCOATMAP_UV \"+n.clearcoatMapUv:\"\",n.clearcoatNormalMapUv?\"#define CLEARCOAT_NORMALMAP_UV \"+n.clearcoatNormalMapUv:\"\",n.clearcoatRoughnessMapUv?\"#define CLEARCOAT_ROUGHNESSMAP_UV \"+n.clearcoatRoughnessMapUv:\"\",n.iridescenceMapUv?\"#define IRIDESCENCEMAP_UV \"+n.iridescenceMapUv:\"\",n.iridescenceThicknessMapUv?\"#define IRIDESCENCE_THICKNESSMAP_UV \"+n.iridescenceThicknessMapUv:\"\",n.sheenColorMapUv?\"#define SHEEN_COLORMAP_UV \"+n.sheenColorMapUv:\"\",n.sheenRoughnessMapUv?\"#define SHEEN_ROUGHNESSMAP_UV \"+n.sheenRoughnessMapUv:\"\",n.specularMapUv?\"#define SPECULARMAP_UV \"+n.specularMapUv:\"\",n.specularColorMapUv?\"#define SPECULAR_COLORMAP_UV \"+n.specularColorMapUv:\"\",n.specularIntensityMapUv?\"#define SPECULAR_INTENSITYMAP_UV \"+n.specularIntensityMapUv:\"\",n.transmissionMapUv?\"#define TRANSMISSIONMAP_UV \"+n.transmissionMapUv:\"\",n.thicknessMapUv?\"#define THICKNESSMAP_UV \"+n.thicknessMapUv:\"\",n.vertexTangents&&!1===n.flatShading?\"#define USE_TANGENT\":\"\",n.vertexColors?\"#define USE_COLOR\":\"\",n.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",n.vertexUv1s?\"#define USE_UV1\":\"\",n.vertexUv2s?\"#define USE_UV2\":\"\",n.vertexUv3s?\"#define USE_UV3\":\"\",n.pointsUvs?\"#define USE_POINTS_UV\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.skinning?\"#define USE_SKINNING\":\"\",n.morphTargets?\"#define USE_MORPHTARGETS\":\"\",n.morphNormals&&!1===n.flatShading?\"#define USE_MORPHNORMALS\":\"\",n.morphColors?\"#define USE_MORPHCOLORS\":\"\",n.morphTargetsCount>0?\"#define MORPHTARGETS_TEXTURE_STRIDE \"+n.morphTextureStride:\"\",n.morphTargetsCount>0?\"#define MORPHTARGETS_COUNT \"+n.morphTargetsCount:\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+c:\"\",n.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",n.numLightProbes>0?\"#define USE_LIGHT_PROBES\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.reverseDepthBuffer?\"#define USE_REVERSEDEPTHBUF\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",\"#ifdef USE_INSTANCING\",\"\\tattribute mat4 instanceMatrix;\",\"#endif\",\"#ifdef USE_INSTANCING_COLOR\",\"\\tattribute vec3 instanceColor;\",\"#endif\",\"#ifdef USE_INSTANCING_MORPH\",\"\\tuniform sampler2D morphTexture;\",\"#endif\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_UV1\",\"\\tattribute vec2 uv1;\",\"#endif\",\"#ifdef USE_UV2\",\"\\tattribute vec2 uv2;\",\"#endif\",\"#ifdef USE_UV3\",\"\\tattribute vec2 uv3;\",\"#endif\",\"#ifdef USE_TANGENT\",\"\\tattribute vec4 tangent;\",\"#endif\",\"#if defined( USE_COLOR_ALPHA )\",\"\\tattribute vec4 color;\",\"#elif defined( USE_COLOR )\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Cr).join(\"\\n\"),v=[Fr(n),\"#define SHADER_TYPE \"+n.shaderType,\"#define SHADER_NAME \"+n.shaderName,h,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.alphaToCoverage?\"#define ALPHA_TO_COVERAGE\":\"\",n.map?\"#define USE_MAP\":\"\",n.matcap?\"#define USE_MATCAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+d:\"\",n.envMap?\"#define \"+u:\"\",n.envMap?\"#define \"+f:\"\",p?\"#define CUBEUV_TEXEL_WIDTH \"+p.texelWidth:\"\",p?\"#define CUBEUV_TEXEL_HEIGHT \"+p.texelHeight:\"\",p?\"#define CUBEUV_MAX_MIP \"+p.maxMip+\".0\":\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMapObjectSpace?\"#define USE_NORMALMAP_OBJECTSPACE\":\"\",n.normalMapTangentSpace?\"#define USE_NORMALMAP_TANGENTSPACE\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.anisotropy?\"#define USE_ANISOTROPY\":\"\",n.anisotropyMap?\"#define USE_ANISOTROPYMAP\":\"\",n.clearcoat?\"#define USE_CLEARCOAT\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.dispersion?\"#define USE_DISPERSION\":\"\",n.iridescence?\"#define USE_IRIDESCENCE\":\"\",n.iridescenceMap?\"#define USE_IRIDESCENCEMAP\":\"\",n.iridescenceThicknessMap?\"#define USE_IRIDESCENCE_THICKNESSMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.specularColorMap?\"#define USE_SPECULAR_COLORMAP\":\"\",n.specularIntensityMap?\"#define USE_SPECULAR_INTENSITYMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.alphaTest?\"#define USE_ALPHATEST\":\"\",n.alphaHash?\"#define USE_ALPHAHASH\":\"\",n.sheen?\"#define USE_SHEEN\":\"\",n.sheenColorMap?\"#define USE_SHEEN_COLORMAP\":\"\",n.sheenRoughnessMap?\"#define USE_SHEEN_ROUGHNESSMAP\":\"\",n.transmission?\"#define USE_TRANSMISSION\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",n.vertexTangents&&!1===n.flatShading?\"#define USE_TANGENT\":\"\",n.vertexColors||n.instancingColor||n.batchingColor?\"#define USE_COLOR\":\"\",n.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",n.vertexUv1s?\"#define USE_UV1\":\"\",n.vertexUv2s?\"#define USE_UV2\":\"\",n.vertexUv3s?\"#define USE_UV3\":\"\",n.pointsUvs?\"#define USE_POINTS_UV\":\"\",n.gradientMap?\"#define USE_GRADIENTMAP\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+c:\"\",n.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",n.numLightProbes>0?\"#define USE_LIGHT_PROBES\":\"\",n.decodeVideoTexture?\"#define DECODE_VIDEO_TEXTURE\":\"\",n.decodeVideoTextureEmissive?\"#define DECODE_VIDEO_TEXTURE_EMISSIVE\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.reverseDepthBuffer?\"#define USE_REVERSEDEPTHBUF\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",n.toneMapping!==U?\"#define TONE_MAPPING\":\"\",n.toneMapping!==U?wn.tonemapping_pars_fragment:\"\",n.toneMapping!==U?Rr(\"toneMapping\",n.toneMapping):\"\",n.dithering?\"#define DITHERING\":\"\",n.opaque?\"#define OPAQUE\":\"\",wn.colorspace_pars_fragment,xr(\"linearToOutputTexel\",n.outputColorSpace),br(),n.useDepthPacking?\"#define DEPTH_PACKING \"+n.depthPacking:\"\",\"\\n\"].filter(Cr).join(\"\\n\")),s=wr(s),s=Lr(s,n),s=Pr(s,n),l=wr(l),l=Lr(l,n),l=Pr(l,n),s=Nr(s),l=Nr(l),!0!==n.isRawShaderMaterial&&(E=\"#version 300 es\\n\",g=[m,\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(\"\\n\")+\"\\n\"+g,v=[\"#define varying in\",n.glslVersion===Z?\"\":\"layout(location = 0) out highp vec4 pc_fragColor;\",n.glslVersion===Z?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\"\\n\"+v);const S=E+g+s,T=E+v+l,M=vr(r,r.VERTEX_SHADER,S),x=vr(r,r.FRAGMENT_SHADER,T);function R(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(_).trim(),i=r.getShaderInfoLog(M).trim(),a=r.getShaderInfoLog(x).trim();let o=!0,s=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(o=!1,\"function\"==typeof e.debug.onShaderError)e.debug.onShaderError(r,_,M,x);else{const e=Mr(r,M,\"vertex\"),i=Mr(r,x,\"fragment\");console.error(\"THREE.WebGLProgram: Shader Error \"+r.getError()+\" - VALIDATE_STATUS \"+r.getProgramParameter(_,r.VALIDATE_STATUS)+\"\\n\\nMaterial Name: \"+t.name+\"\\nMaterial Type: \"+t.type+\"\\n\\nProgram Info Log: \"+n+\"\\n\"+e+\"\\n\"+i)}else\"\"!==n?console.warn(\"THREE.WebGLProgram: Program Info Log:\",n):\"\"!==i&&\"\"!==a||(s=!1);s&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:i,prefix:g},fragmentShader:{log:a,prefix:v}})}r.deleteShader(M),r.deleteShader(x),A=new gr(r,_),b=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let o=1;i.type===e.FLOAT_MAT2&&(o=2),i.type===e.FLOAT_MAT3&&(o=3),i.type===e.FLOAT_MAT4&&(o=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(r,_)}let A,b;r.attachShader(_,M),r.attachShader(_,x),void 0!==n.index0AttributeName?r.bindAttribLocation(_,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(_,0,\"position\"),r.linkProgram(_),this.getUniforms=function(){return void 0===A&&R(this),A},this.getAttributes=function(){return void 0===b&&R(this),b};let P=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===P&&(P=r.getProgramParameter(_,Er)),P},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Sr++,this.cacheKey=t,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=x,this}let Hr=0;class Gr{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Vr(e),t.set(e,n)),n}}class Vr{constructor(e){this.id=Hr++,this.code=e,this.usedTimes=0}}function zr(e,t,n,i,r,o,s){const l=new _e,c=new Gr,p=new Set,m=[],h=r.logarithmicDepthBuffer,_=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"toon\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"};function E(e){return p.add(e),0===e?\"uv\":`uv${e}`}return{getParameters:function(o,l,m,S,T){const M=S.fog,x=T.geometry,R=o.isMeshStandardMaterial?S.environment:null,A=(o.isMeshStandardMaterial?n:t).get(o.envMap||R),b=A&&A.mapping===a?A.image.height:null,C=v[o.type];null!==o.precision&&(g=r.getMaxPrecision(o.precision),g!==o.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",o.precision,\"not supported, using\",g,\"instead.\"));const L=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,P=void 0!==L?L.length:0;let w,D,y,I,N=0;if(void 0!==x.morphAttributes.position&&(N=1),void 0!==x.morphAttributes.normal&&(N=2),void 0!==x.morphAttributes.color&&(N=3),C){const e=yn[C];w=e.vertexShader,D=e.fragmentShader}else w=o.vertexShader,D=o.fragmentShader,c.update(o),y=c.getVertexShaderID(o),I=c.getFragmentShaderID(o);const O=e.getRenderTarget(),F=e.state.buffers.depth.getReversed(),H=!0===T.isInstancedMesh,G=!0===T.isBatchedMesh,V=!!o.map,z=!!o.matcap,k=!!A,W=!!o.aoMap,X=!!o.lightMap,Y=!!o.bumpMap,j=!!o.normalMap,K=!!o.displacementMap,q=!!o.emissiveMap,Z=!!o.metalnessMap,$=!!o.roughnessMap,Q=o.anisotropy>0,J=o.clearcoat>0,ee=o.dispersion>0,te=o.iridescence>0,ne=o.sheen>0,ie=o.transmission>0,re=Q&&!!o.anisotropyMap,ae=J&&!!o.clearcoatMap,oe=J&&!!o.clearcoatNormalMap,se=J&&!!o.clearcoatRoughnessMap,le=te&&!!o.iridescenceMap,ce=te&&!!o.iridescenceThicknessMap,de=ne&&!!o.sheenColorMap,he=ne&&!!o.sheenRoughnessMap,_e=!!o.specularMap,ge=!!o.specularColorMap,ve=!!o.specularIntensityMap,Ee=ie&&!!o.transmissionMap,Se=ie&&!!o.thicknessMap,Te=!!o.gradientMap,Me=!!o.alphaMap,xe=o.alphaTest>0,Re=!!o.alphaHash,Ae=!!o.extensions;let be=U;o.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(be=e.toneMapping));const Ce={shaderID:C,shaderType:o.type,shaderName:o.name,vertexShader:w,fragmentShader:D,defines:o.defines,customVertexShaderID:y,customFragmentShaderID:I,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:g,batching:G,batchingColor:G&&null!==T._colorsTexture,instancing:H,instancingColor:H&&null!==T.instanceColor,instancingMorph:H&&null!==T.morphTexture,supportsVertexTextures:_,outputColorSpace:null===O?e.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:B,alphaToCoverage:!!o.alphaToCoverage,map:V,matcap:z,envMap:k,envMapMode:k&&A.mapping,envMapCubeUVHeight:b,aoMap:W,lightMap:X,bumpMap:Y,normalMap:j,displacementMap:_&&K,emissiveMap:q,normalMapObjectSpace:j&&o.normalMapType===ue,normalMapTangentSpace:j&&o.normalMapType===fe,metalnessMap:Z,roughnessMap:$,anisotropy:Q,anisotropyMap:re,clearcoat:J,clearcoatMap:ae,clearcoatNormalMap:oe,clearcoatRoughnessMap:se,dispersion:ee,iridescence:te,iridescenceMap:le,iridescenceThicknessMap:ce,sheen:ne,sheenColorMap:de,sheenRoughnessMap:he,specularMap:_e,specularColorMap:ge,specularIntensityMap:ve,transmission:ie,transmissionMap:Ee,thicknessMap:Se,gradientMap:Te,opaque:!1===o.transparent&&o.blending===pe&&!1===o.alphaToCoverage,alphaMap:Me,alphaTest:xe,alphaHash:Re,combine:o.combine,mapUv:V&&E(o.map.channel),aoMapUv:W&&E(o.aoMap.channel),lightMapUv:X&&E(o.lightMap.channel),bumpMapUv:Y&&E(o.bumpMap.channel),normalMapUv:j&&E(o.normalMap.channel),displacementMapUv:K&&E(o.displacementMap.channel),emissiveMapUv:q&&E(o.emissiveMap.channel),metalnessMapUv:Z&&E(o.metalnessMap.channel),roughnessMapUv:$&&E(o.roughnessMap.channel),anisotropyMapUv:re&&E(o.anisotropyMap.channel),clearcoatMapUv:ae&&E(o.clearcoatMap.channel),clearcoatNormalMapUv:oe&&E(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:se&&E(o.clearcoatRoughnessMap.channel),iridescenceMapUv:le&&E(o.iridescenceMap.channel),iridescenceThicknessMapUv:ce&&E(o.iridescenceThicknessMap.channel),sheenColorMapUv:de&&E(o.sheenColorMap.channel),sheenRoughnessMapUv:he&&E(o.sheenRoughnessMap.channel),specularMapUv:_e&&E(o.specularMap.channel),specularColorMapUv:ge&&E(o.specularColorMap.channel),specularIntensityMapUv:ve&&E(o.specularIntensityMap.channel),transmissionMapUv:Ee&&E(o.transmissionMap.channel),thicknessMapUv:Se&&E(o.thicknessMap.channel),alphaMapUv:Me&&E(o.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(j||Q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,pointsUvs:!0===T.isPoints&&!!x.attributes.uv&&(V||Me),fog:!!M,useFog:!0===o.fog,fogExp2:!!M&&M.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:F,skinning:!0===T.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:P,morphTextureStride:N,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numSpotLightMaps:l.spotLightMap.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numSpotLightShadowsWithMaps:l.numSpotLightShadowsWithMaps,numLightProbes:l.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:be,decodeVideoTexture:V&&!0===o.map.isVideoTexture&&u.getTransfer(o.map.colorSpace)===f,decodeVideoTextureEmissive:q&&!0===o.emissiveMap.isVideoTexture&&u.getTransfer(o.emissiveMap.colorSpace)===f,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===me,flipSided:o.side===d,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:Ae&&!0===o.extensions.clipCullDistance&&i.has(\"WEBGL_clip_cull_distance\"),extensionMultiDraw:(Ae&&!0===o.extensions.multiDraw||G)&&i.has(\"WEBGL_multi_draw\"),rendererExtensionParallelShaderCompile:i.has(\"KHR_parallel_shader_compile\"),customProgramCacheKey:o.customProgramCacheKey()};return Ce.vertexUv1s=p.has(1),Ce.vertexUv2s=p.has(2),Ce.vertexUv3s=p.has(3),p.clear(),Ce},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){l.disableAll(),t.supportsVertexTextures&&l.enable(0);t.instancing&&l.enable(1);t.instancingColor&&l.enable(2);t.instancingMorph&&l.enable(3);t.matcap&&l.enable(4);t.envMap&&l.enable(5);t.normalMapObjectSpace&&l.enable(6);t.normalMapTangentSpace&&l.enable(7);t.clearcoat&&l.enable(8);t.iridescence&&l.enable(9);t.alphaTest&&l.enable(10);t.vertexColors&&l.enable(11);t.vertexAlphas&&l.enable(12);t.vertexUv1s&&l.enable(13);t.vertexUv2s&&l.enable(14);t.vertexUv3s&&l.enable(15);t.vertexTangents&&l.enable(16);t.anisotropy&&l.enable(17);t.alphaHash&&l.enable(18);t.batching&&l.enable(19);t.dispersion&&l.enable(20);t.batchingColor&&l.enable(21);e.push(l.mask),l.disableAll(),t.fog&&l.enable(0);t.useFog&&l.enable(1);t.flatShading&&l.enable(2);t.logarithmicDepthBuffer&&l.enable(3);t.reverseDepthBuffer&&l.enable(4);t.skinning&&l.enable(5);t.morphTargets&&l.enable(6);t.morphNormals&&l.enable(7);t.morphColors&&l.enable(8);t.premultipliedAlpha&&l.enable(9);t.shadowMapEnabled&&l.enable(10);t.doubleSided&&l.enable(11);t.flipSided&&l.enable(12);t.useDepthPacking&&l.enable(13);t.dithering&&l.enable(14);t.transmission&&l.enable(15);t.sheen&&l.enable(16);t.opaque&&l.enable(17);t.pointsUvs&&l.enable(18);t.decodeVideoTexture&&l.enable(19);t.decodeVideoTextureEmissive&&l.enable(20);t.alphaToCoverage&&l.enable(21);e.push(l.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=v[e.type];let n;if(t){const e=yn[t];n=he.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=m.length;e<t;e++){const t=m[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Br(e,n,t,o),m.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=m.indexOf(e);m[t]=m[m.length-1],m.pop(),e.destroy()}},releaseShaderCache:function(e){c.remove(e)},programs:m,dispose:function(){c.dispose()}}}function kr(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Wr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Xr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Yr(){const e=[];let t=0;const n=[],i=[],r=[];function a(n,i,r,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,o,s,l,c){const d=a(e,t,o,s,l,c);o.transmission>0?i.push(d):!0===o.transparent?r.push(d):n.push(d)},unshift:function(e,t,o,s,l,c){const d=a(e,t,o,s,l,c);o.transmission>0?i.unshift(d):!0===o.transparent?r.unshift(d):n.unshift(d)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Wr),i.length>1&&i.sort(t||Xr),r.length>1&&r.sort(t||Xr)}}}function jr(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new Yr,e.set(t,[r])):n>=i.length?(r=new Yr,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function Kr(){const t={};return{get:function(n){if(void 0!==t[n.id])return t[n.id];let i;switch(n.type){case\"DirectionalLight\":i={direction:new r,color:new e};break;case\"SpotLight\":i={position:new r,direction:new r,color:new e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case\"PointLight\":i={position:new r,color:new e,distance:0,decay:0};break;case\"HemisphereLight\":i={direction:new r,skyColor:new e,groundColor:new e};break;case\"RectAreaLight\":i={color:new e,position:new r,halfWidth:new r,halfHeight:new r}}return t[n.id]=i,i}}}let qr=0;function Zr(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function $r(e){const t=new Kr,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case\"DirectionalLight\":case\"SpotLight\":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n};break;case\"PointLight\":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)a.probe.push(new r);const o=new r,s=new g,l=new g;return{setup:function(n){let r=0,o=0,s=0;for(let e=0;e<9;e++)a.probe[e].set(0,0,0);let l=0,c=0,d=0,u=0,f=0,p=0,m=0,h=0,_=0,g=0,v=0;n.sort(Zr);for(let e=0,E=n.length;e<E;e++){const E=n[e],S=E.color,T=E.intensity,M=E.distance,x=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)r+=S.r*T,o+=S.g*T,s+=S.b*T;else if(E.isLightProbe){for(let e=0;e<9;e++)a.probe[e].addScaledVector(E.sh.coefficients[e],T);v++}else if(E.isDirectionalLight){const e=t.get(E);if(e.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const e=E.shadow,t=i.get(E);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,a.directionalShadow[l]=t,a.directionalShadowMap[l]=x,a.directionalShadowMatrix[l]=E.shadow.matrix,p++}a.directional[l]=e,l++}else if(E.isSpotLight){const e=t.get(E);e.position.setFromMatrixPosition(E.matrixWorld),e.color.copy(S).multiplyScalar(T),e.distance=M,e.coneCos=Math.cos(E.angle),e.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),e.decay=E.decay,a.spot[d]=e;const n=E.shadow;if(E.map&&(a.spotLightMap[_]=E.map,_++,n.updateMatrices(E),E.castShadow&&g++),a.spotLightMatrix[d]=n.matrix,E.castShadow){const e=i.get(E);e.shadowIntensity=n.intensity,e.shadowBias=n.bias,e.shadowNormalBias=n.normalBias,e.shadowRadius=n.radius,e.shadowMapSize=n.mapSize,a.spotShadow[d]=e,a.spotShadowMap[d]=x,h++}d++}else if(E.isRectAreaLight){const e=t.get(E);e.color.copy(S).multiplyScalar(T),e.halfWidth.set(.5*E.width,0,0),e.halfHeight.set(0,.5*E.height,0),a.rectArea[u]=e,u++}else if(E.isPointLight){const e=t.get(E);if(e.color.copy(E.color).multiplyScalar(E.intensity),e.distance=E.distance,e.decay=E.decay,E.castShadow){const e=E.shadow,t=i.get(E);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,a.pointShadow[c]=t,a.pointShadowMap[c]=x,a.pointShadowMatrix[c]=E.shadow.matrix,m++}a.point[c]=e,c++}else if(E.isHemisphereLight){const e=t.get(E);e.skyColor.copy(E.color).multiplyScalar(T),e.groundColor.copy(E.groundColor).multiplyScalar(T),a.hemi[f]=e,f++}}u>0&&(!0===e.has(\"OES_texture_float_linear\")?(a.rectAreaLTC1=Dn.LTC_FLOAT_1,a.rectAreaLTC2=Dn.LTC_FLOAT_2):(a.rectAreaLTC1=Dn.LTC_HALF_1,a.rectAreaLTC2=Dn.LTC_HALF_2)),a.ambient[0]=r,a.ambient[1]=o,a.ambient[2]=s;const E=a.hash;E.directionalLength===l&&E.pointLength===c&&E.spotLength===d&&E.rectAreaLength===u&&E.hemiLength===f&&E.numDirectionalShadows===p&&E.numPointShadows===m&&E.numSpotShadows===h&&E.numSpotMaps===_&&E.numLightProbes===v||(a.directional.length=l,a.spot.length=d,a.rectArea.length=u,a.point.length=c,a.hemi.length=f,a.directionalShadow.length=p,a.directionalShadowMap.length=p,a.pointShadow.length=m,a.pointShadowMap.length=m,a.spotShadow.length=h,a.spotShadowMap.length=h,a.directionalShadowMatrix.length=p,a.pointShadowMatrix.length=m,a.spotLightMatrix.length=h+_-g,a.spotLightMap.length=_,a.numSpotLightShadowsWithMaps=g,a.numLightProbes=v,E.directionalLength=l,E.pointLength=c,E.spotLength=d,E.rectAreaLength=u,E.hemiLength=f,E.numDirectionalShadows=p,E.numPointShadows=m,E.numSpotShadows=h,E.numSpotMaps=_,E.numLightProbes=v,a.version=qr++)},setupView:function(e,t){let n=0,i=0,r=0,c=0,d=0;const u=t.matrixWorldInverse;for(let t=0,f=e.length;t<f;t++){const f=e[t];if(f.isDirectionalLight){const e=a.directional[n];e.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(u),n++}else if(f.isSpotLight){const e=a.spot[r];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(u),r++}else if(f.isRectAreaLight){const e=a.rectArea[c];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(u),l.identity(),s.copy(f.matrixWorld),s.premultiply(u),l.extractRotation(s),e.halfWidth.set(.5*f.width,0,0),e.halfHeight.set(0,.5*f.height,0),e.halfWidth.applyMatrix4(l),e.halfHeight.applyMatrix4(l),c++}else if(f.isPointLight){const e=a.point[i];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(u),i++}else if(f.isHemisphereLight){const e=a.hemi[d];e.direction.setFromMatrixPosition(f.matrixWorld),e.direction.transformDirection(u),d++}}},state:a}}function Qr(e){const t=new $r(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function Jr(e){let t=new WeakMap;return{get:function(n,i=0){const r=t.get(n);let a;return void 0===r?(a=new Qr(e),t.set(n,[a])):i>=r.length?(a=new Qr(e),r.push(a)):a=r[i],a},dispose:function(){t=new WeakMap}}}function ea(e,t,i){let r=new ge;const a=new n,s=new n,c=new k,u=new ve({depthPacking:Ee}),f=new Se,p={},h=i.maxTextureSize,_={[m]:d,[d]:m,[me]:me},g=new l({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new n},radius:{value:4}},vertexShader:\"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\",fragmentShader:\"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\"}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const E=new D;E.setAttribute(\"position\",new y(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new o(E,g),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=re;let M=this.type;function x(n,i){const r=t.update(S);g.defines.VSM_SAMPLES!==n.blurSamples&&(g.defines.VSM_SAMPLES=n.blurSamples,v.defines.VSM_SAMPLES=n.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new I(a.x,a.y)),g.uniforms.shadow_pass.value=n.map.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,g,S,null),v.uniforms.shadow_pass.value=n.mapPass.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,v,S,null)}function R(t,n,i,r){let a=null;const o=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===i.isPointLight?f:u,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let i=p[e];void 0===i&&(i={},p[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r,n.addEventListener(\"dispose\",b)),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===oe?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:_[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=i}return a}function A(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===oe)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,d=t.length;c<d;c++){const d=t[c],u=l[d.materialIndex];if(u&&u.visible){const t=R(n,u,o,s);n.onBeforeShadow(e,n,i,a,r,t,d),e.renderBufferDirect(a,null,r,t,n,d),n.onAfterShadow(e,n,i,a,r,t,d)}}}else if(l.visible){const t=R(n,l,o,s);n.onBeforeShadow(e,n,i,a,r,t,null),e.renderBufferDirect(a,null,r,t,n,null),n.onAfterShadow(e,n,i,a,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)A(l[e],i,a,o,s)}function b(e){e.target.removeEventListener(\"dispose\",b);for(const t in p){const n=p[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,i){if(!1===T.enabled)return;if(!1===T.autoUpdate&&!1===T.needsUpdate)return;if(0===t.length)return;const o=e.getRenderTarget(),l=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),u=e.state;u.setBlending(N),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);const f=M!==oe&&this.type===oe,p=M===oe&&this.type!==oe;for(let o=0,l=t.length;o<l;o++){const l=t[o],d=l.shadow;if(void 0===d){console.warn(\"THREE.WebGLShadowMap:\",l,\"has no shadow.\");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;a.copy(d.mapSize);const m=d.getFrameExtents();if(a.multiply(m),s.copy(d.mapSize),(a.x>h||a.y>h)&&(a.x>h&&(s.x=Math.floor(h/m.x),a.x=s.x*m.x,d.mapSize.x=s.x),a.y>h&&(s.y=Math.floor(h/m.y),a.y=s.y*m.y,d.mapSize.y=s.y)),null===d.map||!0===f||!0===p){const e=this.type!==oe?{minFilter:Te,magFilter:Te}:{};null!==d.map&&d.map.dispose(),d.map=new I(a.x,a.y,e),d.map.texture.name=l.name+\".shadowMap\",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const _=d.getViewportCount();for(let e=0;e<_;e++){const t=d.getViewport(e);c.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),u.viewport(c),d.updateMatrices(l,e),r=d.getFrustum(),A(n,i,d.camera,l,this.type)}!0!==d.isPointLightShadow&&this.type===oe&&x(d,i),d.needsUpdate=!1}M=this.type,T.needsUpdate=!1,e.setRenderTarget(o,l,d)}}const ta={[nt]:tt,[et]:$e,[Je]:Ze,[Me]:Qe,[tt]:nt,[$e]:et,[Ze]:Je,[Qe]:Me};function na(t,n){const i=new function(){let e=!1;const n=new k;let i=null;const r=new k(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},r=new function(){let e=!1,i=!1,r=null,a=null,o=null;return{setReversed:function(e){if(i!==e){const e=n.get(\"EXT_clip_control\");i?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);const t=o;o=null,this.setClear(t)}i=e},getReversed:function(){return i},setTest:function(e){e?W(t.DEPTH_TEST):X(t.DEPTH_TEST)},setMask:function(n){r===n||e||(t.depthMask(n),r=n)},setFunc:function(e){if(i&&(e=ta[e]),a!==e){switch(e){case nt:t.depthFunc(t.NEVER);break;case tt:t.depthFunc(t.ALWAYS);break;case et:t.depthFunc(t.LESS);break;case Me:t.depthFunc(t.LEQUAL);break;case Je:t.depthFunc(t.EQUAL);break;case Qe:t.depthFunc(t.GEQUAL);break;case $e:t.depthFunc(t.GREATER);break;case Ze:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}a=e}},setLocked:function(t){e=t},setClear:function(e){o!==e&&(i&&(e=1-e),t.clearDepth(e),o=e)},reset:function(){e=!1,r=null,a=null,o=null,i=!1}}},a=new function(){let e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(n){e||(n?W(t.STENCIL_TEST):X(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&l===i||(t.stencilOp(e,n,i),o=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null}}},o=new WeakMap,s=new WeakMap;let l={},c={},u=new WeakMap,f=[],p=null,m=!1,h=null,_=null,g=null,v=null,E=null,S=null,T=null,M=new e(0,0,0),x=0,R=!1,A=null,b=null,C=null,L=null,P=null;const U=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let w=!1,D=0;const y=t.getParameter(t.VERSION);-1!==y.indexOf(\"WebGL\")?(D=parseFloat(/^WebGL (\\d)/.exec(y)[1]),w=D>=1):-1!==y.indexOf(\"OpenGL ES\")&&(D=parseFloat(/^OpenGL ES (\\d)/.exec(y)[1]),w=D>=2);let I=null,O={};const F=t.getParameter(t.SCISSOR_BOX),B=t.getParameter(t.VIEWPORT),H=(new k).fromArray(F),G=(new k).fromArray(B);function V(e,n,i,r){const a=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<i;o++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,r,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a);return o}const z={};function W(e){!0!==l[e]&&(t.enable(e),l[e]=!0)}function X(e){!1!==l[e]&&(t.disable(e),l[e]=!1)}z[t.TEXTURE_2D]=V(t.TEXTURE_2D,t.TEXTURE_2D,1),z[t.TEXTURE_CUBE_MAP]=V(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[t.TEXTURE_2D_ARRAY]=V(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),z[t.TEXTURE_3D]=V(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),r.setClear(1),a.setClear(0),W(t.DEPTH_TEST),r.setFunc(Me),q(!1),Z(Ye),W(t.CULL_FACE),K(N);const Y={[xe]:t.FUNC_ADD,[Re]:t.FUNC_SUBTRACT,[Ae]:t.FUNC_REVERSE_SUBTRACT};Y[Ke]=t.MIN,Y[qe]=t.MAX;const j={[be]:t.ZERO,[Ce]:t.ONE,[Le]:t.SRC_COLOR,[Pe]:t.SRC_ALPHA,[Ue]:t.SRC_ALPHA_SATURATE,[we]:t.DST_COLOR,[De]:t.DST_ALPHA,[ye]:t.ONE_MINUS_SRC_COLOR,[Ie]:t.ONE_MINUS_SRC_ALPHA,[Ne]:t.ONE_MINUS_DST_COLOR,[Oe]:t.ONE_MINUS_DST_ALPHA,[Fe]:t.CONSTANT_COLOR,[Be]:t.ONE_MINUS_CONSTANT_COLOR,[He]:t.CONSTANT_ALPHA,[Ge]:t.ONE_MINUS_CONSTANT_ALPHA};function K(e,n,i,r,a,o,s,l,c,d){if(e!==N){if(!1===m&&(W(t.BLEND),m=!0),e===Ve)a=a||n,o=o||i,s=s||r,n===_&&a===E||(t.blendEquationSeparate(Y[n],Y[a]),_=n,E=a),i===g&&r===v&&o===S&&s===T||(t.blendFuncSeparate(j[i],j[r],j[o],j[s]),g=i,v=r,S=o,T=s),!1!==l.equals(M)&&c===x||(t.blendColor(l.r,l.g,l.b,c),M.copy(l),x=c),h=e,R=!1;else if(e!==h||d!==R){if(_===xe&&E===xe||(t.blendEquation(t.FUNC_ADD),_=xe,E=xe),d)switch(e){case pe:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case We:t.blendFunc(t.ONE,t.ONE);break;case ke:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ze:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}else switch(e){case pe:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case We:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case ke:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ze:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}g=null,v=null,S=null,T=null,M.set(0,0,0),x=0,h=e,R=d}}else!0===m&&(X(t.BLEND),m=!1)}function q(e){A!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),A=e)}function Z(e){e!==Xe?(W(t.CULL_FACE),e!==b&&(e===Ye?t.cullFace(t.BACK):e===je?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):X(t.CULL_FACE),b=e}function $(e,n,i){e?(W(t.POLYGON_OFFSET_FILL),L===n&&P===i||(t.polygonOffset(n,i),L=n,P=i)):X(t.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:r,stencil:a},enable:W,disable:X,bindFramebuffer:function(e,n){return c[e]!==n&&(t.bindFramebuffer(e,n),c[e]=n,e===t.DRAW_FRAMEBUFFER&&(c[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(c[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let i=f,r=!1;if(e){i=u.get(n),void 0===i&&(i=[],u.set(n,i));const a=e.textures;if(i.length!==a.length||i[0]!==t.COLOR_ATTACHMENT0){for(let e=0,n=a.length;e<n;e++)i[e]=t.COLOR_ATTACHMENT0+e;i.length=a.length,r=!0}}else i[0]!==t.BACK&&(i[0]=t.BACK,r=!0);r&&t.drawBuffers(i)},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:K,setMaterial:function(e,n){e.side===me?X(t.CULL_FACE):W(t.CULL_FACE);let o=e.side===d;n&&(o=!o),q(o),e.blending===pe&&!1===e.transparent?K(N):K(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),r.setFunc(e.depthFunc),r.setTest(e.depthTest),r.setMask(e.depthWrite),i.setMask(e.colorWrite);const s=e.stencilWrite;a.setTest(s),s&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),$(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?W(t.SAMPLE_ALPHA_TO_COVERAGE):X(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:Z,setLineWidth:function(e){e!==C&&(w&&t.lineWidth(e),C=e)},setPolygonOffset:$,setScissorTest:function(e){e?W(t.SCISSOR_TEST):X(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+U-1),I!==e&&(t.activeTexture(e),I=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===I?t.TEXTURE0+U-1:I);let r=O[i];void 0===r&&(r={type:void 0,texture:void 0},O[i]=r),r.type===e&&r.texture===n||(I!==i&&(t.activeTexture(i),I=i),t.bindTexture(e,n||z[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=O[I];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},updateUBOMapping:function(e,n){let i=s.get(n);void 0===i&&(i=new WeakMap,s.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=s.get(n).get(e);o.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error(\"THREE.WebGLState:\",e)}},scissor:function(e){!1===H.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),H.copy(e))},viewport:function(e){!1===G.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),G.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),r.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),l={},I=null,O={},c={},u=new WeakMap,f=[],p=null,m=!1,h=null,_=null,g=null,v=null,E=null,S=null,T=null,M=new e(0,0,0),x=0,R=!1,A=null,b=null,C=null,L=null,P=null,H.set(0,0,t.canvas.width,t.canvas.height),G.set(0,0,t.canvas.width,t.canvas.height),i.reset(),r.reset(),a.reset()}}}function ia(e,t,i,r,a,o,s){const l=t.has(\"WEBGL_multisampled_render_to_texture\")?t.get(\"WEBGL_multisampled_render_to_texture\"):null,c=\"undefined\"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new n,p=new WeakMap;let m;const h=new WeakMap;let _=!1;try{_=\"undefined\"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext(\"2d\")}catch(e){}function g(e,t){return _?new OffscreenCanvas(e,t):Rt(\"canvas\")}function v(e,t,n){let i=1;const r=Z(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if(\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&e instanceof ImageBitmap||\"undefined\"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),a=Math.floor(i*r.height);void 0===m&&(m=g(n,a));const o=t?g(n,a):m;o.width=n,o.height=a;return o.getContext(\"2d\").drawImage(e,0,0,n,a),console.warn(\"THREE.WebGLRenderer: Texture has been resized from (\"+r.width+\"x\"+r.height+\") to (\"+n+\"x\"+a+\").\"),o}return\"data\"in e&&console.warn(\"THREE.WebGLRenderer: Image in DataTexture is too big (\"+r.width+\"x\"+r.height+\").\"),e}return e}function S(e){return e.generateMipmaps}function x(t){e.generateMipmap(t)}function R(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function A(n,i,r,a,o=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn(\"THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '\"+n+\"'\")}let s=i;if(i===e.RED&&(r===e.FLOAT&&(s=e.R32F),r===e.HALF_FLOAT&&(s=e.R16F),r===e.UNSIGNED_BYTE&&(s=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.R8UI),r===e.UNSIGNED_SHORT&&(s=e.R16UI),r===e.UNSIGNED_INT&&(s=e.R32UI),r===e.BYTE&&(s=e.R8I),r===e.SHORT&&(s=e.R16I),r===e.INT&&(s=e.R32I)),i===e.RG&&(r===e.FLOAT&&(s=e.RG32F),r===e.HALF_FLOAT&&(s=e.RG16F),r===e.UNSIGNED_BYTE&&(s=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RG8UI),r===e.UNSIGNED_SHORT&&(s=e.RG16UI),r===e.UNSIGNED_INT&&(s=e.RG32UI),r===e.BYTE&&(s=e.RG8I),r===e.SHORT&&(s=e.RG16I),r===e.INT&&(s=e.RG32I)),i===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGB8UI),r===e.UNSIGNED_SHORT&&(s=e.RGB16UI),r===e.UNSIGNED_INT&&(s=e.RGB32UI),r===e.BYTE&&(s=e.RGB8I),r===e.SHORT&&(s=e.RGB16I),r===e.INT&&(s=e.RGB32I)),i===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),r===e.UNSIGNED_INT&&(s=e.RGBA32UI),r===e.BYTE&&(s=e.RGBA8I),r===e.SHORT&&(s=e.RGBA16I),r===e.INT&&(s=e.RGBA32I)),i===e.RGB&&r===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),i===e.RGBA){const t=o?se:u.getTransfer(a);r===e.FLOAT&&(s=e.RGBA32F),r===e.HALF_FLOAT&&(s=e.RGBA16F),r===e.UNSIGNED_BYTE&&(s=t===f?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get(\"EXT_color_buffer_float\"),s}function b(t,n){let i;return t?null===n||n===St||n===Tt?i=e.DEPTH24_STENCIL8:n===M?i=e.DEPTH32F_STENCIL8:n===Mt&&(i=e.DEPTH24_STENCIL8,console.warn(\"DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.\")):null===n||n===St||n===Tt?i=e.DEPTH_COMPONENT24:n===M?i=e.DEPTH_COMPONENT32F:n===Mt&&(i=e.DEPTH_COMPONENT16),i}function C(e,t){return!0===S(e)||e.isFramebufferTexture&&e.minFilter!==Te&&e.minFilter!==F?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function L(e){const t=e.target;t.removeEventListener(\"dispose\",L),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=h.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&U(e),0===Object.keys(i).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function P(t){const n=t.target;n.removeEventListener(\"dispose\",P),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let i=0;i<n.__webglFramebuffer[t].length;i++)e.deleteFramebuffer(n.__webglFramebuffer[t][i]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function U(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete h.get(i)[n.__cacheKey],s.memory.textures--}let w=0;function D(t,n){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn(\"THREE.WebGLRenderer: Texture marked for update but no image data found.\");else{if(!1!==e.complete)return void G(a,t,n);console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\")}}i.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+n)}const y={[it]:e.REPEAT,[rt]:e.CLAMP_TO_EDGE,[at]:e.MIRRORED_REPEAT},I={[Te]:e.NEAREST,[ot]:e.NEAREST_MIPMAP_NEAREST,[st]:e.NEAREST_MIPMAP_LINEAR,[F]:e.LINEAR,[lt]:e.LINEAR_MIPMAP_NEAREST,[ct]:e.LINEAR_MIPMAP_LINEAR},N={[dt]:e.NEVER,[ut]:e.ALWAYS,[ft]:e.LESS,[X]:e.LEQUAL,[pt]:e.EQUAL,[mt]:e.GEQUAL,[ht]:e.GREATER,[_t]:e.NOTEQUAL};function O(n,i){if(i.type!==M||!1!==t.has(\"OES_texture_float_linear\")||i.magFilter!==F&&i.magFilter!==lt&&i.magFilter!==st&&i.magFilter!==ct&&i.minFilter!==F&&i.minFilter!==lt&&i.minFilter!==st&&i.minFilter!==ct||console.warn(\"THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.\"),e.texParameteri(n,e.TEXTURE_WRAP_S,y[i.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,y[i.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,y[i.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,I[i.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,I[i.minFilter]),i.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,N[i.compareFunction])),!0===t.has(\"EXT_texture_filter_anisotropic\")){if(i.magFilter===Te)return;if(i.minFilter!==st&&i.minFilter!==ct)return;if(i.type===M&&!1===t.has(\"OES_texture_float_linear\"))return;if(i.anisotropy>1||r.get(i).__currentAnisotropy){const o=t.get(\"EXT_texture_filter_anisotropic\");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy}}}function H(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener(\"dispose\",L));const r=n.source;let a=h.get(r);void 0===a&&(a={},h.set(r,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&U(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return i}function G(t,n,s){let l=e.TEXTURE_2D;(n.isDataArrayTexture||n.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),n.isData3DTexture&&(l=e.TEXTURE_3D);const c=H(t,n),d=n.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const f=r.get(d);if(d.version!==f.__version||!0===c){i.activeTexture(e.TEXTURE0+s);const t=u.getPrimaries(u.workingColorSpace),r=n.colorSpace===gt?null:u.getPrimaries(n.colorSpace),p=n.colorSpace===gt||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let m=v(n.image,!1,a.maxTextureSize);m=q(n,m);const h=o.convert(n.format,n.colorSpace),_=o.convert(n.type);let g,T=A(n.internalFormat,h,_,n.colorSpace,n.isVideoTexture);O(l,n);const M=n.mipmaps,R=!0!==n.isVideoTexture,L=void 0===f.__version||!0===c,P=d.dataReady,U=C(n,m);if(n.isDepthTexture)T=b(n.format===vt,n.type),L&&(R?i.texStorage2D(e.TEXTURE_2D,1,T,m.width,m.height):i.texImage2D(e.TEXTURE_2D,0,T,m.width,m.height,0,h,_,null));else if(n.isDataTexture)if(M.length>0){R&&L&&i.texStorage2D(e.TEXTURE_2D,U,T,M[0].width,M[0].height);for(let t=0,n=M.length;t<n;t++)g=M[t],R?P&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,g.width,g.height,h,_,g.data):i.texImage2D(e.TEXTURE_2D,t,T,g.width,g.height,0,h,_,g.data);n.generateMipmaps=!1}else R?(L&&i.texStorage2D(e.TEXTURE_2D,U,T,m.width,m.height),P&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,h,_,m.data)):i.texImage2D(e.TEXTURE_2D,0,T,m.width,m.height,0,h,_,m.data);else if(n.isCompressedTexture)if(n.isCompressedArrayTexture){R&&L&&i.texStorage3D(e.TEXTURE_2D_ARRAY,U,T,M[0].width,M[0].height,m.depth);for(let t=0,r=M.length;t<r;t++)if(g=M[t],n.format!==E)if(null!==h)if(R){if(P)if(n.layerUpdates.size>0){const r=Et(g.width,g.height,n.format,n.type);for(const a of n.layerUpdates){const n=g.data.subarray(a*r/g.data.BYTES_PER_ELEMENT,(a+1)*r/g.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,a,g.width,g.height,1,h,n)}n.clearLayerUpdates()}else i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,g.width,g.height,m.depth,h,g.data)}else i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,T,g.width,g.height,m.depth,0,g.data,0,0);else console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\");else R?P&&i.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,g.width,g.height,m.depth,h,_,g.data):i.texImage3D(e.TEXTURE_2D_ARRAY,t,T,g.width,g.height,m.depth,0,h,_,g.data)}else{R&&L&&i.texStorage2D(e.TEXTURE_2D,U,T,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)g=M[t],n.format!==E?null!==h?R?P&&i.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,g.width,g.height,h,g.data):i.compressedTexImage2D(e.TEXTURE_2D,t,T,g.width,g.height,0,g.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):R?P&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,g.width,g.height,h,_,g.data):i.texImage2D(e.TEXTURE_2D,t,T,g.width,g.height,0,h,_,g.data)}else if(n.isDataArrayTexture)if(R){if(L&&i.texStorage3D(e.TEXTURE_2D_ARRAY,U,T,m.width,m.height,m.depth),P)if(n.layerUpdates.size>0){const t=Et(m.width,m.height,n.format,n.type);for(const r of n.layerUpdates){const n=m.data.subarray(r*t/m.data.BYTES_PER_ELEMENT,(r+1)*t/m.data.BYTES_PER_ELEMENT);i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,m.width,m.height,1,h,_,n)}n.clearLayerUpdates()}else i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,h,_,m.data)}else i.texImage3D(e.TEXTURE_2D_ARRAY,0,T,m.width,m.height,m.depth,0,h,_,m.data);else if(n.isData3DTexture)R?(L&&i.texStorage3D(e.TEXTURE_3D,U,T,m.width,m.height,m.depth),P&&i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,h,_,m.data)):i.texImage3D(e.TEXTURE_3D,0,T,m.width,m.height,m.depth,0,h,_,m.data);else if(n.isFramebufferTexture){if(L)if(R)i.texStorage2D(e.TEXTURE_2D,U,T,m.width,m.height);else{let t=m.width,n=m.height;for(let r=0;r<U;r++)i.texImage2D(e.TEXTURE_2D,r,T,t,n,0,h,_,null),t>>=1,n>>=1}}else if(M.length>0){if(R&&L){const t=Z(M[0]);i.texStorage2D(e.TEXTURE_2D,U,T,t.width,t.height)}for(let t=0,n=M.length;t<n;t++)g=M[t],R?P&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,h,_,g):i.texImage2D(e.TEXTURE_2D,t,T,h,_,g);n.generateMipmaps=!1}else if(R){if(L){const t=Z(m);i.texStorage2D(e.TEXTURE_2D,U,T,t.width,t.height)}P&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,h,_,m)}else i.texImage2D(e.TEXTURE_2D,0,T,h,_,m);S(n)&&x(l),f.__version=d.version,n.onUpdate&&n.onUpdate(n)}t.__version=n.version}function V(t,n,a,s,c,d){const u=o.convert(a.format,a.colorSpace),f=o.convert(a.type),p=A(a.internalFormat,u,f,a.colorSpace),m=r.get(n),h=r.get(a);if(h.__renderTarget=n,!m.__hasExternalTextures){const t=Math.max(1,n.width>>d),r=Math.max(1,n.height>>d);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?i.texImage3D(c,d,p,t,r,n.depth,0,u,f,null):i.texImage2D(c,d,p,t,r,0,u,f,null)}i.bindFramebuffer(e.FRAMEBUFFER,t),K(n)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,c,h.__webglTexture,0,j(n)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,c,h.__webglTexture,d),i.bindFramebuffer(e.FRAMEBUFFER,null)}function z(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const r=n.depthTexture,a=r&&r.isDepthTexture?r.type:null,o=b(n.stencilBuffer,a),s=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=j(n);K(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,o,n.width,n.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,s,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const a=t[r],s=o.convert(a.format,a.colorSpace),c=o.convert(a.type),d=A(a.internalFormat,s,c,a.colorSpace),u=j(n);i&&!1===K(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,d,n.width,n.height):K(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,d,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,d,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function k(t){const n=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(n.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(n.__depthDisposeCallback&&n.__depthDisposeCallback(),e){const t=()=>{delete n.__boundDepthTexture,delete n.__depthDisposeCallback,e.removeEventListener(\"dispose\",t)};e.addEventListener(\"dispose\",t),n.__depthDisposeCallback=t}n.__boundDepthTexture=e}if(t.depthTexture&&!n.__autoAllocateDepthBuffer){if(a)throw new Error(\"target.depthTexture not supported in Cube render targets\");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error(\"Depth Texture with cube render targets is not supported\");if(i.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");const a=r.get(n.depthTexture);a.__renderTarget=n,a.__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),D(n.depthTexture,0);const o=a.__webglTexture,s=j(n);if(n.depthTexture.format===xt)K(n)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==vt)throw new Error(\"Unknown depthTexture format\");K(n)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(n.__webglFramebuffer,t)}else if(a){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(i.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[r]),void 0===n.__webglDepthbuffer[r])n.__webglDepthbuffer[r]=e.createRenderbuffer(),z(n.__webglDepthbuffer[r],t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=n.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,a)}}else if(i.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),void 0===n.__webglDepthbuffer)n.__webglDepthbuffer=e.createRenderbuffer(),z(n.__webglDepthbuffer,t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=n.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,r)}i.bindFramebuffer(e.FRAMEBUFFER,null)}const W=[],Y=[];function j(e){return Math.min(a.maxSamples,e.samples)}function K(e){const n=r.get(e);return e.samples>0&&!0===t.has(\"WEBGL_multisampled_render_to_texture\")&&!1!==n.__useRenderToTexture}function q(e,t){const n=e.colorSpace,i=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==B&&n!==gt&&(u.getTransfer(n)===f?i===E&&r===T||console.warn(\"THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.\"):console.error(\"THREE.WebGLTextures: Unsupported texture color space:\",n)),t}function Z(e){return\"undefined\"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(d.width=e.naturalWidth||e.width,d.height=e.naturalHeight||e.height):\"undefined\"!=typeof VideoFrame&&e instanceof VideoFrame?(d.width=e.displayWidth,d.height=e.displayHeight):(d.width=e.width,d.height=e.height),d}this.allocateTextureUnit=function(){const e=w;return e>=a.maxTextures&&console.warn(\"THREE.WebGLTextures: Trying to use \"+e+\" texture units while this GPU supports only \"+a.maxTextures),w+=1,e},this.resetTextureUnits=function(){w=0},this.setTexture2D=D,this.setTexture2DArray=function(t,n){const a=r.get(t);t.version>0&&a.__version!==t.version?G(a,t,n):i.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+n)},this.setTexture3D=function(t,n){const a=r.get(t);t.version>0&&a.__version!==t.version?G(a,t,n):i.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+n)},this.setTextureCube=function(t,n){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,n,s){if(6!==n.image.length)return;const l=H(t,n),c=n.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const d=r.get(c);if(c.version!==d.__version||!0===l){i.activeTexture(e.TEXTURE0+s);const t=u.getPrimaries(u.workingColorSpace),r=n.colorSpace===gt?null:u.getPrimaries(n.colorSpace),f=n.colorSpace===gt||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);const p=n.isCompressedTexture||n.image[0].isCompressedTexture,m=n.image[0]&&n.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=p||m?m?n.image[e].image:n.image[e]:v(n.image[e],!0,a.maxCubemapSize),h[e]=q(n,h[e]);const _=h[0],g=o.convert(n.format,n.colorSpace),T=o.convert(n.type),M=A(n.internalFormat,g,T,n.colorSpace),R=!0!==n.isVideoTexture,b=void 0===d.__version||!0===l,L=c.dataReady;let P,U=C(n,_);if(O(e.TEXTURE_CUBE_MAP,n),p){R&&b&&i.texStorage2D(e.TEXTURE_CUBE_MAP,U,M,_.width,_.height);for(let t=0;t<6;t++){P=h[t].mipmaps;for(let r=0;r<P.length;r++){const a=P[r];n.format!==E?null!==g?R?L&&i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,g,a.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,M,a.width,a.height,0,a.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):R?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,g,T,a.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,M,a.width,a.height,0,g,T,a.data)}}}else{if(P=n.mipmaps,R&&b){P.length>0&&U++;const t=Z(h[0]);i.texStorage2D(e.TEXTURE_CUBE_MAP,U,M,t.width,t.height)}for(let t=0;t<6;t++)if(m){R?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,h[t].width,h[t].height,g,T,h[t].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,M,h[t].width,h[t].height,0,g,T,h[t].data);for(let n=0;n<P.length;n++){const r=P[n].image[t].image;R?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,r.width,r.height,g,T,r.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,M,r.width,r.height,0,g,T,r.data)}}else{R?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,g,T,h[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,M,g,T,h[t]);for(let n=0;n<P.length;n++){const r=P[n];R?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,g,T,r.image[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,M,g,T,r.image[t])}}}S(n)&&x(e.TEXTURE_CUBE_MAP),d.__version=c.version,n.onUpdate&&n.onUpdate(n)}t.__version=n.version}(s,t,n):i.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+n)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&V(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&k(t)},this.setupRenderTarget=function(t){const n=t.texture,a=r.get(t),l=r.get(n);t.addEventListener(\"dispose\",P);const c=t.textures,d=!0===t.isWebGLCubeRenderTarget,u=c.length>1;if(u||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=n.version,s.memory.textures++),d){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(n.mipmaps&&n.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let i=0;i<n.mipmaps.length;i++)a.__webglFramebuffer[t][i]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(n.mipmaps&&n.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<n.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(u)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===K(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];a.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[n]);const r=o.convert(i.format,i.colorSpace),s=o.convert(i.type),l=A(i.internalFormat,r,s,i.colorSpace,!0===t.isXRRenderTarget),d=j(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,d,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,a.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),z(a.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){i.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),O(e.TEXTURE_CUBE_MAP,n);for(let i=0;i<6;i++)if(n.mipmaps&&n.mipmaps.length>0)for(let r=0;r<n.mipmaps.length;r++)V(a.__webglFramebuffer[i][r],t,n,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,r);else V(a.__webglFramebuffer[i],t,n,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);S(n)&&x(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(u){for(let n=0,o=c.length;n<o;n++){const o=c[n],s=r.get(o);i.bindTexture(e.TEXTURE_2D,s.__webglTexture),O(e.TEXTURE_2D,o),V(a.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+n,e.TEXTURE_2D,0),S(o)&&x(e.TEXTURE_2D)}i.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),i.bindTexture(r,l.__webglTexture),O(r,n),n.mipmaps&&n.mipmaps.length>0)for(let i=0;i<n.mipmaps.length;i++)V(a.__webglFramebuffer[i],t,n,e.COLOR_ATTACHMENT0,r,i);else V(a.__webglFramebuffer,t,n,e.COLOR_ATTACHMENT0,r,0);S(n)&&x(r),i.unbindTexture()}t.depthBuffer&&k(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let n=0,a=t.length;n<a;n++){const a=t[n];if(S(a)){const t=R(e),n=r.get(a).__webglTexture;i.bindTexture(t,n),x(t),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===K(t)){const n=t.textures,a=t.width,o=t.height;let s=e.COLOR_BUFFER_BIT;const l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),u=n.length>1;if(u)for(let t=0;t<n.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let i=0;i<n.length;i++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),u){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[i]);const t=r.get(n[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===c&&(W.length=0,Y.length=0,W.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&!1===t.resolveDepthBuffer&&(W.push(l),Y.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,Y)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,W))}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<n.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const a=r.get(n[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&c){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=k,this.setupFrameBufferTexture=V,this.useMultisampledRTT=K}function ra(e,t){return{convert:function(n,i=gt){let r;const a=u.getTransfer(i);if(n===T)return e.UNSIGNED_BYTE;if(n===At)return e.UNSIGNED_SHORT_4_4_4_4;if(n===bt)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ct)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Lt)return e.BYTE;if(n===Pt)return e.SHORT;if(n===Mt)return e.UNSIGNED_SHORT;if(n===v)return e.INT;if(n===St)return e.UNSIGNED_INT;if(n===M)return e.FLOAT;if(n===S)return e.HALF_FLOAT;if(n===Ut)return e.ALPHA;if(n===wt)return e.RGB;if(n===E)return e.RGBA;if(n===Dt)return e.LUMINANCE;if(n===yt)return e.LUMINANCE_ALPHA;if(n===xt)return e.DEPTH_COMPONENT;if(n===vt)return e.DEPTH_STENCIL;if(n===It)return e.RED;if(n===Nt)return e.RED_INTEGER;if(n===Ot)return e.RG;if(n===Ft)return e.RG_INTEGER;if(n===Bt)return e.RGBA_INTEGER;if(n===Ht||n===Gt||n===Vt||n===zt)if(a===f){if(r=t.get(\"WEBGL_compressed_texture_s3tc_srgb\"),null===r)return null;if(n===Ht)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Gt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Vt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===zt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get(\"WEBGL_compressed_texture_s3tc\"),null===r)return null;if(n===Ht)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Gt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Vt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===zt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===kt||n===Wt||n===Xt||n===Yt){if(r=t.get(\"WEBGL_compressed_texture_pvrtc\"),null===r)return null;if(n===kt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Wt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Xt)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Yt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===jt||n===Kt||n===qt){if(r=t.get(\"WEBGL_compressed_texture_etc\"),null===r)return null;if(n===jt||n===Kt)return a===f?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===qt)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Zt||n===$t||n===Qt||n===Jt||n===en||n===tn||n===nn||n===rn||n===an||n===on||n===sn||n===ln||n===cn||n===dn){if(r=t.get(\"WEBGL_compressed_texture_astc\"),null===r)return null;if(n===Zt)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===$t)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Qt)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Jt)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===en)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===tn)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===nn)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===rn)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===an)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===on)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===sn)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ln)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===cn)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===dn)return a===f?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===un||n===fn||n===pn){if(r=t.get(\"EXT_texture_compression_bptc\"),null===r)return null;if(n===un)return a===f?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===fn)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===pn)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===mn||n===hn||n===_n||n===gn){if(r=t.get(\"EXT_texture_compression_rgtc\"),null===r)return null;if(n===un)return r.COMPRESSED_RED_RGTC1_EXT;if(n===hn)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===_n)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===gn)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Tt?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}const aa={type:\"move\"};class oa{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:\"connected\",data:e}),this}disconnect(e){return this.dispatchEvent({type:\"disconnected\",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&\"visible-blurred\"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints[\"index-finger-tip\"],r=l.joints[\"thumb-tip\"],o=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:\"pinchend\",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:\"pinchstart\",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(aa)))}return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new vn;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class sa{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const i=new Y;e.properties.get(i).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new l({vertexShader:\"\\nvoid main() {\\n\\n\\tgl_Position = vec4( position, 1.0 );\\n\\n}\",fragmentShader:\"\\nuniform sampler2DArray depthColor;\\nuniform float depthWidth;\\nuniform float depthHeight;\\n\\nvoid main() {\\n\\n\\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\\n\\n\\tif ( coord.x >= 1.0 ) {\\n\\n\\t\\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\\n\\n\\t} else {\\n\\n\\t\\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\\n\\n\\t}\\n\\n}\",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new o(new p(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class la extends En{constructor(e,t){super();const i=this;let a=null,o=1,s=null,l=\"local-floor\",c=1,d=null,u=null,f=null,p=null,m=null,h=null;const _=new sa,g=t.getContextAttributes();let v=null,S=null;const M=[],x=[],R=new n;let A=null;const b=new P;b.viewport=new k;const C=new P;C.viewport=new k;const L=[b,C],U=new Sn;let w=null,D=null;function y(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=M[t];void 0!==n&&(n.update(e.inputSource,e.frame,d||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function N(){a.removeEventListener(\"select\",y),a.removeEventListener(\"selectstart\",y),a.removeEventListener(\"selectend\",y),a.removeEventListener(\"squeeze\",y),a.removeEventListener(\"squeezestart\",y),a.removeEventListener(\"squeezeend\",y),a.removeEventListener(\"end\",N),a.removeEventListener(\"inputsourceschange\",O);for(let e=0;e<M.length;e++){const t=x[e];null!==t&&(x[e]=null,M[e].disconnect(t))}w=null,D=null,_.reset(),e.setRenderTarget(v),m=null,p=null,f=null,a=null,S=null,V.stop(),i.isPresenting=!1,e.setPixelRatio(A),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:\"sessionend\"})}function O(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=x.indexOf(n);i>=0&&(x[i]=null,M[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=x.indexOf(n);if(-1===i){for(let e=0;e<M.length;e++){if(e>=x.length){x.push(n),i=e;break}if(null===x[e]){x[e]=n,i=e;break}}if(-1===i)break}const r=M[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=M[e];return void 0===t&&(t=new oa,M[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=M[e];return void 0===t&&(t=new oa,M[e]=t),t.getGripSpace()},this.getHand=function(e){let t=M[e];return void 0===t&&(t=new oa,M[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===i.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change framebuffer scale while presenting.\")},this.setReferenceSpaceType=function(e){l=e,!0===i.isPresenting&&console.warn(\"THREE.WebXRManager: Cannot change reference space type while presenting.\")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(e){d=e},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return f},this.getFrame=function(){return h},this.getSession=function(){return a},this.setSession=async function(n){if(a=n,null!==a){if(v=e.getRenderTarget(),a.addEventListener(\"select\",y),a.addEventListener(\"selectstart\",y),a.addEventListener(\"selectend\",y),a.addEventListener(\"squeeze\",y),a.addEventListener(\"squeezestart\",y),a.addEventListener(\"squeezeend\",y),a.addEventListener(\"end\",N),a.addEventListener(\"inputsourceschange\",O),!0!==g.xrCompatible&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(R),void 0===a.renderState.layers){const n={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(a,t,n),a.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new I(m.framebufferWidth,m.framebufferHeight,{format:E,type:T,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let n=null,i=null,r=null;g.depth&&(r=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=g.stencil?vt:xt,i=g.stencil?Tt:St);const s={colorFormat:t.RGBA8,depthFormat:r,scaleFactor:o};f=new XRWebGLBinding(a,t),p=f.createProjectionLayer(s),a.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new I(p.textureWidth,p.textureHeight,{format:E,type:T,depthTexture:new j(p.textureWidth,p.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues})}S.isXRRenderTarget=!0,this.setFoveation(c),d=null,s=await a.requestReferenceSpace(l),V.setContext(a),V.start(),i.isPresenting=!0,i.dispatchEvent({type:\"sessionstart\"})}},this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};const F=new r,B=new r;function H(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===a)return;let t=e.near,n=e.far;null!==_.texture&&(_.depthNear>0&&(t=_.depthNear),_.depthFar>0&&(n=_.depthFar)),U.near=C.near=b.near=t,U.far=C.far=b.far=n,w===U.near&&D===U.far||(a.updateRenderState({depthNear:U.near,depthFar:U.far}),w=U.near,D=U.far),b.layers.mask=2|e.layers.mask,C.layers.mask=4|e.layers.mask,U.layers.mask=b.layers.mask|C.layers.mask;const i=e.parent,r=U.cameras;H(U,i);for(let e=0;e<r.length;e++)H(r[e],i);2===r.length?function(e,t,n){F.setFromMatrixPosition(t.matrixWorld),B.setFromMatrixPosition(n.matrixWorld);const i=F.distanceTo(B),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],d=(r[8]-1)/r[0],u=(a[8]+1)/a[0],f=o*d,p=o*u,m=i/(-d+u),h=m*-d;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(h),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=o+m,n=s+m,r=f-h,a=p+(i-h),d=l*s/n*t,u=c*s/n*t;e.projectionMatrix.makePerspective(r,a,d,u,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(U,b,C):U.projectionMatrix.copy(b.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Tn*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,U,i)},this.getCamera=function(){return U},this.getFoveation=function(){if(null!==p||null!==m)return c},this.setFoveation=function(e){c=e,null!==p&&(p.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==_.texture},this.getDepthSensingMesh=function(){return _.getMesh(U)};let G=null;const V=new Pn;V.setAnimationLoop((function(t,n){if(u=n.getViewerPose(d||s),h=n,null!==u){const t=u.views;null!==m&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let n=!1;t.length!==U.cameras.length&&(U.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let a=null;if(null!==m)a=m.getViewport(r);else{const t=f.getViewSubImage(p,r);a=t.viewport,0===i&&(e.setRenderTargetTextures(S,t.colorTexture,p.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(S))}let o=L[i];void 0===o&&(o=new P,o.layers.enable(i),o.viewport=new k,L[i]=o),o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(r.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(a.x,a.y,a.width,a.height),0===i&&(U.matrix.copy(o.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),!0===n&&U.cameras.push(o)}const i=a.enabledFeatures;if(i&&i.includes(\"depth-sensing\")){const n=f.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&_.init(e,n,a.renderState)}}for(let e=0;e<M.length;e++){const t=x[e],i=M[e];null!==t&&void 0!==i&&i.update(t,n,d||s)}G&&G(t,n),n.detectedPlanes&&i.dispatchEvent({type:\"planesdetected\",data:n}),h=null})),this.setAnimationLoop=function(e){G=e},this.dispose=function(){}}}const ca=new _,da=new g;function ua(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===d&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===d&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);const r=t.get(i),a=r.envMap,o=r.envMapRotation;a&&(e.envMap.value=a,ca.copy(o),ca.x*=-1,ca.y*=-1,ca.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(ca.y*=-1,ca.z*=-1),e.envMapRotation.value.setFromMatrix4(da.makeRotationFromEuler(ca)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,h(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,a,o,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===d&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,s)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function fa(e,t,n,i){let r={},a={},o=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,a=t+\"_\"+n;if(void 0===i[a])return i[a]=\"number\"==typeof r||\"boolean\"==typeof r?r:r.clone(),!0;{const e=i[a];if(\"number\"==typeof r||\"boolean\"==typeof r){if(e!==r)return i[a]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return\"number\"==typeof e||\"boolean\"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn(\"THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.\"):console.warn(\"THREE.WebGLRenderer: Unsupported uniform value type.\",e),t}function d(t){const n=t.target;n.removeEventListener(\"dispose\",d);const i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,u){let f=r[n.id];void 0===f&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],a=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=a.length;e<r;e++){const r=c(a[e]),o=n%i,s=o%r.boundary,l=o+s;n+=s,0!==l&&i-l<r.storage&&(n+=i-l),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),f=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error(\"THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.\"),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=f,n.addEventListener(\"dispose\",d));const p=u.program;i.updateUBOMapping(n,p);const m=t.render.frame;a[n.id]!==m&&(!function(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=i.length;t<n;t++){const n=Array.isArray(i[t])?i[t]:[i[t]];for(let i=0,r=n.length;i<r;i++){const r=n[i];if(!0===l(r,t,i,a)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let a=0;a<n.length;a++){const o=n[a],s=c(o);\"number\"==typeof o||\"boolean\"==typeof o?(r.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):o.isMatrix3?(r.__data[0]=o.elements[0],r.__data[1]=o.elements[1],r.__data[2]=o.elements[2],r.__data[3]=0,r.__data[4]=o.elements[3],r.__data[5]=o.elements[4],r.__data[6]=o.elements[5],r.__data[7]=0,r.__data[8]=o.elements[6],r.__data[9]=o.elements[7],r.__data[10]=o.elements[8],r.__data[11]=0):(o.toArray(r.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=m)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}}}class pa{constructor(t={}){const{canvas:n=Mn(),context:i=null,depth:a=!0,stencil:o=!1,alpha:s=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p=\"default\",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:_=!1}=t;let v;if(this.isWebGLRenderer=!0,null!==i){if(\"undefined\"!=typeof WebGLRenderingContext&&i instanceof WebGLRenderingContext)throw new Error(\"THREE.WebGLRenderer: WebGL 1 is not supported since r163.\");v=i.getContextAttributes().alpha}else v=s;const E=new Uint32Array(4),M=new Int32Array(4);let x=null,R=null;const A=[],b=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=xn,this.toneMapping=U,this.toneMappingExposure=1;const C=this;let L=!1,P=0,w=0,D=null,y=-1,N=null;const O=new k,F=new k;let G=null;const V=new e(0);let z=0,W=n.width,X=n.height,Y=1,j=null,K=null;const q=new k(0,0,W,X),Z=new k(0,0,W,X);let $=!1;const Q=new ge;let J=!1,ee=!1;const te=new g,ne=new g,ie=new r,re=new k,ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let oe=!1;function se(){return null===D?Y:1}let le,ce,de,ue,fe,pe,he,_e,ve,Ee,Se,Te,Me,xe,Re,Ae,be,Ce,Le,Pe,Ue,we,De,ye,Ie=i;function Ne(e,t){return n.getContext(e,t)}try{const e={alpha:!0,depth:a,stencil:o,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:h};if(\"setAttribute\"in n&&n.setAttribute(\"data-engine\",`three.js r${Rn}`),n.addEventListener(\"webglcontextlost\",Be,!1),n.addEventListener(\"webglcontextrestored\",He,!1),n.addEventListener(\"webglcontextcreationerror\",Ge,!1),null===Ie){const t=\"webgl2\";if(Ie=Ne(t,e),null===Ie)throw Ne(t)?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\")}}catch(e){throw console.error(\"THREE.WebGLRenderer: \"+e.message),e}function Oe(){le=new si(Ie),le.init(),we=new ra(Ie,le),ce=new Gn(Ie,le,t,we),de=new na(Ie,le),ce.reverseDepthBuffer&&_&&de.buffers.depth.setReversed(!0),ue=new di(Ie),fe=new kr,pe=new ia(Ie,le,de,fe,ce,we,ue),he=new zn(C),_e=new oi(C),ve=new Un(Ie),De=new Bn(Ie,ve),Ee=new li(Ie,ve,ue,De),Se=new fi(Ie,Ee,ve,ue),Le=new ui(Ie,ce,pe),Ae=new Vn(fe),Te=new zr(C,he,_e,le,ce,De,Ae),Me=new ua(C,fe),xe=new jr,Re=new Jr(le),Ce=new Fn(C,he,_e,de,Se,v,c),be=new ea(C,Se,ce),ye=new fa(Ie,ue,ce,de),Pe=new Hn(Ie,le,ue),Ue=new ci(Ie,le,ue),ue.programs=Te.programs,C.capabilities=ce,C.extensions=le,C.properties=fe,C.renderLists=xe,C.shadowMap=be,C.state=de,C.info=ue}Oe();const Fe=new la(C,Ie);function Be(e){e.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),L=!0}function He(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),L=!1;const e=ue.autoReset,t=be.enabled,n=be.autoUpdate,i=be.needsUpdate,r=be.type;Oe(),ue.autoReset=e,be.enabled=t,be.autoUpdate=n,be.needsUpdate=i,be.type=r}function Ge(e){console.error(\"THREE.WebGLRenderer: A WebGL context could not be created. Reason: \",e.statusMessage)}function Ve(e){const t=e.target;t.removeEventListener(\"dispose\",Ve),function(e){(function(e){const t=fe.get(e).programs;void 0!==t&&(t.forEach((function(e){Te.releaseProgram(e)})),e.isShaderMaterial&&Te.releaseShaderCache(e))})(e),fe.remove(e)}(t)}function ze(e,t,n){!0===e.transparent&&e.side===me&&!1===e.forceSinglePass?(e.side=d,e.needsUpdate=!0,Qe(e,t,n),e.side=m,e.needsUpdate=!0,Qe(e,t,n),e.side=me):Qe(e,t,n)}this.xr=Fe,this.getContext=function(){return Ie},this.getContextAttributes=function(){return Ie.getContextAttributes()},this.forceContextLoss=function(){const e=le.get(\"WEBGL_lose_context\");e&&e.loseContext()},this.forceContextRestore=function(){const e=le.get(\"WEBGL_lose_context\");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(W,X,!1))},this.getSize=function(e){return e.set(W,X)},this.setSize=function(e,t,i=!0){Fe.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(W=e,X=t,n.width=Math.floor(e*Y),n.height=Math.floor(t*Y),!0===i&&(n.style.width=e+\"px\",n.style.height=t+\"px\"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(W*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,t,i){W=e,X=t,Y=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(O)},this.getViewport=function(e){return e.copy(q)},this.setViewport=function(e,t,n,i){e.isVector4?q.set(e.x,e.y,e.z,e.w):q.set(e,t,n,i),de.viewport(O.copy(q).multiplyScalar(Y).round())},this.getScissor=function(e){return e.copy(Z)},this.setScissor=function(e,t,n,i){e.isVector4?Z.set(e.x,e.y,e.z,e.w):Z.set(e,t,n,i),de.scissor(F.copy(Z).multiplyScalar(Y).round())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){de.setScissorTest($=e)},this.setOpaqueSort=function(e){j=e},this.setTransparentSort=function(e){K=e},this.getClearColor=function(e){return e.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==D){const t=D.texture.format;e=t===Bt||t===Ft||t===Nt}if(e){const e=D.texture.type,t=e===T||e===St||e===Mt||e===Tt||e===At||e===bt,n=Ce.getClearColor(),i=Ce.getClearAlpha(),r=n.r,a=n.g,o=n.b;t?(E[0]=r,E[1]=a,E[2]=o,E[3]=i,Ie.clearBufferuiv(Ie.COLOR,0,E)):(M[0]=r,M[1]=a,M[2]=o,M[3]=i,Ie.clearBufferiv(Ie.COLOR,0,M))}else i|=Ie.COLOR_BUFFER_BIT}t&&(i|=Ie.DEPTH_BUFFER_BIT),n&&(i|=Ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ie.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener(\"webglcontextlost\",Be,!1),n.removeEventListener(\"webglcontextrestored\",He,!1),n.removeEventListener(\"webglcontextcreationerror\",Ge,!1),Ce.dispose(),xe.dispose(),Re.dispose(),fe.dispose(),he.dispose(),_e.dispose(),Se.dispose(),De.dispose(),ye.dispose(),Te.dispose(),Fe.dispose(),Fe.removeEventListener(\"sessionstart\",We),Fe.removeEventListener(\"sessionend\",Xe),Ye.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=ae);const o=r.isMesh&&r.matrixWorld.determinant()<0,s=function(e,t,n,i,r){!0!==t.isScene&&(t=ae);pe.resetTextureUnits();const a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,s=null===D?C.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:B,l=(i.isMeshStandardMaterial?_e:he).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,d=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),u=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=U;i.toneMapped&&(null!==D&&!0!==D.isXRRenderTarget||(m=C.toneMapping));const h=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,_=void 0!==h?h.length:0,g=fe.get(i),v=R.state.lights;if(!0===J&&(!0===ee||e!==N)){const t=e===N&&i.id===y;Ae.setState(i,e,t)}let E=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==v.state.version||g.outputColorSpace!==s||r.isBatchedMesh&&!1===g.batching?E=!0:r.isBatchedMesh||!0!==g.batching?r.isBatchedMesh&&!0===g.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===g.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===g.instancing?E=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?E=!0:r.isSkinnedMesh||!0!==g.skinning?r.isInstancedMesh&&!0===g.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===g.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===g.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===g.instancingMorph&&null!==r.morphTexture||g.envMap!==l||!0===i.fog&&g.fog!==a?E=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===Ae.numPlanes&&g.numIntersection===Ae.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==d||g.morphTargets!==u||g.morphNormals!==f||g.morphColors!==p||g.toneMapping!==m||g.morphTargetsCount!==_)&&(E=!0):E=!0:E=!0:E=!0:E=!0:(E=!0,g.__version=i.version);let S=g.currentProgram;!0===E&&(S=Qe(i,t,r));let T=!1,M=!1,x=!1;const A=S.getUniforms(),b=g.uniforms;de.useProgram(S.program)&&(T=!0,M=!0,x=!0);i.id!==y&&(y=i.id,M=!0);if(T||N!==e){de.buffers.depth.getReversed()?(te.copy(e.projectionMatrix),An(te),bn(te),A.setValue(Ie,\"projectionMatrix\",te)):A.setValue(Ie,\"projectionMatrix\",e.projectionMatrix),A.setValue(Ie,\"viewMatrix\",e.matrixWorldInverse);const t=A.map.cameraPosition;void 0!==t&&t.setValue(Ie,ie.setFromMatrixPosition(e.matrixWorld)),ce.logarithmicDepthBuffer&&A.setValue(Ie,\"logDepthBufFC\",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&A.setValue(Ie,\"isOrthographic\",!0===e.isOrthographicCamera),N!==e&&(N=e,M=!0,x=!0)}if(r.isSkinnedMesh){A.setOptional(Ie,r,\"bindMatrix\"),A.setOptional(Ie,r,\"bindMatrixInverse\");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),A.setValue(Ie,\"boneTexture\",e.boneTexture,pe))}r.isBatchedMesh&&(A.setOptional(Ie,r,\"batchingTexture\"),A.setValue(Ie,\"batchingTexture\",r._matricesTexture,pe),A.setOptional(Ie,r,\"batchingIdTexture\"),A.setValue(Ie,\"batchingIdTexture\",r._indirectTexture,pe),A.setOptional(Ie,r,\"batchingColorTexture\"),null!==r._colorsTexture&&A.setValue(Ie,\"batchingColorTexture\",r._colorsTexture,pe));const L=n.morphAttributes;void 0===L.position&&void 0===L.normal&&void 0===L.color||Le.update(r,n,S);(M||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,A.setValue(Ie,\"receiveShadow\",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(b.envMap.value=l,b.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(b.envMapIntensity.value=t.environmentIntensity);M&&(A.setValue(Ie,\"toneMappingExposure\",C.toneMappingExposure),g.needsLights&&(w=x,(P=b).ambientLightColor.needsUpdate=w,P.lightProbe.needsUpdate=w,P.directionalLights.needsUpdate=w,P.directionalLightShadows.needsUpdate=w,P.pointLights.needsUpdate=w,P.pointLightShadows.needsUpdate=w,P.spotLights.needsUpdate=w,P.spotLightShadows.needsUpdate=w,P.rectAreaLights.needsUpdate=w,P.hemisphereLights.needsUpdate=w),a&&!0===i.fog&&Me.refreshFogUniforms(b,a),Me.refreshMaterialUniforms(b,i,Y,X,R.state.transmissionRenderTarget[e.id]),gr.upload(Ie,Je(g),b,pe));var P,w;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(gr.upload(Ie,Je(g),b,pe),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&A.setValue(Ie,\"center\",r.center);if(A.setValue(Ie,\"modelViewMatrix\",r.modelViewMatrix),A.setValue(Ie,\"normalMatrix\",r.normalMatrix),A.setValue(Ie,\"modelMatrix\",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ye.update(n,S),ye.bind(n,S)}}return S}(e,t,n,i,r);de.setMaterial(i,o);let l=n.index,c=1;if(!0===i.wireframe){if(l=Ee.getWireframeAttribute(n),void 0===l)return;c=2}const d=n.drawRange,u=n.attributes.position;let f=d.start*c,p=(d.start+d.count)*c;null!==a&&(f=Math.max(f,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(f=Math.max(f,0),p=Math.min(p,l.count)):null!=u&&(f=Math.max(f,0),p=Math.min(p,u.count));const m=p-f;if(m<0||m===1/0)return;let h;De.setup(r,i,s,n,l);let _=Pe;if(null!==l&&(h=ve.get(l),_=Ue,_.setIndex(h)),r.isMesh)!0===i.wireframe?(de.setLineWidth(i.wireframeLinewidth*se()),_.setMode(Ie.LINES)):_.setMode(Ie.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),de.setLineWidth(e*se()),r.isLineSegments?_.setMode(Ie.LINES):r.isLineLoop?_.setMode(Ie.LINE_LOOP):_.setMode(Ie.LINE_STRIP)}else r.isPoints?_.setMode(Ie.POINTS):r.isSprite&&_.setMode(Ie.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)_.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(le.get(\"WEBGL_multi_draw\"))_.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,n=r._multiDrawCount,a=l?ve.get(l).bytesPerElement:1,o=fe.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)o.setValue(Ie,\"_gl_DrawID\",i),_.render(e[i]/a,t[i])}else if(r.isInstancedMesh)_.renderInstances(f,m,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);_.renderInstances(f,m,t)}else _.render(f,m)},this.compile=function(e,t,n=null){null===n&&(n=e),R=Re.get(n),R.init(t),b.push(R),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(R.pushLight(e),e.castShadow&&R.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(R.pushLight(e),e.castShadow&&R.pushShadow(e))})),R.setupLights();const i=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];ze(a,n,e),i.add(a)}else ze(t,n,e),i.add(t)})),b.pop(),R=null,i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise((t=>{function n(){i.forEach((function(e){fe.get(e).currentProgram.isReady()&&i.delete(e)})),0!==i.size?setTimeout(n,10):t(e)}null!==le.get(\"KHR_parallel_shader_compile\")?n():setTimeout(n,10)}))};let ke=null;function We(){Ye.stop()}function Xe(){Ye.start()}const Ye=new Pn;function je(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)R.pushLight(e),e.castShadow&&R.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Q.intersectsSprite(e)){i&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ne);const t=Se.update(e),r=e.material;r.visible&&x.push(e,t,r,n,re.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Q.intersectsObject(e))){const t=Se.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),re.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),re.copy(t.boundingSphere.center)),re.applyMatrix4(e.matrixWorld).applyMatrix4(ne)),Array.isArray(r)){const i=t.groups;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r[o.materialIndex];s&&s.visible&&x.push(e,t,s,n,re.z,o)}}else r.visible&&x.push(e,t,r,n,re.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)je(r[e],t,n,i)}function Ke(e,t,n,i){const r=e.opaque,a=e.transmissive,o=e.transparent;R.setupLightsView(n),!0===J&&Ae.setGlobalState(C.clippingPlanes,n),i&&de.viewport(O.copy(i)),r.length>0&&Ze(r,t,n),a.length>0&&Ze(a,t,n),o.length>0&&Ze(o,t,n),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1)}function qe(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===R.state.transmissionRenderTarget[i.id]&&(R.state.transmissionRenderTarget[i.id]=new I(1,1,{generateMipmaps:!0,type:le.has(\"EXT_color_buffer_half_float\")||le.has(\"EXT_color_buffer_float\")?S:T,minFilter:ct,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:u.workingColorSpace}));const r=R.state.transmissionRenderTarget[i.id],a=i.viewport||O;r.setSize(a.z,a.w);const s=C.getRenderTarget();C.setRenderTarget(r),C.getClearColor(V),z=C.getClearAlpha(),z<1&&C.setClearColor(16777215,.5),C.clear(),oe&&Ce.render(n);const l=C.toneMapping;C.toneMapping=U;const c=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),R.setupLightsView(i),!0===J&&Ae.setGlobalState(C.clippingPlanes,i),Ze(e,n,i),pe.updateMultisampleRenderTarget(r),pe.updateRenderTargetMipmap(r),!1===le.has(\"WEBGL_multisampled_render_to_texture\")){let e=!1;for(let r=0,a=t.length;r<a;r++){const a=t[r],o=a.object,s=a.geometry,l=a.material,c=a.group;if(l.side===me&&o.layers.test(i.layers)){const t=l.side;l.side=d,l.needsUpdate=!0,$e(o,n,i,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(pe.updateMultisampleRenderTarget(r),pe.updateRenderTargetMipmap(r))}C.setRenderTarget(s),C.setClearColor(V,z),void 0!==c&&(i.viewport=c),C.toneMapping=l}function Ze(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],o=a.object,s=a.geometry,l=null===i?a.material:i,c=a.group;o.layers.test(n.layers)&&$e(o,t,n,s,l,c)}}function $e(e,t,n,i,r,a){e.onBeforeRender(C,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(C,t,n,i,e,a),!0===r.transparent&&r.side===me&&!1===r.forceSinglePass?(r.side=d,r.needsUpdate=!0,C.renderBufferDirect(n,t,i,r,e,a),r.side=m,r.needsUpdate=!0,C.renderBufferDirect(n,t,i,r,e,a),r.side=me):C.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(C,t,n,i,r,a)}function Qe(e,t,n){!0!==t.isScene&&(t=ae);const i=fe.get(e),r=R.state.lights,a=R.state.shadowsArray,o=r.state.version,s=Te.getParameters(e,r.state,a,t,n),l=Te.getProgramCacheKey(s);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?_e:he).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener(\"dispose\",Ve),c=new Map,i.programs=c);let d=c.get(l);if(void 0!==d){if(i.currentProgram===d&&i.lightsStateVersion===o)return et(e,s),d}else s.uniforms=Te.getUniforms(e),e.onBeforeCompile(s,C),d=Te.acquireProgram(s,l),c.set(l,d),i.uniforms=s.uniforms;const u=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=Ae.uniform),et(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=d,i.uniformsList=null,d}function Je(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=gr.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function et(e,t){const n=fe.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ye.setAnimationLoop((function(e){ke&&ke(e)})),\"undefined\"!=typeof self&&Ye.setContext(self),this.setAnimationLoop=function(e){ke=e,Fe.setAnimationLoop(e),null===e?Ye.stop():Ye.start()},Fe.addEventListener(\"sessionstart\",We),Fe.addEventListener(\"sessionend\",Xe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");if(!0===L)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Fe.enabled&&!0===Fe.isPresenting&&(!0===Fe.cameraAutoUpdate&&Fe.updateCamera(t),t=Fe.getCamera()),!0===e.isScene&&e.onBeforeRender(C,e,t,D),R=Re.get(e,b.length),R.init(t),b.push(R),ne.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Q.setFromProjectionMatrix(ne),ee=this.localClippingEnabled,J=Ae.init(this.clippingPlanes,ee),x=xe.get(e,A.length),x.init(),A.push(x),!0===Fe.enabled&&!0===Fe.isPresenting){const e=C.xr.getDepthSensingMesh();null!==e&&je(e,t,-1/0,C.sortObjects)}je(e,t,0,C.sortObjects),x.finish(),!0===C.sortObjects&&x.sort(j,K),oe=!1===Fe.enabled||!1===Fe.isPresenting||!1===Fe.hasDepthSensing(),oe&&Ce.addToRenderList(x,e),this.info.render.frame++,!0===J&&Ae.beginShadows();const n=R.state.shadowsArray;be.render(n,e,t),!0===J&&Ae.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=x.opaque,r=x.transmissive;if(R.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,a=n.length;t<a;t++){qe(i,r,e,n[t])}oe&&Ce.render(e);for(let t=0,i=n.length;t<i;t++){const i=n[t];Ke(x,e,i,i.viewport)}}else r.length>0&&qe(i,r,e,t),oe&&Ce.render(e),Ke(x,e,t);null!==D&&(pe.updateMultisampleRenderTarget(D),pe.updateRenderTargetMipmap(D)),!0===e.isScene&&e.onAfterRender(C,e,t),De.resetDefaultState(),y=-1,N=null,b.pop(),b.length>0?(R=b[b.length-1],!0===J&&Ae.setGlobalState(C.clippingPlanes,R.state.camera)):R=null,A.pop(),x=A.length>0?A[A.length-1]:null},this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(e,t,n){fe.get(e.texture).__webglTexture=t,fe.get(e.depthTexture).__webglTexture=n;const i=fe.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===le.has(\"WEBGL_multisampled_render_to_texture\")&&(console.warn(\"THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided\"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=fe.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){D=e,P=t,w=n;let i=!0,r=null,a=!1,o=!1;if(e){const s=fe.get(e);if(void 0!==s.__useDefaultFramebuffer)de.bindFramebuffer(Ie.FRAMEBUFFER,null),i=!1;else if(void 0===s.__webglFramebuffer)pe.setupRenderTarget(e);else if(s.__hasExternalTextures)pe.rebindTextures(e,fe.get(e.texture).__webglTexture,fe.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&fe.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error(\"WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.\");pe.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=fe.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=e.samples>0&&!1===pe.useMultisampledRTT(e)?fe.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,O.copy(e.viewport),F.copy(e.scissor),G=e.scissorTest}else O.copy(q).multiplyScalar(Y).floor(),F.copy(Z).multiplyScalar(Y).floor(),G=$;if(de.bindFramebuffer(Ie.FRAMEBUFFER,r)&&i&&de.drawBuffers(e,r),de.viewport(O),de.scissor(F),de.setScissorTest(G),a){const i=fe.get(e.texture);Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(o){const i=fe.get(e.texture),r=t||0;Ie.framebufferTextureLayer(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}y=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");let s=fe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){de.bindFramebuffer(Ie.FRAMEBUFFER,s);try{const o=e.texture,s=o.format,l=o.type;if(!ce.textureFormatReadable(s))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");if(!ce.textureTypeReadable(l))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Ie.readPixels(t,n,i,r,we.convert(s),we.convert(l),a)}finally{const e=null!==D?fe.get(D).__webglFramebuffer:null;de.bindFramebuffer(Ie.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,r,a,o){if(!e||!e.isWebGLRenderTarget)throw new Error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");let s=fe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){const o=e.texture,l=o.format,c=o.type;if(!ce.textureFormatReadable(l))throw new Error(\"THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.\");if(!ce.textureTypeReadable(c))throw new Error(\"THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.\");if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r){de.bindFramebuffer(Ie.FRAMEBUFFER,s);const e=Ie.createBuffer();Ie.bindBuffer(Ie.PIXEL_PACK_BUFFER,e),Ie.bufferData(Ie.PIXEL_PACK_BUFFER,a.byteLength,Ie.STREAM_READ),Ie.readPixels(t,n,i,r,we.convert(l),we.convert(c),0);const o=null!==D?fe.get(D).__webglFramebuffer:null;de.bindFramebuffer(Ie.FRAMEBUFFER,o);const d=Ie.fenceSync(Ie.SYNC_GPU_COMMANDS_COMPLETE,0);return Ie.flush(),await Cn(Ie,d,4),Ie.bindBuffer(Ie.PIXEL_PACK_BUFFER,e),Ie.getBufferSubData(Ie.PIXEL_PACK_BUFFER,0,a),Ie.deleteBuffer(e),Ie.deleteSync(d),a}throw new Error(\"THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.\")}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&(H(\"WebGLRenderer: copyFramebufferToTexture function signature has changed.\"),t=arguments[0]||null,e=arguments[1]);const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=null!==t?t.x:0,s=null!==t?t.y:0;pe.setTexture2D(e,0),Ie.copyTexSubImage2D(Ie.TEXTURE_2D,n,0,0,o,s,r,a),de.unbindTexture()};const tt=Ie.createFramebuffer(),nt=Ie.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,i=null,r=0,a=null){let o,s,l,c,d,u,f,p,m;!0!==e.isTexture&&(H(\"WebGLRenderer: copyTextureToTexture function signature has changed.\"),i=arguments[0]||null,e=arguments[1],t=arguments[2],a=arguments[3]||0,n=null),null===a&&(0!==r?(H(\"WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels.\"),a=r,r=0):a=0);const h=e.isCompressedTexture?e.mipmaps[a]:e.image;if(null!==n)o=n.max.x-n.min.x,s=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,d=n.min.y,u=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-r);o=Math.floor(h.width*t),s=Math.floor(h.height*t),l=e.isDataArrayTexture?h.depth:e.isData3DTexture?Math.floor(h.depth*t):1,c=0,d=0,u=0}null!==i?(f=i.x,p=i.y,m=i.z):(f=0,p=0,m=0);const _=we.convert(t.format),g=we.convert(t.type);let v;t.isData3DTexture?(pe.setTexture3D(t,0),v=Ie.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(pe.setTexture2DArray(t,0),v=Ie.TEXTURE_2D_ARRAY):(pe.setTexture2D(t,0),v=Ie.TEXTURE_2D),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,t.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,t.unpackAlignment);const E=Ie.getParameter(Ie.UNPACK_ROW_LENGTH),S=Ie.getParameter(Ie.UNPACK_IMAGE_HEIGHT),T=Ie.getParameter(Ie.UNPACK_SKIP_PIXELS),M=Ie.getParameter(Ie.UNPACK_SKIP_ROWS),x=Ie.getParameter(Ie.UNPACK_SKIP_IMAGES);Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,h.width),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,h.height),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,c),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,d),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,u);const R=e.isDataArrayTexture||e.isData3DTexture,A=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=fe.get(e),i=fe.get(t),h=fe.get(n.__renderTarget),_=fe.get(i.__renderTarget);de.bindFramebuffer(Ie.READ_FRAMEBUFFER,h.__webglFramebuffer),de.bindFramebuffer(Ie.DRAW_FRAMEBUFFER,_.__webglFramebuffer);for(let n=0;n<l;n++)R&&(Ie.framebufferTextureLayer(Ie.READ_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,fe.get(e).__webglTexture,r,u+n),Ie.framebufferTextureLayer(Ie.DRAW_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,fe.get(t).__webglTexture,a,m+n)),Ie.blitFramebuffer(c,d,o,s,f,p,o,s,Ie.DEPTH_BUFFER_BIT,Ie.NEAREST);de.bindFramebuffer(Ie.READ_FRAMEBUFFER,null),de.bindFramebuffer(Ie.DRAW_FRAMEBUFFER,null)}else if(0!==r||e.isRenderTargetTexture||fe.has(e)){const n=fe.get(e),i=fe.get(t);de.bindFramebuffer(Ie.READ_FRAMEBUFFER,tt),de.bindFramebuffer(Ie.DRAW_FRAMEBUFFER,nt);for(let e=0;e<l;e++)R?Ie.framebufferTextureLayer(Ie.READ_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,n.__webglTexture,r,u+e):Ie.framebufferTexture2D(Ie.READ_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_2D,n.__webglTexture,r),A?Ie.framebufferTextureLayer(Ie.DRAW_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,i.__webglTexture,a,m+e):Ie.framebufferTexture2D(Ie.DRAW_FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_2D,i.__webglTexture,a),0!==r?Ie.blitFramebuffer(c,d,o,s,f,p,o,s,Ie.COLOR_BUFFER_BIT,Ie.NEAREST):A?Ie.copyTexSubImage3D(v,a,f,p,m+e,c,d,o,s):Ie.copyTexSubImage2D(v,a,f,p,c,d,o,s);de.bindFramebuffer(Ie.READ_FRAMEBUFFER,null),de.bindFramebuffer(Ie.DRAW_FRAMEBUFFER,null)}else A?e.isDataTexture||e.isData3DTexture?Ie.texSubImage3D(v,a,f,p,m,o,s,l,_,g,h.data):t.isCompressedArrayTexture?Ie.compressedTexSubImage3D(v,a,f,p,m,o,s,l,_,h.data):Ie.texSubImage3D(v,a,f,p,m,o,s,l,_,g,h):e.isDataTexture?Ie.texSubImage2D(Ie.TEXTURE_2D,a,f,p,o,s,_,g,h.data):e.isCompressedTexture?Ie.compressedTexSubImage2D(Ie.TEXTURE_2D,a,f,p,h.width,h.height,_,h.data):Ie.texSubImage2D(Ie.TEXTURE_2D,a,f,p,o,s,_,g,h);Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,E),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,S),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,T),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,M),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,x),0===a&&t.generateMipmaps&&Ie.generateMipmap(v),de.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,i=null,r=0){return!0!==e.isTexture&&(H(\"WebGLRenderer: copyTextureToTexture3D function signature has changed.\"),n=arguments[0]||null,i=arguments[1]||null,e=arguments[2],t=arguments[3],r=arguments[4]||0),H('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use \"copyTextureToTexture\" instead.'),this.copyTextureToTexture(e,t,n,i,r)},this.initRenderTarget=function(e){void 0===fe.get(e).__webglFramebuffer&&pe.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?pe.setTextureCube(e,0):e.isData3DTexture?pe.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?pe.setTexture2DArray(e,0):pe.setTexture2D(e,0),de.unbindTexture()},this.resetState=function(){P=0,w=0,D=null,de.reset(),De.reset()},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}get coordinateSystem(){return Ln}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=u._getDrawingBufferColorSpace(e),t.unpackColorSpace=u._getUnpackColorSpace()}}export{ee as ACESFilmicToneMapping,xe as AddEquation,le as AddOperation,We as AdditiveBlending,J as AgXToneMapping,Ut as AlphaFormat,ut as AlwaysCompare,tt as AlwaysDepth,Sn as ArrayCamera,d as BackSide,s as BoxGeometry,y as BufferAttribute,D as BufferGeometry,Lt as ByteType,te as CineonToneMapping,rt as ClampToEdgeWrapping,e as Color,u as ColorManagement,He as ConstantAlphaFactor,Fe as ConstantColorFactor,C as CubeReflectionMapping,L as CubeRefractionMapping,q as CubeTexture,a as CubeUVReflectionMapping,Ye as CullFaceBack,je as CullFaceFront,Xe as CullFaceNone,Ve as CustomBlending,$ as CustomToneMapping,K as Data3DTexture,W as DataArrayTexture,xt as DepthFormat,vt as DepthStencilFormat,j as DepthTexture,me as DoubleSide,De as DstAlphaFactor,we as DstColorFactor,pt as EqualCompare,Je as EqualDepth,R as EquirectangularReflectionMapping,A as EquirectangularRefractionMapping,_ as Euler,En as EventDispatcher,M as FloatType,m as FrontSide,ge as Frustum,Z as GLSL3,ht as GreaterCompare,$e as GreaterDepth,mt as GreaterEqualCompare,Qe as GreaterEqualDepth,vn as Group,S as HalfFloatType,v as IntType,_e as Layers,ft as LessCompare,et as LessDepth,X as LessEqualCompare,Me as LessEqualDepth,F as LinearFilter,ct as LinearMipmapLinearFilter,lt as LinearMipmapNearestFilter,B as LinearSRGBColorSpace,ie as LinearToneMapping,se as LinearTransfer,yt as LuminanceAlphaFormat,Dt as LuminanceFormat,t as Matrix3,g as Matrix4,qe as MaxEquation,o as Mesh,w as MeshBasicMaterial,ve as MeshDepthMaterial,Se as MeshDistanceMaterial,Ke as MinEquation,at as MirroredRepeatWrapping,ce as MixOperation,ze as MultiplyBlending,de as MultiplyOperation,Te as NearestFilter,st as NearestMipmapLinearFilter,ot as NearestMipmapNearestFilter,Q as NeutralToneMapping,dt as NeverCompare,nt as NeverDepth,N as NoBlending,gt as NoColorSpace,U as NoToneMapping,pe as NormalBlending,_t as NotEqualCompare,Ze as NotEqualDepth,ue as ObjectSpaceNormalMap,Ce as OneFactor,Ge as OneMinusConstantAlphaFactor,Be as OneMinusConstantColorFactor,Oe as OneMinusDstAlphaFactor,Ne as OneMinusDstColorFactor,Ie as OneMinusSrcAlphaFactor,ye as OneMinusSrcColorFactor,O as OrthographicCamera,re as PCFShadowMap,ae as PCFSoftShadowMap,ei as PMREMGenerator,P as PerspectiveCamera,x as Plane,p as PlaneGeometry,_n as RED_GREEN_RGTC2_Format,mn as RED_RGTC1_Format,Rn as REVISION,Ee as RGBADepthPacking,E as RGBAFormat,Bt as RGBAIntegerFormat,ln as RGBA_ASTC_10x10_Format,an as RGBA_ASTC_10x5_Format,on as RGBA_ASTC_10x6_Format,sn as RGBA_ASTC_10x8_Format,cn as RGBA_ASTC_12x10_Format,dn as RGBA_ASTC_12x12_Format,Zt as RGBA_ASTC_4x4_Format,$t as RGBA_ASTC_5x4_Format,Qt as RGBA_ASTC_5x5_Format,Jt as RGBA_ASTC_6x5_Format,en as RGBA_ASTC_6x6_Format,tn as RGBA_ASTC_8x5_Format,nn as RGBA_ASTC_8x6_Format,rn as RGBA_ASTC_8x8_Format,un as RGBA_BPTC_Format,qt as RGBA_ETC2_EAC_Format,Yt as RGBA_PVRTC_2BPPV1_Format,Xt as RGBA_PVRTC_4BPPV1_Format,Gt as RGBA_S3TC_DXT1_Format,Vt as RGBA_S3TC_DXT3_Format,zt as RGBA_S3TC_DXT5_Format,wt as RGBFormat,fn as RGB_BPTC_SIGNED_Format,pn as RGB_BPTC_UNSIGNED_Format,jt as RGB_ETC1_Format,Kt as RGB_ETC2_Format,Wt as RGB_PVRTC_2BPPV1_Format,kt as RGB_PVRTC_4BPPV1_Format,Ht as RGB_S3TC_DXT1_Format,Ot as RGFormat,Ft as RGIntegerFormat,It as RedFormat,Nt as RedIntegerFormat,ne as ReinhardToneMapping,it as RepeatWrapping,Ae as ReverseSubtractEquation,gn as SIGNED_RED_GREEN_RGTC2_Format,hn as SIGNED_RED_RGTC1_Format,xn as SRGBColorSpace,f as SRGBTransfer,wn as ShaderChunk,yn as ShaderLib,l as ShaderMaterial,Pt as ShortType,Pe as SrcAlphaFactor,Ue as SrcAlphaSaturateFactor,Le as SrcColorFactor,Re as SubtractEquation,ke as SubtractiveBlending,fe as TangentSpaceNormalMap,Y as Texture,z as Uint16BufferAttribute,V as Uint32BufferAttribute,Dn as UniformsLib,he as UniformsUtils,T as UnsignedByteType,Tt as UnsignedInt248Type,Ct as UnsignedInt5999Type,St as UnsignedIntType,At as UnsignedShort4444Type,bt as UnsignedShort5551Type,Mt as UnsignedShortType,oe as VSMShadowMap,n as Vector2,r as Vector3,k as Vector4,Ln as WebGLCoordinateSystem,b as WebGLCubeRenderTarget,I as WebGLRenderTarget,pa as WebGLRenderer,ra as WebGLUtils,be as ZeroFactor,Mn as createCanvasElement};\r\n","/*!\r\nfflate - fast JavaScript compression/decompression\r\n<https://101arrowz.github.io/fflate>\r\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\r\nversion 0.8.2\r\n*/\r\n\r\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\r\n// https://tools.ietf.org/html/rfc1951\r\n// You may also wish to take a look at the guide I made about this program:\r\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\r\n// Some of the following code is similar to that of UZIP.js:\r\n// https://github.com/photopea/UZIP.js\r\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\r\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\r\n// is better for memory in most engines (I *think*).\r\nvar ch2 = {};\r\nvar wk = (function (c, id, msg, transfer, cb) {\r\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\r\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\r\n    ], { type: 'text/javascript' }))));\r\n    w.onmessage = function (e) {\r\n        var d = e.data, ed = d.$e$;\r\n        if (ed) {\r\n            var err = new Error(ed[0]);\r\n            err['code'] = ed[1];\r\n            err.stack = ed[2];\r\n            cb(err, null);\r\n        }\r\n        else\r\n            cb(null, d);\r\n    };\r\n    w.postMessage(msg, transfer);\r\n    return w;\r\n});\r\n\r\n// aliases for shorter compressed code (most minifers don't do this)\r\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\r\n// fixed length extra bits\r\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\r\n// fixed distance extra bits\r\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\r\n// code length index map\r\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\r\n// get base, reverse index map from extra bits\r\nvar freb = function (eb, start) {\r\n    var b = new u16(31);\r\n    for (var i = 0; i < 31; ++i) {\r\n        b[i] = start += 1 << eb[i - 1];\r\n    }\r\n    // numbers here are at max 18 bits\r\n    var r = new i32(b[30]);\r\n    for (var i = 1; i < 30; ++i) {\r\n        for (var j = b[i]; j < b[i + 1]; ++j) {\r\n            r[j] = ((j - b[i]) << 5) | i;\r\n        }\r\n    }\r\n    return { b: b, r: r };\r\n};\r\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\r\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\r\nfl[28] = 258, revfl[258] = 28;\r\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\r\n// map of value to reverse (assuming 16 bits)\r\nvar rev = new u16(32768);\r\nfor (var i = 0; i < 32768; ++i) {\r\n    // reverse table algorithm from SO\r\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\r\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\r\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\r\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\r\n}\r\n// create huffman tree from u8 \"map\": index -> code length for code index\r\n// mb (max bits) must be at most 15\r\n// TODO: optimize/split up?\r\nvar hMap = (function (cd, mb, r) {\r\n    var s = cd.length;\r\n    // index\r\n    var i = 0;\r\n    // u16 \"map\": index -> # of codes with bit length = index\r\n    var l = new u16(mb);\r\n    // length of cd must be 288 (total # of codes)\r\n    for (; i < s; ++i) {\r\n        if (cd[i])\r\n            ++l[cd[i] - 1];\r\n    }\r\n    // u16 \"map\": index -> minimum code for bit length = index\r\n    var le = new u16(mb);\r\n    for (i = 1; i < mb; ++i) {\r\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\r\n    }\r\n    var co;\r\n    if (r) {\r\n        // u16 \"map\": index -> number of actual bits, symbol for code\r\n        co = new u16(1 << mb);\r\n        // bits to remove for reverser\r\n        var rvb = 15 - mb;\r\n        for (i = 0; i < s; ++i) {\r\n            // ignore 0 lengths\r\n            if (cd[i]) {\r\n                // num encoding both symbol and bits read\r\n                var sv = (i << 4) | cd[i];\r\n                // free bits\r\n                var r_1 = mb - cd[i];\r\n                // start value\r\n                var v = le[cd[i] - 1]++ << r_1;\r\n                // m is end value\r\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\r\n                    // every 16 bit value starting with the code yields the same result\r\n                    co[rev[v] >> rvb] = sv;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        co = new u16(s);\r\n        for (i = 0; i < s; ++i) {\r\n            if (cd[i]) {\r\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\r\n            }\r\n        }\r\n    }\r\n    return co;\r\n});\r\n// fixed length tree\r\nvar flt = new u8(288);\r\nfor (var i = 0; i < 144; ++i)\r\n    flt[i] = 8;\r\nfor (var i = 144; i < 256; ++i)\r\n    flt[i] = 9;\r\nfor (var i = 256; i < 280; ++i)\r\n    flt[i] = 7;\r\nfor (var i = 280; i < 288; ++i)\r\n    flt[i] = 8;\r\n// fixed distance tree\r\nvar fdt = new u8(32);\r\nfor (var i = 0; i < 32; ++i)\r\n    fdt[i] = 5;\r\n// fixed length map\r\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\r\n// fixed distance map\r\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\r\n// find max of array\r\nvar max = function (a) {\r\n    var m = a[0];\r\n    for (var i = 1; i < a.length; ++i) {\r\n        if (a[i] > m)\r\n            m = a[i];\r\n    }\r\n    return m;\r\n};\r\n// read d, starting at bit p and mask with m\r\nvar bits = function (d, p, m) {\r\n    var o = (p / 8) | 0;\r\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\r\n};\r\n// read d, starting at bit p continuing for at least 16 bits\r\nvar bits16 = function (d, p) {\r\n    var o = (p / 8) | 0;\r\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\r\n};\r\n// get end of byte\r\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\r\n// typed array slice - allows garbage collector to free original reference,\r\n// while being more compatible than .slice\r\nvar slc = function (v, s, e) {\r\n    if (s == null || s < 0)\r\n        s = 0;\r\n    if (e == null || e > v.length)\r\n        e = v.length;\r\n    // can't use .constructor in case user-supplied\r\n    return new u8(v.subarray(s, e));\r\n};\r\n/**\r\n * Codes for errors generated within this library\r\n */\r\nexport var FlateErrorCode = {\r\n    UnexpectedEOF: 0,\r\n    InvalidBlockType: 1,\r\n    InvalidLengthLiteral: 2,\r\n    InvalidDistance: 3,\r\n    StreamFinished: 4,\r\n    NoStreamHandler: 5,\r\n    InvalidHeader: 6,\r\n    NoCallback: 7,\r\n    InvalidUTF8: 8,\r\n    ExtraFieldTooLong: 9,\r\n    InvalidDate: 10,\r\n    FilenameTooLong: 11,\r\n    StreamFinishing: 12,\r\n    InvalidZipData: 13,\r\n    UnknownCompressionMethod: 14\r\n};\r\n// error codes\r\nvar ec = [\r\n    'unexpected EOF',\r\n    'invalid block type',\r\n    'invalid length/literal',\r\n    'invalid distance',\r\n    'stream finished',\r\n    'no stream handler',\r\n    ,\r\n    'no callback',\r\n    'invalid UTF-8 data',\r\n    'extra field too long',\r\n    'date not in range 1980-2099',\r\n    'filename too long',\r\n    'stream finishing',\r\n    'invalid zip data'\r\n    // determined by unknown compression method\r\n];\r\n;\r\nvar err = function (ind, msg, nt) {\r\n    var e = new Error(msg || ec[ind]);\r\n    e.code = ind;\r\n    if (Error.captureStackTrace)\r\n        Error.captureStackTrace(e, err);\r\n    if (!nt)\r\n        throw e;\r\n    return e;\r\n};\r\n// expands raw DEFLATE data\r\nvar inflt = function (dat, st, buf, dict) {\r\n    // source length       dict length\r\n    var sl = dat.length, dl = dict ? dict.length : 0;\r\n    if (!sl || st.f && !st.l)\r\n        return buf || new u8(0);\r\n    var noBuf = !buf;\r\n    // have to estimate size\r\n    var resize = noBuf || st.i != 2;\r\n    // no state\r\n    var noSt = st.i;\r\n    // Assumes roughly 33% compression ratio average\r\n    if (noBuf)\r\n        buf = new u8(sl * 3);\r\n    // ensure buffer can fit at least l elements\r\n    var cbuf = function (l) {\r\n        var bl = buf.length;\r\n        // need to increase size to fit\r\n        if (l > bl) {\r\n            // Double or set to necessary, whichever is greater\r\n            var nbuf = new u8(Math.max(bl * 2, l));\r\n            nbuf.set(buf);\r\n            buf = nbuf;\r\n        }\r\n    };\r\n    //  last chunk         bitpos           bytes\r\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\r\n    // total bits\r\n    var tbts = sl * 8;\r\n    do {\r\n        if (!lm) {\r\n            // BFINAL - this is only 1 when last chunk is next\r\n            final = bits(dat, pos, 1);\r\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\r\n            var type = bits(dat, pos + 1, 3);\r\n            pos += 3;\r\n            if (!type) {\r\n                // go to end of byte boundary\r\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\r\n                if (t > sl) {\r\n                    if (noSt)\r\n                        err(0);\r\n                    break;\r\n                }\r\n                // ensure size\r\n                if (resize)\r\n                    cbuf(bt + l);\r\n                // Copy over uncompressed data\r\n                buf.set(dat.subarray(s, t), bt);\r\n                // Get new bitpos, update byte count\r\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\r\n                continue;\r\n            }\r\n            else if (type == 1)\r\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\r\n            else if (type == 2) {\r\n                //  literal                            lengths\r\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\r\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\r\n                pos += 14;\r\n                // length+distance tree\r\n                var ldt = new u8(tl);\r\n                // code length tree\r\n                var clt = new u8(19);\r\n                for (var i = 0; i < hcLen; ++i) {\r\n                    // use index map to get real code\r\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\r\n                }\r\n                pos += hcLen * 3;\r\n                // code lengths bits\r\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\r\n                // code lengths map\r\n                var clm = hMap(clt, clb, 1);\r\n                for (var i = 0; i < tl;) {\r\n                    var r = clm[bits(dat, pos, clbmsk)];\r\n                    // bits read\r\n                    pos += r & 15;\r\n                    // symbol\r\n                    var s = r >> 4;\r\n                    // code length to copy\r\n                    if (s < 16) {\r\n                        ldt[i++] = s;\r\n                    }\r\n                    else {\r\n                        //  copy   count\r\n                        var c = 0, n = 0;\r\n                        if (s == 16)\r\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\r\n                        else if (s == 17)\r\n                            n = 3 + bits(dat, pos, 7), pos += 3;\r\n                        else if (s == 18)\r\n                            n = 11 + bits(dat, pos, 127), pos += 7;\r\n                        while (n--)\r\n                            ldt[i++] = c;\r\n                    }\r\n                }\r\n                //    length tree                 distance tree\r\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\r\n                // max length bits\r\n                lbt = max(lt);\r\n                // max dist bits\r\n                dbt = max(dt);\r\n                lm = hMap(lt, lbt, 1);\r\n                dm = hMap(dt, dbt, 1);\r\n            }\r\n            else\r\n                err(1);\r\n            if (pos > tbts) {\r\n                if (noSt)\r\n                    err(0);\r\n                break;\r\n            }\r\n        }\r\n        // Make sure the buffer can hold this + the largest possible addition\r\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\r\n        if (resize)\r\n            cbuf(bt + 131072);\r\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\r\n        var lpos = pos;\r\n        for (;; lpos = pos) {\r\n            // bits read, code\r\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\r\n            pos += c & 15;\r\n            if (pos > tbts) {\r\n                if (noSt)\r\n                    err(0);\r\n                break;\r\n            }\r\n            if (!c)\r\n                err(2);\r\n            if (sym < 256)\r\n                buf[bt++] = sym;\r\n            else if (sym == 256) {\r\n                lpos = pos, lm = null;\r\n                break;\r\n            }\r\n            else {\r\n                var add = sym - 254;\r\n                // no extra bits needed if less\r\n                if (sym > 264) {\r\n                    // index\r\n                    var i = sym - 257, b = fleb[i];\r\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\r\n                    pos += b;\r\n                }\r\n                // dist\r\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\r\n                if (!d)\r\n                    err(3);\r\n                pos += d & 15;\r\n                var dt = fd[dsym];\r\n                if (dsym > 3) {\r\n                    var b = fdeb[dsym];\r\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\r\n                }\r\n                if (pos > tbts) {\r\n                    if (noSt)\r\n                        err(0);\r\n                    break;\r\n                }\r\n                if (resize)\r\n                    cbuf(bt + 131072);\r\n                var end = bt + add;\r\n                if (bt < dt) {\r\n                    var shift = dl - dt, dend = Math.min(dt, end);\r\n                    if (shift + bt < 0)\r\n                        err(3);\r\n                    for (; bt < dend; ++bt)\r\n                        buf[bt] = dict[shift + bt];\r\n                }\r\n                for (; bt < end; ++bt)\r\n                    buf[bt] = buf[bt - dt];\r\n            }\r\n        }\r\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\r\n        if (lm)\r\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\r\n    } while (!final);\r\n    // don't reallocate for streams or user buffers\r\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\r\n};\r\n// starting at p, write the minimum number of bits that can hold v to d\r\nvar wbits = function (d, p, v) {\r\n    v <<= p & 7;\r\n    var o = (p / 8) | 0;\r\n    d[o] |= v;\r\n    d[o + 1] |= v >> 8;\r\n};\r\n// starting at p, write the minimum number of bits (>8) that can hold v to d\r\nvar wbits16 = function (d, p, v) {\r\n    v <<= p & 7;\r\n    var o = (p / 8) | 0;\r\n    d[o] |= v;\r\n    d[o + 1] |= v >> 8;\r\n    d[o + 2] |= v >> 16;\r\n};\r\n// creates code lengths from a frequency table\r\nvar hTree = function (d, mb) {\r\n    // Need extra info to make a tree\r\n    var t = [];\r\n    for (var i = 0; i < d.length; ++i) {\r\n        if (d[i])\r\n            t.push({ s: i, f: d[i] });\r\n    }\r\n    var s = t.length;\r\n    var t2 = t.slice();\r\n    if (!s)\r\n        return { t: et, l: 0 };\r\n    if (s == 1) {\r\n        var v = new u8(t[0].s + 1);\r\n        v[t[0].s] = 1;\r\n        return { t: v, l: 1 };\r\n    }\r\n    t.sort(function (a, b) { return a.f - b.f; });\r\n    // after i2 reaches last ind, will be stopped\r\n    // freq must be greater than largest possible number of symbols\r\n    t.push({ s: -1, f: 25001 });\r\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\r\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\r\n    // efficient algorithm from UZIP.js\r\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\r\n    // symbols that combined have high freq, will start processing i2 (high-freq,\r\n    // non-composite) symbols instead\r\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\r\n    while (i1 != s - 1) {\r\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\r\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\r\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\r\n    }\r\n    var maxSym = t2[0].s;\r\n    for (var i = 1; i < s; ++i) {\r\n        if (t2[i].s > maxSym)\r\n            maxSym = t2[i].s;\r\n    }\r\n    // code lengths\r\n    var tr = new u16(maxSym + 1);\r\n    // max bits in tree\r\n    var mbt = ln(t[i1 - 1], tr, 0);\r\n    if (mbt > mb) {\r\n        // more algorithms from UZIP.js\r\n        // TODO: find out how this code works (debt)\r\n        //  ind    debt\r\n        var i = 0, dt = 0;\r\n        //    left            cost\r\n        var lft = mbt - mb, cst = 1 << lft;\r\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\r\n        for (; i < s; ++i) {\r\n            var i2_1 = t2[i].s;\r\n            if (tr[i2_1] > mb) {\r\n                dt += cst - (1 << (mbt - tr[i2_1]));\r\n                tr[i2_1] = mb;\r\n            }\r\n            else\r\n                break;\r\n        }\r\n        dt >>= lft;\r\n        while (dt > 0) {\r\n            var i2_2 = t2[i].s;\r\n            if (tr[i2_2] < mb)\r\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\r\n            else\r\n                ++i;\r\n        }\r\n        for (; i >= 0 && dt; --i) {\r\n            var i2_3 = t2[i].s;\r\n            if (tr[i2_3] == mb) {\r\n                --tr[i2_3];\r\n                ++dt;\r\n            }\r\n        }\r\n        mbt = mb;\r\n    }\r\n    return { t: new u8(tr), l: mbt };\r\n};\r\n// get the max length and assign length codes\r\nvar ln = function (n, l, d) {\r\n    return n.s == -1\r\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\r\n        : (l[n.s] = d);\r\n};\r\n// length codes generation\r\nvar lc = function (c) {\r\n    var s = c.length;\r\n    // Note that the semicolon was intentional\r\n    while (s && !c[--s])\r\n        ;\r\n    var cl = new u16(++s);\r\n    //  ind      num         streak\r\n    var cli = 0, cln = c[0], cls = 1;\r\n    var w = function (v) { cl[cli++] = v; };\r\n    for (var i = 1; i <= s; ++i) {\r\n        if (c[i] == cln && i != s)\r\n            ++cls;\r\n        else {\r\n            if (!cln && cls > 2) {\r\n                for (; cls > 138; cls -= 138)\r\n                    w(32754);\r\n                if (cls > 2) {\r\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\r\n                    cls = 0;\r\n                }\r\n            }\r\n            else if (cls > 3) {\r\n                w(cln), --cls;\r\n                for (; cls > 6; cls -= 6)\r\n                    w(8304);\r\n                if (cls > 2)\r\n                    w(((cls - 3) << 5) | 8208), cls = 0;\r\n            }\r\n            while (cls--)\r\n                w(cln);\r\n            cls = 1;\r\n            cln = c[i];\r\n        }\r\n    }\r\n    return { c: cl.subarray(0, cli), n: s };\r\n};\r\n// calculate the length of output from tree, code lengths\r\nvar clen = function (cf, cl) {\r\n    var l = 0;\r\n    for (var i = 0; i < cl.length; ++i)\r\n        l += cf[i] * cl[i];\r\n    return l;\r\n};\r\n// writes a fixed block\r\n// returns the new bit pos\r\nvar wfblk = function (out, pos, dat) {\r\n    // no need to write 00 as type: TypedArray defaults to 0\r\n    var s = dat.length;\r\n    var o = shft(pos + 2);\r\n    out[o] = s & 255;\r\n    out[o + 1] = s >> 8;\r\n    out[o + 2] = out[o] ^ 255;\r\n    out[o + 3] = out[o + 1] ^ 255;\r\n    for (var i = 0; i < s; ++i)\r\n        out[o + i + 4] = dat[i];\r\n    return (o + 4 + s) * 8;\r\n};\r\n// writes a block\r\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\r\n    wbits(out, p++, final);\r\n    ++lf[256];\r\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\r\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\r\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\r\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\r\n    var lcfreq = new u16(19);\r\n    for (var i = 0; i < lclt.length; ++i)\r\n        ++lcfreq[lclt[i] & 31];\r\n    for (var i = 0; i < lcdt.length; ++i)\r\n        ++lcfreq[lcdt[i] & 31];\r\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\r\n    var nlcc = 19;\r\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\r\n        ;\r\n    var flen = (bl + 5) << 3;\r\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\r\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\r\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\r\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\r\n    var lm, ll, dm, dl;\r\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\r\n    if (dtlen < ftlen) {\r\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\r\n        var llm = hMap(lct, mlcb, 0);\r\n        wbits(out, p, nlc - 257);\r\n        wbits(out, p + 5, ndc - 1);\r\n        wbits(out, p + 10, nlcc - 4);\r\n        p += 14;\r\n        for (var i = 0; i < nlcc; ++i)\r\n            wbits(out, p + 3 * i, lct[clim[i]]);\r\n        p += 3 * nlcc;\r\n        var lcts = [lclt, lcdt];\r\n        for (var it = 0; it < 2; ++it) {\r\n            var clct = lcts[it];\r\n            for (var i = 0; i < clct.length; ++i) {\r\n                var len = clct[i] & 31;\r\n                wbits(out, p, llm[len]), p += lct[len];\r\n                if (len > 15)\r\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\r\n    }\r\n    for (var i = 0; i < li; ++i) {\r\n        var sym = syms[i];\r\n        if (sym > 255) {\r\n            var len = (sym >> 18) & 31;\r\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\r\n            if (len > 7)\r\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\r\n            var dst = sym & 31;\r\n            wbits16(out, p, dm[dst]), p += dl[dst];\r\n            if (dst > 3)\r\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\r\n        }\r\n        else {\r\n            wbits16(out, p, lm[sym]), p += ll[sym];\r\n        }\r\n    }\r\n    wbits16(out, p, lm[256]);\r\n    return p + ll[256];\r\n};\r\n// deflate options (nice << 13) | chain\r\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\r\n// empty\r\nvar et = /*#__PURE__*/ new u8(0);\r\n// compresses data into a raw DEFLATE buffer\r\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\r\n    var s = st.z || dat.length;\r\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\r\n    // writing to this writes to the output buffer\r\n    var w = o.subarray(pre, o.length - post);\r\n    var lst = st.l;\r\n    var pos = (st.r || 0) & 7;\r\n    if (lvl) {\r\n        if (pos)\r\n            w[0] = st.r >> 3;\r\n        var opt = deo[lvl - 1];\r\n        var n = opt >> 13, c = opt & 8191;\r\n        var msk_1 = (1 << plvl) - 1;\r\n        //    prev 2-byte val map    curr 2-byte val map\r\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\r\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\r\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\r\n        // 24576 is an arbitrary number of maximum symbols per block\r\n        // 424 buffer for last block\r\n        var syms = new i32(25000);\r\n        // length/literal freq   distance freq\r\n        var lf = new u16(288), df = new u16(32);\r\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\r\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\r\n        for (; i + 2 < s; ++i) {\r\n            // hash value\r\n            var hv = hsh(i);\r\n            // index mod 32768    previous index mod\r\n            var imod = i & 32767, pimod = head[hv];\r\n            prev[imod] = pimod;\r\n            head[hv] = imod;\r\n            // We always should modify head and prev, but only add symbols if\r\n            // this data is not yet processed (\"wait\" for wait index)\r\n            if (wi <= i) {\r\n                // bytes remaining\r\n                var rem = s - i;\r\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\r\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\r\n                    li = lc_1 = eb = 0, bs = i;\r\n                    for (var j = 0; j < 286; ++j)\r\n                        lf[j] = 0;\r\n                    for (var j = 0; j < 30; ++j)\r\n                        df[j] = 0;\r\n                }\r\n                //  len    dist   chain\r\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\r\n                if (rem > 2 && hv == hsh(i - dif)) {\r\n                    var maxn = Math.min(n, rem) - 1;\r\n                    var maxd = Math.min(32767, i);\r\n                    // max possible length\r\n                    // not capped at dif because decompressors implement \"rolling\" index population\r\n                    var ml = Math.min(258, rem);\r\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\r\n                        if (dat[i + l] == dat[i + l - dif]) {\r\n                            var nl = 0;\r\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\r\n                                ;\r\n                            if (nl > l) {\r\n                                l = nl, d = dif;\r\n                                // break out early when we reach \"nice\" (we are satisfied enough)\r\n                                if (nl > maxn)\r\n                                    break;\r\n                                // now, find the rarest 2-byte sequence within this\r\n                                // length of literals and search for that instead.\r\n                                // Much faster than just using the start\r\n                                var mmd = Math.min(dif, nl - 2);\r\n                                var md = 0;\r\n                                for (var j = 0; j < mmd; ++j) {\r\n                                    var ti = i - dif + j & 32767;\r\n                                    var pti = prev[ti];\r\n                                    var cd = ti - pti & 32767;\r\n                                    if (cd > md)\r\n                                        md = cd, pimod = ti;\r\n                                }\r\n                            }\r\n                        }\r\n                        // check the previous match\r\n                        imod = pimod, pimod = prev[imod];\r\n                        dif += imod - pimod & 32767;\r\n                    }\r\n                }\r\n                // d will be nonzero only when a match was found\r\n                if (d) {\r\n                    // store both dist and len data in one int32\r\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\r\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\r\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\r\n                    eb += fleb[lin] + fdeb[din];\r\n                    ++lf[257 + lin];\r\n                    ++df[din];\r\n                    wi = i + l;\r\n                    ++lc_1;\r\n                }\r\n                else {\r\n                    syms[li++] = dat[i];\r\n                    ++lf[dat[i]];\r\n                }\r\n            }\r\n        }\r\n        for (i = Math.max(i, wi); i < s; ++i) {\r\n            syms[li++] = dat[i];\r\n            ++lf[dat[i]];\r\n        }\r\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\r\n        if (!lst) {\r\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\r\n            // shft(pos) now 1 less if pos & 7 != 0\r\n            pos -= 7;\r\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\r\n        }\r\n    }\r\n    else {\r\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\r\n            // end\r\n            var e = i + 65535;\r\n            if (e >= s) {\r\n                // write final block\r\n                w[(pos / 8) | 0] = lst;\r\n                e = s;\r\n            }\r\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\r\n        }\r\n        st.i = s;\r\n    }\r\n    return slc(o, 0, pre + shft(pos) + post);\r\n};\r\n// CRC32 table\r\nvar crct = /*#__PURE__*/ (function () {\r\n    var t = new Int32Array(256);\r\n    for (var i = 0; i < 256; ++i) {\r\n        var c = i, k = 9;\r\n        while (--k)\r\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\r\n        t[i] = c;\r\n    }\r\n    return t;\r\n})();\r\n// CRC32\r\nvar crc = function () {\r\n    var c = -1;\r\n    return {\r\n        p: function (d) {\r\n            // closures have awful performance\r\n            var cr = c;\r\n            for (var i = 0; i < d.length; ++i)\r\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\r\n            c = cr;\r\n        },\r\n        d: function () { return ~c; }\r\n    };\r\n};\r\n// Adler32\r\nvar adler = function () {\r\n    var a = 1, b = 0;\r\n    return {\r\n        p: function (d) {\r\n            // closures have awful performance\r\n            var n = a, m = b;\r\n            var l = d.length | 0;\r\n            for (var i = 0; i != l;) {\r\n                var e = Math.min(i + 2655, l);\r\n                for (; i < e; ++i)\r\n                    m += n += d[i];\r\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\r\n            }\r\n            a = n, b = m;\r\n        },\r\n        d: function () {\r\n            a %= 65521, b %= 65521;\r\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\r\n        }\r\n    };\r\n};\r\n;\r\n// deflate with opts\r\nvar dopt = function (dat, opt, pre, post, st) {\r\n    if (!st) {\r\n        st = { l: 1 };\r\n        if (opt.dictionary) {\r\n            var dict = opt.dictionary.subarray(-32768);\r\n            var newDat = new u8(dict.length + dat.length);\r\n            newDat.set(dict);\r\n            newDat.set(dat, dict.length);\r\n            dat = newDat;\r\n            st.w = dict.length;\r\n        }\r\n    }\r\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\r\n};\r\n// Walmart object spread\r\nvar mrg = function (a, b) {\r\n    var o = {};\r\n    for (var k in a)\r\n        o[k] = a[k];\r\n    for (var k in b)\r\n        o[k] = b[k];\r\n    return o;\r\n};\r\n// worker clone\r\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\r\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\r\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\r\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\r\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\r\n// This took me three weeks to figure out how to do.\r\nvar wcln = function (fn, fnStr, td) {\r\n    var dt = fn();\r\n    var st = fn.toString();\r\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\r\n    for (var i = 0; i < dt.length; ++i) {\r\n        var v = dt[i], k = ks[i];\r\n        if (typeof v == 'function') {\r\n            fnStr += ';' + k + '=';\r\n            var st_1 = v.toString();\r\n            if (v.prototype) {\r\n                // for global objects\r\n                if (st_1.indexOf('[native code]') != -1) {\r\n                    var spInd = st_1.indexOf(' ', 8) + 1;\r\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\r\n                }\r\n                else {\r\n                    fnStr += st_1;\r\n                    for (var t in v.prototype)\r\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\r\n                }\r\n            }\r\n            else\r\n                fnStr += st_1;\r\n        }\r\n        else\r\n            td[k] = v;\r\n    }\r\n    return fnStr;\r\n};\r\nvar ch = [];\r\n// clone bufs\r\nvar cbfs = function (v) {\r\n    var tl = [];\r\n    for (var k in v) {\r\n        if (v[k].buffer) {\r\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\r\n        }\r\n    }\r\n    return tl;\r\n};\r\n// use a worker to execute code\r\nvar wrkr = function (fns, init, id, cb) {\r\n    if (!ch[id]) {\r\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\r\n        for (var i = 0; i < m; ++i)\r\n            fnStr = wcln(fns[i], fnStr, td_1);\r\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\r\n    }\r\n    var td = mrg({}, ch[id].e);\r\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\r\n};\r\n// base async inflate fn\r\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\r\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\r\n// gzip extra\r\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\r\n// gunzip extra\r\nvar guze = function () { return [gzs, gzl]; };\r\n// zlib extra\r\nvar zle = function () { return [zlh, wbytes, adler]; };\r\n// unzlib extra\r\nvar zule = function () { return [zls]; };\r\n// post buf\r\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\r\n// get opts\r\nvar gopt = function (o) { return o && {\r\n    out: o.size && new u8(o.size),\r\n    dictionary: o.dictionary\r\n}; };\r\n// async helper\r\nvar cbify = function (dat, opts, fns, init, id, cb) {\r\n    var w = wrkr(fns, init, id, function (err, dat) {\r\n        w.terminate();\r\n        cb(err, dat);\r\n    });\r\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\r\n    return function () { w.terminate(); };\r\n};\r\n// auto stream\r\nvar astrm = function (strm) {\r\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\r\n    return function (ev) {\r\n        if (ev.data.length) {\r\n            strm.push(ev.data[0], ev.data[1]);\r\n            postMessage([ev.data[0].length]);\r\n        }\r\n        else\r\n            strm.flush();\r\n    };\r\n};\r\n// async stream attach\r\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\r\n    var t;\r\n    var w = wrkr(fns, init, id, function (err, dat) {\r\n        if (err)\r\n            w.terminate(), strm.ondata.call(strm, err);\r\n        else if (!Array.isArray(dat))\r\n            ext(dat);\r\n        else if (dat.length == 1) {\r\n            strm.queuedSize -= dat[0];\r\n            if (strm.ondrain)\r\n                strm.ondrain(dat[0]);\r\n        }\r\n        else {\r\n            if (dat[1])\r\n                w.terminate();\r\n            strm.ondata.call(strm, err, dat[0], dat[1]);\r\n        }\r\n    });\r\n    w.postMessage(opts);\r\n    strm.queuedSize = 0;\r\n    strm.push = function (d, f) {\r\n        if (!strm.ondata)\r\n            err(5);\r\n        if (t)\r\n            strm.ondata(err(4, 0, 1), null, !!f);\r\n        strm.queuedSize += d.length;\r\n        w.postMessage([d, t = f], [d.buffer]);\r\n    };\r\n    strm.terminate = function () { w.terminate(); };\r\n    if (flush) {\r\n        strm.flush = function () { w.postMessage([]); };\r\n    }\r\n};\r\n// read 2 bytes\r\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\r\n// read 4 bytes\r\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\r\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\r\n// write bytes\r\nvar wbytes = function (d, b, v) {\r\n    for (; v; ++b)\r\n        d[b] = v, v >>>= 8;\r\n};\r\n// gzip header\r\nvar gzh = function (c, o) {\r\n    var fn = o.filename;\r\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\r\n    if (o.mtime != 0)\r\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\r\n    if (fn) {\r\n        c[3] = 8;\r\n        for (var i = 0; i <= fn.length; ++i)\r\n            c[i + 10] = fn.charCodeAt(i);\r\n    }\r\n};\r\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\r\n// gzip start\r\nvar gzs = function (d) {\r\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\r\n        err(6, 'invalid gzip data');\r\n    var flg = d[3];\r\n    var st = 10;\r\n    if (flg & 4)\r\n        st += (d[10] | d[11] << 8) + 2;\r\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\r\n        ;\r\n    return st + (flg & 2);\r\n};\r\n// gzip length\r\nvar gzl = function (d) {\r\n    var l = d.length;\r\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\r\n};\r\n// gzip header length\r\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\r\n// zlib header\r\nvar zlh = function (c, o) {\r\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\r\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\r\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\r\n    if (o.dictionary) {\r\n        var h = adler();\r\n        h.p(o.dictionary);\r\n        wbytes(c, 2, h.d());\r\n    }\r\n};\r\n// zlib start\r\nvar zls = function (d, dict) {\r\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\r\n        err(6, 'invalid zlib data');\r\n    if ((d[1] >> 5 & 1) == +!dict)\r\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\r\n    return (d[1] >> 3 & 4) + 2;\r\n};\r\nfunction StrmOpt(opts, cb) {\r\n    if (typeof opts == 'function')\r\n        cb = opts, opts = {};\r\n    this.ondata = cb;\r\n    return opts;\r\n}\r\n/**\r\n * Streaming DEFLATE compression\r\n */\r\nvar Deflate = /*#__PURE__*/ (function () {\r\n    function Deflate(opts, cb) {\r\n        if (typeof opts == 'function')\r\n            cb = opts, opts = {};\r\n        this.ondata = cb;\r\n        this.o = opts || {};\r\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\r\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\r\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\r\n        this.b = new u8(98304);\r\n        if (this.o.dictionary) {\r\n            var dict = this.o.dictionary.subarray(-32768);\r\n            this.b.set(dict, 32768 - dict.length);\r\n            this.s.i = 32768 - dict.length;\r\n        }\r\n    }\r\n    Deflate.prototype.p = function (c, f) {\r\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\r\n    };\r\n    /**\r\n     * Pushes a chunk to be deflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Deflate.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            err(5);\r\n        if (this.s.l)\r\n            err(4);\r\n        var endLen = chunk.length + this.s.z;\r\n        if (endLen > this.b.length) {\r\n            if (endLen > 2 * this.b.length - 32768) {\r\n                var newBuf = new u8(endLen & -32768);\r\n                newBuf.set(this.b.subarray(0, this.s.z));\r\n                this.b = newBuf;\r\n            }\r\n            var split = this.b.length - this.s.z;\r\n            this.b.set(chunk.subarray(0, split), this.s.z);\r\n            this.s.z = this.b.length;\r\n            this.p(this.b, false);\r\n            this.b.set(this.b.subarray(-32768));\r\n            this.b.set(chunk.subarray(split), 32768);\r\n            this.s.z = chunk.length - split + 32768;\r\n            this.s.i = 32766, this.s.w = 32768;\r\n        }\r\n        else {\r\n            this.b.set(chunk, this.s.z);\r\n            this.s.z += chunk.length;\r\n        }\r\n        this.s.l = final & 1;\r\n        if (this.s.z > this.s.w + 8191 || final) {\r\n            this.p(this.b, final || false);\r\n            this.s.w = this.s.i, this.s.i -= 2;\r\n        }\r\n    };\r\n    /**\r\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\r\n     * deflated output for small inputs.\r\n     */\r\n    Deflate.prototype.flush = function () {\r\n        if (!this.ondata)\r\n            err(5);\r\n        if (this.s.l)\r\n            err(4);\r\n        this.p(this.b, false);\r\n        this.s.w = this.s.i, this.s.i -= 2;\r\n    };\r\n    return Deflate;\r\n}());\r\nexport { Deflate };\r\n/**\r\n * Asynchronous streaming DEFLATE compression\r\n */\r\nvar AsyncDeflate = /*#__PURE__*/ (function () {\r\n    function AsyncDeflate(opts, cb) {\r\n        astrmify([\r\n            bDflt,\r\n            function () { return [astrm, Deflate]; }\r\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\r\n            var strm = new Deflate(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 6, 1);\r\n    }\r\n    return AsyncDeflate;\r\n}());\r\nexport { AsyncDeflate };\r\nexport function deflate(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return cbify(data, opts, [\r\n        bDflt,\r\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\r\n}\r\n/**\r\n * Compresses data with DEFLATE without any wrapper\r\n * @param data The data to compress\r\n * @param opts The compression options\r\n * @returns The deflated version of the data\r\n */\r\nexport function deflateSync(data, opts) {\r\n    return dopt(data, opts || {}, 0, 0);\r\n}\r\n/**\r\n * Streaming DEFLATE decompression\r\n */\r\nvar Inflate = /*#__PURE__*/ (function () {\r\n    function Inflate(opts, cb) {\r\n        // no StrmOpt here to avoid adding to workerizer\r\n        if (typeof opts == 'function')\r\n            cb = opts, opts = {};\r\n        this.ondata = cb;\r\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\r\n        this.s = { i: 0, b: dict ? dict.length : 0 };\r\n        this.o = new u8(32768);\r\n        this.p = new u8(0);\r\n        if (dict)\r\n            this.o.set(dict);\r\n    }\r\n    Inflate.prototype.e = function (c) {\r\n        if (!this.ondata)\r\n            err(5);\r\n        if (this.d)\r\n            err(4);\r\n        if (!this.p.length)\r\n            this.p = c;\r\n        else if (c.length) {\r\n            var n = new u8(this.p.length + c.length);\r\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\r\n        }\r\n    };\r\n    Inflate.prototype.c = function (final) {\r\n        this.s.i = +(this.d = final || false);\r\n        var bts = this.s.b;\r\n        var dt = inflt(this.p, this.s, this.o);\r\n        this.ondata(slc(dt, bts, this.s.b), this.d);\r\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\r\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\r\n    };\r\n    /**\r\n     * Pushes a chunk to be inflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the final chunk\r\n     */\r\n    Inflate.prototype.push = function (chunk, final) {\r\n        this.e(chunk), this.c(final);\r\n    };\r\n    return Inflate;\r\n}());\r\nexport { Inflate };\r\n/**\r\n * Asynchronous streaming DEFLATE decompression\r\n */\r\nvar AsyncInflate = /*#__PURE__*/ (function () {\r\n    function AsyncInflate(opts, cb) {\r\n        astrmify([\r\n            bInflt,\r\n            function () { return [astrm, Inflate]; }\r\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\r\n            var strm = new Inflate(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 7, 0);\r\n    }\r\n    return AsyncInflate;\r\n}());\r\nexport { AsyncInflate };\r\nexport function inflate(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return cbify(data, opts, [\r\n        bInflt\r\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\r\n}\r\n/**\r\n * Expands DEFLATE data with no wrapper\r\n * @param data The data to decompress\r\n * @param opts The decompression options\r\n * @returns The decompressed version of the data\r\n */\r\nexport function inflateSync(data, opts) {\r\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\r\n}\r\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\r\n/**\r\n * Streaming GZIP compression\r\n */\r\nvar Gzip = /*#__PURE__*/ (function () {\r\n    function Gzip(opts, cb) {\r\n        this.c = crc();\r\n        this.l = 0;\r\n        this.v = 1;\r\n        Deflate.call(this, opts, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be GZIPped\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Gzip.prototype.push = function (chunk, final) {\r\n        this.c.p(chunk);\r\n        this.l += chunk.length;\r\n        Deflate.prototype.push.call(this, chunk, final);\r\n    };\r\n    Gzip.prototype.p = function (c, f) {\r\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\r\n        if (this.v)\r\n            gzh(raw, this.o), this.v = 0;\r\n        if (f)\r\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\r\n        this.ondata(raw, f);\r\n    };\r\n    /**\r\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\r\n     * GZIPped output for small inputs.\r\n     */\r\n    Gzip.prototype.flush = function () {\r\n        Deflate.prototype.flush.call(this);\r\n    };\r\n    return Gzip;\r\n}());\r\nexport { Gzip };\r\n/**\r\n * Asynchronous streaming GZIP compression\r\n */\r\nvar AsyncGzip = /*#__PURE__*/ (function () {\r\n    function AsyncGzip(opts, cb) {\r\n        astrmify([\r\n            bDflt,\r\n            gze,\r\n            function () { return [astrm, Deflate, Gzip]; }\r\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\r\n            var strm = new Gzip(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 8, 1);\r\n    }\r\n    return AsyncGzip;\r\n}());\r\nexport { AsyncGzip };\r\nexport function gzip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return cbify(data, opts, [\r\n        bDflt,\r\n        gze,\r\n        function () { return [gzipSync]; }\r\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\r\n}\r\n/**\r\n * Compresses data with GZIP\r\n * @param data The data to compress\r\n * @param opts The compression options\r\n * @returns The gzipped version of the data\r\n */\r\nexport function gzipSync(data, opts) {\r\n    if (!opts)\r\n        opts = {};\r\n    var c = crc(), l = data.length;\r\n    c.p(data);\r\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\r\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\r\n}\r\n/**\r\n * Streaming single or multi-member GZIP decompression\r\n */\r\nvar Gunzip = /*#__PURE__*/ (function () {\r\n    function Gunzip(opts, cb) {\r\n        this.v = 1;\r\n        this.r = 0;\r\n        Inflate.call(this, opts, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be GUNZIPped\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Gunzip.prototype.push = function (chunk, final) {\r\n        Inflate.prototype.e.call(this, chunk);\r\n        this.r += chunk.length;\r\n        if (this.v) {\r\n            var p = this.p.subarray(this.v - 1);\r\n            var s = p.length > 3 ? gzs(p) : 4;\r\n            if (s > p.length) {\r\n                if (!final)\r\n                    return;\r\n            }\r\n            else if (this.v > 1 && this.onmember) {\r\n                this.onmember(this.r - p.length);\r\n            }\r\n            this.p = p.subarray(s), this.v = 0;\r\n        }\r\n        // necessary to prevent TS from using the closure value\r\n        // This allows for workerization to function correctly\r\n        Inflate.prototype.c.call(this, final);\r\n        // process concatenated GZIP\r\n        if (this.s.f && !this.s.l && !final) {\r\n            this.v = shft(this.s.p) + 9;\r\n            this.s = { i: 0 };\r\n            this.o = new u8(0);\r\n            this.push(new u8(0), final);\r\n        }\r\n    };\r\n    return Gunzip;\r\n}());\r\nexport { Gunzip };\r\n/**\r\n * Asynchronous streaming single or multi-member GZIP decompression\r\n */\r\nvar AsyncGunzip = /*#__PURE__*/ (function () {\r\n    function AsyncGunzip(opts, cb) {\r\n        var _this = this;\r\n        astrmify([\r\n            bInflt,\r\n            guze,\r\n            function () { return [astrm, Inflate, Gunzip]; }\r\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\r\n            var strm = new Gunzip(ev.data);\r\n            strm.onmember = function (offset) { return postMessage(offset); };\r\n            onmessage = astrm(strm);\r\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\r\n    }\r\n    return AsyncGunzip;\r\n}());\r\nexport { AsyncGunzip };\r\nexport function gunzip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return cbify(data, opts, [\r\n        bInflt,\r\n        guze,\r\n        function () { return [gunzipSync]; }\r\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\r\n}\r\n/**\r\n * Expands GZIP data\r\n * @param data The data to decompress\r\n * @param opts The decompression options\r\n * @returns The decompressed version of the data\r\n */\r\nexport function gunzipSync(data, opts) {\r\n    var st = gzs(data);\r\n    if (st + 8 > data.length)\r\n        err(6, 'invalid gzip data');\r\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\r\n}\r\n/**\r\n * Streaming Zlib compression\r\n */\r\nvar Zlib = /*#__PURE__*/ (function () {\r\n    function Zlib(opts, cb) {\r\n        this.c = adler();\r\n        this.v = 1;\r\n        Deflate.call(this, opts, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be zlibbed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Zlib.prototype.push = function (chunk, final) {\r\n        this.c.p(chunk);\r\n        Deflate.prototype.push.call(this, chunk, final);\r\n    };\r\n    Zlib.prototype.p = function (c, f) {\r\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\r\n        if (this.v)\r\n            zlh(raw, this.o), this.v = 0;\r\n        if (f)\r\n            wbytes(raw, raw.length - 4, this.c.d());\r\n        this.ondata(raw, f);\r\n    };\r\n    /**\r\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\r\n     * zlibbed output for small inputs.\r\n     */\r\n    Zlib.prototype.flush = function () {\r\n        Deflate.prototype.flush.call(this);\r\n    };\r\n    return Zlib;\r\n}());\r\nexport { Zlib };\r\n/**\r\n * Asynchronous streaming Zlib compression\r\n */\r\nvar AsyncZlib = /*#__PURE__*/ (function () {\r\n    function AsyncZlib(opts, cb) {\r\n        astrmify([\r\n            bDflt,\r\n            zle,\r\n            function () { return [astrm, Deflate, Zlib]; }\r\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\r\n            var strm = new Zlib(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 10, 1);\r\n    }\r\n    return AsyncZlib;\r\n}());\r\nexport { AsyncZlib };\r\nexport function zlib(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return cbify(data, opts, [\r\n        bDflt,\r\n        zle,\r\n        function () { return [zlibSync]; }\r\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\r\n}\r\n/**\r\n * Compress data with Zlib\r\n * @param data The data to compress\r\n * @param opts The compression options\r\n * @returns The zlib-compressed version of the data\r\n */\r\nexport function zlibSync(data, opts) {\r\n    if (!opts)\r\n        opts = {};\r\n    var a = adler();\r\n    a.p(data);\r\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\r\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\r\n}\r\n/**\r\n * Streaming Zlib decompression\r\n */\r\nvar Unzlib = /*#__PURE__*/ (function () {\r\n    function Unzlib(opts, cb) {\r\n        Inflate.call(this, opts, cb);\r\n        this.v = opts && opts.dictionary ? 2 : 1;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be unzlibbed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Unzlib.prototype.push = function (chunk, final) {\r\n        Inflate.prototype.e.call(this, chunk);\r\n        if (this.v) {\r\n            if (this.p.length < 6 && !final)\r\n                return;\r\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\r\n        }\r\n        if (final) {\r\n            if (this.p.length < 4)\r\n                err(6, 'invalid zlib data');\r\n            this.p = this.p.subarray(0, -4);\r\n        }\r\n        // necessary to prevent TS from using the closure value\r\n        // This allows for workerization to function correctly\r\n        Inflate.prototype.c.call(this, final);\r\n    };\r\n    return Unzlib;\r\n}());\r\nexport { Unzlib };\r\n/**\r\n * Asynchronous streaming Zlib decompression\r\n */\r\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\r\n    function AsyncUnzlib(opts, cb) {\r\n        astrmify([\r\n            bInflt,\r\n            zule,\r\n            function () { return [astrm, Inflate, Unzlib]; }\r\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\r\n            var strm = new Unzlib(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 11, 0);\r\n    }\r\n    return AsyncUnzlib;\r\n}());\r\nexport { AsyncUnzlib };\r\nexport function unzlib(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return cbify(data, opts, [\r\n        bInflt,\r\n        zule,\r\n        function () { return [unzlibSync]; }\r\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\r\n}\r\n/**\r\n * Expands Zlib data\r\n * @param data The data to decompress\r\n * @param opts The decompression options\r\n * @returns The decompressed version of the data\r\n */\r\nexport function unzlibSync(data, opts) {\r\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\r\n}\r\n// Default algorithm for compression (used because having a known output size allows faster decompression)\r\nexport { gzip as compress, AsyncGzip as AsyncCompress };\r\nexport { gzipSync as compressSync, Gzip as Compress };\r\n/**\r\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\r\n */\r\nvar Decompress = /*#__PURE__*/ (function () {\r\n    function Decompress(opts, cb) {\r\n        this.o = StrmOpt.call(this, opts, cb) || {};\r\n        this.G = Gunzip;\r\n        this.I = Inflate;\r\n        this.Z = Unzlib;\r\n    }\r\n    // init substream\r\n    // overriden by AsyncDecompress\r\n    Decompress.prototype.i = function () {\r\n        var _this = this;\r\n        this.s.ondata = function (dat, final) {\r\n            _this.ondata(dat, final);\r\n        };\r\n    };\r\n    /**\r\n     * Pushes a chunk to be decompressed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Decompress.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            err(5);\r\n        if (!this.s) {\r\n            if (this.p && this.p.length) {\r\n                var n = new u8(this.p.length + chunk.length);\r\n                n.set(this.p), n.set(chunk, this.p.length);\r\n            }\r\n            else\r\n                this.p = chunk;\r\n            if (this.p.length > 2) {\r\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\r\n                    ? new this.G(this.o)\r\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\r\n                        ? new this.I(this.o)\r\n                        : new this.Z(this.o);\r\n                this.i();\r\n                this.s.push(this.p, final);\r\n                this.p = null;\r\n            }\r\n        }\r\n        else\r\n            this.s.push(chunk, final);\r\n    };\r\n    return Decompress;\r\n}());\r\nexport { Decompress };\r\n/**\r\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\r\n */\r\nvar AsyncDecompress = /*#__PURE__*/ (function () {\r\n    function AsyncDecompress(opts, cb) {\r\n        Decompress.call(this, opts, cb);\r\n        this.queuedSize = 0;\r\n        this.G = AsyncGunzip;\r\n        this.I = AsyncInflate;\r\n        this.Z = AsyncUnzlib;\r\n    }\r\n    AsyncDecompress.prototype.i = function () {\r\n        var _this = this;\r\n        this.s.ondata = function (err, dat, final) {\r\n            _this.ondata(err, dat, final);\r\n        };\r\n        this.s.ondrain = function (size) {\r\n            _this.queuedSize -= size;\r\n            if (_this.ondrain)\r\n                _this.ondrain(size);\r\n        };\r\n    };\r\n    /**\r\n     * Pushes a chunk to be decompressed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    AsyncDecompress.prototype.push = function (chunk, final) {\r\n        this.queuedSize += chunk.length;\r\n        Decompress.prototype.push.call(this, chunk, final);\r\n    };\r\n    return AsyncDecompress;\r\n}());\r\nexport { AsyncDecompress };\r\nexport function decompress(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\r\n        ? gunzip(data, opts, cb)\r\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\r\n            ? inflate(data, opts, cb)\r\n            : unzlib(data, opts, cb);\r\n}\r\n/**\r\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\r\n * @param data The data to decompress\r\n * @param opts The decompression options\r\n * @returns The decompressed version of the data\r\n */\r\nexport function decompressSync(data, opts) {\r\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\r\n        ? gunzipSync(data, opts)\r\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\r\n            ? inflateSync(data, opts)\r\n            : unzlibSync(data, opts);\r\n}\r\n// flatten a directory structure\r\nvar fltn = function (d, p, t, o) {\r\n    for (var k in d) {\r\n        var val = d[k], n = p + k, op = o;\r\n        if (Array.isArray(val))\r\n            op = mrg(o, val[1]), val = val[0];\r\n        if (val instanceof u8)\r\n            t[n] = [val, op];\r\n        else {\r\n            t[n += '/'] = [new u8(0), op];\r\n            fltn(val, n, t, o);\r\n        }\r\n    }\r\n};\r\n// text encoder\r\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\r\n// text decoder\r\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\r\n// text decoder stream\r\nvar tds = 0;\r\ntry {\r\n    td.decode(et, { stream: true });\r\n    tds = 1;\r\n}\r\ncatch (e) { }\r\n// decode UTF8\r\nvar dutf8 = function (d) {\r\n    for (var r = '', i = 0;;) {\r\n        var c = d[i++];\r\n        var eb = (c > 127) + (c > 223) + (c > 239);\r\n        if (i + eb > d.length)\r\n            return { s: r, r: slc(d, i - 1) };\r\n        if (!eb)\r\n            r += String.fromCharCode(c);\r\n        else if (eb == 3) {\r\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\r\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\r\n        }\r\n        else if (eb & 1)\r\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\r\n        else\r\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\r\n    }\r\n};\r\n/**\r\n * Streaming UTF-8 decoding\r\n */\r\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a UTF-8 decoding stream\r\n     * @param cb The callback to call whenever data is decoded\r\n     */\r\n    function DecodeUTF8(cb) {\r\n        this.ondata = cb;\r\n        if (tds)\r\n            this.t = new TextDecoder();\r\n        else\r\n            this.p = et;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be decoded from UTF-8 binary\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    DecodeUTF8.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            err(5);\r\n        final = !!final;\r\n        if (this.t) {\r\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\r\n            if (final) {\r\n                if (this.t.decode().length)\r\n                    err(8);\r\n                this.t = null;\r\n            }\r\n            return;\r\n        }\r\n        if (!this.p)\r\n            err(4);\r\n        var dat = new u8(this.p.length + chunk.length);\r\n        dat.set(this.p);\r\n        dat.set(chunk, this.p.length);\r\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\r\n        if (final) {\r\n            if (r.length)\r\n                err(8);\r\n            this.p = null;\r\n        }\r\n        else\r\n            this.p = r;\r\n        this.ondata(s, final);\r\n    };\r\n    return DecodeUTF8;\r\n}());\r\nexport { DecodeUTF8 };\r\n/**\r\n * Streaming UTF-8 encoding\r\n */\r\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a UTF-8 decoding stream\r\n     * @param cb The callback to call whenever data is encoded\r\n     */\r\n    function EncodeUTF8(cb) {\r\n        this.ondata = cb;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be encoded to UTF-8\r\n     * @param chunk The string data to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    EncodeUTF8.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            err(5);\r\n        if (this.d)\r\n            err(4);\r\n        this.ondata(strToU8(chunk), this.d = final || false);\r\n    };\r\n    return EncodeUTF8;\r\n}());\r\nexport { EncodeUTF8 };\r\n/**\r\n * Converts a string into a Uint8Array for use with compression/decompression methods\r\n * @param str The string to encode\r\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\r\n *               not need to be true unless decoding a binary string.\r\n * @returns The string encoded in UTF-8/Latin-1 binary\r\n */\r\nexport function strToU8(str, latin1) {\r\n    if (latin1) {\r\n        var ar_1 = new u8(str.length);\r\n        for (var i = 0; i < str.length; ++i)\r\n            ar_1[i] = str.charCodeAt(i);\r\n        return ar_1;\r\n    }\r\n    if (te)\r\n        return te.encode(str);\r\n    var l = str.length;\r\n    var ar = new u8(str.length + (str.length >> 1));\r\n    var ai = 0;\r\n    var w = function (v) { ar[ai++] = v; };\r\n    for (var i = 0; i < l; ++i) {\r\n        if (ai + 5 > ar.length) {\r\n            var n = new u8(ai + 8 + ((l - i) << 1));\r\n            n.set(ar);\r\n            ar = n;\r\n        }\r\n        var c = str.charCodeAt(i);\r\n        if (c < 128 || latin1)\r\n            w(c);\r\n        else if (c < 2048)\r\n            w(192 | (c >> 6)), w(128 | (c & 63));\r\n        else if (c > 55295 && c < 57344)\r\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\r\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\r\n        else\r\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\r\n    }\r\n    return slc(ar, 0, ai);\r\n}\r\n/**\r\n * Converts a Uint8Array to a string\r\n * @param dat The data to decode to string\r\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\r\n *               not need to be true unless encoding to binary string.\r\n * @returns The original UTF-8/Latin-1 string\r\n */\r\nexport function strFromU8(dat, latin1) {\r\n    if (latin1) {\r\n        var r = '';\r\n        for (var i = 0; i < dat.length; i += 16384)\r\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\r\n        return r;\r\n    }\r\n    else if (td) {\r\n        return td.decode(dat);\r\n    }\r\n    else {\r\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\r\n        if (r.length)\r\n            err(8);\r\n        return s;\r\n    }\r\n}\r\n;\r\n// deflate bit flag\r\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\r\n// skip local zip header\r\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\r\n// read zip header\r\nvar zh = function (d, b, z) {\r\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\r\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\r\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\r\n};\r\n// read zip64 extra field\r\nvar z64e = function (d, b) {\r\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\r\n        ;\r\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\r\n};\r\n// extra field length\r\nvar exfl = function (ex) {\r\n    var le = 0;\r\n    if (ex) {\r\n        for (var k in ex) {\r\n            var l = ex[k].length;\r\n            if (l > 65535)\r\n                err(9);\r\n            le += l + 4;\r\n        }\r\n    }\r\n    return le;\r\n};\r\n// write zip header\r\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\r\n    var fl = fn.length, ex = f.extra, col = co && co.length;\r\n    var exl = exfl(ex);\r\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\r\n    if (ce != null)\r\n        d[b++] = 20, d[b++] = f.os;\r\n    d[b] = 20, b += 2; // spec compliance? what's that?\r\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\r\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\r\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\r\n    if (y < 0 || y > 119)\r\n        err(10);\r\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\r\n    if (c != -1) {\r\n        wbytes(d, b, f.crc);\r\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\r\n        wbytes(d, b + 8, f.size);\r\n    }\r\n    wbytes(d, b + 12, fl);\r\n    wbytes(d, b + 14, exl), b += 16;\r\n    if (ce != null) {\r\n        wbytes(d, b, col);\r\n        wbytes(d, b + 6, f.attrs);\r\n        wbytes(d, b + 10, ce), b += 14;\r\n    }\r\n    d.set(fn, b);\r\n    b += fl;\r\n    if (exl) {\r\n        for (var k in ex) {\r\n            var exf = ex[k], l = exf.length;\r\n            wbytes(d, b, +k);\r\n            wbytes(d, b + 2, l);\r\n            d.set(exf, b + 4), b += 4 + l;\r\n        }\r\n    }\r\n    if (col)\r\n        d.set(co, b), b += col;\r\n    return b;\r\n};\r\n// write zip footer (end of central directory)\r\nvar wzf = function (o, b, c, d, e) {\r\n    wbytes(o, b, 0x6054B50); // skip disk\r\n    wbytes(o, b + 8, c);\r\n    wbytes(o, b + 10, c);\r\n    wbytes(o, b + 12, d);\r\n    wbytes(o, b + 16, e);\r\n};\r\n/**\r\n * A pass-through stream to keep data uncompressed in a ZIP archive.\r\n */\r\nvar ZipPassThrough = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a pass-through stream that can be added to ZIP archives\r\n     * @param filename The filename to associate with this data stream\r\n     */\r\n    function ZipPassThrough(filename) {\r\n        this.filename = filename;\r\n        this.c = crc();\r\n        this.size = 0;\r\n        this.compression = 0;\r\n    }\r\n    /**\r\n     * Processes a chunk and pushes to the output stream. You can override this\r\n     * method in a subclass for custom behavior, but by default this passes\r\n     * the data through. You must call this.ondata(err, chunk, final) at some\r\n     * point in this method.\r\n     * @param chunk The chunk to process\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    ZipPassThrough.prototype.process = function (chunk, final) {\r\n        this.ondata(null, chunk, final);\r\n    };\r\n    /**\r\n     * Pushes a chunk to be added. If you are subclassing this with a custom\r\n     * compression algorithm, note that you must push data from the source\r\n     * file only, pre-compression.\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    ZipPassThrough.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            err(5);\r\n        this.c.p(chunk);\r\n        this.size += chunk.length;\r\n        if (final)\r\n            this.crc = this.c.d();\r\n        this.process(chunk, final || false);\r\n    };\r\n    return ZipPassThrough;\r\n}());\r\nexport { ZipPassThrough };\r\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\r\n/**\r\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\r\n * for better performance\r\n */\r\nvar ZipDeflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE stream that can be added to ZIP archives\r\n     * @param filename The filename to associate with this data stream\r\n     * @param opts The compression options\r\n     */\r\n    function ZipDeflate(filename, opts) {\r\n        var _this = this;\r\n        if (!opts)\r\n            opts = {};\r\n        ZipPassThrough.call(this, filename);\r\n        this.d = new Deflate(opts, function (dat, final) {\r\n            _this.ondata(null, dat, final);\r\n        });\r\n        this.compression = 8;\r\n        this.flag = dbf(opts.level);\r\n    }\r\n    ZipDeflate.prototype.process = function (chunk, final) {\r\n        try {\r\n            this.d.push(chunk, final);\r\n        }\r\n        catch (e) {\r\n            this.ondata(e, null, final);\r\n        }\r\n    };\r\n    /**\r\n     * Pushes a chunk to be deflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    ZipDeflate.prototype.push = function (chunk, final) {\r\n        ZipPassThrough.prototype.push.call(this, chunk, final);\r\n    };\r\n    return ZipDeflate;\r\n}());\r\nexport { ZipDeflate };\r\n/**\r\n * Asynchronous streaming DEFLATE compression for ZIP archives\r\n */\r\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\r\n     * @param filename The filename to associate with this data stream\r\n     * @param opts The compression options\r\n     */\r\n    function AsyncZipDeflate(filename, opts) {\r\n        var _this = this;\r\n        if (!opts)\r\n            opts = {};\r\n        ZipPassThrough.call(this, filename);\r\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\r\n            _this.ondata(err, dat, final);\r\n        });\r\n        this.compression = 8;\r\n        this.flag = dbf(opts.level);\r\n        this.terminate = this.d.terminate;\r\n    }\r\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\r\n        this.d.push(chunk, final);\r\n    };\r\n    /**\r\n     * Pushes a chunk to be deflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\r\n        ZipPassThrough.prototype.push.call(this, chunk, final);\r\n    };\r\n    return AsyncZipDeflate;\r\n}());\r\nexport { AsyncZipDeflate };\r\n// TODO: Better tree shaking\r\n/**\r\n * A zippable archive to which files can incrementally be added\r\n */\r\nvar Zip = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an empty ZIP archive to which files can be added\r\n     * @param cb The callback to call whenever data for the generated ZIP archive\r\n     *           is available\r\n     */\r\n    function Zip(cb) {\r\n        this.ondata = cb;\r\n        this.u = [];\r\n        this.d = 1;\r\n    }\r\n    /**\r\n     * Adds a file to the ZIP archive\r\n     * @param file The file stream to add\r\n     */\r\n    Zip.prototype.add = function (file) {\r\n        var _this = this;\r\n        if (!this.ondata)\r\n            err(5);\r\n        // finishing or finished\r\n        if (this.d & 2)\r\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\r\n        else {\r\n            var f = strToU8(file.filename), fl_1 = f.length;\r\n            var com = file.comment, o = com && strToU8(com);\r\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\r\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\r\n            if (fl_1 > 65535)\r\n                this.ondata(err(11, 0, 1), null, false);\r\n            var header = new u8(hl_1);\r\n            wzh(header, 0, file, f, u, -1);\r\n            var chks_1 = [header];\r\n            var pAll_1 = function () {\r\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\r\n                    var chk = chks_2[_i];\r\n                    _this.ondata(null, chk, false);\r\n                }\r\n                chks_1 = [];\r\n            };\r\n            var tr_1 = this.d;\r\n            this.d = 0;\r\n            var ind_1 = this.u.length;\r\n            var uf_1 = mrg(file, {\r\n                f: f,\r\n                u: u,\r\n                o: o,\r\n                t: function () {\r\n                    if (file.terminate)\r\n                        file.terminate();\r\n                },\r\n                r: function () {\r\n                    pAll_1();\r\n                    if (tr_1) {\r\n                        var nxt = _this.u[ind_1 + 1];\r\n                        if (nxt)\r\n                            nxt.r();\r\n                        else\r\n                            _this.d = 1;\r\n                    }\r\n                    tr_1 = 1;\r\n                }\r\n            });\r\n            var cl_1 = 0;\r\n            file.ondata = function (err, dat, final) {\r\n                if (err) {\r\n                    _this.ondata(err, dat, final);\r\n                    _this.terminate();\r\n                }\r\n                else {\r\n                    cl_1 += dat.length;\r\n                    chks_1.push(dat);\r\n                    if (final) {\r\n                        var dd = new u8(16);\r\n                        wbytes(dd, 0, 0x8074B50);\r\n                        wbytes(dd, 4, file.crc);\r\n                        wbytes(dd, 8, cl_1);\r\n                        wbytes(dd, 12, file.size);\r\n                        chks_1.push(dd);\r\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\r\n                        if (tr_1)\r\n                            uf_1.r();\r\n                        tr_1 = 1;\r\n                    }\r\n                    else if (tr_1)\r\n                        pAll_1();\r\n                }\r\n            };\r\n            this.u.push(uf_1);\r\n        }\r\n    };\r\n    /**\r\n     * Ends the process of adding files and prepares to emit the final chunks.\r\n     * This *must* be called after adding all desired files for the resulting\r\n     * ZIP file to work properly.\r\n     */\r\n    Zip.prototype.end = function () {\r\n        var _this = this;\r\n        if (this.d & 2) {\r\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\r\n            return;\r\n        }\r\n        if (this.d)\r\n            this.e();\r\n        else\r\n            this.u.push({\r\n                r: function () {\r\n                    if (!(_this.d & 1))\r\n                        return;\r\n                    _this.u.splice(-1, 1);\r\n                    _this.e();\r\n                },\r\n                t: function () { }\r\n            });\r\n        this.d = 3;\r\n    };\r\n    Zip.prototype.e = function () {\r\n        var bt = 0, l = 0, tl = 0;\r\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\r\n        }\r\n        var out = new u8(tl + 22);\r\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\r\n            var f = _c[_b];\r\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\r\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\r\n        }\r\n        wzf(out, bt, this.u.length, tl, l);\r\n        this.ondata(null, out, true);\r\n        this.d = 2;\r\n    };\r\n    /**\r\n     * A method to terminate any internal workers used by the stream. Subsequent\r\n     * calls to add() will fail.\r\n     */\r\n    Zip.prototype.terminate = function () {\r\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f.t();\r\n        }\r\n        this.d = 2;\r\n    };\r\n    return Zip;\r\n}());\r\nexport { Zip };\r\nexport function zip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    var r = {};\r\n    fltn(data, '', r, opts);\r\n    var k = Object.keys(r);\r\n    var lft = k.length, o = 0, tot = 0;\r\n    var slft = lft, files = new Array(lft);\r\n    var term = [];\r\n    var tAll = function () {\r\n        for (var i = 0; i < term.length; ++i)\r\n            term[i]();\r\n    };\r\n    var cbd = function (a, b) {\r\n        mt(function () { cb(a, b); });\r\n    };\r\n    mt(function () { cbd = cb; });\r\n    var cbf = function () {\r\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\r\n        tot = 0;\r\n        for (var i = 0; i < slft; ++i) {\r\n            var f = files[i];\r\n            try {\r\n                var l = f.c.length;\r\n                wzh(out, tot, f, f.f, f.u, l);\r\n                var badd = 30 + f.f.length + exfl(f.extra);\r\n                var loc = tot + badd;\r\n                out.set(f.c, loc);\r\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\r\n            }\r\n            catch (e) {\r\n                return cbd(e, null);\r\n            }\r\n        }\r\n        wzf(out, o, files.length, cdl, oe);\r\n        cbd(null, out);\r\n    };\r\n    if (!lft)\r\n        cbf();\r\n    var _loop_1 = function (i) {\r\n        var fn = k[i];\r\n        var _a = r[fn], file = _a[0], p = _a[1];\r\n        var c = crc(), size = file.length;\r\n        c.p(file);\r\n        var f = strToU8(fn), s = f.length;\r\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\r\n        var exl = exfl(p.extra);\r\n        var compression = p.level == 0 ? 0 : 8;\r\n        var cbl = function (e, d) {\r\n            if (e) {\r\n                tAll();\r\n                cbd(e, null);\r\n            }\r\n            else {\r\n                var l = d.length;\r\n                files[i] = mrg(p, {\r\n                    size: size,\r\n                    crc: c.d(),\r\n                    c: d,\r\n                    f: f,\r\n                    m: m,\r\n                    u: s != fn.length || (m && (com.length != ms)),\r\n                    compression: compression\r\n                });\r\n                o += 30 + s + exl + l;\r\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\r\n                if (!--lft)\r\n                    cbf();\r\n            }\r\n        };\r\n        if (s > 65535)\r\n            cbl(err(11, 0, 1), null);\r\n        if (!compression)\r\n            cbl(null, file);\r\n        else if (size < 160000) {\r\n            try {\r\n                cbl(null, deflateSync(file, p));\r\n            }\r\n            catch (e) {\r\n                cbl(e, null);\r\n            }\r\n        }\r\n        else\r\n            term.push(deflate(file, p, cbl));\r\n    };\r\n    // Cannot use lft because it can decrease\r\n    for (var i = 0; i < slft; ++i) {\r\n        _loop_1(i);\r\n    }\r\n    return tAll;\r\n}\r\n/**\r\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\r\n * with more than one file.\r\n * @param data The directory structure for the ZIP archive\r\n * @param opts The main options, merged with per-file options\r\n * @returns The generated ZIP archive\r\n */\r\nexport function zipSync(data, opts) {\r\n    if (!opts)\r\n        opts = {};\r\n    var r = {};\r\n    var files = [];\r\n    fltn(data, '', r, opts);\r\n    var o = 0;\r\n    var tot = 0;\r\n    for (var fn in r) {\r\n        var _a = r[fn], file = _a[0], p = _a[1];\r\n        var compression = p.level == 0 ? 0 : 8;\r\n        var f = strToU8(fn), s = f.length;\r\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\r\n        var exl = exfl(p.extra);\r\n        if (s > 65535)\r\n            err(11);\r\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\r\n        var c = crc();\r\n        c.p(file);\r\n        files.push(mrg(p, {\r\n            size: file.length,\r\n            crc: c.d(),\r\n            c: d,\r\n            f: f,\r\n            m: m,\r\n            u: s != fn.length || (m && (com.length != ms)),\r\n            o: o,\r\n            compression: compression\r\n        }));\r\n        o += 30 + s + exl + l;\r\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\r\n    }\r\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\r\n    for (var i = 0; i < files.length; ++i) {\r\n        var f = files[i];\r\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\r\n        var badd = 30 + f.f.length + exfl(f.extra);\r\n        out.set(f.c, f.o + badd);\r\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\r\n    }\r\n    wzf(out, o, files.length, cdl, oe);\r\n    return out;\r\n}\r\n/**\r\n * Streaming pass-through decompression for ZIP archives\r\n */\r\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\r\n    function UnzipPassThrough() {\r\n    }\r\n    UnzipPassThrough.prototype.push = function (data, final) {\r\n        this.ondata(null, data, final);\r\n    };\r\n    UnzipPassThrough.compression = 0;\r\n    return UnzipPassThrough;\r\n}());\r\nexport { UnzipPassThrough };\r\n/**\r\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\r\n * better performance.\r\n */\r\nvar UnzipInflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE decompression that can be used in ZIP archives\r\n     */\r\n    function UnzipInflate() {\r\n        var _this = this;\r\n        this.i = new Inflate(function (dat, final) {\r\n            _this.ondata(null, dat, final);\r\n        });\r\n    }\r\n    UnzipInflate.prototype.push = function (data, final) {\r\n        try {\r\n            this.i.push(data, final);\r\n        }\r\n        catch (e) {\r\n            this.ondata(e, null, final);\r\n        }\r\n    };\r\n    UnzipInflate.compression = 8;\r\n    return UnzipInflate;\r\n}());\r\nexport { UnzipInflate };\r\n/**\r\n * Asynchronous streaming DEFLATE decompression for ZIP archives\r\n */\r\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE decompression that can be used in ZIP archives\r\n     */\r\n    function AsyncUnzipInflate(_, sz) {\r\n        var _this = this;\r\n        if (sz < 320000) {\r\n            this.i = new Inflate(function (dat, final) {\r\n                _this.ondata(null, dat, final);\r\n            });\r\n        }\r\n        else {\r\n            this.i = new AsyncInflate(function (err, dat, final) {\r\n                _this.ondata(err, dat, final);\r\n            });\r\n            this.terminate = this.i.terminate;\r\n        }\r\n    }\r\n    AsyncUnzipInflate.prototype.push = function (data, final) {\r\n        if (this.i.terminate)\r\n            data = slc(data, 0);\r\n        this.i.push(data, final);\r\n    };\r\n    AsyncUnzipInflate.compression = 8;\r\n    return AsyncUnzipInflate;\r\n}());\r\nexport { AsyncUnzipInflate };\r\n/**\r\n * A ZIP archive decompression stream that emits files as they are discovered\r\n */\r\nvar Unzip = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a ZIP decompression stream\r\n     * @param cb The callback to call whenever a file in the ZIP archive is found\r\n     */\r\n    function Unzip(cb) {\r\n        this.onfile = cb;\r\n        this.k = [];\r\n        this.o = {\r\n            0: UnzipPassThrough\r\n        };\r\n        this.p = et;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be unzipped\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Unzip.prototype.push = function (chunk, final) {\r\n        var _this = this;\r\n        if (!this.onfile)\r\n            err(5);\r\n        if (!this.p)\r\n            err(4);\r\n        if (this.c > 0) {\r\n            var len = Math.min(this.c, chunk.length);\r\n            var toAdd = chunk.subarray(0, len);\r\n            this.c -= len;\r\n            if (this.d)\r\n                this.d.push(toAdd, !this.c);\r\n            else\r\n                this.k[0].push(toAdd);\r\n            chunk = chunk.subarray(len);\r\n            if (chunk.length)\r\n                return this.push(chunk, final);\r\n        }\r\n        else {\r\n            var f = 0, i = 0, is = void 0, buf = void 0;\r\n            if (!this.p.length)\r\n                buf = chunk;\r\n            else if (!chunk.length)\r\n                buf = this.p;\r\n            else {\r\n                buf = new u8(this.p.length + chunk.length);\r\n                buf.set(this.p), buf.set(chunk, this.p.length);\r\n            }\r\n            var l = buf.length, oc = this.c, add = oc && this.d;\r\n            var _loop_2 = function () {\r\n                var _a;\r\n                var sig = b4(buf, i);\r\n                if (sig == 0x4034B50) {\r\n                    f = 1, is = i;\r\n                    this_1.d = null;\r\n                    this_1.c = 0;\r\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\r\n                    if (l > i + 30 + fnl + es) {\r\n                        var chks_3 = [];\r\n                        this_1.k.unshift(chks_3);\r\n                        f = 2;\r\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\r\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\r\n                        if (sc_1 == 4294967295) {\r\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\r\n                        }\r\n                        else if (dd)\r\n                            sc_1 = -1;\r\n                        i += es;\r\n                        this_1.c = sc_1;\r\n                        var d_1;\r\n                        var file_1 = {\r\n                            name: fn_1,\r\n                            compression: cmp_1,\r\n                            start: function () {\r\n                                if (!file_1.ondata)\r\n                                    err(5);\r\n                                if (!sc_1)\r\n                                    file_1.ondata(null, et, true);\r\n                                else {\r\n                                    var ctr = _this.o[cmp_1];\r\n                                    if (!ctr)\r\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\r\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\r\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\r\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\r\n                                        var dat = chks_4[_i];\r\n                                        d_1.push(dat, false);\r\n                                    }\r\n                                    if (_this.k[0] == chks_3 && _this.c)\r\n                                        _this.d = d_1;\r\n                                    else\r\n                                        d_1.push(et, true);\r\n                                }\r\n                            },\r\n                            terminate: function () {\r\n                                if (d_1 && d_1.terminate)\r\n                                    d_1.terminate();\r\n                            }\r\n                        };\r\n                        if (sc_1 >= 0)\r\n                            file_1.size = sc_1, file_1.originalSize = su_1;\r\n                        this_1.onfile(file_1);\r\n                    }\r\n                    return \"break\";\r\n                }\r\n                else if (oc) {\r\n                    if (sig == 0x8074B50) {\r\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\r\n                        return \"break\";\r\n                    }\r\n                    else if (sig == 0x2014B50) {\r\n                        is = i -= 4, f = 3, this_1.c = 0;\r\n                        return \"break\";\r\n                    }\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            for (; i < l - 4; ++i) {\r\n                var state_1 = _loop_2();\r\n                if (state_1 === \"break\")\r\n                    break;\r\n            }\r\n            this.p = et;\r\n            if (oc < 0) {\r\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\r\n                if (add)\r\n                    add.push(dat, !!f);\r\n                else\r\n                    this.k[+(f == 2)].push(dat);\r\n            }\r\n            if (f & 2)\r\n                return this.push(buf.subarray(i), final);\r\n            this.p = buf.subarray(i);\r\n        }\r\n        if (final) {\r\n            if (this.c)\r\n                err(13);\r\n            this.p = null;\r\n        }\r\n    };\r\n    /**\r\n     * Registers a decoder with the stream, allowing for files compressed with\r\n     * the compression type provided to be expanded correctly\r\n     * @param decoder The decoder constructor\r\n     */\r\n    Unzip.prototype.register = function (decoder) {\r\n        this.o[decoder.compression] = decoder;\r\n    };\r\n    return Unzip;\r\n}());\r\nexport { Unzip };\r\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\r\nexport function unzip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        err(7);\r\n    var term = [];\r\n    var tAll = function () {\r\n        for (var i = 0; i < term.length; ++i)\r\n            term[i]();\r\n    };\r\n    var files = {};\r\n    var cbd = function (a, b) {\r\n        mt(function () { cb(a, b); });\r\n    };\r\n    mt(function () { cbd = cb; });\r\n    var e = data.length - 22;\r\n    for (; b4(data, e) != 0x6054B50; --e) {\r\n        if (!e || data.length - e > 65558) {\r\n            cbd(err(13, 0, 1), null);\r\n            return tAll;\r\n        }\r\n    }\r\n    ;\r\n    var lft = b2(data, e + 8);\r\n    if (lft) {\r\n        var c = lft;\r\n        var o = b4(data, e + 16);\r\n        var z = o == 4294967295 || c == 65535;\r\n        if (z) {\r\n            var ze = b4(data, e - 12);\r\n            z = b4(data, ze) == 0x6064B50;\r\n            if (z) {\r\n                c = lft = b4(data, ze + 32);\r\n                o = b4(data, ze + 48);\r\n            }\r\n        }\r\n        var fltr = opts && opts.filter;\r\n        var _loop_3 = function (i) {\r\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\r\n            o = no;\r\n            var cbl = function (e, d) {\r\n                if (e) {\r\n                    tAll();\r\n                    cbd(e, null);\r\n                }\r\n                else {\r\n                    if (d)\r\n                        files[fn] = d;\r\n                    if (!--lft)\r\n                        cbd(null, files);\r\n                }\r\n            };\r\n            if (!fltr || fltr({\r\n                name: fn,\r\n                size: sc,\r\n                originalSize: su,\r\n                compression: c_1\r\n            })) {\r\n                if (!c_1)\r\n                    cbl(null, slc(data, b, b + sc));\r\n                else if (c_1 == 8) {\r\n                    var infl = data.subarray(b, b + sc);\r\n                    // Synchronously decompress under 512KB, or barely-compressed data\r\n                    if (su < 524288 || sc > 0.8 * su) {\r\n                        try {\r\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\r\n                        }\r\n                        catch (e) {\r\n                            cbl(e, null);\r\n                        }\r\n                    }\r\n                    else\r\n                        term.push(inflate(infl, { size: su }, cbl));\r\n                }\r\n                else\r\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\r\n            }\r\n            else\r\n                cbl(null, null);\r\n        };\r\n        for (var i = 0; i < c; ++i) {\r\n            _loop_3(i);\r\n        }\r\n    }\r\n    else\r\n        cbd(null, {});\r\n    return tAll;\r\n}\r\n/**\r\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\r\n * performance with more than one file.\r\n * @param data The raw compressed ZIP file\r\n * @param opts The ZIP extraction options\r\n * @returns The decompressed files\r\n */\r\nexport function unzipSync(data, opts) {\r\n    var files = {};\r\n    var e = data.length - 22;\r\n    for (; b4(data, e) != 0x6054B50; --e) {\r\n        if (!e || data.length - e > 65558)\r\n            err(13);\r\n    }\r\n    ;\r\n    var c = b2(data, e + 8);\r\n    if (!c)\r\n        return {};\r\n    var o = b4(data, e + 16);\r\n    var z = o == 4294967295 || c == 65535;\r\n    if (z) {\r\n        var ze = b4(data, e - 12);\r\n        z = b4(data, ze) == 0x6064B50;\r\n        if (z) {\r\n            c = b4(data, ze + 32);\r\n            o = b4(data, ze + 48);\r\n        }\r\n    }\r\n    var fltr = opts && opts.filter;\r\n    for (var i = 0; i < c; ++i) {\r\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\r\n        o = no;\r\n        if (!fltr || fltr({\r\n            name: fn,\r\n            size: sc,\r\n            originalSize: su,\r\n            compression: c_2\r\n        })) {\r\n            if (!c_2)\r\n                files[fn] = slc(data, b, b + sc);\r\n            else if (c_2 == 8)\r\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\r\n            else\r\n                err(14, 'unknown compression type ' + c_2);\r\n        }\r\n    }\r\n    return files;\r\n}\r\n","import {\r\n\tVector3,\r\n\tVector4\r\n} from './three.module.min.js';\r\n\r\n/**\r\n * NURBS utils\r\n *\r\n * See NURBSCurve and NURBSSurface.\r\n **/\r\n\r\n\r\n/**************************************************************\r\n *\tNURBS Utils\r\n **************************************************************/\r\n\r\n/*\r\nFinds knot vector span.\r\n\r\np : degree\r\nu : parametric value\r\nU : knot vector\r\n\r\nreturns the span\r\n*/\r\nfunction findSpan( p, u, U ) {\r\n\r\n\tconst n = U.length - p - 1;\r\n\r\n\tif ( u >= U[ n ] ) {\r\n\r\n\t\treturn n - 1;\r\n\r\n\t}\r\n\r\n\tif ( u <= U[ p ] ) {\r\n\r\n\t\treturn p;\r\n\r\n\t}\r\n\r\n\tlet low = p;\r\n\tlet high = n;\r\n\tlet mid = Math.floor( ( low + high ) / 2 );\r\n\r\n\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\r\n\r\n\t\tif ( u < U[ mid ] ) {\r\n\r\n\t\t\thigh = mid;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlow = mid;\r\n\r\n\t\t}\r\n\r\n\t\tmid = Math.floor( ( low + high ) / 2 );\r\n\r\n\t}\r\n\r\n\treturn mid;\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\r\n\r\nspan : span in which u lies\r\nu    : parametric point\r\np    : degree\r\nU    : knot vector\r\n\r\nreturns array[p+1] with basis functions values.\r\n*/\r\nfunction calcBasisFunctions( span, u, p, U ) {\r\n\r\n\tconst N = [];\r\n\tconst left = [];\r\n\tconst right = [];\r\n\tN[ 0 ] = 1.0;\r\n\r\n\tfor ( let j = 1; j <= p; ++ j ) {\r\n\r\n\t\tleft[ j ] = u - U[ span + 1 - j ];\r\n\t\tright[ j ] = U[ span + j ] - u;\r\n\r\n\t\tlet saved = 0.0;\r\n\r\n\t\tfor ( let r = 0; r < j; ++ r ) {\r\n\r\n\t\t\tconst rv = right[ r + 1 ];\r\n\t\t\tconst lv = left[ j - r ];\r\n\t\t\tconst temp = N[ r ] / ( rv + lv );\r\n\t\t\tN[ r ] = saved + rv * temp;\r\n\t\t\tsaved = lv * temp;\r\n\r\n\t\t}\r\n\r\n\t\tN[ j ] = saved;\r\n\r\n\t}\r\n\r\n\treturn N;\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\r\n\r\np : degree of B-Spline\r\nU : knot vector\r\nP : control points (x, y, z, w)\r\nu : parametric point\r\n\r\nreturns point for given u\r\n*/\r\nfunction calcBSplinePoint( p, U, P, u ) {\r\n\r\n\tconst span = findSpan( p, u, U );\r\n\tconst N = calcBasisFunctions( span, u, p, U );\r\n\tconst C = new Vector4( 0, 0, 0, 0 );\r\n\r\n\tfor ( let j = 0; j <= p; ++ j ) {\r\n\r\n\t\tconst point = P[ span - p + j ];\r\n\t\tconst Nj = N[ j ];\r\n\t\tconst wNj = point.w * Nj;\r\n\t\tC.x += point.x * wNj;\r\n\t\tC.y += point.y * wNj;\r\n\t\tC.z += point.z * wNj;\r\n\t\tC.w += point.w * Nj;\r\n\r\n\t}\r\n\r\n\treturn C;\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\r\n\r\nspan : span in which u lies\r\nu    : parametric point\r\np    : degree\r\nn    : number of derivatives to calculate\r\nU    : knot vector\r\n\r\nreturns array[n+1][p+1] with basis functions derivatives\r\n*/\r\nfunction calcBasisFunctionDerivatives( span, u, p, n, U ) {\r\n\r\n\tconst zeroArr = [];\r\n\tfor ( let i = 0; i <= p; ++ i )\r\n\t\tzeroArr[ i ] = 0.0;\r\n\r\n\tconst ders = [];\r\n\r\n\tfor ( let i = 0; i <= n; ++ i )\r\n\t\tders[ i ] = zeroArr.slice( 0 );\r\n\r\n\tconst ndu = [];\r\n\r\n\tfor ( let i = 0; i <= p; ++ i )\r\n\t\tndu[ i ] = zeroArr.slice( 0 );\r\n\r\n\tndu[ 0 ][ 0 ] = 1.0;\r\n\r\n\tconst left = zeroArr.slice( 0 );\r\n\tconst right = zeroArr.slice( 0 );\r\n\r\n\tfor ( let j = 1; j <= p; ++ j ) {\r\n\r\n\t\tleft[ j ] = u - U[ span + 1 - j ];\r\n\t\tright[ j ] = U[ span + j ] - u;\r\n\r\n\t\tlet saved = 0.0;\r\n\r\n\t\tfor ( let r = 0; r < j; ++ r ) {\r\n\r\n\t\t\tconst rv = right[ r + 1 ];\r\n\t\t\tconst lv = left[ j - r ];\r\n\t\t\tndu[ j ][ r ] = rv + lv;\r\n\r\n\t\t\tconst temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\r\n\t\t\tndu[ r ][ j ] = saved + rv * temp;\r\n\t\t\tsaved = lv * temp;\r\n\r\n\t\t}\r\n\r\n\t\tndu[ j ][ j ] = saved;\r\n\r\n\t}\r\n\r\n\tfor ( let j = 0; j <= p; ++ j ) {\r\n\r\n\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\r\n\r\n\t}\r\n\r\n\tfor ( let r = 0; r <= p; ++ r ) {\r\n\r\n\t\tlet s1 = 0;\r\n\t\tlet s2 = 1;\r\n\r\n\t\tconst a = [];\r\n\t\tfor ( let i = 0; i <= p; ++ i ) {\r\n\r\n\t\t\ta[ i ] = zeroArr.slice( 0 );\r\n\r\n\t\t}\r\n\r\n\t\ta[ 0 ][ 0 ] = 1.0;\r\n\r\n\t\tfor ( let k = 1; k <= n; ++ k ) {\r\n\r\n\t\t\tlet d = 0.0;\r\n\t\t\tconst rk = r - k;\r\n\t\t\tconst pk = p - k;\r\n\r\n\t\t\tif ( r >= k ) {\r\n\r\n\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\r\n\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst j1 = ( rk >= - 1 ) ? 1 : - rk;\r\n\t\t\tconst j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\r\n\r\n\t\t\tfor ( let j = j1; j <= j2; ++ j ) {\r\n\r\n\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\r\n\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( r <= pk ) {\r\n\r\n\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\r\n\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tders[ k ][ r ] = d;\r\n\r\n\t\t\tconst j = s1;\r\n\t\t\ts1 = s2;\r\n\t\t\ts2 = j;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlet r = p;\r\n\r\n\tfor ( let k = 1; k <= n; ++ k ) {\r\n\r\n\t\tfor ( let j = 0; j <= p; ++ j ) {\r\n\r\n\t\t\tders[ k ][ j ] *= r;\r\n\r\n\t\t}\r\n\r\n\t\tr *= p - k;\r\n\r\n\t}\r\n\r\n\treturn ders;\r\n\r\n}\r\n\r\n\r\n/*\r\n\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\r\n\r\n\tp  : degree\r\n\tU  : knot vector\r\n\tP  : control points\r\n\tu  : Parametric points\r\n\tnd : number of derivatives\r\n\r\n\treturns array[d+1] with derivatives\r\n\t*/\r\nfunction calcBSplineDerivatives( p, U, P, u, nd ) {\r\n\r\n\tconst du = nd < p ? nd : p;\r\n\tconst CK = [];\r\n\tconst span = findSpan( p, u, U );\r\n\tconst nders = calcBasisFunctionDerivatives( span, u, p, du, U );\r\n\tconst Pw = [];\r\n\r\n\tfor ( let i = 0; i < P.length; ++ i ) {\r\n\r\n\t\tconst point = P[ i ].clone();\r\n\t\tconst w = point.w;\r\n\r\n\t\tpoint.x *= w;\r\n\t\tpoint.y *= w;\r\n\t\tpoint.z *= w;\r\n\r\n\t\tPw[ i ] = point;\r\n\r\n\t}\r\n\r\n\tfor ( let k = 0; k <= du; ++ k ) {\r\n\r\n\t\tconst point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\r\n\r\n\t\tfor ( let j = 1; j <= p; ++ j ) {\r\n\r\n\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tCK[ k ] = point;\r\n\r\n\t}\r\n\r\n\tfor ( let k = du + 1; k <= nd + 1; ++ k ) {\r\n\r\n\t\tCK[ k ] = new Vector4( 0, 0, 0 );\r\n\r\n\t}\r\n\r\n\treturn CK;\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate \"K over I\"\r\n\r\nreturns k!/(i!(k-i)!)\r\n*/\r\nfunction calcKoverI( k, i ) {\r\n\r\n\tlet nom = 1;\r\n\r\n\tfor ( let j = 2; j <= k; ++ j ) {\r\n\r\n\t\tnom *= j;\r\n\r\n\t}\r\n\r\n\tlet denom = 1;\r\n\r\n\tfor ( let j = 2; j <= i; ++ j ) {\r\n\r\n\t\tdenom *= j;\r\n\r\n\t}\r\n\r\n\tfor ( let j = 2; j <= k - i; ++ j ) {\r\n\r\n\t\tdenom *= j;\r\n\r\n\t}\r\n\r\n\treturn nom / denom;\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\r\n\r\nPders : result of function calcBSplineDerivatives\r\n\r\nreturns array with derivatives for rational curve.\r\n*/\r\nfunction calcRationalCurveDerivatives( Pders ) {\r\n\r\n\tconst nd = Pders.length;\r\n\tconst Aders = [];\r\n\tconst wders = [];\r\n\r\n\tfor ( let i = 0; i < nd; ++ i ) {\r\n\r\n\t\tconst point = Pders[ i ];\r\n\t\tAders[ i ] = new Vector3( point.x, point.y, point.z );\r\n\t\twders[ i ] = point.w;\r\n\r\n\t}\r\n\r\n\tconst CK = [];\r\n\r\n\tfor ( let k = 0; k < nd; ++ k ) {\r\n\r\n\t\tconst v = Aders[ k ].clone();\r\n\r\n\t\tfor ( let i = 1; i <= k; ++ i ) {\r\n\r\n\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( calcKoverI( k, i ) * wders[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn CK;\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\r\n\r\np  : degree\r\nU  : knot vector\r\nP  : control points in homogeneous space\r\nu  : parametric points\r\nnd : number of derivatives\r\n\r\nreturns array with derivatives.\r\n*/\r\nfunction calcNURBSDerivatives( p, U, P, u, nd ) {\r\n\r\n\tconst Pders = calcBSplineDerivatives( p, U, P, u, nd );\r\n\treturn calcRationalCurveDerivatives( Pders );\r\n\r\n}\r\n\r\n\r\n/*\r\nCalculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\r\n\r\np, q : degrees of B-Spline surface\r\nU, V : knot vectors\r\nP    : control points (x, y, z, w)\r\nu, v : parametric values\r\n\r\nreturns point for given (u, v)\r\n*/\r\nfunction calcSurfacePoint( p, q, U, V, P, u, v, target ) {\r\n\r\n\tconst uspan = findSpan( p, u, U );\r\n\tconst vspan = findSpan( q, v, V );\r\n\tconst Nu = calcBasisFunctions( uspan, u, p, U );\r\n\tconst Nv = calcBasisFunctions( vspan, v, q, V );\r\n\tconst temp = [];\r\n\r\n\tfor ( let l = 0; l <= q; ++ l ) {\r\n\r\n\t\ttemp[ l ] = new Vector4( 0, 0, 0, 0 );\r\n\t\tfor ( let k = 0; k <= p; ++ k ) {\r\n\r\n\t\t\tconst point = P[ uspan - p + k ][ vspan - q + l ].clone();\r\n\t\t\tconst w = point.w;\r\n\t\t\tpoint.x *= w;\r\n\t\t\tpoint.y *= w;\r\n\t\t\tpoint.z *= w;\r\n\t\t\ttemp[ l ].add( point.multiplyScalar( Nu[ k ] ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst Sw = new Vector4( 0, 0, 0, 0 );\r\n\tfor ( let l = 0; l <= q; ++ l ) {\r\n\r\n\t\tSw.add( temp[ l ].multiplyScalar( Nv[ l ] ) );\r\n\r\n\t}\r\n\r\n\tSw.divideScalar( Sw.w );\r\n\ttarget.set( Sw.x, Sw.y, Sw.z );\r\n\r\n}\r\n\r\n/*\r\nCalculate rational B-Spline volume point. See The NURBS Book, page 134, algorithm A4.3.\r\n\r\np, q, r   : degrees of B-Splinevolume\r\nU, V, W   : knot vectors\r\nP         : control points (x, y, z, w)\r\nu, v, w   : parametric values\r\n\r\nreturns point for given (u, v, w)\r\n*/\r\nfunction calcVolumePoint( p, q, r, U, V, W, P, u, v, w, target ) {\r\n\r\n\tconst uspan = findSpan( p, u, U );\r\n\tconst vspan = findSpan( q, v, V );\r\n\tconst wspan = findSpan( r, w, W );\r\n\tconst Nu = calcBasisFunctions( uspan, u, p, U );\r\n\tconst Nv = calcBasisFunctions( vspan, v, q, V );\r\n\tconst Nw = calcBasisFunctions( wspan, w, r, W );\r\n\tconst temp = [];\r\n\r\n\tfor ( let m = 0; m <= r; ++ m ) {\r\n\r\n\t\ttemp[ m ] = [];\r\n\r\n\t\tfor ( let l = 0; l <= q; ++ l ) {\r\n\r\n\t\t\ttemp[ m ][ l ] = new Vector4( 0, 0, 0, 0 );\r\n\t\t\tfor ( let k = 0; k <= p; ++ k ) {\r\n\r\n\t\t\t\tconst point = P[ uspan - p + k ][ vspan - q + l ][ wspan - r + m ].clone();\r\n\t\t\t\tconst w = point.w;\r\n\t\t\t\tpoint.x *= w;\r\n\t\t\t\tpoint.y *= w;\r\n\t\t\t\tpoint.z *= w;\r\n\t\t\t\ttemp[ m ][ l ].add( point.multiplyScalar( Nu[ k ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tconst Sw = new Vector4( 0, 0, 0, 0 );\r\n\tfor ( let m = 0; m <= r; ++ m ) {\r\n\t\tfor ( let l = 0; l <= q; ++ l ) {\r\n\r\n\t\t\tSw.add( temp[ m ][ l ].multiplyScalar( Nw[ m ] ).multiplyScalar( Nv[ l ] ) );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tSw.divideScalar( Sw.w );\r\n\ttarget.set( Sw.x, Sw.y, Sw.z );\r\n\r\n}\r\n\r\n\r\nexport {\r\n\tfindSpan,\r\n\tcalcBasisFunctions,\r\n\tcalcBSplinePoint,\r\n\tcalcBasisFunctionDerivatives,\r\n\tcalcBSplineDerivatives,\r\n\tcalcKoverI,\r\n\tcalcRationalCurveDerivatives,\r\n\tcalcNURBSDerivatives,\r\n\tcalcSurfacePoint,\r\n\tcalcVolumePoint,\r\n};\r\n","import {\r\n\tCurve,\r\n\tVector3,\r\n\tVector4\r\n} from './three.module.min.js';\r\nimport * as NURBSUtils from './NURBSUtils.js';\r\n\r\n/**\r\n * NURBS curve object\r\n *\r\n * Derives from Curve, overriding getPoint and getTangent.\r\n *\r\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\r\n *\r\n **/\r\n\r\nclass NURBSCurve extends Curve {\r\n\r\n\tconstructor(\r\n\t\tdegree,\r\n\t\tknots /* array of reals */,\r\n\t\tcontrolPoints /* array of Vector(2|3|4) */,\r\n\t\tstartKnot /* index in knots */,\r\n\t\tendKnot /* index in knots */\r\n\t) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tconst knotsLength = knots ? knots.length - 1 : 0;\r\n\t\tconst pointsLength = controlPoints ? controlPoints.length : 0;\r\n\r\n\t\tthis.degree = degree;\r\n\t\tthis.knots = knots;\r\n\t\tthis.controlPoints = [];\r\n\t\t// Used by periodic NURBS to remove hidden spans\r\n\t\tthis.startKnot = startKnot || 0;\r\n\t\tthis.endKnot = endKnot || knotsLength;\r\n\r\n\t\tfor ( let i = 0; i < pointsLength; ++ i ) {\r\n\r\n\t\t\t// ensure Vector4 for control points\r\n\t\t\tconst point = controlPoints[ i ];\r\n\t\t\tthis.controlPoints[ i ] = new Vector4( point.x, point.y, point.z, point.w );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetPoint( t, optionalTarget = new Vector3() ) {\r\n\r\n\t\tconst point = optionalTarget;\r\n\r\n\t\tconst u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\r\n\r\n\t\t// following results in (wx, wy, wz, w) homogeneous point\r\n\t\tconst hpoint = NURBSUtils.calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\r\n\r\n\t\tif ( hpoint.w !== 1.0 ) {\r\n\r\n\t\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\r\n\t\t\thpoint.divideScalar( hpoint.w );\r\n\r\n\t\t}\r\n\r\n\t\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\r\n\r\n\t}\r\n\r\n\tgetTangent( t, optionalTarget = new Vector3() ) {\r\n\r\n\t\tconst tangent = optionalTarget;\r\n\r\n\t\tconst u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\r\n\t\tconst ders = NURBSUtils.calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\r\n\t\ttangent.copy( ders[ 1 ] ).normalize();\r\n\r\n\t\treturn tangent;\r\n\r\n\t}\r\n\r\n\ttoJSON() {\r\n\r\n\t\tconst data = super.toJSON();\r\n\r\n\t\tdata.degree = this.degree;\r\n\t\tdata.knots = [ ...this.knots ];\r\n\t\tdata.controlPoints = this.controlPoints.map( p => p.toArray() );\r\n\t\tdata.startKnot = this.startKnot;\r\n\t\tdata.endKnot = this.endKnot;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfromJSON( json ) {\r\n\r\n\t\tsuper.fromJSON( json );\r\n\r\n\t\tthis.degree = json.degree;\r\n\t\tthis.knots = [ ...json.knots ];\r\n\t\tthis.controlPoints = json.controlPoints.map( p => new Vector4( p[ 0 ], p[ 1 ], p[ 2 ], p[ 3 ] ) );\r\n\t\tthis.startKnot = json.startKnot;\r\n\t\tthis.endKnot = json.endKnot;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { NURBSCurve };","import {\r\n\tAmbientLight,\r\n\tAnimationClip,\r\n\tBone,\r\n\tBufferGeometry,\r\n\tClampToEdgeWrapping,\r\n\tColor,\r\n\tColorManagement,\r\n\tDirectionalLight,\r\n\tEquirectangularReflectionMapping,\r\n\tEuler,\r\n\tFileLoader,\r\n\tFloat32BufferAttribute,\r\n\tGroup,\r\n\tLine,\r\n\tLineBasicMaterial,\r\n\tLoader,\r\n\tLoaderUtils,\r\n\tMathUtils,\r\n\tMatrix3,\r\n\tMatrix4,\r\n\tMesh,\r\n\tMeshLambertMaterial,\r\n\tMeshPhongMaterial,\r\n\tNumberKeyframeTrack,\r\n\tObject3D,\r\n\tPerspectiveCamera,\r\n\tPointLight,\r\n\tPropertyBinding,\r\n\tQuaternion,\r\n\tQuaternionKeyframeTrack,\r\n\tRepeatWrapping,\r\n\tSRGBColorSpace,\r\n\tLinearSRGBColorSpace,\r\n\tShapeUtils,\r\n\tSkeleton,\r\n\tSkinnedMesh,\r\n\tSpotLight,\r\n\tTexture,\r\n\tTextureLoader,\r\n\tUint16BufferAttribute,\r\n\tVector2,\r\n\tVector3,\r\n\tVector4,\r\n\tVectorKeyframeTrack\r\n} from './three.module.min.js';\r\n\r\n\r\nimport * as fflate from './fflate.module.js';\r\nimport { NURBSCurve } from './NURBSCurve.js';\r\n\r\n/**\r\n * Loader loads FBX file and generates Group representing FBX scene.\r\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\r\n * Versions lower than this may load but will probably have errors\r\n *\r\n * Needs Support:\r\n *  Morph normals / blend shape normals\r\n *\r\n * FBX format references:\r\n * \thttps://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\r\n *\r\n * Binary format specification:\r\n *\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\r\n */\r\n \r\n /**\r\n  * Modifications for UserData support for pxlNav by Kevin Edzenga / ProcStack; 2024\r\n\t*/\r\n\r\n\r\nlet fbxTree;\r\nlet connections;\r\nlet sceneGraph;\r\n\r\nclass FBXLoader extends Loader {\r\n\r\n\tconstructor( manager ) {\r\n\r\n\t\tsuper( manager );\r\n\r\n\t}\r\n\r\n\tload( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst path = ( scope.path === '' ) ? LoaderUtils.extractUrlBase( url ) : scope.path;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.setWithCredentials( scope.withCredentials );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( buffer, path ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n\tparse( FBXBuffer, path ) {\r\n\r\n\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\r\n\r\n\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst FBXText = convertArrayBufferToString( FBXBuffer );\r\n\r\n\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\r\n\r\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\r\n\r\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfbxTree = new TextParser().parse( FBXText );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log( fbxTree );\r\n\r\n\t\tconst textureLoader = new TextureLoader( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\r\n\r\n\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\r\nclass FBXTreeParser {\r\n\r\n\tconstructor( textureLoader, manager ) {\r\n\r\n\t\tthis.textureLoader = textureLoader;\r\n\t\tthis.manager = manager;\r\n\r\n\t}\r\n\r\n\tparse() {\r\n\r\n\t\tconnections = this.parseConnections();\r\n\r\n\t\tconst images = this.parseImages();\r\n\t\tconst textures = this.parseTextures( images );\r\n\t\tconst materials = this.parseMaterials( textures );\r\n\t\tconst deformers = this.parseDeformers();\r\n\t\tconst geometryMap = new GeometryParser().parse( deformers );\r\n\r\n\t\tthis.parseScene( deformers, geometryMap, materials );\r\n\r\n\t\treturn sceneGraph;\r\n\r\n\t}\r\n\r\n\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\r\n\t// and details the connection type\r\n\tparseConnections() {\r\n\r\n\t\tconst connectionMap = new Map();\r\n\r\n\t\tif ( 'Connections' in fbxTree ) {\r\n\r\n\t\t\tconst rawConnections = fbxTree.Connections.connections;\r\n\r\n\t\t\trawConnections.forEach( function ( rawConnection ) {\r\n\r\n\t\t\t\tconst fromID = rawConnection[ 0 ];\r\n\t\t\t\tconst toID = rawConnection[ 1 ];\r\n\t\t\t\tconst relationship = rawConnection[ 2 ];\r\n\r\n\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\r\n\r\n\t\t\t\t\tconnectionMap.set( fromID, {\r\n\t\t\t\t\t\tparents: [],\r\n\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst parentRelationship = { ID: toID, relationship: relationship };\r\n\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\r\n\r\n\t\t\t\tif ( ! connectionMap.has( toID ) ) {\r\n\r\n\t\t\t\t\tconnectionMap.set( toID, {\r\n\t\t\t\t\t\tparents: [],\r\n\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst childRelationship = { ID: fromID, relationship: relationship };\r\n\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn connectionMap;\r\n\r\n\t}\r\n\r\n\t// Parse FBXTree.Objects.Video for embedded image data\r\n\t// These images are connected to textures in FBXTree.Objects.Textures\r\n\t// via FBXTree.Connections.\r\n\tparseImages() {\r\n\r\n\t\tconst images = {};\r\n\t\tconst blobs = {};\r\n\r\n\t\tif ( 'Video' in fbxTree.Objects ) {\r\n\r\n\t\t\tconst videoNodes = fbxTree.Objects.Video;\r\n\r\n\t\t\tfor ( const nodeID in videoNodes ) {\r\n\r\n\t\t\t\tconst videoNode = videoNodes[ nodeID ];\r\n\r\n\t\t\t\tconst id = parseInt( nodeID );\r\n\r\n\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\r\n\r\n\t\t\t\t// raw image data is in videoNode.Content\r\n\t\t\t\tif ( 'Content' in videoNode ) {\r\n\r\n\t\t\t\t\tconst arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\r\n\t\t\t\t\tconst base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\r\n\r\n\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\r\n\r\n\t\t\t\t\t\tconst image = this.parseImage( videoNodes[ nodeID ] );\r\n\r\n\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const id in images ) {\r\n\r\n\t\t\tconst filename = images[ id ];\r\n\r\n\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\r\n\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t}\r\n\r\n\t// Parse embedded image data in FBXTree.Video.Content\r\n\tparseImage( videoNode ) {\r\n\r\n\t\tconst content = videoNode.Content;\r\n\t\tconst fileName = videoNode.RelativeFilename || videoNode.Filename;\r\n\t\tconst extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\r\n\r\n\t\tlet type;\r\n\r\n\t\tswitch ( extension ) {\r\n\r\n\t\t\tcase 'bmp':\r\n\r\n\t\t\t\ttype = 'image/bmp';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'jpg':\r\n\t\t\tcase 'jpeg':\r\n\r\n\t\t\t\ttype = 'image/jpeg';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'png':\r\n\r\n\t\t\t\ttype = 'image/png';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'tif':\r\n\r\n\t\t\t\ttype = 'image/tiff';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'tga':\r\n\r\n\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype = 'image/tga';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof content === 'string' ) { // ASCII format\r\n\r\n\t\t\treturn 'data:' + type + ';base64,' + content;\r\n\r\n\t\t} else { // Binary Format\r\n\r\n\t\t\tconst array = new Uint8Array( content );\r\n\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Parse nodes in FBXTree.Objects.Texture\r\n\t// These contain details such as UV scaling, cropping, rotation etc and are connected\r\n\t// to images in FBXTree.Objects.Video\r\n\tparseTextures( images ) {\r\n\r\n\t\tconst textureMap = new Map();\r\n\r\n\t\tif ( 'Texture' in fbxTree.Objects ) {\r\n\r\n\t\t\tconst textureNodes = fbxTree.Objects.Texture;\r\n\t\t\tfor ( const nodeID in textureNodes ) {\r\n\r\n\t\t\t\tconst texture = this.parseTexture( textureNodes[ nodeID ], images );\r\n\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textureMap;\r\n\r\n\t}\r\n\r\n\t// Parse individual node in FBXTree.Objects.Texture\r\n\tparseTexture( textureNode, images ) {\r\n\r\n\t\tconst texture = this.loadTexture( textureNode, images );\r\n\r\n\t\ttexture.ID = textureNode.id;\r\n\r\n\t\ttexture.name = textureNode.attrName;\r\n\r\n\t\tconst wrapModeU = textureNode.WrapModeU;\r\n\t\tconst wrapModeV = textureNode.WrapModeV;\r\n\r\n\t\tconst valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\r\n\t\tconst valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\r\n\r\n\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\r\n\t\t// 0: repeat(default), 1: clamp\r\n\r\n\t\ttexture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\r\n\t\ttexture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\r\n\r\n\t\tif ( 'Scaling' in textureNode ) {\r\n\r\n\t\t\tconst values = textureNode.Scaling.value;\r\n\r\n\t\t\ttexture.repeat.x = values[ 0 ];\r\n\t\t\ttexture.repeat.y = values[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( 'Translation' in textureNode ) {\r\n\r\n\t\t\tconst values = textureNode.Translation.value;\r\n\r\n\t\t\ttexture.offset.x = values[ 0 ];\r\n\t\t\ttexture.offset.y = values[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\r\n\tloadTexture( textureNode, images ) {\r\n\r\n\t\tconst nonNativeExtensions = new Set( [ 'tga', 'tif', 'tiff', 'exr', 'dds', 'hdr', 'ktx2' ] );\r\n\r\n\t\tconst extension = textureNode.FileName.split( '.' ).pop().toLowerCase();\r\n\r\n\t\tconst loader = nonNativeExtensions.has( extension ) ? this.manager.getHandler( `.${extension}` ) : this.textureLoader;\r\n\r\n\t\tif ( ! loader ) {\r\n\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`FBXLoader: ${extension.toUpperCase()} loader not found, creating placeholder texture for`,\r\n\t\t\t\ttextureNode.RelativeFilename\r\n\t\t\t);\r\n\t\t\treturn new Texture();\r\n\r\n\t\t}\r\n\r\n\t\tconst loaderPath = loader.path;\r\n\r\n\t\tif ( ! loaderPath ) {\r\n\r\n\t\t\tloader.setPath( this.textureLoader.path );\r\n\r\n\t\t}\r\n\r\n\t\tconst children = connections.get( textureNode.id ).children;\r\n\r\n\t\tlet fileName;\r\n\r\n\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\r\n\r\n\t\t\tfileName = images[ children[ 0 ].ID ];\r\n\r\n\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\r\n\r\n\t\t\t\tloader.setPath( undefined );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst texture = loader.load( fileName );\r\n\r\n\t\t// revert to initial path\r\n\t\tloader.setPath( loaderPath );\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\t// Parse nodes in FBXTree.Objects.Material\r\n\tparseMaterials( textureMap ) {\r\n\r\n\t\tconst materialMap = new Map();\r\n\r\n\t\tif ( 'Material' in fbxTree.Objects ) {\r\n\r\n\t\t\tconst materialNodes = fbxTree.Objects.Material;\r\n\r\n\t\t\tfor ( const nodeID in materialNodes ) {\r\n\r\n\t\t\t\tconst material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\r\n\r\n\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materialMap;\r\n\r\n\t}\r\n\r\n\t// Parse single node in FBXTree.Objects.Material\r\n\t// Materials are connected to texture maps in FBXTree.Objects.Textures\r\n\t// FBX format currently only supports Lambert and Phong shading models\r\n\tparseMaterial( materialNode, textureMap ) {\r\n\r\n\t\tconst ID = materialNode.id;\r\n\t\tconst name = materialNode.attrName;\r\n\t\tlet type = materialNode.ShadingModel;\r\n\r\n\t\t// Case where FBX wraps shading model in property object.\r\n\t\tif ( typeof type === 'object' ) {\r\n\r\n\t\t\ttype = type.value;\r\n\r\n\t\t}\r\n\r\n\t\t// Ignore unused materials which don't have any connections.\r\n\t\tif ( ! connections.has( ID ) ) return null;\r\n\r\n\t\tconst parameters = this.parseParameters( materialNode, textureMap, ID );\r\n\r\n\t\tlet material;\r\n\r\n\t\tswitch ( type.toLowerCase() ) {\r\n\r\n\t\t\tcase 'phong':\r\n\t\t\t\tmaterial = new MeshPhongMaterial();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'lambert':\r\n\t\t\t\tmaterial = new MeshLambertMaterial();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\r\n\t\t\t\tmaterial = new MeshPhongMaterial();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.setValues( parameters );\r\n\t\tmaterial.name = name;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\t// Parse FBX material and return parameters suitable for a three.js material\r\n\t// Also parse the texture map and return any textures associated with the material\r\n\tparseParameters( materialNode, textureMap, ID ) {\r\n\r\n\t\tconst parameters = {};\r\n\r\n\t\tif ( materialNode.BumpFactor ) {\r\n\r\n\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.Diffuse ) {\r\n\r\n\t\t\t//parameters.color = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.Diffuse.value ), SRGBColorSpace );\r\n\t\t\tparameters.color = new Color().fromArray( materialNode.Diffuse.value );\r\n\r\n\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\r\n\r\n\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\r\n\t\t\t//parameters.color = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.DiffuseColor.value ), SRGBColorSpace );\r\n\t\t\tparameters.color = new Color().fromArray( materialNode.DiffuseColor.value );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.DisplacementFactor ) {\r\n\r\n\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.Emissive ) {\r\n\r\n\t\t\t//parameters.emissive = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.Emissive.value ), SRGBColorSpace );\r\n\t\t\tparameters.emissive = new Color().fromArray( materialNode.Emissive.value );\r\n\r\n\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\r\n\r\n\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\r\n\t\t\t//parameters.emissive = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.EmissiveColor.value ), SRGBColorSpace );\r\n\t\t\tparameters.emissive = new Color().fromArray( materialNode.EmissiveColor.value );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.EmissiveFactor ) {\r\n\r\n\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\r\n\r\n\t\t}\r\n\r\n\t\t// the transparency handling is implemented based on Blender/Unity's approach: https://github.com/sobotka/blender-addons/blob/7d80f2f97161fc8e353a657b179b9aa1f8e5280b/io_scene_fbx/import_fbx.py#L1444-L1459\r\n\r\n\t\tparameters.opacity = 1 - ( materialNode.TransparencyFactor ? parseFloat( materialNode.TransparencyFactor.value ) : 0 );\r\n\r\n\t\tif ( parameters.opacity === 1 || parameters.opacity === 0 ) {\r\n\r\n\t\t\tparameters.opacity = ( materialNode.Opacity ? parseFloat( materialNode.Opacity.value ) : null );\r\n\r\n\t\t\tif ( parameters.opacity === null ) {\r\n\r\n\t\t\t\tparameters.opacity = 1 - ( materialNode.TransparentColor ? parseFloat( materialNode.TransparentColor.value[ 0 ] ) : 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.opacity < 1.0 ) {\r\n\r\n\t\t\tparameters.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.ReflectionFactor ) {\r\n\r\n\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.Shininess ) {\r\n\r\n\t\t\tparameters.shininess = materialNode.Shininess.value;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialNode.Specular ) {\r\n\r\n\t\t\t//parameters.specular = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.Specular.value ), SRGBColorSpace );\r\n\t\t\tparameters.specular = new Color().fromArray( materialNode.Specular.value );\r\n\r\n\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\r\n\r\n\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\r\n\t\t\t//parameters.specular = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.SpecularColor.value ), SRGBColorSpace );\r\n\t\t\tparameters.specular = new Color().fromArray( materialNode.SpecularColor.value );\r\n\r\n\t\t}\r\n\r\n\t\tconst scope = this;\r\n\t\tconnections.get( ID ).children.forEach( function ( child ) {\r\n\r\n\t\t\tconst type = child.relationship;\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'Bump':\r\n\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Maya|TEX_ao_map':\r\n\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DiffuseColor':\r\n\t\t\t\tcase 'Maya|TEX_color_map':\r\n\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\t/*if ( parameters.map !== undefined ) {\r\n            console.log(parameters.map  );\r\n\t\t\t\t\t\tparameters.map.colorSpace = SRGBColorSpace;\r\n\r\n\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DisplacementColor':\r\n\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'EmissiveColor':\r\n\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\t/*if ( parameters.emissiveMap !== undefined ) {\r\n\r\n\t\t\t\t\t\t//parameters.emissiveMap.colorSpace = SRGBColorSpace;\r\n\r\n\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'NormalMap':\r\n\t\t\t\tcase 'Maya|TEX_normal_map':\r\n\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ReflectionColor':\r\n\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tif ( parameters.envMap !== undefined ) {\r\n\r\n\t\t\t\t\t\tparameters.envMap.mapping = EquirectangularReflectionMapping;\r\n\t\t\t\t\t\t//parameters.envMap.colorSpace = SRGBColorSpace;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpecularColor':\r\n\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tif ( parameters.specularMap !== undefined ) {\r\n\r\n\t\t\t\t\t\t//parameters.specularMap.colorSpace = SRGBColorSpace;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'TransparentColor':\r\n\t\t\t\tcase 'TransparencyFactor':\r\n\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\r\n\t\t\t\t\tparameters.transparent = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientColor':\r\n\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\r\n\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\r\n\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn parameters;\r\n\r\n\t}\r\n\r\n\t// get a texture from the textureMap for use by a material.\r\n\tgetTexture( textureMap, id ) {\r\n\r\n\t\t// if the texture is a layered texture, just use the first layer and issue a warning\r\n\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\r\n\t\t\tid = connections.get( id ).children[ 0 ].ID;\r\n\r\n\t\t}\r\n\r\n\t\treturn textureMap.get( id );\r\n\r\n\t}\r\n\r\n\t// Parse nodes in FBXTree.Objects.Deformer\r\n\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\r\n\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\r\n\tparseDeformers() {\r\n\r\n\t\tconst skeletons = {};\r\n\t\tconst morphTargets = {};\r\n\r\n\t\tif ( 'Deformer' in fbxTree.Objects ) {\r\n\r\n\t\t\tconst DeformerNodes = fbxTree.Objects.Deformer;\r\n\r\n\t\t\tfor ( const nodeID in DeformerNodes ) {\r\n\r\n\t\t\t\tconst deformerNode = DeformerNodes[ nodeID ];\r\n\r\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\r\n\r\n\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\r\n\r\n\t\t\t\t\tconst skeleton = this.parseSkeleton( relationships, DeformerNodes );\r\n\t\t\t\t\tskeleton.ID = nodeID;\r\n\r\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\r\n\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\r\n\r\n\t\t\t\t\tskeletons[ nodeID ] = skeleton;\r\n\r\n\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\r\n\r\n\t\t\t\t\tconst morphTarget = {\r\n\t\t\t\t\t\tid: nodeID,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\r\n\t\t\t\t\tmorphTarget.id = nodeID;\r\n\r\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\r\n\r\n\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\r\n\t\t\tskeletons: skeletons,\r\n\t\t\tmorphTargets: morphTargets,\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// Parse single nodes in FBXTree.Objects.Deformer\r\n\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\r\n\t// Each skin node represents a skeleton and each cluster node represents a bone\r\n\tparseSkeleton( relationships, deformerNodes ) {\r\n\r\n\t\tconst rawBones = [];\r\n\r\n\t\trelationships.children.forEach( function ( child ) {\r\n\r\n\t\t\tconst boneNode = deformerNodes[ child.ID ];\r\n\r\n\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\r\n\r\n\t\t\tconst rawBone = {\r\n\r\n\t\t\t\tID: child.ID,\r\n\t\t\t\tindices: [],\r\n\t\t\t\tweights: [],\r\n\t\t\t\ttransformLink: new Matrix4().fromArray( boneNode.TransformLink.a ),\r\n\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\r\n\t\t\t\t// linkMode: boneNode.Mode,\r\n\r\n\t\t\t};\r\n\r\n\t\t\tif ( 'Indexes' in boneNode ) {\r\n\r\n\t\t\t\trawBone.indices = boneNode.Indexes.a;\r\n\t\t\t\trawBone.weights = boneNode.Weights.a;\r\n\r\n\t\t\t}\r\n\r\n\t\t\trawBones.push( rawBone );\r\n\r\n\t\t} );\r\n\r\n\t\treturn {\r\n\r\n\t\t\trawBones: rawBones,\r\n\t\t\tbones: []\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\r\n\tparseMorphTargets( relationships, deformerNodes ) {\r\n\r\n\t\tconst rawMorphTargets = [];\r\n\r\n\t\tfor ( let i = 0; i < relationships.children.length; i ++ ) {\r\n\r\n\t\t\tconst child = relationships.children[ i ];\r\n\r\n\t\t\tconst morphTargetNode = deformerNodes[ child.ID ];\r\n\r\n\t\t\tconst rawMorphTarget = {\r\n\r\n\t\t\t\tname: morphTargetNode.attrName,\r\n\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\r\n\t\t\t\tid: morphTargetNode.id,\r\n\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\r\n\r\n\t\t\t};\r\n\r\n\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\r\n\r\n\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\r\n\r\n\t\t\t\treturn child.relationship === undefined;\r\n\r\n\t\t\t} )[ 0 ].ID;\r\n\r\n\t\t\trawMorphTargets.push( rawMorphTarget );\r\n\r\n\t\t}\r\n\r\n\t\treturn rawMorphTargets;\r\n\r\n\t}\r\n\r\n\t// create the main Group() to be returned by the loader\r\n\tparseScene( deformers, geometryMap, materialMap ) {\r\n\r\n\t\tsceneGraph = new Group();\r\n\r\n\t\tconst modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\r\n\r\n\t\tconst modelNodes = fbxTree.Objects.Model;\r\n\r\n\t\tconst scope = this;\r\n\t\tmodelMap.forEach( function ( model ) {\r\n\r\n\t\t\tconst modelNode = modelNodes[ model.ID ];\r\n\t\t\tscope.setLookAtProperties( model, modelNode );\r\n\r\n\t\t\tconst parentConnections = connections.get( model.ID ).parents;\r\n\r\n\t\t\tparentConnections.forEach( function ( connection ) {\r\n\r\n\t\t\t\tconst parent = modelMap.get( connection.ID );\r\n\t\t\t\tif ( parent !== undefined ) parent.add( model );\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( model.parent === null ) {\r\n\r\n\t\t\t\tsceneGraph.add( model );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t} );\r\n\r\n\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\r\n\r\n\t\tthis.addGlobalSceneSettings();\r\n\r\n\t\tsceneGraph.traverse( function ( node ) {\r\n\r\n\t\t\tif ( node.userData.transformData ) {\r\n\r\n\t\t\t\tif ( node.parent ) {\r\n\r\n\t\t\t\t\tnode.userData.transformData.parentMatrix = node.parent.matrix;\r\n\t\t\t\t\tnode.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst transform = generateTransform( node.userData.transformData );\r\n\r\n\t\t\t\tnode.applyMatrix4( transform );\r\n\t\t\t\tnode.updateWorldMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tconst animations = new AnimationParser().parse();\r\n\r\n\t\t// if all the models where already combined in a single group, just return that\r\n\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\r\n\r\n\t\t\tsceneGraph.children[ 0 ].animations = animations;\r\n\t\t\tsceneGraph = sceneGraph.children[ 0 ];\r\n\r\n\t\t}\r\n\r\n\t\tsceneGraph.animations = animations;\r\n\r\n\t}\r\n\r\n\t// parse nodes in FBXTree.Objects.Model\r\n\tparseModels( skeletons, geometryMap, materialMap ) {\r\n\r\n\t\tconst modelMap = new Map();\r\n\t\tconst modelNodes = fbxTree.Objects.Model;\r\n\r\n      // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\t\t\t// -- Start edits for pxlNav; Kevin Edzenga 2024 - --\r\n      // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\t\t\t// Any attributes not in list are custom attributes, add those to userData\r\n\t\t\tvar standardAttributes=[\r\n        \"Culling\",\"DefaultAttributeIndex\",\"InheritType\",\r\n\t\t\t\t\"Lcl_Translation\",\"Lcl_Rotation\",\"Lcl_Scaling\",\r\n\t\t\t\t\"RotationPivot\",\"ScalingPivot\",\r\n\t\t\t\t\"RotationActive\",\"ScalingMax\", \"RotationOffset\",\"fbx_node_path\",\r\n\t\t\t\t\"Shading\",\"Version\",\"attrName\",\"attrType\",\r\n\t\t\t\t\"currentUVSet\",\"id\",\"name\",\"propertyList\",\"singleProperty\",\r\n\t\t\t];\r\n      // -- -- -- -- -- -- -- -- -- --\r\n\t\t\t// -- End edits for pxlNav -- -- --\r\n      // -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\t\tfor ( const nodeID in modelNodes ) {\r\n\r\n\t\t\tconst id = parseInt( nodeID );\r\n\t\t\tconst node = modelNodes[ nodeID ];\r\n\t\t\tconst relationships = connections.get( id );\r\n\r\n\t\t\tlet model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\r\n\r\n\t\t\tif ( ! model ) {\r\n\r\n\t\t\t\tswitch ( node.attrType ) {\r\n\r\n\t\t\t\t\tcase 'Camera':\r\n\t\t\t\t\t\tmodel = this.createCamera( relationships );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Light':\r\n\t\t\t\t\t\tmodel = this.createLight( relationships );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Mesh':\r\n\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'NurbsCurve':\r\n\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'LimbNode':\r\n\t\t\t\t\tcase 'Root':\r\n\t\t\t\t\t\tmodel = new Bone();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Null':\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmodel = new Group();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodel.name = node.attrName ? PropertyBinding.sanitizeNodeName( node.attrName ) : '';\r\n\t\t\t\tmodel.userData.originalName = node.attrName;\r\n\r\n\t\t\t\tmodel.ID = id;\r\n\r\n\t\t\t}\r\n\r\n      // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\t\t\t// -- Start edits for pxlNav; Kevin Edzenga 2024 - --\r\n      // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\t\t\tlet nodeAttrs=Object.keys(node);\r\n\t\t\tnodeAttrs.forEach( (attr)=>{\r\n        if( !standardAttributes.includes(attr) ){\r\n          model.userData[ attr ] = node[ attr ].value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n      // -- -- -- -- -- -- -- -- -- --\r\n\t\t\t// -- End edits for pxlNav -- -- --\r\n      // -- -- -- -- -- -- -- -- -- -- -- --\r\n\t\t\t\t\r\n\t\t\tthis.getTransformData( model, node );\r\n\t\t\tmodelMap.set( id, model );\r\n\r\n\t\t}\r\n\r\n\t\treturn modelMap;\r\n\r\n\t}\r\n\r\n\tbuildSkeleton( relationships, skeletons, id, name ) {\r\n\r\n\t\tlet bone = null;\r\n\r\n\t\trelationships.parents.forEach( function ( parent ) {\r\n\r\n\t\t\tfor ( const ID in skeletons ) {\r\n\r\n\t\t\t\tconst skeleton = skeletons[ ID ];\r\n\r\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\r\n\r\n\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\r\n\r\n\t\t\t\t\t\tconst subBone = bone;\r\n\t\t\t\t\t\tbone = new Bone();\r\n\r\n\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\r\n\r\n\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\r\n\r\n\t\t\t\t\t\tbone.name = name ? PropertyBinding.sanitizeNodeName( name ) : '';\r\n\t\t\t\t\t\tbone.userData.originalName = name;\r\n\t\t\t\t\t\tbone.ID = id;\r\n\r\n\t\t\t\t\t\tskeleton.bones[ i ] = bone;\r\n\r\n\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\r\n\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\r\n\t\t\t\t\t\tif ( subBone !== null ) {\r\n\r\n\t\t\t\t\t\t\tbone.add( subBone );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn bone;\r\n\r\n\t}\r\n\r\n\t// create a PerspectiveCamera or OrthographicCamera\r\n\tcreateCamera( relationships ) {\r\n\r\n\t\tlet model;\r\n\t\tlet cameraAttribute;\r\n\r\n\t\trelationships.children.forEach( function ( child ) {\r\n\r\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\r\n\r\n\t\t\tif ( attr !== undefined ) {\r\n\r\n\t\t\t\tcameraAttribute = attr;\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tif ( cameraAttribute === undefined ) {\r\n\r\n\t\t\tmodel = new Object3D();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet type = 0;\r\n\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\r\n\r\n\t\t\t\ttype = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet nearClippingPlane = 1;\r\n\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\r\n\r\n\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet farClippingPlane = 1000;\r\n\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\r\n\r\n\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet width = window.innerWidth;\r\n\t\t\tlet height = window.innerHeight;\r\n\r\n\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\r\n\r\n\t\t\t\twidth = cameraAttribute.AspectWidth.value;\r\n\t\t\t\theight = cameraAttribute.AspectHeight.value;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst aspect = width / height;\r\n\r\n\t\t\tlet fov = 45;\r\n\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\r\n\r\n\t\t\t\tfov = cameraAttribute.FieldOfView.value;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 0: // Perspective\r\n\t\t\t\t\tmodel = new PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\r\n\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1: // Orthographic\r\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Orthographic cameras not supported yet.' );\r\n\t\t\t\t\tmodel = new Object3D();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\r\n\t\t\t\t\tmodel = new Object3D();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn model;\r\n\r\n\t}\r\n\r\n\t// Create a DirectionalLight, PointLight or SpotLight\r\n\tcreateLight( relationships ) {\r\n\r\n\t\tlet model;\r\n\t\tlet lightAttribute;\r\n\r\n\t\trelationships.children.forEach( function ( child ) {\r\n\r\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\r\n\r\n\t\t\tif ( attr !== undefined ) {\r\n\r\n\t\t\t\tlightAttribute = attr;\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tif ( lightAttribute === undefined ) {\r\n\r\n\t\t\tmodel = new Object3D();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet type;\r\n\r\n\t\t\t// LightType can be undefined for Point lights\r\n\t\t\tif ( lightAttribute.LightType === undefined ) {\r\n\r\n\t\t\t\ttype = 0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttype = lightAttribute.LightType.value;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet color = 0xffffff;\r\n\r\n\t\t\tif ( lightAttribute.Color !== undefined ) {\r\n        //console.log( ColorManagement);\r\n\t\t\t\t//color = ColorManagement.toWorkingColorSpace( new Color().fromArray( lightAttribute.Color.value ), SRGBColorSpace );\r\n\t\t\t\tcolor = new Color().fromArray( lightAttribute.Color.value );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\r\n\r\n\t\t\t// light disabled\r\n\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\r\n\r\n\t\t\t\tintensity = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet distance = 0;\r\n\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\r\n\r\n\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\r\n\r\n\t\t\t\t\tdistance = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\r\n\t\t\tconst decay = 1;\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 0: // Point\r\n\t\t\t\t\tmodel = new PointLight( color, intensity, distance, decay );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1: // Directional\r\n\t\t\t\t\tmodel = new DirectionalLight( color, intensity );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2: // Spot\r\n\t\t\t\t\tlet angle = Math.PI / 3;\r\n\r\n\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\r\n\r\n\t\t\t\t\t\tangle = MathUtils.degToRad( lightAttribute.InnerAngle.value );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet penumbra = 0;\r\n\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\r\n\r\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\r\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\r\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\r\n\t\t\t\t\t\tpenumbra = MathUtils.degToRad( lightAttribute.OuterAngle.value );\r\n\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmodel = new SpotLight( color, intensity, distance, angle, penumbra, decay );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\r\n\t\t\t\t\tmodel = new PointLight( color, intensity );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\r\n\r\n\t\t\t\tmodel.castShadow = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn model;\r\n\r\n\t}\r\n\r\n\tcreateMesh( relationships, geometryMap, materialMap ) {\r\n\r\n\t\tlet model;\r\n\t\tlet geometry = null;\r\n\t\tlet material = null;\r\n\t\tconst materials = [];\r\n\r\n\t\t// get geometry and materials(s) from connections\r\n\t\trelationships.children.forEach( function ( child ) {\r\n\r\n\t\t\tif ( geometryMap.has( child.ID ) ) {\r\n\r\n\t\t\t\tgeometry = geometryMap.get( child.ID );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialMap.has( child.ID ) ) {\r\n\r\n\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tif ( materials.length > 1 ) {\r\n\r\n\t\t\tmaterial = materials;\r\n\r\n\t\t} else if ( materials.length > 0 ) {\r\n\r\n\t\t\tmaterial = materials[ 0 ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterial = new MeshPhongMaterial( {\r\n\t\t\t\tname: Loader.DEFAULT_MATERIAL_NAME,\r\n\t\t\t\tcolor: 0xcccccc\r\n\t\t\t} );\r\n\t\t\tmaterials.push( material );\r\n\r\n\t\t}\r\n\r\n\t\tif ( 'color' in geometry.attributes ) {\r\n\r\n\t\t\tmaterials.forEach( function ( material ) {\r\n\r\n\t\t\t\tmaterial.vertexColors = true;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.FBX_Deformer ) {\r\n\r\n\t\t\tmodel = new SkinnedMesh( geometry, material );\r\n\t\t\tmodel.normalizeSkinWeights();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmodel = new Mesh( geometry, material );\r\n\r\n\t\t}\r\n\r\n\t\treturn model;\r\n\r\n\t}\r\n\r\n\tcreateCurve( relationships, geometryMap ) {\r\n\r\n\t\tconst geometry = relationships.children.reduce( function ( geo, child ) {\r\n\r\n\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\r\n\r\n\t\t\treturn geo;\r\n\r\n\t\t}, null );\r\n\r\n\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\r\n\t\tconst material = new LineBasicMaterial( {\r\n\t\t\tname: Loader.DEFAULT_MATERIAL_NAME,\r\n\t\t\tcolor: 0x3300ff,\r\n\t\t\tlinewidth: 1\r\n\t\t} );\r\n\t\treturn new Line( geometry, material );\r\n\r\n\t}\r\n\r\n\t// parse the model node for transform data\r\n\tgetTransformData( model, modelNode ) {\r\n\r\n\t\tconst transformData = {};\r\n\r\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\r\n\r\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\r\n\t\telse transformData.eulerOrder = getEulerOrder( 0 );\r\n\r\n\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\r\n\r\n\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\r\n\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\r\n\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\r\n\r\n\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\r\n\r\n\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\r\n\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\r\n\r\n\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\r\n\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\r\n\r\n\t\tmodel.userData.transformData = transformData;\r\n\r\n\t}\r\n\r\n\tsetLookAtProperties( model, modelNode ) {\r\n\r\n\t\tif ( 'LookAtProperty' in modelNode ) {\r\n\r\n\t\t\tconst children = connections.get( model.ID ).children;\r\n\r\n\t\t\tchildren.forEach( function ( child ) {\r\n\r\n\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\r\n\r\n\t\t\t\t\tconst lookAtTarget = fbxTree.Objects.Model[ child.ID ];\r\n\r\n\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\r\n\r\n\t\t\t\t\t\tconst pos = lookAtTarget.Lcl_Translation.value;\r\n\r\n\t\t\t\t\t\t// DirectionalLight, SpotLight\r\n\t\t\t\t\t\tif ( model.target !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\r\n\t\t\t\t\t\t\tsceneGraph.add( model.target );\r\n\r\n\t\t\t\t\t\t} else { // Cameras and other Object3Ds\r\n\r\n\t\t\t\t\t\t\tmodel.lookAt( new Vector3().fromArray( pos ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbindSkeleton( skeletons, geometryMap, modelMap ) {\r\n\r\n\t\tconst bindMatrices = this.parsePoseNodes();\r\n\r\n\t\tfor ( const ID in skeletons ) {\r\n\r\n\t\t\tconst skeleton = skeletons[ ID ];\r\n\r\n\t\t\tconst parents = connections.get( parseInt( skeleton.ID ) ).parents;\r\n\r\n\t\t\tparents.forEach( function ( parent ) {\r\n\r\n\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\r\n\r\n\t\t\t\t\tconst geoID = parent.ID;\r\n\t\t\t\t\tconst geoRelationships = connections.get( geoID );\r\n\r\n\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\r\n\r\n\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\r\n\r\n\t\t\t\t\t\t\tconst model = modelMap.get( geoConnParent.ID );\r\n\r\n\t\t\t\t\t\t\tmodel.bind( new Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tparsePoseNodes() {\r\n\r\n\t\tconst bindMatrices = {};\r\n\r\n\t\tif ( 'Pose' in fbxTree.Objects ) {\r\n\r\n\t\t\tconst BindPoseNode = fbxTree.Objects.Pose;\r\n\r\n\t\t\tfor ( const nodeID in BindPoseNode ) {\r\n\r\n\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' && BindPoseNode[ nodeID ].NbPoseNodes > 0 ) {\r\n\r\n\t\t\t\t\tconst poseNodes = BindPoseNode[ nodeID ].PoseNode;\r\n\r\n\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\r\n\r\n\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\r\n\r\n\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new Matrix4().fromArray( poseNode.Matrix.a );\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new Matrix4().fromArray( poseNodes.Matrix.a );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn bindMatrices;\r\n\r\n\t}\r\n\r\n\taddGlobalSceneSettings() {\r\n\r\n\t\tif ( 'GlobalSettings' in fbxTree ) {\r\n\r\n\t\t\tif ( 'AmbientColor' in fbxTree.GlobalSettings ) {\r\n\r\n\t\t\t\t// Parse ambient color - if it's not set to black (default), create an ambient light\r\n\r\n\t\t\t\tconst ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\r\n\t\t\t\tconst r = ambientColor[ 0 ];\r\n\t\t\t\tconst g = ambientColor[ 1 ];\r\n\t\t\t\tconst b = ambientColor[ 2 ];\r\n\r\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\r\n\r\n\t\t\t\t\t//const color = new Color().setRGB( r, g, b, SRGBColorSpace );\r\n\t\t\t\t\tconst color = new Color().setRGB( r, g, b );\r\n\t\t\t\t\tsceneGraph.add( new AmbientLight( color, 1 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 'UnitScaleFactor' in fbxTree.GlobalSettings ) {\r\n\r\n\t\t\t\tsceneGraph.userData.unitScaleFactor = fbxTree.GlobalSettings.UnitScaleFactor.value;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// parse Geometry data from FBXTree and return map of BufferGeometries\r\nclass GeometryParser {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.negativeMaterialIndices = false;\r\n\r\n\t}\r\n\r\n\t// Parse nodes in FBXTree.Objects.Geometry\r\n\tparse( deformers ) {\r\n\r\n\t\tconst geometryMap = new Map();\r\n\r\n\t\tif ( 'Geometry' in fbxTree.Objects ) {\r\n\r\n\t\t\tconst geoNodes = fbxTree.Objects.Geometry;\r\n\r\n\t\t\tfor ( const nodeID in geoNodes ) {\r\n\r\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\r\n\t\t\t\tconst geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\r\n\r\n\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// report warnings\r\n\r\n\t\tif ( this.negativeMaterialIndices === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected.' );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometryMap;\r\n\r\n\t}\r\n\r\n\t// Parse single node in FBXTree.Objects.Geometry\r\n\tparseGeometry( relationships, geoNode, deformers ) {\r\n\r\n\t\tswitch ( geoNode.attrType ) {\r\n\r\n\t\t\tcase 'Mesh':\r\n\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'NurbsCurve':\r\n\t\t\t\treturn this.parseNurbsGeometry( geoNode );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\r\n\tparseMeshGeometry( relationships, geoNode, deformers ) {\r\n\r\n\t\tconst skeletons = deformers.skeletons;\r\n\t\tconst morphTargets = [];\r\n\r\n\t\tconst modelNodes = relationships.parents.map( function ( parent ) {\r\n\r\n\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\r\n\r\n\t\t} );\r\n\r\n\t\t// don't create geometry if it is not associated with any models\r\n\t\tif ( modelNodes.length === 0 ) return;\r\n\r\n\t\tconst skeleton = relationships.children.reduce( function ( skeleton, child ) {\r\n\r\n\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\r\n\r\n\t\t\treturn skeleton;\r\n\r\n\t\t}, null );\r\n\r\n\t\trelationships.children.forEach( function ( child ) {\r\n\r\n\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\r\n\r\n\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\t// Assume one model and get the preRotation from that\r\n\t\t// if there is more than one model associated with the geometry this may cause problems\r\n\t\tconst modelNode = modelNodes[ 0 ];\r\n\r\n\t\tconst transformData = {};\r\n\r\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\r\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\r\n\r\n\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\r\n\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\r\n\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\r\n\r\n\t\tconst transform = generateTransform( transformData );\r\n\r\n\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\r\n\r\n\t}\r\n\r\n\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\r\n\tgenGeometry( geoNode, skeleton, morphTargets, preTransform ) {\r\n\r\n\t\tconst geo = new BufferGeometry();\r\n\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\r\n\r\n\t\tconst geoInfo = this.parseGeoNode( geoNode, skeleton );\r\n\t\tconst buffers = this.genBuffers( geoInfo );\r\n\r\n\t\tconst positionAttribute = new Float32BufferAttribute( buffers.vertex, 3 );\r\n\r\n\t\tpositionAttribute.applyMatrix4( preTransform );\r\n\r\n\t\tgeo.setAttribute( 'position', positionAttribute );\r\n\r\n\t\tif ( buffers.colors.length > 0 ) {\r\n\r\n\t\t\tgeo.setAttribute( 'color', new Float32BufferAttribute( buffers.colors, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( skeleton ) {\r\n\r\n\t\t\tgeo.setAttribute( 'skinIndex', new Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\r\n\r\n\t\t\tgeo.setAttribute( 'skinWeight', new Float32BufferAttribute( buffers.vertexWeights, 4 ) );\r\n\r\n\t\t\t// used later to bind the skeleton to the model\r\n\t\t\tgeo.FBX_Deformer = skeleton;\r\n\r\n\t\t}\r\n\r\n\t\tif ( buffers.normal.length > 0 ) {\r\n\r\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( preTransform );\r\n\r\n\t\t\tconst normalAttribute = new Float32BufferAttribute( buffers.normal, 3 );\r\n\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\r\n\r\n\t\t\tgeo.setAttribute( 'normal', normalAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\r\n\r\n\t\t\tconst name = i === 0 ? 'uv' : `uv${ i }`;\r\n\r\n\t\t\tgeo.setAttribute( name, new Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\r\n\r\n\t\t} );\r\n\r\n\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\r\n\r\n\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\r\n\t\t\tlet prevMaterialIndex = buffers.materialIndex[ 0 ];\r\n\t\t\tlet startIndex = 0;\r\n\r\n\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\r\n\r\n\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\r\n\r\n\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\r\n\r\n\t\t\t\t\tprevMaterialIndex = currentIndex;\r\n\t\t\t\t\tstartIndex = i;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t// the loop above doesn't add the last group, do that here.\r\n\t\t\tif ( geo.groups.length > 0 ) {\r\n\r\n\t\t\t\tconst lastGroup = geo.groups[ geo.groups.length - 1 ];\r\n\t\t\t\tconst lastIndex = lastGroup.start + lastGroup.count;\r\n\r\n\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\r\n\r\n\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// case where there are multiple materials but the whole geometry is only\r\n\t\t\t// using one of them\r\n\t\t\tif ( geo.groups.length === 0 ) {\r\n\r\n\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\r\n\r\n\t\treturn geo;\r\n\r\n\t}\r\n\r\n\tparseGeoNode( geoNode, skeleton ) {\r\n\r\n\t\tconst geoInfo = {};\r\n\r\n\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\r\n\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\r\n\r\n\t\tif ( geoNode.LayerElementColor ) {\r\n\r\n\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geoNode.LayerElementMaterial ) {\r\n\r\n\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geoNode.LayerElementNormal ) {\r\n\r\n\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geoNode.LayerElementUV ) {\r\n\r\n\t\t\tgeoInfo.uv = [];\r\n\r\n\t\t\tlet i = 0;\r\n\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\r\n\r\n\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\r\n\r\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeoInfo.weightTable = {};\r\n\r\n\t\tif ( skeleton !== null ) {\r\n\r\n\t\t\tgeoInfo.skeleton = skeleton;\r\n\r\n\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\r\n\r\n\t\t\t\t// loop over the bone's vertex indices and weights\r\n\t\t\t\trawBone.indices.forEach( function ( index, j ) {\r\n\r\n\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\r\n\r\n\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\r\n\r\n\t\t\t\t\t\tid: i,\r\n\t\t\t\t\t\tweight: rawBone.weights[ j ],\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn geoInfo;\r\n\r\n\t}\r\n\r\n\tgenBuffers( geoInfo ) {\r\n\r\n\t\tconst buffers = {\r\n\t\t\tvertex: [],\r\n\t\t\tnormal: [],\r\n\t\t\tcolors: [],\r\n\t\t\tuvs: [],\r\n\t\t\tmaterialIndex: [],\r\n\t\t\tvertexWeights: [],\r\n\t\t\tweightsIndices: [],\r\n\t\t};\r\n\r\n\t\tlet polygonIndex = 0;\r\n\t\tlet faceLength = 0;\r\n\t\tlet displayedWeightsWarning = false;\r\n\r\n\t\t// these will hold data for a single face\r\n\t\tlet facePositionIndexes = [];\r\n\t\tlet faceNormals = [];\r\n\t\tlet faceColors = [];\r\n\t\tlet faceUVs = [];\r\n\t\tlet faceWeights = [];\r\n\t\tlet faceWeightIndices = [];\r\n\r\n\t\tconst scope = this;\r\n\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\r\n\r\n\t\t\tlet materialIndex;\r\n\t\t\tlet endOfFace = false;\r\n\r\n\t\t\t// Face index and vertex index arrays are combined in a single array\r\n\t\t\t// A cube with quad faces looks like this:\r\n\t\t\t// PolygonVertexIndex: *24 {\r\n\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\r\n\t\t\t//  }\r\n\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\r\n\t\t\t// to find index of last vertex bit shift the index: ^ - 1\r\n\t\t\tif ( vertexIndex < 0 ) {\r\n\r\n\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\r\n\t\t\t\tendOfFace = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet weightIndices = [];\r\n\t\t\tlet weights = [];\r\n\r\n\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\r\n\r\n\t\t\tif ( geoInfo.color ) {\r\n\r\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\r\n\r\n\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.skeleton ) {\r\n\r\n\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\r\n\r\n\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\r\n\r\n\t\t\t\t\t\tweights.push( wt.weight );\r\n\t\t\t\t\t\tweightIndices.push( wt.id );\r\n\r\n\t\t\t\t\t} );\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( weights.length > 4 ) {\r\n\r\n\t\t\t\t\tif ( ! displayedWeightsWarning ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\r\n\t\t\t\t\t\tdisplayedWeightsWarning = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst wIndex = [ 0, 0, 0, 0 ];\r\n\t\t\t\t\tconst Weight = [ 0, 0, 0, 0 ];\r\n\r\n\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\r\n\r\n\t\t\t\t\t\tlet currentWeight = weight;\r\n\t\t\t\t\t\tlet currentIndex = weightIndices[ weightIndex ];\r\n\r\n\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\r\n\r\n\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\r\n\r\n\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\r\n\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\r\n\r\n\t\t\t\t\t\t\t\tconst tmp = wIndex[ comparedWeightIndex ];\r\n\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\r\n\t\t\t\t\t\t\t\tcurrentIndex = tmp;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tweightIndices = wIndex;\r\n\t\t\t\t\tweights = Weight;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if the weight array is shorter than 4 pad with 0s\r\n\t\t\t\twhile ( weights.length < 4 ) {\r\n\r\n\t\t\t\t\tweights.push( 0 );\r\n\t\t\t\t\tweightIndices.push( 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( let i = 0; i < 4; ++ i ) {\r\n\r\n\t\t\t\t\tfaceWeights.push( weights[ i ] );\r\n\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.normal ) {\r\n\r\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\r\n\r\n\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\r\n\r\n\t\t\t\tmaterialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\r\n\r\n\t\t\t\tif ( materialIndex < 0 ) {\r\n\r\n\t\t\t\t\tscope.negativeMaterialIndices = true;\r\n\t\t\t\t\tmaterialIndex = 0; // fallback\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.uv ) {\r\n\r\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\r\n\r\n\t\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\r\n\r\n\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\r\n\r\n\t\t\t\t\t\tfaceUVs[ i ] = [];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\r\n\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceLength ++;\r\n\r\n\t\t\tif ( endOfFace ) {\r\n\r\n\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\r\n\r\n\t\t\t\tpolygonIndex ++;\r\n\t\t\t\tfaceLength = 0;\r\n\r\n\t\t\t\t// reset arrays for the next face\r\n\t\t\t\tfacePositionIndexes = [];\r\n\t\t\t\tfaceNormals = [];\r\n\t\t\t\tfaceColors = [];\r\n\t\t\t\tfaceUVs = [];\r\n\t\t\t\tfaceWeights = [];\r\n\t\t\t\tfaceWeightIndices = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn buffers;\r\n\r\n\t}\r\n\r\n\t// See https://www.khronos.org/opengl/wiki/Calculating_a_Surface_Normal\r\n\tgetNormalNewell( vertices ) {\r\n\r\n\t\tconst normal = new Vector3( 0.0, 0.0, 0.0 );\r\n\r\n\t\tfor ( let i = 0; i < vertices.length; i ++ ) {\r\n\r\n\t\t\tconst current = vertices[ i ];\r\n\t\t\tconst next = vertices[ ( i + 1 ) % vertices.length ];\r\n\r\n\t\t\tnormal.x += ( current.y - next.y ) * ( current.z + next.z );\r\n\t\t\tnormal.y += ( current.z - next.z ) * ( current.x + next.x );\r\n\t\t\tnormal.z += ( current.x - next.x ) * ( current.y + next.y );\r\n\r\n\t\t}\r\n\r\n\t\tnormal.normalize();\r\n\r\n\t\treturn normal;\r\n\r\n\t}\r\n\r\n\tgetNormalTangentAndBitangent( vertices ) {\r\n\r\n\t\tconst normalVector = this.getNormalNewell( vertices );\r\n\t\t// Avoid up being equal or almost equal to normalVector\r\n\t\tconst up = Math.abs( normalVector.z ) > 0.5 ? new Vector3( 0.0, 1.0, 0.0 ) : new Vector3( 0.0, 0.0, 1.0 );\r\n\t\tconst tangent = up.cross( normalVector ).normalize();\r\n\t\tconst bitangent = normalVector.clone().cross( tangent ).normalize();\r\n\r\n\t\treturn {\r\n\t\t\tnormal: normalVector,\r\n\t\t\ttangent: tangent,\r\n\t\t\tbitangent: bitangent\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tflattenVertex( vertex, normalTangent, normalBitangent ) {\r\n\r\n\t\treturn new Vector2(\r\n\t\t\tvertex.dot( normalTangent ),\r\n\t\t\tvertex.dot( normalBitangent )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\r\n\tgenFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\r\n\r\n\t\tlet triangles;\r\n\r\n\t\tif ( faceLength > 3 ) {\r\n\r\n\t\t\t// Triangulate n-gon using earcut\r\n\r\n\t\t\tconst vertices = [];\r\n\t\t\t// in morphing scenario vertexPositions represent morphPositions\r\n\t\t\t// while baseVertexPositions represent the original geometry's positions\r\n\t\t\tconst positions = geoInfo.baseVertexPositions || geoInfo.vertexPositions;\r\n\t\t\tfor ( let i = 0; i < facePositionIndexes.length; i += 3 ) {\r\n\r\n\t\t\t\tvertices.push(\r\n\t\t\t\t\tnew Vector3(\r\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i ] ],\r\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i + 1 ] ],\r\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i + 2 ] ]\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst { tangent, bitangent } = this.getNormalTangentAndBitangent( vertices );\r\n\t\t\tconst triangulationInput = [];\r\n\r\n\t\t\tfor ( const vertex of vertices ) {\r\n\r\n\t\t\t\ttriangulationInput.push( this.flattenVertex( vertex, tangent, bitangent ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// When vertices is an array of [0,0,0] elements (which is the case for vertices not participating in morph)\r\n\t\t\t// the triangulationInput will be an array of [0,0] elements\r\n\t\t\t// resulting in an array of 0 triangles being returned from ShapeUtils.triangulateShape\r\n\t\t\t// leading to not pushing into buffers.vertex the redundant vertices (the vertices that are not morphed).\r\n\t\t\t// That's why, in order to support morphing scenario, \"positions\" is looking first for baseVertexPositions,\r\n\t\t\t// so that we don't end up with an array of 0 triangles for the faces not participating in morph.\r\n\t\t\ttriangles = ShapeUtils.triangulateShape( triangulationInput, [] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Regular triangle, skip earcut triangulation step\r\n\t\t\ttriangles = [[ 0, 1, 2 ]];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const [ i0, i1, i2 ] of triangles ) {\r\n\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 ] ] );\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 + 1 ] ] );\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 + 2 ] ] );\r\n\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 ] ] );\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 + 1 ] ] );\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 + 2 ] ] );\r\n\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 ] ] );\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 + 1 ] ] );\r\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 + 2 ] ] );\r\n\r\n\t\t\tif ( geoInfo.skeleton ) {\r\n\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 1 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 2 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 3 ] );\r\n\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 1 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 2 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 3 ] );\r\n\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 1 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 2 ] );\r\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 3 ] );\r\n\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 1 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 2 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 3 ] );\r\n\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 1 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 2 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 3 ] );\r\n\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 1 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 2 ] );\r\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 3 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.color ) {\r\n\r\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 ] );\r\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 + 1 ] );\r\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 + 2 ] );\r\n\r\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 ] );\r\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 + 1 ] );\r\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 + 2 ] );\r\n\r\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 ] );\r\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 + 1 ] );\r\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 + 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\r\n\r\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\r\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\r\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.normal ) {\r\n\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 ] );\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 + 1 ] );\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 + 2 ] );\r\n\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 ] );\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 + 1 ] );\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 + 2 ] );\r\n\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 ] );\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 + 1 ] );\r\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 + 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geoInfo.uv ) {\r\n\r\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\r\n\r\n\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\r\n\r\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i0 * 2 ] );\r\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i0 * 2 + 1 ] );\r\n\r\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i1 * 2 ] );\r\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i1 * 2 + 1 ] );\r\n\r\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i2 * 2 ] );\r\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i2 * 2 + 1 ] );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\taddMorphTargets( parentGeo, parentGeoNode, morphTargets, preTransform ) {\r\n\r\n\t\tif ( morphTargets.length === 0 ) return;\r\n\r\n\t\tparentGeo.morphTargetsRelative = true;\r\n\r\n\t\tparentGeo.morphAttributes.position = [];\r\n\t\t// parentGeo.morphAttributes.normal = []; // not implemented\r\n\r\n\t\tconst scope = this;\r\n\t\tmorphTargets.forEach( function ( morphTarget ) {\r\n\r\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\r\n\r\n\t\t\t\tconst morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\r\n\r\n\t\t\t\tif ( morphGeoNode !== undefined ) {\r\n\r\n\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t// a morph geometry node is similar to a standard  node, and the node is also contained\r\n\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\r\n\t// and a special attribute Index defining which vertices of the original geometry are affected\r\n\t// Normal and position attributes only have data for the vertices that are affected by the morph\r\n\tgenMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\r\n\r\n\t\tconst basePositions = parentGeoNode.Vertices !== undefined ? parentGeoNode.Vertices.a : [];\r\n\t\tconst baseIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : [];\r\n\r\n\t\tconst morphPositionsSparse = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : [];\r\n\t\tconst morphIndices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : [];\r\n\r\n\t\tconst length = parentGeo.attributes.position.count * 3;\r\n\t\tconst morphPositions = new Float32Array( length );\r\n\r\n\t\tfor ( let i = 0; i < morphIndices.length; i ++ ) {\r\n\r\n\t\t\tconst morphIndex = morphIndices[ i ] * 3;\r\n\r\n\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\r\n\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\r\n\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\r\n\r\n\t\t}\r\n\r\n\t\t// TODO: add morph normal support\r\n\t\tconst morphGeoInfo = {\r\n\t\t\tvertexIndices: baseIndices,\r\n\t\t\tvertexPositions: morphPositions,\r\n\t\t\tbaseVertexPositions: basePositions\r\n\t\t};\r\n\r\n\t\tconst morphBuffers = this.genBuffers( morphGeoInfo );\r\n\r\n\t\tconst positionAttribute = new Float32BufferAttribute( morphBuffers.vertex, 3 );\r\n\t\tpositionAttribute.name = name || morphGeoNode.attrName;\r\n\r\n\t\tpositionAttribute.applyMatrix4( preTransform );\r\n\r\n\t\tparentGeo.morphAttributes.position.push( positionAttribute );\r\n\r\n\t}\r\n\r\n\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\r\n\tparseNormals( NormalNode ) {\r\n\r\n\t\tconst mappingType = NormalNode.MappingInformationType;\r\n\t\tconst referenceType = NormalNode.ReferenceInformationType;\r\n\t\tconst buffer = NormalNode.Normals.a;\r\n\t\tlet indexBuffer = [];\r\n\t\tif ( referenceType === 'IndexToDirect' ) {\r\n\r\n\t\t\tif ( 'NormalIndex' in NormalNode ) {\r\n\r\n\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\r\n\r\n\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\r\n\r\n\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tdataSize: 3,\r\n\t\t\tbuffer: buffer,\r\n\t\t\tindices: indexBuffer,\r\n\t\t\tmappingType: mappingType,\r\n\t\t\treferenceType: referenceType\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\r\n\tparseUVs( UVNode ) {\r\n\r\n\t\tconst mappingType = UVNode.MappingInformationType;\r\n\t\tconst referenceType = UVNode.ReferenceInformationType;\r\n\t\tconst buffer = UVNode.UV.a;\r\n\t\tlet indexBuffer = [];\r\n\t\tif ( referenceType === 'IndexToDirect' ) {\r\n\r\n\t\t\tindexBuffer = UVNode.UVIndex.a;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tdataSize: 2,\r\n\t\t\tbuffer: buffer,\r\n\t\t\tindices: indexBuffer,\r\n\t\t\tmappingType: mappingType,\r\n\t\t\treferenceType: referenceType\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\r\n\tparseVertexColors( ColorNode ) {\r\n\r\n\t\tconst mappingType = ColorNode.MappingInformationType;\r\n\t\tconst referenceType = ColorNode.ReferenceInformationType;\r\n\t\tconst buffer = ColorNode.Colors.a;\r\n\t\tlet indexBuffer = [];\r\n\t\tif ( referenceType === 'IndexToDirect' ) {\r\n\r\n\t\t\tindexBuffer = ColorNode.ColorIndex.a;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, c = new Color(); i < buffer.length; i += 4 ) {\r\n\r\n\t\t\tc.fromArray( buffer, i );\r\n\t\t\tColorManagement.toWorkingColorSpace( c, SRGBColorSpace );\r\n\t\t\t//ColorManagement.toWorkingColorSpace( c, LinearSRGBColorSpace );\r\n\t\t\tc.toArray( buffer, i );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tdataSize: 4,\r\n\t\t\tbuffer: buffer,\r\n\t\t\tindices: indexBuffer,\r\n\t\t\tmappingType: mappingType,\r\n\t\t\treferenceType: referenceType\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\r\n\tparseMaterialIndices( MaterialNode ) {\r\n\r\n\t\tconst mappingType = MaterialNode.MappingInformationType;\r\n\t\tconst referenceType = MaterialNode.ReferenceInformationType;\r\n\r\n\t\tif ( mappingType === 'NoMappingInformation' ) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdataSize: 1,\r\n\t\t\t\tbuffer: [ 0 ],\r\n\t\t\t\tindices: [ 0 ],\r\n\t\t\t\tmappingType: 'AllSame',\r\n\t\t\t\treferenceType: referenceType\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst materialIndexBuffer = MaterialNode.Materials.a;\r\n\r\n\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\r\n\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\r\n\t\t// for conforming with the other functions we've written for other data.\r\n\t\tconst materialIndices = [];\r\n\r\n\t\tfor ( let i = 0; i < materialIndexBuffer.length; ++ i ) {\r\n\r\n\t\t\tmaterialIndices.push( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tdataSize: 1,\r\n\t\t\tbuffer: materialIndexBuffer,\r\n\t\t\tindices: materialIndices,\r\n\t\t\tmappingType: mappingType,\r\n\t\t\treferenceType: referenceType\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\r\n\tparseNurbsGeometry( geoNode ) {\r\n\r\n\t\tconst order = parseInt( geoNode.Order );\r\n\r\n\t\tif ( isNaN( order ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\r\n\t\t\treturn new BufferGeometry();\r\n\r\n\t\t}\r\n\r\n\t\tconst degree = order - 1;\r\n\r\n\t\tconst knots = geoNode.KnotVector.a;\r\n\t\tconst controlPoints = [];\r\n\t\tconst pointsValues = geoNode.Points.a;\r\n\r\n\t\tfor ( let i = 0, l = pointsValues.length; i < l; i += 4 ) {\r\n\r\n\t\t\tcontrolPoints.push( new Vector4().fromArray( pointsValues, i ) );\r\n\r\n\t\t}\r\n\r\n\t\tlet startKnot, endKnot;\r\n\r\n\t\tif ( geoNode.Form === 'Closed' ) {\r\n\r\n\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\r\n\r\n\t\t} else if ( geoNode.Form === 'Periodic' ) {\r\n\r\n\t\t\tstartKnot = degree;\r\n\t\t\tendKnot = knots.length - 1 - startKnot;\r\n\r\n\t\t\tfor ( let i = 0; i < degree; ++ i ) {\r\n\r\n\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst curve = new NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\r\n\t\tconst points = curve.getPoints( controlPoints.length * 12 );\r\n\r\n\t\treturn new BufferGeometry().setFromPoints( points );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// parse animation data from FBXTree\r\nclass AnimationParser {\r\n\r\n\t// take raw animation clips and turn them into three.js animation clips\r\n\tparse() {\r\n\r\n\t\tconst animationClips = [];\r\n\r\n\t\tconst rawClips = this.parseClips();\r\n\r\n\t\tif ( rawClips !== undefined ) {\r\n\r\n\t\t\tfor ( const key in rawClips ) {\r\n\r\n\t\t\t\tconst rawClip = rawClips[ key ];\r\n\r\n\t\t\t\tconst clip = this.addClip( rawClip );\r\n\r\n\t\t\t\tanimationClips.push( clip );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn animationClips;\r\n\r\n\t}\r\n\r\n\tparseClips() {\r\n\r\n\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\r\n\t\t// if this is undefined we can safely assume there are no animations\r\n\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\r\n\r\n\t\tconst curveNodesMap = this.parseAnimationCurveNodes();\r\n\r\n\t\tthis.parseAnimationCurves( curveNodesMap );\r\n\r\n\t\tconst layersMap = this.parseAnimationLayers( curveNodesMap );\r\n\t\tconst rawClips = this.parseAnimStacks( layersMap );\r\n\r\n\t\treturn rawClips;\r\n\r\n\t}\r\n\r\n\t// parse nodes in FBXTree.Objects.AnimationCurveNode\r\n\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\r\n\t// and is referenced by an AnimationLayer\r\n\tparseAnimationCurveNodes() {\r\n\r\n\t\tconst rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\r\n\r\n\t\tconst curveNodesMap = new Map();\r\n\r\n\t\tfor ( const nodeID in rawCurveNodes ) {\r\n\r\n\t\t\tconst rawCurveNode = rawCurveNodes[ nodeID ];\r\n\r\n\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\r\n\r\n\t\t\t\tconst curveNode = {\r\n\r\n\t\t\t\t\tid: rawCurveNode.id,\r\n\t\t\t\t\tattr: rawCurveNode.attrName,\r\n\t\t\t\t\tcurves: {},\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn curveNodesMap;\r\n\r\n\t}\r\n\r\n\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\r\n\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\r\n\t// axis ( e.g. times and values of x rotation)\r\n\tparseAnimationCurves( curveNodesMap ) {\r\n\r\n\t\tconst rawCurves = fbxTree.Objects.AnimationCurve;\r\n\r\n\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\r\n\t\t// e.g. position times: [0, 0.4, 0. 8]\r\n\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\r\n\t\t// clearly, this should be optimised to\r\n\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\r\n\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\r\n\r\n\t\tfor ( const nodeID in rawCurves ) {\r\n\r\n\t\t\tconst animationCurve = {\r\n\r\n\t\t\t\tid: rawCurves[ nodeID ].id,\r\n\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\r\n\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst relationships = connections.get( animationCurve.id );\r\n\r\n\t\t\tif ( relationships !== undefined ) {\r\n\r\n\t\t\t\tconst animationCurveID = relationships.parents[ 0 ].ID;\r\n\t\t\t\tconst animationCurveRelationship = relationships.parents[ 0 ].relationship;\r\n\r\n\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\r\n\r\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\r\n\r\n\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\r\n\r\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\r\n\r\n\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\r\n\r\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\r\n\r\n\t\t\t\t} else if ( animationCurveRelationship.match( /DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\r\n\r\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\r\n\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\r\n\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\r\n\tparseAnimationLayers( curveNodesMap ) {\r\n\r\n\t\tconst rawLayers = fbxTree.Objects.AnimationLayer;\r\n\r\n\t\tconst layersMap = new Map();\r\n\r\n\t\tfor ( const nodeID in rawLayers ) {\r\n\r\n\t\t\tconst layerCurveNodes = [];\r\n\r\n\t\t\tconst connection = connections.get( parseInt( nodeID ) );\r\n\r\n\t\t\tif ( connection !== undefined ) {\r\n\r\n\t\t\t\t// all the animationCurveNodes used in the layer\r\n\t\t\t\tconst children = connection.children;\r\n\r\n\t\t\t\tchildren.forEach( function ( child, i ) {\r\n\r\n\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\r\n\r\n\t\t\t\t\t\tconst curveNode = curveNodesMap.get( child.ID );\r\n\r\n\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\r\n\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tconst modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\r\n\r\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\r\n\r\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\r\n\r\n\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID.toString() ];\r\n\r\n\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconst node = {\r\n\r\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\r\n\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\r\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\r\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\r\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\r\n\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new Matrix4();\r\n\r\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\r\n\t\t\t\t\t\t\t\t\t// animation value as well\r\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\r\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\r\n\r\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\r\n\r\n\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tconst deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\r\n\r\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\r\n\r\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\r\n\r\n\t\t\t\t\t\t\t\tconst morpherID = connections.get( deformerID ).parents[ 0 ].ID;\r\n\t\t\t\t\t\t\t\tconst geoID = connections.get( morpherID ).parents[ 0 ].ID;\r\n\r\n\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\r\n\t\t\t\t\t\t\t\tconst modelID = connections.get( geoID ).parents[ 0 ].ID;\r\n\r\n\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID ];\r\n\r\n\t\t\t\t\t\t\t\tconst node = {\r\n\r\n\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\r\n\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\r\n\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn layersMap;\r\n\r\n\t}\r\n\r\n\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\r\n\t// hierarchy. Each Stack node will be used to create a AnimationClip\r\n\tparseAnimStacks( layersMap ) {\r\n\r\n\t\tconst rawStacks = fbxTree.Objects.AnimationStack;\r\n\r\n\t\t// connect the stacks (clips) up to the layers\r\n\t\tconst rawClips = {};\r\n\r\n\t\tfor ( const nodeID in rawStacks ) {\r\n\r\n\t\t\tconst children = connections.get( parseInt( nodeID ) ).children;\r\n\r\n\t\t\tif ( children.length > 1 ) {\r\n\r\n\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\r\n\t\t\t\t// where there are multiple layers per stack, we'll display a warning\r\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst layer = layersMap.get( children[ 0 ].ID );\r\n\r\n\t\t\trawClips[ nodeID ] = {\r\n\r\n\t\t\t\tname: rawStacks[ nodeID ].attrName,\r\n\t\t\t\tlayer: layer,\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn rawClips;\r\n\r\n\t}\r\n\r\n\taddClip( rawClip ) {\r\n\r\n\t\tlet tracks = [];\r\n\r\n\t\tconst scope = this;\r\n\t\trawClip.layer.forEach( function ( rawTracks ) {\r\n\r\n\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\r\n\r\n\t\t} );\r\n\r\n\t\treturn new AnimationClip( rawClip.name, - 1, tracks );\r\n\r\n\t}\r\n\r\n\tgenerateTracks( rawTracks ) {\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tlet initialPosition = new Vector3();\r\n\t\tlet initialScale = new Vector3();\r\n\r\n\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, new Quaternion(), initialScale );\r\n\r\n\t\tinitialPosition = initialPosition.toArray();\r\n\t\tinitialScale = initialScale.toArray();\r\n\r\n\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\r\n\r\n\t\t\tconst positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\r\n\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\r\n\r\n\t\t}\r\n\r\n\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\r\n\r\n\t\t\tconst rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\r\n\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\r\n\r\n\t\t}\r\n\r\n\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\r\n\r\n\t\t\tconst scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\r\n\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\r\n\r\n\t\t}\r\n\r\n\t\tif ( rawTracks.DeformPercent !== undefined ) {\r\n\r\n\t\t\tconst morphTrack = this.generateMorphTrack( rawTracks );\r\n\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\r\n\r\n\t\t}\r\n\r\n\t\treturn tracks;\r\n\r\n\t}\r\n\r\n\tgenerateVectorTrack( modelName, curves, initialValue, type ) {\r\n\r\n\t\tconst times = this.getTimesForAllAxes( curves );\r\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\r\n\r\n\t\treturn new VectorKeyframeTrack( modelName + '.' + type, times, values );\r\n\r\n\t}\r\n\r\n\tgenerateRotationTrack( modelName, curves, preRotation, postRotation, eulerOrder ) {\r\n\r\n\t\tlet times;\r\n\t\tlet values;\r\n\r\n\t\tif ( curves.x !== undefined && curves.y !== undefined && curves.z !== undefined ) {\r\n\r\n\t\t\tconst result = this.interpolateRotations( curves.x, curves.y, curves.z, eulerOrder );\r\n\r\n\t\t\ttimes = result[ 0 ];\r\n\t\t\tvalues = result[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t// For Maya models using \"Joint Orient\", Euler order only applies to rotation, not pre/post-rotations\r\n\t\tconst defaultEulerOrder = getEulerOrder( 0 );\r\n\r\n\t\tif ( preRotation !== undefined ) {\r\n\r\n\t\t\tpreRotation = preRotation.map( MathUtils.degToRad );\r\n\t\t\tpreRotation.push( defaultEulerOrder );\r\n\r\n\t\t\tpreRotation = new Euler().fromArray( preRotation );\r\n\t\t\tpreRotation = new Quaternion().setFromEuler( preRotation );\r\n\r\n\t\t}\r\n\r\n\t\tif ( postRotation !== undefined ) {\r\n\r\n\t\t\tpostRotation = postRotation.map( MathUtils.degToRad );\r\n\t\t\tpostRotation.push( defaultEulerOrder );\r\n\r\n\t\t\tpostRotation = new Euler().fromArray( postRotation );\r\n\t\t\tpostRotation = new Quaternion().setFromEuler( postRotation ).invert();\r\n\r\n\t\t}\r\n\r\n\t\tconst quaternion = new Quaternion();\r\n\t\tconst euler = new Euler();\r\n\r\n\t\tconst quaternionValues = [];\r\n\r\n\t\tif ( ! values || ! times ) return new QuaternionKeyframeTrack( modelName + '.quaternion', [ 0 ], [ 0 ] );\r\n\r\n\t\tfor ( let i = 0; i < values.length; i += 3 ) {\r\n\r\n\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\r\n\t\t\tquaternion.setFromEuler( euler );\r\n\r\n\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\r\n\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\r\n\r\n\t\t\t// Check unroll\r\n\t\t\tif ( i > 2 ) {\r\n\r\n\t\t\t\tconst prevQuat = new Quaternion().fromArray(\r\n\t\t\t\t\tquaternionValues,\r\n\t\t\t\t\t( ( i - 3 ) / 3 ) * 4\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( prevQuat.dot( quaternion ) < 0 ) {\r\n\r\n\t\t\t\t\tquaternion.set( - quaternion.x, - quaternion.y, - quaternion.z, - quaternion.w );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\r\n\r\n\t\t}\r\n\r\n\t\treturn new QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\r\n\r\n\t}\r\n\r\n\tgenerateMorphTrack( rawTracks ) {\r\n\r\n\t\tconst curves = rawTracks.DeformPercent.curves.morph;\r\n\t\tconst values = curves.values.map( function ( val ) {\r\n\r\n\t\t\treturn val / 100;\r\n\r\n\t\t} );\r\n\r\n\t\tconst morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\r\n\r\n\t\treturn new NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\r\n\r\n\t}\r\n\r\n\t// For all animated objects, times are defined separately for each axis\r\n\t// Here we'll combine the times into one sorted array without duplicates\r\n\tgetTimesForAllAxes( curves ) {\r\n\r\n\t\tlet times = [];\r\n\r\n\t\t// first join together the times for each axis, if defined\r\n\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\r\n\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\r\n\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\r\n\r\n\t\t// then sort them\r\n\t\ttimes = times.sort( function ( a, b ) {\r\n\r\n\t\t\treturn a - b;\r\n\r\n\t\t} );\r\n\r\n\t\t// and remove duplicates\r\n\t\tif ( times.length > 1 ) {\r\n\r\n\t\t\tlet targetIndex = 1;\r\n\t\t\tlet lastValue = times[ 0 ];\r\n\t\t\tfor ( let i = 1; i < times.length; i ++ ) {\r\n\r\n\t\t\t\tconst currentValue = times[ i ];\r\n\t\t\t\tif ( currentValue !== lastValue ) {\r\n\r\n\t\t\t\t\ttimes[ targetIndex ] = currentValue;\r\n\t\t\t\t\tlastValue = currentValue;\r\n\t\t\t\t\ttargetIndex ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttimes = times.slice( 0, targetIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn times;\r\n\r\n\t}\r\n\r\n\tgetKeyframeTrackValues( times, curves, initialValue ) {\r\n\r\n\t\tconst prevValue = initialValue;\r\n\r\n\t\tconst values = [];\r\n\r\n\t\tlet xIndex = - 1;\r\n\t\tlet yIndex = - 1;\r\n\t\tlet zIndex = - 1;\r\n\r\n\t\ttimes.forEach( function ( time ) {\r\n\r\n\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\r\n\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\r\n\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\r\n\r\n\t\t\t// if there is an x value defined for this frame, use that\r\n\t\t\tif ( xIndex !== - 1 ) {\r\n\r\n\t\t\t\tconst xValue = curves.x.values[ xIndex ];\r\n\t\t\t\tvalues.push( xValue );\r\n\t\t\t\tprevValue[ 0 ] = xValue;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// otherwise use the x value from the previous frame\r\n\t\t\t\tvalues.push( prevValue[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( yIndex !== - 1 ) {\r\n\r\n\t\t\t\tconst yValue = curves.y.values[ yIndex ];\r\n\t\t\t\tvalues.push( yValue );\r\n\t\t\t\tprevValue[ 1 ] = yValue;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalues.push( prevValue[ 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( zIndex !== - 1 ) {\r\n\r\n\t\t\t\tconst zValue = curves.z.values[ zIndex ];\r\n\t\t\t\tvalues.push( zValue );\r\n\t\t\t\tprevValue[ 2 ] = zValue;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalues.push( prevValue[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn values;\r\n\r\n\t}\r\n\r\n\t// Rotations are defined as Euler angles which can have values  of any size\r\n\t// These will be converted to quaternions which don't support values greater than\r\n\t// PI, so we'll interpolate large rotations\r\n\tinterpolateRotations( curvex, curvey, curvez, eulerOrder ) {\r\n\r\n\t\tconst times = [];\r\n\t\tconst values = [];\r\n\r\n\t\t// Add first frame\r\n\t\ttimes.push( curvex.times[ 0 ] );\r\n\t\tvalues.push( MathUtils.degToRad( curvex.values[ 0 ] ) );\r\n\t\tvalues.push( MathUtils.degToRad( curvey.values[ 0 ] ) );\r\n\t\tvalues.push( MathUtils.degToRad( curvez.values[ 0 ] ) );\r\n\r\n\t\tfor ( let i = 1; i < curvex.values.length; i ++ ) {\r\n\r\n\t\t\tconst initialValue = [\r\n\t\t\t\tcurvex.values[ i - 1 ],\r\n\t\t\t\tcurvey.values[ i - 1 ],\r\n\t\t\t\tcurvez.values[ i - 1 ],\r\n\t\t\t];\r\n\r\n\t\t\tif ( isNaN( initialValue[ 0 ] ) || isNaN( initialValue[ 1 ] ) || isNaN( initialValue[ 2 ] ) ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst initialValueRad = initialValue.map( MathUtils.degToRad );\r\n\r\n\t\t\tconst currentValue = [\r\n\t\t\t\tcurvex.values[ i ],\r\n\t\t\t\tcurvey.values[ i ],\r\n\t\t\t\tcurvez.values[ i ],\r\n\t\t\t];\r\n\r\n\t\t\tif ( isNaN( currentValue[ 0 ] ) || isNaN( currentValue[ 1 ] ) || isNaN( currentValue[ 2 ] ) ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst currentValueRad = currentValue.map( MathUtils.degToRad );\r\n\r\n\t\t\tconst valuesSpan = [\r\n\t\t\t\tcurrentValue[ 0 ] - initialValue[ 0 ],\r\n\t\t\t\tcurrentValue[ 1 ] - initialValue[ 1 ],\r\n\t\t\t\tcurrentValue[ 2 ] - initialValue[ 2 ],\r\n\t\t\t];\r\n\r\n\t\t\tconst absoluteSpan = [\r\n\t\t\t\tMath.abs( valuesSpan[ 0 ] ),\r\n\t\t\t\tMath.abs( valuesSpan[ 1 ] ),\r\n\t\t\t\tMath.abs( valuesSpan[ 2 ] ),\r\n\t\t\t];\r\n\r\n\t\t\tif ( absoluteSpan[ 0 ] >= 180 || absoluteSpan[ 1 ] >= 180 || absoluteSpan[ 2 ] >= 180 ) {\r\n\r\n\t\t\t\tconst maxAbsSpan = Math.max( ...absoluteSpan );\r\n\r\n\t\t\t\tconst numSubIntervals = maxAbsSpan / 180;\r\n\r\n\t\t\t\tconst E1 = new Euler( ...initialValueRad, eulerOrder );\r\n\t\t\t\tconst E2 = new Euler( ...currentValueRad, eulerOrder );\r\n\r\n\t\t\t\tconst Q1 = new Quaternion().setFromEuler( E1 );\r\n\t\t\t\tconst Q2 = new Quaternion().setFromEuler( E2 );\r\n\r\n\t\t\t\t// Check unroll\r\n\t\t\t\tif ( Q1.dot( Q2 ) ) {\r\n\r\n\t\t\t\t\tQ2.set( - Q2.x, - Q2.y, - Q2.z, - Q2.w );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Interpolate\r\n\t\t\t\tconst initialTime = curvex.times[ i - 1 ];\r\n\t\t\t\tconst timeSpan = curvex.times[ i ] - initialTime;\r\n\r\n\t\t\t\tconst Q = new Quaternion();\r\n\t\t\t\tconst E = new Euler();\r\n\t\t\t\tfor ( let t = 0; t < 1; t += 1 / numSubIntervals ) {\r\n\r\n\t\t\t\t\tQ.copy( Q1.clone().slerp( Q2.clone(), t ) );\r\n\r\n\t\t\t\t\ttimes.push( initialTime + t * timeSpan );\r\n\t\t\t\t\tE.setFromQuaternion( Q, eulerOrder );\r\n\r\n\t\t\t\t\tvalues.push( E.x );\r\n\t\t\t\t\tvalues.push( E.y );\r\n\t\t\t\t\tvalues.push( E.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttimes.push( curvex.times[ i ] );\r\n\t\t\t\tvalues.push( MathUtils.degToRad( curvex.values[ i ] ) );\r\n\t\t\t\tvalues.push( MathUtils.degToRad( curvey.values[ i ] ) );\r\n\t\t\t\tvalues.push( MathUtils.degToRad( curvez.values[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn [ times, values ];\r\n\r\n\t}\r\n\r\n}\r\n\r\n// parse an FBX file in ASCII format\r\nclass TextParser {\r\n\r\n\tgetPrevNode() {\r\n\r\n\t\treturn this.nodeStack[ this.currentIndent - 2 ];\r\n\r\n\t}\r\n\r\n\tgetCurrentNode() {\r\n\r\n\t\treturn this.nodeStack[ this.currentIndent - 1 ];\r\n\r\n\t}\r\n\r\n\tgetCurrentProp() {\r\n\r\n\t\treturn this.currentProp;\r\n\r\n\t}\r\n\r\n\tpushStack( node ) {\r\n\r\n\t\tthis.nodeStack.push( node );\r\n\t\tthis.currentIndent += 1;\r\n\r\n\t}\r\n\r\n\tpopStack() {\r\n\r\n\t\tthis.nodeStack.pop();\r\n\t\tthis.currentIndent -= 1;\r\n\r\n\t}\r\n\r\n\tsetCurrentProp( val, name ) {\r\n\r\n\t\tthis.currentProp = val;\r\n\t\tthis.currentPropName = name;\r\n\r\n\t}\r\n\r\n\tparse( text ) {\r\n\r\n\t\tthis.currentIndent = 0;\r\n\r\n\t\tthis.allNodes = new FBXTree();\r\n\t\tthis.nodeStack = [];\r\n\t\tthis.currentProp = [];\r\n\t\tthis.currentPropName = '';\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst split = text.split( /[\\r\\n]+/ );\r\n\r\n\t\tsplit.forEach( function ( line, i ) {\r\n\r\n\t\t\tconst matchComment = line.match( /^[\\s\\t]*;/ );\r\n\t\t\tconst matchEmpty = line.match( /^[\\s\\t]*$/ );\r\n\r\n\t\t\tif ( matchComment || matchEmpty ) return;\r\n\r\n\t\t\tconst matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\r\n\t\t\tconst matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\r\n\t\t\tconst matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\r\n\r\n\t\t\tif ( matchBeginning ) {\r\n\r\n\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\r\n\r\n\t\t\t} else if ( matchProperty ) {\r\n\r\n\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\r\n\r\n\t\t\t} else if ( matchEnd ) {\r\n\r\n\t\t\t\tscope.popStack();\r\n\r\n\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\r\n\r\n\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\r\n\t\t\t\t// if this is encountered the line needs to be joined to the previous line\r\n\t\t\t\tscope.parseNodePropertyContinued( line );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn this.allNodes;\r\n\r\n\t}\r\n\r\n\tparseNodeBegin( line, property ) {\r\n\r\n\t\tconst nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\r\n\r\n\t\tconst nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\r\n\r\n\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\r\n\r\n\t\t} );\r\n\r\n\t\tconst node = { name: nodeName };\r\n\t\tconst attrs = this.parseNodeAttr( nodeAttrs );\r\n\r\n\t\tconst currentNode = this.getCurrentNode();\r\n\r\n\t\t// a top node\r\n\t\tif ( this.currentIndent === 0 ) {\r\n\r\n\t\t\tthis.allNodes.add( nodeName, node );\r\n\r\n\t\t} else { // a subnode\r\n\r\n\t\t\t// if the subnode already exists, append it\r\n\t\t\tif ( nodeName in currentNode ) {\r\n\r\n\t\t\t\t// special case Pose needs PoseNodes as an array\r\n\t\t\t\tif ( nodeName === 'PoseNode' ) {\r\n\r\n\t\t\t\t\tcurrentNode.PoseNode.push( node );\r\n\r\n\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\r\n\r\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\r\n\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\r\n\r\n\t\t\t} else if ( typeof attrs.id === 'number' ) {\r\n\r\n\t\t\t\tcurrentNode[ nodeName ] = {};\r\n\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\r\n\r\n\t\t\t} else if ( nodeName !== 'Properties70' ) {\r\n\r\n\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\r\n\t\t\t\telse currentNode[ nodeName ] = node;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\r\n\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\r\n\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\r\n\r\n\t\tthis.pushStack( node );\r\n\r\n\t}\r\n\r\n\tparseNodeAttr( attrs ) {\r\n\r\n\t\tlet id = attrs[ 0 ];\r\n\r\n\t\tif ( attrs[ 0 ] !== '' ) {\r\n\r\n\t\t\tid = parseInt( attrs[ 0 ] );\r\n\r\n\t\t\tif ( isNaN( id ) ) {\r\n\r\n\t\t\t\tid = attrs[ 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet name = '', type = '';\r\n\r\n\t\tif ( attrs.length > 1 ) {\r\n\r\n\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\r\n\t\t\ttype = attrs[ 2 ];\r\n\r\n\t\t}\r\n\r\n\t\treturn { id: id, name: name, type: type };\r\n\r\n\t}\r\n\r\n\tparseNodeProperty( line, property, contentLine ) {\r\n\r\n\t\tlet propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\r\n\t\tlet propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\r\n\r\n\t\t// for special case: base64 image data follows \"Content: ,\" line\r\n\t\t//\tContent: ,\r\n\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\r\n\t\tif ( propName === 'Content' && propValue === ',' ) {\r\n\r\n\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\r\n\r\n\t\t}\r\n\r\n\t\tconst currentNode = this.getCurrentNode();\r\n\t\tconst parentName = currentNode.name;\r\n\r\n\t\tif ( parentName === 'Properties70' ) {\r\n\r\n\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Connections\r\n\t\tif ( propName === 'C' ) {\r\n\r\n\t\t\tconst connProps = propValue.split( ',' ).slice( 1 );\r\n\t\t\tconst from = parseInt( connProps[ 0 ] );\r\n\t\t\tconst to = parseInt( connProps[ 1 ] );\r\n\r\n\t\t\tlet rest = propValue.split( ',' ).slice( 3 );\r\n\r\n\t\t\trest = rest.map( function ( elem ) {\r\n\r\n\t\t\t\treturn elem.trim().replace( /^\"/, '' );\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tpropName = 'connections';\r\n\t\t\tpropValue = [ from, to ];\r\n\t\t\tappend( propValue, rest );\r\n\r\n\t\t\tif ( currentNode[ propName ] === undefined ) {\r\n\r\n\t\t\t\tcurrentNode[ propName ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Node\r\n\t\tif ( propName === 'Node' ) currentNode.id = propValue;\r\n\r\n\t\t// connections\r\n\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\r\n\r\n\t\t\tcurrentNode[ propName ].push( propValue );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\r\n\t\t\telse currentNode.a = propValue;\r\n\r\n\t\t}\r\n\r\n\t\tthis.setCurrentProp( currentNode, propName );\r\n\r\n\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\r\n\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\r\n\r\n\t\t\tcurrentNode.a = parseNumberArray( propValue );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tparseNodePropertyContinued( line ) {\r\n\r\n\t\tconst currentNode = this.getCurrentNode();\r\n\r\n\t\tcurrentNode.a += line;\r\n\r\n\t\t// if the line doesn't end in ',' we have reached the end of the property value\r\n\t\t// so convert the string to an array\r\n\t\tif ( line.slice( - 1 ) !== ',' ) {\r\n\r\n\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// parse \"Property70\"\r\n\tparseNodeSpecialProperty( line, propName, propValue ) {\r\n\r\n\t\t// split this\r\n\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\r\n\t\t// into array like below\r\n\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\r\n\t\tconst props = propValue.split( '\",' ).map( function ( prop ) {\r\n\r\n\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\r\n\r\n\t\t} );\r\n\r\n\t\tconst innerPropName = props[ 0 ];\r\n\t\tconst innerPropType1 = props[ 1 ];\r\n\t\tconst innerPropType2 = props[ 2 ];\r\n\t\tconst innerPropFlag = props[ 3 ];\r\n\t\tlet innerPropValue = props[ 4 ];\r\n\r\n\t\t// cast values where needed, otherwise leave as strings\r\n\t\tswitch ( innerPropType1 ) {\r\n\r\n\t\t\tcase 'int':\r\n\t\t\tcase 'enum':\r\n\t\t\tcase 'bool':\r\n\t\t\tcase 'ULongLong':\r\n\t\t\tcase 'double':\r\n\t\t\tcase 'Number':\r\n\t\t\tcase 'FieldOfView':\r\n\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Color':\r\n\t\t\tcase 'ColorRGB':\r\n\t\t\tcase 'Vector3D':\r\n\t\t\tcase 'Lcl_Translation':\r\n\t\t\tcase 'Lcl_Rotation':\r\n\t\t\tcase 'Lcl_Scaling':\r\n\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t// CAUTION: these props must append to parent's parent\r\n\t\tthis.getPrevNode()[ innerPropName ] = {\r\n\r\n\t\t\t'type': innerPropType1,\r\n\t\t\t'type2': innerPropType2,\r\n\t\t\t'flag': innerPropFlag,\r\n\t\t\t'value': innerPropValue\r\n\r\n\t\t};\r\n\r\n\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Parse an FBX file in Binary format\r\nclass BinaryParser {\r\n\r\n\tparse( buffer ) {\r\n\r\n\t\tconst reader = new BinaryReader( buffer );\r\n\t\treader.skip( 23 ); // skip magic 23 bytes\r\n\r\n\t\tconst version = reader.getUint32();\r\n\r\n\t\tif ( version < 6400 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\r\n\r\n\t\t}\r\n\r\n\t\tconst allNodes = new FBXTree();\r\n\r\n\t\twhile ( ! this.endOfContent( reader ) ) {\r\n\r\n\t\t\tconst node = this.parseNode( reader, version );\r\n\t\t\tif ( node !== null ) allNodes.add( node.name, node );\r\n\r\n\t\t}\r\n\r\n\t\treturn allNodes;\r\n\r\n\t}\r\n\r\n\t// Check if reader has reached the end of content.\r\n\tendOfContent( reader ) {\r\n\r\n\t\t// footer size: 160bytes + 16-byte alignment padding\r\n\t\t// - 16bytes: magic\r\n\t\t// - padding til 16-byte alignment (at least 1byte?)\r\n\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\r\n\t\t// - 4bytes: magic\r\n\t\t// - 4bytes: version\r\n\t\t// - 120bytes: zero\r\n\t\t// - 16bytes: magic\r\n\t\tif ( reader.size() % 16 === 0 ) {\r\n\r\n\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// recursively parse nodes until the end of the file is reached\r\n\tparseNode( reader, version ) {\r\n\r\n\t\tconst node = {};\r\n\r\n\t\t// The first three data sizes depends on version.\r\n\t\tconst endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\r\n\t\tconst numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\r\n\r\n\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\r\n\r\n\t\tconst nameLen = reader.getUint8();\r\n\t\tconst name = reader.getString( nameLen );\r\n\r\n\t\t// Regards this node as NULL-record if endOffset is zero\r\n\t\tif ( endOffset === 0 ) return null;\r\n\r\n\t\tconst propertyList = [];\r\n\r\n\t\tfor ( let i = 0; i < numProperties; i ++ ) {\r\n\r\n\t\t\tpropertyList.push( this.parseProperty( reader ) );\r\n\r\n\t\t}\r\n\r\n\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\r\n\t\tconst id = propertyList.length > 0 ? propertyList[ 0 ] : '';\r\n\t\tconst attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\r\n\t\tconst attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\r\n\r\n\t\t// check if this node represents just a single property\r\n\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\r\n\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\r\n\r\n\t\twhile ( endOffset > reader.getOffset() ) {\r\n\r\n\t\t\tconst subNode = this.parseNode( reader, version );\r\n\r\n\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\r\n\r\n\t\t}\r\n\r\n\t\tnode.propertyList = propertyList; // raw property list used by parent\r\n\r\n\t\tif ( typeof id === 'number' ) node.id = id;\r\n\t\tif ( attrName !== '' ) node.attrName = attrName;\r\n\t\tif ( attrType !== '' ) node.attrType = attrType;\r\n\t\tif ( name !== '' ) node.name = name;\r\n\r\n\t\treturn node;\r\n\r\n\t}\r\n\r\n\tparseSubNode( name, node, subNode ) {\r\n\r\n\t\t// special case: child node is single property\r\n\t\tif ( subNode.singleProperty === true ) {\r\n\r\n\t\t\tconst value = subNode.propertyList[ 0 ];\r\n\r\n\t\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\t\tnode[ subNode.name ] = subNode;\r\n\r\n\t\t\t\tsubNode.a = value;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnode[ subNode.name ] = value;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\r\n\r\n\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\r\n\t\t\t\tif ( i !== 0 ) array.push( property );\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( node.connections === undefined ) {\r\n\r\n\t\t\t\tnode.connections = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnode.connections.push( array );\r\n\r\n\t\t} else if ( subNode.name === 'Properties70' ) {\r\n\r\n\t\t\tconst keys = Object.keys( subNode );\r\n\r\n\t\t\tkeys.forEach( function ( key ) {\r\n\r\n\t\t\t\tnode[ key ] = subNode[ key ];\r\n\r\n\t\t\t} );\r\n\r\n\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\r\n\r\n\t\t\tlet innerPropName = subNode.propertyList[ 0 ];\r\n\t\t\tlet innerPropType1 = subNode.propertyList[ 1 ];\r\n\t\t\tconst innerPropType2 = subNode.propertyList[ 2 ];\r\n\t\t\tconst innerPropFlag = subNode.propertyList[ 3 ];\r\n\t\t\tlet innerPropValue;\r\n\r\n\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\r\n\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\r\n\r\n\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\r\n\r\n\t\t\t\tinnerPropValue = [\r\n\t\t\t\t\tsubNode.propertyList[ 4 ],\r\n\t\t\t\t\tsubNode.propertyList[ 5 ],\r\n\t\t\t\t\tsubNode.propertyList[ 6 ]\r\n\t\t\t\t];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// this will be copied to parent, see above\r\n\t\t\tnode[ innerPropName ] = {\r\n\r\n\t\t\t\t'type': innerPropType1,\r\n\t\t\t\t'type2': innerPropType2,\r\n\t\t\t\t'flag': innerPropFlag,\r\n\t\t\t\t'value': innerPropValue\r\n\r\n\t\t\t};\r\n\r\n\t\t} else if ( node[ subNode.name ] === undefined ) {\r\n\r\n\t\t\tif ( typeof subNode.id === 'number' ) {\r\n\r\n\t\t\t\tnode[ subNode.name ] = {};\r\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnode[ subNode.name ] = subNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( subNode.name === 'PoseNode' ) {\r\n\r\n\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\r\n\r\n\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnode[ subNode.name ].push( subNode );\r\n\r\n\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\r\n\r\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tparseProperty( reader ) {\r\n\r\n\t\tconst type = reader.getString( 1 );\r\n\t\tlet length;\r\n\r\n\t\tswitch ( type ) {\r\n\r\n\t\t\tcase 'C':\r\n\t\t\t\treturn reader.getBoolean();\r\n\r\n\t\t\tcase 'D':\r\n\t\t\t\treturn reader.getFloat64();\r\n\r\n\t\t\tcase 'F':\r\n\t\t\t\treturn reader.getFloat32();\r\n\r\n\t\t\tcase 'I':\r\n\t\t\t\treturn reader.getInt32();\r\n\r\n\t\t\tcase 'L':\r\n\t\t\t\treturn reader.getInt64();\r\n\r\n\t\t\tcase 'R':\r\n\t\t\t\tlength = reader.getUint32();\r\n\t\t\t\treturn reader.getArrayBuffer( length );\r\n\r\n\t\t\tcase 'S':\r\n\t\t\t\tlength = reader.getUint32();\r\n\t\t\t\treturn reader.getString( length );\r\n\r\n\t\t\tcase 'Y':\r\n\t\t\t\treturn reader.getInt16();\r\n\r\n\t\t\tcase 'b':\r\n\t\t\tcase 'c':\r\n\t\t\tcase 'd':\r\n\t\t\tcase 'f':\r\n\t\t\tcase 'i':\r\n\t\t\tcase 'l':\r\n\r\n\t\t\t\tconst arrayLength = reader.getUint32();\r\n\t\t\t\tconst encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\r\n\t\t\t\tconst compressedLength = reader.getUint32();\r\n\r\n\t\t\t\tif ( encoding === 0 ) {\r\n\r\n\t\t\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t\t\tcase 'b':\r\n\t\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\r\n\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\r\n\r\n\t\t\t\t\t\tcase 'f':\r\n\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\r\n\r\n\t\t\t\t\t\tcase 'i':\r\n\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\r\n\r\n\t\t\t\t\t\tcase 'l':\r\n\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst data = fflate.unzlibSync( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) );\r\n\t\t\t\tconst reader2 = new BinaryReader( data.buffer );\r\n\r\n\t\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t\tcase 'b':\r\n\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\r\n\r\n\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\r\n\r\n\t\t\t\t\tcase 'f':\r\n\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\r\n\r\n\t\t\t\t\tcase 'i':\r\n\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\r\n\r\n\t\t\t\t\tcase 'l':\r\n\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak; // cannot happen but is required by the DeepScan\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass BinaryReader {\r\n\r\n\tconstructor( buffer, littleEndian ) {\r\n\r\n\t\tthis.dv = new DataView( buffer );\r\n\t\tthis.offset = 0;\r\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\r\n\t\tthis._textDecoder = new TextDecoder();\r\n\r\n\t}\r\n\r\n\tgetOffset() {\r\n\r\n\t\treturn this.offset;\r\n\r\n\t}\r\n\r\n\tsize() {\r\n\r\n\t\treturn this.dv.buffer.byteLength;\r\n\r\n\t}\r\n\r\n\tskip( length ) {\r\n\r\n\t\tthis.offset += length;\r\n\r\n\t}\r\n\r\n\t// seems like true/false representation depends on exporter.\r\n\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\r\n\t// then sees LSB.\r\n\tgetBoolean() {\r\n\r\n\t\treturn ( this.getUint8() & 1 ) === 1;\r\n\r\n\t}\r\n\r\n\tgetBooleanArray( size ) {\r\n\r\n\t\tconst a = [];\r\n\r\n\t\tfor ( let i = 0; i < size; i ++ ) {\r\n\r\n\t\t\ta.push( this.getBoolean() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t}\r\n\r\n\tgetUint8() {\r\n\r\n\t\tconst value = this.dv.getUint8( this.offset );\r\n\t\tthis.offset += 1;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\tgetInt16() {\r\n\r\n\t\tconst value = this.dv.getInt16( this.offset, this.littleEndian );\r\n\t\tthis.offset += 2;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\tgetInt32() {\r\n\r\n\t\tconst value = this.dv.getInt32( this.offset, this.littleEndian );\r\n\t\tthis.offset += 4;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\tgetInt32Array( size ) {\r\n\r\n\t\tconst a = [];\r\n\r\n\t\tfor ( let i = 0; i < size; i ++ ) {\r\n\r\n\t\t\ta.push( this.getInt32() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t}\r\n\r\n\tgetUint32() {\r\n\r\n\t\tconst value = this.dv.getUint32( this.offset, this.littleEndian );\r\n\t\tthis.offset += 4;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\t// JavaScript doesn't support 64-bit integer so calculate this here\r\n\t// 1 << 32 will return 1 so using multiply operation instead here.\r\n\t// There's a possibility that this method returns wrong value if the value\r\n\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\r\n\t// TODO: safely handle 64-bit integer\r\n\tgetInt64() {\r\n\r\n\t\tlet low, high;\r\n\r\n\t\tif ( this.littleEndian ) {\r\n\r\n\t\t\tlow = this.getUint32();\r\n\t\t\thigh = this.getUint32();\r\n\r\n\t\t} else {\r\n\r\n\t\t\thigh = this.getUint32();\r\n\t\t\tlow = this.getUint32();\r\n\r\n\t\t}\r\n\r\n\t\t// calculate negative value\r\n\t\tif ( high & 0x80000000 ) {\r\n\r\n\t\t\thigh = ~ high & 0xFFFFFFFF;\r\n\t\t\tlow = ~ low & 0xFFFFFFFF;\r\n\r\n\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\r\n\r\n\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\r\n\r\n\t\t\treturn - ( high * 0x100000000 + low );\r\n\r\n\t\t}\r\n\r\n\t\treturn high * 0x100000000 + low;\r\n\r\n\t}\r\n\r\n\tgetInt64Array( size ) {\r\n\r\n\t\tconst a = [];\r\n\r\n\t\tfor ( let i = 0; i < size; i ++ ) {\r\n\r\n\t\t\ta.push( this.getInt64() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t}\r\n\r\n\t// Note: see getInt64() comment\r\n\tgetUint64() {\r\n\r\n\t\tlet low, high;\r\n\r\n\t\tif ( this.littleEndian ) {\r\n\r\n\t\t\tlow = this.getUint32();\r\n\t\t\thigh = this.getUint32();\r\n\r\n\t\t} else {\r\n\r\n\t\t\thigh = this.getUint32();\r\n\t\t\tlow = this.getUint32();\r\n\r\n\t\t}\r\n\r\n\t\treturn high * 0x100000000 + low;\r\n\r\n\t}\r\n\r\n\tgetFloat32() {\r\n\r\n\t\tconst value = this.dv.getFloat32( this.offset, this.littleEndian );\r\n\t\tthis.offset += 4;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\tgetFloat32Array( size ) {\r\n\r\n\t\tconst a = [];\r\n\r\n\t\tfor ( let i = 0; i < size; i ++ ) {\r\n\r\n\t\t\ta.push( this.getFloat32() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t}\r\n\r\n\tgetFloat64() {\r\n\r\n\t\tconst value = this.dv.getFloat64( this.offset, this.littleEndian );\r\n\t\tthis.offset += 8;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\tgetFloat64Array( size ) {\r\n\r\n\t\tconst a = [];\r\n\r\n\t\tfor ( let i = 0; i < size; i ++ ) {\r\n\r\n\t\t\ta.push( this.getFloat64() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t}\r\n\r\n\tgetArrayBuffer( size ) {\r\n\r\n\t\tconst value = this.dv.buffer.slice( this.offset, this.offset + size );\r\n\t\tthis.offset += size;\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\tgetString( size ) {\r\n\r\n\t\tconst start = this.offset;\r\n\t\tlet a = new Uint8Array( this.dv.buffer, start, size );\r\n\r\n\t\tthis.skip( size );\r\n\r\n\t\tconst nullByte = a.indexOf( 0 );\r\n\t\tif ( nullByte >= 0 ) a = new Uint8Array( this.dv.buffer, start, nullByte );\r\n\r\n\t\treturn this._textDecoder.decode( a );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\r\n// and BinaryParser( FBX Binary format)\r\nclass FBXTree {\r\n\r\n\tadd( key, val ) {\r\n\r\n\t\tthis[ key ] = val;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// ************** UTILITY FUNCTIONS **************\r\n\r\nfunction isFbxFormatBinary( buffer ) {\r\n\r\n\tconst CORRECT = 'Kaydara\\u0020FBX\\u0020Binary\\u0020\\u0020\\0';\r\n\r\n\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\r\n\r\n}\r\n\r\nfunction isFbxFormatASCII( text ) {\r\n\r\n\tconst CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\r\n\r\n\tlet cursor = 0;\r\n\r\n\tfunction read( offset ) {\r\n\r\n\t\tconst result = text[ offset - 1 ];\r\n\t\ttext = text.slice( cursor + offset );\r\n\t\tcursor ++;\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < CORRECT.length; ++ i ) {\r\n\r\n\t\tconst num = read( 1 );\r\n\t\tif ( num === CORRECT[ i ] ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction getFbxVersion( text ) {\r\n\r\n\tconst versionRegExp = /FBXVersion: (\\d+)/;\r\n\tconst match = text.match( versionRegExp );\r\n\r\n\tif ( match ) {\r\n\r\n\t\tconst version = parseInt( match[ 1 ] );\r\n\t\treturn version;\r\n\r\n\t}\r\n\r\n\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\r\n\r\n}\r\n\r\n// Converts FBX ticks into real time seconds.\r\nfunction convertFBXTimeToSeconds( time ) {\r\n\r\n\treturn time / 46186158000;\r\n\r\n}\r\n\r\nconst dataArray = [];\r\n\r\n// extracts the data from the correct position in the FBX array based on indexing type\r\nfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\r\n\r\n\tlet index;\r\n\r\n\tswitch ( infoObject.mappingType ) {\r\n\r\n\t\tcase 'ByPolygonVertex' :\r\n\t\t\tindex = polygonVertexIndex;\r\n\t\t\tbreak;\r\n\t\tcase 'ByPolygon' :\r\n\t\t\tindex = polygonIndex;\r\n\t\t\tbreak;\r\n\t\tcase 'ByVertice' :\r\n\t\t\tindex = vertexIndex;\r\n\t\t\tbreak;\r\n\t\tcase 'AllSame' :\r\n\t\t\tindex = infoObject.indices[ 0 ];\r\n\t\t\tbreak;\r\n\t\tdefault :\r\n\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\r\n\r\n\t}\r\n\r\n\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\r\n\r\n\tconst from = index * infoObject.dataSize;\r\n\tconst to = from + infoObject.dataSize;\r\n\r\n\treturn slice( dataArray, infoObject.buffer, from, to );\r\n\r\n}\r\n\r\nconst tempEuler = new Euler();\r\nconst tempVec = new Vector3();\r\n\r\n// generate transformation from FBX transform data\r\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\r\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\r\nfunction generateTransform( transformData ) {\r\n\r\n\tconst lTranslationM = new Matrix4();\r\n\tconst lPreRotationM = new Matrix4();\r\n\tconst lRotationM = new Matrix4();\r\n\tconst lPostRotationM = new Matrix4();\r\n\r\n\tconst lScalingM = new Matrix4();\r\n\tconst lScalingPivotM = new Matrix4();\r\n\tconst lScalingOffsetM = new Matrix4();\r\n\tconst lRotationOffsetM = new Matrix4();\r\n\tconst lRotationPivotM = new Matrix4();\r\n\r\n\tconst lParentGX = new Matrix4();\r\n\tconst lParentLX = new Matrix4();\r\n\tconst lGlobalT = new Matrix4();\r\n\r\n\tconst inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\r\n\r\n\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\r\n\r\n\t// For Maya models using \"Joint Orient\", Euler order only applies to rotation, not pre/post-rotations\r\n\tconst defaultEulerOrder = getEulerOrder( 0 );\r\n\r\n\tif ( transformData.preRotation ) {\r\n\r\n\t\tconst array = transformData.preRotation.map( MathUtils.degToRad );\r\n\t\tarray.push( defaultEulerOrder );\r\n\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\r\n\r\n\t}\r\n\r\n\tif ( transformData.rotation ) {\r\n\r\n\t\tconst array = transformData.rotation.map( MathUtils.degToRad );\r\n\t\tarray.push( transformData.eulerOrder || defaultEulerOrder );\r\n\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\r\n\r\n\t}\r\n\r\n\tif ( transformData.postRotation ) {\r\n\r\n\t\tconst array = transformData.postRotation.map( MathUtils.degToRad );\r\n\t\tarray.push( defaultEulerOrder );\r\n\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\r\n\t\tlPostRotationM.invert();\r\n\r\n\t}\r\n\r\n\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\r\n\r\n\t// Pivots and offsets\r\n\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\r\n\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\r\n\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\r\n\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\r\n\r\n\t// parent transform\r\n\tif ( transformData.parentMatrixWorld ) {\r\n\r\n\t\tlParentLX.copy( transformData.parentMatrix );\r\n\t\tlParentGX.copy( transformData.parentMatrixWorld );\r\n\r\n\t}\r\n\r\n\tconst lLRM = lPreRotationM.clone().multiply( lRotationM ).multiply( lPostRotationM );\r\n\t// Global Rotation\r\n\tconst lParentGRM = new Matrix4();\r\n\tlParentGRM.extractRotation( lParentGX );\r\n\r\n\t// Global Shear*Scaling\r\n\tconst lParentTM = new Matrix4();\r\n\tlParentTM.copyPosition( lParentGX );\r\n\r\n\tconst lParentGRSM = lParentTM.clone().invert().multiply( lParentGX );\r\n\tconst lParentGSM = lParentGRM.clone().invert().multiply( lParentGRSM );\r\n\tconst lLSM = lScalingM;\r\n\r\n\tconst lGlobalRS = new Matrix4();\r\n\r\n\tif ( inheritType === 0 ) {\r\n\r\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lLSM );\r\n\r\n\t} else if ( inheritType === 1 ) {\r\n\r\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lLSM );\r\n\r\n\t} else {\r\n\r\n\t\tconst lParentLSM = new Matrix4().scale( new Vector3().setFromMatrixScale( lParentLX ) );\r\n\t\tconst lParentLSM_inv = lParentLSM.clone().invert();\r\n\t\tconst lParentGSM_noLocal = lParentGSM.clone().multiply( lParentLSM_inv );\r\n\r\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lLSM );\r\n\r\n\t}\r\n\r\n\tconst lRotationPivotM_inv = lRotationPivotM.clone().invert();\r\n\tconst lScalingPivotM_inv = lScalingPivotM.clone().invert();\r\n\t// Calculate the local transform matrix\r\n\tlet lTransform = lTranslationM.clone().multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\r\n\r\n\tconst lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition( lTransform );\r\n\r\n\tconst lGlobalTranslation = lParentGX.clone().multiply( lLocalTWithAllPivotAndOffsetInfo );\r\n\tlGlobalT.copyPosition( lGlobalTranslation );\r\n\r\n\tlTransform = lGlobalT.clone().multiply( lGlobalRS );\r\n\r\n\t// from global to local\r\n\tlTransform.premultiply( lParentGX.invert() );\r\n\r\n\treturn lTransform;\r\n\r\n}\r\n\r\n// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\r\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\r\nfunction getEulerOrder( order ) {\r\n\r\n\torder = order || 0;\r\n\r\n\tconst enums = [\r\n\t\t'ZYX', // -> XYZ extrinsic\r\n\t\t'YZX', // -> XZY extrinsic\r\n\t\t'XZY', // -> YZX extrinsic\r\n\t\t'ZXY', // -> YXZ extrinsic\r\n\t\t'YXZ', // -> ZXY extrinsic\r\n\t\t'XYZ', // -> ZYX extrinsic\r\n\t\t//'SphericXYZ', // not possible to support\r\n\t];\r\n\r\n\tif ( order === 6 ) {\r\n\r\n\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\r\n\t\treturn enums[ 0 ];\r\n\r\n\t}\r\n\r\n\treturn enums[ order ];\r\n\r\n}\r\n\r\n// Parses comma separated list of numbers and returns them an array.\r\n// Used internally by the TextParser\r\nfunction parseNumberArray( value ) {\r\n\r\n\tconst array = value.split( ',' ).map( function ( val ) {\r\n\r\n\t\treturn parseFloat( val );\r\n\r\n\t} );\r\n\r\n\treturn array;\r\n\r\n}\r\n\r\nfunction convertArrayBufferToString( buffer, from, to ) {\r\n\r\n\tif ( from === undefined ) from = 0;\r\n\tif ( to === undefined ) to = buffer.byteLength;\r\n\r\n\treturn new TextDecoder().decode( new Uint8Array( buffer, from, to ) );\r\n\r\n}\r\n\r\nfunction append( a, b ) {\r\n\r\n\tfor ( let i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\r\n\r\n\t\ta[ j ] = b[ i ];\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction slice( a, b, from, to ) {\r\n\r\n\tfor ( let i = from, j = 0; i < to; i ++, j ++ ) {\r\n\r\n\t\ta[ j ] = b[ i ];\r\n\r\n\t}\r\n\r\n\treturn a;\r\n\r\n}\r\n\r\n\r\nexport { FBXLoader };\r\n","// This file is part of meshoptimizer library and is distributed under the terms of MIT License.\r\n// Copyright (C) 2016-2022, by Arseny Kapoulkine (arseny.kapoulkine@gmail.com)\r\nvar MeshoptDecoder = (function() {\r\n\t\"use strict\";\r\n\r\n\t// Built with clang version 14.0.4\r\n\t// Built from meshoptimizer 0.18\r\n\tvar wasm_base = \"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb\";\r\n\tvar wasm_simd = \"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb\";\r\n\r\n\tvar detector = new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);\r\n\tvar wasmpack = new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);\r\n\r\n\tif (typeof WebAssembly !== 'object') {\r\n\t\treturn {\r\n\t\t\tsupported: false,\r\n\t\t};\r\n\t}\r\n\r\n\tvar wasm = WebAssembly.validate(detector) ? wasm_simd : wasm_base;\r\n\r\n\tvar instance;\r\n\r\n\tvar ready =\r\n\t\tWebAssembly.instantiate(unpack(wasm), {})\r\n\t\t.then(function(result) {\r\n\t\t\tinstance = result.instance;\r\n\t\t\tinstance.exports.__wasm_call_ctors();\r\n\t\t});\r\n\r\n\tfunction unpack(data) {\r\n\t\tvar result = new Uint8Array(data.length);\r\n\t\tfor (var i = 0; i < data.length; ++i) {\r\n\t\t\tvar ch = data.charCodeAt(i);\r\n\t\t\tresult[i] = ch > 96 ? ch - 97 : ch > 64 ? ch - 39 : ch + 4;\r\n\t\t}\r\n\t\tvar write = 0;\r\n\t\tfor (var i = 0; i < data.length; ++i) {\r\n\t\t\tresult[write++] = (result[i] < 60) ? wasmpack[result[i]] : (result[i] - 60) * 64 + result[++i];\r\n\t\t}\r\n\t\treturn result.buffer.slice(0, write);\r\n\t}\r\n\r\n\tfunction decode(fun, target, count, size, source, filter) {\r\n\t\tvar sbrk = instance.exports.sbrk;\r\n\t\tvar count4 = (count + 3) & ~3;\r\n\t\tvar tp = sbrk(count4 * size);\r\n\t\tvar sp = sbrk(source.length);\r\n\t\tvar heap = new Uint8Array(instance.exports.memory.buffer);\r\n\t\theap.set(source, sp);\r\n\t\tvar res = fun(tp, count, size, sp, source.length);\r\n\t\tif (res == 0 && filter) {\r\n\t\t\tfilter(tp, count4, size);\r\n\t\t}\r\n\t\ttarget.set(heap.subarray(tp, tp + count * size));\r\n\t\tsbrk(tp - sbrk(0));\r\n\t\tif (res != 0) {\r\n\t\t\tthrow new Error(\"Malformed buffer data: \" + res);\r\n\t\t}\r\n\t}\r\n\r\n\tvar filters = {\r\n\t\tNONE: \"\",\r\n\t\tOCTAHEDRAL: \"meshopt_decodeFilterOct\",\r\n\t\tQUATERNION: \"meshopt_decodeFilterQuat\",\r\n\t\tEXPONENTIAL: \"meshopt_decodeFilterExp\",\r\n\t};\r\n\r\n\tvar decoders = {\r\n\t\tATTRIBUTES: \"meshopt_decodeVertexBuffer\",\r\n\t\tTRIANGLES: \"meshopt_decodeIndexBuffer\",\r\n\t\tINDICES: \"meshopt_decodeIndexSequence\",\r\n\t};\r\n\r\n\tvar workers = [];\r\n\tvar requestId = 0;\r\n\r\n\tfunction createWorker(url) {\r\n\t\tvar worker = {\r\n\t\t\tobject: new Worker(url),\r\n\t\t\tpending: 0,\r\n\t\t\trequests: {}\r\n\t\t};\r\n\r\n\t\tworker.object.onmessage = function(event) {\r\n\t\t\tvar data = event.data;\r\n\r\n\t\t\tworker.pending -= data.count;\r\n\t\t\tworker.requests[data.id][data.action](data.value);\r\n\r\n\t\t\tdelete worker.requests[data.id];\r\n\t\t};\r\n\r\n\t\treturn worker;\r\n\t}\r\n\r\n\tfunction initWorkers(count) {\r\n\t\tvar source =\r\n\t\t\t\"var instance; var ready = WebAssembly.instantiate(new Uint8Array([\" + new Uint8Array(unpack(wasm)) + \"]), {})\" +\r\n\t\t\t\".then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });\" +\r\n\t\t\t\"self.onmessage = workerProcess;\" +\r\n\t\t\tdecode.toString() + workerProcess.toString();\r\n\r\n\t\tvar blob = new Blob([source], {type: 'text/javascript'});\r\n\t\tvar url = URL.createObjectURL(blob);\r\n\r\n\t\tfor (var i = 0; i < count; ++i) {\r\n\t\t\tworkers[i] = createWorker(url);\r\n\t\t}\r\n\r\n\t\tURL.revokeObjectURL(url);\r\n\t}\r\n\r\n\tfunction decodeWorker(count, size, source, mode, filter) {\r\n\t\tvar worker = workers[0];\r\n\r\n\t\tfor (var i = 1; i < workers.length; ++i) {\r\n\t\t\tif (workers[i].pending < worker.pending) {\r\n\t\t\t\tworker = workers[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn new Promise(function (resolve, reject) {\r\n\t\t\tvar data = new Uint8Array(source);\r\n\t\t\tvar id = requestId++;\r\n\r\n\t\t\tworker.pending += count;\r\n\t\t\tworker.requests[id] = { resolve: resolve, reject: reject };\r\n\t\t\tworker.object.postMessage({ id: id, count: count, size: size, source: data, mode: mode, filter: filter }, [ data.buffer ]);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction workerProcess(event) {\r\n\t\tready.then(function() {\r\n\t\t\tvar data = event.data;\r\n\t\t\ttry {\r\n\t\t\t\tvar target = new Uint8Array(data.count * data.size);\r\n\t\t\t\tdecode(instance.exports[data.mode], target, data.count, data.size, data.source, instance.exports[data.filter]);\r\n\t\t\t\tself.postMessage({ id: data.id, count: data.count, action: \"resolve\", value: target }, [ target.buffer ]); // eslint-disable-line no-restricted-globals\r\n\t\t\t} catch (error) {\r\n\t\t\t\tself.postMessage({ id: data.id, count: data.count, action: \"reject\", value: error }); // eslint-disable-line no-restricted-globals\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tready: ready,\r\n\t\tsupported: true,\r\n\t\tuseWorkers: function(count) {\r\n\t\t\tinitWorkers(count);\r\n\t\t},\r\n\t\tdecodeVertexBuffer: function(target, count, size, source, filter) {\r\n\t\t\tdecode(instance.exports.meshopt_decodeVertexBuffer, target, count, size, source, instance.exports[filters[filter]]);\r\n\t\t},\r\n\t\tdecodeIndexBuffer: function(target, count, size, source) {\r\n\t\t\tdecode(instance.exports.meshopt_decodeIndexBuffer, target, count, size, source);\r\n\t\t},\r\n\t\tdecodeIndexSequence: function(target, count, size, source) {\r\n\t\t\tdecode(instance.exports.meshopt_decodeIndexSequence, target, count, size, source);\r\n\t\t},\r\n\t\tdecodeGltfBuffer: function(target, count, size, source, mode, filter) {\r\n\t\t\tdecode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\r\n\t\t},\r\n\t\tdecodeGltfBufferAsync: function(count, size, source, mode, filter) {\r\n\t\t\tif (workers.length > 0) {\r\n\t\t\t\treturn decodeWorker(count, size, source, decoders[mode], filters[filter]);\r\n\t\t\t}\r\n\r\n\t\t\treturn ready.then(function() {\r\n\t\t\t\tvar target = new Uint8Array(count * size);\r\n\t\t\t\tdecode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\r\n\t\t\t\treturn target;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();\r\n\r\nexport { MeshoptDecoder };\r\n","import {\r\n\tBufferAttribute,\r\n\tBufferGeometry,\r\n\tFloat32BufferAttribute,\r\n\tInstancedBufferAttribute,\r\n\tInterleavedBuffer,\r\n\tInterleavedBufferAttribute,\r\n\tTriangleFanDrawMode,\r\n\tTriangleStripDrawMode,\r\n\tTrianglesDrawMode,\r\n\tVector3,\r\n} from './three.module.min.js';\r\n\r\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\r\n\r\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\r\n\r\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\r\n\r\n\t}\r\n\r\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\r\n\r\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\r\n\r\n\t}\r\n\r\n\tfunction getAttributeArray( attribute ) {\r\n\r\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\r\n\r\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\r\n\r\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\r\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\r\n\r\n\t\t\t\tif ( attribute.itemSize > 2 ) {\r\n\r\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn dstArray;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attribute.array instanceof Float32Array ) {\r\n\r\n\t\t\treturn attribute.array;\r\n\r\n\t\t}\r\n\r\n\t\treturn new Float32Array( attribute.array );\r\n\r\n\t}\r\n\r\n\t// MikkTSpace algorithm requires non-indexed input.\r\n\r\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\r\n\r\n\t// Compute vertex tangents.\r\n\r\n\tconst tangents = MikkTSpace.generateTangents(\r\n\r\n\t\tgetAttributeArray( _geometry.attributes.position ),\r\n\t\tgetAttributeArray( _geometry.attributes.normal ),\r\n\t\tgetAttributeArray( _geometry.attributes.uv )\r\n\r\n\t);\r\n\r\n\t// Texture coordinate convention of glTF differs from the apparent\r\n\t// default of the MikkTSpace library; .w component must be flipped.\r\n\r\n\tif ( negateSign ) {\r\n\r\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\r\n\r\n\t\t\ttangents[ i ] *= - 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\r\n\r\n\tif ( geometry !== _geometry ) {\r\n\r\n\t\tgeometry.copy( _geometry );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n}\r\n\r\n/**\r\n * @param  {Array<BufferGeometry>} geometries\r\n * @param  {Boolean} useGroups\r\n * @return {BufferGeometry}\r\n */\r\nfunction mergeGeometries( geometries, useGroups = false ) {\r\n\r\n\tconst isIndexed = geometries[ 0 ].index !== null;\r\n\r\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\r\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\r\n\r\n\tconst attributes = {};\r\n\tconst morphAttributes = {};\r\n\r\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\r\n\r\n\tconst mergedGeometry = new BufferGeometry();\r\n\r\n\tlet offset = 0;\r\n\r\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\tconst geometry = geometries[ i ];\r\n\t\tlet attributesCount = 0;\r\n\r\n\t\t// ensure that all geometries are indexed, or none\r\n\r\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// gather attributes, exit early if they're different\r\n\r\n\t\tfor ( const name in geometry.attributes ) {\r\n\r\n\t\t\tif ( ! attributesUsed.has( name ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\r\n\r\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\r\n\r\n\t\t\tattributesCount ++;\r\n\r\n\t\t}\r\n\r\n\t\t// ensure geometries have the same number of attributes\r\n\r\n\t\tif ( attributesCount !== attributesUsed.size ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// gather morph attributes, exit early if they're different\r\n\r\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const name in geometry.morphAttributes ) {\r\n\r\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\r\n\r\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( useGroups ) {\r\n\r\n\t\t\tlet count;\r\n\r\n\t\t\tif ( isIndexed ) {\r\n\r\n\t\t\t\tcount = geometry.index.count;\r\n\r\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\r\n\r\n\t\t\t\tcount = geometry.attributes.position.count;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmergedGeometry.addGroup( offset, count, i );\r\n\r\n\t\t\toffset += count;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// merge indices\r\n\r\n\tif ( isIndexed ) {\r\n\r\n\t\tlet indexOffset = 0;\r\n\t\tconst mergedIndex = [];\r\n\r\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\t\tconst index = geometries[ i ].index;\r\n\r\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\r\n\r\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\r\n\r\n\t\t}\r\n\r\n\t\tmergedGeometry.setIndex( mergedIndex );\r\n\r\n\t}\r\n\r\n\t// merge attributes\r\n\r\n\tfor ( const name in attributes ) {\r\n\r\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\r\n\r\n\t\tif ( ! mergedAttribute ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\r\n\r\n\t}\r\n\r\n\t// merge morph attributes\r\n\r\n\tfor ( const name in morphAttributes ) {\r\n\r\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\r\n\r\n\t\tif ( numMorphTargets === 0 ) break;\r\n\r\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\r\n\t\tmergedGeometry.morphAttributes[ name ] = [];\r\n\r\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\r\n\r\n\t\t\tconst morphAttributesToMerge = [];\r\n\r\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\r\n\r\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\r\n\r\n\t\t\tif ( ! mergedMorphAttribute ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn mergedGeometry;\r\n\r\n}\r\n\r\n/**\r\n * @param {Array<BufferAttribute>} attributes\r\n * @return {BufferAttribute}\r\n */\r\nfunction mergeAttributes( attributes ) {\r\n\r\n\tlet TypedArray;\r\n\tlet itemSize;\r\n\tlet normalized;\r\n\tlet gpuType = - 1;\r\n\tlet arrayLength = 0;\r\n\r\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\r\n\r\n\t\tconst attribute = attributes[ i ];\r\n\r\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\r\n\t\tif ( TypedArray !== attribute.array.constructor ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\r\n\t\tif ( itemSize !== attribute.itemSize ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\r\n\t\tif ( normalized !== attribute.normalized ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\r\n\t\tif ( gpuType !== attribute.gpuType ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tarrayLength += attribute.count * itemSize;\r\n\r\n\t}\r\n\r\n\tconst array = new TypedArray( arrayLength );\r\n\tconst result = new BufferAttribute( array, itemSize, normalized );\r\n\tlet offset = 0;\r\n\r\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\r\n\r\n\t\tconst attribute = attributes[ i ];\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tconst tupleOffset = offset / itemSize;\r\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\r\n\r\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\r\n\r\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\r\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray.set( attribute.array, offset );\r\n\r\n\t\t}\r\n\r\n\t\toffset += attribute.count * itemSize;\r\n\r\n\t}\r\n\r\n\tif ( gpuType !== undefined ) {\r\n\r\n\t\tresult.gpuType = gpuType;\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * @param {BufferAttribute}\r\n * @return {BufferAttribute}\r\n */\r\nexport function deepCloneAttribute( attribute ) {\r\n\r\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\treturn deinterleaveAttribute( attribute );\r\n\r\n\t}\r\n\r\n\tif ( attribute.isInstancedBufferAttribute ) {\r\n\r\n\t\treturn new InstancedBufferAttribute().copy( attribute );\r\n\r\n\t}\r\n\r\n\treturn new BufferAttribute().copy( attribute );\r\n\r\n}\r\n\r\n/**\r\n * @param {Array<BufferAttribute>} attributes\r\n * @return {Array<InterleavedBufferAttribute>}\r\n */\r\nfunction interleaveAttributes( attributes ) {\r\n\r\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\r\n\t// a set of InterleavedBufferAttributes for each attribute\r\n\tlet TypedArray;\r\n\tlet arrayLength = 0;\r\n\tlet stride = 0;\r\n\r\n\t// calculate the length and type of the interleavedBuffer\r\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\r\n\r\n\t\tconst attribute = attributes[ i ];\r\n\r\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\r\n\t\tif ( TypedArray !== attribute.array.constructor ) {\r\n\r\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tarrayLength += attribute.array.length;\r\n\t\tstride += attribute.itemSize;\r\n\r\n\t}\r\n\r\n\t// Create the set of buffer attributes\r\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\r\n\tlet offset = 0;\r\n\tconst res = [];\r\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\r\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\r\n\r\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\r\n\r\n\t\tconst attribute = attributes[ j ];\r\n\t\tconst itemSize = attribute.itemSize;\r\n\t\tconst count = attribute.count;\r\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\r\n\t\tres.push( iba );\r\n\r\n\t\toffset += itemSize;\r\n\r\n\t\t// Move the data for each attribute into the new interleavedBuffer\r\n\t\t// at the appropriate offset\r\n\t\tfor ( let c = 0; c < count; c ++ ) {\r\n\r\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\r\n\r\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn res;\r\n\r\n}\r\n\r\n// returns a new, non-interleaved version of the provided attribute\r\nexport function deinterleaveAttribute( attribute ) {\r\n\r\n\tconst cons = attribute.data.array.constructor;\r\n\tconst count = attribute.count;\r\n\tconst itemSize = attribute.itemSize;\r\n\tconst normalized = attribute.normalized;\r\n\r\n\tconst array = new cons( count * itemSize );\r\n\tlet newAttribute;\r\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\r\n\r\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\r\n\r\n\t} else {\r\n\r\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\r\n\r\n\t\tif ( itemSize >= 2 ) {\r\n\r\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemSize >= 3 ) {\r\n\r\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemSize >= 4 ) {\r\n\r\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn newAttribute;\r\n\r\n}\r\n\r\n// deinterleaves all attributes on the geometry\r\nexport function deinterleaveGeometry( geometry ) {\r\n\r\n\tconst attributes = geometry.attributes;\r\n\tconst morphTargets = geometry.morphTargets;\r\n\tconst attrMap = new Map();\r\n\r\n\tfor ( const key in attributes ) {\r\n\r\n\t\tconst attr = attributes[ key ];\r\n\t\tif ( attr.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tif ( ! attrMap.has( attr ) ) {\r\n\r\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tattributes[ key ] = attrMap.get( attr );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( const key in morphTargets ) {\r\n\r\n\t\tconst attr = morphTargets[ key ];\r\n\t\tif ( attr.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tif ( ! attrMap.has( attr ) ) {\r\n\r\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @param {BufferGeometry} geometry\r\n * @return {number}\r\n */\r\nfunction estimateBytesUsed( geometry ) {\r\n\r\n\t// Return the estimated memory used by this geometry in bytes\r\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\r\n\t// for InterleavedBufferAttributes.\r\n\tlet mem = 0;\r\n\tfor ( const name in geometry.attributes ) {\r\n\r\n\t\tconst attr = geometry.getAttribute( name );\r\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\r\n\r\n\t}\r\n\r\n\tconst indices = geometry.getIndex();\r\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\r\n\treturn mem;\r\n\r\n}\r\n\r\n/**\r\n * @param {BufferGeometry} geometry\r\n * @param {number} tolerance\r\n * @return {BufferGeometry}\r\n */\r\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\r\n\r\n\ttolerance = Math.max( tolerance, Number.EPSILON );\r\n\r\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\r\n\t// if it's already available.\r\n\tconst hashToIndex = {};\r\n\tconst indices = geometry.getIndex();\r\n\tconst positions = geometry.getAttribute( 'position' );\r\n\tconst vertexCount = indices ? indices.count : positions.count;\r\n\r\n\t// next value for triangle indices\r\n\tlet nextIndex = 0;\r\n\r\n\t// attributes and new attribute arrays\r\n\tconst attributeNames = Object.keys( geometry.attributes );\r\n\tconst tmpAttributes = {};\r\n\tconst tmpMorphAttributes = {};\r\n\tconst newIndices = [];\r\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\r\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\r\n\r\n\t// Initialize the arrays, allocating space conservatively. Extra\r\n\t// space will be trimmed in the last step.\r\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\r\n\r\n\t\tconst name = attributeNames[ i ];\r\n\t\tconst attr = geometry.attributes[ name ];\r\n\r\n\t\ttmpAttributes[ name ] = new attr.constructor(\r\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\r\n\t\t\tattr.itemSize,\r\n\t\t\tattr.normalized\r\n\t\t);\r\n\r\n\t\tconst morphAttributes = geometry.morphAttributes[ name ];\r\n\t\tif ( morphAttributes ) {\r\n\r\n\t\t\tif ( ! tmpMorphAttributes[ name ] ) tmpMorphAttributes[ name ] = [];\r\n\t\t\tmorphAttributes.forEach( ( morphAttr, i ) => {\r\n\r\n\t\t\t\tconst array = new morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize );\r\n\t\t\t\ttmpMorphAttributes[ name ][ i ] = new morphAttr.constructor( array, morphAttr.itemSize, morphAttr.normalized );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// convert the error tolerance to an amount of decimal places to truncate to\r\n\tconst halfTolerance = tolerance * 0.5;\r\n\tconst exponent = Math.log10( 1 / tolerance );\r\n\tconst hashMultiplier = Math.pow( 10, exponent );\r\n\tconst hashAdditive = halfTolerance * hashMultiplier;\r\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\r\n\r\n\t\tconst index = indices ? indices.getX( i ) : i;\r\n\r\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\r\n\t\tlet hash = '';\r\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\r\n\r\n\t\t\tconst name = attributeNames[ j ];\r\n\t\t\tconst attribute = geometry.getAttribute( name );\r\n\t\t\tconst itemSize = attribute.itemSize;\r\n\r\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\r\n\r\n\t\t\t\t// double tilde truncates the decimal value\r\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Add another reference to the vertex if it's already\r\n\t\t// used by another index\r\n\t\tif ( hash in hashToIndex ) {\r\n\r\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// copy data to the new index in the temporary attributes\r\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\r\n\r\n\t\t\t\tconst name = attributeNames[ j ];\r\n\t\t\t\tconst attribute = geometry.getAttribute( name );\r\n\t\t\t\tconst morphAttributes = geometry.morphAttributes[ name ];\r\n\t\t\t\tconst itemSize = attribute.itemSize;\r\n\t\t\t\tconst newArray = tmpAttributes[ name ];\r\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\r\n\r\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\r\n\r\n\t\t\t\t\tconst getterFunc = getters[ k ];\r\n\t\t\t\t\tconst setterFunc = setters[ k ];\r\n\t\t\t\t\tnewArray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\r\n\r\n\t\t\t\t\tif ( morphAttributes ) {\r\n\r\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttributes.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttributes[ m ][ getterFunc ]( index ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\thashToIndex[ hash ] = nextIndex;\r\n\t\t\tnewIndices.push( nextIndex );\r\n\t\t\tnextIndex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate result BufferGeometry\r\n\tconst result = geometry.clone();\r\n\tfor ( const name in geometry.attributes ) {\r\n\r\n\t\tconst tmpAttribute = tmpAttributes[ name ];\r\n\r\n\t\tresult.setAttribute( name, new tmpAttribute.constructor(\r\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\r\n\t\t\ttmpAttribute.itemSize,\r\n\t\t\ttmpAttribute.normalized,\r\n\t\t) );\r\n\r\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\r\n\r\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\r\n\r\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\r\n\r\n\t\t\tresult.morphAttributes[ name ][ j ] = new tmpMorphAttribute.constructor(\r\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\r\n\t\t\t\ttmpMorphAttribute.itemSize,\r\n\t\t\t\ttmpMorphAttribute.normalized,\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tresult.setIndex( newIndices );\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * @param {BufferGeometry} geometry\r\n * @param {number} drawMode\r\n * @return {BufferGeometry}\r\n */\r\nfunction toTrianglesDrawMode( geometry, drawMode ) {\r\n\r\n\tif ( drawMode === TrianglesDrawMode ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\r\n\r\n\t\tlet index = geometry.getIndex();\r\n\r\n\t\t// generate index if not present\r\n\r\n\t\tif ( index === null ) {\r\n\r\n\t\t\tconst indices = [];\r\n\r\n\t\t\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t\t\tif ( position !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\r\n\r\n\t\t\t\t\tindices.push( i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setIndex( indices );\r\n\t\t\t\tindex = geometry.getIndex();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\r\n\t\t\t\treturn geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst numberOfTriangles = index.count - 2;\r\n\t\tconst newIndices = [];\r\n\r\n\t\tif ( drawMode === TriangleFanDrawMode ) {\r\n\r\n\t\t\t// gl.TRIANGLE_FAN\r\n\r\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\r\n\r\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\r\n\t\t\t\tnewIndices.push( index.getX( i ) );\r\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// gl.TRIANGLE_STRIP\r\n\r\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\r\n\r\n\t\t\t\tif ( i % 2 === 0 ) {\r\n\r\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\r\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\r\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\r\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\r\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\r\n\r\n\t\t}\r\n\r\n\t\t// build final geometry\r\n\r\n\t\tconst newGeometry = geometry.clone();\r\n\t\tnewGeometry.setIndex( newIndices );\r\n\t\tnewGeometry.clearGroups();\r\n\r\n\t\treturn newGeometry;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\r\n * Helpful for Raytracing or Decals.\r\n * @param {Mesh | Line | Points} object An instance of Mesh, Line or Points.\r\n * @return {Object} An Object with original position/normal attributes and morphed ones.\r\n */\r\nfunction computeMorphedAttributes( object ) {\r\n\r\n\tconst _vA = new Vector3();\r\n\tconst _vB = new Vector3();\r\n\tconst _vC = new Vector3();\r\n\r\n\tconst _tempA = new Vector3();\r\n\tconst _tempB = new Vector3();\r\n\tconst _tempC = new Vector3();\r\n\r\n\tconst _morphA = new Vector3();\r\n\tconst _morphB = new Vector3();\r\n\tconst _morphC = new Vector3();\r\n\r\n\tfunction _calculateMorphedAttributeData(\r\n\t\tobject,\r\n\t\tattribute,\r\n\t\tmorphAttribute,\r\n\t\tmorphTargetsRelative,\r\n\t\ta,\r\n\t\tb,\r\n\t\tc,\r\n\t\tmodifiedAttributeArray\r\n\t) {\r\n\r\n\t\t_vA.fromBufferAttribute( attribute, a );\r\n\t\t_vB.fromBufferAttribute( attribute, b );\r\n\t\t_vC.fromBufferAttribute( attribute, c );\r\n\r\n\t\tconst morphInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphAttribute && morphInfluences ) {\r\n\r\n\t\t\t_morphA.set( 0, 0, 0 );\r\n\t\t\t_morphB.set( 0, 0, 0 );\r\n\t\t\t_morphC.set( 0, 0, 0 );\r\n\r\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst influence = morphInfluences[ i ];\r\n\t\t\t\tconst morph = morphAttribute[ i ];\r\n\r\n\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\r\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\r\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\r\n\r\n\t\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\r\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\r\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\r\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\r\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_vA.add( _morphA );\r\n\t\t\t_vB.add( _morphB );\r\n\t\t\t_vC.add( _morphC );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\t\tobject.applyBoneTransform( a, _vA );\r\n\t\t\tobject.applyBoneTransform( b, _vB );\r\n\t\t\tobject.applyBoneTransform( c, _vC );\r\n\r\n\t\t}\r\n\r\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\r\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\r\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\r\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\r\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\r\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\r\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\r\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\r\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\r\n\r\n\t}\r\n\r\n\tconst geometry = object.geometry;\r\n\tconst material = object.material;\r\n\r\n\tlet a, b, c;\r\n\tconst index = geometry.index;\r\n\tconst positionAttribute = geometry.attributes.position;\r\n\tconst morphPosition = geometry.morphAttributes.position;\r\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\r\n\tconst normalAttribute = geometry.attributes.normal;\r\n\tconst morphNormal = geometry.morphAttributes.position;\r\n\r\n\tconst groups = geometry.groups;\r\n\tconst drawRange = geometry.drawRange;\r\n\tlet i, j, il, jl;\r\n\tlet group;\r\n\tlet start, end;\r\n\r\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\r\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\t// indexed buffer geometry\r\n\r\n\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgroup = groups[ i ];\r\n\r\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\r\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\ta = index.getX( j );\r\n\t\t\t\t\tb = index.getX( j + 1 );\r\n\t\t\t\t\tc = index.getX( j + 2 );\r\n\r\n\t\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\t\tobject,\r\n\t\t\t\t\t\tpositionAttribute,\r\n\t\t\t\t\t\tmorphPosition,\r\n\t\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\t\ta, b, c,\r\n\t\t\t\t\t\tmodifiedPosition\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\t\tobject,\r\n\t\t\t\t\t\tnormalAttribute,\r\n\t\t\t\t\t\tmorphNormal,\r\n\t\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\t\ta, b, c,\r\n\t\t\t\t\t\tmodifiedNormal\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstart = Math.max( 0, drawRange.start );\r\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\ta = index.getX( i );\r\n\t\t\t\tb = index.getX( i + 1 );\r\n\t\t\t\tc = index.getX( i + 2 );\r\n\r\n\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\tobject,\r\n\t\t\t\t\tpositionAttribute,\r\n\t\t\t\t\tmorphPosition,\r\n\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\ta, b, c,\r\n\t\t\t\t\tmodifiedPosition\r\n\t\t\t\t);\r\n\r\n\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\tobject,\r\n\t\t\t\t\tnormalAttribute,\r\n\t\t\t\t\tmorphNormal,\r\n\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\ta, b, c,\r\n\t\t\t\t\tmodifiedNormal\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\t// non-indexed buffer geometry\r\n\r\n\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgroup = groups[ i ];\r\n\r\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\r\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\ta = j;\r\n\t\t\t\t\tb = j + 1;\r\n\t\t\t\t\tc = j + 2;\r\n\r\n\t\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\t\tobject,\r\n\t\t\t\t\t\tpositionAttribute,\r\n\t\t\t\t\t\tmorphPosition,\r\n\t\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\t\ta, b, c,\r\n\t\t\t\t\t\tmodifiedPosition\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\t\tobject,\r\n\t\t\t\t\t\tnormalAttribute,\r\n\t\t\t\t\t\tmorphNormal,\r\n\t\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\t\ta, b, c,\r\n\t\t\t\t\t\tmodifiedNormal\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstart = Math.max( 0, drawRange.start );\r\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\ta = i;\r\n\t\t\t\tb = i + 1;\r\n\t\t\t\tc = i + 2;\r\n\r\n\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\tobject,\r\n\t\t\t\t\tpositionAttribute,\r\n\t\t\t\t\tmorphPosition,\r\n\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\ta, b, c,\r\n\t\t\t\t\tmodifiedPosition\r\n\t\t\t\t);\r\n\r\n\t\t\t\t_calculateMorphedAttributeData(\r\n\t\t\t\t\tobject,\r\n\t\t\t\t\tnormalAttribute,\r\n\t\t\t\t\tmorphNormal,\r\n\t\t\t\t\tmorphTargetsRelative,\r\n\t\t\t\t\ta, b, c,\r\n\t\t\t\t\tmodifiedNormal\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\r\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\r\n\r\n\treturn {\r\n\r\n\t\tpositionAttribute: positionAttribute,\r\n\t\tnormalAttribute: normalAttribute,\r\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\r\n\t\tmorphedNormalAttribute: morphedNormalAttribute\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction mergeGroups( geometry ) {\r\n\r\n\tif ( geometry.groups.length === 0 ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tlet groups = geometry.groups;\r\n\r\n\t// sort groups by material index\r\n\r\n\tgroups = groups.sort( ( a, b ) => {\r\n\r\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\r\n\r\n\t\treturn a.start - b.start;\r\n\r\n\t} );\r\n\r\n\t// create index for non-indexed geometries\r\n\r\n\tif ( geometry.getIndex() === null ) {\r\n\r\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\r\n\t\tconst indices = [];\r\n\r\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\r\n\r\n\t\t\tindices.push( i, i + 1, i + 2 );\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.setIndex( indices );\r\n\r\n\t}\r\n\r\n\t// sort index\r\n\r\n\tconst index = geometry.getIndex();\r\n\r\n\tconst newIndices = [];\r\n\r\n\tfor ( let i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\tconst group = groups[ i ];\r\n\r\n\t\tconst groupStart = group.start;\r\n\t\tconst groupLength = groupStart + group.count;\r\n\r\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\r\n\r\n\t\t\tnewIndices.push( index.getX( j ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dispose(); // Required to force buffer recreation\r\n\tgeometry.setIndex( newIndices );\r\n\r\n\t// update groups indices\r\n\r\n\tlet start = 0;\r\n\r\n\tfor ( let i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\tconst group = groups[ i ];\r\n\r\n\t\tgroup.start = start;\r\n\t\tstart += group.count;\r\n\r\n\t}\r\n\r\n\t// merge groups\r\n\r\n\tlet currentGroup = groups[ 0 ];\r\n\r\n\tgeometry.groups = [ currentGroup ];\r\n\r\n\tfor ( let i = 1; i < groups.length; i ++ ) {\r\n\r\n\t\tconst group = groups[ i ];\r\n\r\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\r\n\r\n\t\t\tcurrentGroup.count += group.count;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentGroup = group;\r\n\t\t\tgeometry.groups.push( currentGroup );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n}\r\n\r\n\r\n/**\r\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\r\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\r\n * faces that meet at an angle greater than the crease angle.\r\n *\r\n * @param {BufferGeometry} geometry\r\n * @param {number} [creaseAngle]\r\n * @return {BufferGeometry}\r\n */\r\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\r\n\r\n\tconst creaseDot = Math.cos( creaseAngle );\r\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\r\n\r\n\t// reusable vectors\r\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\r\n\tconst tempVec1 = new Vector3();\r\n\tconst tempVec2 = new Vector3();\r\n\tconst tempNorm = new Vector3();\r\n\tconst tempNorm2 = new Vector3();\r\n\r\n\t// hashes a vector\r\n\tfunction hashVertex( v ) {\r\n\r\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\r\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\r\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\r\n\t\treturn `${x},${y},${z}`;\r\n\r\n\t}\r\n\r\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\r\n\t// and returns the original geometry\r\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\r\n\tconst posAttr = resultGeometry.attributes.position;\r\n\tconst vertexMap = {};\r\n\r\n\t// find all the normals shared by commonly located vertices\r\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\r\n\r\n\t\tconst i3 = 3 * i;\r\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\r\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\r\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\r\n\r\n\t\ttempVec1.subVectors( c, b );\r\n\t\ttempVec2.subVectors( a, b );\r\n\r\n\t\t// add the normal to the map for all vertices\r\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\r\n\t\tfor ( let n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\tconst vert = verts[ n ];\r\n\t\t\tconst hash = hashVertex( vert );\r\n\t\t\tif ( ! ( hash in vertexMap ) ) {\r\n\r\n\t\t\t\tvertexMap[ hash ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvertexMap[ hash ].push( normal );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// average normals from all vertices that share a common location if they are within the\r\n\t// provided crease threshold\r\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\r\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\r\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\r\n\r\n\t\t// get the face normal for this vertex\r\n\t\tconst i3 = 3 * i;\r\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\r\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\r\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\r\n\r\n\t\ttempVec1.subVectors( c, b );\r\n\t\ttempVec2.subVectors( a, b );\r\n\r\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\r\n\r\n\t\t// average all normals that meet the threshold and set the normal value\r\n\t\tfor ( let n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\tconst vert = verts[ n ];\r\n\t\t\tconst hash = hashVertex( vert );\r\n\t\t\tconst otherNormals = vertexMap[ hash ];\r\n\t\t\ttempNorm2.set( 0, 0, 0 );\r\n\r\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\r\n\r\n\t\t\t\tconst otherNorm = otherNormals[ k ];\r\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\r\n\r\n\t\t\t\t\ttempNorm2.add( otherNorm );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttempNorm2.normalize();\r\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tresultGeometry.setAttribute( 'normal', normAttr );\r\n\treturn resultGeometry;\r\n\r\n}\r\n\r\nexport {\r\n\tcomputeMikkTSpaceTangents,\r\n\tmergeGeometries,\r\n\tmergeAttributes,\r\n\tinterleaveAttributes,\r\n\testimateBytesUsed,\r\n\tmergeVertices,\r\n\ttoTrianglesDrawMode,\r\n\tcomputeMorphedAttributes,\r\n\tmergeGroups,\r\n\ttoCreasedNormals\r\n};\r\n","import {\r\n\tAnimationClip,\r\n\tBone,\r\n\tBox3,\r\n\tBufferAttribute,\r\n\tBufferGeometry,\r\n\tClampToEdgeWrapping,\r\n\tColor,\r\n\tColorManagement,\r\n\tDirectionalLight,\r\n\tDoubleSide,\r\n\tFileLoader,\r\n\tFrontSide,\r\n\tGroup,\r\n\tImageBitmapLoader,\r\n\tInstancedMesh,\r\n\tInterleavedBuffer,\r\n\tInterleavedBufferAttribute,\r\n\tInterpolant,\r\n\tInterpolateDiscrete,\r\n\tInterpolateLinear,\r\n\tLine,\r\n\tLineBasicMaterial,\r\n\tLineLoop,\r\n\tLineSegments,\r\n\tLinearFilter,\r\n\tLinearMipmapLinearFilter,\r\n\tLinearMipmapNearestFilter,\r\n\tLinearSRGBColorSpace,\r\n\tLoader,\r\n\tLoaderUtils,\r\n\tMaterial,\r\n\tMathUtils,\r\n\tMatrix4,\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tMeshPhysicalMaterial,\r\n\tMeshStandardMaterial,\r\n\tMirroredRepeatWrapping,\r\n\tNearestFilter,\r\n\tNearestMipmapLinearFilter,\r\n\tNearestMipmapNearestFilter,\r\n\tNumberKeyframeTrack,\r\n\tObject3D,\r\n\tOrthographicCamera,\r\n\tPerspectiveCamera,\r\n\tPointLight,\r\n\tPoints,\r\n\tPointsMaterial,\r\n\tPropertyBinding,\r\n\tQuaternion,\r\n\tQuaternionKeyframeTrack,\r\n\tRepeatWrapping,\r\n\tSkeleton,\r\n\tSkinnedMesh,\r\n\tSphere,\r\n\tSpotLight,\r\n\tTexture,\r\n\tTextureLoader,\r\n\tTriangleFanDrawMode,\r\n\tTriangleStripDrawMode,\r\n\tVector2,\r\n\tVector3,\r\n\tVectorKeyframeTrack,\r\n\tSRGBColorSpace,\r\n\tInstancedBufferAttribute\r\n} from './three.module.min.js';\r\nimport { toTrianglesDrawMode } from './BufferGeometryUtils.js';\r\n\r\nclass GLTFLoader extends Loader {\r\n\r\n\tconstructor( manager ) {\r\n\r\n\t\tsuper( manager );\r\n\r\n\t\tthis.dracoLoader = null;\r\n\t\tthis.ktx2Loader = null;\r\n\t\tthis.meshoptDecoder = null;\r\n\r\n\t\tthis.pluginCallbacks = [];\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFTextureWebPExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFLightsExtension( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMeshoptCompression( parser );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.register( function ( parser ) {\r\n\r\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tload( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tlet resourcePath;\r\n\r\n\t\tif ( this.resourcePath !== '' ) {\r\n\r\n\t\t\tresourcePath = this.resourcePath;\r\n\r\n\t\t} else if ( this.path !== '' ) {\r\n\r\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\r\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\r\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\r\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\r\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\r\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\r\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\r\n\r\n\t\t}\r\n\r\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\r\n\t\t// the model is fully loaded. This means the count of items loaded will\r\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\r\n\t\tthis.manager.itemStart( url );\r\n\r\n\t\tconst _onError = function ( e ) {\r\n\r\n\t\t\tif ( onError ) {\r\n\r\n\t\t\t\tonError( e );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t};\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\r\n\t\tloader.load( url, function ( data ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\r\n\r\n\t\t\t\t\tonLoad( gltf );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, _onError );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t_onError( e );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, _onError );\r\n\r\n\t}\r\n\r\n\tsetDRACOLoader( dracoLoader ) {\r\n\r\n\t\tthis.dracoLoader = dracoLoader;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetKTX2Loader( ktx2Loader ) {\r\n\r\n\t\tthis.ktx2Loader = ktx2Loader;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetMeshoptDecoder( meshoptDecoder ) {\r\n\r\n\t\tthis.meshoptDecoder = meshoptDecoder;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tregister( callback ) {\r\n\r\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\r\n\r\n\t\t\tthis.pluginCallbacks.push( callback );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tunregister( callback ) {\r\n\r\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\r\n\r\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tparse( data, path, onLoad, onError ) {\r\n\r\n\t\tlet json;\r\n\t\tconst extensions = {};\r\n\t\tconst plugins = {};\r\n\t\tconst textDecoder = new TextDecoder();\r\n\r\n\t\tif ( typeof data === 'string' ) {\r\n\r\n\t\t\tjson = JSON.parse( data );\r\n\r\n\t\t} else if ( data instanceof ArrayBuffer ) {\r\n\r\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\r\n\r\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\r\n\r\n\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\tif ( onError ) onError( error );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tjson = data;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\r\n\r\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst parser = new GLTFParser( json, {\r\n\r\n\t\t\tpath: path || this.resourcePath || '',\r\n\t\t\tcrossOrigin: this.crossOrigin,\r\n\t\t\trequestHeader: this.requestHeader,\r\n\t\t\tmanager: this.manager,\r\n\t\t\tktx2Loader: this.ktx2Loader,\r\n\t\t\tmeshoptDecoder: this.meshoptDecoder\r\n\r\n\t\t} );\r\n\r\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\r\n\r\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\r\n\r\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\r\n\r\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\r\n\r\n\t\t\tplugins[ plugin.name ] = plugin;\r\n\r\n\t\t\t// Workaround to avoid determining as unknown extension\r\n\t\t\t// in addUnknownExtensionsToUserData().\r\n\t\t\t// Remove this workaround if we move all the existing\r\n\t\t\t// extension handlers to plugin system\r\n\t\t\textensions[ plugin.name ] = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.extensionsUsed ) {\r\n\r\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\r\n\r\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\r\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\r\n\r\n\t\t\t\tswitch ( extensionName ) {\r\n\r\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\r\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\r\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\r\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\r\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tparser.setExtensions( extensions );\r\n\t\tparser.setPlugins( plugins );\r\n\t\tparser.parse( onLoad, onError );\r\n\r\n\t}\r\n\r\n\tparseAsync( data, path ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tscope.parse( data, path, resolve, reject );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/* GLTFREGISTRY */\r\n\r\nfunction GLTFRegistry() {\r\n\r\n\tlet objects = {};\r\n\r\n\treturn\t{\r\n\r\n\t\tget: function ( key ) {\r\n\r\n\t\t\treturn objects[ key ];\r\n\r\n\t\t},\r\n\r\n\t\tadd: function ( key, object ) {\r\n\r\n\t\t\tobjects[ key ] = object;\r\n\r\n\t\t},\r\n\r\n\t\tremove: function ( key ) {\r\n\r\n\t\t\tdelete objects[ key ];\r\n\r\n\t\t},\r\n\r\n\t\tremoveAll: function () {\r\n\r\n\t\t\tobjects = {};\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n/*********************************/\r\n/********** EXTENSIONS ***********/\r\n/*********************************/\r\n\r\nconst EXTENSIONS = {\r\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\r\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\r\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\r\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\r\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\r\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\r\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\r\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\r\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\r\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\r\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\r\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\r\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\r\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\r\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\r\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\r\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\r\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\r\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\r\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\r\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\r\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\r\n};\r\n\r\n/**\r\n * Punctual Lights Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\r\n */\r\nclass GLTFLightsExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\r\n\r\n\t\t// Object3D instance caches\r\n\t\tthis.cache = { refs: {}, uses: {} };\r\n\r\n\t}\r\n\r\n\t_markDefs() {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst nodeDefs = this.parser.json.nodes || [];\r\n\r\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\r\n\r\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\r\n\r\n\t\t\tif ( nodeDef.extensions\r\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\r\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\r\n\r\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t_loadLight( lightIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst cacheKey = 'light:' + lightIndex;\r\n\t\tlet dependency = parser.cache.get( cacheKey );\r\n\r\n\t\tif ( dependency ) return dependency;\r\n\r\n\t\tconst json = parser.json;\r\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\r\n\t\tconst lightDefs = extensions.lights || [];\r\n\t\tconst lightDef = lightDefs[ lightIndex ];\r\n\t\tlet lightNode;\r\n\r\n\t\tconst color = new Color( 0xffffff );\r\n\r\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\r\n\r\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\r\n\r\n\t\tswitch ( lightDef.type ) {\r\n\r\n\t\t\tcase 'directional':\r\n\t\t\t\tlightNode = new DirectionalLight( color );\r\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\r\n\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'point':\r\n\t\t\t\tlightNode = new PointLight( color );\r\n\t\t\t\tlightNode.distance = range;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'spot':\r\n\t\t\t\tlightNode = new SpotLight( color );\r\n\t\t\t\tlightNode.distance = range;\r\n\t\t\t\t// Handle spotlight properties.\r\n\t\t\t\tlightDef.spot = lightDef.spot || {};\r\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\r\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\r\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\r\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\r\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\r\n\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\r\n\r\n\t\t}\r\n\r\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\r\n\t\t// here, because node-level parsing will only override position if explicitly specified.\r\n\t\tlightNode.position.set( 0, 0, 0 );\r\n\r\n\t\tlightNode.decay = 2;\r\n\r\n\t\tassignExtrasToUserData( lightNode, lightDef );\r\n\r\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\r\n\r\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\r\n\r\n\t\tdependency = Promise.resolve( lightNode );\r\n\r\n\t\tparser.cache.add( cacheKey, dependency );\r\n\r\n\t\treturn dependency;\r\n\r\n\t}\r\n\r\n\tgetDependency( type, index ) {\r\n\r\n\t\tif ( type !== 'light' ) return;\r\n\r\n\t\treturn this._loadLight( index );\r\n\r\n\t}\r\n\r\n\tcreateNodeAttachment( nodeIndex ) {\r\n\r\n\t\tconst self = this;\r\n\t\tconst parser = this.parser;\r\n\t\tconst json = parser.json;\r\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\r\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\r\n\t\tconst lightIndex = lightDef.light;\r\n\r\n\t\tif ( lightIndex === undefined ) return null;\r\n\r\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\r\n\r\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Unlit Materials Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\r\n */\r\nclass GLTFMaterialsUnlitExtension {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\r\n\r\n\t}\r\n\r\n\tgetMaterialType() {\r\n\r\n\t\treturn MeshBasicMaterial;\r\n\r\n\t}\r\n\r\n\textendParams( materialParams, materialDef, parser ) {\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\r\n\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\r\n\r\n\t\tif ( metallicRoughness ) {\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Materials Emissive Strength Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\r\n */\r\nclass GLTFMaterialsEmissiveStrengthExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\r\n\r\n\t\tif ( emissiveStrength !== undefined ) {\r\n\r\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.resolve();\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Clearcoat Materials Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\r\n */\r\nclass GLTFMaterialsClearcoatExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tif ( extension.clearcoatFactor !== undefined ) {\r\n\r\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.clearcoatTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\r\n\r\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\r\n\r\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\r\n\r\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\r\n\r\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Materials dispersion Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\r\n */\r\nclass GLTFMaterialsDispersionExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\r\n\r\n\t\treturn Promise.resolve();\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Iridescence Materials Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\r\n */\r\nclass GLTFMaterialsIridescenceExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tif ( extension.iridescenceFactor !== undefined ) {\r\n\r\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.iridescenceTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.iridescenceIor !== undefined ) {\r\n\r\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\r\n\r\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\r\n\r\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\r\n\r\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Sheen Materials Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\r\n */\r\nclass GLTFMaterialsSheenExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\r\n\t\tmaterialParams.sheenRoughness = 0;\r\n\t\tmaterialParams.sheen = 1;\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tif ( extension.sheenColorFactor !== undefined ) {\r\n\r\n\t\t\tconst colorFactor = extension.sheenColorFactor;\r\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\r\n\r\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.sheenColorTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Transmission Materials Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\r\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\r\n */\r\nclass GLTFMaterialsTransmissionExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tif ( extension.transmissionFactor !== undefined ) {\r\n\r\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.transmissionTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Materials Volume Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\r\n */\r\nclass GLTFMaterialsVolumeExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\r\n\r\n\t\tif ( extension.thicknessTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\r\n\r\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\r\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Materials ior Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\r\n */\r\nclass GLTFMaterialsIorExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\r\n\r\n\t\treturn Promise.resolve();\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Materials specular Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\r\n */\r\nclass GLTFMaterialsSpecularExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\r\n\r\n\t\tif ( extension.specularTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\r\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\r\n\r\n\t\tif ( extension.specularColorTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * Materials bump Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\r\n */\r\nclass GLTFMaterialsBumpExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\r\n\r\n\t\tif ( extension.bumpTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Materials anisotropy Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\r\n */\r\nclass GLTFMaterialsAnisotropyExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( materialIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\r\n\r\n\t\treturn MeshPhysicalMaterial;\r\n\r\n\t}\r\n\r\n\textendMaterialParams( materialIndex, materialParams ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\r\n\r\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst extension = materialDef.extensions[ this.name ];\r\n\r\n\t\tif ( extension.anisotropyStrength !== undefined ) {\r\n\r\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.anisotropyRotation !== undefined ) {\r\n\r\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension.anisotropyTexture !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * BasisU Texture Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\r\n */\r\nclass GLTFTextureBasisUExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\r\n\r\n\t}\r\n\r\n\tloadTexture( textureIndex ) {\r\n\r\n\t\tconst parser = this.parser;\r\n\t\tconst json = parser.json;\r\n\r\n\t\tconst textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = textureDef.extensions[ this.name ];\r\n\t\tconst loader = parser.options.ktx2Loader;\r\n\r\n\t\tif ( ! loader ) {\r\n\r\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\r\n\r\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * WebP Texture Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\r\n */\r\nclass GLTFTextureWebPExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\r\n\t\tthis.isSupported = null;\r\n\r\n\t}\r\n\r\n\tloadTexture( textureIndex ) {\r\n\r\n\t\tconst name = this.name;\r\n\t\tconst parser = this.parser;\r\n\t\tconst json = parser.json;\r\n\r\n\t\tconst textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = textureDef.extensions[ name ];\r\n\t\tconst source = json.images[ extension.source ];\r\n\r\n\t\tlet loader = parser.textureLoader;\r\n\t\tif ( source.uri ) {\r\n\r\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\r\n\t\t\tif ( handler !== null ) loader = handler;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.detectSupport().then( function ( isSupported ) {\r\n\r\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\r\n\r\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\r\n\r\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Fall back to PNG or JPEG.\r\n\t\t\treturn parser.loadTexture( textureIndex );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tdetectSupport() {\r\n\r\n\t\tif ( ! this.isSupported ) {\r\n\r\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\r\n\r\n\t\t\t\tconst image = new Image();\r\n\r\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\r\n\t\t\t\t// WebP images, unfortunately.\r\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\r\n\r\n\t\t\t\timage.onload = image.onerror = function () {\r\n\r\n\t\t\t\t\tresolve( image.height === 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isSupported;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * AVIF Texture Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\r\n */\r\nclass GLTFTextureAVIFExtension {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.parser = parser;\r\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\r\n\t\tthis.isSupported = null;\r\n\r\n\t}\r\n\r\n\tloadTexture( textureIndex ) {\r\n\r\n\t\tconst name = this.name;\r\n\t\tconst parser = this.parser;\r\n\t\tconst json = parser.json;\r\n\r\n\t\tconst textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = textureDef.extensions[ name ];\r\n\t\tconst source = json.images[ extension.source ];\r\n\r\n\t\tlet loader = parser.textureLoader;\r\n\t\tif ( source.uri ) {\r\n\r\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\r\n\t\t\tif ( handler !== null ) loader = handler;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.detectSupport().then( function ( isSupported ) {\r\n\r\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\r\n\r\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\r\n\r\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: AVIF required by asset but unsupported.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Fall back to PNG or JPEG.\r\n\t\t\treturn parser.loadTexture( textureIndex );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tdetectSupport() {\r\n\r\n\t\tif ( ! this.isSupported ) {\r\n\r\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\r\n\r\n\t\t\t\tconst image = new Image();\r\n\r\n\t\t\t\t// Lossy test image.\r\n\t\t\t\timage.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\r\n\t\t\t\timage.onload = image.onerror = function () {\r\n\r\n\t\t\t\t\tresolve( image.height === 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isSupported;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * meshopt BufferView Compression Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\r\n */\r\nclass GLTFMeshoptCompression {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\r\n\t\tthis.parser = parser;\r\n\r\n\t}\r\n\r\n\tloadBufferView( index ) {\r\n\r\n\t\tconst json = this.parser.json;\r\n\t\tconst bufferView = json.bufferViews[ index ];\r\n\r\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\r\n\r\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\r\n\r\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\r\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\r\n\r\n\t\t\tif ( ! decoder || ! decoder.supported ) {\r\n\r\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\r\n\r\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer.then( function ( res ) {\r\n\r\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\r\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\r\n\r\n\t\t\t\tconst count = extensionDef.count;\r\n\t\t\t\tconst stride = extensionDef.byteStride;\r\n\r\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\r\n\r\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\r\n\r\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\r\n\r\n\t\t\t\t\t\treturn res.buffer;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\r\n\t\t\t\t\treturn decoder.ready.then( function () {\r\n\r\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\r\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\r\n\t\t\t\t\t\treturn result;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * GPU Instancing Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\r\n *\r\n */\r\nclass GLTFMeshGpuInstancing {\r\n\r\n\tconstructor( parser ) {\r\n\r\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\r\n\t\tthis.parser = parser;\r\n\r\n\t}\r\n\r\n\tcreateNodeMesh( nodeIndex ) {\r\n\r\n\t\tconst json = this.parser.json;\r\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\r\n\r\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\r\n\t\t\tnodeDef.mesh === undefined ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\r\n\r\n\t\t// No Points or Lines + Instancing support yet\r\n\r\n\t\tfor ( const primitive of meshDef.primitives ) {\r\n\r\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\r\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\r\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\r\n\t\t\t\t primitive.mode !== undefined ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\r\n\t\tconst attributesDef = extensionDef.attributes;\r\n\r\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\r\n\r\n\t\tconst pending = [];\r\n\t\tconst attributes = {};\r\n\r\n\t\tfor ( const key in attributesDef ) {\r\n\r\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\r\n\r\n\t\t\t\tattributes[ key ] = accessor;\r\n\t\t\t\treturn attributes[ key ];\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( pending.length < 1 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\r\n\r\n\t\treturn Promise.all( pending ).then( results => {\r\n\r\n\t\t\tconst nodeObject = results.pop();\r\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\r\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\r\n\t\t\tconst instancedMeshes = [];\r\n\r\n\t\t\tfor ( const mesh of meshes ) {\r\n\r\n\t\t\t\t// Temporal variables\r\n\t\t\t\tconst m = new Matrix4();\r\n\t\t\t\tconst p = new Vector3();\r\n\t\t\t\tconst q = new Quaternion();\r\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\r\n\r\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\r\n\r\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\r\n\r\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( attributes.ROTATION ) {\r\n\r\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( attributes.SCALE ) {\r\n\r\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\r\n\t\t\t\tfor ( const attributeName in attributes ) {\r\n\r\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\r\n\r\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\r\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\r\n\r\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\r\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\r\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\r\n\r\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Just in case\r\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\r\n\r\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\r\n\r\n\t\t\t\tinstancedMeshes.push( instancedMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeObject.isGroup ) {\r\n\r\n\t\t\t\tnodeObject.clear();\r\n\r\n\t\t\t\tnodeObject.add( ... instancedMeshes );\r\n\r\n\t\t\t\treturn nodeObject;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn instancedMeshes[ 0 ];\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/* BINARY EXTENSION */\r\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\r\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\r\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\r\n\r\nclass GLTFBinaryExtension {\r\n\r\n\tconstructor( data ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\r\n\t\tthis.content = null;\r\n\t\tthis.body = null;\r\n\r\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\r\n\t\tconst textDecoder = new TextDecoder();\r\n\r\n\t\tthis.header = {\r\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\r\n\t\t\tversion: headerView.getUint32( 4, true ),\r\n\t\t\tlength: headerView.getUint32( 8, true )\r\n\t\t};\r\n\r\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\r\n\r\n\t\t} else if ( this.header.version < 2.0 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\r\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\r\n\t\tlet chunkIndex = 0;\r\n\r\n\t\twhile ( chunkIndex < chunkContentsLength ) {\r\n\r\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\r\n\r\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\r\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\r\n\r\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\r\n\r\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\r\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Clients must ignore chunks with unknown types.\r\n\r\n\t\t\tchunkIndex += chunkLength;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.content === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * DRACO Mesh Compression Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\r\n */\r\nclass GLTFDracoMeshCompressionExtension {\r\n\r\n\tconstructor( json, dracoLoader ) {\r\n\r\n\t\tif ( ! dracoLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\r\n\t\tthis.json = json;\r\n\t\tthis.dracoLoader = dracoLoader;\r\n\t\tthis.dracoLoader.preload();\r\n\r\n\t}\r\n\r\n\tdecodePrimitive( primitive, parser ) {\r\n\r\n\t\tconst json = this.json;\r\n\t\tconst dracoLoader = this.dracoLoader;\r\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\r\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\r\n\t\tconst threeAttributeMap = {};\r\n\t\tconst attributeNormalizedMap = {};\r\n\t\tconst attributeTypeMap = {};\r\n\r\n\t\tfor ( const attributeName in gltfAttributeMap ) {\r\n\r\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\r\n\r\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const attributeName in primitive.attributes ) {\r\n\r\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\r\n\r\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\r\n\r\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\r\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\r\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\r\n\r\n\t\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\r\n\r\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\r\n\r\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\r\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\r\n\r\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve( geometry );\r\n\r\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Texture Transform Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\r\n */\r\nclass GLTFTextureTransformExtension {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\r\n\r\n\t}\r\n\r\n\textendTexture( texture, transform ) {\r\n\r\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\r\n\t\t\t&& transform.offset === undefined\r\n\t\t\t&& transform.rotation === undefined\r\n\t\t\t&& transform.scale === undefined ) {\r\n\r\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\r\n\t\t\treturn texture;\r\n\r\n\t\t}\r\n\r\n\t\ttexture = texture.clone();\r\n\r\n\t\tif ( transform.texCoord !== undefined ) {\r\n\r\n\t\t\ttexture.channel = transform.texCoord;\r\n\r\n\t\t}\r\n\r\n\t\tif ( transform.offset !== undefined ) {\r\n\r\n\t\t\ttexture.offset.fromArray( transform.offset );\r\n\r\n\t\t}\r\n\r\n\t\tif ( transform.rotation !== undefined ) {\r\n\r\n\t\t\ttexture.rotation = transform.rotation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( transform.scale !== undefined ) {\r\n\r\n\t\t\ttexture.repeat.fromArray( transform.scale );\r\n\r\n\t\t}\r\n\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Mesh Quantization Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\r\n */\r\nclass GLTFMeshQuantizationExtension {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/*********************************/\r\n/********** INTERPOLATION ********/\r\n/*********************************/\r\n\r\n// Spline Interpolation\r\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\r\nclass GLTFCubicSplineInterpolant extends Interpolant {\r\n\r\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\t}\r\n\r\n\tcopySampleValue_( index ) {\r\n\r\n\t\t// Copies a sample value to the result buffer. See description of glTF\r\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tvalueSize = this.valueSize,\r\n\t\t\toffset = index * valueSize * 3 + valueSize;\r\n\r\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tinterpolate_( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer;\r\n\t\tconst values = this.sampleValues;\r\n\t\tconst stride = this.valueSize;\r\n\r\n\t\tconst stride2 = stride * 2;\r\n\t\tconst stride3 = stride * 3;\r\n\r\n\t\tconst td = t1 - t0;\r\n\r\n\t\tconst p = ( t - t0 ) / td;\r\n\t\tconst pp = p * p;\r\n\t\tconst ppp = pp * p;\r\n\r\n\t\tconst offset1 = i1 * stride3;\r\n\t\tconst offset0 = offset1 - stride3;\r\n\r\n\t\tconst s2 = - 2 * ppp + 3 * pp;\r\n\t\tconst s3 = ppp - pp;\r\n\t\tconst s0 = 1 - s2;\r\n\t\tconst s1 = s3 - pp + p;\r\n\r\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\r\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\r\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\r\n\r\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\r\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\r\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\r\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\r\n\r\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst _q = new Quaternion();\r\n\r\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\r\n\r\n\tinterpolate_( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\r\n\r\n\t\t_q.fromArray( result ).normalize().toArray( result );\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n/*********************************/\r\n/********** INTERNALS ************/\r\n/*********************************/\r\n\r\n/* CONSTANTS */\r\n\r\nconst WEBGL_CONSTANTS = {\r\n\tFLOAT: 5126,\r\n\t//FLOAT_MAT2: 35674,\r\n\tFLOAT_MAT3: 35675,\r\n\tFLOAT_MAT4: 35676,\r\n\tFLOAT_VEC2: 35664,\r\n\tFLOAT_VEC3: 35665,\r\n\tFLOAT_VEC4: 35666,\r\n\tLINEAR: 9729,\r\n\tREPEAT: 10497,\r\n\tSAMPLER_2D: 35678,\r\n\tPOINTS: 0,\r\n\tLINES: 1,\r\n\tLINE_LOOP: 2,\r\n\tLINE_STRIP: 3,\r\n\tTRIANGLES: 4,\r\n\tTRIANGLE_STRIP: 5,\r\n\tTRIANGLE_FAN: 6,\r\n\tUNSIGNED_BYTE: 5121,\r\n\tUNSIGNED_SHORT: 5123\r\n};\r\n\r\nconst WEBGL_COMPONENT_TYPES = {\r\n\t5120: Int8Array,\r\n\t5121: Uint8Array,\r\n\t5122: Int16Array,\r\n\t5123: Uint16Array,\r\n\t5125: Uint32Array,\r\n\t5126: Float32Array\r\n};\r\n\r\nconst WEBGL_FILTERS = {\r\n\t9728: NearestFilter,\r\n\t9729: LinearFilter,\r\n\t9984: NearestMipmapNearestFilter,\r\n\t9985: LinearMipmapNearestFilter,\r\n\t9986: NearestMipmapLinearFilter,\r\n\t9987: LinearMipmapLinearFilter\r\n};\r\n\r\nconst WEBGL_WRAPPINGS = {\r\n\t33071: ClampToEdgeWrapping,\r\n\t33648: MirroredRepeatWrapping,\r\n\t10497: RepeatWrapping\r\n};\r\n\r\nconst WEBGL_TYPE_SIZES = {\r\n\t'SCALAR': 1,\r\n\t'VEC2': 2,\r\n\t'VEC3': 3,\r\n\t'VEC4': 4,\r\n\t'MAT2': 4,\r\n\t'MAT3': 9,\r\n\t'MAT4': 16\r\n};\r\n\r\nconst ATTRIBUTES = {\r\n\tPOSITION: 'position',\r\n\tNORMAL: 'normal',\r\n\tTANGENT: 'tangent',\r\n\tTEXCOORD_0: 'uv',\r\n\tTEXCOORD_1: 'uv1',\r\n\tTEXCOORD_2: 'uv2',\r\n\tTEXCOORD_3: 'uv3',\r\n\tCOLOR_0: 'color',\r\n\tWEIGHTS_0: 'skinWeight',\r\n\tJOINTS_0: 'skinIndex',\r\n};\r\n\r\nconst PATH_PROPERTIES = {\r\n\tscale: 'scale',\r\n\ttranslation: 'position',\r\n\trotation: 'quaternion',\r\n\tweights: 'morphTargetInfluences'\r\n};\r\n\r\nconst INTERPOLATION = {\r\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\r\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\r\n\tLINEAR: InterpolateLinear,\r\n\tSTEP: InterpolateDiscrete\r\n};\r\n\r\nconst ALPHA_MODES = {\r\n\tOPAQUE: 'OPAQUE',\r\n\tMASK: 'MASK',\r\n\tBLEND: 'BLEND'\r\n};\r\n\r\n/**\r\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\r\n */\r\nfunction createDefaultMaterial( cache ) {\r\n\r\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\r\n\r\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\r\n\t\t\tcolor: 0xFFFFFF,\r\n\t\t\temissive: 0x000000,\r\n\t\t\tmetalness: 1,\r\n\t\t\troughness: 1,\r\n\t\t\ttransparent: false,\r\n\t\t\tdepthTest: true,\r\n\t\t\tside: FrontSide\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\treturn cache[ 'DefaultMaterial' ];\r\n\r\n}\r\n\r\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\r\n\r\n\t// Add unknown glTF extensions to an object's userData.\r\n\r\n\tfor ( const name in objectDef.extensions ) {\r\n\r\n\t\tif ( knownExtensions[ name ] === undefined ) {\r\n\r\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\r\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @param {Object3D|Material|BufferGeometry} object\r\n * @param {GLTF.definition} gltfDef\r\n */\r\nfunction assignExtrasToUserData( object, gltfDef ) {\r\n\r\n\tif ( gltfDef.extras !== undefined ) {\r\n\r\n\t\tif ( typeof gltfDef.extras === 'object' ) {\r\n\r\n\t\t\tObject.assign( object.userData, gltfDef.extras );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\r\n *\r\n * @param {BufferGeometry} geometry\r\n * @param {Array<GLTF.Target>} targets\r\n * @param {GLTFParser} parser\r\n * @return {Promise<BufferGeometry>}\r\n */\r\nfunction addMorphTargets( geometry, targets, parser ) {\r\n\r\n\tlet hasMorphPosition = false;\r\n\tlet hasMorphNormal = false;\r\n\tlet hasMorphColor = false;\r\n\r\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\tconst target = targets[ i ];\r\n\r\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\r\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\r\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\r\n\r\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\r\n\r\n\t}\r\n\r\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\r\n\r\n\tconst pendingPositionAccessors = [];\r\n\tconst pendingNormalAccessors = [];\r\n\tconst pendingColorAccessors = [];\r\n\r\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\tconst target = targets[ i ];\r\n\r\n\t\tif ( hasMorphPosition ) {\r\n\r\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\r\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\r\n\t\t\t\t: geometry.attributes.position;\r\n\r\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphNormal ) {\r\n\r\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\r\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\r\n\t\t\t\t: geometry.attributes.normal;\r\n\r\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphColor ) {\r\n\r\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\r\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\r\n\t\t\t\t: geometry.attributes.color;\r\n\r\n\t\t\tpendingColorAccessors.push( pendingAccessor );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn Promise.all( [\r\n\t\tPromise.all( pendingPositionAccessors ),\r\n\t\tPromise.all( pendingNormalAccessors ),\r\n\t\tPromise.all( pendingColorAccessors )\r\n\t] ).then( function ( accessors ) {\r\n\r\n\t\tconst morphPositions = accessors[ 0 ];\r\n\t\tconst morphNormals = accessors[ 1 ];\r\n\t\tconst morphColors = accessors[ 2 ];\r\n\r\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\r\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\r\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\r\n\t\tgeometry.morphTargetsRelative = true;\r\n\r\n\t\treturn geometry;\r\n\r\n\t} );\r\n\r\n}\r\n\r\n/**\r\n * @param {Mesh} mesh\r\n * @param {GLTF.Mesh} meshDef\r\n */\r\nfunction updateMorphTargets( mesh, meshDef ) {\r\n\r\n\tmesh.updateMorphTargets();\r\n\r\n\tif ( meshDef.weights !== undefined ) {\r\n\r\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\r\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\r\n\r\n\t\tconst targetNames = meshDef.extras.targetNames;\r\n\r\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\r\n\r\n\t\t\tmesh.morphTargetDictionary = {};\r\n\r\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction createPrimitiveKey( primitiveDef ) {\r\n\r\n\tlet geometryKey;\r\n\r\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\r\n\r\n\tif ( dracoExtension ) {\r\n\r\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\r\n\t\t\t\t+ ':' + dracoExtension.indices\r\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\r\n\r\n\t} else {\r\n\r\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\r\n\r\n\t}\r\n\r\n\tif ( primitiveDef.targets !== undefined ) {\r\n\r\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn geometryKey;\r\n\r\n}\r\n\r\nfunction createAttributesKey( attributes ) {\r\n\r\n\tlet attributesKey = '';\r\n\r\n\tconst keys = Object.keys( attributes ).sort();\r\n\r\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\r\n\r\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\r\n\r\n\t}\r\n\r\n\treturn attributesKey;\r\n\r\n}\r\n\r\nfunction getNormalizedComponentScale( constructor ) {\r\n\r\n\t// Reference:\r\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\r\n\r\n\tswitch ( constructor ) {\r\n\r\n\t\tcase Int8Array:\r\n\t\t\treturn 1 / 127;\r\n\r\n\t\tcase Uint8Array:\r\n\t\t\treturn 1 / 255;\r\n\r\n\t\tcase Int16Array:\r\n\t\t\treturn 1 / 32767;\r\n\r\n\t\tcase Uint16Array:\r\n\t\t\treturn 1 / 65535;\r\n\r\n\t\tdefault:\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getImageURIMimeType( uri ) {\r\n\r\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\r\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\r\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\r\n\r\n\treturn 'image/png';\r\n\r\n}\r\n\r\nconst _identityMatrix = new Matrix4();\r\n\r\n/* GLTF PARSER */\r\n\r\nclass GLTFParser {\r\n\r\n\tconstructor( json = {}, options = {} ) {\r\n\r\n\t\tthis.json = json;\r\n\t\tthis.extensions = {};\r\n\t\tthis.plugins = {};\r\n\t\tthis.options = options;\r\n\r\n\t\t// loader object cache\r\n\t\tthis.cache = new GLTFRegistry();\r\n\r\n\t\t// associations between Three.js objects and glTF elements\r\n\t\tthis.associations = new Map();\r\n\r\n\t\t// BufferGeometry caching\r\n\t\tthis.primitiveCache = {};\r\n\r\n\t\t// Node cache\r\n\t\tthis.nodeCache = {};\r\n\r\n\t\t// Object3D instance caches\r\n\t\tthis.meshCache = { refs: {}, uses: {} };\r\n\t\tthis.cameraCache = { refs: {}, uses: {} };\r\n\t\tthis.lightCache = { refs: {}, uses: {} };\r\n\r\n\t\tthis.sourceCache = {};\r\n\t\tthis.textureCache = {};\r\n\r\n\t\t// Track node names, to ensure no duplicates\r\n\t\tthis.nodeNamesUsed = {};\r\n\r\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\r\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\r\n\r\n\t\tlet isSafari = false;\r\n\t\tlet safariVersion = - 1;\r\n\t\tlet isFirefox = false;\r\n\t\tlet firefoxVersion = - 1;\r\n\r\n\t\tif ( typeof navigator !== 'undefined' ) {\r\n\r\n\t\t\tconst userAgent = navigator.userAgent;\r\n\r\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\r\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\r\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : - 1;\r\n\r\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > - 1;\r\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\r\n\r\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\r\n\r\n\t\t}\r\n\r\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\r\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\r\n\r\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\r\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\r\n\r\n\t\t\tthis.fileLoader.setWithCredentials( true );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetExtensions( extensions ) {\r\n\r\n\t\tthis.extensions = extensions;\r\n\r\n\t}\r\n\r\n\tsetPlugins( plugins ) {\r\n\r\n\t\tthis.plugins = plugins;\r\n\r\n\t}\r\n\r\n\tparse( onLoad, onError ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst json = this.json;\r\n\t\tconst extensions = this.extensions;\r\n\r\n\t\t// Clear the loader cache\r\n\t\tthis.cache.removeAll();\r\n\t\tthis.nodeCache = {};\r\n\r\n\t\t// Mark the special nodes/meshes in json for efficient parse\r\n\t\tthis._invokeAll( function ( ext ) {\r\n\r\n\t\t\treturn ext._markDefs && ext._markDefs();\r\n\r\n\t\t} );\r\n\r\n\t\tPromise.all( this._invokeAll( function ( ext ) {\r\n\r\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\r\n\r\n\t\t} ) ).then( function () {\r\n\r\n\t\t\treturn Promise.all( [\r\n\r\n\t\t\t\tparser.getDependencies( 'scene' ),\r\n\t\t\t\tparser.getDependencies( 'animation' ),\r\n\t\t\t\tparser.getDependencies( 'camera' ),\r\n\r\n\t\t\t] );\r\n\r\n\t\t} ).then( function ( dependencies ) {\r\n\r\n\t\t\tconst result = {\r\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\r\n\t\t\t\tscenes: dependencies[ 0 ],\r\n\t\t\t\tanimations: dependencies[ 1 ],\r\n\t\t\t\tcameras: dependencies[ 2 ],\r\n\t\t\t\tasset: json.asset,\r\n\t\t\t\tparser: parser,\r\n\t\t\t\tuserData: {}\r\n\t\t\t};\r\n\r\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\r\n\r\n\t\t\tassignExtrasToUserData( result, json );\r\n\r\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\r\n\r\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\r\n\r\n\t\t\t} ) ).then( function () {\r\n\r\n\t\t\t\tfor ( const scene of result.scenes ) {\r\n\r\n\t\t\t\t\tscene.updateMatrixWorld();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tonLoad( result );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} ).catch( onError );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Marks the special nodes/meshes in json for efficient parse.\r\n\t */\r\n\t_markDefs() {\r\n\r\n\t\tconst nodeDefs = this.json.nodes || [];\r\n\t\tconst skinDefs = this.json.skins || [];\r\n\t\tconst meshDefs = this.json.meshes || [];\r\n\r\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\r\n\t\t// Object3D. Use the skins' joint references to mark bones.\r\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\r\n\r\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\r\n\r\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Iterate over all nodes, marking references to shared resources,\r\n\t\t// as well as skeleton joints.\r\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\r\n\r\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\r\n\r\n\t\t\tif ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\r\n\r\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\r\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\r\n\t\t\t\t// to mark SkinnedMesh if node has skin.\r\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.camera !== undefined ) {\r\n\r\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Counts references to shared node / Object3D resources. These resources\r\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\r\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\r\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\r\n\t * Textures) can be reused directly and are not marked here.\r\n\t *\r\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\r\n\t */\r\n\t_addNodeRef( cache, index ) {\r\n\r\n\t\tif ( index === undefined ) return;\r\n\r\n\t\tif ( cache.refs[ index ] === undefined ) {\r\n\r\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\r\n\r\n\t\t}\r\n\r\n\t\tcache.refs[ index ] ++;\r\n\r\n\t}\r\n\r\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\r\n\t_getNodeRef( cache, index, object ) {\r\n\r\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\r\n\r\n\t\tconst ref = object.clone();\r\n\r\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\r\n\t\t// original object from being lost.\r\n\t\tconst updateMappings = ( original, clone ) => {\r\n\r\n\t\t\tconst mappings = this.associations.get( original );\r\n\t\t\tif ( mappings != null ) {\r\n\r\n\t\t\t\tthis.associations.set( clone, mappings );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\r\n\r\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tupdateMappings( object, ref );\r\n\r\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\r\n\r\n\t\treturn ref;\r\n\r\n\t}\r\n\r\n\t_invokeOne( func ) {\r\n\r\n\t\tconst extensions = Object.values( this.plugins );\r\n\t\textensions.push( this );\r\n\r\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\r\n\r\n\t\t\tconst result = func( extensions[ i ] );\r\n\r\n\t\t\tif ( result ) return result;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t_invokeAll( func ) {\r\n\r\n\t\tconst extensions = Object.values( this.plugins );\r\n\t\textensions.unshift( this );\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\r\n\r\n\t\t\tconst result = func( extensions[ i ] );\r\n\r\n\t\t\tif ( result ) pending.push( result );\r\n\r\n\t\t}\r\n\r\n\t\treturn pending;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Requests the specified dependency asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @param {number} index\r\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\r\n\t */\r\n\tgetDependency( type, index ) {\r\n\r\n\t\tconst cacheKey = type + ':' + index;\r\n\t\tlet dependency = this.cache.get( cacheKey );\r\n\r\n\t\tif ( ! dependency ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'scene':\r\n\t\t\t\t\tdependency = this.loadScene( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'node':\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mesh':\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'accessor':\r\n\t\t\t\t\tdependency = this.loadAccessor( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bufferView':\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'buffer':\r\n\t\t\t\t\tdependency = this.loadBuffer( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'material':\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'skin':\r\n\t\t\t\t\tdependency = this.loadSkin( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'camera':\r\n\t\t\t\t\tdependency = this.loadCamera( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tif ( ! dependency ) {\r\n\r\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cache.add( cacheKey, dependency );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependency;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Requests all dependencies of the specified type asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @return {Promise<Array<Object>>}\r\n\t */\r\n\tgetDependencies( type ) {\r\n\r\n\t\tlet dependencies = this.cache.get( type );\r\n\r\n\t\tif ( ! dependencies ) {\r\n\r\n\t\t\tconst parser = this;\r\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\r\n\r\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\r\n\r\n\t\t\t\treturn parser.getDependency( type, index );\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t\tthis.cache.add( type, dependencies );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependencies;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tloadBuffer( bufferIndex ) {\r\n\r\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\r\n\t\tconst loader = this.fileLoader;\r\n\r\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\t// If present, GLB container is required to be the first buffer.\r\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\r\n\r\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\r\n\r\n\t\t}\r\n\r\n\t\tconst options = this.options;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\r\n\r\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferViewIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tloadBufferView( bufferViewIndex ) {\r\n\r\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\r\n\r\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\r\n\r\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\r\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\r\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\r\n\t * @param {number} accessorIndex\r\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\r\n\t */\r\n\tloadAccessor( accessorIndex ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst json = this.json;\r\n\r\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\r\n\r\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\r\n\r\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\r\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\t\t\tconst normalized = accessorDef.normalized === true;\r\n\r\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\r\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst pendingBufferViews = [];\r\n\r\n\t\tif ( accessorDef.bufferView !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpendingBufferViews.push( null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\r\n\r\n\t\t\tconst bufferView = bufferViews[ 0 ];\r\n\r\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\r\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\r\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\r\n\t\t\tconst itemBytes = elementBytes * itemSize;\r\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\r\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\r\n\t\t\tconst normalized = accessorDef.normalized === true;\r\n\t\t\tlet array, bufferAttribute;\r\n\r\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\r\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\r\n\r\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\r\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\r\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\r\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\r\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\r\n\r\n\t\t\t\tif ( ! ib ) {\r\n\r\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\r\n\r\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\r\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\r\n\r\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( bufferView === null ) {\r\n\r\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\r\n\t\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\r\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\r\n\r\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\r\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\r\n\r\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\r\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\r\n\r\n\t\t\t\tif ( bufferView !== null ) {\r\n\r\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\r\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Ignore normalized since we copy from sparse\r\n\t\t\t\tbufferAttribute.normalized = false;\r\n\r\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst index = sparseIndices[ i ];\r\n\r\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\r\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\r\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\r\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\r\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute.normalized = normalized;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn bufferAttribute;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise<THREE.Texture|null>}\r\n\t */\r\n\tloadTexture( textureIndex ) {\r\n\r\n\t\tconst json = this.json;\r\n\t\tconst options = this.options;\r\n\t\tconst textureDef = json.textures[ textureIndex ];\r\n\t\tconst sourceIndex = textureDef.source;\r\n\t\tconst sourceDef = json.images[ sourceIndex ];\r\n\r\n\t\tlet loader = this.textureLoader;\r\n\r\n\t\tif ( sourceDef.uri ) {\r\n\r\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\r\n\t\t\tif ( handler !== null ) loader = handler;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\r\n\r\n\t}\r\n\r\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst json = this.json;\r\n\r\n\t\tconst textureDef = json.textures[ textureIndex ];\r\n\t\tconst sourceDef = json.images[ sourceIndex ];\r\n\r\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\r\n\r\n\t\tif ( this.textureCache[ cacheKey ] ) {\r\n\r\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\r\n\t\t\treturn this.textureCache[ cacheKey ];\r\n\r\n\t\t}\r\n\r\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\r\n\r\n\t\t\ttexture.flipY = false;\r\n\r\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\r\n\r\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\r\n\r\n\t\t\t\ttexture.name = sourceDef.uri;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst samplers = json.samplers || {};\r\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\r\n\r\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\r\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\r\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\r\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\r\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n\r\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} ).catch( function () {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t} );\r\n\r\n\t\tthis.textureCache[ cacheKey ] = promise;\r\n\r\n\t\treturn promise;\r\n\r\n\t}\r\n\r\n\tloadImageSource( sourceIndex, loader ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst json = this.json;\r\n\t\tconst options = this.options;\r\n\r\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\r\n\r\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tconst sourceDef = json.images[ sourceIndex ];\r\n\r\n\t\tconst URL = self.URL || self.webkitURL; // eslint-disable-line no-restricted-globals\r\n\r\n\t\tlet sourceURI = sourceDef.uri || '';\r\n\t\tlet isObjectURL = false;\r\n\r\n\t\tif ( sourceDef.bufferView !== undefined ) {\r\n\r\n\t\t\t// Load binary image data from bufferView, if provided.\r\n\r\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\r\n\r\n\t\t\t\tisObjectURL = true;\r\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\r\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\r\n\t\t\t\treturn sourceURI;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} else if ( sourceDef.uri === undefined ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\r\n\r\n\t\t}\r\n\r\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\r\n\r\n\t\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\t\tlet onLoad = resolve;\r\n\r\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\r\n\r\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\r\n\r\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tresolve( texture );\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} ).then( function ( texture ) {\r\n\r\n\t\t\t// Clean up resources and configure Texture.\r\n\r\n\t\t\tif ( isObjectURL === true ) {\r\n\r\n\t\t\t\tURL.revokeObjectURL( sourceURI );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tassignExtrasToUserData( texture, sourceDef );\r\n\r\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} ).catch( function ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\r\n\t\t\tthrow error;\r\n\r\n\t\t} );\r\n\r\n\t\tthis.sourceCache[ sourceIndex ] = promise;\r\n\t\treturn promise;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Asynchronously assigns a texture to the given material parameters.\r\n\t * @param {Object} materialParams\r\n\t * @param {string} mapName\r\n\t * @param {Object} mapDef\r\n\t * @return {Promise<Texture>}\r\n\t */\r\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\r\n\r\n\t\tconst parser = this;\r\n\r\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\r\n\r\n\t\t\tif ( ! texture ) return null;\r\n\r\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\r\n\r\n\t\t\t\ttexture = texture.clone();\r\n\t\t\t\ttexture.channel = mapDef.texCoord;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\r\n\r\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\r\n\r\n\t\t\t\tif ( transform ) {\r\n\r\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\r\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\r\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colorSpace !== undefined ) {\r\n\r\n\t\t\t\ttexture.colorSpace = colorSpace;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams[ mapName ] = texture;\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\r\n\t * already has a material (generated from the glTF material options alone)\r\n\t * but reuse of the same glTF material may require multiple threejs materials\r\n\t * to accommodate different primitive types, defines, etc. New materials will\r\n\t * be created if necessary, and reused from a cache.\r\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\r\n\t */\r\n\tassignFinalMaterial( mesh ) {\r\n\r\n\t\tconst geometry = mesh.geometry;\r\n\t\tlet material = mesh.material;\r\n\r\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\r\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\r\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\r\n\r\n\t\tif ( mesh.isPoints ) {\r\n\r\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\r\n\r\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\r\n\r\n\t\t\tif ( ! pointsMaterial ) {\r\n\r\n\t\t\t\tpointsMaterial = new PointsMaterial();\r\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\r\n\t\t\t\tpointsMaterial.color.copy( material.color );\r\n\t\t\t\tpointsMaterial.map = material.map;\r\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\r\n\r\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial = pointsMaterial;\r\n\r\n\t\t} else if ( mesh.isLine ) {\r\n\r\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\r\n\r\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\r\n\r\n\t\t\tif ( ! lineMaterial ) {\r\n\r\n\t\t\t\tlineMaterial = new LineBasicMaterial();\r\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\r\n\t\t\t\tlineMaterial.color.copy( material.color );\r\n\t\t\t\tlineMaterial.map = material.map;\r\n\r\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial = lineMaterial;\r\n\r\n\t\t}\r\n\r\n\t\t// Clone the material if it will be modified\r\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\r\n\r\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\r\n\r\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\r\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\r\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\r\n\r\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\r\n\r\n\t\t\tif ( ! cachedMaterial ) {\r\n\r\n\t\t\t\tcachedMaterial = material.clone();\r\n\r\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\r\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\r\n\r\n\t\t\t\tif ( useDerivativeTangents ) {\r\n\r\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\r\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\r\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\r\n\r\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial = cachedMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.material = material;\r\n\r\n\t}\r\n\r\n\tgetMaterialType( /* materialIndex */ ) {\r\n\r\n\t\treturn MeshStandardMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\r\n\t * @param {number} materialIndex\r\n\t * @return {Promise<Material>}\r\n\t */\r\n\tloadMaterial( materialIndex ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst json = this.json;\r\n\t\tconst extensions = this.extensions;\r\n\t\tconst materialDef = json.materials[ materialIndex ];\r\n\r\n\t\tlet materialType;\r\n\t\tconst materialParams = {};\r\n\t\tconst materialExtensions = materialDef.extensions || {};\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\r\n\r\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\r\n\t\t\tmaterialType = kmuExtension.getMaterialType();\r\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Specification:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\r\n\r\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\r\n\r\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\r\n\t\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\r\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\r\n\r\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\r\n\r\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\r\n\r\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\r\n\r\n\t\t\t} ) ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.doubleSided === true ) {\r\n\r\n\t\t\tmaterialParams.side = DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\r\n\r\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\r\n\r\n\t\t\tmaterialParams.transparent = true;\r\n\r\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\r\n\t\t\tmaterialParams.depthWrite = false;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterialParams.transparent = false;\r\n\r\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\r\n\r\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\r\n\r\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\r\n\r\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\r\n\r\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\r\n\r\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\r\n\r\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\r\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\tconst material = new materialType( materialParams );\r\n\r\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\r\n\r\n\t\t\tassignExtrasToUserData( material, materialDef );\r\n\r\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\r\n\r\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/** When Object3D instances are targeted by animation, they need unique names. */\r\n\tcreateUniqueName( originalName ) {\r\n\r\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\r\n\r\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\r\n\r\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\r\n\r\n\t\t\treturn sanitizedName;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\r\n\t *\r\n\t * Creates BufferGeometries from primitives.\r\n\t *\r\n\t * @param {Array<GLTF.Primitive>} primitives\r\n\t * @return {Promise<Array<BufferGeometry>>}\r\n\t */\r\n\tloadGeometries( primitives ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst extensions = this.extensions;\r\n\t\tconst cache = this.primitiveCache;\r\n\r\n\t\tfunction createDracoPrimitive( primitive ) {\r\n\r\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\r\n\t\t\t\t.decodePrimitive( primitive, parser )\r\n\t\t\t\t.then( function ( geometry ) {\r\n\r\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst primitive = primitives[ i ];\r\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\r\n\r\n\t\t\t// See if we've already created this geometry\r\n\t\t\tconst cached = cache[ cacheKey ];\r\n\r\n\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t// Use the cached geometry if it exists\r\n\t\t\t\tpending.push( cached.promise );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlet geometryPromise;\r\n\r\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\r\n\r\n\t\t\t\t\t// Use DRACO geometry if available\r\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Otherwise create a new geometry\r\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Cache this geometry\r\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\r\n\r\n\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\r\n\t * @param {number} meshIndex\r\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\r\n\t */\r\n\tloadMesh( meshIndex ) {\r\n\r\n\t\tconst parser = this;\r\n\t\tconst json = this.json;\r\n\t\tconst extensions = this.extensions;\r\n\r\n\t\tconst meshDef = json.meshes[ meshIndex ];\r\n\t\tconst primitives = meshDef.primitives;\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst material = primitives[ i ].material === undefined\r\n\t\t\t\t? createDefaultMaterial( this.cache )\r\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\r\n\r\n\t\t\tpending.push( material );\r\n\r\n\t\t}\r\n\r\n\t\tpending.push( parser.loadGeometries( primitives ) );\r\n\r\n\t\treturn Promise.all( pending ).then( function ( results ) {\r\n\r\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\r\n\t\t\tconst geometries = results[ results.length - 1 ];\r\n\r\n\t\t\tconst meshes = [];\r\n\r\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst geometry = geometries[ i ];\r\n\t\t\t\tconst primitive = primitives[ i ];\r\n\r\n\t\t\t\t// 1. create Mesh\r\n\r\n\t\t\t\tlet mesh;\r\n\r\n\t\t\t\tconst material = materials[ i ];\r\n\r\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\r\n\t\t\t\t\t\tprimitive.mode === undefined ) {\r\n\r\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\r\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\r\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\r\n\t\t\t\t\t\t: new Mesh( geometry, material );\r\n\r\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\r\n\r\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\r\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\r\n\r\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\r\n\r\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\r\n\r\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\r\n\r\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\r\n\r\n\t\t\t\t\tmesh = new Line( geometry, material );\r\n\r\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\r\n\r\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\r\n\r\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\r\n\r\n\t\t\t\t\tmesh = new Points( geometry, material );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\r\n\r\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\r\n\r\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\r\n\r\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\r\n\r\n\t\t\t\tparser.assignFinalMaterial( mesh );\r\n\r\n\t\t\t\tmeshes.push( mesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tparser.associations.set( meshes[ i ], {\r\n\t\t\t\t\tmeshes: meshIndex,\r\n\t\t\t\t\tprimitives: i\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meshes.length === 1 ) {\r\n\r\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\r\n\r\n\t\t\t\treturn meshes[ 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst group = new Group();\r\n\r\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\r\n\r\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\r\n\r\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgroup.add( meshes[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn group;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\r\n\t * @param {number} cameraIndex\r\n\t * @return {Promise<THREE.Camera>}\r\n\t */\r\n\tloadCamera( cameraIndex ) {\r\n\r\n\t\tlet camera;\r\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\r\n\t\tconst params = cameraDef[ cameraDef.type ];\r\n\r\n\t\tif ( ! params ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.type === 'perspective' ) {\r\n\r\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\r\n\r\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\r\n\r\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\r\n\r\n\t\tassignExtrasToUserData( camera, cameraDef );\r\n\r\n\t\treturn Promise.resolve( camera );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\r\n\t * @param {number} skinIndex\r\n\t * @return {Promise<Skeleton>}\r\n\t */\r\n\tloadSkin( skinIndex ) {\r\n\r\n\t\tconst skinDef = this.json.skins[ skinIndex ];\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\r\n\r\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\r\n\r\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpending.push( null );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function ( results ) {\r\n\r\n\t\t\tconst inverseBindMatrices = results.pop();\r\n\t\t\tconst jointNodes = results;\r\n\r\n\t\t\t// Note that bones (joint nodes) may or may not be in the\r\n\t\t\t// scene graph at this time.\r\n\r\n\t\t\tconst bones = [];\r\n\t\t\tconst boneInverses = [];\r\n\r\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst jointNode = jointNodes[ i ];\r\n\r\n\t\t\t\tif ( jointNode ) {\r\n\r\n\t\t\t\t\tbones.push( jointNode );\r\n\r\n\t\t\t\t\tconst mat = new Matrix4();\r\n\r\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\r\n\r\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tboneInverses.push( mat );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Skeleton( bones, boneInverses );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\r\n\t * @param {number} animationIndex\r\n\t * @return {Promise<AnimationClip>}\r\n\t */\r\n\tloadAnimation( animationIndex ) {\r\n\r\n\t\tconst json = this.json;\r\n\t\tconst parser = this;\r\n\r\n\t\tconst animationDef = json.animations[ animationIndex ];\r\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\r\n\r\n\t\tconst pendingNodes = [];\r\n\t\tconst pendingInputAccessors = [];\r\n\t\tconst pendingOutputAccessors = [];\r\n\t\tconst pendingSamplers = [];\r\n\t\tconst pendingTargets = [];\r\n\r\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst channel = animationDef.channels[ i ];\r\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\r\n\t\t\tconst target = channel.target;\r\n\t\t\tconst name = target.node;\r\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\r\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\r\n\r\n\t\t\tif ( target.node === undefined ) continue;\r\n\r\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\r\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\r\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\r\n\t\t\tpendingSamplers.push( sampler );\r\n\t\t\tpendingTargets.push( target );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( [\r\n\r\n\t\t\tPromise.all( pendingNodes ),\r\n\t\t\tPromise.all( pendingInputAccessors ),\r\n\t\t\tPromise.all( pendingOutputAccessors ),\r\n\t\t\tPromise.all( pendingSamplers ),\r\n\t\t\tPromise.all( pendingTargets )\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tconst nodes = dependencies[ 0 ];\r\n\t\t\tconst inputAccessors = dependencies[ 1 ];\r\n\t\t\tconst outputAccessors = dependencies[ 2 ];\r\n\t\t\tconst samplers = dependencies[ 3 ];\r\n\t\t\tconst targets = dependencies[ 4 ];\r\n\r\n\t\t\tconst tracks = [];\r\n\r\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst node = nodes[ i ];\r\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\r\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\r\n\t\t\t\tconst sampler = samplers[ i ];\r\n\t\t\t\tconst target = targets[ i ];\r\n\r\n\t\t\t\tif ( node === undefined ) continue;\r\n\r\n\t\t\t\tif ( node.updateMatrix ) {\r\n\r\n\t\t\t\t\tnode.updateMatrix();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\r\n\r\n\t\t\t\tif ( createdTracks ) {\r\n\r\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\r\n\r\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tcreateNodeMesh( nodeIndex ) {\r\n\r\n\t\tconst json = this.json;\r\n\t\tconst parser = this;\r\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\r\n\r\n\t\tif ( nodeDef.mesh === undefined ) return null;\r\n\r\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\r\n\r\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\r\n\r\n\t\t\t// if weights are provided on the node, override weights on the mesh.\r\n\t\t\tif ( nodeDef.weights !== undefined ) {\r\n\r\n\t\t\t\tnode.traverse( function ( o ) {\r\n\r\n\t\t\t\t\tif ( ! o.isMesh ) return;\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\r\n\t * @param {number} nodeIndex\r\n\t * @return {Promise<Object3D>}\r\n\t */\r\n\tloadNode( nodeIndex ) {\r\n\r\n\t\tconst json = this.json;\r\n\t\tconst parser = this;\r\n\r\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\r\n\r\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\r\n\r\n\t\tconst childPending = [];\r\n\t\tconst childrenDef = nodeDef.children || [];\r\n\r\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\r\n\r\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst skeletonPending = nodeDef.skin === undefined\r\n\t\t\t? Promise.resolve( null )\r\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\r\n\r\n\t\treturn Promise.all( [\r\n\t\t\tnodePending,\r\n\t\t\tPromise.all( childPending ),\r\n\t\t\tskeletonPending\r\n\t\t] ).then( function ( results ) {\r\n\r\n\t\t\tconst node = results[ 0 ];\r\n\t\t\tconst children = results[ 1 ];\r\n\t\t\tconst skeleton = results[ 2 ];\r\n\r\n\t\t\tif ( skeleton !== null ) {\r\n\r\n\t\t\t\t// This full traverse should be fine because\r\n\t\t\t\t// child glTF nodes have not been added to this node yet.\r\n\t\t\t\tnode.traverse( function ( mesh ) {\r\n\r\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\r\n\r\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnode.add( children[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t// ._loadNodeShallow() parses a single node.\r\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\r\n\t_loadNodeShallow( nodeIndex ) {\r\n\r\n\t\tconst json = this.json;\r\n\t\tconst extensions = this.extensions;\r\n\t\tconst parser = this;\r\n\r\n\t\t// This method is called from .loadNode() and .loadSkin().\r\n\t\t// Cache a node to avoid duplication.\r\n\r\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\r\n\r\n\t\t\treturn this.nodeCache[ nodeIndex ];\r\n\r\n\t\t}\r\n\r\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\r\n\r\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\r\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\r\n\r\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\r\n\r\n\t\t} );\r\n\r\n\t\tif ( meshPromise ) {\r\n\r\n\t\t\tpending.push( meshPromise );\r\n\r\n\t\t}\r\n\r\n\t\tif ( nodeDef.camera !== undefined ) {\r\n\r\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\r\n\r\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t}\r\n\r\n\t\tparser._invokeAll( function ( ext ) {\r\n\r\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\r\n\r\n\t\t} ).forEach( function ( promise ) {\r\n\r\n\t\t\tpending.push( promise );\r\n\r\n\t\t} );\r\n\r\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\r\n\r\n\t\t\tlet node;\r\n\r\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\r\n\t\t\tif ( nodeDef.isBone === true ) {\r\n\r\n\t\t\t\tnode = new Bone();\r\n\r\n\t\t\t} else if ( objects.length > 1 ) {\r\n\r\n\t\t\t\tnode = new Group();\r\n\r\n\t\t\t} else if ( objects.length === 1 ) {\r\n\r\n\t\t\t\tnode = objects[ 0 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnode = new Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( node !== objects[ 0 ] ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnode.add( objects[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.name ) {\r\n\r\n\t\t\t\tnode.userData.name = nodeDef.name;\r\n\t\t\t\tnode.name = nodeName;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tassignExtrasToUserData( node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.matrix !== undefined ) {\r\n\r\n\t\t\t\tconst matrix = new Matrix4();\r\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\r\n\t\t\t\tnode.applyMatrix4( matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\r\n\r\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! parser.associations.has( node ) ) {\r\n\r\n\t\t\t\tparser.associations.set( node, {} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t\treturn this.nodeCache[ nodeIndex ];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\r\n\t * @param {number} sceneIndex\r\n\t * @return {Promise<Group>}\r\n\t */\r\n\tloadScene( sceneIndex ) {\r\n\r\n\t\tconst extensions = this.extensions;\r\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\r\n\t\tconst parser = this;\r\n\r\n\t\t// Loader returns Group, not Scene.\r\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\r\n\t\tconst scene = new Group();\r\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\r\n\r\n\t\tassignExtrasToUserData( scene, sceneDef );\r\n\r\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\r\n\r\n\t\tconst nodeIds = sceneDef.nodes || [];\r\n\r\n\t\tconst pending = [];\r\n\r\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\r\n\r\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\r\n\r\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tscene.add( nodes[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Removes dangling associations, associations that reference a node that\r\n\t\t\t// didn't make it into the scene.\r\n\t\t\tconst reduceAssociations = ( node ) => {\r\n\r\n\t\t\t\tconst reducedAssociations = new Map();\r\n\r\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\r\n\r\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\r\n\r\n\t\t\t\t\t\treducedAssociations.set( key, value );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnode.traverse( ( node ) => {\r\n\r\n\t\t\t\t\tconst mappings = parser.associations.get( node );\r\n\r\n\t\t\t\t\tif ( mappings != null ) {\r\n\r\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\treturn reducedAssociations;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tparser.associations = reduceAssociations( scene );\r\n\r\n\t\t\treturn scene;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tconst targetName = node.name ? node.name : node.uuid;\r\n\t\tconst targetNames = [];\r\n\r\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\r\n\r\n\t\t\tnode.traverse( function ( object ) {\r\n\r\n\t\t\t\tif ( object.morphTargetInfluences ) {\r\n\r\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetNames.push( targetName );\r\n\r\n\t\t}\r\n\r\n\t\tlet TypedKeyframeTrack;\r\n\r\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\r\n\r\n\t\t\tcase PATH_PROPERTIES.weights:\r\n\r\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase PATH_PROPERTIES.rotation:\r\n\r\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase PATH_PROPERTIES.position:\r\n\t\t\tcase PATH_PROPERTIES.scale:\r\n\r\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\r\n\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\r\n\r\n\r\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\r\n\r\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\r\n\r\n\t\t\tconst track = new TypedKeyframeTrack(\r\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\r\n\t\t\t\tinputAccessor.array,\r\n\t\t\t\toutputArray,\r\n\t\t\t\tinterpolation\r\n\t\t\t);\r\n\r\n\t\t\t// Override interpolation with custom factory method.\r\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\r\n\r\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push( track );\r\n\r\n\t\t}\r\n\r\n\t\treturn tracks;\r\n\r\n\t}\r\n\r\n\t_getArrayFromAccessor( accessor ) {\r\n\r\n\t\tlet outputArray = accessor.array;\r\n\r\n\t\tif ( accessor.normalized ) {\r\n\r\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\r\n\t\t\tconst scaled = new Float32Array( outputArray.length );\r\n\r\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutputArray = scaled;\r\n\r\n\t\t}\r\n\r\n\t\treturn outputArray;\r\n\r\n\t}\r\n\r\n\t_createCubicSplineTrackInterpolant( track ) {\r\n\r\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\r\n\r\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\r\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\r\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\r\n\r\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\r\n\r\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\r\n\r\n\t\t};\r\n\r\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\r\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @param {BufferGeometry} geometry\r\n * @param {GLTF.Primitive} primitiveDef\r\n * @param {GLTFParser} parser\r\n */\r\nfunction computeBounds( geometry, primitiveDef, parser ) {\r\n\r\n\tconst attributes = primitiveDef.attributes;\r\n\r\n\tconst box = new Box3();\r\n\r\n\tif ( attributes.POSITION !== undefined ) {\r\n\r\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\r\n\r\n\t\tconst min = accessor.min;\r\n\t\tconst max = accessor.max;\r\n\r\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\r\n\r\n\t\tif ( min !== undefined && max !== undefined ) {\r\n\r\n\t\t\tbox.set(\r\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\r\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\r\n\t\t\t);\r\n\r\n\t\t\tif ( accessor.normalized ) {\r\n\r\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\r\n\t\t\t\tbox.min.multiplyScalar( boxScale );\r\n\t\t\t\tbox.max.multiplyScalar( boxScale );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tconst targets = primitiveDef.targets;\r\n\r\n\tif ( targets !== undefined ) {\r\n\r\n\t\tconst maxDisplacement = new Vector3();\r\n\t\tconst vector = new Vector3();\r\n\r\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst target = targets[ i ];\r\n\r\n\t\t\tif ( target.POSITION !== undefined ) {\r\n\r\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\r\n\t\t\t\tconst min = accessor.min;\r\n\t\t\t\tconst max = accessor.max;\r\n\r\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\r\n\r\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\r\n\r\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\r\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\r\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\r\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\r\n\r\n\r\n\t\t\t\t\tif ( accessor.normalized ) {\r\n\r\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\r\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\r\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\r\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\r\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\r\n\t\t\t\t\tmaxDisplacement.max( vector );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\r\n\t\tbox.expandByVector( maxDisplacement );\r\n\r\n\t}\r\n\r\n\tgeometry.boundingBox = box;\r\n\r\n\tconst sphere = new Sphere();\r\n\r\n\tbox.getCenter( sphere.center );\r\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\r\n\r\n\tgeometry.boundingSphere = sphere;\r\n\r\n}\r\n\r\n/**\r\n * @param {BufferGeometry} geometry\r\n * @param {GLTF.Primitive} primitiveDef\r\n * @param {GLTFParser} parser\r\n * @return {Promise<BufferGeometry>}\r\n */\r\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\r\n\r\n\tconst attributes = primitiveDef.attributes;\r\n\r\n\tconst pending = [];\r\n\r\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\r\n\r\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\r\n\t\t\t.then( function ( accessor ) {\r\n\r\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\r\n\r\n\t\t\t} );\r\n\r\n\t}\r\n\r\n\tfor ( const gltfAttributeName in attributes ) {\r\n\r\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\r\n\r\n\t\t// Skip attributes already provided by e.g. Draco extension.\r\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\r\n\r\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\r\n\r\n\t}\r\n\r\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\r\n\r\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\r\n\r\n\t\t\tgeometry.setIndex( accessor );\r\n\r\n\t\t} );\r\n\r\n\t\tpending.push( accessor );\r\n\r\n\t}\r\n\r\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\r\n\r\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\r\n\r\n\t}\r\n\r\n\tassignExtrasToUserData( geometry, primitiveDef );\r\n\r\n\tcomputeBounds( geometry, primitiveDef, parser );\r\n\r\n\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\treturn primitiveDef.targets !== undefined\r\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\r\n\t\t\t: geometry;\r\n\r\n\t} );\r\n\r\n}\r\n\r\nexport { GLTFLoader };\r\n","import {\r\n\tBufferAttribute,\r\n\tBufferGeometry,\r\n\tColor,\r\n\tColorManagement,\r\n\tFileLoader,\r\n\tLoader,\r\n\tLinearSRGBColorSpace,\r\n\tSRGBColorSpace\r\n} from './three.module.min.js';\r\n\r\nconst _taskCache = new WeakMap();\r\n\r\nclass DRACOLoader extends Loader {\r\n\r\n\tconstructor( manager ) {\r\n\r\n\t\tsuper( manager );\r\n\r\n\t\tthis.decoderPath = '';\r\n\t\tthis.decoderConfig = {};\r\n\t\tthis.decoderBinary = null;\r\n\t\tthis.decoderPending = null;\r\n\r\n\t\tthis.workerLimit = 4;\r\n\t\tthis.workerPool = [];\r\n\t\tthis.workerNextTaskID = 1;\r\n\t\tthis.workerSourceURL = '';\r\n\r\n\t\tthis.defaultAttributeIDs = {\r\n\t\t\tposition: 'POSITION',\r\n\t\t\tnormal: 'NORMAL',\r\n\t\t\tcolor: 'COLOR',\r\n\t\t\tuv: 'TEX_COORD'\r\n\t\t};\r\n\t\tthis.defaultAttributeTypes = {\r\n\t\t\tposition: 'Float32Array',\r\n\t\t\tnormal: 'Float32Array',\r\n\t\t\tcolor: 'Float32Array',\r\n\t\t\tuv: 'Float32Array'\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tsetDecoderPath( path ) {\r\n\r\n\t\tthis.decoderPath = path;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetDecoderConfig( config ) {\r\n\r\n\t\tthis.decoderConfig = config;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetWorkerLimit( workerLimit ) {\r\n\r\n\t\tthis.workerLimit = workerLimit;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tload( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\r\n\t\tloader.load( url, ( buffer ) => {\r\n\r\n\t\t\tthis.parse( buffer, onLoad, onError );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n\r\n\tparse( buffer, onLoad, onError = ()=>{} ) {\r\n\r\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace, onError ).catch( onError );\r\n\r\n\t}\r\n\r\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace, onError = () => {} ) {\r\n\r\n\t\tconst taskConfig = {\r\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\r\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\r\n\t\t\tuseUniqueIDs: !! attributeIDs,\r\n\t\t\tvertexColorSpace: vertexColorSpace,\r\n\t\t};\r\n\r\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback ).catch( onError );\r\n\r\n\t}\r\n\r\n\tdecodeGeometry( buffer, taskConfig ) {\r\n\r\n\t\tconst taskKey = JSON.stringify( taskConfig );\r\n\r\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\r\n\t\t// again from this thread.\r\n\t\tif ( _taskCache.has( buffer ) ) {\r\n\r\n\t\t\tconst cachedTask = _taskCache.get( buffer );\r\n\r\n\t\t\tif ( cachedTask.key === taskKey ) {\r\n\r\n\t\t\t\treturn cachedTask.promise;\r\n\r\n\t\t\t} else if ( buffer.byteLength === 0 ) {\r\n\r\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\r\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\r\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\r\n\t\t\t\t// different ways, so this is left unimplemented.\r\n\t\t\t\tthrow new Error(\r\n\r\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\r\n\t\t\t\t\t'settings. Buffer has already been transferred.'\r\n\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet worker;\r\n\t\tconst taskID = this.workerNextTaskID ++;\r\n\t\tconst taskCost = buffer.byteLength;\r\n\r\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\r\n\t\t// when the task completes.\r\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\r\n\t\t\t.then( ( _worker ) => {\r\n\r\n\t\t\t\tworker = _worker;\r\n\r\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\r\n\r\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\r\n\r\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\r\n\r\n\t\t\t\t\t// this.debug();\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} )\r\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\r\n\r\n\t\t// Remove task from the task list.\r\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\r\n\t\tgeometryPending\r\n\t\t\t.catch( () => true )\r\n\t\t\t.then( () => {\r\n\r\n\t\t\t\tif ( worker && taskID ) {\r\n\r\n\t\t\t\t\tthis._releaseTask( worker, taskID );\r\n\r\n\t\t\t\t\t// this.debug();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t// Cache the task result.\r\n\t\t_taskCache.set( buffer, {\r\n\r\n\t\t\tkey: taskKey,\r\n\t\t\tpromise: geometryPending\r\n\r\n\t\t} );\r\n\r\n\t\treturn geometryPending;\r\n\r\n\t}\r\n\r\n\t_createGeometry( geometryData ) {\r\n\r\n\t\tconst geometry = new BufferGeometry();\r\n\r\n\t\tif ( geometryData.index ) {\r\n\r\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\r\n\r\n\t\t\tconst result = geometryData.attributes[ i ];\r\n\t\t\tconst name = result.name;\r\n\t\t\tconst array = result.array;\r\n\t\t\tconst itemSize = result.itemSize;\r\n\r\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\r\n\r\n\t\t\tif ( name === 'color' ) {\r\n\r\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\r\n\r\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.setAttribute( name, attribute );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\r\n\r\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\r\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\r\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\r\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\r\n\r\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\r\n\r\n\t\tconst _color = new Color();\r\n\r\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\r\n\r\n\t\t\t_color.fromBufferAttribute( attribute, i );\r\n\t\t\tColorManagement.toWorkingColorSpace( _color, SRGBColorSpace );\r\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t_loadLibrary( url, responseType ) {\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.decoderPath );\r\n\t\tloader.setResponseType( responseType );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\r\n\t\treturn new Promise( ( resolve, reject ) => {\r\n\r\n\t\t\tloader.load( url, resolve, undefined, reject );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tpreload() {\r\n\r\n\t\tthis._initDecoder();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t_initDecoder() {\r\n\r\n\t\tif ( this.decoderPending ) return this.decoderPending;\r\n\r\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\r\n\t\tconst librariesPending = [];\r\n\r\n\t\tif ( useJS ) {\r\n\r\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\r\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\r\n\r\n\t\t}\r\n\r\n\t\tthis.decoderPending = Promise.all( librariesPending )\r\n\t\t\t.then( ( libraries ) => {\r\n\r\n\t\t\t\tconst jsContent = libraries[ 0 ];\r\n\r\n\t\t\t\tif ( ! useJS ) {\r\n\r\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst fn = DRACOWorker.toString();\r\n\r\n\t\t\t\tconst body = [\r\n\t\t\t\t\t'/* draco decoder */',\r\n\t\t\t\t\tjsContent,\r\n\t\t\t\t\t'',\r\n\t\t\t\t\t'/* worker */',\r\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\treturn this.decoderPending;\r\n\r\n\t}\r\n\r\n\t_getWorker( taskID, taskCost ) {\r\n\r\n\t\treturn this._initDecoder().then( () => {\r\n\r\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\r\n\r\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\r\n\r\n\t\t\t\tworker._callbacks = {};\r\n\t\t\t\tworker._taskCosts = {};\r\n\t\t\t\tworker._taskLoad = 0;\r\n\r\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\r\n\r\n\t\t\t\tworker.onmessage = function ( e ) {\r\n\r\n\t\t\t\t\tconst message = e.data;\r\n\r\n\t\t\t\t\tswitch ( message.type ) {\r\n\r\n\t\t\t\t\t\tcase 'decode':\r\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'error':\r\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.workerPool.push( worker );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\r\n\r\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\r\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\r\n\t\t\tworker._taskLoad += taskCost;\r\n\t\t\treturn worker;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t_releaseTask( worker, taskID ) {\r\n\r\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\r\n\t\tdelete worker._callbacks[ taskID ];\r\n\t\tdelete worker._taskCosts[ taskID ];\r\n\r\n\t}\r\n\r\n\tdebug() {\r\n\r\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\r\n\r\n\t\t\tthis.workerPool[ i ].terminate();\r\n\r\n\t\t}\r\n\r\n\t\tthis.workerPool.length = 0;\r\n\r\n\t\tif ( this.workerSourceURL !== '' ) {\r\n\r\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/* WEB WORKER */\r\n\r\nfunction DRACOWorker() {\r\n\r\n\tlet decoderConfig;\r\n\tlet decoderPending;\r\n\r\n\tonmessage = function ( e ) {\r\n\r\n\t\tconst message = e.data;\r\n\r\n\t\tswitch ( message.type ) {\r\n\r\n\t\t\tcase 'init':\r\n\t\t\t\tdecoderConfig = message.decoderConfig;\r\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\r\n\r\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\r\n\r\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\r\n\t\t\t\t\t\tresolve( { draco: draco } );\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'decode':\r\n\t\t\t\tconst buffer = message.buffer;\r\n\t\t\t\tconst taskConfig = message.taskConfig;\r\n\t\t\t\tdecoderPending.then( ( module ) => {\r\n\r\n\t\t\t\t\tconst draco = module.draco;\r\n\t\t\t\t\tconst decoder = new draco.Decoder();\r\n\r\n\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\r\n\r\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\r\n\r\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\r\n\r\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers ); // eslint-disable-line no-restricted-globals\r\n\r\n\t\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\t\tconsole.error( error );\r\n\r\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } ); // eslint-disable-line no-restricted-globals\r\n\r\n\t\t\t\t\t} finally {\r\n\r\n\t\t\t\t\t\tdraco.destroy( decoder );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\r\n\r\n\t\tconst attributeIDs = taskConfig.attributeIDs;\r\n\t\tconst attributeTypes = taskConfig.attributeTypes;\r\n\r\n\t\tlet dracoGeometry;\r\n\t\tlet decodingStatus;\r\n\r\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\r\n\r\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\r\n\r\n\t\t\tdracoGeometry = new draco.Mesh();\r\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\r\n\r\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\r\n\r\n\t\t\tdracoGeometry = new draco.PointCloud();\r\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry = { index: null, attributes: [] };\r\n\r\n\t\t// Gather all vertex attributes.\r\n\t\tfor ( const attributeName in attributeIDs ) {\r\n\r\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ]; // eslint-disable-line no-restricted-globals\r\n\r\n\t\t\tlet attribute;\r\n\t\t\tlet attributeID;\r\n\r\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\r\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\r\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\r\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\r\n\t\t\tif ( taskConfig.useUniqueIDs ) {\r\n\r\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\r\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\r\n\r\n\t\t\t\tif ( attributeID === - 1 ) continue;\r\n\r\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\r\n\r\n\t\t\tif ( attributeName === 'color' ) {\r\n\r\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.attributes.push( attributeResult );\r\n\r\n\t\t}\r\n\r\n\t\t// Add index.\r\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\r\n\r\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\r\n\r\n\t\t}\r\n\r\n\t\tdraco.destroy( dracoGeometry );\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\r\n\r\n\t\tconst numFaces = dracoGeometry.num_faces();\r\n\t\tconst numIndices = numFaces * 3;\r\n\t\tconst byteLength = numIndices * 4;\r\n\r\n\t\tconst ptr = draco._malloc( byteLength );\r\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\r\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\r\n\t\tdraco._free( ptr );\r\n\r\n\t\treturn { array: index, itemSize: 1 };\r\n\r\n\t}\r\n\r\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\r\n\r\n\t\tconst numComponents = attribute.num_components();\r\n\t\tconst numPoints = dracoGeometry.num_points();\r\n\t\tconst numValues = numPoints * numComponents;\r\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\r\n\t\tconst dataType = getDracoDataType( draco, attributeType );\r\n\r\n\t\tconst ptr = draco._malloc( byteLength );\r\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\r\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\r\n\t\tdraco._free( ptr );\r\n\r\n\t\treturn {\r\n\t\t\tname: attributeName,\r\n\t\t\tarray: array,\r\n\t\t\titemSize: numComponents\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction getDracoDataType( draco, attributeType ) {\r\n\r\n\t\tswitch ( attributeType ) {\r\n\r\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\r\n\t\t\tcase Int8Array: return draco.DT_INT8;\r\n\t\t\tcase Int16Array: return draco.DT_INT16;\r\n\t\t\tcase Int32Array: return draco.DT_INT32;\r\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\r\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\r\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { DRACOLoader };\r\n","/**\r\n * @author Deepkolos / https://github.com/deepkolos\r\n */\r\n\r\nexport class WorkerPool {\r\n\r\n\tconstructor( pool = 4 ) {\r\n\r\n\t\tthis.pool = pool;\r\n\t\tthis.queue = [];\r\n\t\tthis.workers = [];\r\n\t\tthis.workersResolve = [];\r\n\t\tthis.workerStatus = 0;\r\n\r\n\t}\r\n\r\n\t_initWorker( workerId ) {\r\n\r\n\t\tif ( ! this.workers[ workerId ] ) {\r\n\r\n\t\t\tconst worker = this.workerCreator();\r\n\t\t\tworker.addEventListener( 'message', this._onMessage.bind( this, workerId ) );\r\n\t\t\tthis.workers[ workerId ] = worker;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t_getIdleWorker() {\r\n\r\n\t\tfor ( let i = 0; i < this.pool; i ++ )\r\n\t\t\tif ( ! ( this.workerStatus & ( 1 << i ) ) ) return i;\r\n\r\n\t\treturn - 1;\r\n\r\n\t}\r\n\r\n\t_onMessage( workerId, msg ) {\r\n\r\n\t\tconst resolve = this.workersResolve[ workerId ];\r\n\t\tresolve && resolve( msg );\r\n\r\n\t\tif ( this.queue.length ) {\r\n\r\n\t\t\tconst { resolve, msg, transfer } = this.queue.shift();\r\n\t\t\tthis.workersResolve[ workerId ] = resolve;\r\n\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.workerStatus ^= 1 << workerId;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetWorkerCreator( workerCreator ) {\r\n\r\n\t\tthis.workerCreator = workerCreator;\r\n\r\n\t}\r\n\r\n\tsetWorkerLimit( pool ) {\r\n\r\n\t\tthis.pool = pool;\r\n\r\n\t}\r\n\r\n\tpostMessage( msg, transfer ) {\r\n\r\n\t\treturn new Promise( ( resolve ) => {\r\n\r\n\t\t\tconst workerId = this._getIdleWorker();\r\n\r\n\t\t\tif ( workerId !== - 1 ) {\r\n\r\n\t\t\t\tthis._initWorker( workerId );\r\n\t\t\t\tthis.workerStatus |= 1 << workerId;\r\n\t\t\t\tthis.workersResolve[ workerId ] = resolve;\r\n\t\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.queue.push( { resolve, msg, transfer } );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.workers.forEach( ( worker ) => worker.terminate() );\r\n\t\tthis.workersResolve.length = 0;\r\n\t\tthis.workers.length = 0;\r\n\t\tthis.queue.length = 0;\r\n\t\tthis.workerStatus = 0;\r\n\r\n\t}\r\n\r\n}\r\n","const t=0,e=1,n=2,i=3,s=0,a=0,r=2,o=0,l=1,f=160,h=161,U=162,c=163,_=166,p=0,g=1,y=0,x=1,u=2,b=3,d=4,w=5,m=6,D=7,B=8,L=9,v=10,A=11,k=12,V=13,I=14,S=15,F=16,O=17,E=18,T=0,C=1,M=2,P=3,z=4,W=5,H=6,N=7,K=8,X=9,R=10,Y=11,j=0,q=1,G=2,J=13,Q=14,Z=15,$=128,tt=64,et=32,nt=16,it=0,st=1,at=2,rt=3,ot=4,lt=5,ft=6,ht=7,Ut=8,ct=9,_t=10,pt=13,gt=14,yt=15,xt=16,ut=17,bt=20,dt=21,wt=22,mt=23,Dt=24,Bt=27,Lt=28,vt=29,At=30,kt=31,Vt=34,It=35,St=36,Ft=37,Ot=38,Et=41,Tt=42,Ct=43,Mt=44,Pt=45,zt=48,Wt=49,Ht=50,Nt=58,Kt=59,Xt=62,Rt=63,Yt=64,jt=65,qt=68,Gt=69,Jt=70,Qt=71,Zt=74,$t=75,te=76,ee=77,ne=78,ie=81,se=82,ae=83,re=84,oe=85,le=88,fe=89,he=90,Ue=91,ce=92,_e=95,pe=96,ge=97,ye=98,xe=99,ue=100,be=101,de=102,we=103,me=104,De=105,Be=106,Le=107,ve=108,Ae=109,ke=110,Ve=111,Ie=112,Se=113,Fe=114,Oe=115,Ee=116,Te=117,Ce=118,Me=119,Pe=120,ze=121,We=122,He=123,Ne=124,Ke=125,Xe=126,Re=127,Ye=128,je=129,qe=130,Ge=131,Je=132,Qe=133,Ze=134,$e=135,tn=136,en=137,nn=138,sn=139,an=140,rn=141,on=142,ln=143,fn=144,hn=145,Un=146,cn=147,_n=148,pn=149,gn=150,yn=151,xn=152,un=153,bn=154,dn=155,wn=156,mn=157,Dn=158,Bn=159,Ln=160,vn=161,An=162,kn=163,Vn=164,In=165,Sn=166,Fn=167,On=168,En=169,Tn=170,Cn=171,Mn=172,Pn=173,zn=174,Wn=175,Hn=176,Nn=177,Kn=178,Xn=179,Rn=180,Yn=181,jn=182,qn=183,Gn=184,Jn=1000156007,Qn=1000156008,Zn=1000156009,$n=1000156010,ti=1000156011,ei=1000156017,ni=1000156018,ii=1000156019,si=1000156020,ai=1000156021,ri=1000054e3,oi=1000054001,li=1000054002,fi=1000054003,hi=1000054004,Ui=1000054005,ci=1000054006,_i=1000054007,pi=1000066e3,gi=1000066001,yi=1000066002,xi=1000066003,ui=1000066004,bi=1000066005,di=1000066006,wi=1000066007,mi=1000066008,Di=1000066009,Bi=1000066010,Li=1000066011,vi=1000066012,Ai=1000066013,ki=100034e4,Vi=1000340001;class Ii{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Si{constructor(t,e,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e){void 0===e&&(e=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}const Fi=new Uint8Array([0]),Oi=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(t){return(new TextEncoder).encode(t)}function Ti(t){return(new TextDecoder).decode(t)}function Ci(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n}function Mi(t,e){return void 0===e&&(e=4),Math.ceil(t/e)*e-t}function Pi(t){const e=new Uint8Array(t.buffer,t.byteOffset,Oi.length);if(e[0]!==Oi[0]||e[1]!==Oi[1]||e[2]!==Oi[2]||e[3]!==Oi[3]||e[4]!==Oi[4]||e[5]!==Oi[5]||e[6]!==Oi[6]||e[7]!==Oi[7]||e[8]!==Oi[8]||e[9]!==Oi[9]||e[10]!==Oi[10]||e[11]!==Oi[11])throw new Error(\"Missing KTX 2.0 identifier.\");const n=new Ii,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Si(t,Oi.length,i,!0);n.vkFormat=s._nextUint32(),n.typeSize=s._nextUint32(),n.pixelWidth=s._nextUint32(),n.pixelHeight=s._nextUint32(),n.pixelDepth=s._nextUint32(),n.layerCount=s._nextUint32(),n.faceCount=s._nextUint32();const a=s._nextUint32();n.supercompressionScheme=s._nextUint32();const r=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),f=s._nextUint32(),h=s._nextUint64(),U=s._nextUint64(),c=new Si(t,Oi.length+i,3*a*8,!0);for(let e=0;e<a;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+c._nextUint64(),c._nextUint64()),uncompressedByteLength:c._nextUint64()});const _=new Si(t,r,o,!0),p={vendorId:_._skip(4)._nextUint16(),descriptorType:_._nextUint16(),versionNumber:_._nextUint16(),descriptorBlockSize:_._nextUint16(),colorModel:_._nextUint8(),colorPrimaries:_._nextUint8(),transferFunction:_._nextUint8(),flags:_._nextUint8(),texelBlockDimension:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],bytesPlane:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],samples:[]},g=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<g;t++){const e={bitOffset:_._nextUint16(),bitLength:_._nextUint8(),channelType:_._nextUint8(),samplePosition:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],sampleLower:-Infinity,sampleUpper:Infinity};64&e.channelType?(e.sampleLower=_._nextInt32(),e.sampleUpper=_._nextInt32()):(e.sampleLower=_._nextUint32(),e.sampleUpper=_._nextUint32()),p.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const y=new Si(t,l,f,!0);for(;y._offset<f;){const t=y._nextUint32(),e=y._scan(t),i=Ti(e);if(n.keyValue[i]=y._nextUint8Array(t-e.byteLength-1),i.match(/^ktx/i)){const t=Ti(n.keyValue[i]);n.keyValue[i]=t.substring(0,t.lastIndexOf(\"\\0\"))}y._skip(t%4?4-t%4:0)}if(U<=0)return n;const x=new Si(t,h,U,!0),u=x._nextUint16(),b=x._nextUint16(),d=x._nextUint32(),w=x._nextUint32(),m=x._nextUint32(),D=x._nextUint32(),B=[];for(let t=0;t<a;t++)B.push({imageFlags:x._nextUint32(),rgbSliceByteOffset:x._nextUint32(),rgbSliceByteLength:x._nextUint32(),alphaSliceByteOffset:x._nextUint32(),alphaSliceByteLength:x._nextUint32()});const L=h+x._offset,v=L+d,A=v+w,k=A+m,V=new Uint8Array(t.buffer,t.byteOffset+L,d),I=new Uint8Array(t.buffer,t.byteOffset+v,w),S=new Uint8Array(t.buffer,t.byteOffset+A,m),F=new Uint8Array(t.buffer,t.byteOffset+k,D);return n.globalData={endpointCount:u,selectorCount:b,imageDescs:B,endpointsData:V,selectorsData:I,tablesData:S,extendedData:F},n}const zi={keepWriter:!1};function Wi(t,e){void 0===e&&(e={}),e={...zi,...e};let n=new ArrayBuffer(0);if(t.globalData){const e=new ArrayBuffer(20+5*t.globalData.imageDescs.length*4),i=new DataView(e);i.setUint16(0,t.globalData.endpointCount,!0),i.setUint16(2,t.globalData.selectorCount,!0),i.setUint32(4,t.globalData.endpointsData.byteLength,!0),i.setUint32(8,t.globalData.selectorsData.byteLength,!0),i.setUint32(12,t.globalData.tablesData.byteLength,!0),i.setUint32(16,t.globalData.extendedData.byteLength,!0);for(let e=0;e<t.globalData.imageDescs.length;e++){const n=t.globalData.imageDescs[e];i.setUint32(20+5*e*4+0,n.imageFlags,!0),i.setUint32(20+5*e*4+4,n.rgbSliceByteOffset,!0),i.setUint32(20+5*e*4+8,n.rgbSliceByteLength,!0),i.setUint32(20+5*e*4+12,n.alphaSliceByteOffset,!0),i.setUint32(20+5*e*4+16,n.alphaSliceByteLength,!0)}n=Ci([e,t.globalData.endpointsData,t.globalData.selectorsData,t.globalData.tablesData,t.globalData.extendedData])}const i=[];let s=t.keyValue;e.keepWriter||(s={...t.keyValue,KTXwriter:\"KTX-Parse v0.7.1\"});for(const t in s){const e=s[t],n=Ei(t),a=\"string\"==typeof e?Ci([Ei(e),Fi]):e,r=n.byteLength+1+a.byteLength,o=Mi(r,4);i.push(Ci([new Uint32Array([r]),n,Fi,a,new Uint8Array(o).fill(0)]))}const a=Ci(i);if(1!==t.dataFormatDescriptor.length||0!==t.dataFormatDescriptor[0].descriptorType)throw new Error(\"Only BASICFORMAT Data Format Descriptor output supported.\");const r=t.dataFormatDescriptor[0],o=new ArrayBuffer(28+16*r.samples.length),l=new DataView(o),f=24+16*r.samples.length;if(l.setUint32(0,o.byteLength,!0),l.setUint16(4,r.vendorId,!0),l.setUint16(6,r.descriptorType,!0),l.setUint16(8,r.versionNumber,!0),l.setUint16(10,f,!0),l.setUint8(12,r.colorModel),l.setUint8(13,r.colorPrimaries),l.setUint8(14,r.transferFunction),l.setUint8(15,r.flags),!Array.isArray(r.texelBlockDimension))throw new Error(\"texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.\");l.setUint8(16,r.texelBlockDimension[0]),l.setUint8(17,r.texelBlockDimension[1]),l.setUint8(18,r.texelBlockDimension[2]),l.setUint8(19,r.texelBlockDimension[3]);for(let t=0;t<8;t++)l.setUint8(20+t,r.bytesPlane[t]);for(let t=0;t<r.samples.length;t++){const e=r.samples[t],n=28+16*t;if(e.channelID)throw new Error(\"channelID has been renamed to channelType.\");l.setUint16(n+0,e.bitOffset,!0),l.setUint8(n+2,e.bitLength),l.setUint8(n+3,e.channelType),l.setUint8(n+4,e.samplePosition[0]),l.setUint8(n+5,e.samplePosition[1]),l.setUint8(n+6,e.samplePosition[2]),l.setUint8(n+7,e.samplePosition[3]),64&e.channelType?(l.setInt32(n+8,e.sampleLower,!0),l.setInt32(n+12,e.sampleUpper,!0)):(l.setUint32(n+8,e.sampleLower,!0),l.setUint32(n+12,e.sampleUpper,!0))}const h=Oi.length+68+3*t.levels.length*8,U=h+o.byteLength;let c=n.byteLength>0?U+a.byteLength:0;c%8&&(c+=8-c%8);const _=[],p=new DataView(new ArrayBuffer(3*t.levels.length*8)),g=new Uint32Array(t.levels.length);let y=0;0===t.supercompressionScheme&&(y=function(t,e){const n=Math.max(t,4),i=Math.min(t,4);let s=n;for(;s%i!=0;)s+=n;return s}(function(t){return t.levels[0].levelData.byteLength/function(t,e){let n=1;const i=[t.pixelWidth,t.pixelHeight,t.pixelDepth],s=function(t){const[e,n,i]=t.dataFormatDescriptor[0].texelBlockDimension;return[e+1,n+1,i+1]}(t);for(let t=0;t<3;t++)if(i[t]>0){const e=Math.ceil(Math.floor(i[t]*Math.pow(2,-0))/s[t]);n*=Math.max(1,e)}return t.layerCount>0&&(n*=t.layerCount),t.faceCount>0&&(n*=t.faceCount),n}(t)}(t)));let x=(c||U+a.byteLength)+n.byteLength;for(let e=t.levels.length-1;e>=0;e--){if(x%y){const t=Mi(x,y);_.push(new Uint8Array(t)),x+=t}const n=t.levels[e];_.push(n.levelData),g[e]=x,x+=n.levelData.byteLength}for(let e=0;e<t.levels.length;e++){const n=t.levels[e];p.setBigUint64(24*e+0,BigInt(g[e]),!0),p.setBigUint64(24*e+8,BigInt(n.levelData.byteLength),!0),p.setBigUint64(24*e+16,BigInt(n.uncompressedByteLength),!0)}const u=new ArrayBuffer(68),b=new DataView(u);return b.setUint32(0,t.vkFormat,!0),b.setUint32(4,t.typeSize,!0),b.setUint32(8,t.pixelWidth,!0),b.setUint32(12,t.pixelHeight,!0),b.setUint32(16,t.pixelDepth,!0),b.setUint32(20,t.layerCount,!0),b.setUint32(24,t.faceCount,!0),b.setUint32(28,t.levels.length,!0),b.setUint32(32,t.supercompressionScheme,!0),b.setUint32(36,h,!0),b.setUint32(40,o.byteLength,!0),b.setUint32(44,U,!0),b.setUint32(48,a.byteLength,!0),b.setBigUint64(52,BigInt(n.byteLength>0?c:0),!0),b.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(Ci([new Uint8Array(Oi).buffer,u,p.buffer,o,a,c>0?new ArrayBuffer(c-(U+a.byteLength)):new ArrayBuffer(0),n,..._]))}export{Z as KHR_DF_CHANNEL_RGBSDA_ALPHA,G as KHR_DF_CHANNEL_RGBSDA_BLUE,Q as KHR_DF_CHANNEL_RGBSDA_DEPTH,q as KHR_DF_CHANNEL_RGBSDA_GREEN,j as KHR_DF_CHANNEL_RGBSDA_RED,J as KHR_DF_CHANNEL_RGBSDA_STENCIL,g as KHR_DF_FLAG_ALPHA_PREMULTIPLIED,p as KHR_DF_FLAG_ALPHA_STRAIGHT,s as KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,U as KHR_DF_MODEL_ASTC,f as KHR_DF_MODEL_ETC1,c as KHR_DF_MODEL_ETC1S,h as KHR_DF_MODEL_ETC2,l as KHR_DF_MODEL_RGBSDA,_ as KHR_DF_MODEL_UASTC,o as KHR_DF_MODEL_UNSPECIFIED,H as KHR_DF_PRIMARIES_ACES,N as KHR_DF_PRIMARIES_ACESCC,Y as KHR_DF_PRIMARIES_ADOBERGB,z as KHR_DF_PRIMARIES_BT2020,M as KHR_DF_PRIMARIES_BT601_EBU,P as KHR_DF_PRIMARIES_BT601_SMPTE,C as KHR_DF_PRIMARIES_BT709,W as KHR_DF_PRIMARIES_CIEXYZ,R as KHR_DF_PRIMARIES_DISPLAYP3,K as KHR_DF_PRIMARIES_NTSC1953,X as KHR_DF_PRIMARIES_PAL525,T as KHR_DF_PRIMARIES_UNSPECIFIED,et as KHR_DF_SAMPLE_DATATYPE_EXPONENT,$ as KHR_DF_SAMPLE_DATATYPE_FLOAT,nt as KHR_DF_SAMPLE_DATATYPE_LINEAR,tt as KHR_DF_SAMPLE_DATATYPE_SIGNED,F as KHR_DF_TRANSFER_ACESCC,O as KHR_DF_TRANSFER_ACESCCT,E as KHR_DF_TRANSFER_ADOBERGB,D as KHR_DF_TRANSFER_BT1886,k as KHR_DF_TRANSFER_DCIP3,L as KHR_DF_TRANSFER_HLG_EOTF,B as KHR_DF_TRANSFER_HLG_OETF,b as KHR_DF_TRANSFER_ITU,x as KHR_DF_TRANSFER_LINEAR,d as KHR_DF_TRANSFER_NTSC,I as KHR_DF_TRANSFER_PAL625_EOTF,V as KHR_DF_TRANSFER_PAL_OETF,v as KHR_DF_TRANSFER_PQ_EOTF,A as KHR_DF_TRANSFER_PQ_OETF,w as KHR_DF_TRANSFER_SLOG,m as KHR_DF_TRANSFER_SLOG2,u as KHR_DF_TRANSFER_SRGB,S as KHR_DF_TRANSFER_ST240,y as KHR_DF_TRANSFER_UNSPECIFIED,a as KHR_DF_VENDORID_KHRONOS,r as KHR_DF_VERSION,e as KHR_SUPERCOMPRESSION_BASISLZ,t as KHR_SUPERCOMPRESSION_NONE,i as KHR_SUPERCOMPRESSION_ZLIB,n as KHR_SUPERCOMPRESSION_ZSTD,Ii as KTX2Container,Ut as VK_FORMAT_A1R5G5B5_UNORM_PACK16,Gt as VK_FORMAT_A2B10G10R10_SINT_PACK32,jt as VK_FORMAT_A2B10G10R10_SNORM_PACK32,qt as VK_FORMAT_A2B10G10R10_UINT_PACK32,Yt as VK_FORMAT_A2B10G10R10_UNORM_PACK32,Rt as VK_FORMAT_A2R10G10B10_SINT_PACK32,Kt as VK_FORMAT_A2R10G10B10_SNORM_PACK32,Xt as VK_FORMAT_A2R10G10B10_UINT_PACK32,Nt as VK_FORMAT_A2R10G10B10_UNORM_PACK32,Vi as VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT,ki as VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT,Li as VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT,Rn as VK_FORMAT_ASTC_10x10_SRGB_BLOCK,Xn as VK_FORMAT_ASTC_10x10_UNORM_BLOCK,mi as VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT,zn as VK_FORMAT_ASTC_10x5_SRGB_BLOCK,Pn as VK_FORMAT_ASTC_10x5_UNORM_BLOCK,Di as VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT,Hn as VK_FORMAT_ASTC_10x6_SRGB_BLOCK,Wn as VK_FORMAT_ASTC_10x6_UNORM_BLOCK,Bi as VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT,Kn as VK_FORMAT_ASTC_10x8_SRGB_BLOCK,Nn as VK_FORMAT_ASTC_10x8_UNORM_BLOCK,vi as VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT,jn as VK_FORMAT_ASTC_12x10_SRGB_BLOCK,Yn as VK_FORMAT_ASTC_12x10_UNORM_BLOCK,Ai as VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT,Gn as VK_FORMAT_ASTC_12x12_SRGB_BLOCK,qn as VK_FORMAT_ASTC_12x12_UNORM_BLOCK,pi as VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,Dn as VK_FORMAT_ASTC_4x4_SRGB_BLOCK,mn as VK_FORMAT_ASTC_4x4_UNORM_BLOCK,gi as VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT,Ln as VK_FORMAT_ASTC_5x4_SRGB_BLOCK,Bn as VK_FORMAT_ASTC_5x4_UNORM_BLOCK,yi as VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT,An as VK_FORMAT_ASTC_5x5_SRGB_BLOCK,vn as VK_FORMAT_ASTC_5x5_UNORM_BLOCK,xi as VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT,Vn as VK_FORMAT_ASTC_6x5_SRGB_BLOCK,kn as VK_FORMAT_ASTC_6x5_UNORM_BLOCK,ui as VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT,Sn as VK_FORMAT_ASTC_6x6_SRGB_BLOCK,In as VK_FORMAT_ASTC_6x6_UNORM_BLOCK,bi as VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT,On as VK_FORMAT_ASTC_8x5_SRGB_BLOCK,Fn as VK_FORMAT_ASTC_8x5_UNORM_BLOCK,di as VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT,Tn as VK_FORMAT_ASTC_8x6_SRGB_BLOCK,En as VK_FORMAT_ASTC_8x6_UNORM_BLOCK,wi as VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT,Mn as VK_FORMAT_ASTC_8x8_SRGB_BLOCK,Cn as VK_FORMAT_ASTC_8x8_UNORM_BLOCK,We as VK_FORMAT_B10G11R11_UFLOAT_PACK32,ti as VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16,ai as VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16,rt as VK_FORMAT_B4G4R4A4_UNORM_PACK16,ht as VK_FORMAT_B5G5R5A1_UNORM_PACK16,lt as VK_FORMAT_B5G6R5_UNORM_PACK16,Wt as VK_FORMAT_B8G8R8A8_SINT,Pt as VK_FORMAT_B8G8R8A8_SNORM,Ht as VK_FORMAT_B8G8R8A8_SRGB,zt as VK_FORMAT_B8G8R8A8_UINT,Mt as VK_FORMAT_B8G8R8A8_UNORM,It as VK_FORMAT_B8G8R8_SINT,kt as VK_FORMAT_B8G8R8_SNORM,St as VK_FORMAT_B8G8R8_SRGB,Vt as VK_FORMAT_B8G8R8_UINT,At as VK_FORMAT_B8G8R8_UNORM,Ze as VK_FORMAT_BC1_RGBA_SRGB_BLOCK,Qe as VK_FORMAT_BC1_RGBA_UNORM_BLOCK,Je as VK_FORMAT_BC1_RGB_SRGB_BLOCK,Ge as VK_FORMAT_BC1_RGB_UNORM_BLOCK,tn as VK_FORMAT_BC2_SRGB_BLOCK,$e as VK_FORMAT_BC2_UNORM_BLOCK,nn as VK_FORMAT_BC3_SRGB_BLOCK,en as VK_FORMAT_BC3_UNORM_BLOCK,an as VK_FORMAT_BC4_SNORM_BLOCK,sn as VK_FORMAT_BC4_UNORM_BLOCK,on as VK_FORMAT_BC5_SNORM_BLOCK,rn as VK_FORMAT_BC5_UNORM_BLOCK,fn as VK_FORMAT_BC6H_SFLOAT_BLOCK,ln as VK_FORMAT_BC6H_UFLOAT_BLOCK,Un as VK_FORMAT_BC7_SRGB_BLOCK,hn as VK_FORMAT_BC7_UNORM_BLOCK,Ne as VK_FORMAT_D16_UNORM,Ye as VK_FORMAT_D16_UNORM_S8_UINT,je as VK_FORMAT_D24_UNORM_S8_UINT,Xe as VK_FORMAT_D32_SFLOAT,qe as VK_FORMAT_D32_SFLOAT_S8_UINT,He as VK_FORMAT_E5B9G9R9_UFLOAT_PACK32,wn as VK_FORMAT_EAC_R11G11_SNORM_BLOCK,dn as VK_FORMAT_EAC_R11G11_UNORM_BLOCK,bn as VK_FORMAT_EAC_R11_SNORM_BLOCK,un as VK_FORMAT_EAC_R11_UNORM_BLOCK,gn as VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK,pn as VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK,xn as VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK,yn as VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK,_n as VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK,cn as VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK,$n as VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16,si as VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16,hi as VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG,ri as VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG,Ui as VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG,oi as VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG,ci as VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG,li as VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG,_i as VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG,fi as VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG,Zn as VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16,Qn as VK_FORMAT_R10X6G10X6_UNORM_2PACK16,Jn as VK_FORMAT_R10X6_UNORM_PACK16,ii as VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16,ni as VK_FORMAT_R12X4G12X4_UNORM_2PACK16,ei as VK_FORMAT_R12X4_UNORM_PACK16,ge as VK_FORMAT_R16G16B16A16_SFLOAT,pe as VK_FORMAT_R16G16B16A16_SINT,ce as VK_FORMAT_R16G16B16A16_SNORM,_e as VK_FORMAT_R16G16B16A16_UINT,Ue as VK_FORMAT_R16G16B16A16_UNORM,he as VK_FORMAT_R16G16B16_SFLOAT,fe as VK_FORMAT_R16G16B16_SINT,oe as VK_FORMAT_R16G16B16_SNORM,le as VK_FORMAT_R16G16B16_UINT,re as VK_FORMAT_R16G16B16_UNORM,ae as VK_FORMAT_R16G16_SFLOAT,se as VK_FORMAT_R16G16_SINT,ne as VK_FORMAT_R16G16_SNORM,ie as VK_FORMAT_R16G16_UINT,ee as VK_FORMAT_R16G16_UNORM,te as VK_FORMAT_R16_SFLOAT,$t as VK_FORMAT_R16_SINT,Qt as VK_FORMAT_R16_SNORM,Zt as VK_FORMAT_R16_UINT,Jt as VK_FORMAT_R16_UNORM,Ae as VK_FORMAT_R32G32B32A32_SFLOAT,ve as VK_FORMAT_R32G32B32A32_SINT,Le as VK_FORMAT_R32G32B32A32_UINT,Be as VK_FORMAT_R32G32B32_SFLOAT,De as VK_FORMAT_R32G32B32_SINT,me as VK_FORMAT_R32G32B32_UINT,we as VK_FORMAT_R32G32_SFLOAT,de as VK_FORMAT_R32G32_SINT,be as VK_FORMAT_R32G32_UINT,ue as VK_FORMAT_R32_SFLOAT,xe as VK_FORMAT_R32_SINT,ye as VK_FORMAT_R32_UINT,at as VK_FORMAT_R4G4B4A4_UNORM_PACK16,st as VK_FORMAT_R4G4_UNORM_PACK8,ft as VK_FORMAT_R5G5B5A1_UNORM_PACK16,ot as VK_FORMAT_R5G6B5_UNORM_PACK16,ze as VK_FORMAT_R64G64B64A64_SFLOAT,Pe as VK_FORMAT_R64G64B64A64_SINT,Me as VK_FORMAT_R64G64B64A64_UINT,Ce as VK_FORMAT_R64G64B64_SFLOAT,Te as VK_FORMAT_R64G64B64_SINT,Ee as VK_FORMAT_R64G64B64_UINT,Oe as VK_FORMAT_R64G64_SFLOAT,Fe as VK_FORMAT_R64G64_SINT,Se as VK_FORMAT_R64G64_UINT,Ie as VK_FORMAT_R64_SFLOAT,Ve as VK_FORMAT_R64_SINT,ke as VK_FORMAT_R64_UINT,Tt as VK_FORMAT_R8G8B8A8_SINT,Ot as VK_FORMAT_R8G8B8A8_SNORM,Ct as VK_FORMAT_R8G8B8A8_SRGB,Et as VK_FORMAT_R8G8B8A8_UINT,Ft as VK_FORMAT_R8G8B8A8_UNORM,Lt as VK_FORMAT_R8G8B8_SINT,Dt as VK_FORMAT_R8G8B8_SNORM,vt as VK_FORMAT_R8G8B8_SRGB,Bt as VK_FORMAT_R8G8B8_UINT,mt as VK_FORMAT_R8G8B8_UNORM,dt as VK_FORMAT_R8G8_SINT,ut as VK_FORMAT_R8G8_SNORM,wt as VK_FORMAT_R8G8_SRGB,bt as VK_FORMAT_R8G8_UINT,xt as VK_FORMAT_R8G8_UNORM,gt as VK_FORMAT_R8_SINT,_t as VK_FORMAT_R8_SNORM,yt as VK_FORMAT_R8_SRGB,pt as VK_FORMAT_R8_UINT,ct as VK_FORMAT_R8_UNORM,Re as VK_FORMAT_S8_UINT,it as VK_FORMAT_UNDEFINED,Ke as VK_FORMAT_X8_D24_UNORM_PACK32,Pi as read,Wi as write};\r\n","let A,I,B;const g={env:{emscripten_notify_memory_growth:function(A){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+C).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,\"base64\"),g).then(this._init),A)}_init(A){I=A.instance,g.env.emscripten_notify_memory_growth(0)}decode(A,g=0){if(!I)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const Q=A.byteLength,C=I.exports.malloc(Q);B.set(A,C),g=g||Number(I.exports.ZSTD_findDecompressedSize(C,Q));const E=I.exports.malloc(g),i=I.exports.ZSTD_decompress(E,g,C,Q),D=B.slice(E,E+i);return I.exports.free(C),I.exports.free(E),D}}const C=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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\";export{Q as ZSTDDecoder};\r\n","import { LinearTransfer, Matrix3, SRGBTransfer } from './three.module.min.js';\r\n\r\n// Reference: http://www.russellcottrell.com/photo/matrixCalculator.htm\r\n\r\nconst P3_PRIMARIES = [ 0.680, 0.320, 0.265, 0.690, 0.150, 0.060 ];\r\nconst P3_LUMINANCE_COEFFICIENTS = [ 0.2289, 0.6917, 0.0793 ];\r\nconst REC2020_PRIMARIES = [ 0.708, 0.292, 0.170, 0.797, 0.131, 0.046 ];\r\nconst REC2020_LUMINANCE_COEFFICIENTS = [ 0.2627, 0.6780, 0.0593 ];\r\nconst D65 = [ 0.3127, 0.3290 ];\r\n\r\n/******************************************************************************\r\n * Display P3 definitions\r\n */\r\n\r\nconst LINEAR_DISPLAY_P3_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\r\n\t0.4865709, 0.2656677, 0.1982173,\r\n\t0.2289746, 0.6917385, 0.0792869,\r\n\t0.0000000, 0.0451134, 1.0439444\r\n);\r\n\r\nconst XYZ_TO_LINEAR_DISPLAY_P3 = /*@__PURE__*/ new Matrix3().set(\r\n\t2.4934969, - 0.9313836, - 0.4027108,\r\n\t- 0.8294890, 1.7626641, 0.0236247,\r\n\t0.0358458, - 0.0761724, 0.9568845\r\n);\r\n\r\nexport const DisplayP3ColorSpace = 'display-p3';\r\nexport const LinearDisplayP3ColorSpace = 'display-p3-linear';\r\n\r\nexport const DisplayP3ColorSpaceImpl = {\r\n\tprimaries: P3_PRIMARIES,\r\n\twhitePoint: D65,\r\n\ttransfer: SRGBTransfer,\r\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\r\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\r\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\r\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\r\n};\r\n\r\nexport const LinearDisplayP3ColorSpaceImpl = {\r\n\tprimaries: P3_PRIMARIES,\r\n\twhitePoint: D65,\r\n\ttransfer: LinearTransfer,\r\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\r\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\r\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\r\n\tworkingColorSpaceConfig: { unpackColorSpace: DisplayP3ColorSpace },\r\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\r\n};\r\n\r\n/******************************************************************************\r\n * Rec. 2020 definitions\r\n */\r\n\r\nconst LINEAR_REC2020_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\r\n\t0.6369580, 0.1446169, 0.1688810,\r\n\t0.2627002, 0.6779981, 0.0593017,\r\n\t0.0000000, 0.0280727, 1.0609851\r\n);\r\n\r\nconst XYZ_TO_LINEAR_REC2020 = /*@__PURE__*/ new Matrix3().set(\r\n\t1.7166512, - 0.3556708, - 0.2533663,\r\n\t- 0.6666844, 1.6164812, 0.0157685,\r\n\t0.0176399, - 0.0427706, 0.9421031\r\n);\r\n\r\nexport const LinearRec2020ColorSpace = 'rec2020-linear';\r\n\r\nexport const LinearRec2020ColorSpaceImpl = {\r\n\tprimaries: REC2020_PRIMARIES,\r\n\twhitePoint: D65,\r\n\ttransfer: LinearTransfer,\r\n\ttoXYZ: LINEAR_REC2020_TO_XYZ,\r\n\tfromXYZ: XYZ_TO_LINEAR_REC2020,\r\n\tluminanceCoefficients: REC2020_LUMINANCE_COEFFICIENTS,\r\n};\r\n","/**\r\n * Loader for KTX 2.0 GPU Texture containers.\r\n *\r\n * KTX 2.0 is a container format for various GPU texture formats. The loader\r\n * supports Basis Universal GPU textures, which can be quickly transcoded to\r\n * a wide variety of GPU texture compression formats, as well as some\r\n * uncompressed DataTexture and Data3DTexture formats.\r\n *\r\n * References:\r\n * - KTX: http://github.khronos.org/KTX-Specification/\r\n * - DFD: https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor\r\n * - BasisU HDR: https://github.com/BinomialLLC/basis_universal/wiki/UASTC-HDR-Texture-Specification-v1.0\r\n */\r\n\r\nimport {\r\n\tCompressedTexture,\r\n\tCompressedArrayTexture,\r\n\tCompressedCubeTexture,\r\n\tData3DTexture,\r\n\tDataTexture,\r\n\tFileLoader,\r\n\tFloatType,\r\n\tHalfFloatType,\r\n\tNoColorSpace,\r\n\tLinearFilter,\r\n\tLinearMipmapLinearFilter,\r\n\tLinearSRGBColorSpace,\r\n\tLoader,\r\n\tRedFormat,\r\n\tRGB_BPTC_UNSIGNED_Format,\r\n\tRGB_ETC1_Format,\r\n\tRGB_ETC2_Format,\r\n\tRGB_PVRTC_4BPPV1_Format,\r\n\tRGBA_ASTC_4x4_Format,\r\n\tRGBA_ASTC_6x6_Format,\r\n\tRGBA_BPTC_Format,\r\n\tRGBA_ETC2_EAC_Format,\r\n\tRGBA_PVRTC_4BPPV1_Format,\r\n\tRGBA_S3TC_DXT5_Format,\r\n\tRGBA_S3TC_DXT1_Format,\r\n\tRGBAFormat,\r\n\tRGFormat,\r\n\tSRGBColorSpace,\r\n\tUnsignedByteType,\r\n} from './three.module.min.js';\r\nimport { WorkerPool } from './WorkerPool.js';\r\nimport {\r\n\tread,\r\n\tKHR_DF_FLAG_ALPHA_PREMULTIPLIED,\r\n\tKHR_DF_TRANSFER_SRGB,\r\n\tKHR_SUPERCOMPRESSION_NONE,\r\n\tKHR_SUPERCOMPRESSION_ZSTD,\r\n\tVK_FORMAT_UNDEFINED,\r\n\tVK_FORMAT_R16_SFLOAT,\r\n\tVK_FORMAT_R16G16_SFLOAT,\r\n\tVK_FORMAT_R16G16B16A16_SFLOAT,\r\n\tVK_FORMAT_R32_SFLOAT,\r\n\tVK_FORMAT_R32G32_SFLOAT,\r\n\tVK_FORMAT_R32G32B32A32_SFLOAT,\r\n\tVK_FORMAT_R8_SRGB,\r\n\tVK_FORMAT_R8_UNORM,\r\n\tVK_FORMAT_R8G8_SRGB,\r\n\tVK_FORMAT_R8G8_UNORM,\r\n\tVK_FORMAT_R8G8B8A8_SRGB,\r\n\tVK_FORMAT_R8G8B8A8_UNORM,\r\n\tVK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,\r\n\tVK_FORMAT_ASTC_6x6_SRGB_BLOCK,\r\n\tVK_FORMAT_ASTC_6x6_UNORM_BLOCK,\r\n\tKHR_DF_PRIMARIES_UNSPECIFIED,\r\n\tKHR_DF_PRIMARIES_BT709,\r\n\tKHR_DF_PRIMARIES_DISPLAYP3\r\n} from './ktx-parse.module.js';\r\nimport { ZSTDDecoder } from './zstddec.module.js';\r\nimport { DisplayP3ColorSpace, LinearDisplayP3ColorSpace } from './ColorSpaces.js';\r\n\r\nconst _taskCache = new WeakMap();\r\n\r\nlet _activeLoaders = 0;\r\n\r\nlet _zstd;\r\n\r\nclass KTX2Loader extends Loader {\r\n\r\n\tconstructor( manager ) {\r\n\r\n\t\tsuper( manager );\r\n\r\n\t\tthis.transcoderPath = '';\r\n\t\tthis.transcoderBinary = null;\r\n\t\tthis.transcoderPending = null;\r\n\r\n\t\tthis.workerPool = new WorkerPool();\r\n\t\tthis.workerSourceURL = '';\r\n\t\tthis.workerConfig = null;\r\n\r\n\t\tif ( typeof MSC_TRANSCODER !== 'undefined' ) {\r\n\r\n\t\t\tconsole.warn(\r\n\r\n\t\t\t\t'THREE.KTX2Loader: Please update to latest \"basis_transcoder\".'\r\n\t\t\t\t+ ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\r\n\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetTranscoderPath( path ) {\r\n\r\n\t\tthis.transcoderPath = path;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetWorkerLimit( num ) {\r\n\r\n\t\tthis.workerPool.setWorkerLimit( num );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tasync detectSupportAsync( renderer ) {\r\n\r\n\t\tthis.workerConfig = {\r\n\t\t\tastcSupported: await renderer.hasFeatureAsync( 'texture-compression-astc' ),\r\n\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\r\n\t\t\tetc1Supported: await renderer.hasFeatureAsync( 'texture-compression-etc1' ),\r\n\t\t\tetc2Supported: await renderer.hasFeatureAsync( 'texture-compression-etc2' ),\r\n\t\t\tdxtSupported: await renderer.hasFeatureAsync( 'texture-compression-bc' ),\r\n\t\t\tbptcSupported: await renderer.hasFeatureAsync( 'texture-compression-bptc' ),\r\n\t\t\tpvrtcSupported: await renderer.hasFeatureAsync( 'texture-compression-pvrtc' )\r\n\t\t};\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tdetectSupport( renderer ) {\r\n\r\n\t\tif ( renderer.isWebGPURenderer === true ) {\r\n\r\n\t\t\tthis.workerConfig = {\r\n\t\t\t\tastcSupported: renderer.hasFeature( 'texture-compression-astc' ),\r\n\t\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\r\n\t\t\t\tetc1Supported: renderer.hasFeature( 'texture-compression-etc1' ),\r\n\t\t\t\tetc2Supported: renderer.hasFeature( 'texture-compression-etc2' ),\r\n\t\t\t\tdxtSupported: renderer.hasFeature( 'texture-compression-bc' ),\r\n\t\t\t\tbptcSupported: renderer.hasFeature( 'texture-compression-bptc' ),\r\n\t\t\t\tpvrtcSupported: renderer.hasFeature( 'texture-compression-pvrtc' )\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.workerConfig = {\r\n\t\t\t\tastcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' ),\r\n\t\t\t\tastcHDRSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' )\r\n\t\t\t\t\t&& renderer.extensions.get( 'WEBGL_compressed_texture_astc' ).getSupportedProfiles().includes( 'hdr' ),\r\n\t\t\t\tetc1Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc1' ),\r\n\t\t\t\tetc2Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc' ),\r\n\t\t\t\tdxtSupported: renderer.extensions.has( 'WEBGL_compressed_texture_s3tc' ),\r\n\t\t\t\tbptcSupported: renderer.extensions.has( 'EXT_texture_compression_bptc' ),\r\n\t\t\t\tpvrtcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_pvrtc' )\r\n\t\t\t\t\t|| renderer.extensions.has( 'WEBKIT_WEBGL_compressed_texture_pvrtc' )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tinit() {\r\n\r\n\t\tif ( ! this.transcoderPending ) {\r\n\r\n\t\t\t// Load transcoder wrapper.\r\n\t\t\tconst jsLoader = new FileLoader( this.manager );\r\n\t\t\tjsLoader.setPath( this.transcoderPath );\r\n\t\t\tjsLoader.setWithCredentials( this.withCredentials );\r\n\t\t\tconst jsContent = jsLoader.loadAsync( 'basis_transcoder.js' );\r\n\r\n\t\t\t// Load transcoder WASM binary.\r\n\t\t\tconst binaryLoader = new FileLoader( this.manager );\r\n\t\t\tbinaryLoader.setPath( this.transcoderPath );\r\n\t\t\tbinaryLoader.setResponseType( 'arraybuffer' );\r\n\t\t\tbinaryLoader.setWithCredentials( this.withCredentials );\r\n\t\t\tconst binaryContent = binaryLoader.loadAsync( 'basis_transcoder.wasm' );\r\n\r\n\t\t\tthis.transcoderPending = Promise.all( [ jsContent, binaryContent ] )\r\n\t\t\t\t.then( ( [ jsContent, binaryContent ] ) => {\r\n\r\n\t\t\t\t\tconst fn = KTX2Loader.BasisWorker.toString();\r\n\r\n\t\t\t\t\tconst body = [\r\n\t\t\t\t\t\t'/* constants */',\r\n\t\t\t\t\t\t'let _EngineFormat = ' + JSON.stringify( KTX2Loader.EngineFormat ),\r\n\t\t\t\t\t\t'let _EngineType = ' + JSON.stringify( KTX2Loader.EngineType ),\r\n\t\t\t\t\t\t'let _TranscoderFormat = ' + JSON.stringify( KTX2Loader.TranscoderFormat ),\r\n\t\t\t\t\t\t'let _BasisFormat = ' + JSON.stringify( KTX2Loader.BasisFormat ),\r\n\t\t\t\t\t\t'/* basis_transcoder.js */',\r\n\t\t\t\t\t\tjsContent,\r\n\t\t\t\t\t\t'/* worker */',\r\n\t\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\r\n\t\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\r\n\t\t\t\t\tthis.transcoderBinary = binaryContent;\r\n\r\n\t\t\t\t\tthis.workerPool.setWorkerCreator( () => {\r\n\r\n\t\t\t\t\t\tconst worker = new Worker( this.workerSourceURL );\r\n\t\t\t\t\t\tconst transcoderBinary = this.transcoderBinary.slice( 0 );\r\n\r\n\t\t\t\t\t\tworker.postMessage( { type: 'init', config: this.workerConfig, transcoderBinary }, [ transcoderBinary ] );\r\n\r\n\t\t\t\t\t\treturn worker;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\tif ( _activeLoaders > 0 ) {\r\n\r\n\t\t\t\t// Each instance loads a transcoder and allocates workers, increasing network and memory cost.\r\n\r\n\t\t\t\tconsole.warn(\r\n\r\n\t\t\t\t\t'THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues.'\r\n\t\t\t\t\t+ ' Use a single KTX2Loader instance, or call .dispose() on old instances.'\r\n\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_activeLoaders ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.transcoderPending;\r\n\r\n\t}\r\n\r\n\tload( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.workerConfig === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\r\n\t\tloader.load( url, ( buffer ) => {\r\n\r\n\t\t\tthis.parse( buffer, onLoad, onError );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n\tparse( buffer, onLoad, onError ) {\r\n\r\n\t\tif ( this.workerConfig === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\r\n\r\n\t\t}\r\n\r\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\r\n\t\t// again from this thread.\r\n\t\tif ( _taskCache.has( buffer ) ) {\r\n\r\n\t\t\tconst cachedTask = _taskCache.get( buffer );\r\n\r\n\t\t\treturn cachedTask.promise.then( onLoad ).catch( onError );\r\n\r\n\t\t}\r\n\r\n\t\tthis._createTexture( buffer )\r\n\t\t\t.then( ( texture ) => onLoad ? onLoad( texture ) : null )\r\n\t\t\t.catch( onError );\r\n\r\n\t}\r\n\r\n\t_createTextureFrom( transcodeResult, container ) {\r\n\r\n\t\tconst { type: messageType, error, data: { faces, width, height, format, type, dfdFlags } } = transcodeResult;\r\n\r\n\t\tif ( messageType === 'error' ) return Promise.reject( error );\r\n\r\n\t\tlet texture;\r\n\r\n\t\tif ( container.faceCount === 6 ) {\r\n\r\n\t\t\ttexture = new CompressedCubeTexture( faces, format, type );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst mipmaps = faces[ 0 ].mipmaps;\r\n\r\n\t\t\ttexture = container.layerCount > 1\r\n\t\t\t\t? new CompressedArrayTexture( mipmaps, width, height, container.layerCount, format, type )\r\n\t\t\t\t: new CompressedTexture( mipmaps, width, height, format, type );\r\n\r\n\t\t}\r\n\r\n\t\ttexture.minFilter = faces[ 0 ].mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\r\n\t\ttexture.magFilter = LinearFilter;\r\n\t\ttexture.generateMipmaps = false;\r\n\r\n\t\ttexture.needsUpdate = true;\r\n\t\ttexture.colorSpace = parseColorSpace( container );\r\n\t\ttexture.premultiplyAlpha = !! ( dfdFlags & KHR_DF_FLAG_ALPHA_PREMULTIPLIED );\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ArrayBuffer} buffer\r\n\t * @param {object?} config\r\n\t * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}\r\n\t */\r\n\tasync _createTexture( buffer, config = {} ) {\r\n\r\n\t\tconst container = read( new Uint8Array( buffer ) );\r\n\r\n\t\t// Basis UASTC HDR is a subset of ASTC, which can be transcoded efficiently\r\n\t\t// to BC6H. To detect whether a KTX2 file uses Basis UASTC HDR, or default\r\n\t\t// ASTC, inspect the DFD color model.\r\n\t\t//\r\n\t\t// Source: https://github.com/BinomialLLC/basis_universal/issues/381\r\n\t\tconst isBasisHDR = container.vkFormat === VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT\r\n\t\t\t&& container.dataFormatDescriptor[ 0 ].colorModel === 0xA7;\r\n\r\n\t\t// If the device supports ASTC, Basis UASTC HDR requires no transcoder.\r\n\t\tconst needsTranscoder = container.vkFormat === VK_FORMAT_UNDEFINED\r\n\t\t\t|| isBasisHDR && ! this.workerConfig.astcHDRSupported;\r\n\r\n\t\tif ( ! needsTranscoder ) {\r\n\r\n\t\t\treturn createRawTexture( container );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\t\tconst taskConfig = config;\r\n\t\tconst texturePending = this.init().then( () => {\r\n\r\n\t\t\treturn this.workerPool.postMessage( { type: 'transcode', buffer, taskConfig: taskConfig }, [ buffer ] );\r\n\r\n\t\t} ).then( ( e ) => this._createTextureFrom( e.data, container ) );\r\n\r\n\t\t// Cache the task result.\r\n\t\t_taskCache.set( buffer, { promise: texturePending } );\r\n\r\n\t\treturn texturePending;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.workerPool.dispose();\r\n\t\tif ( this.workerSourceURL ) URL.revokeObjectURL( this.workerSourceURL );\r\n\r\n\t\t_activeLoaders --;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n/* CONSTANTS */\r\n\r\nKTX2Loader.BasisFormat = {\r\n\tETC1S: 0,\r\n\tUASTC: 1,\r\n\tUASTC_HDR: 2,\r\n};\r\n\r\n// Source: https://github.com/BinomialLLC/basis_universal/blob/master/webgl/texture_test/index.html\r\nKTX2Loader.TranscoderFormat = {\r\n\tETC1: 0,\r\n\tETC2: 1,\r\n\tBC1: 2,\r\n\tBC3: 3,\r\n\tBC4: 4,\r\n\tBC5: 5,\r\n\tBC7_M6_OPAQUE_ONLY: 6,\r\n\tBC7_M5: 7,\r\n\tPVRTC1_4_RGB: 8,\r\n\tPVRTC1_4_RGBA: 9,\r\n\tASTC_4x4: 10,\r\n\tATC_RGB: 11,\r\n\tATC_RGBA_INTERPOLATED_ALPHA: 12,\r\n\tRGBA32: 13,\r\n\tRGB565: 14,\r\n\tBGR565: 15,\r\n\tRGBA4444: 16,\r\n\tBC6H: 22,\r\n\tRGB_HALF: 24,\r\n\tRGBA_HALF: 25,\r\n};\r\n\r\nKTX2Loader.EngineFormat = {\r\n\tRGBAFormat: RGBAFormat,\r\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\r\n\tRGB_BPTC_UNSIGNED_Format: RGB_BPTC_UNSIGNED_Format,\r\n\tRGBA_BPTC_Format: RGBA_BPTC_Format,\r\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\r\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\r\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\r\n\tRGB_ETC1_Format: RGB_ETC1_Format,\r\n\tRGB_ETC2_Format: RGB_ETC2_Format,\r\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\r\n\tRGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\r\n};\r\n\r\nKTX2Loader.EngineType = {\r\n\tUnsignedByteType: UnsignedByteType,\r\n\tHalfFloatType: HalfFloatType,\r\n\tFloatType: FloatType,\r\n};\r\n\r\n/* WEB WORKER */\r\n\r\nKTX2Loader.BasisWorker = function () {\r\n\r\n\tlet config;\r\n\tlet transcoderPending;\r\n\tlet BasisModule;\r\n\r\n\tconst EngineFormat = _EngineFormat; // eslint-disable-line no-undef\r\n\tconst EngineType = _EngineType; // eslint-disable-line no-undef\r\n\tconst TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\r\n\tconst BasisFormat = _BasisFormat; // eslint-disable-line no-undef\r\n\r\n\tself.addEventListener( 'message', function ( e ) { // eslint-disable-line no-restricted-globals\r\n\r\n\t\tconst message = e.data;\r\n\r\n\t\tswitch ( message.type ) {\r\n\r\n\t\t\tcase 'init':\r\n\t\t\t\tconfig = message.config;\r\n\t\t\t\tinit( message.transcoderBinary );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'transcode':\r\n\t\t\t\ttranscoderPending.then( () => {\r\n\r\n\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\tconst { faces, buffers, width, height, hasAlpha, format, type, dfdFlags } = transcode( message.buffer );\r\n\r\n\t\t\t\t\t\tself.postMessage( { type: 'transcode', id: message.id, data: { faces, width, height, hasAlpha, format, type, dfdFlags } }, buffers ); // eslint-disable-line no-restricted-globals\r\n\r\n\t\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\t\tconsole.error( error );\r\n\r\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } ); // eslint-disable-line no-restricted-globals\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n\tfunction init( wasmBinary ) {\r\n\r\n\t\ttranscoderPending = new Promise( ( resolve ) => {\r\n\r\n\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\r\n\t\t\tBASIS( BasisModule ); // eslint-disable-line no-undef\r\n\r\n\t\t} ).then( () => {\r\n\r\n\t\t\tBasisModule.initializeBasis();\r\n\r\n\t\t\tif ( BasisModule.KTX2File === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.KTX2Loader: Please update Basis Universal transcoder.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction transcode( buffer ) {\r\n\r\n\t\tconst ktx2File = new BasisModule.KTX2File( new Uint8Array( buffer ) );\r\n\r\n\t\tfunction cleanup() {\r\n\r\n\t\t\tktx2File.close();\r\n\t\t\tktx2File.delete();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! ktx2File.isValid() ) {\r\n\r\n\t\t\tcleanup();\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file' );\r\n\r\n\t\t}\r\n\r\n\t\tlet basisFormat;\r\n\r\n\t\tif ( ktx2File.isUASTC() ) {\r\n\r\n\t\t\tbasisFormat = BasisFormat.UASTC;\r\n\r\n\t\t} else if ( ktx2File.isETC1S() ) {\r\n\r\n\t\t\tbasisFormat = BasisFormat.ETC1S;\r\n\r\n\t\t} else if ( ktx2File.isHDR() ) {\r\n\r\n\t\t\tbasisFormat = BasisFormat.UASTC_HDR;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unknown Basis encoding' );\r\n\r\n\t\t}\r\n\r\n\t\tconst width = ktx2File.getWidth();\r\n\t\tconst height = ktx2File.getHeight();\r\n\t\tconst layerCount = ktx2File.getLayers() || 1;\r\n\t\tconst levelCount = ktx2File.getLevels();\r\n\t\tconst faceCount = ktx2File.getFaces();\r\n\t\tconst hasAlpha = ktx2File.getHasAlpha();\r\n\t\tconst dfdFlags = ktx2File.getDFDFlags();\r\n\r\n\t\tconst { transcoderFormat, engineFormat, engineType } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\r\n\r\n\t\tif ( ! width || ! height || ! levelCount ) {\r\n\r\n\t\t\tcleanup();\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid texture' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! ktx2File.startTranscoding() ) {\r\n\r\n\t\t\tcleanup();\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader: .startTranscoding failed' );\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = [];\r\n\t\tconst buffers = [];\r\n\r\n\t\tfor ( let face = 0; face < faceCount; face ++ ) {\r\n\r\n\t\t\tconst mipmaps = [];\r\n\r\n\t\t\tfor ( let mip = 0; mip < levelCount; mip ++ ) {\r\n\r\n\t\t\t\tconst layerMips = [];\r\n\r\n\t\t\t\tlet mipWidth, mipHeight;\r\n\r\n\t\t\t\tfor ( let layer = 0; layer < layerCount; layer ++ ) {\r\n\r\n\t\t\t\t\tconst levelInfo = ktx2File.getImageLevelInfo( mip, layer, face );\r\n\r\n\t\t\t\t\tif ( face === 0 && mip === 0 && layer === 0 && ( levelInfo.origWidth % 4 !== 0 || levelInfo.origHeight % 4 !== 0 ) ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( levelCount > 1 ) {\r\n\r\n\t\t\t\t\t\tmipWidth = levelInfo.origWidth;\r\n\t\t\t\t\t\tmipHeight = levelInfo.origHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// Handles non-multiple-of-four dimensions in textures without mipmaps. Textures with\r\n\t\t\t\t\t\t// mipmaps must use multiple-of-four dimensions, for some texture formats and APIs.\r\n\t\t\t\t\t\t// See mrdoob/three.js#25908.\r\n\t\t\t\t\t\tmipWidth = levelInfo.width;\r\n\t\t\t\t\t\tmipHeight = levelInfo.height;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, layer, 0, transcoderFormat ) );\r\n\t\t\t\t\tconst status = ktx2File.transcodeImage( dst, mip, layer, face, transcoderFormat, 0, - 1, - 1 );\r\n\r\n\t\t\t\t\tif ( engineType === EngineType.HalfFloatType ) {\r\n\r\n\t\t\t\t\t\tdst = new Uint16Array( dst.buffer, dst.byteOffset, dst.byteLength / Uint16Array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ! status ) {\r\n\r\n\t\t\t\t\t\tcleanup();\r\n\t\t\t\t\t\tthrow new Error( 'THREE.KTX2Loader: .transcodeImage failed.' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlayerMips.push( dst );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst mipData = concat( layerMips );\r\n\r\n\t\t\t\tmipmaps.push( { data: mipData, width: mipWidth, height: mipHeight } );\r\n\t\t\t\tbuffers.push( mipData.buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaces.push( { mipmaps, width, height, format: engineFormat, type: engineType } );\r\n\r\n\t\t}\r\n\r\n\t\tcleanup();\r\n\r\n\t\treturn { faces, buffers, width, height, hasAlpha, dfdFlags, format: engineFormat, type: engineType };\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\t// Optimal choice of a transcoder target format depends on the Basis format (ETC1S, UASTC, or\r\n\t// UASTC HDR), device capabilities, and texture dimensions. The list below ranks the formats\r\n\t// separately for each format. Currently, priority is assigned based on:\r\n\t//\r\n\t//   high quality > low quality > uncompressed\r\n\t//\r\n\t// Prioritization may be revisited, or exposed for configuration, in the future.\r\n\t//\r\n\t// Reference: https://github.com/KhronosGroup/3D-Formats-Guidelines/blob/main/KTXDeveloperGuide.md\r\n\tconst FORMAT_OPTIONS = [\r\n\t\t{\r\n\t\t\tif: 'astcSupported',\r\n\t\t\tbasisFormat: [ BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],\r\n\t\t\tengineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: Infinity,\r\n\t\t\tpriorityUASTC: 1,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tif: 'bptcSupported',\r\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],\r\n\t\t\tengineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: 3,\r\n\t\t\tpriorityUASTC: 2,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tif: 'dxtSupported',\r\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],\r\n\t\t\tengineFormat: [ EngineFormat.RGBA_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: 4,\r\n\t\t\tpriorityUASTC: 5,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tif: 'etc2Supported',\r\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],\r\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: 1,\r\n\t\t\tpriorityUASTC: 3,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tif: 'etc1Supported',\r\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1 ],\r\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC1_Format ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: 2,\r\n\t\t\tpriorityUASTC: 4,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tif: 'pvrtcSupported',\r\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],\r\n\t\t\tengineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: 5,\r\n\t\t\tpriorityUASTC: 6,\r\n\t\t\tneedsPowerOfTwo: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tif: 'bptcSupported',\r\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC6H ],\r\n\t\t\tengineFormat: [ EngineFormat.RGB_BPTC_UNSIGNED_Format ],\r\n\t\t\tengineType: [ EngineType.HalfFloatType ],\r\n\t\t\tpriorityHDR: 1,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\r\n\t\t// Uncompressed fallbacks.\r\n\r\n\t\t{\r\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA32, TranscoderFormat.RGBA32 ],\r\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat, EngineFormat.RGBAFormat ],\r\n\t\t\tengineType: [ EngineType.UnsignedByteType, EngineType.UnsignedByteType ],\r\n\t\t\tpriorityETC1S: 100,\r\n\t\t\tpriorityUASTC: 100,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\r\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA_HALF ],\r\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat ],\r\n\t\t\tengineType: [ EngineType.HalfFloatType ],\r\n\t\t\tpriorityHDR: 100,\r\n\t\t\tneedsPowerOfTwo: false,\r\n\t\t}\r\n\t];\r\n\r\n\tconst OPTIONS = {\r\n\t\t// TODO: For ETC1S we intentionally sort by _UASTC_ priority, preserving\r\n\t\t// a historical accident shown to avoid performance pitfalls for Linux with\r\n\t\t// Firefox & AMD GPU (RadeonSI). Further work needed.\r\n\t\t// See https://github.com/mrdoob/three.js/pull/29730.\r\n\t\t[ BasisFormat.ETC1S ]: FORMAT_OPTIONS\r\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.ETC1S ) )\r\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\r\n\r\n\t\t[ BasisFormat.UASTC ]: FORMAT_OPTIONS\r\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC ) )\r\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\r\n\r\n\t\t[ BasisFormat.UASTC_HDR ]: FORMAT_OPTIONS\r\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC_HDR ) )\r\n\t\t\t.sort( ( a, b ) => a.priorityHDR - b.priorityHDR ),\r\n\t};\r\n\r\n\tfunction getTranscoderFormat( basisFormat, width, height, hasAlpha ) {\r\n\r\n\t\tconst options = OPTIONS[ basisFormat ];\r\n\r\n\t\tfor ( let i = 0; i < options.length; i ++ ) {\r\n\r\n\t\t\tconst opt = options[ i ];\r\n\r\n\t\t\tif ( opt.if && ! config[ opt.if ] ) continue;\r\n\t\t\tif ( ! opt.basisFormat.includes( basisFormat ) ) continue;\r\n\t\t\tif ( hasAlpha && opt.transcoderFormat.length < 2 ) continue;\r\n\t\t\tif ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;\r\n\r\n\t\t\tconst transcoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];\r\n\t\t\tconst engineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];\r\n\t\t\tconst engineType = opt.engineType[ 0 ];\r\n\r\n\t\t\treturn { transcoderFormat, engineFormat, engineType };\r\n\r\n\t\t}\r\n\r\n\t\tthrow new Error( 'THREE.KTX2Loader: Failed to identify transcoding target.' );\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( value ) {\r\n\r\n\t\tif ( value <= 2 ) return true;\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t}\r\n\r\n\t/** Concatenates N byte arrays. */\r\n\tfunction concat( arrays ) {\r\n\r\n\t\tif ( arrays.length === 1 ) return arrays[ 0 ];\r\n\r\n\t\tlet totalByteLength = 0;\r\n\r\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\r\n\r\n\t\t\tconst array = arrays[ i ];\r\n\t\t\ttotalByteLength += array.byteLength;\r\n\r\n\t\t}\r\n\r\n\t\tconst result = new Uint8Array( totalByteLength );\r\n\r\n\t\tlet byteOffset = 0;\r\n\r\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\r\n\r\n\t\t\tconst array = arrays[ i ];\r\n\t\t\tresult.set( array, byteOffset );\r\n\r\n\t\t\tbyteOffset += array.byteLength;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Parsing for non-Basis textures. These textures may have supercompression\r\n// like Zstd, but they do not require transcoding.\r\n\r\nconst UNCOMPRESSED_FORMATS = new Set( [ RGBAFormat, RGFormat, RedFormat ] );\r\n\r\nconst FORMAT_MAP = {\r\n\r\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: RGBAFormat,\r\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: RGBAFormat,\r\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: RGBAFormat,\r\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: RGBAFormat,\r\n\r\n\t[ VK_FORMAT_R32G32_SFLOAT ]: RGFormat,\r\n\t[ VK_FORMAT_R16G16_SFLOAT ]: RGFormat,\r\n\t[ VK_FORMAT_R8G8_UNORM ]: RGFormat,\r\n\t[ VK_FORMAT_R8G8_SRGB ]: RGFormat,\r\n\r\n\t[ VK_FORMAT_R32_SFLOAT ]: RedFormat,\r\n\t[ VK_FORMAT_R16_SFLOAT ]: RedFormat,\r\n\t[ VK_FORMAT_R8_SRGB ]: RedFormat,\r\n\t[ VK_FORMAT_R8_UNORM ]: RedFormat,\r\n\r\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: RGBA_ASTC_4x4_Format,\r\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: RGBA_ASTC_6x6_Format,\r\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: RGBA_ASTC_6x6_Format,\r\n\r\n};\r\n\r\nconst TYPE_MAP = {\r\n\r\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: FloatType,\r\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: HalfFloatType,\r\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: UnsignedByteType,\r\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: UnsignedByteType,\r\n\r\n\t[ VK_FORMAT_R32G32_SFLOAT ]: FloatType,\r\n\t[ VK_FORMAT_R16G16_SFLOAT ]: HalfFloatType,\r\n\t[ VK_FORMAT_R8G8_UNORM ]: UnsignedByteType,\r\n\t[ VK_FORMAT_R8G8_SRGB ]: UnsignedByteType,\r\n\r\n\t[ VK_FORMAT_R32_SFLOAT ]: FloatType,\r\n\t[ VK_FORMAT_R16_SFLOAT ]: HalfFloatType,\r\n\t[ VK_FORMAT_R8_SRGB ]: UnsignedByteType,\r\n\t[ VK_FORMAT_R8_UNORM ]: UnsignedByteType,\r\n\r\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: HalfFloatType,\r\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: UnsignedByteType,\r\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: UnsignedByteType,\r\n\r\n};\r\n\r\nasync function createRawTexture( container ) {\r\n\r\n\tconst { vkFormat } = container;\r\n\r\n\tif ( FORMAT_MAP[ vkFormat ] === undefined ) {\r\n\r\n\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported vkFormat.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tlet zstd;\r\n\r\n\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\r\n\r\n\t\tif ( ! _zstd ) {\r\n\r\n\t\t\t_zstd = new Promise( async ( resolve ) => {\r\n\r\n\t\t\t\tconst zstd = new ZSTDDecoder();\r\n\t\t\t\tawait zstd.init();\r\n\t\t\t\tresolve( zstd );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tzstd = await _zstd;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst mipmaps = [];\r\n\r\n\r\n\tfor ( let levelIndex = 0; levelIndex < container.levels.length; levelIndex ++ ) {\r\n\r\n\t\tconst levelWidth = Math.max( 1, container.pixelWidth >> levelIndex );\r\n\t\tconst levelHeight = Math.max( 1, container.pixelHeight >> levelIndex );\r\n\t\tconst levelDepth = container.pixelDepth ? Math.max( 1, container.pixelDepth >> levelIndex ) : 0;\r\n\r\n\t\tconst level = container.levels[ levelIndex ];\r\n\r\n\t\tlet levelData;\r\n\r\n\t\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_NONE ) {\r\n\r\n\t\t\tlevelData = level.levelData;\r\n\r\n\t\t} else if ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\r\n\r\n\t\t\tlevelData = zstd.decode( level.levelData, level.uncompressedByteLength );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported supercompressionScheme.' );\r\n\r\n\t\t}\r\n\r\n\t\tlet data;\r\n\r\n\t\tif ( TYPE_MAP[ vkFormat ] === FloatType ) {\r\n\r\n\t\t\tdata = new Float32Array(\r\n\r\n\t\t\t\tlevelData.buffer,\r\n\t\t\t\tlevelData.byteOffset,\r\n\t\t\t\tlevelData.byteLength / Float32Array.BYTES_PER_ELEMENT\r\n\r\n\t\t\t);\r\n\r\n\t\t} else if ( TYPE_MAP[ vkFormat ] === HalfFloatType ) {\r\n\r\n\t\t\tdata = new Uint16Array(\r\n\r\n\t\t\t\tlevelData.buffer,\r\n\t\t\t\tlevelData.byteOffset,\r\n\t\t\t\tlevelData.byteLength / Uint16Array.BYTES_PER_ELEMENT\r\n\r\n\t\t\t);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdata = levelData;\r\n\r\n\t\t}\r\n\r\n\t\tmipmaps.push( {\r\n\r\n\t\t\tdata: data,\r\n\t\t\twidth: levelWidth,\r\n\t\t\theight: levelHeight,\r\n\t\t\tdepth: levelDepth,\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tlet texture;\r\n\r\n\tif ( UNCOMPRESSED_FORMATS.has( FORMAT_MAP[ vkFormat ] ) ) {\r\n\r\n\t\ttexture = container.pixelDepth === 0\r\n\t\t\t? new DataTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight )\r\n\t\t\t: new Data3DTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight, container.pixelDepth );\r\n\r\n\t} else {\r\n\r\n\t\tif ( container.pixelDepth > 0 ) throw new Error( 'THREE.KTX2Loader: Unsupported pixelDepth.' );\r\n\r\n\t\ttexture = new CompressedTexture( mipmaps, container.pixelWidth, container.pixelHeight );\r\n\r\n\t\ttexture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\r\n\t\ttexture.magFilter = LinearFilter;\r\n\r\n\t}\r\n\r\n\ttexture.mipmaps = mipmaps;\r\n\r\n\ttexture.type = TYPE_MAP[ vkFormat ];\r\n\ttexture.format = FORMAT_MAP[ vkFormat ];\r\n\ttexture.colorSpace = parseColorSpace( container );\r\n\ttexture.needsUpdate = true;\r\n\r\n\t//\r\n\r\n\treturn Promise.resolve( texture );\r\n\r\n}\r\n\r\nfunction parseColorSpace( container ) {\r\n\r\n\tconst dfd = container.dataFormatDescriptor[ 0 ];\r\n\r\n\tif ( dfd.colorPrimaries === KHR_DF_PRIMARIES_BT709 ) {\r\n\r\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? SRGBColorSpace : LinearSRGBColorSpace;\r\n\r\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_DISPLAYP3 ) {\r\n\r\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? DisplayP3ColorSpace : LinearDisplayP3ColorSpace;\r\n\r\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_UNSPECIFIED ) {\r\n\r\n\t\treturn NoColorSpace;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( `THREE.KTX2Loader: Unsupported color primaries, \"${ dfd.colorPrimaries }\"` );\r\n\t\treturn NoColorSpace;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { KTX2Loader };\r\n","// pxlNav Enums\r\n//   Written by Kevin Edzenga; 2024,2025\r\n// -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n\r\n/**\r\n * pxlNav Enums\r\n * \r\n * When a 'type' needs to be determined, enums help to show the available options.\r\n * \r\n * Please see the [pxlEnums]{@link pxlEnums} class document for all the enum values.\r\n * \r\n * @link pxlEnums\r\n * \r\n * @name #pxlEnums\r\n * @global\r\n * @type {Object}\r\n * @property {Object} pxlEnums - pxlNav {Enums} contains all the enums used in pxlNav\r\n * @property {Object} VERBOSE_LEVEL - Console logging levels\r\n * @property {Object} ANTI_ALIASING - Anti-aliasing settings\r\n * @property {Object} RENDER_LAYER - Render Order Layers\r\n * @property {Object} SKY_HAZE - Sky Haze settings\r\n * @property {Object} SHADOW_MAP - Shadow edge softness settings\r\n * @property {Object} CAMERA_EVENT - Camera event types\r\n * @property {Object} COLLIDER_TYPE - Collider internal types\r\n * @property {Object} GEOMETRY_SIDE - Geometry side types\r\n * @property {Object} COLOR_SHIFT - Color space conversion options\r\n * @property {Object} USER_SPEED - User speed settings\r\n * @property {Object} DEVICE_TYPE - Input-Device Types\r\n * @property {Object} DEVICE_EVENT - Input-Device Events\r\n * @property {Object} DEVICE_BUTTON - Input-Device Buttons\r\n * @property {Object} DEVICE_ACTION - Input-Device Actions\r\n * @property {Object} HUD_ELEMENT - GUI & HUD Element types\r\n * @property {Object} HUD_ACTION - GUI & HUD Element actions\r\n * @property {Object} HUD_DRAW - GUI & HUD Element draw types\r\n */\r\n\r\n\r\n/**\r\n * pxlNav Enums\r\n * \r\n * When a 'type' needs to be determined, enums help to show the available options.\r\n * \r\n * @name pxlEnums\r\n * @class\r\n * @type {Object}\r\n * \r\n * @property {Object} pxlEnums - pxlNav {Enums} contains all the enums used in pxlNav\r\n * @property {Object} VERBOSE_LEVEL - Console logging levels\r\n * @property {Object} FRAMEWORK - Framework types\r\n * @property {Object} ANTI_ALIASING - Anti-aliasing settings\r\n * @property {Object} RENDER_LAYER - Render Order Layers\r\n * @property {Object} SKY_HAZE - Sky Haze settings\r\n * @property {Object} SHADOW_MAP - Shadow edge softness settings\r\n * @property {Object} CAMERA_EVENT - Camera event types\r\n * @property {Object} COLLIDER_TYPE - Collider internal types\r\n * @property {Object} GEOMETRY_SIDE - Geometry side types\r\n * @property {Object} COLOR_SHIFT - Color space conversion options\r\n * @property {Object} USER_SPEED - User speed settings\r\n * @property {Object} DEVICE_TYPE - Input-Device Types\r\n * @property {Object} DEVICE_EVENT - Input-Device Events\r\n * @property {Object} DEVICE_BUTTON - Input-Device Buttons\r\n * @property {Object} DEVICE_ACTION - Input-Device Actions\r\n * @property {Object} HUD_ELEMENT - GUI & HUD Element types\r\n * @property {Object} HUD_ACTION - GUI & HUD Element actions\r\n * @property {Object} HUD_DRAW - GUI & HUD Element draw types\r\n */\r\n\r\n// -- -- --\r\n\r\n\r\n/**\r\n * Console logging levels\r\n * @name VERBOSE_LEVEL\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} NONE - No console logging\r\n * @property {number} ERROR - Log only errors\r\n * @property {number} WARN - Log errors and warnings\r\n * @property {number} INFO - Log errors, warnings, and info\r\n * @property {number} DEBUG - Log all console messages\r\n */\r\nexport const VERBOSE_LEVEL = {\r\n\t'NONE' : 0,\r\n\t'ERROR' : 1,\r\n\t'WARN' : 2,\r\n\t'INFO' : 3,\r\n\t'DEBUG' : 4\r\n};\r\n\r\n\r\n/**\r\n * Framework types\r\n */\r\nexport const FRAMEWORK = {\r\n\t'REACT' : 0,\r\n\t'NEXT' : 1,\r\n\t'NATIVE' : 2\r\n};\r\n\r\n/**\r\n * Known File Types in pxlNav\r\n * \r\n * Used internally to determine the file type when loading scene + asset files.\r\n * \r\n * More to come as support changes,\r\n * \r\n * Note: GLB can support WEBP textures while most CGI programs cannot.\r\n *         If your CGI program cannot support WEBP,\r\n *           Build + use Three.js or pxlNav materials in your pxlRoom\r\n * \r\n * @name FILE_TYPE\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} AUTO - Auto detect file type on pre-load\r\n * @property {number} JPG - JPG file type\r\n * @property {number} JPEG - JPEG file type\r\n * @property {number} PNG - PNG file type\r\n * @property {number} WEBP - WEBP file type\r\n * @property {number} FBX - FBX file type\r\n * @property {number} GLTF - GLTF file type\r\n * @property {number} GLB - GLB file type\r\n */\r\nexport const FILE_TYPE = {\r\n  'AUTO' : -1,\r\n  'JPG' : 0,\r\n  'JPEG' : 0,\r\n  'PNG' : 1,\r\n  'WEBP' : 2,\r\n  'FBX' : 3,\r\n  'GLTF' : 4,\r\n  'GLB' : 5\r\n};\r\n\r\n\r\n// Anti-aliasing settings\r\n//   Low - cross kernal sampling, 1 center sample + 4 samples diangonally from center pixel\r\n//   medium - 1 center sample + 8 samples diangonally from center pixel\r\n/**\r\n * Anti-aliasing settings\r\n * @name ANTI_ALIASING\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} OFF - No anti-aliasing\r\n * @property {number} LOW - Low anti-aliasing\r\n * @property {number} MEDIUM - Medium anti-aliasing\r\n * @property {number} HIGH - High anti-aliasing\r\n */\r\nexport const ANTI_ALIASING = {\r\n  'OFF' : 0,\r\n  'LOW' : 1,\r\n  'MEDIUM' : 2,\r\n  'HIGH' : 3\r\n};\r\n\r\n// Render Order Layers\r\n/**\r\n * Render Order Layers\r\n * @name RENDER_LAYER\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} SKY - Sky layer\r\n * @property {number} SCENE - Scene layer\r\n * @property {number} PARTICLES - Particle layer\r\n * @property {number} GLOW - Glow layer\r\n * @property {number} GLOW_MASK - Glow mask layer\r\n */\r\nexport const RENDER_LAYER = {\r\n  'SKY': 0,\r\n  'SCENE': 1,\r\n  'PARTICLES': 5,\r\n  'GLOW': 6,\r\n  'GLOW_MASK' : 7\r\n}\r\n\r\n\r\n// Sky Haze settings should be passed through pxlNav.pxlOptions\r\n/**\r\n * Sky Haze settings\r\n * @name SKY_HAZE\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} OFF - No sky haze\r\n * @property {number} VAPOR - Vapor sky haze\r\n */\r\nexport const SKY_HAZE = {\r\n  'OFF' : 0,\r\n  'VAPOR' : 1\r\n};\r\n\r\n// Shadow edge softness, currently mapped to THREE.PCFSoftShadowMap THREE.PCFShadowMap\r\n// Set in pxlNav.js, used in pxlNav.Environment.js\r\n/**\r\n * Shadow edge softness settings\r\n * @name SHADOW_MAP\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} OFF - No shadow edge softness\r\n * @property {number} BASIC - Basic shadow edge softness\r\n * @property {number} SOFT - Soft shadow edge softness\r\n */\r\nexport const SHADOW_MAP = {\r\n  'OFF' : 0,\r\n  'BASIC' : 1,\r\n  'SOFT' : 2\r\n};\r\n\r\n// Collder internal types\r\n/**\r\n * Collider internal types\r\n * @name COLLIDER_TYPE\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} FLOOR - Default ground/floor type collider\r\n * @property {number} WALL - Can't walk through, even if there is 'FLOOR' beneath it\r\n * @property {number} WALL_TOP - The Wall Top; Will be removed in future versions, use 'FLOOR' instead\r\n * @property {number} CEILING - Not implemented yet\r\n * @property {number} PORTAL_WARP - Warp to another location in the same room\r\n * @property {number} ROOM_WARP - Warp to another location in a different room\r\n * @property {number} ITEM - Callback to item list managed by pxlNav & from Room FBX\r\n * @property {number} SCRIPTED - Callback to current room on collision\r\n * @property {number} HOVERABLE - Mouse hoverable, but not clickable\r\n * @property {number} CLICKABLE - Mouse clickable\r\n */\r\nexport const COLLIDER_TYPE = {\r\n  'FLOOR' : 0, // Default ground/floor type collider\r\n  'WALL' : 1, // Can't walk through, even if there is 'FLOOR' beneath it\r\n  'WALL_TOP' : 2, // The Wall Top; Will be removed in future versions, use 'FLOOR' instead\r\n  'CEILING' : 3, // Not implemented yet\r\n  'PORTAL_WARP' : 4, // Warp to another location in the same room\r\n  'ROOM_WARP' : 5, // Warp to another location in a different room\r\n  'ITEM' : 6, // Callback to item list managed by pxlNav & from Room FBX\r\n  'SCRIPTED' : 7, // Callback to current room on collision\r\n  'HOVERABLE' : 8, // Mouse hoverable, but not clickable\r\n  'CLICKABLE' : 9 // Mouse clickable\r\n};\r\n\r\n// Geometry side types\r\n//   Used when casting rays to determine which side of the geometry was hit\r\n//     More specifics will be added as needed\r\n/**\r\n * Geometry side types\r\n * @name GEOMETRY_SIDE\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} FRONT - Front side of the geometry\r\n * @property {number} BACK - Back side of the geometry\r\n * @property {number} DOUBLE - Both sides of the geometry\r\n */\r\nexport const GEOMETRY_SIDE = {\r\n  'FRONT' : 0,\r\n  'BACK' : 1,\r\n  'DOUBLE' : 2\r\n};\r\n\r\n// Camera event types\r\n//   Subscribe to the pxlCamera object using these event types\r\n//    `pxlNav.pxlCamera.subscribe( CAMERA_EVENT.MOVE, function() { ... } );`\r\n/**\r\n * Camera event types\r\n * @name CAMERA_EVENT\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} MOVE - Camera movement event\r\n * @property {number} ROTATE - Camera rotation event\r\n * @property {number} JUMP - Camera jump event\r\n * @property {number} FALL - Camera fall event\r\n * @property {number} LANDED - Camera landed event\r\n * @property {number} COLLISION - Camera collision event\r\n */\r\nexport const CAMERA_EVENT = {\r\n  'MOVE' : 0,\r\n  'ROTATE' : 1,\r\n  'JUMP' : 2,\r\n  'FALL' : 3,\r\n  'LANDED' : 4,\r\n  'COLLISION' : 5\r\n};\r\n\r\n// -- -- --\r\n\r\n// 'COLOR_SHIFT' is used in Utils.js, inturn used when loading assets through FileIO.js\r\n//   The color shift is used to convert color spaces between different platforms\r\n// TODO : Add color correction to pxlNav to re-implement Three's pre-152 asset processing behavior...\r\n/**\r\n * Color space conversion options\r\n * @name COLOR_SHIFT\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} KEEP - Keep the color as is\r\n * @property {number} sRGB_TO_LINEAR - Convert sRGB to Linear color space\r\n * @property {number} LINEAR_TO_sRGB - Convert Linear to sRGB color space\r\n * @property {number} WINDOWS_TO_UNIX - Convert Windows color space to Unix color space\r\n * @property {number} UNIX_TO_WINDOWS - Convert Unix color space to Windows color space\r\n * @property {number} LINEAR_TO_WINDOWS - Convert Linear color space to Windows color space\r\n * @property {number} WINDOWS_TO_LINEAR - Convert Windows color space to Linear color space\r\n * @property {number} LINEAR_TO_UNIX - Convert Linear color space to Unix color space\r\n * @property {number} UNIX_TO_LINEAR - Convert Unix color space to Linear color space\r\n */\r\nexport const COLOR_SHIFT = {\r\n  'KEEP' : 0,\r\n  'sRGB_TO_LINEAR' : 1,\r\n  'LINEAR_TO_sRGB' : 2,\r\n  'WINDOWS_TO_UNIX' : 3,\r\n  'UNIX_TO_WINDOWS' : 4,\r\n  'LINEAR_TO_WINDOWS' : 5,\r\n  'WINDOWS_TO_LINEAR' : 6,\r\n  'LINEAR_TO_UNIX' : 7,\r\n  'UNIX_TO_LINEAR' : 8\r\n};\r\n\r\n// -- -- --\r\n\r\n\r\n// User Settings\r\n\r\n// User Speed Settings\r\n/**\r\n * User speed settings\r\n * @name USER_SPEED\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} STOP - Stop movement\r\n * @property {number} SLOW - Slow movement\r\n * @property {number} BASE - Base movement\r\n * @property {number} BOOST - Boosted movement\r\n */\r\nexport const USER_SPEED = {\r\n  'STOP' : 0,\r\n  'SLOW' : 1,\r\n  'BASE' : 2,\r\n  'BOOST' : 3\r\n};\r\n\r\n// -- -- --\r\n\r\n// Device Options\r\n\r\n// Input-Device Types\r\n/**\r\n * Input-Device Types\r\n * @name DEVICE_TYPE\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} KEYBOARD - Keyboard input device\r\n * @property {number} MOBILE - Mobile input device\r\n * @property {number} GAMEPAD - Gamepad input device ( Unused )\r\n * @property {number} XR - Extended Reality input device ( Unused )\r\n * @property {number} VR - Virtual Reality input device ( Unused )\r\n * @property {number} AR - Augmented Reality input device ( Unused )\r\n * @property {number} HMD - Head Mounted Display input device ( Unused )\r\n * @property {number} OTHER - Other input device ( Unused )\r\n */\r\nexport const DEVICE_TYPE = {\r\n  'KEYBOARD' : 0,\r\n  'MOBILE' : 1,\r\n  'GAMEPAD' : 2,\r\n  'XR' : 3,\r\n  'VR' : 3, // Future Proofing - Alias for XR; VRs are XR devices\r\n  'AR' : 3, // Future Proofing - Alias for XR; ARs are XR devices\r\n  'HMD' : 3, // Future Proofing - Alias for XR; HMDs are XR devices\r\n  'OTHER' : 4\r\n};\r\n\r\n// Input-Device Events\r\n/**\r\n * Input-Device Events\r\n * @name DEVICE_EVENT\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} CONNECT - Device connected\r\n * @property {number} DISCONNECT - Device disconnected\r\n * @property {number} BUTTON_PRESS - Button pressed\r\n * @property {number} AXIS_MOVE - Axis moved\r\n * @property {number} AXIS_LOOK - Axis looking\r\n */\r\nexport const DEVICE_EVENT = {\r\n  'CONNECT' : 0,\r\n  'DISCONNECT' : 1,\r\n  'BUTTON_PRESS' : 2,\r\n  'AXIS_MOVE' : 3,\r\n  'AXIS_LOOK' : 4\r\n};\r\n\r\n// Input-Device Buttons\r\n//   Mapped to the GamePad API\r\n//    https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API\r\n//  `B_` - Your action buttons\r\n//     The right group of buttons; the 4 Lettered / Colored / Shaped buttons\r\n//      'ABXY' -- 'Square, Triangle, Circle, X' -- 'Red, Green, Blue, Yellow' -- etc.\r\n//  *They are ussually numbered-inputs clockwise starting from the left-top-left\r\n/**\r\n * Input-Device Buttons\r\n * @name DEVICE_BUTTON\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @private\r\n * @property {number} B_L - Button Left\r\n * @property {number} B_U - Button Up\r\n * @property {number} B_R - Button Right\r\n * @property {number} B_D - Button Down\r\n * @property {number} L1 - Left Bumper\r\n * @property {number} R1 - Right Bumper\r\n * @property {number} L2 - Left Trigger\r\n * @property {number} R2 - Right Trigger\r\n * @property {number} SELECT - Select Button\r\n * @property {number} START - Start Button\r\n * @property {number} L3 - Left Stick Click\r\n * @property {number} R3 - Right Stick Click\r\n * @property {number} UP - D-Pad Up\r\n * @property {number} DOWN - D-Pad Down\r\n * @property {number} LEFT - D-Pad Left\r\n * @property {number} RIGHT - D-Pad Right\r\n */\r\nexport const DEVICE_BUTTON = {\r\n  'B_L' : 0,\r\n  'B_U' : 1,\r\n  'B_R' : 2,\r\n  'B_D' : 3,\r\n  'L1' : 4,\r\n  'R1' : 5,\r\n  'L2' : 6,\r\n  'R2' : 7,\r\n  'SELECT' : 8,\r\n  'START' : 9,\r\n  'L3' : 10,\r\n  'R3' : 11,\r\n  'UP' : 12,\r\n  'DOWN' : 13,\r\n  'LEFT' : 14,\r\n  'RIGHT' : 15\r\n};\r\n\r\n/**\r\n * Input-Device Actions\r\n * @name DEVICE_ACTION\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} MOVE - Move action\r\n * @property {number} MOVE_X - Move X axis ( Unused )\r\n * @property {number} MOVE_Y - Move Y axis ( Unused )\r\n * @property {number} LOOK - Look action\r\n * @property {number} LOOK_X - Look X axis ( Unused )\r\n * @property {number} LOOK_Y - Look Y axis ( Unused )\r\n * @property {number} JUMP - Jump action\r\n * @property {number} RUN - Run action\r\n * @property {number} ACTION - Action button\r\n * @property {number} ACTION_ALT - Alternate action button ( Unused )\r\n * @property {number} ITEM - Item button\r\n * @property {number} MENU - Menu button ( Unused )\r\n * @property {number} PAUSE - Pause button\r\n * @property {number} MAP - Map button ( Unused )\r\n */\r\nexport const DEVICE_ACTION = {\r\n  'MOVE' : 0,\r\n  'MOVE_X' : 1,\r\n  'MOVE_Y' : 2,\r\n  'LOOK' : 3,\r\n  'LOOK_X' : 4,\r\n  'LOOK_Y' : 5,\r\n  'JUMP' : 6,\r\n  'RUN' : 7,\r\n  'ACTION' : 8,\r\n  'ACTION_ALT' : 9,\r\n  'ITEM' : 10,\r\n  'MENU' : 11,\r\n  'PAUSE' : 12,\r\n  'MAP' : 13\r\n}\r\n\r\n// -- -- --\r\n\r\n// GUI & HUD Enum Options\r\n/**\r\n * GUI & HUD Element types\r\n * @name HUD_ELEMENT\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} REGION - Region element\r\n * @property {number} DRAG_REGION - Drag Region element\r\n * @property {number} BUTTON - Button element\r\n * @property {number} THUMBSTICK - Thumbstick element\r\n * @property {number} SLIDER - Slider element ( Unused )\r\n * @property {number} IMAGE - Image element ( Unused )\r\n * @property {number} TEXT - Text element ( Unused )\r\n */\r\nexport const HUD_ELEMENT = {\r\n  'REGION' : 0,\r\n  'DRAG_REGION' : 1,\r\n  'BUTTON' : 2,\r\n  'THUMBSTICK' : 3,\r\n  'SLIDER' : 4,\r\n  'IMAGE' : 5,\r\n  'TEXT' : 6\r\n};\r\n\r\n/**\r\n * GUI & HUD Element actions\r\n * @name HUD_ACTION\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @property {number} NONE - No action\r\n * @property {number} CLICK - Click action\r\n * @property {number} HOVER - Hover action\r\n * @property {number} ACTIVE - Active action\r\n * @property {number} DRAG - Drag action\r\n * @property {number} DROP - Drop action ( Unused )\r\n */\r\nexport const HUD_ACTION = {\r\n  'NONE' : 0,\r\n  'CLICK' : 1,\r\n  'HOVER' : 2,\r\n  'ACTIVE' : 3,\r\n  'DRAG' : 4,\r\n  'DROP' : 5\r\n};\r\n\r\n/**\r\n * GUI & HUD Element draw types\r\n * @name HUD_DRAW\r\n * @type {Object}\r\n * @method\r\n * @memberof pxlEnums\r\n * @private\r\n * @property {number} DEFAULT - Default draw type\r\n * @property {number} BLENDED - Blended draw type\r\n */\r\nexport const HUD_DRAW = {\r\n  'DEFAULT' : 0,\r\n  'BLENDED' : 1\r\n};\r\n\r\n// -- -- --\r\n\r\n// Easy access to the enums\r\n//   Reduce the need to import the enums individually\r\n/**\r\n * Full pxlNav Enums list\r\n * @type {Object}\r\n * @memberof pxlEnums\r\n * @property {Object} VERBOSE_LEVEL - Console logging levels\r\n * @property {Object} ANTI_ALIASING - Anti-aliasing settings\r\n * @property {Object} RENDER_LAYER - Render Order Layers\r\n * @property {Object} SKY_HAZE - Sky Haze settings\r\n * @property {Object} SHADOW_MAP - Shadow edge softness settings\r\n * @property {Object} CAMERA_EVENT - Camera event types\r\n * @property {Object} COLLIDER_TYPE - Collider internal types\r\n * @property {Object} GEOMETRY_SIDE - Geometry side types\r\n * @property {Object} COLOR_SHIFT - Color space conversion options\r\n * @property {Object} USER_SPEED - User speed settings\r\n * @property {Object} DEVICE_TYPE - Input-Device Types\r\n * @property {Object} DEVICE_EVENT - Input-Device Events\r\n * @property {Object} DEVICE_BUTTON - Input-Device Buttons\r\n * @property {Object} DEVICE_ACTION - Input-Device Actions\r\n * @property {Object} HUD_ELEMENT - GUI & HUD Element types\r\n * @property {Object} HUD_ACTION - GUI & HUD Element actions\r\n * @property {Object} HUD_DRAW - GUI & HUD Element draw types\r\n */\r\nexport const pxlEnums = {\r\n  VERBOSE_LEVEL,\r\n  FRAMEWORK,\r\n  FILE_TYPE,\r\n  ANTI_ALIASING,\r\n  RENDER_LAYER,\r\n  SKY_HAZE,\r\n  SHADOW_MAP,\r\n  CAMERA_EVENT,\r\n  COLLIDER_TYPE,\r\n  GEOMETRY_SIDE,\r\n  COLOR_SHIFT,\r\n  USER_SPEED,\r\n  DEVICE_TYPE,\r\n  DEVICE_EVENT,\r\n  DEVICE_BUTTON,\r\n  DEVICE_ACTION,\r\n  HUD_ELEMENT,\r\n  HUD_ACTION,\r\n  HUD_DRAW\r\n};\r\n","// Core File IO Helper Utilities\r\n// -- -- -- --\r\n\r\n/**\r\n * @namespace pxlFile\r\n * @description File handling and asset loading\r\n */\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  Color,\r\n  Group,\r\n  Mesh,\r\n  Points,\r\n  PointsMaterial,\r\n  Float32BufferAttribute,\r\n  BufferGeometry,\r\n  BufferAttribute,\r\n  InstancedMesh,\r\n  DoubleSide,\r\n  FrontSide,\r\n  BackSide,\r\n  DynamicDrawUsage,\r\n  Matrix4,\r\n  Quaternion,\r\n  Euler,\r\n  Box3,\r\n  ShaderMaterial,\r\n  LinearSRGBColorSpace,\r\n  SRGBColorSpace,\r\n  NoColorSpace,\r\n  LOD,\r\n  SpotLight,\r\n  MeshBasicMaterial,\r\n  MeshLambertMaterial,\r\n\r\n} from \"../../libs/three/three.module.min.js\";\r\nimport { FBXLoader } from \"../../libs/three/FBXLoader.js\";\r\n\r\nimport {MeshoptDecoder} from \"../../libs/three/meshopt_decoder.module.js\";\r\nimport {GLTFLoader} from \"../../libs/three/GLTFLoader.js\";\r\nimport {DRACOLoader} from \"../../libs/three/DRACOLoader.js\";\r\nimport {KTX2Loader} from \"../../libs/three/KTX2Loader.js\";\r\n\r\nimport { VERBOSE_LEVEL } from \"./Enums.js\";\r\n\r\nexport class FileIO{\r\n  constructor( folderDict={}){\r\n    this.pxlTimer=null;\r\n    this.pxlUtils=null;\r\n    this.pxlQuality=null;\r\n    this.pxlEnums=null;\r\n    this.pxlVideo=null;\r\n    this.pxlCamera=null;\r\n    this.pxlAutoCam=null;\r\n    this.pxlUser=null;\r\n    this.pxlEnv=null;\r\n    this.pxlAnim=null;\r\n    this.pxlDevice=null;\r\n    this.pxlShaders=null;\r\n    this.pxlColliders=null;\r\n\r\n    this.verbose = false;\r\n\r\n    this.pxlOptions={};\r\n    \r\n    // Turn on Verbose Logging to Javascript Console\r\n    this.runDebugger = false;\r\n\r\n    this.assetRoot = this.findInDict( folderDict, \"assetRoot\", \"images/assets/\" );\r\n    this.guiRoot = this.findInDict( folderDict, \"guiRoot\", \"images/GUI/\" );\r\n    this.roomRoot = this.findInDict( folderDict, \"roomRoot\", \"images/rooms/\" );\r\n    this.vidRoot = this.findInDict( folderDict, \"vidRoot\", \"images/screenContent/\" );\r\n    \r\n    this.workerList = [];\r\n\r\n    // No need for these to be in a Consts.js file yet\r\n    this.oneTwoPFour = 1.0/2.4;\r\n    this.twelvePNineTwoDiv = 1.0/12.92;\r\n    this.onePOFiveFiveDiv = 1.0/1.055;\r\n  }\r\n  \r\n  setDependencies( pxlNav ){\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlUtils=pxlNav.pxlUtils;\r\n    this.pxlQuality=pxlNav.pxlQuality;\r\n    this.pxlEnums=pxlNav.pxlEnums;\r\n    this.pxlVideo=pxlNav.pxlVideo;\r\n    this.pxlCamera=pxlNav.pxlCamera;\r\n    this.pxlAutoCam=pxlNav.pxlAutoCam;\r\n    this.pxlUser=pxlNav.pxlUser;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n    this.pxlAnim=pxlNav.pxlAnim;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlShaders=pxlNav.pxlShaders;\r\n    this.pxlColliders=pxlNav.pxlColliders;\r\n    this.pxlOptions=pxlNav.pxlOptions;\r\n\r\n    this.verbose = this.pxlOptions.verbose;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  setLogging( enableLogging = false ){\r\n    this.runDebugger = enableLogging;\r\n  }\r\n\r\n  log(...logger){\r\n    if( this.runDebugger ||\r\n       this.verbose >= this.pxlEnums.VERBOSE_LEVEL.DEBUG\r\n    ){\r\n      console.log(\"---\");\r\n      logger.forEach( (l)=>{ console.log(l); } );\r\n      //logger= logger.length<2 ? logger[0] : logger;\r\n      //console.log(logger);\r\n    }\r\n  }\r\n\r\n  warn(...logger){\r\n    if( this.runDebugger ||\r\n        this.verbose >= this.pxlEnums.VERBOSE_LEVEL.WARN\r\n    ){\r\n      logger.forEach( (l)=>{ console.warn(l); } );\r\n    }\r\n  }\r\n\r\n  debug(...logger){\r\n    if( this.runDebugger ||\r\n        this.verbose >= this.pxlEnums.VERBOSE_LEVEL.DEBUG\r\n    ){\r\n      logger.forEach( (l)=>{ console.log(l); } );\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  toggleDebugger( val=null ){\r\n    if( !val ){\r\n      val = !this.runDebugger;\r\n    }\r\n    this.runDebugger = val;\r\n  }\r\n\r\n  findInDict( dict, key, def ){\r\n    if( dict.hasOwnProperty(key) ){\r\n      return dict[key];\r\n    }else{\r\n      dict[key]=def;\r\n      return def;\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  convertVertColor( meshObj, space=this.pxlEnums.COLOR_SHIFT.KEEP ){\r\n    if (meshObj.geometry && meshObj.geometry.attributes && meshObj.geometry.attributes.color) {\r\n      let colors = meshObj.geometry.attributes.color;\r\n      for( let x=0; x<colors.count; ++x ){\r\n        let color = new Color().fromBufferAttribute(colors, x);\r\n        this.pxlUtils.convertColor(color, space);\r\n        colors.setXYZ(x, color.r, color.g, color.b);\r\n      }\r\n      colors.needsUpdate = true;\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Check for UserData on the Mesh\r\n  // envObj = Environment Class Object\r\n  // envScene = Environment ThreeJS Scene Object\r\n  // mesh = Current Object To Check For UserData Entries\r\n  checkForUserData( envObj, envScene, mesh ){\r\n    if( mesh.hasOwnProperty(\"userData\") ){\r\n      if( mesh.hasOwnProperty(\"material\") ){\r\n        if( mesh.userData.hasOwnProperty(\"doubleSided\") && mesh.userData.doubleSided ){\r\n          mesh.material.side=DoubleSide;\r\n        }else{\r\n          mesh.material.side=FrontSide;\r\n        }\r\n      }\r\n\r\n      if( mesh.userData.hasOwnProperty(\"pSystem\") && mesh.userData.pSystem ){\r\n        let pSystem = this.pSystemBuild( mesh, envObj );\r\n        if( pSystem ){\r\n          if( !envObj.pSystemList ) {\r\n            envObj.pSystemList={};\r\n          }\r\n          envObj.pSystemList[mesh.name]=pSystem;\r\n          envScene.add( pSystem );\r\n          mesh.parent.remove(mesh);\r\n          mesh = pSystem;\r\n        }\r\n      }\r\n\r\n\r\n      // Add to Glow render pass; ran by blurComposer\r\n      if( mesh.userData.hasOwnProperty(\"GlowPass\") && mesh.userData.GlowPass ){\r\n        if( !envObj.geoList['GlowPass'] ){\r\n          envObj.geoList['GlowPass'] = [];\r\n        }\r\n        mesh.layers.set( this.pxlEnums.RENDER_LAYER.GLOW )\r\n        envObj.geoList['GlowPass'].push(mesh);\r\n      }\r\n      if( mesh.userData.hasOwnProperty(\"GlowPassMask\") && mesh.userData.GlowPass ){\r\n        if( !envObj.geoList['GlowPassMask'] ){\r\n          envObj.geoList['GlowPassMask'] = [];\r\n        }\r\n        mesh.layers.set( this.pxlEnums.RENDER_LAYER.GLOW_MASK )\r\n        envObj.geoList['GlowPassMask'].push(mesh);\r\n      }\r\n      \r\n      if( mesh.userData.hasOwnProperty(\"castShadow\") && mesh.userData.castShadow ){\r\n        mesh.castShadow=true;\r\n      }\r\n      if( mesh.userData.hasOwnProperty(\"receiveShadow\") && mesh.userData.receiveShadow ){\r\n        mesh.receiveShadow=true;\r\n      }\r\n      if( mesh.userData.hasOwnProperty(\"Shader\") && mesh.userData.Shader!=\"\" ){\r\n        let toShader = mesh.userData.Shader.trim()\r\n        if( !envObj.shaderGeoList ) {\r\n          envObj.shaderGeoList={};\r\n        }\r\n        envObj.shaderGeoList[mesh.name]=mesh;\r\n      }\r\n      \r\n      if( mesh.userData.hasOwnProperty(\"Emitter\") && mesh.userData.Emitter != \"\" ){\r\n        if( !envObj.emitterList ) {\r\n          envObj.emitterList={};\r\n        }\r\n        if( !envObj.emitterList[mesh.userData.Emitter] ) {\r\n          envObj.emitterList[mesh.userData.Emitter]={};\r\n          envObj.emitterList[mesh.userData.Emitter]['Emitter']=[];\r\n          envObj.emitterList[mesh.userData.Emitter]['Particles']=[];\r\n        }\r\n        envObj.emitterList[mesh.userData.Emitter]['Emitter'].push( mesh );\r\n      }\r\n      \r\n      //Hoverable Object\r\n      if( mesh.userData.hasOwnProperty(\"Hover\") && mesh.userData.Hover ){\r\n        envObj.hasHoverables=true;\r\n        envObj.hoverableList.push(mesh);\r\n      }\r\n      if( mesh.userData.hasOwnProperty(\"Click\") && mesh.userData.Click ){\r\n        envObj.hasClickables=true;\r\n        envObj.clickableList.push(mesh);\r\n      }\r\n      \r\n      this.checkObjectInstancing( envObj, envScene, mesh );\r\n      \r\n      // The Scripted UserData system needs fixing...\r\n      //   Nested Objects should be handled in the main loader\r\n      //   Objects in general should get Parent Transforms by default\r\n      //     Meaning no reason for Scripted outside of storing the group for future use\r\n      if( mesh.userData.hasOwnProperty(\"Scripted\") ){\r\n        //envScene.add( mesh );\r\n        \r\n        if( !envObj.geoList.hasOwnProperty('Scripted') ){\r\n          envObj.geoList['Scripted']={}\r\n        }\r\n        envObj.geoList['Scripted'][mesh.name]=mesh;\r\n        \r\n        let scriptChildren = mesh.children;\r\n        scriptChildren.forEach( (g)=>{\r\n          if( g.name.includes(\"Geo\") ){\r\n            let pos = mesh.position;\r\n            let rot = mesh.rotation;\r\n            let sc = mesh.scale;\r\n            g.position.set( pos.x, pos.y, pos.z )\r\n            g.rotation.set( rot.x, rot.y, rot.z )\r\n            g.scale.set( sc.x, sc.y, sc.z )\r\n            //g.rotation = mesh.rotation.clone() \r\n            //g.scale  = mesh.scale.clone()\r\n            //g.material.side=FrontSide;\r\n            //mesh.add(g);\r\n            \r\n            g.updateMatrix();\r\n            \r\n            // Check for child UserData\r\n            let gChildren = g.children\r\n            gChildren.forEach( (c)=>{\r\n              this.checkForUserData( envObj, envScene, c )\r\n              if( c.type == \"Group\" ){\r\n              // g.add(c);\r\n                c.position.set( pos.x+c.position.x, pos.y+c.position.y, pos.z+c.position.z )\r\n                c.rotation.set( rot.x, rot.y, rot.z )\r\n                c.scale.set( sc.x, sc.y, sc.z )\r\n              }\r\n              c.updateMatrix();\r\n            });\r\n            \r\n            \r\n          }else if( g.name.includes(\"Colliders\") ){\r\n            let pos = mesh.position;\r\n            let rot = mesh.rotation;\r\n            let sc = mesh.scale;\r\n            //g.position.set( pos.x, pos.y, pos.z )\r\n            //g.rotation.set( rot.x, rot.y, rot.z )\r\n            //g.scale.set( sc.x, sc.y, sc.z )\r\n            g.position.set( pos.x, pos.y, pos.z )\r\n            g.rotation.set( rot.x, rot.y, rot.z )\r\n            g.scale.set( sc.x, sc.y, sc.z )\r\n            g.updateMatrix();\r\n            g.visible=false;\r\n            //mesh.add(g);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  /**\r\n   * The `meshSettings={}` object is used to set the mesh properties for the object.\r\n   * \r\n   * Pass `meshSettings` as - `pxlRoom.materialList[objectName].meshSettings={}`\r\n   * \r\n   * Supported properties are:\r\n   * - `frontSided` - Boolean, sets the mesh to be front sided (default) or back sided\r\n   * - `doubleSided` - Boolean, sets the mesh to be double sided\r\n   * - `renderOrder` - Integer, sets the render order for the mesh\r\n   * - `castShadow` - Boolean, sets the mesh to cast shadows\r\n   * - `receiveShadow` - Boolean, sets the mesh to receive shadows\r\n   * @param {Object} meshObject - The ThreeJS mesh object to check for settings\r\n   * @param {Object} baseMaterial - The material object to check for meshSettings\r\n   */\r\n  checkForMeshSettings( meshObject, baseMaterial ){\r\n    if( baseMaterial.hasOwnProperty(\"meshSettings\") ){\r\n      if( baseMaterial.meshSettings.hasOwnProperty(\"frontSided\") ){\r\n        meshObject.side = baseMaterial.meshSettings.frontSided ? FrontSide : BackSide;\r\n      }\r\n      if( baseMaterial.meshSettings.hasOwnProperty(\"doubleSided\") ){\r\n        meshObject.side = baseMaterial.meshSettings.doubleSided ? DoubleSide : FrontSide;\r\n      }\r\n      if( baseMaterial.meshSettings.hasOwnProperty(\"renderOrder\") ){\r\n        meshObject.renderOrder = baseMaterial.meshSettings.renderOrder;\r\n      }\r\n      if( baseMaterial.meshSettings.hasOwnProperty(\"castShadow\") ){\r\n        meshObject.castShadow = baseMaterial.meshSettings.castShadow;\r\n      }\r\n      if( baseMaterial.meshSettings.hasOwnProperty(\"receiveShadow\") ){\r\n        meshObject.receiveShadow = baseMaterial.meshSettings.receiveShadow;\r\n      }\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  canAppendChildren( envObj, mesh ){\r\n    if( mesh.type != \"Group\" ){\r\n      return false;\r\n    }\r\n    \r\n    let ret = true;\r\n    //if( mesh.hasOwnProperty(\"userData\") && mesh.userData.hasOwnProperty(\"Scripted\") && mesh.userData.Scripted ){\r\n    if( envObj.geoList.hasOwnProperty('Scripted') && envObj.geoList.Scripted.hasOwnProperty(mesh.name) ){\r\n      //console.log(envObj.geoList.Scripted, envObj.geoList.Scripted.hasOwnProperty(mesh.name), mesh.name)\r\n      ret=false;\r\n    }\r\n    return ret;\r\n  }\r\n  \r\n  canAddToScene( envObj, mesh ){\r\n    let valid = true;\r\n    if( mesh.hasOwnProperty(\"userData\")\r\n        && (mesh.userData.hasOwnProperty(\"Instance\") || mesh.userData.hasOwnProperty(\"MobileInstance\") )\r\n        && envObj.hasOwnProperty(\"baseInstancesNames\")\r\n        && envObj.baseInstancesNames.hasOwnProperty(mesh.userData.Instance) ){\r\n      valid = false;\r\n    }\r\n    return valid;\r\n  }\r\n  \r\n  checkIsGlassLiquid( envObj, envScene, mesh, matList ){\r\n    let isGlass = false;\r\n    if( mesh.userData.hasOwnProperty(\"isGlass\") && mesh.userData.isGlass ){\r\n      isGlass=true;\r\n    }\r\n    if( mesh.userData.hasOwnProperty(\"isLiquid\") && mesh.userData.isLiquid ){\r\n      isGlass=true;\r\n    }\r\n\r\n    if( !isGlass ){\r\n      return false;\r\n    }\r\n    \r\n    this.log(\"Glass Detected - \",mesh.name);\r\n\r\n\r\n    if(!envObj.glassGroup){\r\n      let glassGrp=new Group();\r\n      envObj.glassGroup=glassGrp;\r\n      envScene.add(glassGrp);\r\n    }\r\n\r\n\r\n    let cBackMat=mesh.material.clone();\r\n    mesh.material=cBackMat;\r\n    mesh.material.transparent=true;\r\n    mesh.material.opacity=.5;\r\n    mesh.material.shininess=20;\r\n    mesh.material.specular=mesh.material.color.clone();\r\n    mesh.material.specular.r = mesh.material.specular.r*.5 +.1;\r\n    mesh.material.specular.g = mesh.material.specular.g*.5 +.1;\r\n    mesh.material.specular.b = mesh.material.specular.b*.5 +.1;\r\n    \r\n    //mesh.material.side=FrontSide;\r\n    //mesh.material.side=FrontSide;\r\n    //mesh.material.depthTest=true;\r\n    mesh.material.side=BackSide;\r\n    mesh.material.depthWrite=false;\r\n    mesh.matrixAutoUpdate=false;\r\n    mesh.renderOrder = 1 + envObj.glassList.length;\r\n    envObj.glassList.push(mesh);\r\n    envObj.glassGroup.add(mesh);\r\n    \r\n    let cFrontGeo = mesh.geometry.clone()\r\n    let cFrontMat= mesh.material.clone();\r\n    cFrontMat.copy( mesh.material );\r\n    let cFrontMesh = new Mesh( cFrontGeo, cFrontMat );\r\n    cFrontMesh.name = mesh.name+\"_Front\";\r\n    cFrontMesh.material.shininess=40;\r\n    cFrontMesh.material.side=FrontSide;\r\n    cFrontMesh.matrixAutoUpdate=false;\r\n    cFrontMesh.renderOrder = 1 + envObj.glassList.length;\r\n    \r\n    \r\n    let curPos=mesh.position;\r\n    let curRot=mesh.rotation;\r\n    let curScale=mesh.scale;\r\n    \r\n    cFrontMesh.rotation.set(curRot.x,curRot.y,curRot.z);\r\n    cFrontMesh.position.set(curPos.x,curPos.y,curPos.z);\r\n    cFrontMesh.scale.set(curScale.x,curScale.y,curScale.z);\r\n    cFrontMesh.updateMatrix();\r\n    \r\n\r\n    mesh.parent.add( cFrontMesh )\r\n    envObj.glassList.push(cFrontMesh);\r\n    envObj.glassGroup.add(cFrontMesh);\r\n\r\n\r\n    return isGlass;\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  // ## Make Instancing actually Instance\r\n  //   Instancing is currently not actually instancing\r\n  //   Object is cloned, raising ram/vram usage\r\n  checkObjectInstancing( envObj, envScene, mesh ){\r\n\r\n    if( !envObj.hasOwnProperty(\"baseInstancesNames\") || !envObj.hasOwnProperty(\"baseInstancesList\") ){\r\n      return false;\r\n    }\r\n\r\n    if( !(mesh.hasOwnProperty(\"userData\") &&\r\n     ( mesh.userData.hasOwnProperty(\"Instance\")) ||\r\n     mesh.userData.hasOwnProperty(\"MobileInstance\") )){\r\n      return false;\r\n    }\r\n    if( !envObj.baseInstancesList.hasOwnProperty(mesh.userData.Instance) ){\r\n      this.warn(`Instance '${mesh.userData.Instance}' not found for ${mesh.name}`);\r\n      return false;\r\n    }\r\n    \r\n    let name = mesh.name;\r\n    this.log(\"Generate Instance - \",name);\r\n    \r\n    if( !envObj.geoList.hasOwnProperty(\"InstanceObjects\") ){\r\n      envObj.geoList['InstanceObjects']={};\r\n    }\r\n    \r\n    // -- -- --\r\n\r\n    // Regex attribute checks --\r\n\r\n    // Instance Geometry Object for LOD level N\r\n    let lodInstanceRegex = new RegExp( /(instlod)\\d+/, \"i\" );\r\n    let lodNumberRegex = new RegExp( /\\d+/, \"i\" );\r\n\r\n    // Instance Switch Distance for LOD level N\r\n    let lodDistRegex = new RegExp( /(instlod)\\d+(dist)/, \"i\" );\r\n\r\n    // Instance Mesh Point Skip Rate for LOD level N\r\n    //   If no child mesh with lod level found,\r\n    //     It will auto skip verts to spawn at to help with performance\r\n    let lodSkipRegex = new RegExp( /(instlod)\\d+(skip)/, \"i\" );\r\n\r\n    // -- -- --\r\n\r\n    // LOD data objects\r\n\r\n    let lodMeshes = { 'lod0' : \r\n      { \r\n        'mesh': mesh, \r\n        'dist': 1 \r\n      }\r\n    };\r\n\r\n    let instObjectData = {\r\n      'mesh' : mesh,\r\n      'instMesh' : null,\r\n      'dist' : 1,\r\n      'skip' : 0\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    // Base variables\r\n\r\n    let hasLods = false;\r\n    let hasInstSettings = {};\r\n    let instanceBaseObject = null;\r\n    let foundInstLODLevels = {};\r\n\r\n    // -- -- --\r\n\r\n    // Check for LOD\r\n\r\n    try{\r\n      let userDataKeys = Object.keys( mesh.userData );\r\n\r\n      userDataKeys.forEach( ( dataKey )=>{\r\n        let isInstanceLODLevel = lodInstanceRegex.test (dataKey );\r\n        if( isInstanceLODLevel ){\r\n          let curLevelNumber = lodNumberRegex.exec( dataKey );\r\n          if( !curLevelNumber || curLevelNumber.length < 1 ){\r\n            return;\r\n          }\r\n          curLevelNumber = parseInt( curLevelNumber[0] );\r\n\r\n          let levelData = {};\r\n          if( foundInstLODLevels.hasOwnProperty( curLevelNumber ) ){\r\n            levelData = foundInstLODLevels[ curLevelNumber ];\r\n          }else{\r\n            foundInstLODLevels[ curLevelNumber ] = Object.assign( {}, instObjectData );\r\n            levelData = foundInstLODLevels[ curLevelNumber ];\r\n          }\r\n\r\n          if( lodDistRegex.test( dataKey ) ){\r\n            let curDist = mesh.userData[ dataKey ];\r\n            levelData['dist'] = curDist;\r\n          }else if( lodSkipRegex.test( dataKey ) ){\r\n            let curSkip = mesh.userData[ dataKey ];\r\n            levelData['skip'] = curSkip;\r\n          }else{\r\n            levelData['instMesh'] = mesh.userData[ dataKey ];\r\n          }\r\n        }\r\n      });\r\n    }catch(e){\r\n      if( this.verbose >= this.pxlEnums.VERBOSE_LEVEL.ERROR ){\r\n        console.error(e);\r\n      }\r\n    }\r\n\r\n\r\n    // -- -- --\r\n\r\n\r\n    // Check for Child LODs levels\r\n    let lodChildren = mesh.children;\r\n    \r\n    for( let x=0; x<lodChildren.length; ++x ){ \r\n      if( !lodChildren[x].hasOwnProperty(\"userData\") ){\r\n        continue;\r\n      }\r\n      let curUserData = lodChildren[x].userData;\r\n      for( let c=0; c<curUserData.length; ++c ){\r\n        let dataKey = curUserData[c];\r\n        let curKey = lodInstanceRegex.test( dataKey );\r\n        let curDataObj = Object.assign( {}, instObjectData );\r\n        if( curKey ){\r\n          let curLevelNumber = lodNumberRegex.exec( dataKey );\r\n          let onParent = foundInstLODLevels.hasOwnProperty( curLevelNumber );\r\n          if( onParent ){\r\n            curDataObj = foundInstLODLevels[ curLevelNumber ];\r\n          }\r\n        }\r\n        if( lodDistRegex.test( dataKey ) ){\r\n          let curDist = curUserData[ dataKey ];\r\n          curDataObj['dist'] = curDist;\r\n        }else if( lodSkipRegex.test( dataKey ) ){\r\n          let curSkip = curUserData[ dataKey ];\r\n          curDataObj['skip'] = curSkip;\r\n        }else{\r\n          curDataObj['instMesh'] = curUserData[ dataKey ];\r\n        } \r\n      }\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    let lodKeysList = Object.keys( lodMeshes );\r\n\r\n    try{\r\n      if( hasLods ){\r\n        instanceBaseObject = new LOD();\r\n        instanceBaseObject.name = name + \"_LOD_TOPLVL\";\r\n        instanceBaseObject.userData = Object.assign( {},  mesh.userData );\r\n        instanceBaseObject.userData['pxlInstanceToMesh'] = true;\r\n        envObj.geoList['InstanceObjects'][name] = instanceBaseObject;\r\n        envObj.lodList.push( instanceBaseObject );\r\n        mesh.parent.add(instanceBaseObject);\r\n      }\r\n\r\n      for( let x=0; x<lodKeysList.length; ++x ){\r\n        let curMesh = lodMeshes[lodKeysList[x]].mesh;\r\n        let curPos = curMesh.position;\r\n        let curRot = curMesh.rotation;\r\n        let curScale = curMesh.scale;\r\n        \r\n        let instBaseName = this.pxlOptions.mobile &&\r\n            curMesh.userData.hasOwnProperty(\"MobileInstance\") ? \r\n            curMesh.userData.MobileInstance : curMesh.userData.Instance;\r\n        let instBase = envObj.baseInstancesList[ instBaseName ];\r\n\r\n        if( curMesh.type == \"Mesh\" ){\r\n          let matrix = new Matrix4();\r\n          let position = new Vector3();\r\n          let normal = new Vector3();\r\n          let quaternion = new Quaternion();\r\n          let scale = new Vector3(1, 1, 1);\r\n          const hasColor = curMesh.geometry.attributes.hasOwnProperty(\"color\");\r\n          let userDataKeys = Object.keys( curMesh.userData );\r\n          let userDataKeysLower = userDataKeys.map( (c)=> c.toLowerCase() );\r\n\r\n          let hasFitScale = false;\r\n          let minScale = 0;\r\n          let maxScale = 1;\r\n          if( userDataKeysLower.includes(\"minscale\") ){\r\n            hasFitScale = true;\r\n            minScale = curMesh.userData[ userDataKeys[ userDataKeysLower.indexOf(\"minscale\") ] ];\r\n          }\r\n          if( userDataKeysLower.includes(\"maxscale\") ){\r\n            hasFitScale = true;\r\n            maxScale = curMesh.userData[ userDataKeys[ userDataKeysLower.indexOf(\"maxscale\") ] ];\r\n          }\r\n\r\n          // Prevent dupelicate instances\r\n          //   Verts are split, so neighboring polygons have stacked vertices\r\n          //     'entry' checks those dupes\r\n          let pointRecorder = {};\r\n          let instanceMatricies = [];\r\n          for (let x = 0; x < curMesh.geometry.attributes.position.count; ++x) {\r\n            position.fromBufferAttribute(curMesh.geometry.attributes.position, x);\r\n            let entry = position.toArray();\r\n\r\n            // Flatten array elements to 0.01 precision joined by \",\"\r\n            entry = this.pxlUtils.flattenArrayToStr( entry );\r\n\r\n            if( !pointRecorder.hasOwnProperty(entry) ){\r\n\r\n              // Check if normals exist, if not use a random rotation\r\n              //   This prevents the object from being rotated the same\r\n              if( !curMesh.geometry.attributes.normal ){\r\n                let randomNormal = new Vector3( Math.random(), Math.random()*.1, Math.random() ).normalize();\r\n                normal.copy( randomNormal );\r\n                let curUp = new Vector3(0, 1, 0).cross( randomNormal ).normalize();\r\n                quaternion.setFromUnitVectors( randomNormal, curUp );\r\n              }else{\r\n                normal.fromBufferAttribute(curMesh.geometry.attributes.normal, x);\r\n                let curUp = normal.clone();\r\n                curUp = curUp.cross( new Vector3(0, 1, 0) ).cross( curUp ).normalize();\r\n                quaternion.setFromUnitVectors( normal, curUp );\r\n              }\r\n              \r\n              \r\n              let curInstScale = scale;\r\n              if( hasColor ){\r\n                let curScalar = curMesh.geometry.attributes.color.getX(x);\r\n                if( hasFitScale ){\r\n                  // Scale the object based on object parameter `minScale` & `maxScale`\r\n                  curScalar = minScale + (maxScale - minScale) * curScalar;\r\n                }\r\n                curInstScale = new Vector3(curScalar, curScalar, curScalar);\r\n              }\r\n              matrix.compose(position, quaternion, curInstScale);\r\n              instanceMatricies.push( matrix.clone() );\r\n              pointRecorder[entry]=true;\r\n            }\r\n          }\r\n          if( instanceMatricies.length > 0 ){\r\n            let instancedMesh = new InstancedMesh(instBase.geometry, instBase.material, instanceMatricies.length);\r\n            instancedMesh.instanceMatrix.setUsage(DynamicDrawUsage);\r\n\r\n            instancedMesh.userData = Object.assign( {},  curMesh.userData );\r\n            instancedMesh.userData['pxlInstanceToMesh'] = true;\r\n\r\n            /*if( instBase.material.hasOwnProperty(\"curMeshSettings\") ){\r\n              if( instBase.material.curMeshSettings.hasOwnProperty(\"renderOrder\") ){\r\n                instancedMesh.renderOrder = instBase.material.curMeshSettings.renderOrder;\r\n              }\r\n            }*/\r\n            this.checkForMeshSettings( instancedMesh, instBase.material );\r\n            \r\n            for (let x = 0; x < instanceMatricies.length; ++x) {\r\n              instancedMesh.setMatrixAt( x, instanceMatricies[x] );\r\n            }\r\n\r\n\r\n            instancedMesh.visible = true;\r\n            instancedMesh.position.set(curPos.x,curPos.y,curPos.z);\r\n            instancedMesh.rotation.set(curRot.x,curRot.y,curRot.z);\r\n            instancedMesh.scale.set(curScale.x,curScale.y,curScale.z);\r\n\r\n            instancedMesh.updateMatrix();\r\n\r\n            if( hasLods ){\r\n\r\n              instancedMesh.name = name + \"Geo_\" + lodKeysList[x];\r\n              let curDist = lodMeshes[lodKeysList[x]].dist;\r\n              instanceBaseObject.addLevel(instancedMesh, curDist);\r\n\r\n            }else{\r\n\r\n              instancedMesh.name = name + \"Geo\";\r\n              envObj.geoList['InstanceObjects'][name] = instancedMesh;\r\n              curMesh.parent.add(instancedMesh);\r\n            }\r\n            curMesh.visible = false;\r\n            curMesh.parent.remove(curMesh);\r\n          }\r\n        }else{\r\n          // Clone the base instance; single instance\r\n          let instancedMesh = new InstancedMesh(instBase.geometry, instBase.material, 1);\r\n          instancedMesh.instanceMatrix.setUsage(DynamicDrawUsage);\r\n\r\n          instancedMesh.userData = Object.assign( {},  curMesh.userData );\r\n          instancedMesh.userData['pxlInstanceToMesh'] = false;\r\n\r\n          this.checkForMeshSettings( instancedMesh, instBase.material );\r\n\r\n\r\n          let altInstPlacement = false;\r\n          if( curMesh.userData.hasOwnProperty(\"fixInstMatrix\") ){\r\n            altInstPlacement = !!curMesh.userData.fixInstMatrix;\r\n          }\r\n\r\n          if( altInstPlacement ){\r\n            instancedMesh.rotation.set(curRot.x,curRot.y,curRot.z);\r\n            instancedMesh.position.set(curPos.x,curPos.y,curPos.z);\r\n            instancedMesh.scale.set(curScale.x,curScale.y,curScale.z);\r\n          }else{\r\n            const matrix = new Matrix4();\r\n            matrix.compose(curPos, new Quaternion().setFromEuler(curRot), curScale);\r\n            instancedMesh.setMatrixAt(0, matrix);\r\n          }\r\n\r\n          instancedMesh.visible=true;\r\n          instancedMesh.updateMatrix();\r\n\r\n          if( hasLods ){\r\n\r\n            instancedMesh.name = name + \"Geo_\" + lodKeysList[x];\r\n            let curDist = lodMeshes[lodKeysList[x]].dist;\r\n            instanceBaseObject.addLevel(instancedMesh, curDist);\r\n\r\n          }else{\r\n\r\n            instancedMesh.name = name + \"Geo\";\r\n            envObj.geoList['InstanceObjects'][name] = instancedMesh;\r\n            curMesh.parent.add(instancedMesh);\r\n          }\r\n          \r\n          curMesh.visible=false;\r\n          curMesh.parent.remove(curMesh);\r\n\r\n        }\r\n      }\r\n    }catch(e){\r\n      if( this.verbose >= this.pxlEnums.VERBOSE_LEVEL.ERROR ){\r\n        console.error(e);\r\n      }\r\n    }\r\n\r\n    if( this.verbose >= this.pxlEnums.VERBOSE_LEVEL.DEBUG && hasLods ){\r\n      let status = \"Failed\";\r\n      let createdLods = -1;\r\n      let lodKeys = [];\r\n      if( instanceBaseObject?.levels ){\r\n        status = \"Created\";\r\n        createdLods = instanceBaseObject.levels;\r\n        lodKeys = Object.keys( createdLods );\r\n      }\r\n\r\n      let printText = \"Instance LODs \" + status + \" - \" + name;\r\n      this.log( printText );\r\n      if( lodKeys.length > 0 ){\r\n        printText = \"LOD Levels - \" + createdLods;\r\n        this.log( printText );\r\n        this.log( instanceBaseObject );\r\n      }\r\n    }\r\n\r\n    /*\r\n    // Dupe the base object; single dupe\r\n    \r\n    let dupe=instBase.clone();//new Mesh(instBase.geometry.clone());\r\n    dupe.rotation.set(curRot.x,curRot.y,curRot.z);\r\n    dupe.position.set(curPos.x,curPos.y,curPos.z);\r\n    dupe.scale.set(curScale.x,curScale.y,curScale.z);\r\n      \r\n    dupe.visible=true;\r\n    dupe.updateMatrix();\r\n    \r\n    let curSide = FrontSide;\r\n    if(instBase.userData.doubleSided){\r\n      curSide=DoubleSide;\r\n    }\r\n    dupe.material.side=curSide;\r\n    dupe.name = name+\"Geo\";\r\n      \r\n    envObj.geoList['InstanceObjects'][name]=dupe;\r\n    mesh.parent.add( dupe );\r\n    */\r\n  }\r\n  \r\n  \r\n\r\n// -- -- --\r\n\r\n\r\n\r\n\r\npSystemBuild( mesh, envObj ){\r\n  if( !mesh.hasOwnProperty(\"userData\") ||\r\n      !mesh.userData.hasOwnProperty(\"pSystem\") ||\r\n      !mesh.userData.pSystem ){\r\n    return null;\r\n  }\r\n\r\n  this.log(\"Processing Particle System - \", mesh.name);\r\n\r\n  try{\r\n    let curMesh = mesh;\r\n    let curPos = curMesh.position;\r\n    let curRot = curMesh.rotation;\r\n    let curScale = curMesh.scale;\r\n\r\n    if( curMesh.type == \"Mesh\" ){\r\n      let matrix = new Matrix4();\r\n      let position = new Vector3();\r\n      let normal = new Vector3();\r\n      let quaternion = new Quaternion();\r\n      let scale = new Vector3(1, 1, 1);\r\n      const hasColor = curMesh.geometry.attributes.hasOwnProperty(\"color\");\r\n      let userDataKeys = Object.keys( curMesh.userData );\r\n      let userDataKeysLower = userDataKeys.map( (c)=> c.toLowerCase() );\r\n\r\n      let hasFitScale = false;\r\n      let minScale = 0;\r\n      let maxScale = 1;\r\n      if( userDataKeysLower.includes(\"minscale\") ){\r\n        hasFitScale = true;\r\n        minScale = curMesh.userData[ userDataKeys[ userDataKeysLower.indexOf(\"minscale\") ] ];\r\n      }\r\n      if( userDataKeysLower.includes(\"maxscale\") ){\r\n        hasFitScale = true;\r\n        maxScale = curMesh.userData[ userDataKeys[ userDataKeysLower.indexOf(\"maxscale\") ] ];\r\n      }\r\n\r\n      // Prevent dupelicate instances\r\n      //   Verts are split, so neighboring polygons have stacked vertices\r\n      //     'entry' checks those dupes\r\n      let pointRecorder = {};\r\n      let particlePositions = [];\r\n      let hasColorAttr = curMesh.geometry.attributes.hasOwnProperty(\"color\");\r\n      let particleColors = [];\r\n      for (let x = 0; x < curMesh.geometry.attributes.position.count; ++x) {\r\n        position.fromBufferAttribute(curMesh.geometry.attributes.position, x);\r\n        let entry = position.toArray();\r\n\r\n        // Flatten array elements to 0.01 precision joined by \",\"\r\n        entry = this.pxlUtils.flattenArrayToStr( entry );\r\n\r\n        if( !pointRecorder.hasOwnProperty(entry) ){\r\n\r\n          if( hasColorAttr ){\r\n            particleColors.push( curMesh.geometry.attributes.color.getX(x) );\r\n            particleColors.push( curMesh.geometry.attributes.color.getY(x) );\r\n            particleColors.push( curMesh.geometry.attributes.color.getZ(x) );\r\n          }\r\n          \r\n          \r\n          let curInstScale = scale;\r\n          if( hasColor ){\r\n            let curScalar = curMesh.geometry.attributes.color.getX(x);\r\n            if( hasFitScale ){\r\n              // Scale the object based on object parameter `minScale` & `maxScale`\r\n              curScalar = minScale + (maxScale - minScale) * curScalar;\r\n            }\r\n            curInstScale = new Vector3(curScalar, curScalar, curScalar);\r\n          }\r\n          particlePositions.push( position.x );\r\n          particlePositions.push( position.y );\r\n          particlePositions.push( position.z );\r\n          pointRecorder[entry]=true;\r\n        }\r\n      }\r\n      if( particlePositions.length > 0 ){\r\n        let pPositionArray = new Float32BufferAttribute( particlePositions, 3 );\r\n        \r\n        // -- -- --\r\n\r\n        let pointBufferGeo = new BufferGeometry();\r\n        pointBufferGeo.setAttribute( 'position', pPositionArray );\r\n/*\r\n        if( hasColorAttr ){\r\n          let pColorArray = new Float32BufferAttribute( particleColors, 3 );\r\n          pointBufferGeo.setAttribute( 'color', pColorArray );\r\n        }*/\r\n\r\n        pointBufferGeo.userData = Object.assign( {},  curMesh.userData );\r\n        pointBufferGeo.userData['pSystem'] = true;\r\n\r\n        let zero = new Vector3(0, 0, 0);\r\n        if( !zero.equals( curMesh.position ) ){\r\n          pointBufferGeo.userData['pPosition'] = curMesh.position;\r\n        }\r\n        if( !zero.equals( curMesh.rotation ) ){\r\n          pointBufferGeo.userData['pRotation'] = curMesh.rotation;\r\n        }\r\n        if( !zero.equals( curMesh.scale ) ){\r\n          pointBufferGeo.userData['pScale'] = curMesh.scale;\r\n        }\r\n        pointBufferGeo.computeBoundingBox();\r\n        pointBufferGeo.computeBoundingSphere();\r\n\r\n        envObj.particleList[ curMesh.name ] = pointBufferGeo ;\r\n\r\n        \r\n        curMesh.parent.remove(curMesh);\r\n        \r\n        return;\r\n        \r\n        // -- -- --\r\n\r\n        let curGeo = curMesh.geometry;\r\n        let pointMtl = null;\r\n        \r\n        if( envObj.materialList.hasOwnProperty( curMesh.name ) ){\r\n          pointMtl = envObj.materialList[ curMesh.name ];\r\n        }\r\n        if( !pointMtl ){\r\n          pointMtl = new PointsMaterial({ color : 0xffffff, size: 20.1, sizeAttenuation: true });\r\n        }\r\n        pointMtl.depthWrite = false;\r\n        pointMtl.depthTest = false;\r\n        pointMtl.transparent = true;\r\n\r\n        if( hasColorAttr ){\r\n          pointMtl.vertexColors = true;\r\n        }\r\n\r\n        //let pointMesh = new Points( pointBufferGeo, pointMtl );\r\n\r\n        let pointMesh = new Points( curGeo, pointMtl );\r\n        console.log(pointMesh)\r\n        pointMesh.name = curMesh.name+\"_pSystem\";\r\n        pointMesh.position.set(curPos.x,curPos.y,curPos.z);\r\n        pointMesh.rotation.set(curRot.x,curRot.y,curRot.z);\r\n        pointMesh.scale.set(curScale.x,curScale.y,curScale.z);\r\n        pointMesh.updateMatrix();\r\n        pointMesh.visible=true;\r\n        pointMesh.matrixAutoUpdate=false;\r\n        pointMesh.userData = Object.assign( {}, pointMesh.userData,  curMesh.userData );\r\n        pointMesh.userData['pSystem'] = true;\r\n\r\n        envObj.particleList[ curMesh.name ] = pointMesh;\r\n\r\n        envObj.scene.add( pointMesh );\r\n\r\n        envObj.materialList[ curMesh.name ] = pointMtl;\r\n\r\n        console.log( pointMesh)\r\n\r\n      }\r\n    }\r\n  }catch(e){\r\n    if( this.verbose >= this.pxlEnums.VERBOSE_LEVEL.ERROR ){\r\n      console.error(e);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n  \r\n // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n\r\n\r\n  // TODO : Apparently traversing FBX objects with no children on a leaf breaks\r\n  //   Oh well... Just get it done\r\n  \r\n  // Currently only used for loading core scene assets;\r\n  //   Initial Camera Position, Avatar Geometry, Items\r\n  // TODO : Convert into a set of agregate lists, to allow for non-scene structure settings.\r\n  //          If a material has transparency & reflective settings, should be flagged \"glass\"  \r\n  //            Even if its not in the \"Scene\" group.\r\n  loadSceneFBX(objPath, imgPath, transList, verboseLoading,meshKey,addToScene){\r\n    if(meshKey!=''){ // Prep for IsLoaded checks\r\n      this.pxlEnv.geoLoadListComplete=0;\r\n      this.pxlEnv.geoLoadList[meshKey]=0;\r\n    }\r\n    let addedGlow=0;\r\n    let pingCount=0;\r\n    \r\n    var fbxLoader=new FBXLoader();\r\n    fbxLoader.load( objPath, (curFbx)=>{\r\n      let groups=curFbx.children;\r\n      let groupTypes={};\r\n      let groupNames=[];\r\n\r\n      groups.forEach( (c,x) =>{ \r\n        let curName = c.name.toLowerCase();\r\n        groupNames.push( curName ); \r\n        groupTypes[ curName ]=x; \r\n      });\r\n\r\n      groupNames.forEach( (curName) =>{\r\n        if(curName.includes('camera')){\r\n          let ch=groups[groupTypes[curName]].children;\r\n          ch.forEach( (c,x)=>{\r\n            c.matrixAutoUpdate=false;\r\n            if(c.name.includes(\"position\")){\r\n              let toPos=c.position.clone();\r\n              this.pxlCamera.cameraPrevPos=toPos.clone();\r\n              this.pxlCamera.camera.position.copy(toPos);\r\n              this.pxlCamera.cameraPos.copy(toPos);\r\n              this.pxlCamera.camera.updateMatrixWorld();\r\n              this.pxlCamera.cameraBooted=true;\r\n              this.pxlEnv.camInitPos=toPos;\r\n              this.pxlEnv.camThumbPos=this.pxlEnv.camThumbPos.clone().add( toPos.clone() );\r\n            }else if(c.name.includes(\"lookat\")){\r\n              let toLookAt=c.position.clone();\r\n              this.pxlCamera.cameraAimTarget.position.copy( toLookAt );\r\n              this.pxlCamera.camera.lookAt(toLookAt);\r\n              this.pxlCamera.camera.updateMatrixWorld();\r\n              this.pxlCamera.cameraPrevLookAt=new Vector3();\r\n              this.pxlEnv.camInitLookAt=toLookAt;\r\n              this.pxlEnv.camThumbLookAt=this.pxlEnv.camThumbLookAt.clone().add( toLookAt.clone() );\r\n            }else if(c.name.includes(\"returnposition\")){\r\n              let toPos=c.position.clone();\r\n              this.pxlEnv.camReturnPos=toPos;\r\n            }else if(c.name.includes(\"returnlookat\")){\r\n              let toPos=c.position.clone();\r\n              this.pxlEnv.camReturnLookAt=toPos;\r\n            }\r\n          });\r\n          this.pxlDevice.touchMouseData.initialQuat=this.pxlCamera.camera.quaternion.clone();\r\n        }\r\n        \r\n        if(curName.includes('Items')){\r\n          let ch=groups[groupTypes[curName]].children;\r\n          let baseMtl=null;\r\n          let lowGravMtl=null;\r\n          let lizardKingMtl=null;\r\n          let infinityZoomMtl=null;\r\n          let starFieldMtl=null;\r\n          while(ch.length>0){\r\n            let g=ch.pop();\r\n            //ch.push(...c.children);\r\n            if(g.type == \"Group\"){\r\n              let curChildren=g.children;\r\n              curChildren.forEach( (c)=>{\r\n                if(c.name.includes(\"Item\")){\r\n                  if( g.name.includes(\"LowGravity\")){\r\n                    if(lowGravMtl==null){\r\n                      lowGravMtl=new ShaderMaterial({\r\n                        uniforms:{\r\n                          color:{value : c.material.emissive.clone() },\r\n                          alphaMap:{type:'t',value : c.material.map },\r\n                          cloudNoise:{type : 't',value : this.pxlEnv.cloud3dTexture},\r\n                          time:{ value:this.pxlTimer.msRunner },\r\n                          intensity: {  type:\"f\", value: 1.5 },\r\n                          rate: { type:\"f\", value: this.pxlUser.itemRotateRate }\r\n                        },\r\n                        vertexShader:this.pxlShaders.objects.itemVert(),\r\n                        fragmentShader:this.pxlShaders.objects.itemFrag(),\r\n                        transparent:true,\r\n                        side:DoubleSide,\r\n                        depthTest:true,\r\n                        depthWrite:false,\r\n                      });\r\n                    }\r\n                    c.material=lowGravMtl;\r\n                  }else if( g.name.includes(\"LizardKing\") ){\r\n                    if( lizardKingMtl==null ){\r\n                      lizardKingMtl= c.material.clone();\r\n                      lizardKingMtl.emissiveMap=lizardKingMtl.map;\r\n                      lizardKingMtl.emissive=new Color( 0x808080 );\r\n                    }\r\n                    c.material=lizardKingMtl;\r\n                  }else if( g.name.includes(\"StarField\") ){\r\n                    //c.material.emissiveMap=c.material.map;\r\n                    //c.material.emissive=new Color( 0x808080 );\r\n                  }else if( g.name.includes(\"InfinityZoom\") ){\r\n                    if(infinityZoomMtl==null){\r\n                      infinityZoomMtl=new ShaderMaterial({\r\n                        uniforms:{\r\n                          color:{value : c.material.map },\r\n                          cloudNoise:{type : 't',value : this.pxlEnv.cloud3dTexture},\r\n                          time:{ value:this.pxlTimer.msRunner },\r\n                          intensity: {  type:\"f\", value: 1.0 },\r\n                          rate: { type:\"f\", value: this.pxlUser.itemRotateRate }\r\n                        },\r\n                        vertexShader:this.pxlShaders.core.defaultVert(),\r\n                        fragmentShader:this.pxlShaders.objects.itemZoomFrag(),\r\n                        transparent:true,\r\n                        side:DoubleSide,\r\n                        depthTest:true,\r\n                        depthWrite:true,\r\n                      });\r\n                    }\r\n                    c.material=infinityZoomMtl;\r\n                  }\r\n                  this.pxlUser.itemList[g.name]=c;\r\n                }else if(c.name.includes(\"ItemBase\")){\r\n                  if(baseMtl==null){\r\n                    baseMtl=new ShaderMaterial({\r\n                      uniforms:{\r\n                        color:{value : c.material.emissive.clone() },\r\n                        alphaMap:{type:'t',value : c.material.map },\r\n                        cloudNoise:{type : 't',value : this.pxlEnv.cloud3dTexture},\r\n                        time:{ value:this.pxlTimer.msRunner },\r\n                        intensity: {  type:\"f\", value: 1.5 },\r\n                        rate: { type:\"f\", value: this.pxlUser.itemBaseRotateRate }\r\n                      },\r\n                      vertexShader:this.pxlShaders.objects.itemBaseVert(),\r\n                      fragmentShader:this.pxlShaders.objects.itemBaseFrag(),\r\n                      transparent:true,\r\n                      side:DoubleSide,\r\n                      depthTest:true,\r\n                      depthWrite:false,\r\n                    });\r\n                  }\r\n                  c.material=baseMtl;\r\n                  this.pxlUser.itemBaseList.push(c);\r\n                }\r\n              });\r\n              \r\n              addToScene[0].add(g);\r\n              this.pxlUser.itemGroupList[g.name]=g;\r\n              this.pxlUser.itemListNames.push(g.name);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      \r\n      if(meshKey!=''){\r\n        this.pxlEnv.geoList[meshKey]=curFbx;\r\n        this.pxlEnv.geoLoadList[meshKey]=1;\r\n      }\r\n      this.pxlEnv.geoLoadList[meshKey]=1;\r\n\r\n    }, undefined, (err)=>{\r\n      if(meshKey!=''){\r\n        this.pxlEnv.geoLoadList[meshKey]=1;\r\n      }\r\n    });\r\n    \r\n    return fbxLoader;\r\n  }\r\n\r\n // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  // -- -- --\r\n\r\n  getSettings( ){\r\n    let settingsObj = {\r\n      'fileType' : this.pxlEnums.FILE_TYPE.AUTO,\r\n      'filePath' : '',\r\n      'meshKey' : '',\r\n      'meshIsChild' : false, \r\n      'enableLogging' : false\r\n    };\r\n    return settingsObj;\r\n  }\r\n\r\n  readSettings( roomObj, settingsObj ){\r\n    let curSettings = Object.assign( this.getSettings(), settingsObj );\r\n\r\n    // Toggle debugging during load\r\n    this.setLogging( curSettings.enableLogging );\r\n\r\n    // Verify File Path\r\n    if( curSettings.filePath == '' ){\r\n      curSettings.filePath = roomObj.sceneFile;\r\n    }\r\n    // If no file path is provided, warn and return\r\n    if( curSettings.filePath == null || curSettings.filePath == \"\" ){\r\n      this.warn(\"No Path Provided for Environment Load\");\r\n      curSettings.filePath = null;\r\n      return curSettings;\r\n    }\r\n\r\n    // Read File Type\r\n    if( curSettings.fileType == this.pxlEnums.FILE_TYPE.AUTO || typeof curSettings.fileType != \"number\" ){\r\n      let fileType = curSettings.filePath.split('.').pop().toLowerCase();\r\n      if( fileType == \"fbx\" ){\r\n        curSettings.fileType = this.pxlEnums.FILE_TYPE.FBX;\r\n      }else if( fileType == \"glb\" ){\r\n        curSettings.fileType = this.pxlEnums.FILE_TYPE.GLB;\r\n      }else if( fileType == \"gltf\" ){\r\n        curSettings.fileType = this.pxlEnums.FILE_TYPE.GLTF;\r\n      }\r\n    }\r\n\r\n\r\n    // Set \"Loader\" mesh key, the key used to monitor the loading status of the current file\r\n    //   This is only used during the loading process and is not used for any other purpose\r\n    if( curSettings.meshKey == '' ){\r\n      curSettings.meshKey = roomObj.getName();\r\n    }\r\n\r\n    curSettings.verified = true;\r\n\r\n    return curSettings;\r\n  }\r\n\r\n  verifySettings( envObj, settingsObj ){\r\n    if( !settingsObj.hasOwnProperty(\"verified\") || !settingsObj.verified ){\r\n      return this.readSettings( envObj, settingsObj );\r\n    }\r\n    return settingsObj;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  loadPath( envObj, filePath = null, settingsObj={} ){\r\n    // Verify settings\r\n    let curSettings = Object.assign( this.getSettings(), settingsObj );\r\n    if( filePath != null && filePath != \"\" ){\r\n      curSettings.filePath = filePath;\r\n    }\r\n\r\n    // Parse settings\r\n    curSettings = this.readSettings( envObj, curSettings );\r\n    if( curSettings.filePath == null ){\r\n      return;\r\n    }\r\n\r\n    // Load the room scene file\r\n    this.loadRoom( envObj, curSettings );\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  loadRoom( envObj, settingsObj = {} ){\r\n    // Parse settings\r\n    let curSettings = this.readSettings( envObj, settingsObj );\r\n    if( curSettings.filePath == null ){\r\n      return;\r\n    }\r\n\r\n    // Use file type to determine loader method\r\n    let fileType = curSettings.fileType;\r\n\r\n    // Check File Type\r\n    if( fileType == this.pxlEnums.FILE_TYPE.FBX ){\r\n      this.loadRoomFBX( envObj, curSettings );\r\n    }else if( fileType == this.pxlEnums.FILE_TYPE.GLB || fileType == this.pxlEnums.FILE_TYPE.GLTF ){\r\n      this.loadRoomGLTF( envObj, curSettings );\r\n    }\r\n  }\r\n\r\n  loadRoomGLTF( envObj, settingsObj={} ){\r\n    settingsObj = this.readSettings( envObj, settingsObj );\r\n    if( !settingsObj.filePath ){\r\n      return;\r\n    }\r\n\r\n    // Supports GLTF & GLB\r\n    let gltfLoader = new GLTFLoader()\r\n    \r\n    let dracoLoader = new DRACOLoader();\r\n    dracoLoader.setDecoderPath(\"https://threejs.org/examples/jsm/libs/draco/\");\r\n    dracoLoader.preload();\r\n    gltfLoader.setDRACOLoader(dracoLoader);\r\n    \r\n    let meshOptLoader = gltfLoader;\r\n    meshOptLoader.setMeshoptDecoder(MeshoptDecoder)\r\n\r\n    // Add error callback, if GLB fails to load, check for Kaydara\r\n    //let glbError = (err)=>{\r\n    //  console.log(\"GLB Load Error - \",err);\r\n      let ktx2Loader = new KTX2Loader();\r\n      ktx2Loader.setTranscoderPath(\"https://threejs.org/examples/jsm/libs/basis/\");\r\n      ktx2Loader.detectSupport( this.pxlEnv.engine );\r\n      meshOptLoader.setKTX2Loader(ktx2Loader);\r\n\r\n    //  this.loadRoomFile( meshOptLoader, envObj, settingsObj );\r\n    //};\r\n    //settingsObj.onError = glbError;\r\n    \r\n    this.loadRoomFile( meshOptLoader, envObj, settingsObj );\r\n  }\r\n    \r\n\r\n\r\n // -- -- -- -- -- -- -- -- -- -- //\r\n // Environment FBX Loader        //\r\n // -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  loadRoomFBX( envObj, settingsObj={} ){\r\n    settingsObj = this.readSettings( envObj, settingsObj );\r\n    if( !settingsObj.filePath ){\r\n      return;\r\n    }\r\n\r\n    // TODO : Do new FBXLoader objects really need to be created?\r\n    //          Sounds like the potential for a memory leak if not handled correctly\r\n    var fbxLoader=new FBXLoader();\r\n\r\n    this.loadRoomFile( fbxLoader, envObj, settingsObj );\r\n  }\r\n\r\n  // Currently no support for multiple scenes within a file\r\n  loadRoomFile( loaderObject, envObj, settingsObj={} ){\r\n    settingsObj = this.verifySettings( envObj, settingsObj );\r\n    if( !settingsObj.filePath ){\r\n      return;\r\n    }\r\n\r\n    let meshKey = settingsObj.meshKey;\r\n\r\n    let objPath = settingsObj.filePath; ;\r\n    let materialList = envObj.materialList ;\r\n\r\n    this.pxlEnv.geoLoadListComplete=0;\r\n    this.pxlEnv.geoLoadList[meshKey]=0;\r\n\r\n    let envScene=envObj.scene;\r\n    \r\n    loaderObject.load( objPath, (curScene)=>{\r\n      //envScene.add(curScene.scene);\r\n      \r\n      \r\n      if( curScene.hasOwnProperty(\"scenes\") && !curScene.hasOwnProperty(\"children\") ){\r\n        curScene = curScene.scene;\r\n      }\r\n\r\n      //envScene.add(curFbx);\r\n      let groups=curScene.children;\r\n\r\n      if( groups.length == 1 ){\r\n        let curGroup = groups[0];\r\n        let isMainScene = curGroup.name.toLowerCase().includes(\"scene\");\r\n        if( !isMainScene ){\r\n          groups = curGroup.children;\r\n          //console.warn(\"-- pxlFile.loadRoomFBX() - Top level Environment Group not found --\\n Attempting to use the first child group as FBX Scene\\n Make sure your top group holds all sub-groups.\");\r\n        }\r\n      }\r\n\r\n      let groupTypes={};\r\n      let groupNames=[];\r\n      groups.forEach( (c,x)=>{\r\n        let curName=c.name.split(\"_\")[0].toLowerCase();\r\n        groupNames.push(curName);\r\n        groupTypes[curName]=x;\r\n      });\r\n\r\n      // Verbose Logging Step Count\r\n      let count=0;\r\n      /* - Used as -\r\n        count++;\r\n        this.log(\"Step Count - \",count);\r\n      */\r\n      \r\n      // @ Loaded Scene File - Environment Group; 'camera'\r\n      if(groupNames.indexOf('camera')>-1){\r\n        let ch=[];\r\n        this.log(\"Camera - \",groups[groupTypes['camera']]);\r\n        \r\n        let defaultCamLocation = envObj.defaultCamLocation;\r\n        if( groups[groupTypes['camera']].userData.hasOwnProperty(\"DefaultCam\") ){\r\n          defaultCamLocation = groups[groupTypes['camera']].userData.DefaultCam;\r\n          envObj.defaultCamLocation = defaultCamLocation;\r\n        }\r\n\r\n        let rootCamObjects = false;\r\n        let checkGroups = groups[groupTypes['camera']].children;\r\n        checkGroups.forEach( (c,x)=>{\r\n          let curName = c.name.toLowerCase();\r\n          if( curName.includes(\"position\") || curName.includes(\"lookat\") || curName.includes(\"returnposition\") || curName.includes(\"returnlookat\") ){\r\n            ch.push(c);\r\n            rootCamObjects=true;\r\n          }else{\r\n            if( c.children.length > 0 ){\r\n              ch.push(...c.children);\r\n            }\r\n          }\r\n        });\r\n\r\n        //envObj.geoList['camera']=groups[groupTypes['camera']];\r\n        ch.forEach( (c,x)=>{\r\n          c.matrixAutoUpdate=false;\r\n          let parentName = c.parent.name.toLowerCase();\r\n          if( parentName == groups[groupTypes['camera']].name.toLowerCase() ){\r\n            parentName = \"default\";\r\n          }\r\n          \r\n          if( !envObj.camLocation.hasOwnProperty(parentName) ){\r\n            envObj.camLocation[parentName]={};\r\n            envObj.camLocation[parentName][\"position\"]=new Vector3( 0, 0, -10 );\r\n            envObj.camLocation[parentName][\"lookat\"]=new Vector3( 0, 0, 0 );\r\n          }\r\n          let curName = c.name.toLowerCase();\r\n          if(curName.includes(\"positionmobile\")){\r\n            let toPos=c.position.clone();\r\n            envObj.cameraBooted=true;\r\n            envObj.camInitPos=toPos;\r\n            envObj.camLocation[parentName][\"positionmobile\"]=toPos;\r\n          }else if(curName.includes(\"lookatmobile\")){\r\n            let toPos=c.position.clone();\r\n            envObj.camInitLookAt=toPos;\r\n            envObj.camLocation[parentName][\"lookatmobile\"]=toPos;\r\n          }else if(curName.includes(\"position\")){\r\n            let toPos=c.position.clone();\r\n            envObj.cameraBooted=true;\r\n            envObj.camInitPos=toPos;\r\n            envObj.camLocation[parentName][\"position\"]=toPos;\r\n          }else if(curName.includes(\"lookat\")){\r\n            let toPos=c.position.clone();\r\n            envObj.camInitLookAt=toPos;\r\n            envObj.camLocation[parentName][\"lookat\"]=toPos;\r\n          }else if(curName.includes(\"returnposition\")){\r\n            let toPos=c.position.clone();\r\n            envObj.camReturnPos=toPos;\r\n            envObj.camLocation[parentName][\"returnposition\"]=toPos;\r\n          }else if(curName.includes(\"returnlookat\")){\r\n            let toPos=c.position.clone();\r\n            envObj.camReturnLookAt=toPos;\r\n            envObj.camLocation[parentName][\"returnlookat\"]=toPos;\r\n          }\r\n        });\r\n\r\n\r\n        // Check for missing Mobile Camera Position/lookat\r\n        let locationList = Object.keys( envObj.camLocation );\r\n        locationList.forEach( (c)=>{\r\n          let curLoc = envObj.camLocation[c];\r\n          if( !curLoc.hasOwnProperty(\"positionmobile\") ){\r\n            curLoc[\"positionmobile\"] = curLoc[\"position\"];\r\n          }\r\n          if( !curLoc.hasOwnProperty(\"lookatmobile\") ){\r\n            curLoc[\"lookatmobile\"] = curLoc[\"lookat\"];\r\n          }\r\n        });\r\n\r\n        //this.pxlDevice.touchMouseData.initialQuat=envObj.camera.quaternion.clone();\r\n      }\r\n      \r\n      // @ Loaded Scene File - Environment Group; 'AutoCamPaths'\r\n      if(groupNames.indexOf('AutoCamPaths')>-1){\r\n        let ch=groups[groupTypes['AutoCamPaths']].children;\r\n        this.log(\"AutoCamPaths - \",groups[groupTypes['AutoCamPaths']]);\r\n        \r\n        this.pxlAutoCam.autoCamPaths[ envObj.getName() ]=[];\r\n        while(ch.length>0){\r\n          let g=ch.pop();\r\n          //ch.push(...c.children);\r\n          if(g.type == \"Group\"){\r\n            let autoPathDict={};\r\n            let curChildren=g.children;\r\n            curChildren.forEach( (c)=>{\r\n              c.matrixAutoUpdate=false;\r\n              autoPathDict[ c.name ] = c;\r\n            });\r\n            g.visible=false;\r\n            g.matrixAutoUpdate=false;\r\n            envScene.add(g);\r\n            this.pxlAutoCam.autoCamPaths[ envObj.getName() ].push( autoPathDict );\r\n          }\r\n        }\r\n      }\r\n\r\n      // @ Loaded Scene File - Environment Group; 'Instances'\r\n      if(groupNames.indexOf('instances')>-1 && this.pxlQuality.detailLimit == 0){\r\n        let ch=[...groups[groupTypes['instances']].children];\r\n        this.log(\"Instances - \",groups[groupTypes['instances']]);\r\n        \r\n        if( ch.length > 0 ){\r\n          if( !envObj.hasOwnProperty(\"baseInstancesNames\") ){\r\n            envObj.baseInstancesNames = [];\r\n          }\r\n          if( !envObj.hasOwnProperty(\"baseInstancesList\") ){\r\n            envObj.baseInstancesList = {};\r\n          }\r\n          let chList = []\r\n          ch.forEach( (c,x)=>{\r\n            this.checkForUserData( envObj, envScene, c );\r\n\r\n            if( materialList.hasOwnProperty( c.name ) ){\r\n              let curMap = null;\r\n              if( c.material.map ){\r\n                curMap = c.material.map;\r\n              }\r\n              c.material= materialList[ c.name ];\r\n              this.checkForMeshSettings( c, c.material );\r\n\r\n              if( curMap ){\r\n                if( c.material.uniforms.hasOwnProperty(\"diffuse\") ){\r\n                  c.material.uniforms.diffuse.value = curMap;\r\n                }\r\n                if( c.material.hasOwnProperty(\"emissiveMap\") ){\r\n                  c.material.emissiveMap=curMap;\r\n                  if( c.material.emissive.r>0 ){\r\n                    c.material.emissiveIntensity=c.material.emissive.r;\r\n                  }\r\n                }\r\n              }\r\n              c.matrixAutoUpdate=false;\r\n            }else{\r\n              if( c.material.map && !c.material.emissiveMap && c.material.color.r>0 ){\r\n                let curMap = c.material.map;\r\n                c.material.emissiveMap=curMap;\r\n                c.material.emissiveIntensity=c.material.color.r*.4;\r\n                c.material.emissive= c.material.color.clone();\r\n                \r\n              }\r\n              \r\n            }\r\n\r\n\r\n            envObj.baseInstancesNames.push( c );\r\n            envObj.baseInstancesList[c.name]=c;\r\n          });\r\n        }\r\n      }\r\n      \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'Lights'\r\n      if(groupNames.indexOf('lights')>-1){\r\n        let ch=groups[groupTypes['lights']].children;\r\n        this.log(\"Lights - \",groups[groupTypes['lights']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          \r\n          if( c.type.includes(\"Light\") ){\r\n            if( !envObj.hasOwnProperty('lightList') ){\r\n                envObj['lightList']={};\r\n            }\r\n            if( !envObj.geoList.hasOwnProperty('lights') ){\r\n                envObj.geoList['lights']=[];\r\n            }\r\n\r\n            if( c.type == \"PointLight\" ){\r\n\r\n              let lightTypeSplit = c.name.split(\"_\");\r\n              let lightType = lightTypeSplit[0];\r\n\r\n              /*\r\n              // Still working out the kinks for Spot Lights\r\n              //\r\n              if( lightType.toLowerCase() == \"spot\" ){\r\n                try{\r\n                // Spot Light --\r\n\r\n                let spotLightShape = {\r\n                  'color': 0xFFFFFF,\r\n                  'intensity': 1,\r\n                  'distance': 10,\r\n                  'angle': Math.PI/3,\r\n                  'penumbra': 0,\r\n                  'decay': 2\r\n                }\r\n                let newLightData = Object.assign( {}, spotLightShape );\r\n                let spotLight = new SpotLight( newLightData.color,\r\n                    newLightData.intensity,\r\n                    newLightData.distance, \r\n                    newLightData.angle, \r\n                    newLightData.penumbra, \r\n                    newLightData.decay\r\n                  );\r\n                spotLight.name = c.name;\r\n                spotLight.userData = Object.assign( {}, c.userData );\r\n\r\n                spotLight.rotation.set( c.rotation.x, c.rotation.y, c.rotation.z );\r\n                spotLight.position.set( c.position.x, c.position.y, c.position.z );\r\n\r\n                spotLight.matrixAutoUpdate=false;\r\n\r\n                // -- -- --\r\n\r\n                if( !envObj.lightList.hasOwnProperty( c.type ) ){\r\n                  envObj.lightList[ c.type ] = [];\r\n                }\r\n\r\n                envObj.lightList[ c.type ].push( spotLight );\r\n                envObj.geoList['lights'].push( spotLight );\r\n                envScene.add( spotLight );\r\n\r\n                c.parent.remove( c );\r\n\r\n                }catch(e){\r\n                  console.log(e);\r\n                }\r\n              }else{\r\n              */\r\n                // Point Light --\r\n\r\n                c.decay = Math.max( 1.1, Math.min( 3.0, c.intensity ));\r\n                //c.decay = 2;\r\n                c.distance = c.distance == 0 ?  1000 * c.intensity : c.distance;\r\n              //}\r\n            }\r\n\r\n            \r\n\r\n\r\n            if( !envObj.lightList.hasOwnProperty( c.type ) ){\r\n              envObj.lightList[ c.type ] = [];\r\n            }\r\n            \r\n            envObj.lightList[ c.type ].push( c );\r\n            envObj.geoList['lights'].push( c );\r\n            \r\n            c.matrixAutoUpdate=false;\r\n            envScene.add( c );\r\n          }\r\n        }\r\n      }\r\n      \r\n\r\n      // Merged Geo, faster but more polies\r\n      // @ Loaded Scene File - Environment Group; 'MainScene'\r\n      if(groupNames.includes('scene') || groupNames.includes('mainscene')){\r\n        let groupId = groupTypes['scene'] || groupTypes['mainscene'];\r\n        let ch = [...groups[groupId].children];\r\n        this.log(\"MainScene - \",groups[groupId]);\r\n\r\n        let curObjId = -1;\r\n        while(ch.length>0){\r\n          //curObjId++;\r\n          \r\n          /*if( curObjId >= ch.length ){\r\n            break;\r\n          }*/\r\n\r\n          let c=ch.pop();\r\n          \r\n          this.log( `Cur Object - ${c.name}` );\r\n          this.debug( c );\r\n          this.checkForUserData( envObj, envScene, c );\r\n\r\n          if(c.isMesh){\r\n            if( c.userData.hasOwnProperty(\"Show\") && (!c.userData.Show || c.userData.Show == 0) ){\r\n              c.visible = false;\r\n            }\r\n            \r\n            c.layers.set( this.pxlEnums.RENDER_LAYER.SCENE );\r\n            envObj.geoList[c.name]=c;\r\n              \r\n            let curSide = FrontSide;\r\n            // @ FBX - User Data; boolean, 'doubleSided'\r\n            if(c.userData.hasOwnProperty(\"doubleSided\") || c.userData.hasOwnProperty(\"DoubleSided\") ){\r\n              curSide=DoubleSide;\r\n            }\r\n\r\n            if(c.userData.hasOwnProperty(\"scripted\") || c.userData.hasOwnProperty(\"Scripted\") ){\r\n              if( !envObj.geoList.hasOwnProperty('Scripted') ){\r\n                envObj.geoList['Scripted']={};\r\n              }\r\n              envObj.geoList['Scripted'][c.name]=c;\r\n            }\r\n            \r\n            // Custom material shader was added to this object, apply it\r\n            if( materialList.hasOwnProperty( c.name ) ){\r\n              let curMap = null;\r\n              if( c.material.map ){\r\n                curMap = c.material.map;\r\n              }\r\n              c.material= materialList[ c.name ];\r\n\r\n              this.checkForMeshSettings( c, c.material );\r\n\r\n              if( curMap ){\r\n                if( c.material.uniforms.hasOwnProperty(\"diffuse\") ){\r\n                  c.material.uniforms.diffuse.value = curMap;\r\n                }\r\n                if( c.material.hasOwnProperty(\"emissiveMap\") ){\r\n                  c.material.emissiveMap=curMap;\r\n                  if( c.material.emissive.r>0 ){\r\n                    c.material.emissiveIntensity=c.material.emissive.r;\r\n                  }\r\n                }\r\n              }\r\n              c.matrixAutoUpdate=false;\r\n              //c.geometry.computeVertexNormals();\r\n              //c.material.shading = SmoothShading;\r\n            }else{\r\n              let curMatList = c.material;\r\n              if( !Array.isArray(c.material) ){\r\n                curMatList = [ c.material ];\r\n              }\r\n\r\n              if( !this.checkIsGlassLiquid( envObj, envScene, c, curMatList ) ){\r\n                curMatList.forEach( (m)=>{\r\n                  if( m.map && !m.emissiveMap && m.emissive.r>0 ){\r\n                    m.emissiveMap=m.map;\r\n                    m.emissiveIntensity=m.emissive.r;\r\n                    m.emissive=new Color( 0xFFFFFF );\r\n                  }\r\n                  m.side=curSide;\r\n                  //m.depthWrite=true;\r\n                  //m.depthTest=true;\r\n                  //m.shading = SmoothShading;\r\n                });\r\n              }\r\n\r\n              //c.geometry.computeVertexNormals();\r\n              c.matrixAutoUpdate=false;\r\n            }\r\n           \r\n              \r\n          }else{ // Current Object isn't a mesh geometry\r\n            if( c.type.includes(\"Light\") ){\r\n              if( !envObj.lightList.hasOwnProperty( c.type ) ){\r\n                envObj.lightList[ c.type ] = [];\r\n              }\r\n              envObj.lightList[ c.type ].push( c );\r\n            }else if( c.type == \"Group\" ){\r\n              let addChildren = true;\r\n              \r\n              if(c.userData.hasOwnProperty(\"scripted\") || c.userData.hasOwnProperty(\"Scripted\") ){\r\n                if( !envObj.geoList.hasOwnProperty('Scripted') ){\r\n                  envObj.geoList['Scripted']={};\r\n                }\r\n                envObj.geoList['Scripted'][c.name]=c;\r\n              }\r\n              \r\n              if( addChildren ){\r\n                ch.push( ...c.children );\r\n              }\r\n            }\r\n          }\r\n        }\r\n        envScene.add( ...groups[groupId].children );\r\n      }\r\n      \r\n      \r\n      // ## Restricted to only pxlNav's build\r\n      // @ Loaded Scene File - Environment Group; 'Glass'\r\n      if(groupNames.indexOf('glass')>-1){\r\n        let ch=groups[groupTypes['glass']].children;\r\n        this.log(\"Glass - \",groups[groupTypes['glass']]);\r\n        \r\n        if( ch.length > 0 ){\r\n            if(!envObj.glassGroup){\r\n                let glassGrp=new Group();\r\n                envObj.glassGroup=glassGrp;\r\n                envScene.add(glassGrp);\r\n            }\r\n            while(ch.length>0){\r\n                let c=ch.pop();\r\n                ch.push(...c.children);\r\n                if(c.isMesh){\r\n            \r\n                    this.checkForUserData( envObj, envScene, c );\r\n          \r\n                    let cBackMat=c.material.clone();\r\n                    c.material=cBackMat;\r\n                    c.material.transparent=true;\r\n                    c.material.opacity=.5;\r\n                    c.material.shininess=20;\r\n                    c.material.specular=c.material.color.clone();\r\n                    c.material.specular.r = c.material.specular.r*.5 +.1;\r\n                    c.material.specular.g = c.material.specular.g*.5 +.1;\r\n                    c.material.specular.b = c.material.specular.b*.5 +.1;\r\n                    \r\n                    //c.material.side=FrontSide;\r\n                    //c.material.depthTest=true;\r\n                    c.material.side=BackSide;\r\n                    c.material.depthWrite=false;\r\n                    c.matrixAutoUpdate=false;\r\n                    c.renderOrder = 1;\r\n                    envObj.glassList.push(c);\r\n                    envObj.glassGroup.add(c);\r\n                    \r\n                    let cFrontGeo = c.geometry.clone()\r\n                    let cFrontMat= c.material.clone();\r\n                    cFrontMat.copy( c.material );\r\n                    let cFrontMesh = new Mesh( cFrontGeo, cFrontMat );\r\n                    cFrontMesh.material.shininess=40;\r\n                    cFrontMesh.material.side=FrontSide;\r\n                    cFrontMesh.matrixAutoUpdate=false;\r\n                    cFrontMesh.renderOrder = 2;\r\n                    \r\n                    \r\n                    let curPos=c.position;\r\n                    let curRot=c.rotation;\r\n                    let curScale=c.scale;\r\n                    \r\n                    cFrontMesh.rotation.set(curRot.x,curRot.y,curRot.z);\r\n                    cFrontMesh.position.set(curPos.x,curPos.y,curPos.z);\r\n                    cFrontMesh.scale.set(curScale.x,curScale.y,curScale.z);\r\n                    cFrontMesh.updateMatrix();\r\n                    \r\n                    envScene.add( cFrontMesh )\r\n                    envObj.glassList.push(cFrontMesh);\r\n                    envObj.glassGroup.add(cFrontMesh);\r\n                }\r\n            }\r\n        }\r\n      }\r\n      \r\n\r\n      // @ Loaded Scene File - Environment Group; 'Colliders'\r\n      if(groupNames.indexOf('colliders')>-1){\r\n        let colliderParent=groups[groupTypes['colliders']];\r\n        this.log(\"Colliders - \",groups[groupTypes['colliders']]);\r\n        \r\n        let colliderGroups=colliderParent.children;\r\n        envObj.collidersExist=colliderGroups.length>0;\r\n\r\n        for(let x=0; x<colliderGroups.length; ++x){\r\n          let pName=colliderGroups[x].name.toLowerCase();\r\n\r\n          let curChildren=colliderGroups[x].children;\r\n          while(curChildren.length>0){\r\n            let child=curChildren.pop();\r\n            curChildren.push(...child.children);\r\n            if(child.isMesh){\r\n              child.visible=false;\r\n\r\n              if( pName == \"colliderwalls\"){ // Movement limiting walls\r\n                envObj.antiColliderActive=true;\r\n                envObj.antiColliderList.push( child );\r\n\r\n              // TODO : ColliderTops are implemented in `Ground` colliders to a degree.\r\n              //          Full removal of the `ColliderTops` collider group is pending\r\n              }else if( pName == \"collidertops\"){ // Top surface of wall, standable top\r\n                envObj.antiColliderTopActive=true;\r\n                envObj.antiColliderTopList.push( child );\r\n\r\n              }else{ // `Ground`, `RoomWarp`, & All Other Colliders\r\n\r\n                if( pName == \"roomwarpzone\"){\r\n                  envObj.hasRoomWarp=true;\r\n                  envObj.roomWarp.push(child);\r\n                }\r\n\r\n                envObj.colliderActive=true;\r\n                envObj.colliderList.push( child );\r\n              }\r\n\r\n              child.matrixAutoUpdate=false;\r\n              envScene.add(child);\r\n              envObj.geoList[child.name]=child;\r\n            }\r\n          }\r\n        }\r\n\r\n        // -- -- --\r\n\r\n        // Parse grid Vertex-Faces for collision detection\r\n        //   Prep barycentric coordinate dependency values\r\n        //     Vert-Edge lengths, Edge Dot Products, Vert-Face areas & data\r\n        if( envObj.hasColliderType( this.pxlEnums.COLLIDER_TYPE.FLOOR ) ){\r\n          this.pxlColliders.prepColliders( envObj, this.pxlEnums.COLLIDER_TYPE.FLOOR );\r\n        }else if( envObj.hasColliderType( this.pxlEnums.COLLIDER_TYPE.WALL ) ){\r\n          this.pxlColliders.prepColliders( envObj, this.pxlEnums.COLLIDER_TYPE.WALL );\r\n        }else if( envObj.hasColliderType( this.pxlEnums.COLLIDER_TYPE.WALL_TOP ) ){\r\n          this.pxlColliders.prepColliders( envObj, this.pxlEnums.COLLIDER_TYPE.WALL_TOP );\r\n        }else if( envObj.hasColliderType( this.pxlEnums.COLLIDER_TYPE.ROOM ) ){\r\n          this.pxlColliders.prepColliders( envObj, this.pxlEnums.COLLIDER_TYPE.ROOM );\r\n        }\r\n      }\r\n      \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'PortalExit'\r\n      if(groupNames.indexOf('portalexit')>-1){\r\n        let ch=groups[groupTypes['portalexit']].children;\r\n        this.log(\"PortalExit - \",groups[groupTypes['portalexit']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          c.matrixAutoUpdate=false;\r\n          envObj.hasPortalExit=true;\r\n          envObj.portalList[c.name]=c;\r\n        }\r\n      }  \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'FlatColor'\r\n      if(groupNames.indexOf('flatcolor')>-1){\r\n        let ch=groups[groupTypes['flatcolor']].children;\r\n        this.log(\"FlatColor - \",groups[groupTypes['flatcolor']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          if(c.isMesh){\r\n            \r\n            this.checkForUserData( envObj, envScene, c );\r\n          \r\n            let mtl=new MeshBasicMaterial({\r\n              color:c.material.color.clone()\r\n            });\r\n            //mtl.side=DoubleSide;  \r\n            mtl.side=FrontSide;\r\n            mtl.flatShading=true;\r\n            c.material=mtl;\r\n            c.layers.set( this.pxlEnums.RENDER_LAYER.SCENE );\r\n            c.matrixAutoUpdate=false;\r\n            envScene.add(c);\r\n          }\r\n        }\r\n      }\r\n      \r\n      \r\n      \r\n\r\n\r\n      // @ Loaded Scene File - Environment Group; 'LambertColor'\r\n      if(groupNames.indexOf('lambertcolor')>-1){\r\n        let ch=groups[groupTypes['lambertcolor']].children;\r\n        this.log(\"LambertColor - \",groups[groupTypes['lambertcolor']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          if(c.isMesh){\r\n            \r\n            this.checkForUserData( envObj, envScene, c );\r\n          \r\n            let mtl=new MeshLambertMaterial();\r\n            if(c.material.map){\r\n              let mtlMap=c.material.map.clone();\r\n              mtl.map=mtlMap;\r\n              //mtl.color=new Color( 0x888888 );\r\n              mtl.emissiveMap=mtlMap;\r\n              mtl.emissiveIntensity=.5;\r\n              c.material=mtl;\r\n            }else{\r\n              mtl.color=c.material.color.clone();\r\n              mtl.emissive=c.material.emissive.clone();\r\n              //mtl.side=DoubleSide;\r\n              mtl.side=FrontSide;\r\n              mtl.flatShading=true;\r\n              c.material=mtl;\r\n            }\r\n            \r\n            c.layers.set( this.pxlEnums.RENDER_LAYER.SCENE );\r\n            c.matrixAutoUpdate=false;\r\n            envScene.add(c);\r\n          }\r\n        }\r\n      }\r\n       \r\n            \r\n      // @ Loaded Scene File - Environment Group; 'Sky'\r\n      if(groupNames.indexOf('sky')>-1){\r\n        let ch=groups[groupTypes['sky']].children;\r\n        this.log(\"Sky - \",groups[groupTypes['sky']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          if(c.isMesh){\r\n            let curMat = null;\r\n            if( materialList.hasOwnProperty( c.name ) ){\r\n              curMat = materialList[ c.name ];\r\n              this.checkForMeshSettings( c, curMat );\r\n            }else{\r\n              curMat=new ShaderMaterial({\r\n                uniforms:{\r\n                  diffuse: { type:\"t\",value:c.material.map },\r\n                  noiseTexture: { type:\"t\",value:null },\r\n                  fogColor:{ value: envScene.fog.color },\r\n                  time:{ value:this.pxlTimer.msRunner },\r\n                  camNear:{ type:\"f\", value: envObj.camera.near },\r\n                  camFar:{ type:\"f\", value: envObj.camera.far*.85 },\r\n                  resUV: { value: this.pxlDevice.screenRes },\r\n                },\r\n                vertexShader:this.pxlShaders.scene.skyObjectVert(),\r\n                fragmentShader:this.pxlShaders.scene.skyObjectFrag( this.pxlOptions.skyHaze )\r\n              });\r\n            }\r\n            //c.geometry.computeVertexNormals();\r\n            c.material = curMat;\r\n            c.matrixAutoUpdate = false;\r\n            c.frustumCulled = false;\r\n            c.layers.set( this.pxlEnums.RENDER_LAYER.SKY )\r\n            c.material.depthTest=true;\r\n            c.material.depthWrite=false;\r\n\r\n            if( c.material?.uniforms.hasOwnProperty(\"noiseTexture\") && envObj?.cloud3dTexture ){\r\n              c.material.uniforms.noiseTexture.value = envObj.cloud3dTexture;\r\n            }\r\n\r\n            // Currently unused as the vapor sky object shader no longer has horizon detection\r\n            //   It's a desired effect as an option, but not currently implemented internally\r\n            // Accessible via the `pxlRoom.materialList` object\r\n            //   Simply add a texture uniform of `depthTexture` to your custom shader\r\n            // TODO : Expand this to allow for depthMap derived fog / env effects in the sky\r\n            if( c.material?.uniforms.hasOwnProperty(\"depthTexture\") && envScene?.renderTarget?.depthTexture ){\r\n              c.material.uniforms.envDiffuse.value = envScene.renderTarget.depthTexture;\r\n            }\r\n\r\n            envObj.geoList[ c.name ] = c;\r\n            envObj.materialList[ c.name ] = curMat;\r\n            //envObj.shaderGeoList[c.name]=c;\r\n            envScene.add(c);\r\n          }\r\n        }\r\n      }\r\n       \r\n\r\n      // Shader Overrides\r\n      // @ Loaded Scene File - Environment Group; 'AnimatedTextures'\r\n      if(groupNames.indexOf('animatedtextures')>-1){\r\n        let ch=groups[groupTypes['animatedtextures']].children;\r\n        this.log(\"AnimatedTextures - \",groups[groupTypes['animatedtextures']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          if(c.isMesh){\r\n            \r\n            this.checkForUserData( envObj, envScene, c );\r\n          \r\n            let uValues={\r\n                time:{ value:this.pxlTimer.msRunner },\r\n                glowTexture: { type:\"t\",value:c.material.map },\r\n                cloudNoise:{type : 't',value : this.pxlEnv.cloud3dTexture},\r\n                glowColor: { value: new Vector3( .01,.35,.55 ) },\r\n                intensity: { type:\"f\", value: .35 },\r\n                rate: { type:\"f\", value: 2.0 },\r\n                freq: { type:\"f\", value: 1.0 }\r\n              };\r\n            let vertShader=this.pxlShaders.animated.animTextureVert();\r\n            let fragShader=this.pxlShaders.animated.animTextureFrag();\r\n            \r\n            let curMat=new ShaderMaterial({\r\n              uniforms:uValues,\r\n              vertexShader:vertShader,\r\n              fragmentShader:fragShader,\r\n              transparent:true,\r\n              //depthTest:true,\r\n              //depthWrite:true,\r\n              //side:DoubleSide\r\n              side:FrontSide\r\n            });\r\n            \r\n            //c.geometry.computeVertexNormals();\r\n\r\n            c.material=curMat;\r\n            \r\n            c.matrixAutoUpdate=false;\r\n            envScene.add(c);\r\n          }\r\n        }\r\n      }\r\n      \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'ScrollingTextures'\r\n      if(groupNames.indexOf('scrollingtextures')>-1){\r\n        let ch=groups[groupTypes['scrollingtextures']].children;\r\n        this.log(\"ScrollingTextures - \",groups[groupTypes['scrollingtextures']]);\r\n        \r\n        let scrollScreenSeed=1;\r\n        while(ch.length>0){\r\n          scrollScreenSeed+=1;\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          if(c.isMesh){\r\n            \r\n            this.checkForUserData( envObj, envScene, c );\r\n          \r\n            let name=c.name;\r\n            let speed=0.05;\r\n            if(name.indexOf(\"_\")>-1){\r\n              speed=name.split(\"_\")[1];\r\n              speed=parseInt(speed)*.01;\r\n            }\r\n            let curMat=new ShaderMaterial({\r\n              uniforms:{\r\n                scrollTexture:{type : 't',value:c.material.map},\r\n                //cloudNoise:{type : 't',value : this.cloud3dTexture},\r\n                time:{ value:this.pxlTimer.msRunner },\r\n                speed: { value: speed },\r\n                seed:{ type:'f',value:scrollScreenSeed*1.1423 },\r\n                boostPerc: { value: 1.0 },\r\n              },\r\n              vertexShader:this.pxlShaders.animated.scrollingTextureVert(),\r\n              fragmentShader:this.pxlShaders.animated.scrollingTextureFrag(),\r\n              transparent:true,\r\n              //side:DoubleSide,\r\n              side:FrontSide,\r\n              //depthTest:true,\r\n              //depthWrite:true\r\n            });\r\n            \r\n            //c.geometry.computeVertexNormals();\r\n            c.material=curMat;\r\n            \r\n            c.matrixAutoUpdate=false;\r\n            envScene.add(c);\r\n          }\r\n        }\r\n      }\r\n      \r\n      \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'UserScreens'\r\n      // TODO : Update to read mask from material\r\n      //          Less magic number reliance\r\n      if(groupNames.indexOf('userscreens')>-1){\r\n        let ch=groups[groupTypes['userscreens']].children;\r\n        this.log(\"UserScreens - \",groups[groupTypes['userscreens']]);\r\n        \r\n        let userScreenSeed=0;\r\n        // Run the mask layers outside shader calculations\r\n        let maskArray=[ new Vector3(1,0,0), new Vector3(0,1,0), new Vector3(0,0,1) ]\r\n        // Non-included masks\r\n        // TODO : Add method to pass materials through to UserScreens from textureList{}\r\n        let maskPaths=[this.assetRoot+\"DJ_Vector_Masks_1.jpg\", this.assetRoot+\"DJ_Vector_Masks_2.jpg\", this.assetRoot+\"DJ_Vector_Masks_3.jpg\"];\r\n        let modMaskId=0;\r\n        let modPathId=0;\r\n        let modMax=maskArray.length;\r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          ch.push(...c.children);\r\n          if(c.isMesh){\r\n            let curMat=new ShaderMaterial({\r\n              uniforms:{\r\n                camExists:{ type:'f',value:0.0 },\r\n                time:{ value:this.pxlTimer.msRunner },\r\n                seed:{ type:'f',value:userScreenSeed*1.1423 },\r\n                alpha:{ type:'f',value:1.0 },\r\n                boostPerc: { value: envObj.userScreenIntensity },\r\n                scale:{ value:new Vector2(100,100)},\r\n                ratio:{ value:new Vector2(1,1)},\r\n                videoFeed:{type : 't',value:null},\r\n                cloudNoise:{type : 't',value : this.pxlEnv.cloud3dTexture},\r\n                maskChannel:{value : maskArray[modMaskId] },\r\n                maskMap:{type : 't',value : this.pxlUtils.loadTexture( maskPaths[modPathId] ) },\r\n              },\r\n              vertexShader:envObj.userScreenVert,\r\n              fragmentShader:envObj.userScreenFrag,\r\n              transparent:true,\r\n              //side:DoubleSide,\r\n              side:FrontSide,\r\n              //depthTest:true,\r\n              //depthWrite:true\r\n            });\r\n                        \r\n            //c.geometry.computeVertexNormals();\r\n            c.material=curMat;\r\n            \r\n            c.matrixAutoUpdate=false;\r\n            envObj.pxlEnv.camScreenData.screenGeoList.push(c)\r\n            \r\n            envScene.add(c);\r\n                        \r\n            userScreenSeed += 1;\r\n            modMaskId = userScreenSeed % modMax;\r\n            modPathId = Math.floor(userScreenSeed/3) % modMax;\r\n          }\r\n        }\r\n      }\r\n      \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'Items'\r\n      if(groupNames.indexOf('items')>-1){\r\n        let ch=groups[groupTypes['items']].children;\r\n        this.log(\"Items - \",groups[groupTypes['items']]);\r\n        \r\n        while(ch.length>0){\r\n          let g=ch.pop();\r\n          //ch.push(...c.children);\r\n          // ## Set up Environment Assets for Item List\r\n          if(g.type == \"Group\"){\r\n            let curChildren=g.children;\r\n            if( curChildren.length > 0 ){\r\n              curChildren.forEach( (c)=>{\r\n                if(c.name.includes(\"Item\")){\r\n                  let curMat=new ShaderMaterial({\r\n                      uniforms:{\r\n                          color:{value : c.material.emissive.clone() },\r\n                          alphaMap:{type:'t',value : c.material.map },\r\n                          cloudNoise:{type : 't',value : this.cloud3dTexture},\r\n                          time:{ value:this.pxlTimer.msRunner },\r\n                          intensity: {  type:\"f\", value: 1.5 },\r\n                          rate: { type:\"f\", value: this.pxlUser.itemRotateRate }\r\n                      },\r\n                      vertexShader:this.pxlShaders.objects.itemVert(),\r\n                      fragmentShader:this.pxlShaders.objects.itemFrag(),\r\n                      transparent:true,\r\n                      side:DoubleSide,\r\n                      depthTest:true,\r\n                      depthWrite:false,\r\n                  });\r\n                  c.material=curMat;\r\n                  this.pxlUser.itemList[g.name]=c;\r\n                }else if(c.name.toLowerCase().includes(\"base\")){\r\n                  let curMat=new ShaderMaterial({\r\n                      uniforms:{\r\n                          color:{value : c.material.emissive.clone() },\r\n                          alphaMap:{type:'t',value : c.material.map },\r\n                          cloudNoise:{type : 't',value : this.cloud3dTexture},\r\n                          time:{ value:this.pxlTimer.msRunner },\r\n                          intensity: {  type:\"f\", value: 1.5 },\r\n                          rate: { type:\"f\", value: this.pxlUser.itemBaseRotateRate }\r\n                      },\r\n                      vertexShader:this.pxlShaders.objects.itemBaseVert(),\r\n                      fragmentShader:this.pxlShaders.objects.itemBaseFrag(),\r\n                      transparent:true,\r\n                      side:DoubleSide,\r\n                      depthTest:true,\r\n                      depthWrite:false,\r\n                  });\r\n                  c.material=curMat;\r\n                  this.pxlUser.itemBaseList.push(c);\r\n                }\r\n              });\r\n              \r\n              envScene.add(g);\r\n              this.pxlUser.itemGroupList[g.name]=g;\r\n              this.pxlUser.itemListNames.push(g.name);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      \r\n      // @ Loaded Scene File - Environment Group; 'Scripted'\r\n      if(groupNames.includes('scripted')){\r\n        let ch=groups[groupTypes['scripted']].children;\r\n        this.log(\"Scripted - \",groups[groupTypes['scripted']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          if(c.isMesh){\r\n              envObj.geoList[c.name]=c;\r\n              envScene.add(c);\r\n          }\r\n        }\r\n      }\r\n      \r\n\r\n      // @ Loaded Scene File - Environment Group; 'Clickable'\r\n      if(groupNames.includes('clickable')){\r\n        let colliderParent=groups[groupTypes['clickable']];\r\n        this.log(\"Clickable - \",groups[groupTypes['clickable']]);\r\n        \r\n        let colliderGroups=colliderParent.children;\r\n        for(let x=0; x<colliderGroups.length; ++x){\r\n          let pName=colliderGroups[x].name;\r\n          let curChildren=colliderGroups[x].children;\r\n          while(curChildren.length>0){\r\n            let child=curChildren.pop();\r\n            curChildren.push(...child.children);\r\n            if(child.isMesh){\r\n              let mtl=new MeshBasicMaterial();\r\n              mtl.color=new Color( 0xffffff );\r\n              //mtl.map=child.material.map.clone()\r\n              child.material.emissive=new Color( 0x444444 );\r\n              child.material.emissiveMap=child.material.map;\r\n            \r\n              child.matrixAutoUpdate=false;\r\n            \r\n              if(!envObj.objectClickableObjectList[child.name]){\r\n                envObj.objectClickableObjectList[child.name]={};\r\n              }\r\n              envObj.objectClickableObjectList[child.name][pName]=child;\r\n              envObj.objectClickable.push(child);\r\n              envScene.add(child);\r\n              \r\n              if(pName==\"Hover\"){\r\n                child.visible=false;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      // @ Loaded Scene File - Environment Group; 'Markers'\r\n      if(groupNames.includes('markers')){\r\n        let ch=groups[groupTypes['markers']].children;\r\n        this.log(\"Markers - \",groups[groupTypes['markers']]);\r\n        \r\n        while(ch.length>0){\r\n          let c=ch.pop();\r\n          envObj.marker[ c.name ]=c.position;\r\n        }\r\n      }\r\n\r\n      this.pxlEnv.geoList[meshKey]=curScene;\r\n      this.pxlEnv.geoLoadList[meshKey]=1;\r\n\r\n      envObj.fbxPostLoad();\r\n      \r\n      this.runDebugger = false;\r\n    }, null, (err)=>{\r\n      if( settingsObj.hasOwnProperty(\"onError\") ){\r\n        settingsObj.onError(err);\r\n      }else{\r\n        if(meshKey!=''){\r\n          this.pxlEnv.geoLoadList[meshKey]=1;\r\n        }\r\n        this.log(\"Error Loading FBX\");\r\n        this.log(err);\r\n        \r\n        this.runDebugger = false;\r\n      }\r\n    });\r\n    \r\n    return loaderObject;\r\n  }\r\n\r\n\r\n  loadAnimFBX( envObj, meshKey, rigPath, animPath, stateConnections ){\r\n    if(meshKey==''){ // Prep for IsLoaded checks\r\n        meshKey = envObj.getName();\r\n    }\r\n    this.pxlEnv.geoLoadListComplete=0;\r\n    this.pxlEnv.geoLoadList[meshKey]=0;\r\n\r\n    let addedGlow=0;\r\n    let envScene = envObj.scene;\r\n    let materialList = envObj.materialList ;\r\n    // TODO : Do new FBXLoader objects really need to be created?\r\n    //          Sounds like the potential for a memory leak if not handled correctly\r\n    var fbxLoader=new FBXLoader();\r\n    fbxLoader.load( rigPath, (curFbx)=>{\r\n\r\n      let groups=curFbx.children;\r\n      let groupTypes={};\r\n      let groupNames=[];\r\n      \r\n      groups.forEach((c,x)=>{ let curName=c.name.split(\"_\")[0]; groupNames.push(curName); groupTypes[curName]=x; });\r\n\r\n      curFbx.traverse((c)=>{\r\n        this.checkForUserData( envObj, envScene, c );\r\n\r\n        if( c.isMesh ){\r\n          envObj.geoList[c.name]=c;\r\n        }\r\n        \r\n        if( materialList.hasOwnProperty( c.name ) ){\r\n          let curMap = null;\r\n          if( c.material.map ){\r\n            curMap = c.material.map;\r\n          }\r\n          c.material= materialList[ c.name ];\r\n          this.checkForMeshSettings( c, c.material );\r\n\r\n          if( curMap ){\r\n            if( c.material.uniforms.hasOwnProperty(\"diffuse\") ){\r\n              c.material.uniforms.diffuse.value = curMap;\r\n            }\r\n            if( c.material.hasOwnProperty(\"emissiveMap\") ){\r\n              c.material.emissiveMap=curMap;\r\n              if( c.material.emissive.r>0 ){\r\n                c.material.emissiveIntensity=c.material.emissive.r;\r\n              }\r\n            }\r\n          }\r\n          c.matrixAutoUpdate=false;\r\n        }else{\r\n          /*if( c.material.map && !c.material.emissiveMap && c.material.color.r>0 ){\r\n            let curMap = c.material.map;\r\n            c.material.emissiveMap=curMap;\r\n            c.material.emissiveIntensity=c.material.color.r*.4;\r\n            c.material.emissive= c.material.color.clone();\r\n          }*/\r\n        }\r\n\r\n        if(c.userData.hasOwnProperty(\"doubleSided\") && c.userData.doubleSided){\r\n          c.material.side=DoubleSide;\r\n        }\r\n        //if(c.material?.map){\r\n          //console.log(c.material.map);\r\n          //c.material.emissiveMap=c.material.map;\r\n          //c.material.emissiveIntensity=c.material.emissive.r;\r\n          //c.material.emissive=new Color( 0xFFFFFF );\r\n          //c.material.map.colorSpace = NoColorSpace;\r\n          //c.material.map.colorSpace = LinearSRGBColorSpace;\r\n          //c.material.map.colorSpace = SRGBColorSpace;\r\n        //}\r\n      });\r\n\r\n      this.pxlAnim.initObject( meshKey, curFbx );\r\n\r\n      // -- -- --\r\n      \r\n      this.log(\"Animation FBX - \",groupNames[0]);\r\n      envScene.add(curFbx);\r\n      curFbx.frustumCulled = false;\r\n\r\n      var animLoader = new FBXLoader();\r\n      let promisList = [];\r\n      let animKeys = Object.keys( animPath );\r\n      animKeys.forEach( (animKey)=>{\r\n        let curAnimPath = animPath[animKey];\r\n        let animPromise = new Promise((resolve, reject) => {\r\n          animLoader.load( curAnimPath, (animFbx)=>{\r\n            if( animFbx.animations.length == 0 ){\r\n              this.log(\"No animations found in file\", curAnimPath);\r\n              this.log(animFbx);\r\n              resolve();\r\n            }\r\n            this.pxlAnim.addClips( meshKey, animKey, animFbx );\r\n            this.log(\"Animation Loaded\", animKey);\r\n            resolve();\r\n          }, null, (err)=>{\r\n            this.log(\"Animation Load Error\");\r\n            this.log(err);\r\n            reject(err);\r\n          });\r\n        });\r\n        promisList.push( animPromise );\r\n      });\r\n\r\n      Promise.all(promisList).then(() => {\r\n        this.pxlAnim.setStateConnections( meshKey, stateConnections );\r\n        //this.pxlEnv.geoList[meshKey]=curFbx;\r\n        envObj.geoList[meshKey]=curFbx;\r\n        this.pxlEnv.geoLoadList[meshKey]=1;\r\n        envObj.animPostLoad(meshKey);\r\n      }).catch((err) => {\r\n        this.log(\"Error loading animations\", err);\r\n      });\r\n\r\n      // -- -- --\r\n      /*\r\n      //envObj.geoList[c.name]=c;\r\n      let count=0;\r\n    \r\n      let runner = -1;\r\n      while(runner < groups.length-1){\r\n        runner++;\r\n        let c=groups[runner];\r\n        if(!c){\r\n          this.log(\"-- Error, Uncaught Animation Child --\");\r\n          this.log(\"Error Entry- '\"+runner+\"'\");\r\n        }\r\n        \r\n        this.checkForUserData( envObj, envScene, c );\r\n        if(c.isMesh){\r\n          if( c.userData.hasOwnProperty(\"Show\") && (!c.userData.Show || c.userData.Show == 0) ){\r\n            c.visible = false;\r\n          }\r\n          \r\n          envObj.geoList[c.name]=c;\r\n            \r\n          let curSide = FrontSide;\r\n          \r\n          if(c.userData.doubleSided){\r\n            curSide=DoubleSide;\r\n          }\r\n          \r\n          if( materialList.hasOwnProperty( c.name ) ){\r\n            c.material= materialList[ c.name ];\r\n            this.checkForMeshSettings( c, c.material );\r\n            c.matrixAutoUpdate=false;\r\n            continue;\r\n          }\r\n          \r\n          if( c.material.map ){\r\n            c.material.emissiveMap=c.material.map;\r\n            if( c.material.emissive.r>0 ){\r\n              c.material.emissiveIntensity=c.material.emissive.r;\r\n            }\r\n            c.material.emissive=new Color( 0xFFFFFF );\r\n            \r\n            if( !c.material.specularMap && c.material.specular.r>0 ){\r\n              c.material.specularMap=c.material.map;\r\n            }\r\n          }else{\r\n            c.material.emissive = c.material.color;\r\n          }\r\n          //c.material.depthWrite=true;\r\n          c.material.side=curSide;\r\n          //c.geometry.computeVertexNormals();\r\n          //c.matrixAutoUpdate=false;\r\n          c.frustumCulled = false;\r\n          c.matrixAutoUpdate=true;\r\n          //envScene.add(c);\r\n            \r\n        }else if( c.type == \"Group\" ){\r\n          groups.push( ...c.children );\r\n          c.frustumCulled = false;\r\n        }else if(  c.type == \"Bone\" ){\r\n          \r\n          c.frustumCulled = false;\r\n          groups.push( ...c.children );\r\n        }else{\r\n          this.log(\"-- Warning, FBX Animation Bypass --\");\r\n          this.log(\"Bypass Name- '\"+c.name+\"';\\nBypass Type- '\"+c.type+\"'\");\r\n        }\r\n      }\r\n\r\n      console.log(\"animLoaded\");\r\n      envObj.animPostLoad(meshKey);\r\n      */\r\n    }, null, (err)=>{\r\n      if(meshKey!=''){\r\n        this.pxlEnv.geoLoadList[meshKey]=1;\r\n      }\r\n    });\r\n    \r\n\r\n    return fbxLoader;\r\n  }\r\n\r\n\r\n// -- -- -- -- --\r\n\r\n\r\n  pxlShaderBuilder( customUniforms, vertShader, fragShader, defines=null ){\r\n    var mat;\r\n    var uniforms={\r\n      diffuse:{type:\"t\",value:null},\r\n      time:{ value:this.pxlTimer.msRunner }\r\n    };\r\n    if(customUniforms!=null){\r\n      uniforms=Object.assign({},uniforms,customUniforms);\r\n    }\r\n    \r\n    let shaderOptions={\r\n      uniforms:uniforms,\r\n      vertexShader:vertShader,\r\n      fragmentShader:fragShader\r\n    }\r\n    if( defines ){\r\n      shaderOptions.defines = defines;\r\n    }\r\n    \r\n    mat=new ShaderMaterial( shaderOptions );\r\n    mat.transparent=true;\r\n    mat.depthTest=true;\r\n    \r\n    return mat;\r\n  }\r\n\r\n\r\n  ////////////////////////////////////////////////////\r\n\r\n  removeChildren(curObj){\r\n    var removedCount=0;\r\n    var children=curObj.children;\r\n    for(var x=0; x<children.length; ++x){\r\n      if(children[x].type == \"Group\"){\r\n        curObj.remove(children[x]);\r\n        removedCount++;\r\n      }\r\n    }\r\n    return removedCount;\r\n  }\r\n\r\n  findMesh(curObj){\r\n    var ret=null;\r\n    var children=curObj.children;\r\n    for(var x=0; x<children.length; ++x){\r\n      if(children[x].type == \"Mesh\"){\r\n        ret=children[x];\r\n        break;\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  // Used mainly for groups of objects rather than calculating bbox for an object itself\r\n  getBBoxCentroid(curObj){\r\n    try{\r\n      var objBBox=new Box3().setFromObject(curObj);\r\n      var min=objBBox.min;\r\n      var max=objBBox.max;\r\n      var objCentroid=new Vector3().addVectors(max,min).multiplyScalar(.5);\r\n      curObj.userData={'bbox':objBBox, 'centroid':objCentroid};\r\n    }catch(err){\r\n      if(this.verbose >= VERBOSE_LEVEL.ERROR){\r\n        console.log(\"- - - - - - - - ERROR - - - - - - - -\");\r\n        console.log(\"     Object does not exist.\\n           - Error Info -\");\r\n        console.log(err);\r\n        console.log(\"- - - - - - - - - - - - - - - - - - -\");\r\n      }\r\n    }\r\n  }\r\n  \r\n  \r\n    loadScript( url ){\r\n        return new Promise( (resolve, reject)=>{\r\n            let script = document.createElement('script');\r\n            script.type = 'text/javascript';\r\n            script.src = url;\r\n            script.async = true;\r\n\r\n            script.onreadystatechange = ()=>{ resolve(true); } ;\r\n            script.onload = ()=>{ resolve(true); } ;\r\n\r\n            document.head.appendChild(script);\r\n        });\r\n    }\r\n    \r\n    \r\n    xmlHttp(){\r\n        if( typeof window !== \"undefined\" && window.XMLHttpRequest ){\r\n            return new XMLHttpRequest();\r\n        }else if( typeof window !== \"undefined\" && typeof window.ActiveXObject !== \"undefined\" ){\r\n            return new window.ActiveXObject(\"Microsoft.XMLHTTP\");\r\n        }else{\r\n            throw new Error(\"No supported XMLHttpRequest implementation found.\");\r\n        }\r\n    }\r\n    \r\n  // ## Added for Google Drive doc reading\r\n  //      Links open within the iframe and fail on header source origin issues\r\n  static getURLContent(url){\r\n    return new Promise( (resolve, reject)=>{\r\n            //let xhrRequest= this.xmlHttp();\r\n            let xhrRequest = null;\r\n\r\n        if( typeof window !== \"undefined\" && window.XMLHttpRequest ){\r\n            xhrRequest = new XMLHttpRequest();\r\n        }else if( typeof window !== \"undefined\" && typeof window.ActiveXObject !== \"undefined\" ){\r\n            xhrRequest = new window.ActiveXObject(\"Microsoft.XMLHTTP\");\r\n        }\r\n      /*xhrRequest.onreadystatechange=(e)=>{\r\n        if(xhrRequest.readyState==4 && xhrRequest.status==200){\r\n          return xhrRequest.responceText;\r\n        }\r\n      };*/\r\n      xhrRequest.open(\"GET\",url);//,false);\r\n      xhrRequest.onload=(e)=>{\r\n        if(xhrRequest.readyState==4 && ( xhrRequest.status>=200 && xhrRequest.status<300 ) ){\r\n          resolve(xhrRequest.response);\r\n        }else{\r\n          resolve(xhrRequest.statusText);\r\n        }\r\n      }\r\n      xhrRequest.onerror=()=>reject(xhrRequest.statusText);\r\n      xhrRequest.send();\r\n    });\r\n  }\r\n\r\n  getExternalHTML(url, callback){\r\n    if(!window.XMLHttpRequest){\r\n      window.open( url, '_blank' );\r\n      return;\r\n    }\r\n        let xhrRequest= this.xmlHttp();\r\n    xhrRequest.onreadystatechange=function(){\r\n      if (this.readyState == 4 && this.status == 200) {\r\n        if( callback && typeof( callback ) === 'function' ){\r\n          callback( xhrRequest.responseText );\r\n        }\r\n      }\r\n    }\r\n    xhrRequest.open( 'GET', url, true );\r\n    xhrRequest.responceType='document';\r\n    xhrRequest.send();\r\n  }\r\n\r\n  fetchURLStatus(url, cmdRun, resolveDict){\r\n        fetch( url, {\r\n            method: 'HEAD'\r\n        }).then( (resolve) =>{\r\n            cmdRun(resolve.status, resolveDict);\r\n        }).catch( (err)=>{\r\n            cmdRun(404, resolveDict);\r\n        });\r\n  }\r\n    \r\n    \r\n    urlExistsFallback( url ){\r\n        return new Promise( (resolve, reject)=>{\r\n            let xhrRequest= this.xmlHttp();\r\n\r\n            xhrRequest.open('HEAD', url, true);\r\n            xhrRequest.send();\r\n\r\n            xhrRequest.onreadystatechange=function(){\r\n                if( this.readyState == this.DONE ){\r\n                    resolve( this.status<400 );\r\n                }\r\n            }\r\n            xhrRequest.onerror=(err)=>{\r\n                resolve( false );\r\n            };\r\n            xhrRequest.ontimeout=(err)=>{\r\n                resolve( false );\r\n            };\r\n        });\r\n    }\r\n    \r\n    // Extend browser to handle url requests ( Unused )\r\n    //   While the network layer has been removed,\r\n    //     The primary source of excessive API & server requests,\r\n    //       Retaining the code for future web worker management\r\n    urlExists(url){\r\n        var worker;\r\n        if( false && Worker ){\r\n            worker = new Worker(\"js/pxlBase/webWorkers/FileWorkerIO.js\");  \r\n            //this.workerList.push( worker );\r\n        }\r\n        \r\n        return new Promise( (resolve, reject)=>{\r\n            if( worker ){\r\n                worker.onmessage = function(event) {  \r\n                    resolve( event.data.data );\r\n                };\r\n                worker.onerror = function(event) {  \r\n                    resolve( false );\r\n                };\r\n\r\n                worker.postMessage( { type: \"urlExists\", data: url } );\r\n            }else{\r\n                let resp= this.urlExistsFallback( url ).then( (resp)=>{\r\n                    resolve( resp );\r\n                });\r\n            }\r\n        }).then( (resp)=>{\r\n            if( worker ){\r\n                worker.terminate();\r\n            }\r\n            return resp;\r\n        }).catch( (err)=>{\r\n            if( worker ){\r\n                worker.terminate();\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n}","\r\nimport { pxlEnums } from './Enums.js';\r\n\r\n/**\r\n * @global\r\n * @name pxlUserSettings\r\n * @description User settings for pxlNav\r\n * @property {object} height - User height settings\r\n * @property {number} height.standing - Standing height in units; any camera in your room's FBX will override this height once loaded\r\n * @property {number} height.stepSize - Max step height in units\r\n * @property {object} movement - User movement settings\r\n * @property {number} movement.scalar - Overall movement rate scalar\r\n * @property {number} movement.max - Max movement speed\r\n * @property {number} movement.easing - Easing rate between Step() calls\r\n * @property {object} look - User look settings\r\n * @property {boolean} look.pc - Look settings for desktop\r\n * @property {boolean} look.pc.invert - Invert ( Southpaw ) look on desktop\r\n * @property {boolean} look.mobile - Look settings for mobile\r\n * @property {boolean} look.mobile.invert - Invert look on mobile\r\n * @property {object} headBounce - User head bounce settings\r\n * @property {number} headBounce.height - Bounce magnitude in units\r\n * @property {number} headBounce.rate - Bounce rate per Step()\r\n * @property {number} headBounce.easeIn - When move key is pressed, the ease into bounce; `bounce * ( boundInf + easeIn )`\r\n * @property {number} headBounce.easeOut - When move key is let go, the ease back to no bounce; `bounce * easeOut`\r\n * @property {object} jump - User jump settings\r\n * @property {number} jump.impulse - Jump impulse force applied to the player while holding the jump button\r\n * @property {number} jump.holdMax - Max influence of holding the jump button on current jump; in seconds\r\n * @property {number} jump.repeatDelay - Delay between jumps when holding the jump button\r\n * @property {object} gravity - User gravity settings\r\n * @property {number} gravity.ups - Units per Step() per Step()\r\n * @property {number} gravity.max - Max gravity rate\r\n * @property {object} deadZone - User dead zone settings\r\n * @property {number} deadZone.controller - Dead zone for controller input, in stick tilt\r\n * @property {number} deadZone.touch - Dead zone for touch input, in pixels\r\n * @property {number} deadZone.xr - Dead zone for XR input, in hand detection precision\r\n * @example\r\n * // Example usage\r\n *  import { pxlNav, pxlUserSettings, pxlOptions } from './pxlNav.js';\r\n * \r\n * // Project name\r\n * const projectTitle = \"Test Project\";\r\n * \r\n * // Booting rooms\r\n * const startingRoom = \"YourEnvironment\";\r\n * const bootRoomList = [startingRoom];\r\n * \r\n * // User settings for the default/initial pxlNav environment\r\n * //   These can be adjusted from your `pxlRoom` but easily set defaults here\r\n * const userSettings = Object.assign({}, pxlUserSettings);\r\n * userSettings['height']['standing'] = 1.75; // Standing height in units; any camera in your room's FBX will override this height once loaded\r\n * userSettings['height']['stepSize'] = 5; // Max step height in units\r\n * \r\n * // Copy the default options\r\n * let pxlNavOptions = Object.assign({},pxlOptions);\r\n * pxlNavOptions.userSettings = userSettings;\r\n * \r\n * const pxlNavEnv = new pxlNav( pxlNavOptions, projectTitle, startingRoom, bootRoomList );\r\n * pxlNavEnv.init();\r\n * @example\r\n * export const pxlUserSettings = {\r\n *   'height' : {\r\n *      'standing' : 1.75, // Standing height in units; any camera in your room's FBX will override this height once loaded\r\n *      'stepSize' : 5 // Max step height in units\r\n *    },\r\n *   'movement' : {\r\n *      'scalar' : 1.0, // Overall movement rate scalar\r\n *      'max' : 10.0, // Max movement speed\r\n *      'easing' : 0.55, // Easing rate between Step() calls\r\n *    },\r\n *   'look' : {\r\n *      'pc' : {\r\n *         'invert' : false // Invert ( Southpaw ) look on desktop\r\n *       },\r\n *      'mobile' : {\r\n *         'invert' : false // Invert look on mobile\r\n *       }\r\n *    },\r\n *   'headBounce' : {\r\n *      'height' : 0.3, // Bounce magnitude in units\r\n *      'rate' : 0.025, // Bounce rate per Step()\r\n *      'easeIn' : 0.03, // When move key is pressed, the ease into bounce; `bounce * ( boundInf + easeIn )`\r\n *      'easeOut' : 0.95 // When move key is let go, the ease back to no bounce; `bounce * easeOut`\r\n *    },\r\n *   'jump' : {\r\n *      'impulse' : 0.75, // Jump impulse force applied to the player while holding the jump button\r\n *      'holdMax' : 2.85, // Max influence of holding the jump button on current jump; in seconds\r\n *      'repeatDelay' : 0.08 // Delay between jumps when holding the jump button\r\n *    },\r\n *   'gravity' : {\r\n *      'ups' : 0.3, // Units per Step() per Step()\r\n *      'max' : 15.5 // Max gravity rate\r\n *    },\r\n *   'deadZone' : {\r\n *      'controller' : 0.10, // Dead zone for controller input, in stick tilt\r\n *      'touch' : 20, // Dead zone for touch input, in pixels\r\n *      'xr' : 0.10 // Dead zone for XR input, in hand detection precision\r\n *    },\r\n *  }\r\n */\r\nexport const pxlUserSettings = {\r\n    'height' : {\r\n        'standing' : 1.75, // Standing height in units; any camera in your room's FBX will override this height once loaded\r\n        'stepSize' : 5 // Max step height in units\r\n      },\r\n    'movement' : {\r\n        'scalar' : 1.0, // Overall movement rate scalar\r\n        'max' : 10.0, // Max movement speed\r\n        'easing' : 0.55, // Easing rate between Step() calls\r\n      },\r\n    'look' : {\r\n        'pc' : {\r\n            'invert' : false // Invert ( Southpaw ) look on desktop\r\n          },\r\n        'mobile' : {\r\n            'invert' : true // Invert look on mobile\r\n          }\r\n      },\r\n    'headBounce' : {\r\n        'height' : 0.3, // Bounce magnitude in units\r\n        'rate' : 0.025, // Bounce rate per Step()\r\n        'easeIn' : 0.03, // When move key is pressed, the ease into bounce; `bounce * ( boundInf + easeIn )`\r\n        'easeOut' : 0.95 // When move key is let go, the ease back to no bounce; `bounce * easeOut`\r\n      },\r\n    'jump' : {\r\n        'impulse' : 0.75, // Jump impulse force applied to the player while holding the jump button\r\n        'holdMax' : 2.85, // Max influence of holding the jump button on current jump; in seconds\r\n        'repeatDelay' : 0.08 // Delay between jumps when holding the jump button\r\n      },\r\n    'gravity' : {\r\n        'ups' : 0.3, // Units per Step() per Step()\r\n        'max' : 15.5 // Max gravity rate\r\n      },\r\n    'deadZone' : {\r\n        'controller' : 0.10, // Dead zone for controller input, in stick tilt\r\n        'touch' : 20, // Dead zone for touch input, in pixels\r\n        'xr' : 0.10 // Dead zone for XR input, in hand detection precision\r\n      },\r\n  };\r\n\r\n/**\r\n * @global\r\n * @name pxlOptions\r\n * @description Default options for pxlNav\r\n * \r\n * Pass a pxlOptions object to the pxlNav constructor to override these defaults.\r\n * @property {number} verbose - Verbosity level for console logging\r\n * @property {object} fps - Frames per second settings\r\n * @property {number} fps.pc - FPS for desktop\r\n * @property {number} fps.mobile - FPS for mobile\r\n * @property {boolean} staticCamera - Whether the camera is static\r\n * @property {boolean} autoCamera - Whether the camera is automatically controlled\r\n * @property {boolean} allowStaticRotation - Whether static rotation is allowed\r\n * @property {pxlUserSettings} userSettings - User settings for pxlNav; set to a `pxlUserSettings` object\r\n * @property {boolean} subTickCalculations - Whether to calculate sub-ticks\r\n * @property {string} pxlRoomRoot - Path to room assets\r\n * @property {string} pxlAssetRoot - Path to asset assets\r\n * @property {boolean} showOnboarding - Whether to show onboarding\r\n * @property {object} onboarding - Onboarding settings\r\n * @property {object} onboarding.pc - Onboarding settings for desktop\r\n * @property {string} onboarding.pc.message - Onboarding message for desktop\r\n * @property {string[]} onboarding.pc.messageStyle - Onboarding message style for desktop\r\n * @property {string} onboarding.pc.buttonText - Onboarding button text for desktop\r\n * @property {string[]} onboarding.pc.buttonStyle - Onboarding button style for desktop\r\n * @property {object} onboarding.mobile - Onboarding settings for mobile\r\n * @property {string} onboarding.mobile.message - Onboarding message for mobile\r\n * @property {string[]} onboarding.mobile.messageStyle - Onboarding message style for mobile\r\n * @property {string} onboarding.mobile.buttonText - Onboarding button text for mobile\r\n * @property {string[]} onboarding.mobile.buttonStyle - Onboarding button style for mobile\r\n * @property {string[]} loaderPhrases - Loader phrases\r\n * @property {string} antiAliasing - Anti-aliasing level\r\n * @property {object} collisionScale - Collision scale settings\r\n * @property {number} collisionScale.gridSize - Grid size for collision\r\n * @property {number} collisionScale.gridReference - Grid reference for collision\r\n * @property {string} shadowMapBiasing - Shadow map biasing level\r\n * @property {boolean} loadEnvAssetFile - Whether to load environment asset file\r\n * @property {string} skyHaze - Sky haze level\r\n * @property {object} postProcessPasses - Post-process passes settings\r\n * @property {boolean} postProcessPasses.roomGlowPass - Whether to enable room glow pass\r\n * @property {boolean} postProcessPasses.mapComposerWarpPass - Whether to enable map composer warp pass\r\n * @property {boolean} postProcessPasses.chromaticAberrationPass - Whether to enable chromatic aberration pass\r\n * @property {boolean} postProcessPasses.lizardKingPass - Whether to enable lizard king pass\r\n * @property {boolean} postProcessPasses.starFieldPass - Whether to enable star field pass\r\n * @property {boolean} postProcessPasses.crystallinePass - Whether to enable crystalline pass\r\n * @example\r\n * // Example usage\r\n *  import { pxlNav, pxlOptions } from './pxlNav.js';\r\n * \r\n * // Project name\r\n * const projectTitle = \"Test Project\";\r\n * \r\n * // Booting rooms\r\n * const startingRoom = \"YourEnvironment\";\r\n * const bootRoomList = [startingRoom];\r\n * \r\n * // Target FPS (Frames Per Second)\r\n * //   Default is - PC = 60  -&-  Mobile = 30\r\n * const targetFPS = {\r\n *   'pc' : 45,\r\n *   'mobile' : 30\r\n * };\r\n * \r\n * // Copy the default options\r\n * let pxlNavOptions = Object.assign({},pxlOptions);\r\n * pxlNavOptions.fps = targetFPS;\r\n * \r\n * const pxlNavEnv = new pxlNav( pxlNavOptions, projectTitle, startingRoom, bootRoomList );\r\n * pxlNavEnv.init();\r\n * @example\r\n * export const pxlOptions = {\r\n *   'verbose' : pxlEnums.VERBOSE_LEVEL.NONE,\r\n *   'fps' : {\r\n *      'pc' : 60,\r\n *      'mobile' : 30\r\n *    },\r\n *    'renderScale' : {\r\n *      'pc' : 1.0,\r\n *      'mobile' : 1.0\r\n *    },\r\n *   'staticCamera' : false,\r\n *   'autoCamera' : false,\r\n *   'allowStaticRotation' : false,\r\n *   'userSettings' : Object.assign({}, pxlUserSettings),\r\n *   'subTickCalculations' : false,\r\n *   'pxlRoomRoot' : \"./pxlRooms\",\r\n *   'pxlAssetRoot' : \"./pxlAssets\",\r\n *   'showOnboarding' : true,\r\n *   'onboarding' : {\r\n *      'pc' : {\r\n *         'message' : \"Welcome to<br>%projectTitle%\",\r\n *         'messageStyle' : ['pxlGui-welcome-message'],\r\n *         'buttonText' : \"close\",\r\n *         'buttonStyle' : ['guiButton']\r\n *       },\r\n *      'mobile' : {\r\n *         'message' : \"Welcome to<br>%projectTitle%\",\r\n *         'messageStyle' : ['pxlGui-mobile-body'],\r\n *         'buttonText' : \"start\",\r\n *         'buttonStyle' : ['guiButton', 'pxlGui-mobile-welcomeButton']\r\n *       }\r\n *    },\r\n *   'loaderPhrases' : ['...loading the pixels...'],\r\n *   'antiAliasing' : pxlEnums.ANTI_ALIASING.LOW,\r\n *   'collisionScale' : {\r\n *      'gridSize' : 50,\r\n *      'gridReference' : 1000\r\n *    },\r\n *   'shadowMapBiasing' : pxlEnums.SHADOW_MAP.BASIC,\r\n *   'loadEnvAssetFile' : false,\r\n *   'skyHaze' : pxlEnums.SKY_HAZE.OFF,\r\n *   'postProcessPasses' : { // Enabling these use assets from ` pxlAssetRoot : './pxlAssets' `\r\n *      'roomGlowPass' : false,\r\n *      'mapComposerWarpPass' : false,\r\n *      'chromaticAberrationPass' : false,\r\n *      'lizardKingPass' : false,\r\n *      'starFieldPass' :  false,\r\n *      'crystallinePass' : false\r\n *    }\r\n * }\r\n */\r\nexport const pxlOptions = {\r\n    'verbose' : pxlEnums.VERBOSE_LEVEL.NONE,\r\n    'framework' : pxlEnums.FRAMEWORK.NATIVE,\r\n    'fps' : {\r\n        'pc' : 60,\r\n        'mobile' : 30\r\n      },\r\n    'renderScale' : {\r\n        'pc' : 1.0,\r\n        'mobile' : 1.5\r\n      },\r\n    'fullLoadPreBoot' : true,\r\n    'staticCamera' : false,\r\n    'autoCamera' : false,\r\n    'allowStaticRotation' : false,\r\n    'userSettings' : Object.assign({}, pxlUserSettings),\r\n    'subTickCalculations' : false,\r\n    'pxlRoomRoot' : \"./pxlRooms\",\r\n    'pxlAssetRoot' : \"./pxlAssets\",\r\n    'showOnboarding' : true,\r\n    'onboarding' : {\r\n        'pc' : {\r\n            'message' : \"Welcome to<br>%projectTitle%\",\r\n            'messageStyle' : ['pxlGui-welcome-message'],\r\n            'buttonText' : \"close\",\r\n            'buttonStyle' : ['guiButton']\r\n          },\r\n        'mobile' : {\r\n            'message' : \"Welcome to<br>%projectTitle%\",\r\n            'messageStyle' : ['pxlGui-mobile-body'],\r\n            'buttonText' : \"start\",\r\n            'buttonStyle' : ['guiButton', 'pxlGui-mobile-welcomeButton']\r\n          }\r\n      },\r\n    'loaderPhrases' : ['...loading the pixels...'],\r\n    'antiAliasing' : pxlEnums.ANTI_ALIASING.LOW,\r\n    'collisionScale' : {\r\n        'gridSize' : 50,\r\n        'gridReference' : 1000\r\n      },\r\n    'shadowMapBiasing' : pxlEnums.SHADOW_MAP.BASIC,\r\n    'loadEnvAssetFile' : false,\r\n    'skyHaze' : pxlEnums.SKY_HAZE.OFF,\r\n    'postProcessPasses' : { // Enabling these use assets from ` pxlAssetRoot : './pxlAssets' `\r\n        'roomGlowPass' : false,\r\n        'mapComposerWarpPass' : false,\r\n        'chromaticAberrationPass' : false,\r\n        'lizardKingPass' : false,\r\n        'starFieldPass' :  false,\r\n        'crystallinePass' : false\r\n      }\r\n  };","\r\nimport {\r\n  ShaderChunk\r\n} from \"../../libs/three/three.module.min.js\";\r\nimport { pxlShaders }  from \"../../pxlNav.js\";\r\nconst shaderHeader = pxlShaders.core.shaderHeader;\r\n\r\n///////////////////////////////////////////////////////////\r\n// Snow Shaders                                         //\r\n/////////////////////////////////////////////////////////\r\n\r\n\r\nexport function rabbitDruidVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    \r\n    #define USE_TANGENT\r\n    #define USE_ENVMAP\r\n    #define USE_SKINNING\r\n\r\n    uniform vec2 eyeBlink;\r\n\r\n    attribute vec4 color;\r\n\r\n    #ifdef USE_TANGENT\r\n      attribute vec4 tangent;\r\n    #endif\r\n\r\n\r\n    varying vec2 vUv;\r\n    varying vec4 vCd;\r\n    varying vec3 vPos;\r\n    varying vec3 vLocalPos;\r\n    varying vec3 vN;\r\n    varying vec3 vTan;\r\n    varying vec3 vObjN;\r\n    \r\n    /***********************************/\r\n    /** Start of THREE Shader Includes **/\r\n    /***********************************/\r\n    ${ShaderChunk[ \"common\" ]}\r\n    //-- -- --//\r\n    ${ShaderChunk[ \"morphtarget_pars_vertex\" ]}\r\n    //-- -- --//\r\n    ${ShaderChunk[ \"skinning_pars_vertex\" ]}\r\n    /*********************************/\r\n    /** End of THREE Shader Includes **/\r\n    /*********************************/\r\n    \r\n    void main(){\r\n      vUv=uv;\r\n      vCd=color;\r\n      \r\n      vec3 transformed = vec3( position );\r\n      vec3 objectNormal = vec3( normal );\r\n      vec3 objectTangent = vec3( tangent.xyz );\r\n      vec3 transformedNormal = objectNormal;\r\n      \r\n      \r\n      /***********************************/\r\n      /** Start of THREE Shader Includes **/\r\n      /***********************************/\r\n      ${ShaderChunk[ \"morphnormal_vertex\" ]}\r\n      //-- -- --//\r\n      ${ShaderChunk[ \"morphtarget_vertex\" ]}\r\n      //-- -- --//\r\n      ${ShaderChunk[ \"skinbase_vertex\" ]}\r\n      //-- -- --//\r\n      ${ShaderChunk[ \"skinnormal_vertex\" ]}\r\n      //-- -- --//\r\n      ${ShaderChunk[ \"skinning_vertex\" ]}\r\n      /*********************************/\r\n      /** End of THREE Shader Includes **/\r\n      /*********************************/\r\n      \r\n      // TODO : Pullrequest this to Three.js\r\n      objectNormal = normalize(objectNormal);\r\n      objectTangent = normalize( objectTangent );\r\n      \r\n      \r\n      vTan =  objectTangent;\r\n      vN =  objectNormal;\r\n      vPos = transformed;\r\n      \r\n      vN = (modelViewMatrix * vec4(normal, 0.0)).xyz;\r\n      vLocalPos = transformed;\r\n      vec4 mvPos=modelViewMatrix * vec4(transformed, 1.0);\r\n      gl_Position = projectionMatrix*mvPos;\r\n      \r\n      \r\n      \r\n      }`;\r\n      return ret;\r\n    }\r\n    \r\n    \r\n    export function rabbitDruidFrag(){\r\n      //let ret=shaderHeader();\r\n      let ret=`\r\n    \r\n    uniform vec2 time;\r\n    uniform sampler2D diffuseTexture;\r\n    uniform sampler2D areTexture;\r\n    uniform sampler2D noiseTexture;\r\n    \r\n\r\n    varying vec2 vUv;\r\n    varying vec4 vCd;\r\n    varying vec3 vPos;\r\n    varying vec3 vLocalPos;\r\n    varying vec3 vN;\r\n    varying vec3 vTan;\r\n    \r\n    varying float vFlicker;\r\n    \r\n    struct DirLight {\r\n      vec3 color;\r\n      vec3 direction;\r\n    };\r\n     \r\n  #if NUM_DIR_LIGHTS > 0\r\n    uniform DirLight directionalLights[NUM_DIR_LIGHTS];\r\n  #endif\r\n    \r\n        \r\n    \r\n    void main(){\r\n      vec4 outCd=vec4(.0, .0, .0, 1.0);\r\n      vec4 diffCd=texture2D(diffuseTexture,vUv);\r\n      vec4 areCd=texture2D(areTexture,vUv);\r\n      outCd = diffCd;\r\n      \r\n      \r\n      vec2 animUv = vUv*.01;\r\n      animUv.y -= time.x*.1;\r\n      vec4 nCd=texture2D(noiseTexture,animUv);\r\n      \r\n      // -- -- -- //\r\n\r\n      vec4 lights = vec4(0.0, 0.0, 0.0, 1.0);\r\n      \r\n\r\n      \r\n      //outCd.rgb*=shadowInf;\r\n      \r\n      lights = vec4(0.0, 0.0, 0.0, 1.0);\r\n      \r\n    #if NUM_DIR_LIGHTS > 0\r\n      for(int i = 0; i < NUM_DIR_LIGHTS; i++) {\r\n          int shadowIndex = i;\r\n          vec3 refNorm = reflect(  normalize(vPos),  vN );\r\n          vec3 lightInf= ( max(0.0, dot(directionalLights[shadowIndex].direction,  refNorm ))) * directionalLights[shadowIndex].color;\r\n          \r\n          lights.rgb += lightInf * (areCd.g*areCd.g+1.0);\r\n      }\r\n      float lMag = length( lights.rgb );\r\n      outCd.rgb = mix(outCd.rgb, outCd.rgb+(outCd.rgb*.55)*lights.rgb, lMag );\r\n      outCd.rgb += lights.rgb * areCd.g;\r\n    #endif\r\n      \r\n      // Add some ambient color to the back rim of the object\r\n      float d = dot( normalize(vec3(0.250, 1.0, 0.50)), -vN )*.5+.35;\r\n      outCd.rgb = mix( outCd.rgb, vec3(.05, .18, .35), d);\r\n\r\n      // -- -- -- //\r\n\r\n      gl_FragColor=vec4( outCd.rgb, 1.0 );\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n\r\nexport function envGroundVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    #define USE_INSTANCING\r\n\r\n    attribute vec4 color;\r\n\r\n    varying vec2 vUv;\r\n    varying vec3 vPos;\r\n    varying vec3 vLocalPos;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalN;\r\n    varying vec3 vCd;\r\n    \r\n    void main(){\r\n        vUv=uv;\r\n        vCd=color.rgb;\r\n        vCd.g = 1.0-vCd.g;\r\n        \r\n        vLocalPos = position;\r\n        vN = (modelViewMatrix * vec4(normal, 0.0)).xyz;\r\n        vLocalN = ( modelMatrix * vec4(normal, 0.0)).xyz;\r\n\r\n        // Shift position to Instance position-\r\n        vec4 pos = vec4( position, 1.0 );\r\n        #ifdef USE_INSTANCING\r\n          pos = instanceMatrix * pos;\r\n        #endif\r\n\r\n        vec4 mvPos=modelViewMatrix * pos;\r\n        gl_Position = projectionMatrix*mvPos;\r\n        vPos = position;\r\n        \r\n    }`;\r\n  return ret;\r\n}\r\n\r\n// Shadow Map Code Used From Three.JS; shadowmap_pars_fragment\r\nexport function envGroundFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D diffuse;\r\n    uniform sampler2D noiseTexture;\r\n        \r\n    uniform vec2 time;\r\n    uniform vec3 fogColor;\r\n     \r\n    varying vec2 vUv;\r\n    varying vec3 vPos;\r\n    varying vec3 vN;\r\n    varying vec3 vCd;\r\n    \r\n    \r\n    struct DirLight {\r\n      vec3 color;\r\n      vec3 direction;\r\n    };\r\n\r\n    #if NUM_DIR_LIGHTS > 0\r\n      uniform DirLight directionalLights[NUM_DIR_LIGHTS];\r\n    #endif\r\n    \r\n    void main(){\r\n        float timer = time.x*.01;\r\n        vec3 pos = vPos*0.006666666666666; // Loop point is 150 units\r\n        vec2 uv = vUv;\r\n        float depth = min(1.0, gl_FragCoord.z / gl_FragCoord.w * .0035 );\r\n        float depthFade = max(0.0, min(1.0, 1.1-depth ));\r\n        depthFade *= depthFade*depthFade;\r\n        \r\n        float crystalGlow = max(0.0,vCd.b-.25);\r\n        \r\n        // Initial color read\r\n        vec4 Cd = texture2D(diffuse,vUv);\r\n        \r\n        vec2 nUv = fract( vec2( (pos.x*2.+pos.z*1.5 +  + timer*crystalGlow )*(1.0+ vCd.g*2.5) , pos.y*vCd.g ) );\r\n        float nCd = texture2D(noiseTexture,nUv).r;\r\n        \r\n        // -- -- -- -- -- -- -- --\r\n        // -- Direction Lights  -- --\r\n        // -- -- -- -- -- -- -- -- -- --\r\n\r\n        vec3 lights = vec3(0.0, 0.0, 0.0);\r\n        #if NUM_DIR_LIGHTS > 0\r\n\r\n          for(int x = 0; x < NUM_DIR_LIGHTS; ++x) {\r\n            vec3 lightInf= ( max(0.0, dot(normalize(directionalLights[x].direction+nCd*.65), reflect( normalize(vPos), vN ) ))) * directionalLights[x].color;\r\n            lights += lightInf;\r\n          }\r\n          \r\n          lights = lights*(((1.0-vCd.g-vCd.r)*.5+.5)+ .5);\r\n        #endif\r\n        \r\n        lights = mix( vec3(0.0), lights, max( 0.0, nCd*vCd.g*.75 + vCd.r*.5 ) );\r\n        \r\n        // Add blue lighting around some of the crystals\r\n        lights += vec3( 0.4038, 0.643, 0.779 ) * (crystalGlow * nCd  );\r\n        \r\n        Cd.rgb += Cd.rgb * lights * (depthFade*.5+.5) ;\r\n        \r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n\r\n\r\n\r\nexport function salioaPlantVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    #define USE_INSTANCING\r\n\r\n    attribute vec4 color;\r\n\r\n    varying vec2 vUv;\r\n    varying vec3 vPos;\r\n    varying vec3 vWorldPos;\r\n    varying vec3 vLocalPos;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalN;\r\n    varying vec3 vCd;\r\n    varying float vAlphaAdd;\r\n    \r\n    void main(){\r\n        vUv=uv;\r\n        vCd=color.rgb;\r\n        \r\n        vAlphaAdd = max(0.0, position.y);\r\n        vAlphaAdd = min(1.0, vAlphaAdd*vAlphaAdd*.014 + max(0.0,1.0-vAlphaAdd*1.3 ) );\r\n        vCd.g = 1.0-vCd.g;\r\n        \r\n        vLocalPos = position;\r\n        vN = (modelViewMatrix * vec4(normal, 0.0)).xyz;\r\n        vLocalN =  normal;\r\n\r\n        // Shift position to Instance position-\r\n        vec4 pos = vec4( position, 1.0 );\r\n        #ifdef USE_INSTANCING\r\n          pos = instanceMatrix * pos;\r\n          vN = (modelViewMatrix * instanceMatrix * vec4(normal, 0.0)).xyz;\r\n          vLocalN = ( instanceMatrix * vec4(normal, 0.0)).xyz;\r\n        #endif\r\n        vPos = pos.xyz;\r\n\r\n        vec4 mvPos=modelViewMatrix * pos;\r\n        gl_Position = projectionMatrix*mvPos;\r\n        vWorldPos = gl_Position.xyz;\r\n        \r\n        \r\n    }`;\r\n  return ret;\r\n}\r\n\r\nexport function salioaPlantFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D diffuse;\r\n    uniform sampler2D noiseTexture;\r\n    uniform sampler2D cloudTexture;\r\n        \r\n    uniform vec2 time;\r\n    uniform vec3 fogColor;\r\n     \r\n    varying vec2 vUv;\r\n    varying vec3 vWorldPos;\r\n    varying vec3 vPos;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalN;\r\n    varying vec3 vCd;\r\n    varying float vAlphaAdd;\r\n    \r\n    \r\n    struct DirLight {\r\n      vec3 color;\r\n      vec3 direction;\r\n    };\r\n\r\n    #if NUM_DIR_LIGHTS > 0\r\n      uniform DirLight directionalLights[NUM_DIR_LIGHTS];\r\n    #endif\r\n    \r\n    void main(){\r\n        float timer = time.x*.01;\r\n        vec3 pos = vPos*0.006666666666666; // Loop point is 150 units\r\n        vec2 uv = vUv;\r\n        float depth = min(1.0, gl_FragCoord.z / gl_FragCoord.w * .0035 );\r\n        float depthFade = max(0.0, min(1.0, 1.1-depth ));\r\n        depthFade *= depthFade*depthFade;\r\n        \r\n        float crystalGlow = max(0.0,vCd.b*vCd.b-.05);\r\n        \r\n        // Initial color read\r\n        vec4 Cd = texture2D(diffuse,vUv);\r\n        \r\n        vec2 nUv = fract( vec2( (pos.x*2.+pos.z*1.5 + timer*crystalGlow )*(1.0+ vCd.g*2.5) , pos.y*vCd.g ) );\r\n        float nCd = texture2D(noiseTexture,nUv).r;\r\n        \r\n        vec2 cnUv = fract( vec2( (pos.x*2.+pos.z*5.5 + fract(vCd.b-timer) )*(1.0+ vCd.g*2.5), pos.y*vCd.g ) );\r\n        vec2 cnMixUv =  vec2( fract(pos.x*.1) , fract(pos.z*.15)+.1 *nCd*2.2  );\r\n        float cnCrystal = clamp( crystalGlow*crystalGlow*2.0,0.0,1.0);\r\n        cnUv = mix( cnMixUv, cnUv,  cnCrystal );\r\n        vec3 cnCd = texture2D(noiseTexture,cnUv).rgb;\r\n        \r\n        // -- -- -- -- -- -- -- --\r\n        // -- Direction Lights  -- --\r\n        // -- -- -- -- -- -- -- -- -- --\r\n\r\n        vec3 lights = vec3(0.0, 0.0, 0.0);\r\n        #if NUM_DIR_LIGHTS > 0\r\n\r\n          for(int x = 0; x < NUM_DIR_LIGHTS; ++x) {\r\n            vec3 lightInf= ( max(0.0, dot(normalize(directionalLights[x].direction+nCd*.65), reflect( normalize(vPos), vN ) ))) * directionalLights[x].color;\r\n            lights += lightInf;\r\n          }\r\n          \r\n          lights = lights*(((1.0-vCd.g-vCd.r)*.5+.5)+ .5);\r\n        #endif\r\n        \r\n        lights = mix( vec3(0.0), lights, max( 0.0, nCd*vCd.g*.75 + vCd.r*.5 ) );\r\n        \r\n        // Add blue lighting around some of the crystals\r\n        lights += vec3( 0.3038, 0.3643, 0.679 ) * (crystalGlow * nCd  );\r\n        \r\n        \r\n        Cd.rgb = vec3( 0.4545, 0.8138, 1.0 ) * cnCrystal * vAlphaAdd;\r\n        \r\n        Cd.rgb += vec3(0.3122, .3683,.4011) * ( min(.8, (nCd) * (1.0+cnCrystal*cnCd.g) )+0.75);\r\n        Cd.rgb += Cd.rgb * lights * (depthFade*.5+.5) ;\r\n        \r\n        \r\n        float alpha = abs(dot( normalize(-vWorldPos), vLocalN ))*.35 * (cnCd.x * cnCd.y * cnCd.z+.5) ;\r\n        Cd.a=abs(.5-min(1.0,vCd.x*vN.z))+.5;\r\n        alpha = clamp( alpha*cnCd.x + vAlphaAdd, 0.0, 0.5 )+.5;\r\n        Cd.a = clamp( Cd.a*alpha + .2, 0.0, 1.0 );\r\n        \r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}","// pxlNav Example :: `Campfire` Environment\r\n//   Created by Kevin Edzenga; 2024,2025\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n// This room is a more complex example of a pxlNav room.\r\n//   It uses many custom shaders, particle systems, and animations.\r\n//\r\n// If you are looking for a simple example to look at first,\r\n//   See the `Void Environment` in the `pxlRooms` folder.\r\n//     It has a single custom shader, a simple pxlNav particle system, and no animations.\r\n//\r\n// What's in this room?\r\n//  - Per-frame updates in `step()`\r\n//      Looping the background movement\r\n//      Run the Rabbit Druid's animation\r\n//  - A custom shader for the Rabbit Druid character\r\n//      Mostly for fog, and eye blinking animation\r\n//  - A custom shader for the environment ground\r\n//  - Some instanced crystals and the ground itself\r\n\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  Color,\r\n  FogExp2,\r\n  UniformsUtils,\r\n  UniformsLib,\r\n  LinearFilter,\r\n  SRGBColorSpace,\r\n  LinearSRGBColorSpace,\r\n  FrontSide,\r\n  DoubleSide\r\n} from \"../../libs/three/three.module.min.js\";\r\n\r\nimport { RoomEnvironment, pxlEffects } from \"../../pxlNav.js\";\r\n\r\nimport { rabbitDruidVert, rabbitDruidFrag,\r\n         envGroundVert, envGroundFrag,\r\n         salioaPlantVert, salioaPlantFrag\r\n } from \"./Shaders.js\";\r\n\r\nconst FloatingDust = pxlEffects.pxlParticles.FloatingDust;\r\n\r\nexport class SaltFlatsEnvironment extends RoomEnvironment{\r\n  constructor( roomName='SaltFlatsEnvironment', assetPath=null, msRunner=null, camera=null, scene=null, cloud3dTexture=null ){\r\n    super( roomName, assetPath, msRunner, camera, scene, cloud3dTexture );\r\n    \r\n    this.assetPath=assetPath+\"Assets/\";\r\n    \r\n    this.sceneFile = this.assetPath+\"SaltFlatsEnvironment.fbx\";\r\n    this.animInitCycle = \"Walk\";\r\n\r\n    // Animation Source & Clips are managed under the hood,\r\n    //   So you only need to set your rig, animations, and connections in one room.\r\n    // Current issue, re-imports will re-read the file from disk/url,\r\n    //   But wont overwrite the data if it exists from a prior Room's load.\r\n    this.animRigName = \"RabbitDruidASalt\";\r\n    this.animSource = {};\r\n\r\n    this.animMixer = null;\r\n    \r\n    this.materialList={};\r\n    this.particleList={};\r\n    \r\n    \r\n    this.pxlCamFOV={ 'PC':40, 'MOBILE':80 };\r\n    this.pxlCamZoom=1;\r\n    this.pxlCamAspect=1;\r\n    this.pxlCamNearClipping = 1;\r\n    this.pxlCamFarClipping = 10000;\r\n\r\n    this.fogColor=new Color(.45,.65,.72);\r\n    this.fogExp=.0007;\r\n    this.fog=new FogExp2( this.fogColor, this.fogExp);\r\n    \r\n    this.perspectiveInstances = 160;\r\n\r\n    this.eyeBlinkInf = new Vector2(0,0);\r\n    this.eyeBlinkMinMaxDelay = [1.0,7.0];\r\n    this.eyeBlinkMinMaxRate = [ .06, 0.1 ];\r\n    this.eyeBlinkNext = 0;\r\n    this.eyeBlinkAnim = 0;\r\n    this.eyeBlinkRate = 0;\r\n  }\r\n  init(){\r\n    super.init();\r\n\r\n    this.animSource = {\r\n      \"RabbitDruidASalt\" : {\r\n        \"rig\" : this.pxlOptions.pxlAssetRoot+\"/RabbitDruidA/RabbitDruidA_rig.fbx\",\r\n        \"anim\" : {\r\n          \"Walk\" : this.pxlOptions.pxlAssetRoot+\"/RabbitDruidA/RabbidDruidA_anim_walk.fbx\"\r\n        },\r\n        \"stateConnections\"  : {\r\n          // Non existing states will be ignored and loop'ed, ie \"Walk\"\r\n          //\"Sit_Idle\" : [\"Sit_Idle\", \"Sit_Stoke\", ...]\r\n          \"Walk\" : [\"Walk\"]\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  start(){\r\n    let animKey = this.animRigName;\r\n    let hasScripted = this.geoList.hasOwnProperty( 'Scripted' );\r\n    if( this.geoList.hasOwnProperty( animKey ) && hasScripted && this.geoList[\"Scripted\"].hasOwnProperty( \"Offset_loc\" )  ){\r\n      let locObj = this.geoList[\"Scripted\"][\"Offset_loc\"];\r\n      let parentObj = this.geoList[ animKey ];\r\n      \r\n      let locPos = locObj.position.clone();\r\n      let locRot = locObj.rotation.clone();\r\n      let locScale = locObj.scale.clone();\r\n\r\n      parentObj.position.set( locPos.x, locPos.y, locPos.z );\r\n      parentObj.rotation.set( locRot.x, locRot.y, locRot.z );\r\n      parentObj.scale.set( locScale.x, locScale.y, locScale.z );\r\n    }\r\n    \r\n    if( this.pxlAnim && this.pxlAnim.hasClip( animKey, this.animInitCycle ) ){\r\n      this.pxlAnim.playClip( animKey, this.animInitCycle );\r\n    }\r\n    \r\n    if( hasScripted && this.geoList[\"Scripted\"].hasOwnProperty(\"pokinStick_geo\") ){\r\n      this.geoList[\"Scripted\"][\"pokinStick_geo\"].visible = false;\r\n    }\r\n  }\r\n\r\n  // Per-Frame Render updates\r\n  step(){\r\n    //super.step();\r\n\r\n    // When the Druid Rabbit finishes loading, we'll step the animation here\r\n    //   Cycle changes occur here as well.\r\n    if(this.animMixer){\r\n      this.pxlAnim.step( this.animRigName );\r\n      this.checkEyeBlink();\r\n    }\r\n\r\n    let scrollGrp = this.geoList[\"Scripted\"][\"MovingEng_grp\"];\r\n    if( scrollGrp ){\r\n      scrollGrp.position.z = (3.6 * this.msRunner.x) % 150.0;\r\n      let shift = 0;\r\n      let scrollThreshold = 150.0;\r\n      let scrollLimit = scrollThreshold - shift;\r\n      if( scrollGrp.position.z > scrollLimit ){\r\n        scrollGrp.position.z -= scrollLimit;\r\n      }\r\n    }\r\n\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  checkEyeBlink(){\r\n    let curMesh = this.pxlAnim.getMesh( this.animRigName );\r\n    if( !curMesh || !curMesh.hasOwnProperty(\"morphTargetInfluences\") || curMesh.morphTargetInfluences.length == 0 ){\r\n      return;\r\n    }\r\n\r\n    if( this.eyeBlinkAnim > 0 ){\r\n      // Decrease the eye blink animation 1 to 0\r\n      this.eyeBlinkAnim -= this.eyeBlinkRate;\r\n      // Map 0-1 to 0-1-0\r\n      let sawAnim = (Math.min(.5,this.eyeBlinkAnim) - Math.max(0,this.eyeBlinkAnim-.5)) * 2;\r\n      this.eyeBlinkInf.x = sawAnim;\r\n      if( this.eyeBlinkAnim <= 0 ){\r\n        // Add a random time until the next eye blink\r\n        this.eyeBlinkNext = this.msRunner.x + this.pxlUtils.randomFloat( this.eyeBlinkMinMaxDelay[0], this.eyeBlinkMinMaxDelay[1] );\r\n      }\r\n    }else{\r\n      this.eyeBlinkInf.x = 0;\r\n      if(this.msRunner.x > this.eyeBlinkNext ){\r\n        // Set the next blink rate, how quickly the animation goes from 1 to 0\r\n        this.eyeBlinkRate = this.pxlUtils.randomFloat( this.eyeBlinkMinMaxRate[0], this.eyeBlinkMinMaxRate[1] );\r\n        this.eyeBlinkAnim = 1;\r\n      }\r\n    }\r\n    \r\n    curMesh.morphTargetInfluences[0] = this.eyeBlinkInf.x;\r\n  }\r\n\r\n  // -- -- --\r\n    \r\n\r\n  buildDust(){\r\n    if( this.mobile ) return;\r\n  \r\n    // -- -- --\r\n  \r\n    let systemName = \"floatingDust\";\r\n    let dustSystem = new FloatingDust( this, systemName );\r\n  \r\n    let dustSystemSettings = dustSystem.getSettings();\r\n    dustSystemSettings[\"vertCount\"] = 800; // Point Count\r\n    dustSystemSettings[\"pScale\"] = 5.5;  // Point Base Scale\r\n    dustSystemSettings[\"pOpacity\"] = .85;  // Overall Opacity\r\n    dustSystemSettings[\"proxDist\"] = 300;  // Proximity Distance from Camera\r\n    dustSystemSettings[\"fadeOutScalar\"] = 3.0;  // Distance-opacity falloff multiplier\r\n    dustSystemSettings[\"additiveBlend\"] = true;\r\n  \r\n    dustSystemSettings[\"offsetPos\"] = new Vector3( -200.0, 15.0, 0.0 ); // Offset center of the system\r\n    dustSystemSettings[\"windDir\"] = new Vector3( -0.0, 0.25, 10.0 ); // Constant direction flow\r\n    dustSystemSettings[\"wanderInf\"] = 0.5; // How much the particle sways\r\n    dustSystemSettings[\"wanderRate\"] = 1.85; // Wander noise rate\r\n    dustSystemSettings[\"wanderFrequency\"] = 2.80; // How frequent the sway happens\r\n    \r\n  \r\n    dustSystemSettings[\"atlasPicks\"] = [\r\n      ...dustSystem.dupeArray([0.0,0.],4), ...dustSystem.dupeArray([0.25,0.],4),\r\n      ...dustSystem.dupeArray([0.0,0.25],4), ...dustSystem.dupeArray([0.25,0.25],4),\r\n      ...dustSystem.dupeArray([0.0,0.5],2), ...dustSystem.dupeArray([0.25,0.5],2),\r\n      ...dustSystem.dupeArray([0.0,0.75],3), ...dustSystem.dupeArray([0.25,0.75],3)\r\n    ];\r\n  \r\n    // Use a texture from the internal `pxlAsset` folder; ( RGB, Alpha )\r\n    dustSystem.setAtlasPath( \"sprite_dustLiquid_rgb.jpg\", \"sprite_dustLiquid_alpha.jpg\" );\r\n  \r\n    // Generate geometry and load texture resources\r\n    dustSystem.build( dustSystemSettings );\r\n  \r\n    this.particleList[systemName] = dustSystem;\r\n  }\r\n\r\n\r\n  // -- -- --\r\n  \r\n  \r\n  fbxPostLoad(){\r\n    super.fbxPostLoad();\r\n    \r\n    if( this.geoList.hasOwnProperty('lights') ){\r\n      this.geoList['lights'].forEach( (light) => {\r\n        if( light.name == \"dirLight_key_lit\" ){\r\n          light.castShadow = true;\r\n        }else{\r\n          light.castShadow = false;\r\n        }\r\n      });\r\n    } \r\n\r\n    // Floating debris in the air\r\n    this.buildDust();\r\n    \r\n    // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n    \r\n    let terraceObjMtl = this.materialList[ \"TerraceBasin_geo\" ];\r\n    if( terraceObjMtl ){\r\n      if( terraceObjMtl.uniforms.map ){\r\n        terraceObjMtl.uniforms.map.minFilter = LinearFilter;\r\n        terraceObjMtl.uniforms.map.magFilter = LinearFilter;\r\n        //terraceObjMtl.uniforms.map.value.encoding = SRGBColorSpace;\r\n        terraceObjMtl.uniforms.map.value.encoding = LinearSRGBColorSpace;\r\n\r\n      }\r\n    }\r\n\r\n    // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n    // TODO : This needs to not be needed --\r\n    //this.setUserHeight( this.camInitPos.y );\r\n    \r\n    this.booted=true;\r\n      \r\n  }\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n// Runs after Rabbit Druid's FBX files have been loaded\r\n  animPostLoad( animKey ){\r\n    if( this.pxlAnim.hasClip( animKey, this.animInitCycle ) ){\r\n      let animMixer = this.pxlAnim.getMixer( animKey );\r\n      this.animMixer = animMixer;\r\n      \r\n      this.pxlAnim.playClip( animKey, this.animInitCycle );\r\n    }else{\r\n      let fallback = 'bind';//this.pxlAnim.getFirstClip( animKey );\r\n      this.animInitCycle = fallback;\r\n      this.log(\"No animation cycle '\"+this.animInitCycle+\"' found; Using '\"+fallback+\"' instead\");\r\n    }\r\n/*\r\n    if( this.geoList[\"Scripted\"].hasOwnProperty( \"Offset_loc\" ) ){\r\n      let offset = this.geoList[\"Scripted\"][\"Offset_loc\"];\r\n      this.camera.position.set( offset.x, offset.y, offset.z );\r\n    }*/\r\n\r\n    let curMesh = this.pxlAnim.getMesh( animKey );\r\n    if(curMesh){\r\n      let curMtl = curMesh.material;\r\n      curMtl.side = DoubleSide;\r\n      let newSkinnedMtl = this.setSkinnedMaterial( curMesh, rabbitDruidVert(), rabbitDruidFrag() );\r\n      this.materialList[ \"RabbitDruidA\" ] = newSkinnedMtl;\r\n    }\r\n  }\r\n  \r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  setSkinnedMaterial( bindObj, vertShader=null, fragShader=null ){\r\n\r\n    let skinnedMtlUniforms = UniformsUtils.merge(\r\n      [\r\n          UniformsLib['common'],\r\n          UniformsLib['lights'],\r\n        {\r\n          'diffuseTexture' : { type:'t', value: null },\r\n          'areTexture' : { type:'t', value: null },\r\n          'noiseTexture' : { type:'t', value: null },\r\n          'mult': { type:'f', value:1 },\r\n        }\r\n      ]\r\n    );\r\n\r\n    skinnedMtlUniforms.diffuseTexture.value = bindObj.material.map;\r\n    skinnedMtlUniforms.areTexture.value = this.pxlUtils.loadTexture( this.pxlOptions.pxlAssetRoot+\"/RabbitDruidA/RabbitDruidA_lowRes_ARE.webp\" );\r\n    skinnedMtlUniforms.noiseTexture.value = this.cloud3dTexture;\r\n    skinnedMtlUniforms.noiseTexture.value = this.cloud3dTexture;\r\n\r\n    let skinnedMaterial = this.pxlFile.pxlShaderBuilder( skinnedMtlUniforms, vertShader, fragShader );\r\n    skinnedMaterial.skinning = true;\r\n    skinnedMaterial.side = DoubleSide;\r\n    skinnedMaterial.lights = true;\r\n\r\n    bindObj.material = skinnedMaterial;\r\n    return skinnedMaterial;\r\n  }\r\n\r\n\r\n// Build Scene and Assets\r\n  build(){\r\n\r\n    let curCharacter = this.animRigName;\r\n    let animFbxLoader = this.pxlFile.loadAnimFBX( this, curCharacter, this.animSource[curCharacter]['rig'], this.animSource[curCharacter]['anim'], this.animSource[curCharacter]['stateConnections']);\r\n\r\n    \r\n    let envGroundUniforms = UniformsUtils.merge(\r\n        [\r\n        UniformsLib[ \"lights\" ],\r\n        {\r\n          'noiseTexture' : { type:'t', value: null },\r\n          'cloudTexture' : { type:'t', value: this.cloud3dTexture },\r\n          'fogColor' : { type: \"c\", value: this.fogColor },\r\n        }]\r\n    )\r\n    envGroundUniforms.noiseTexture.value = this.pxlUtils.loadTexture( \"Noise_UniformWebbing.jpg\" );\r\n\r\n    let mat=this.pxlFile.pxlShaderBuilder( envGroundUniforms, envGroundVert(), envGroundFrag() );\r\n    mat.side=FrontSide;\r\n    mat.lights= true;\r\n    \r\n        \r\n    this.materialList[ \"TerraceBasin_geo\" ]=mat;\r\n    \r\n\r\n    // -- -- -- \r\n\r\n\r\n    let salioaPlanUniforms = UniformsUtils.merge(\r\n        [\r\n        UniformsLib[ \"lights\" ],\r\n        {\r\n          'noiseTexture' : { type:'t', value: null }\r\n        }]\r\n    )\r\n    salioaPlanUniforms.noiseTexture.value = this.pxlUtils.loadTexture( \"Noise_UniformWebbing.jpg\" );\r\n\r\n    let salioaMtl=this.pxlFile.pxlShaderBuilder( salioaPlanUniforms, salioaPlantVert(), salioaPlantFrag() );\r\n    salioaMtl.side=DoubleSide;\r\n    salioaMtl.lights= true;\r\n    \r\n        \r\n    this.materialList[ \"SalioaPlant_geo\" ]=salioaMtl;\r\n\r\n\r\n    // -- -- -- \r\n        \r\n    return this.pxlFile.loadRoomFBX( this );\r\n    \r\n    // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n    \r\n  }\r\n    \r\n    \r\n}","// Auto-generated room index file\r\n// Generated at: 2025-08-05T21:17:33.970Z\r\n\r\nimport { SaltFlatsEnvironment } from './SaltFlatsEnvironment/SaltFlatsEnvironment.js';\r\n\r\n// Room exports\r\nexport {\r\n  SaltFlatsEnvironment\r\n};\r\n\r\n// Room metadata\r\nexport const roomInfo = {\r\n  \"SaltFlatsEnvironment\" : {\r\n    \"path\": \"./SaltFlatsEnvironment/SaltFlatsEnvironment.js\",\r\n    \"lastModified\": \"2025-08-05T17:11:32.970Z\"\r\n  }\r\n};\r\n\r\n// Room loader function for compatibility\r\nexport async function loadRoomModule( roomName ){\r\n  const rooms = { SaltFlatsEnvironment };\r\n  if( rooms[roomName] ){\r\n    return { [roomName]: rooms[roomName] };\r\n  }\r\n  throw new Error( `Room ${roomName} not found` );\r\n}\r\n\r\n// Available room names\r\nexport const availableRooms = [ 'SaltFlatsEnvironment' ];\r\n","/**\r\n * Full-screen textured quad shader\r\n */\r\n\r\nconst CopyShader = {\r\n\r\n\tname: 'CopyShader',\r\n\r\n\tuniforms: {\r\n\r\n\t\t'tDiffuse': { value: null },\r\n\t\t'opacity': { value: 1.0 }\r\n\r\n\t},\r\n\r\n\tvertexShader: /* glsl */`\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = uv;\r\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t}`,\r\n\r\n\tfragmentShader: /* glsl */`\r\n\r\n\t\tuniform float opacity;\r\n\r\n\t\tuniform sampler2D tDiffuse;\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\r\n\t\t\tgl_FragColor = opacity * texel;\r\n\r\n\r\n\t\t}`\r\n\r\n};\r\n\r\nexport { CopyShader };\r\n","import {\r\n\tBufferGeometry,\r\n\tFloat32BufferAttribute,\r\n\tOrthographicCamera,\r\n\tMesh\r\n} from './three.module.min.js';\r\n\r\nclass Pass {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.isPass = true;\r\n\r\n\t\t// if set to true, the pass is processed by the composer\r\n\t\tthis.enabled = true;\r\n\r\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t// if set to true, the pass clears its buffer before rendering\r\n\t\tthis.clear = false;\r\n\r\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\r\n\t\tthis.renderToScreen = false;\r\n\r\n\t}\r\n\r\n\tsetSize( /* width, height */ ) {}\r\n\r\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\r\n\r\n\t}\r\n\r\n\tdispose() {}\r\n\r\n}\r\n\r\n// Helper for passes that need to fill the viewport with a single quad.\r\n\r\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\r\n// https://github.com/mrdoob/three.js/pull/21358\r\n\r\nclass FullscreenTriangleGeometry extends BufferGeometry {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\r\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst _geometry = new FullscreenTriangleGeometry();\r\n\r\nclass FullScreenQuad {\r\n\r\n\tconstructor( material ) {\r\n\r\n\t\tthis._mesh = new Mesh( _geometry, material );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis._mesh.geometry.dispose();\r\n\r\n\t}\r\n\r\n\trender( renderer ) {\r\n\r\n\t\trenderer.render( this._mesh, _camera );\r\n\r\n\t}\r\n\r\n\tget material() {\r\n\r\n\t\treturn this._mesh.material;\r\n\r\n\t}\r\n\r\n\tset material( value ) {\r\n\r\n\t\tthis._mesh.material = value;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { Pass, FullScreenQuad };\r\n","import {\r\n\tShaderMaterial,\r\n\tUniformsUtils\r\n} from './three.module.min.js';\r\nimport { Pass, FullScreenQuad } from './Pass.js';\r\n\r\nclass ShaderPass extends Pass {\r\n\r\n\tconstructor( shader, textureID ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\r\n\r\n\t\tif ( shader instanceof ShaderMaterial ) {\r\n\r\n\t\t\tthis.uniforms = shader.uniforms;\r\n\r\n\t\t\tthis.material = shader;\r\n\r\n\t\t} else if ( shader ) {\r\n\r\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t\tthis.material = new ShaderMaterial( {\r\n\r\n\t\t\t\tname: ( shader.name !== undefined ) ? shader.name : 'unspecified',\r\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\r\n\t\t\t\tuniforms: this.uniforms,\r\n\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\tfragmentShader: shader.fragmentShader\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tthis.fsQuad = new FullScreenQuad( this.material );\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\r\n\r\n\t\tif ( this.uniforms[ this.textureID ] ) {\r\n\r\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\r\n\r\n\t\t}\r\n\r\n\t\tthis.fsQuad.material = this.material;\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.setRenderTarget( writeBuffer );\r\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\r\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.material.dispose();\r\n\r\n\t\tthis.fsQuad.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { ShaderPass };\r\n","import { Pass } from './Pass.js';\r\n\r\nclass MaskPass extends Pass {\r\n\r\n\tconstructor( scene, camera ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.scene = scene;\r\n\t\tthis.camera = camera;\r\n\r\n\t\tthis.clear = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tthis.inverse = false;\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\r\n\r\n\t\tconst context = renderer.getContext();\r\n\t\tconst state = renderer.state;\r\n\r\n\t\t// don't update color or depth\r\n\r\n\t\tstate.buffers.color.setMask( false );\r\n\t\tstate.buffers.depth.setMask( false );\r\n\r\n\t\t// lock buffers\r\n\r\n\t\tstate.buffers.color.setLocked( true );\r\n\t\tstate.buffers.depth.setLocked( true );\r\n\r\n\t\t// set up stencil\r\n\r\n\t\tlet writeValue, clearValue;\r\n\r\n\t\tif ( this.inverse ) {\r\n\r\n\t\t\twriteValue = 0;\r\n\t\t\tclearValue = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\twriteValue = 1;\r\n\t\t\tclearValue = 0;\r\n\r\n\t\t}\r\n\r\n\t\tstate.buffers.stencil.setTest( true );\r\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\r\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\r\n\t\tstate.buffers.stencil.setClear( clearValue );\r\n\t\tstate.buffers.stencil.setLocked( true );\r\n\r\n\t\t// draw into the stencil buffer\r\n\r\n\t\trenderer.setRenderTarget( readBuffer );\r\n\t\tif ( this.clear ) renderer.clear();\r\n\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\trenderer.setRenderTarget( writeBuffer );\r\n\t\tif ( this.clear ) renderer.clear();\r\n\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t// unlock color and depth buffer and make them writable for subsequent rendering/clearing\r\n\r\n\t\tstate.buffers.color.setLocked( false );\r\n\t\tstate.buffers.depth.setLocked( false );\r\n\r\n\t\tstate.buffers.color.setMask( true );\r\n\t\tstate.buffers.depth.setMask( true );\r\n\r\n\t\t// only render where stencil is set to 1\r\n\r\n\t\tstate.buffers.stencil.setLocked( false );\r\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\r\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\r\n\t\tstate.buffers.stencil.setLocked( true );\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass ClearMaskPass extends Pass {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t}\r\n\r\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\r\n\r\n\t\trenderer.state.buffers.stencil.setLocked( false );\r\n\t\trenderer.state.buffers.stencil.setTest( false );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { MaskPass, ClearMaskPass };\r\n","import {\r\n\tClock,\r\n\tHalfFloatType,\r\n\tNoBlending,\r\n\tVector2,\r\n\tWebGLRenderTarget\r\n} from './three.module.min.js';\r\nimport { CopyShader } from './CopyShader.js';\r\nimport { ShaderPass } from './ShaderPass.js';\r\nimport { MaskPass } from './MaskPass.js';\r\nimport { ClearMaskPass } from './MaskPass.js';\r\n\r\nclass EffectComposer {\r\n\r\n\tconstructor( renderer, renderTarget ) {\r\n\r\n\t\tthis.renderer = renderer;\r\n\r\n\t\tthis._pixelRatio = renderer.getPixelRatio();\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\tconst size = renderer.getSize( new Vector2() );\r\n\t\t\tthis._width = size.width;\r\n\t\t\tthis._height = size.height;\r\n\r\n\t\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, { type: HalfFloatType } );\r\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._width = renderTarget.width;\r\n\t\t\tthis._height = renderTarget.height;\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderTarget1 = renderTarget;\r\n\t\tthis.renderTarget2 = renderTarget.clone();\r\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\r\n\r\n\t\tthis.writeBuffer = this.renderTarget1;\r\n\t\tthis.readBuffer = this.renderTarget2;\r\n\r\n\t\tthis.renderToScreen = true;\r\n\r\n\t\tthis.passes = [];\r\n\r\n\t\tthis.copyPass = new ShaderPass( CopyShader );\r\n\t\tthis.copyPass.material.blending = NoBlending;\r\n\r\n\t\tthis.clock = new Clock();\r\n\r\n\t}\r\n\r\n\tswapBuffers() {\r\n\r\n\t\tconst tmp = this.readBuffer;\r\n\t\tthis.readBuffer = this.writeBuffer;\r\n\t\tthis.writeBuffer = tmp;\r\n\r\n\t}\r\n\r\n\taddPass( pass ) {\r\n\r\n\t\tthis.passes.push( pass );\r\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\r\n\r\n\t}\r\n\r\n\tinsertPass( pass, index ) {\r\n\r\n\t\tthis.passes.splice( index, 0, pass );\r\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\r\n\r\n\t}\r\n\r\n\tremovePass( pass ) {\r\n\r\n\t\tconst index = this.passes.indexOf( pass );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tthis.passes.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tisLastEnabledPass( passIndex ) {\r\n\r\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\r\n\r\n\t\t\tif ( this.passes[ i ].enabled ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\trender( deltaTime ) {\r\n\r\n\t\t// deltaTime value is in seconds\r\n\r\n\t\tif ( deltaTime === undefined ) {\r\n\r\n\t\t\tdeltaTime = this.clock.getDelta();\r\n\r\n\t\t}\r\n\r\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\r\n\r\n\t\tlet maskActive = false;\r\n\r\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst pass = this.passes[ i ];\r\n\r\n\t\t\tif ( pass.enabled === false ) continue;\r\n\r\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\r\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\r\n\r\n\t\t\tif ( pass.needsSwap ) {\r\n\r\n\t\t\t\tif ( maskActive ) {\r\n\r\n\t\t\t\t\tconst context = this.renderer.getContext();\r\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\r\n\r\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\r\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\r\n\r\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\r\n\r\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\r\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.swapBuffers();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( MaskPass !== undefined ) {\r\n\r\n\t\t\t\tif ( pass instanceof MaskPass ) {\r\n\r\n\t\t\t\t\tmaskActive = true;\r\n\r\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\r\n\r\n\t\t\t\t\tmaskActive = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t}\r\n\r\n\treset( renderTarget ) {\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\tconst size = this.renderer.getSize( new Vector2() );\r\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\r\n\t\t\tthis._width = size.width;\r\n\t\t\tthis._height = size.height;\r\n\r\n\t\t\trenderTarget = this.renderTarget1.clone();\r\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderTarget1.dispose();\r\n\t\tthis.renderTarget2.dispose();\r\n\t\tthis.renderTarget1 = renderTarget;\r\n\t\tthis.renderTarget2 = renderTarget.clone();\r\n\r\n\t\tthis.writeBuffer = this.renderTarget1;\r\n\t\tthis.readBuffer = this.renderTarget2;\r\n\r\n\t}\r\n\r\n\tsetSize( width, height ) {\r\n\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\r\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\r\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\r\n\r\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\r\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\r\n\r\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\r\n\r\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetPixelRatio( pixelRatio ) {\r\n\r\n\t\tthis._pixelRatio = pixelRatio;\r\n\r\n\t\tthis.setSize( this._width, this._height );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.renderTarget1.dispose();\r\n\t\tthis.renderTarget2.dispose();\r\n\r\n\t\tthis.copyPass.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { EffectComposer };\r\n","import {\r\n\tColor\r\n} from './three.module.min.js';\r\nimport { Pass } from './Pass.js';\r\n\r\nclass RenderPass extends Pass {\r\n\r\n\tconstructor( scene, camera, overrideMaterial = null, clearColor = null, clearAlpha = null ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.scene = scene;\r\n\t\tthis.camera = camera;\r\n\r\n\t\tthis.overrideMaterial = overrideMaterial;\r\n\r\n\t\tthis.clearColor = clearColor;\r\n\t\tthis.clearAlpha = clearAlpha;\r\n\r\n\t\tthis.clear = true;\r\n\t\tthis.clearDepth = false;\r\n\t\tthis.needsSwap = false;\r\n\t\tthis._oldClearColor = new Color();\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\r\n\r\n\t\tconst oldAutoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\tlet oldClearAlpha, oldOverrideMaterial;\r\n\r\n\t\tif ( this.overrideMaterial !== null ) {\r\n\r\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\r\n\r\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearColor !== null ) {\r\n\r\n\t\t\trenderer.getClearColor( this._oldClearColor );\r\n\t\t\trenderer.setClearColor( this.clearColor, renderer.getClearAlpha() );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearAlpha !== null ) {\r\n\r\n\t\t\toldClearAlpha = renderer.getClearAlpha();\r\n\t\t\trenderer.setClearAlpha( this.clearAlpha );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearDepth == true ) {\r\n\r\n\t\t\trenderer.clearDepth();\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\r\n\r\n\t\tif ( this.clear === true ) {\r\n\r\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\r\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.render( this.scene, this.camera );\r\n\r\n\t\t// restore\r\n\r\n\t\tif ( this.clearColor !== null ) {\r\n\r\n\t\t\trenderer.setClearColor( this._oldClearColor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearAlpha !== null ) {\r\n\r\n\t\t\trenderer.setClearAlpha( oldClearAlpha );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.overrideMaterial !== null ) {\r\n\r\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\r\n\r\n\t\t}\r\n\r\n\t\trenderer.autoClear = oldAutoClear;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { RenderPass };\r\n","import {\r\n\tColor\r\n} from './three.module.min.js';\r\n\r\n/**\r\n * Luminosity\r\n * http://en.wikipedia.org/wiki/Luminosity\r\n */\r\n\r\nconst LuminosityHighPassShader = {\r\n\r\n\tname: 'LuminosityHighPassShader',\r\n\r\n\tshaderID: 'luminosityHighPass',\r\n\r\n\tuniforms: {\r\n\r\n\t\t'tDiffuse': { value: null },\r\n\t\t'luminosityThreshold': { value: 1.0 },\r\n\t\t'smoothWidth': { value: 1.0 },\r\n\t\t'defaultColor': { value: new Color( 0x000000 ) },\r\n\t\t'defaultOpacity': { value: 0.0 }\r\n\r\n\t},\r\n\r\n\tvertexShader: /* glsl */`\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = uv;\r\n\r\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t}`,\r\n\r\n\tfragmentShader: /* glsl */`\r\n\r\n\t\tuniform sampler2D tDiffuse;\r\n\t\tuniform vec3 defaultColor;\r\n\t\tuniform float defaultOpacity;\r\n\t\tuniform float luminosityThreshold;\r\n\t\tuniform float smoothWidth;\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\r\n\r\n\t\t\tfloat v = luminance( texel.xyz );\r\n\r\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\r\n\r\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\r\n\r\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\r\n\r\n\t\t}`\r\n\r\n};\r\n\r\nexport { LuminosityHighPassShader };\r\n","import {\r\n\tAdditiveBlending,\r\n\tColor,\r\n\tHalfFloatType,\r\n\tMeshBasicMaterial,\r\n\tShaderMaterial,\r\n\tUniformsUtils,\r\n\tVector2,\r\n\tVector3,\r\n\tWebGLRenderTarget\r\n} from './three.module.min.js';\r\nimport { Pass, FullScreenQuad } from './Pass.js';\r\nimport { CopyShader } from './CopyShader.js';\r\nimport { LuminosityHighPassShader } from './LuminosityHighPassShader.js';\r\n\r\n/**\r\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\r\n * mip map chain of bloom textures and blurs them with different radii. Because\r\n * of the weighted combination of mips, and because larger blurs are done on\r\n * higher mips, this effect provides good quality and performance.\r\n *\r\n * Reference:\r\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\r\n */\r\nclass UnrealBloomPass extends Pass {\r\n\r\n\tconstructor( resolution, strength, radius, threshold ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.strength = ( strength !== undefined ) ? strength : 1;\r\n\t\tthis.radius = radius;\r\n\t\tthis.threshold = threshold;\r\n\t\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\r\n\r\n\t\t// create color only once here, reuse it later inside the render function\r\n\t\tthis.clearColor = new Color( 0, 0, 0 );\r\n\r\n\t\t// render targets\r\n\t\tthis.renderTargetsHorizontal = [];\r\n\t\tthis.renderTargetsVertical = [];\r\n\t\tthis.nMips = 5;\r\n\t\tlet resx = Math.round( this.resolution.x / 2 );\r\n\t\tlet resy = Math.round( this.resolution.y / 2 );\r\n\r\n\t\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\r\n\t\tthis.renderTargetBright.texture.name = 'UnrealBloomPass.bright';\r\n\t\tthis.renderTargetBright.texture.generateMipmaps = false;\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tconst renderTargetHorizontal = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\r\n\r\n\t\t\trenderTargetHorizontal.texture.name = 'UnrealBloomPass.h' + i;\r\n\t\t\trenderTargetHorizontal.texture.generateMipmaps = false;\r\n\r\n\t\t\tthis.renderTargetsHorizontal.push( renderTargetHorizontal );\r\n\r\n\t\t\tconst renderTargetVertical = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\r\n\r\n\t\t\trenderTargetVertical.texture.name = 'UnrealBloomPass.v' + i;\r\n\t\t\trenderTargetVertical.texture.generateMipmaps = false;\r\n\r\n\t\t\tthis.renderTargetsVertical.push( renderTargetVertical );\r\n\r\n\t\t\tresx = Math.round( resx / 2 );\r\n\r\n\t\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\t}\r\n\r\n\t\t// luminosity high pass material\r\n\r\n\t\tconst highPassShader = LuminosityHighPassShader;\r\n\t\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\r\n\r\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = threshold;\r\n\t\tthis.highPassUniforms[ 'smoothWidth' ].value = 0.01;\r\n\r\n\t\tthis.materialHighPassFilter = new ShaderMaterial( {\r\n\t\t\tuniforms: this.highPassUniforms,\r\n\t\t\tvertexShader: highPassShader.vertexShader,\r\n\t\t\tfragmentShader: highPassShader.fragmentShader\r\n\t\t} );\r\n\r\n\t\t// gaussian blur materials\r\n\r\n\t\tthis.separableBlurMaterials = [];\r\n\t\tconst kernelSizeArray = [ 3, 5, 7, 9, 11 ];\r\n\t\tresx = Math.round( this.resolution.x / 2 );\r\n\t\tresy = Math.round( this.resolution.y / 2 );\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tthis.separableBlurMaterials.push( this.getSeperableBlurMaterial( kernelSizeArray[ i ] ) );\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'invSize' ].value = new Vector2( 1 / resx, 1 / resy );\r\n\r\n\t\t\tresx = Math.round( resx / 2 );\r\n\r\n\t\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\t}\r\n\r\n\t\t// composite material\r\n\r\n\t\tthis.compositeMaterial = this.getCompositeMaterial( this.nMips );\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture1' ].value = this.renderTargetsVertical[ 0 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture2' ].value = this.renderTargetsVertical[ 1 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture3' ].value = this.renderTargetsVertical[ 2 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture4' ].value = this.renderTargetsVertical[ 3 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture5' ].value = this.renderTargetsVertical[ 4 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = strength;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = 0.1;\r\n\r\n\t\tconst bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomFactors' ].value = bloomFactors;\r\n\t\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\r\n\r\n\t\t// blend material\r\n\r\n\t\tconst copyShader = CopyShader;\r\n\r\n\t\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\r\n\r\n\t\tthis.blendMaterial = new ShaderMaterial( {\r\n\t\t\tuniforms: this.copyUniforms,\r\n\t\t\tvertexShader: copyShader.vertexShader,\r\n\t\t\tfragmentShader: copyShader.fragmentShader,\r\n\t\t\tblending: AdditiveBlending,\r\n\t\t\tdepthTest: false,\r\n\t\t\tdepthWrite: false,\r\n\t\t\ttransparent: true\r\n\t\t} );\r\n\r\n\t\tthis.enabled = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tthis._oldClearColor = new Color();\r\n\t\tthis.oldClearAlpha = 1;\r\n\r\n\t\tthis.basic = new MeshBasicMaterial();\r\n\r\n\t\tthis.fsQuad = new FullScreenQuad( null );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tfor ( let i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\r\n\r\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < this.renderTargetsVertical.length; i ++ ) {\r\n\r\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderTargetBright.dispose();\r\n\r\n\t\t//\r\n\r\n\t\tfor ( let i = 0; i < this.separableBlurMaterials.length; i ++ ) {\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.compositeMaterial.dispose();\r\n\t\tthis.blendMaterial.dispose();\r\n\t\tthis.basic.dispose();\r\n\r\n\t\t//\r\n\r\n\t\tthis.fsQuad.dispose();\r\n\r\n\t}\r\n\r\n\tsetSize( width, height ) {\r\n\r\n\t\tlet resx = Math.round( width / 2 );\r\n\t\tlet resy = Math.round( height / 2 );\r\n\r\n\t\tthis.renderTargetBright.setSize( resx, resy );\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\r\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'invSize' ].value = new Vector2( 1 / resx, 1 / resy );\r\n\r\n\t\t\tresx = Math.round( resx / 2 );\r\n\t\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\r\n\r\n\t\trenderer.getClearColor( this._oldClearColor );\r\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\r\n\t\tconst oldAutoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\trenderer.setClearColor( this.clearColor, 0 );\r\n\r\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\r\n\r\n\t\t// Render input to screen\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\tthis.fsQuad.material = this.basic;\r\n\t\t\tthis.basic.map = readBuffer.texture;\r\n\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\t\trenderer.clear();\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t}\r\n\r\n\t\t// 1. Extract Bright Areas\r\n\r\n\t\tthis.highPassUniforms[ 'tDiffuse' ].value = readBuffer.texture;\r\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = this.threshold;\r\n\t\tthis.fsQuad.material = this.materialHighPassFilter;\r\n\r\n\t\trenderer.setRenderTarget( this.renderTargetBright );\r\n\t\trenderer.clear();\r\n\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t// 2. Blur All the mips progressively\r\n\r\n\t\tlet inputRenderTarget = this.renderTargetBright;\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tthis.fsQuad.material = this.separableBlurMaterials[ i ];\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = inputRenderTarget.texture;\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionX;\r\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\r\n\t\t\trenderer.clear();\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = this.renderTargetsHorizontal[ i ].texture;\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionY;\r\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\r\n\t\t\trenderer.clear();\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\r\n\r\n\t\t}\r\n\r\n\t\t// Composite All the mips\r\n\r\n\t\tthis.fsQuad.material = this.compositeMaterial;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = this.strength;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = this.radius;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\r\n\r\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\r\n\t\trenderer.clear();\r\n\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t// Blend it additively over the input texture\r\n\r\n\t\tthis.fsQuad.material = this.blendMaterial;\r\n\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetsHorizontal[ 0 ].texture;\r\n\r\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.setRenderTarget( readBuffer );\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t}\r\n\r\n\t\t// Restore renderer settings\r\n\r\n\t\trenderer.setClearColor( this._oldClearColor, this.oldClearAlpha );\r\n\t\trenderer.autoClear = oldAutoClear;\r\n\r\n\t}\r\n\r\n\tgetSeperableBlurMaterial( kernelRadius ) {\r\n\r\n\t\tconst coefficients = [];\r\n\r\n\t\tfor ( let i = 0; i < kernelRadius; i ++ ) {\r\n\r\n\t\t\tcoefficients.push( 0.39894 * Math.exp( - 0.5 * i * i / ( kernelRadius * kernelRadius ) ) / kernelRadius );\r\n\r\n\t\t}\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\t'KERNEL_RADIUS': kernelRadius\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\t'colorTexture': { value: null },\r\n\t\t\t\t'invSize': { value: new Vector2( 0.5, 0.5 ) }, // inverse texture size\r\n\t\t\t\t'direction': { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\t\t'gaussianCoefficients': { value: coefficients } // precomputed Gaussian coefficients\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader:\r\n\t\t\t\t`varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader:\r\n\t\t\t\t`#include <common>\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform sampler2D colorTexture;\r\n\t\t\t\tuniform vec2 invSize;\r\n\t\t\t\tuniform vec2 direction;\r\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\r\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\r\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\r\n\t\t\t\t\t\tfloat x = float(i);\r\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\r\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\r\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\r\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\r\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\r\n\t\t\t\t\t\tweightSum += 2.0 * w;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tgetCompositeMaterial( nMips ) {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\t'NUM_MIPS': nMips\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\t'blurTexture1': { value: null },\r\n\t\t\t\t'blurTexture2': { value: null },\r\n\t\t\t\t'blurTexture3': { value: null },\r\n\t\t\t\t'blurTexture4': { value: null },\r\n\t\t\t\t'blurTexture5': { value: null },\r\n\t\t\t\t'bloomStrength': { value: 1.0 },\r\n\t\t\t\t'bloomFactors': { value: null },\r\n\t\t\t\t'bloomTintColors': { value: null },\r\n\t\t\t\t'bloomRadius': { value: 0.0 }\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader:\r\n\t\t\t\t`varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader:\r\n\t\t\t\t`varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D blurTexture1;\r\n\t\t\t\tuniform sampler2D blurTexture2;\r\n\t\t\t\tuniform sampler2D blurTexture3;\r\n\t\t\t\tuniform sampler2D blurTexture4;\r\n\t\t\t\tuniform sampler2D blurTexture5;\r\n\t\t\t\tuniform float bloomStrength;\r\n\t\t\t\tuniform float bloomRadius;\r\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\r\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\r\n\r\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\r\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\r\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\r\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\r\n\r\nexport { UnrealBloomPass };\r\n","// SVG Helper Utilities\r\n\r\nimport { FileIO } from '../../core/FileIO.js'; // File In / Out\r\n\r\nexport class SVGUtils {\r\n\r\n  // Only Used Twice\r\n  static svgPromise( url, id,style=null, svgStyle=null ){\r\n    let ret={};\r\n    let svgObj=document.getElementById( id );\r\n    if(!svgObj){\r\n      return;\r\n    }\r\n    if(style!=null){\r\n      svgObj.classList.add(style);\r\n    }\r\n        \r\n    let tmpThis=this;\r\n    let svgPromiseObj=Promise.resolve( FileIO.getURLContent( url ) );\r\n    svgPromiseObj.then( (c)=>{\r\n      svgObj.innerHTML=c;\r\n      ret.svg=svgObj.getElementsByTagName( \"svg\" )[0];\r\n      if(svgStyle!=null){\r\n          ret.svg.classList.add(svgStyle);\r\n      }\r\n    });\r\n    ret.promise = svgPromiseObj;\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  // Only Used Once\r\n  static svgRawPromise( url ){\r\n    let ret={};\r\n        \r\n    let tmpThis=this;\r\n    let svgPromiseObj=Promise.resolve( FileIO.getURLContent( url ) );\r\n    svgPromiseObj.then( (c)=>{\r\n      let tmpDiv=document.createElement( \"div\" );\r\n      tmpDiv.innerHTML=c;\r\n      ret.svg=tmpDiv.getElementsByTagName( \"svg\" )[0];\r\n    });\r\n    \r\n    return ret;\r\n  }\r\n    \r\n  static svgIconPromise( url, id, clickEvent, curVal=null, style=null ){\r\n    //contentDocument\r\n    let tmpThis=this;\r\n    let ret={};\r\n    ret.hover=null;\r\n    ret.mute=null;\r\n    ret.caret=null;\r\n    ret.indicator=null;\r\n    ret.waiting=[];\r\n    ret.state=null;\r\n    ret.eventType=clickEvent;\r\n    let svgObj=document.getElementById( id );\r\n    if(!svgObj){\r\n      return;\r\n    }\r\n    if(!style){\r\n      svgObj.classList.add(\"iconStyle\");\r\n    }else{\r\n      svgObj.classList.add(style);\r\n    }\r\n    ret.parent=svgObj.parentNode;\r\n    ret.parent.classList.add(\"iconHover\");\r\n    \r\n    ret.parent.addEventListener(\"click\", (e)=>{ tmpThis.iconEvent( \"click\", ret, clickEvent ); } );\r\n    //ret.parent.addEventListener(\"onmouseover\", (e)=>{ tmpThis.iconEvent( \"over\", ret ); } );\r\n    //ret.parent.addEventListener(\"onmousedown\", (e)=>{ tmpThis.iconEvent( \"down\", ret ); } );\r\n    //ret.parent.addEventListener(\"onmouseout\", (e)=>{ tmpThis.iconEvent( \"out\", ret ); } );\r\n    \r\n    let svgPromiseObj=Promise.resolve( FileIO.getURLContent( url ) );\r\n    svgPromiseObj.then( (c)=>{\r\n    //svgObj.addEventListener( \"load\", ()=>{\r\n      svgObj.innerHTML=c;\r\n      //let svgDoc=svgObj.contentDocument;\r\n      ret.svg=svgObj.getElementsByTagName( \"svg\" )[0];\r\n            if( ret.svg ){\r\n                if(!style){\r\n                    ret.svg.classList.add(\"iconStyle\");\r\n                }else{\r\n                    ret.svg.classList.add(style);\r\n                }\r\n                let children=ret.svg.children;\r\n                \r\n                let svgNS=ret.svg.getAttribute(\"xmlns\");\r\n\r\n                let svgHeight=ret.svg.getAttribute(\"height\");\r\n                let svgWidth=ret.svg.getAttribute(\"width\");\r\n                for(let c=0; c<children.length; ++c){\r\n                    let curChild=children[c];\r\n                    if(id==\"speakerIcon\"){\r\n                        let svgNS=svgObj.getAttribute(\"xmlns\");\r\n                        let svgHeightBox=parseInt( svgHeight );\r\n                        let svgWidthBox=parseInt( svgWidth );\r\n                        let iconButton = document.createElementNS(svgNS, \"rect\");\r\n                        iconButton.setAttribute( \"x\", -1 );\r\n                        iconButton.setAttribute( \"y\", -1 );\r\n                        iconButton.setAttribute( \"fill\", \"white\" );\r\n                        iconButton.setAttribute( \"fill-opacity\", 0 );\r\n                        iconButton.setAttribute( \"height\", svgHeight+2 );\r\n                        iconButton.setAttribute( \"width\", svgWidth+2 );\r\n                        iconButton.setAttribute( \"z-index\", -1 );\r\n                        svgObj.appendChild(iconButton);\r\n                        ret.hover = iconButton;\r\n                        \r\n                        ret.svg.setAttribute( \"fill-opacity\", this.toggleOpacity[0] );\r\n                        \r\n                    }\r\n                    let cId=curChild.getAttribute( \"id\" );\r\n                    if(cId==\"mute\"){\r\n                        ret.mute=curChild;\r\n                        ret.mute.style.transformOrigin= \"50% 50%\";\r\n                        ret.mute.style.filter= \"alpha(opacity=0)\";\r\n                        ret.mute.style.opacity= \"0\";\r\n                        ret.mute.style.transform= \"scale(0,0)\";\r\n                        ret.mute.style.transition= \"scale 1s, opacity .5s, filter .5s\";\r\n                        \r\n                        let loaderStyle=document.createElement('style');\r\n                        loaderStyle.type=\"text/css\";\r\n                        loaderStyle.innerHTML=`\r\n                                @keyframes loadingSpinner{\r\n                                    0%{\r\n                                        transform: rotate(0deg);\r\n                                    }\r\n                                    100%{\r\n                                        transform: rotate(360deg);\r\n                                    }\r\n                                }\r\n                            `;\r\n                        ret.svg.appendChild(loaderStyle);\r\n                        \r\n                        let minWH=Math.max(2, Math.min( svgHeight, svgWidth )*.25 );\r\n                        let cx=svgWidth*.5;\r\n                        let cy=svgHeight*.5;\r\n                        let loadingPath = document.createElementNS(svgNS, \"path\");\r\n                        loadingPath.setAttribute( \"d\", ` M ${cx} ${cy-minWH} A ${minWH} ${minWH} 0 1 1 ${cx-minWH} ${cy} ` );\r\n                        loadingPath.setAttribute( \"stroke\", \"white\" );\r\n                        loadingPath.setAttribute( \"stroke-width\", \"2\" );\r\n                        loadingPath.style.display=\"none\";\r\n                        loadingPath.style.transformOrigin= \"50% 50%\";\r\n                        loadingPath.style.animation=\"loadingSpinner 1s linear infinite\";\r\n                        loadingPath.style.animationDuration=\"2s\";\r\n                        loadingPath.style.animationPlayState=\"paused\";\r\n                        \r\n                        ret.indicator=loadingPath;\r\n                        ret.svg.appendChild(loadingPath);\r\n                        \r\n                        this.toggleIcon( ret, curVal );\r\n                    }else if(cId==\"caret\"){\r\n                        ret.caret=curChild;\r\n                        ret.caret.style.transformOrigin= \"50% 50%\";\r\n                        ret.caret.style.transition= \"transform .5s\";\r\n                        this.flipIcon( ret, false );\r\n                    }else if(cId==\"state\"){\r\n                        curChild.style.display= \"none\";\r\n                        ret.state= curChild ;\r\n                    }else{\r\n                        ret.waiting.push( curChild );\r\n                    }\r\n                }\r\n                \r\n                let iconButton = document.createElementNS(svgNS, \"rect\");\r\n                iconButton.classList.add( \"iconHover\" );\r\n                iconButton.setAttribute( \"x\", 0 );\r\n                iconButton.setAttribute( \"y\", 0 );\r\n                iconButton.setAttribute( \"height\", svgHeight );\r\n                iconButton.setAttribute( \"width\", svgWidth );\r\n                ret.svg.appendChild(iconButton);\r\n                \r\n            }\r\n    });\r\n    \r\n        ret.promise=svgPromiseObj;\r\n        \r\n    return ret;\r\n  }\r\n    \r\n  /**\r\n  * Get SVG source and load the content directly into the provided div.\r\n  * This prevents creation of an Object with nested document.\r\n  * Also allows using primary DOM css, instead of injecting a new style object and classes\r\n  * @param {string} url Desired SVG url\r\n  * @param {(string|object)} obj Target DOM object to insert aquired SVG source into.\r\n  * @param {string=} svgStyle Optional class style to add to the SVG\r\n  * @param {button=} button Option to make the SVG clickable.  Transparent backgrounds don't catch mouse  ouch events.\r\n  */\r\n  static svgButtonPromise(url, obj, svgStyle=null, button=false, action=null){ // SVG Path, [guiDiv,guiObj,null,null]\r\n    if(typeof(obj)==\"string\"){\r\n      obj=document.getElementById(obj);\r\n      if(!obj){ return; }\r\n    }\r\n    let tmpThis=this;\r\n    let svgPromiseObj=Promise.resolve( FileIO.getURLContent( url ) );\r\n    svgPromiseObj.then( (c)=>{\r\n      obj.innerHTML=c;\r\n      let svgObj=obj.getElementsByTagName(\"svg\");\r\n      if( svgObj.length>0 ){\r\n        svgObj=svgObj[0];\r\n        if(svgStyle){\r\n          svgStyle= typeof(svgStyle)==\"string\" ? [ svgStyle ] : svgStyle;\r\n          svgStyle.forEach( (s)=>{\r\n            svgObj.classList.add( s );\r\n          });\r\n        }\r\n        if(button){\r\n          let svgNS=svgObj.getAttribute(\"xmlns\");\r\n          let svgHeight=parseInt( svgObj.getAttribute(\"height\") );\r\n          let svgWidth=parseInt( svgObj.getAttribute(\"width\") );\r\n          let iconButton = document.createElementNS(svgNS, \"rect\");\r\n          iconButton.setAttribute( \"x\", -1 );\r\n          iconButton.setAttribute( \"y\", -1 );\r\n          iconButton.setAttribute( \"fill\", \"white\" );\r\n          iconButton.setAttribute( \"fill-opacity\", 0 );\r\n          iconButton.setAttribute( \"height\", svgHeight+2 );\r\n          iconButton.setAttribute( \"width\", svgWidth+2 );\r\n          iconButton.setAttribute( \"z-index\", -1 );\r\n          svgObj.appendChild(iconButton);\r\n          \r\n          let svgBG=svgObj.getElementById(\"state\");\r\n          if(svgBG){\r\n            svgBG.setAttribute( \"fill-opacity\", this.toggleOpacity[0] );\r\n          }\r\n          if(action){\r\n            svgObj.onclick=(e)=>{ tmpThis.svgCheckClick(e, action); };\r\n            if( tmpThis.pxlDevice.mobile ){\r\n                svgObj.ontouchstart=(e)=>{ tmpThis.svgStylize(e, true); };\r\n                svgObj.ontouchend=(e)=>{ tmpThis.svgStylize(e, false); };\r\n            }else{\r\n                svgObj.onmouseover=(e)=>{ tmpThis.svgStylize(e, true); };\r\n                svgObj.onmouseout=(e)=>{ tmpThis.svgStylize(e, false); };\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","// GUI Manager\r\n//   Base class for Div/Span generator, SVG loader/animator, & CSS management\r\n//   Written by Kevin Edzenga; 2020, 2024\r\n// -- -- -- -- -- --\r\n\r\n/*import { HelpGui } from './pxlGui/HelpGui.js';\r\nimport { InfoGui } from './pxlGui/InfoGui.js';\r\nimport { SettingsGui } from './pxlGui/SettingsGui.js';*/\r\n\r\n// THIS FILE IS A MESS!!\r\n//   When necessity and limited time drives development....\r\n\r\n// TODO : Remove Antib0dy.Club specific code\r\n// TODO : Remove hard coded html/css, promote to div generator class\r\n\r\nimport { SVGUtils } from './utils/svgUtils.js';\r\nimport {VERBOSE_LEVEL} from '../core/Enums.js';\r\n\r\n\r\nexport class GUIManager{\r\n  constructor(verbose, projectTitle=\"Metal-Asylum\", assetRoot=\"./assets/\", guiRoot=\"./assets/GUI/\"){\r\n\r\n  this.projectTitle = projectTitle;\r\n  this.verbose = verbose;\r\n\r\n  //this.bootTime=new Date().getTime();\r\n  this.mobile=false;\r\n  this.pxlOptions=null;\r\n  this.pxlFile=null;\r\n  this.pxlCookie=null;\r\n  this.pxlTimer=null;\r\n  this.pxlAudio=null;\r\n  this.pxlUtils=null;\r\n  this.pxlUser=null;\r\n  this.pxlDevice=null;\r\n  this.pxlAutoCam=null;\r\n  this.pxlCamera=null;\r\n  this.pxlNavCanvas=null;\r\n  this.pxlQuality=null;\r\n  this.pxlEnv=null;\r\n  this.assetRoot=assetRoot;\r\n  this.guiRoot=guiRoot;\r\n  //this.djAudioObj=null;\r\n  this.introHelpActive=true;\r\n  \r\n  // -- Medalion Loads\r\n  this.branding={\r\n    title:projectTitle,\r\n    loader:guiRoot+\".svg\",\r\n    logo:guiRoot+\".svg\",\r\n    medalion:guiRoot+\".svg\",\r\n    stack:guiRoot+\".svg\"\r\n  };\r\n\r\n  // Loader Phrases\r\n  this.loaderPhrases=[ \"Loading...\" ];\r\n    \r\n  // Dynamic Styles \r\n  this.lableBoxSize=40; // Device Label Box Size\r\n  this.optionWidthRound=10;\r\n  this.optionWidthAdd=25;\r\n  this.deviceOptionHeight=[0, 300]; // Device Option List Max-Height's\r\n  \r\n  this.pxlLoader=null;\r\n  this.pxlLoaderCount=0;\r\n  \r\n    // TODO : This is the loadable stage count\r\n  //      Load js, load room, run room boot, await room environment load/setup, and run post-boot code.\r\n  //      This should be a registration system, not hard coded\r\n  //      As it would be better for loading status for multi-room systems\r\n  //      Loader stages added to a promise/stage list during pre-boot, update max stage count here\r\n  this.pxlLoaderTotal=8;\r\n  \r\n  this.hudBlock={obj:null, active:false};\r\n  this.userControlBlock=null;\r\n  this.hudVisibility=true;\r\n  this.hudIcons={};\r\n  this.hudElements={};\r\n  this.guiWindows={};\r\n  this.msgCount=0;\r\n  this.hudMedalionBar=null;\r\n  this.userProfileMessageInput=null;\r\n  this.userProfileReturnMessage=null;\r\n  this.userCountObj=null;\r\n  this.userCountCur=0;\r\n  this.messageCountObj=null;\r\n  this.messageCountCur=0;\r\n  this.chatMessageDisplay=null;\r\n  this.chatMessageInput=null;\r\n  this.camChoicesActive=false;\r\n  //this.camChoicePrevObj=null;\r\n  this.micChoicesActive=false;\r\n  //this.micChoicePrevObj=null;\r\n    this.pxlNavData={\r\n      active:false,\r\n      gui:null,\r\n      height:null,\r\n      fpsSet:0,\r\n      fps:null,\r\n      dl:null,\r\n      ul:null\r\n    };\r\n    \r\n  this.djPlayerObj=null;\r\n    \r\n  this.buildGuiStatus={\r\n    hud:false,\r\n    userTopBar:false,\r\n    bottomBar:false,\r\n    djPlayer:false,\r\n    roomControls:false,\r\n    verseList:false,\r\n    medalion:false,\r\n    loadingBranding:false\r\n  };\r\n\r\n  this.settingsFields = {\r\n    'changeUsername' : false, // Display Change Username Field\r\n  };\r\n  \r\n  this.requestVerseList=false;\r\n  this.verseList=[];\r\n  this.verseUserCounts={};\r\n  \r\n  this.verseTitlePrefix=\"\";\r\n  this.verseTitleSuffix=\"'s Room\";\r\n  \r\n  this.multiverseData={\r\n  fromVerse:null,\r\n  toVerse:null,\r\n  electedVerse:null,\r\n  mitosisState:false,\r\n  mitosisBufferTime:15,\r\n  mitosisTime:0,\r\n  mitosisUpdateTime:0\r\n  };\r\n  \r\n  // TODO : Move to function to prep dictionary for div lookup\r\n  //      Would operate best for dynamic gen, offset/pos data:flags, and alt text propegation to Help\r\n  this.textDescriptions={\r\n    chatIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">C</span> )</span><br>chat', 'pos':[1,-1.5]},\r\n    multiverseIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">U</span> )</span><br>multiverse<br>selection', 'pos':[0,-1.3]},\r\n    djPlayerVolumeParent:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">B</span> )</span><br>music volume', 'pos':[0,-1.5]},\r\n    \r\n    speakerIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">N</span> )</span><br>mute people<br>pick audio output', 'pos':[0,-1.5]},\r\n    micIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">M</span> )</span><br>mute/pick<br>mic input', 'pos':[0,-1.5]},\r\n    camIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">V</span> )</span><br>enable/pick<br>video input', 'pos':[0,-1.5]},\r\n    \r\n    helpIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">?</span> )</span><br>help &<br>instructions', 'pos':[0,-1.5]},\r\n    infoIconParent:{'text':'Info <span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">I</span> )</span>', 'pos':[-1,0], 'offset':[-10,0]},\r\n    settingsIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">G</span> )</span><br>graphics &<br>navigation', 'pos':[0,-1.5]},\r\n    muteAllIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">N</span> )</span><br>mute all users', 'pos':[1,0]},\r\n    fullScreenIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">F</span> )</span><br>toggle full screen', 'pos':[-1,0]},\r\n    videoQualityIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">H</span> )</span><br>video quality settings', 'pos':[-1,0]},\r\n    //%=\r\n    statsIcon:{'text':'jitsi connection status; toggle connection ', 'pos':[1,0]},\r\n    //%\r\n      //&=\r\n      usersIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">T</span> )</span> user moderator tools', 'pos':[1,0]},\r\n    //&\r\n    ft2Button:{'text':'Environment', 'pos':[-1,0], 'offset':[-10,0]},\r\n    ft3Button:{'text':'Invite Friends', 'pos':[-1,0], 'offset':[-10,0]},\r\n    hud_userCount:{'text':'# of People', 'pos':[-1,0], 'offset':[-10,0]},\r\n  };\r\n  \r\n  \r\n  this.loading=true;\r\n  this.disclaimer=false;\r\n  \r\n  this.mapPrompt=null;\r\n  this.mapPromptBG=null;\r\n  this.delayLoadChatWindow=false;\r\n  \r\n  this.renderSettings=null;\r\n  this.controlSettings=null;\r\n  this.shaderEditorDisplay=null;\r\n  \r\n  this.radioControls=[];\r\n  this.controlState=[true,false,false,false];\r\n  this.controlToggle=[true,true,false,false];\r\n  this.buttonPadding=6;\r\n  this.toggleOpacity=[0.60, 1];\r\n  \r\n  this.qualityText=[\"Netbook\", \"Laptop\", \"Desktop Computer\", \"Gamer Rig\"];\r\n  \r\n  this.activeItem=null;\r\n  \r\n  //&=\r\n  this.jmaWindowVis=false;\r\n  //&\r\n  \r\n  this.actionPopUp=null;\r\n  this.ctaLocalDocURL={}\r\n  \r\n  // ## Gat damn cross origin on google\r\n  // ## iFrames headers to google prevent following links\r\n  // ## Fix!\r\n  this.ctaContentLoading=false;\r\n  this.googleDocHTML=null;\r\n  this.googleDocURL=\"\";\r\n  }\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlOptions=pxlNav.pxlOptions;\r\n    this.pxlFile=pxlNav.pxlFile;\r\n    this.pxlCookie=pxlNav.pxlCookie;\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlAudio=pxlNav.pxlAudio;\r\n    this.pxlUtils=pxlNav.pxlUtils;\r\n    this.pxlUser=pxlNav.pxlUser;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlAutoCam=pxlNav.pxlAutoCam;\r\n    this.pxlCamera=pxlNav.pxlCamera;\r\n    this.pxlNavCanvas=pxlNav.pxlNavCanvas;\r\n    this.pxlQuality=pxlNav.pxlQuality;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n\r\n    this.mobile = pxlNav.mobile;\r\n    this.renderSettings=this.pxlCookie.readCookie(this.pxlUser.renderSettingsCookie);\r\n    this.controlSettings=this.pxlCookie.readCookie(this.pxlUser.controlModeCookie);\r\n\r\n    pxlNav.pxlDevice.subscribe( \"resize\", this.resize.bind(this) );\r\n\r\n  }\r\n  \r\n  init(){\r\n    this.cssBuildClasses();\r\n    this.createContainer();\r\n    this.createFailState();\r\n    this.buildConsole();\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Primary container for all pxlNav DOM elements\r\n  //   This is the parent container for all GUI elements\r\n  createContainer(){\r\n    let container=document.createElement(\"div\");\r\n    container.id=\"pxlNav-container\";\r\n    container.classList.add(\"pxlNav-mainContainerStyle\");\r\n\r\n    document.body.appendChild(container);\r\n\r\n    this.guiWindows.container={ active:true, gui:container };\r\n  }\r\n\r\n  // Add object to the document body\r\n  //   Contain all GUI elements in a single container\r\n  addToContainer( obj ){\r\n    if( !this.guiWindows.container ){\r\n      this.createContainer();\r\n    }\r\n    this.guiWindows.container.gui.appendChild( obj );\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  createFailState(){\r\n    let failState=document.createElement(\"div\");\r\n    failState.id=\"pxlNav-failState\";\r\n    failState.classList.add(\"pxlNav-failStateStyle\");\r\n    document.body.appendChild(failState);\r\n    this.guiWindows.failState={ active:true, gui:failState };\r\n  }\r\n\r\n  addToFailState( obj ){\r\n    if( !this.guiWindows.failState ){\r\n      this.createFailState();\r\n    }\r\n    this.guiWindows.failState.gui.appendChild( obj );\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  prepLoader(){\r\n\t\tthis.mapPromptBG=document.createElement(\"div\");\r\n\t\tthis.mapPromptBG.classList.add(\"mapPromptBackgroundStyle\");\r\n\t\tthis.addToContainer(this.mapPromptBG);\r\n\r\n\t\tthis.mapPrompt=document.createElement(\"div\");\r\n\t\tthis.mapPrompt.setAttribute(\"id\",\"mapPrompt\");\r\n\t\tthis.mapPrompt.classList.add(\"mapPromptStyle\");\r\n\t\tthis.mapPrompt.classList.add(\"fader\");\r\n\t\tthis.mapPrompt.classList.add(\"visOn\");\r\n\t\tthis.mapPrompt.innerHTML=`\r\n            <div id=\"loaderLogoBranding\" class='pxlLoaderLogo'></div>\r\n            <div class='loadStyleParent'>\r\n              <div id='pxlLoader' class='loadStyle'></div>\r\n              <div id='pxlLoaderBackground' class='loadStyleBackground'></div>\r\n            </div>\r\n            <div id=\"loaderBranding\" class='pxlLoaderTitle'>${this.projectTitle}</div>\r\n            <div id=\"loaderMessage\" class='pxlLoaderMessage'></div>\r\n          `;\r\n\t\tthis.addToContainer(this.mapPrompt);\r\n\r\n    let loaderMsgObj=document.getElementById(\"loaderMessage\");\r\n    if(loaderMsgObj){\r\n      \r\n      let loaderMsg = this.loaderPhrases[ Math.floor( Math.random()*this.loaderPhrases.length ) ];\r\n      loaderMsgObj.innerHTML=loaderMsg;\r\n    }\r\n\r\n\t\t\r\n\t\tif(this.buildGuiStatus.loadingBranding){\r\n\t\t\tSVGUtils.svgPromise( this.branding.loader, \"loaderBranding\", \"pxlLoaderTitle\", \"loadBrandingLogo\");\r\n\t\t}\r\n  \r\n\t\t\r\n\t\tthis.pxlLoader=document.getElementById( \"pxlLoader\" );\r\n\t\tthis.pxlLoader.style.width= \"2%\";\r\n\t\t\t\r\n\t\tlet canvasCrashBG=document.createElement(\"div\");\r\n\t\tcanvasCrashBG.classList.add(\"pxlNav-crashPromptBackgroundStyle\");\r\n\t\tthis.addToFailState(canvasCrashBG);\r\n\r\n\t\tlet canvasCrash=document.createElement(\"div\");\r\n\t\tcanvasCrash.classList.add(\"pxlNav-canvasCrashPromptStyle\");\r\n\t\tcanvasCrashBG.appendChild(canvasCrash);\r\n\t\t\r\n\t\tlet inner;\r\n    if(this.pxlQuality){\r\n      if(parseInt(this.pxlQuality.detailLimit)==0){\r\n        inner=`Looks like your computer is having a hard time, but we’ve got your fix.\r\n          <br>Please click <a id=\"pxlNav-crashLink\" class=\"pxlNav-crashLink\">HERE</a> to reload ${this.projectTitle}.`;\r\n      }else{\r\n        inner=`Looks like your computer is still having trouble, but we’ve got another fix for ya.\r\n          <br>Please click <a id=\"pxlNav-crashLink\" class=\"pxlNav-crashLink\">HERE</a> to reload ${this.projectTitle} again.`;\r\n      }\r\n    }\r\n\t\tcanvasCrash.innerHTML=inner;\r\n\t\tlet crashLink=document.getElementById(\"pxlNav-crashLink\");\r\n\t\tif(crashLink){\r\n\t\t\tcrashLink.onclick= this.crashLinkTrigger.bind(this);\r\n\t\t}\r\n  }\r\n\t\r\n  stepLoader(msg=\"\"){\r\n\t\tthis.pxlLoaderCount+=1;\r\n    let curPerc=Math.min(100, this.pxlLoaderCount/(this.pxlLoaderTotal-1)*100.0 )\r\n    if( curPerc == 100 ){\r\n      this.pxlLoader.style.borderRadius = \"5px\";\r\n    }\r\n\t\tthis.pxlLoader.style.width= curPerc +\"%\";\r\n\t\tif( this.verbose >= VERBOSE_LEVEL.INFO ){\r\n\t\t  console.log(\"Loader\", this.pxlLoaderCount, this.pxlLoader.style.width, \"; \"+msg,);\r\n    }\r\n  }\r\n  \r\n  // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  setLoaderPhrases( phrases, clear=true ){\r\n    if( phrases && phrases.length > 0 ){\r\n      if( clear ){\r\n        this.loaderPhrases = [];\r\n      } \r\n      this.loaderPhrases = this.loaderPhrases.concat( phrases );\r\n\r\n      // Check if this function was run after the loader was created\r\n      //   Likely, since the loader starts on init,\r\n      //     Future proofing here\r\n      this.setLoaderObjMessage();\r\n    }\r\n  }\r\n\r\n  setLoaderObjMessage(){\r\n    let loaderMsgObj=document.getElementById(\"loaderMessage\");\r\n    if(loaderMsgObj){\r\n      // I was seeing too many repeats, multi-mod that number!\r\n      let ranEntry = Math.floor( (Math.random()*17391.537193 * this.loaderPhrases.length) % this.loaderPhrases.length  );\r\n      let loaderMsg = this.loaderPhrases[ ranEntry ];\r\n      loaderMsgObj.innerHTML=loaderMsg;\r\n    }\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\t\r\n  booted(){\r\n    this.buildHudBlock();\r\n    this.buildTopBar();\r\n    //this.buildMedalionBar();\r\n    this.buildBottomBar();\r\n    this.buildGuiWindowContainer();\r\n    this.buildUserControlBlock();\r\n    this.buildRawHtml();\r\n\t\t\r\n\t\t// -- -- \r\n\t\t\r\n\t\tthis.prepPageDisplay();\r\n\t\t// this.setPageToDisplay( true );\r\n\t\t// this.togglePageDisplay( true );\r\n  }\r\n  \r\n  step(){\r\n  this.updateGuiPositions();\r\n  \r\n    if( this.pxlUser?.checkItemWearOff(this.pxlTimer.prevMS) ){\r\n      this.hideItemHud();\r\n    }\r\n    \r\n    this.pxlNavDataUpdate();\r\n  }\r\n  \r\n  resize(){\r\n\t\t// Linked to icons, run for any parenting\r\n\t\tthis.resetHelpTextPlacement();\r\n\t\t\r\n\t\tlet optionList=[\"videoinput\",\"audioinput\",\"audiooutput\"];\r\n\t\toptionList.forEach( (type)=>{\r\n\t\t\tlet optionBlockId=null;\r\n\t\t\tlet curIcon=null;\r\n\t\t\tif( type==\"videoinput\" ){\r\n        //this.camChoicesObj=deviceList;\r\n        optionBlockId=\"camChoiceOptionsBlock\";\r\n        curIcon=this.hudIcons.camChoiceIcon;\r\n\t\t\t}else if( type==\"audioinput\" ){\r\n        //this.micChoicesObj=deviceList;\r\n        optionBlockId=\"micChoiceOptionsBlock\";\r\n        curIcon=this.hudIcons.micChoiceIcon;\r\n\t\t\t}else if( type==\"audiooutput\" ){\r\n        //this.micChoicesObj=deviceList;\r\n        optionBlockId=\"speakerChoiceOptionsBlock\";\r\n        curIcon=this.hudIcons.speakerChoiceIcon;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet optionBlock=document.getElementById( optionBlockId );\r\n\t\t\tif(optionBlock && curIcon){\r\n        let curWidth=optionBlock.getBoundingClientRect().width\r\n        \r\n        let bbox=curIcon.parent.getBoundingClientRect();\r\n        optionBlock.style.left=bbox.x-curWidth*.5;\r\n        optionBlock.style.bottom=this.sH - this.hudBottomBar.getBoundingClientRect().y;\r\n\t\t\t}\r\n\t\t});\r\n    \r\n    this.setUserControlPosition();\r\n  \r\n    this.inviteUserPosition();\r\n    this.setArtistInfoSizing();\r\n  }\r\n  resetHelpTextPlacement(){\r\n\t\tlet hudIconKeys=Object.keys( this.textDescriptions );//this.hudIcons );\r\n\t\thudIconKeys.forEach( (i)=>{\r\n\t\t\tlet textDesc = this.textDescriptions[ i ];\r\n\t\t\tif(textDesc){\r\n\t\t\t\tlet helpObj=document.getElementById( \"helpText_\"+i );\r\n\t\t\t\tif(!helpObj){ return; }\r\n\t\t\t\tlet parentObj = document.getElementById( i );\r\n\t\t\t\tif(parentObj){\r\n\t\t\t\t\tlet pad=2; \r\n\t\t\t\t\t\r\n\t\t\t\t\tlet pos=textDesc.pos;\r\n\t\t\t\t\tlet offset= textDesc.offset ? textDesc.offset : [0,0];\r\n\t\t\t\t\tlet parentBox=parentObj.getBoundingClientRect();\r\n\t\t\t\t\tlet helpBox=helpObj.getBoundingClientRect();\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet toX=0;\r\n\t\t\t\t\tlet toY=0;\r\n\t\t\t\t\tlet pOffset=false;\r\n\t\t\t\t\tif(pos[1]<0){\r\n            toY=parentBox.y+helpBox.height*pos[1];\r\n            pOffset=true;\r\n\t\t\t\t\t}else if(pos[1]==0){\r\n\t\t\t\t\t  toY=parentBox.y+parentBox.height*.5-helpBox.height*.5;\r\n\t\t\t\t\t}else if(pos[1]>0){\r\n\t\t\t\t\t  toY=parentBox.y+parentBox.height+helpBox.height*(pos[1]-1);\r\n\t\t\t\t\t  pOffset=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pOffset){\r\n\t\t\t\t\tif(pos[0]<0){\r\n\t\t\t\t\t\ttoX=parentBox.x+parentBox.width+helpBox.width*pos[0];\r\n\t\t\t\t\t}else if(pos[0]==0){\r\n\t\t\t\t\t\ttoX=parentBox.x+parentBox.width*.5-helpBox.width*.5;\r\n\t\t\t\t\t}else if(pos[0]>0){\r\n\t\t\t\t\t\ttoX=parentBox.x+parentBox.width*(pos[0]-1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\tif(pos[0]<0){\r\n\t\t\t\t\t\ttoX=parentBox.x+helpBox.width*pos[0];\r\n\t\t\t\t\t}else if(pos[0]==0){\r\n\t\t\t\t\t\ttoX=parentBox.x+parentBox.width*.5-helpBox.width*.5;\r\n\t\t\t\t\t}else if(pos[0]>0){\r\n\t\t\t\t\t\ttoX=parentBox.x+parentBox.width*2*pos[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttoX=toX+offset[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(toX+helpBox.width > this.sW-pad){\r\n\t\t\t\t\t  toX=this.sW-pad-helpBox.width;\r\n\t\t\t\t\t}else if(toX<pad){\r\n\t\t\t\t\t  toX=pad;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttoY=toY+offset[1];\r\n\t\t\t\t\t\r\n\t\t\t\t\thelpObj.style.left=toX;\r\n\t\t\t\t\thelpObj.style.top=toY;\r\n\t\t\t\t}else{\r\n\t\t\t\t\thelpObj.style.display=\"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n  }\r\n\r\n  refreshPage(){\r\n    window.location.reload();\r\n  }\r\n  \r\n  crashLinkTrigger(e){\r\n    let search=window.location.search.match(/[a-zA-Z0-9=]+/g)\r\n    if(search){\r\n      let retSearch=\"?\";\r\n      search.forEach( (s)=>{\r\n        let splitter=s.split(\"=\");\r\n        if( splitter[0]==\"dlimit\" ){\r\n          retSearch+=splitter[0]+\"=\"+(parseInt(splitter[1])+1)+\"&\";\r\n        }else{\r\n          retSearch+=s+\"&\"\r\n        }\r\n      });\r\n      window.location.search=retSearch;\r\n    }else{\r\n      window.location.search=\"?dlimit=1\";\r\n    }\r\n  }\r\n   \r\n  guiToggleVisibility( active=null ){\r\n    active = active==null ? !this.hudVisibility : active;\r\n    this.hudVisibility=active;\r\n\r\n    if(this.hudTopBar && !this.hudTopBar.origDisplay){ this.hudTopBar.origDisplay = this.hudTopBar.style.display;}\r\n    if(this.fastTravelBar && !this.fastTravelBar.origDisplay){ this.fastTravelBar.origDisplay = this.fastTravelBar.style.display; }\r\n    if(this.hudBottomBar&& !this.hudBottomBar.origDisplay){ this.hudBottomBar.origDisplay = this.hudBottomBar.style.display; }\r\n\r\n    if( active ){\r\n      if(this.hudTopBar) this.hudTopBar.removeAttribute(\"style\"); \r\n      if(this.fastTravelBar) this.fastTravelBar.removeAttribute(\"style\"); \r\n      if(this.hudBottomBar) this.hudBottomBar.removeAttribute(\"style\"); \r\n      \r\n      if( this.userControlBlock ){\r\n        let topStyle=this.userControlBlock.gui.style.top;\r\n        this.userControlBlock.gui.removeAttribute(\"style\"); \r\n        this.userControlBlock.gui.style.top = topStyle;\r\n      }\r\n    }else{\r\n      if(this.hudTopBar) this.hudTopBar.style.display = \"none\" ;\r\n      if(this.fastTravelBar) this.fastTravelBar.style.display = \"none\" ;\r\n      if(this.hudBottomBar) this.hudBottomBar.style.display = \"none\" ;\r\n      if(this.userControlBlock) this.userControlBlock.gui.style.display = \"none\" ;\r\n    }\r\n    if( this.hudElements.artistInfo ){\r\n      this.hudElements.artistInfo.parent.style.display = active ? \"grid\" : \"none\" ;\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  /**\r\n  * Prep css classes for promptFader to isolate required css from external files\r\n  */\r\n\t// TODO : ... Why? Figure out why its used and just do class list toggles\r\n  cssBuildClasses(){\r\n\t\tlet faderStyle=document.createElement('style');\r\n\t\tfaderStyle.type=\"text/css\";\r\n\t\tfaderStyle.innerHTML=`\r\n\t\t\t.fader{\r\n\t\t\t\ttransition: opacity .8s, filter .8s;\r\n\t\t\t}\r\n\t\t\t.visOn{\r\n\t\t\t\tfilter:alpha(opacity=100);\r\n\t\t\t\topacity:1.0;\r\n\t\t\t}\r\n\t\t\t.visOff{\r\n\t\t\t\tfilter:alpha(opacity=0);\r\n\t\t\t\topacity:0.0;\r\n\t\t\t}\r\n\t\t`;\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(faderStyle);\r\n  }\r\n\r\n  /**\r\n  * Prep an object with propper css classes to work with {@link promptFader}\r\n  * @param {(string|object)} obj Object to set classes to.\r\n  * @param {boolean=} startVis If the object starts visible or not. Defaults to not visible, easier for a fade in.\r\n  */\r\n  prepPromptFader( obj, startVis=false ){\r\n\t\tlet curObj=obj;\r\n\t\tif( typeof(curObj) === \"string\" ){\r\n\t\t\tcurObj=document.getElementById(curObj);\r\n\t\t}\r\n    if(!curObj){\r\n      return;\r\n    }\r\n\t\t\t\r\n\t\tcurObj.classList.add(\"fader\");\r\n\t\tcurObj.classList.add( (startVis ? \"visOn\" : \"visOff\") );\r\n\t\tcurObj.style.display= startVis ? \"inline-block\" : \"none\";\r\n  }\r\n  \r\n  /**\r\n  * Fade an object in or out of visiblity over time.\r\n  * Fade animation uses css for the visuals, but uses clock time for automatic fade out events.\r\n  * @param {(string|object)} faderObjObject to fade in or out.\r\n  * @param {boolean} vis Visiblity state to fade to.\r\n  * @param {number=} fadeOutLimit Length of time in Seconds until the object automatically fades out.\r\n  * This occures in the requestAnimationFrame Render function.\r\n  * @param {boolean=} deleteOnEnd Option to remove the object from the document once the fade out completes.\r\n  * For garbage collection reasons, its advised to set this `true` when possible.\r\n  */\r\n  promptFader(faderObj, vis, fadeOutLimit=null, deleteOnEnd=false){\r\n  if(typeof(faderObj)==\"string\"){\r\n    faderObj=document.getElementById(faderObj);\r\n  }\r\n  if(!faderObj){\r\n    return;\r\n  }\r\n\r\n  if( faderObj.hasOwnProperty(\"gui\") ){\r\n    faderObj = faderObj[ 'gui' ];\r\n  }\r\n\r\n  if(faderObj.classList?.value.indexOf(\"fader\")<0){\r\n    faderObj.classList.add(\"fader\");\r\n  }\r\n\r\n  if(vis){\r\n    faderObj.style.display=\"inline-block\";\r\n    setTimeout( ()=>{\r\n        if(faderObj.classList.contains(\"visOff\")){\r\n          faderObj.classList.remove(\"visOff\");\r\n          faderObj.classList.add(\"visOn\");\r\n          if(fadeOutLimit!=null){\r\n            faderObj.setAttribute(\"fadeOut\", fadeOutLimit*1000);\r\n            //fadeOutList.push(faderObj);\r\n          }\r\n        }\r\n    }, 50);\r\n  }else{\r\n    faderObj.classList.remove(\"visOn\");\r\n    faderObj.classList.add(\"visOff\");\r\n    if(deleteOnEnd){\r\n      let transEnd=[\"webkitTransitionEnd\", \"otransitionend\", \"oTransitionEnd\", \"msTransitionEnd\", \"transitionend\"];\r\n      transEnd.forEach((end)=>{\r\n        faderObj.addEventListener(end,()=>{\r\n        let curParent=faderObj.parentNode;\r\n        if(curParent){\r\n          curParent.removeChild(faderObj);\r\n        }\r\n        });\r\n      });\r\n    }else{\r\n      setTimeout( ()=>{\r\n        if(faderObj.classList.contains(\"visOff\")){\r\n          faderObj.style.display=\"none\";\r\n        }\r\n      }, 1000);\r\n    }\r\n  }\r\n  }\r\n  \r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n  buildConsole(){\r\n    let consoleBlock=document.createElement(\"div\");\r\n    consoleBlock.id=\"consoleBlock\";\r\n    consoleBlock.classList.add(\"consoleBlockStyle\");\r\n    this.addToContainer(consoleBlock);\r\n    this.guiWindows.consoleBlock={ active:false, gui:consoleBlock };\r\n  }\r\n\r\n  buildMessageBlock( msg, type=\"Info\" ){\r\n    let messageBlock=document.createElement(\"div\");\r\n    this.msgCount++;\r\n    messageBlock.id=\"messageBlock-\"+this.msgCount;\r\n    messageBlock.classList.add(\"messageBlockStyle\");\r\n    messageBlock.classList.add(\"message\"+type);\r\n\r\n    let self = this;\r\n    let closeBtn=document.createElement(\"div\");\r\n    closeBtn.classList.add(\"messageCloseBtn\");\r\n    closeBtn.innerHTML=\"X\";\r\n    closeBtn.addEventListener(\"click\", function(){\r\n      self.removeMessage( messageBlock );\r\n    });\r\n\r\n    let messageTopBar = document.createElement(\"div\");\r\n    messageTopBar.classList.add(\"messageTopBarStyle\");\r\n    \r\n    let messageHeader = document.createElement(\"div\");\r\n    messageHeader.classList.add(\"messageHeaderStyle\");\r\n    messageHeader.innerHTML=type;\r\n    messageTopBar.appendChild( messageHeader );\r\n    messageTopBar.appendChild( closeBtn );\r\n    messageBlock.appendChild( messageTopBar );\r\n\r\n    let messageContent = document.createElement(\"div\");\r\n    messageContent.classList.add(\"messageContentStyle\");\r\n    messageContent.innerHTML=msg;\r\n    messageBlock.appendChild( messageContent );\r\n\r\n    return messageBlock;\r\n  }\r\n\r\n  print( msg ){\r\n    if( !this.guiWindows.consoleBlock ){\r\n      this.buildConsole();\r\n    }\r\n    if( !this.guiWindows.consoleBlock.active ){\r\n      this.guiWindows.consoleBlock.active=true;\r\n      this.promptFader( this.guiWindows.consoleBlock.gui, true );\r\n    }\r\n    let consoleBlock=this.guiWindows.consoleBlock.gui;\r\n    let consoleMsg=this.buildMessageBlock( msg );\r\n    consoleBlock.appendChild( consoleMsg );\r\n  }\r\n\r\n  \r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  /**\r\n  * For GUI elements, when option boxes and prompts are open; this is the object when clicked will close all open windows.\r\n  */\r\n  buildHudBlock(){\r\n  if(!this.buildGuiStatus.hud){\r\n    return;\r\n  }\r\n  let hudBlock=document.createElement( \"div\" );\r\n  hudBlock.id=\"hudBlock\";\r\n  hudBlock.classList.add(\"hudBlockStyle\");\r\n  this.hudBlock.obj=hudBlock;\r\n  this.addToContainer( this.hudBlock.obj );\r\n  this.hudBlock.obj.style.display=\"none\";\r\n  \r\n  let tmpThis=this;\r\n  this.hudBlock.obj.addEventListener(\"click\", (e)=>{ tmpThis.toggleHudBlock( false, true ); } );\r\n  }\r\n  \r\n  /**\r\n  * Toggle visibility of the background GUI exit object.\r\n  * Option to to set the specific visibility, along with force closing all open GUI windows.\r\n  * TODO: Set up heirachical windows, so instead of just closing all windows, the click action goes back to the previous menu.\r\n  * @param {boolean=} active The visibility value to set the background GUI exit object.\r\n  * @param {boolean=} close If all open GUI window objects need to close out as well.\r\n  */\r\n  toggleHudBlock(active=null, close=false){\r\n    if(!this.hudBlock){\r\n      return; // No Hud Block Exists\r\n    }\r\n    active = active==null ? !this.hudBlock.active : active;\r\n    this.hudBlock.active=active;\r\n    let hudObjDisplay = false\r\n    if( active ){\r\n      hudObjDisplay=\"inline-block\";\r\n    }else{\r\n      if( !this.checkOpenWindows( close ) ){ // Returns if any windows are open, if not, hide the background object.\r\n    hudObjDisplay=\"none\";\r\n    if(this.pxlNavCanvas){ this.pxlNavCanvas.focus(); }\r\n      }\r\n    }\r\n    \r\n    if( this.hudBlock.obj && this.hudBlock.obj.style && hudObjDisplay != false ){\r\n      this.hudBlock.obj.style.display=hudObjDisplay;\r\n    }\r\n    \r\n  }\r\n  /**\r\n  * Return a value of `true` or `false` if there is an open gui window.\r\n  * With option to close any open windows, as a quick exit out of all GUI elements.\r\n  * @param {boolean=} close Optional for closing all open GUI windows.\r\n  */\r\n  checkOpenWindows( close=false ){\r\n    let guiList = Object.keys( this.guiWindows );\r\n    let openStatus=false;\r\n    // TODO : This is a bit of a mess from Antib0dy, needs to be cleaned up\r\n    guiList.forEach( (g)=>{\r\n      if( [\"container\",\"failState\",\"chatBoxGui\"].includes( g ) ){\r\n        return;\r\n      }\r\n      if(close){\r\n        if(this.guiWindows[g].button){\r\n          this.flipIcon(this.guiWindows[g].button, false );\r\n        }\r\n        if(this.guiWindows[g].gui && this.guiWindows[g].active){\r\n          this.guiWindows[g].active=false;\r\n          this.promptFader( this.guiWindows[g].gui, false );\r\n                \r\n          if( g == \"settingsGui\" ){\r\n            this.togglePxlNavDataDisplay( false );\r\n          }\r\n        }\r\n      }\r\n      openStatus=openStatus || this.guiWindows[ g ].active;\r\n    });\r\n    return openStatus;\r\n  }\r\n  \r\n  \r\n  checkFocus( targetId=null, isPxlCore=null ){\r\n    if( isPxlCore===true ){\r\n      if( this.guiWindows.inviteUserGui && this.guiWindows.inviteUserGui.active ){\r\n        this.toggleInviteUser(false);\r\n      }\r\n    }\r\n  }\r\n  /* -- -- -- -- -- -- -- -- -- -- */\r\n  \r\n  buildRawHtml(){}\r\n\t\r\n  buildTopBar(){\r\n\t\tif( this.mobile || !this.buildGuiStatus.userTopBar ){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet topBar=document.createElement( \"div\" );\r\n\t\ttopBar.id=\"hud_topBar\";\r\n\t\ttopBar.classList.add(\"hud_topBarBlockStyle\");\r\n\t\tthis.hudTopBar=topBar;\r\n\t\tthis.addToContainer( this.hudTopBar );\r\n\t\t\r\n\t\tlet subHtml=\"\";\r\n\t\t//%=\r\n\t\t\t//subHtml=`<object id=\"statsIcon\" data='${this.guiRoot}icons/icon_stats.svg' type='image/svg+xml'></object>`;\r\n\t\t\tsubHtml=`<div id=\"statsIcon\"></div>`;\r\n\t\t//%\r\n\t\t//&=\r\n\t\t\tsubHtml+=`</div>\r\n\t\t<div id=\"usersIconParent\">\r\n\t\t\t<div id=\"usersIcon\"></div>`;\r\n\t\t//&\r\n\t\t\r\n\t\tlet html;\r\n\t\thtml=`\r\n\t\t\t<div id=\"hud_localVideoStyle\" class=\"hud_localVideoStyle\"></div>\r\n\t\t\t<div id=\"hud_topBarParent\" class=\"hud_topBarParentStyle\">\r\n\t\t<div id=\"statsIconParent\">\r\n\t\t\t${subHtml}\r\n\t\t</div>\r\n\t\t<div  class=\"hud_topBarVSpacerStyle\"></div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t\ttopBar.innerHTML=html;\r\n\t\t//%=\r\n\t\tthis.hudIcons.statsIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_stats.svg`, \"statsIcon\", \"stats\" );\r\n\t\tthis.hudIcons.statsIcon.promise.finally(()=>{\r\n\r\n\t\t});\r\n\t\t//%\r\n\t\t//&=\r\n\t\tthis.hudIcons.usersIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_user.svg`, \"usersIcon\", \"users\" );\r\n\t\t//&\r\n    \r\n    let pnDataDisplayParent=document.createElement( \"div\" );\r\n\t\tpnDataDisplayParent.id=\"hud_pxlNavData\";\r\n\t\tpnDataDisplayParent.classList.add(\"hud_pxlNavDataParentStyle\");\r\n    topBar.appendChild( pnDataDisplayParent );\r\n    this.pxlNavData.gui=pnDataDisplayParent;\r\n    let pnDataDisplay=document.createElement( \"div\" );\r\n\t\tpnDataDisplay.id=\"hud_pxlNavData\";\r\n\t\tpnDataDisplay.classList.add(\"hud_pxlNavDataStyle\");\r\n    pnDataDisplayParent.appendChild( pnDataDisplay );\r\n    \r\n    html=`\r\n      <div class=\"hud_pxlNavData_FPS gui_boldText\">FPS</div><div class=\"hud_pxlNavData_FPS\">:</div><div id=\"hud_pxlFPS\" class=\"hud_pxlNavData_FPS\"> - </div>\r\n      <div class=\"hud_pxlNavData_UL gui_boldText\">↑</div><div class=\"hud_pxlNavData_UL\">:</div><div id=\"hud_pxlUL\" class=\"hud_pxlNavData_UL\"> - </div>\r\n      <div class=\"hud_pxlNavData_DL gui_boldText\">↓</div><div class=\"hud_pxlNavData_DL\">:</div><div id=\"hud_pxlDL\" class=\"hud_pxlNavData_DL\"> - </div>\r\n    `;\r\n    pnDataDisplay.innerHTML=html;\r\n    \r\n    this.pxlNavData.fps=document.getElementById(\"hud_pxlFPS\");\r\n    this.pxlNavData.ul=document.getElementById(\"hud_pxlUL\");\r\n    this.pxlNavData.dl=document.getElementById(\"hud_pxlDL\");\r\n  }\r\n  \r\n  buildUserControlBlock(){\r\n    this.userControlBlock={};\r\n    this.userControlBlock.activeList=[];\r\n    this.userControlBlock.userList={};\r\n    this.userControlBlock.mutedList=[];\r\n    \r\n\t\tlet userControlsBlock=document.createElement( \"div\" );\r\n    userControlsBlock.classList.add( \"userControlBlockStyle\" );\r\n\t\tthis.addToContainer( userControlsBlock );\r\n    this.userControlBlock.gui=userControlsBlock;\r\n    \r\n    this.userControlBlock.speakerIcon = null;//SVGUtils.svgRawPromise( `${this.guiRoot}icons/icon_userSpeaker.svg` );\r\n  }\r\n  \r\n  \r\n  /*\r\n    this.buildGuiStatus={\r\n      djPlayer:false,\r\n      roomControls:true,\r\n      verseList:false,\r\n      medalion:true\r\n    };\r\n    this.branding={\r\n      loader:guiRoot+\"branding/logogram.svg\",\r\n      logo:guiRoot+\"branding/logomark.svg\",\r\n      medalion:guiRoot+\"branding/logomark.svg\",\r\n      stack:guiRoot+\"branding/logostack.svg\"\r\n    };\r\n  svgIconPromise( url, id, clickEvent, curVal=null, style=null, postLoadCmd=null ){\r\n  */\r\n  buildMedalionBar(){\r\n    if( this.buildGuiStatus.medalion ){\r\n      let medalionBar=document.createElement( \"div\" );\r\n      medalionBar.id=\"hud_medalionBar\";\r\n      medalionBar.classList.add(\"hud_medalionIconBlockStyle\");\r\n      this.hudMedalionBar=medalionBar;\r\n      this.addToContainer( this.hudMedalionBar );\r\n      \r\n      \r\n      let html=`\r\n        <div id=\"medalionIconParent\" class=\"hud_speakerIconStyle\">\r\n          <div id=\"medalionIcon\"></div>\r\n        </div>\r\n        <div id=\"medalionTitle\" class=\"medalionTitleStyle\">${this.branding.title}</div>\r\n      `;\r\n      this.hudMedalionBar.innerHTML=html;\r\n      \r\n      // -- -- -- -- -- -- -- -- -- -- //\r\n      let mIcon=document.getElementById(\"medalionIcon\");\r\n      let mTitle=document.getElementById(\"medalionTitle\");\r\n        mIcon.addEventListener(\"mouseover\", ()=>{\r\n          mTitle.classList.add(\"medalionTitleGrowStyle\");\r\n        });\r\n        mIcon.addEventListener(\"mouseout\", ()=>{\r\n          mTitle.classList.remove(\"medalionTitleGrowStyle\");\r\n        });\r\n      \r\n      this.hudIcons.medalionIcon = SVGUtils.svgIconPromise( this.branding.medalion, \"medalionIcon\", \"info\", null, \"medalionStyle\" );\r\n    }\r\n  }\r\n  \r\n  buildBottomBar(){\r\n  \r\n  if( !this.buildGuiStatus.bottomBar ){\r\n    return;\r\n  }\r\n  let bottomBar=document.createElement( \"div\" );\r\n  bottomBar.id=\"hud_bottomBar\";\r\n  bottomBar.classList.add(\"hud_bottomBarStyle\");\r\n  this.hudBottomBar=bottomBar;\r\n  this.addToContainer( this.hudBottomBar );\r\n  \r\n  //<object id=\"usersIcon\" data='${this.guiRoot}icons/icon_user.svg' type='image/svg+xml'></object>\r\n  \r\n  let html=\"\";\r\n  html+=`\r\n    <div id=\"hud_chatIconBlock\" class=\"hud_bottomLeftBlockStyle\">\r\n        <div id=\"settingsIconParent\" class=\"hud_settingsIconStyle\">\r\n          <object id=\"settingsIcon\"></object>\r\n        </div>\r\n  <div></div>\r\n        <div id=\"helpIconParent\" class=\"hud_helpIconStyle\">\r\n          <object id=\"helpIcon\"></object>\r\n        </div>\r\n        `;\r\n    if( !this.mobile && this.buildGuiStatus.verseList ){\r\n      html+=`<div class=\"hud_usersIconStyle\">\r\n            <div id=\"multiverseIcon\"></div>\r\n          </div>\r\n          <div></div>`;\r\n    }\r\n    /*html+= `<div id=\"musicControllerBlock\" class=\"hud_musicControllerBlockStyle\">kj\r\n  </div>\r\n      `;*/\r\n    html+='</div>';\r\n    if( !this.mobile ){\r\n      html+=`\r\n        <div class=\"hud_micCamIconsBlockStyle\">\r\n          <div id=\"speakerIconParent\" class=\"hud_speakerIconStyle\">\r\n            <div id=\"speakerIcon\"></div>\r\n          </div>\r\n          <div id=\"speakerChoiceIconParent\" class=\"hud_speakerChoiceIconStyle\">\r\n            <div id=\"speakerChoiceOptionsBlock\" class=\"gui_iconButtonPopup\">\r\n            </div>\r\n            <div id=\"speakerChoiceIconParent\">\r\n              <div id=\"speakerChoiceIcon\" class=\"iconCaretStyle\"></div>\r\n            </div>\r\n          </div>\r\n          <div class=\"hud_micCamSpacerStyle\"></div>\r\n          <div id=\"micIconParent\" class=\"hud_micIconStyle\">\r\n            <div id=\"micIcon\"></div>\r\n          </div>\r\n          <div id=\"micChoiceIconParent\" class=\"hud_micChoiceIconStyle\">\r\n            <div id=\"micChoiceOptionsBlock\" class=\"gui_iconButtonPopup\">\r\n            </div>\r\n            <div id=\"camChoiceIconParent\">\r\n              <div id=\"micChoiceIcon\" class=\"iconCaretStyle\"></div>\r\n            </div>\r\n          </div>\r\n          <div class=\"hud_micCamSpacerStyle\"></div>\r\n          <div id=\"camIconParent\" class=\"hud_camIconStyle\">\r\n            <div id=\"camIcon\"></div>\r\n          </div>\r\n          <div id=\"camChoiceIconBlock\" class=\"hud_camChoiceIconStyle\">\r\n            <div id=\"camChoiceOptionsBlock\" class=\"gui_iconButtonPopup\">\r\n            </div>\r\n            <div id=\"camChoiceIconParent\">\r\n              <div id=\"camChoiceIcon\" class=\"iconCaretStyle\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div id=\"hud_helpInfoSettingsBlock\" class=\"hud_helpInfoSettingsBlockStyle\">\r\n          <div class=\"guiVerseHudTitle\">\r\n            <span id=\"guiVerseTitle\"></span>\r\n          </div>\r\n          <div></div>\r\n          <div id=\"chatIconParent\" class=\"hud_chatIconStyle\">\r\n            <div id=\"chatIcon\"></div>\r\n          </div>\r\n          <div id=\"hud_messageCount\" class=\"hud_userCountStyle hud_messageCountBaseStyle\">0</div>\r\n        </div>\r\n      `;\r\n    }\r\n  this.hudBottomBar.innerHTML=html;\r\n  \r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  this.messageCountObj=document.getElementById( \"hud_messageCount\" );\r\n  //this.messageCountObj.style.display=\"none\";\r\n  \r\n  // ## Damn it React... Damn it native JavaScript ... I want some Angular...\r\n  this.hudIcons.chatIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_chat.svg`, \"chatIcon\", \"chat\" );\r\n    \r\n    \r\n    if( !this.mobile && !this.pxlAutoCam.enabled ){\r\n      this.hudIcons.multiverseIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_multiverse.svg`, \"multiverseIcon\", \"multiverse\" );\r\n      this.hudIcons.speakerIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_ProxAudio.svg`, \"speakerIcon\", \"speakerToggle\", false );\r\n      this.hudIcons.speakerChoiceIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_downcaret.svg`, \"speakerChoiceIcon\", \"speakerChoice\", false, \"iconCaretStyle\" );\r\n      this.hudIcons.micIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_mic.svg`, \"micIcon\", \"micToggle\", false );\r\n      this.hudIcons.micChoiceIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_downcaret.svg`, \"micChoiceIcon\", \"micChoice\", false, \"iconCaretStyle\" );\r\n      this.hudIcons.camIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_camera.svg`, \"camIcon\", \"camToggle\", false );\r\n      this.hudIcons.camChoiceIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_downcaret.svg`, \"camChoiceIcon\", \"camChoice\", false, \"iconCaretStyle\" );\r\n      this.hudIcons.helpIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_help.svg`, \"helpIcon\", \"help\" );\r\n      this.hudIcons.settingsIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_settings.svg`, \"settingsIcon\", \"settings\" );\r\n      \r\n      let guiVerseTitle=document.getElementById(\"guiVerseTitle\");\r\n      let tmpThis=this;\r\n    }else{\r\n      let chatBlock=document.getElementById(\"hud_chatIconBlock\");\r\n      chatBlock.style.gridAutoColumns= \"max-content max-content auto max-content\";\r\n      chatBlock.style.margin= \"0px 10px\";\r\n    }\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n\t\r\n  prepArtistInfo( artistInfo=null ){\r\n    if( !this.pxlEnv?.postIntro || artistInfo==\"\" ){\r\n      return;\r\n    }\r\n  if( !this.hudElements.artistInfo ){\r\n      this.hudElements.artistInfo={};\r\n    this.hudElements.artistInfo.active=false;\r\n      let artistInfoParent=document.createElement( \"div\" );\r\n      artistInfoParent.classList.add( \"hud_aristInfoParentStyle\" )\r\n      this.hudElements.artistInfo.parent=artistInfoParent;\r\n      \r\n      let artistInfoButton=document.createElement( \"div\" );\r\n      artistInfoButton.classList.add( \"hud_aristInfoButtonStyle\" )\r\n      artistInfoParent.appendChild( artistInfoButton );\r\n      let tmpThis=this;\r\n      artistInfoButton.onclick=()=>{tmpThis.toggleArtistInfo()};\r\n      this.hudElements.artistInfo.button=artistInfoButton;\r\n      \r\n      \r\n      let artistInfoButtonText=document.createElement( \"div\" );\r\n      artistInfoButtonText.classList.add( \"hud_aristInfoButtonTextStyle\" )\r\n      artistInfoButtonText.innerHTML=\"artwork info&nbsp;&nbsp;\";\r\n      artistInfoButton.appendChild( artistInfoButtonText );\r\n      this.hudElements.artistInfo.buttonText=artistInfoButtonText;\r\n      \r\n      let artistInfoButtonSvg=document.createElement( \"div\" );\r\n      artistInfoButtonSvg.classList.add( \"hud_aristInfoCarrotXStyle\" )\r\n      artistInfoButtonSvg.id=\"artistInfoCarrotX\";\r\n      artistInfoButton.appendChild( artistInfoButtonSvg );\r\n      \r\n      let artistInfoInner=document.createElement( \"div\" );\r\n      artistInfoInner.classList.add( \"hud_aristInfoInner\" )\r\n      artistInfoInner.innerHTML=artistInfo;\r\n      artistInfoParent.appendChild( artistInfoInner );\r\n      this.hudElements.artistInfo.inner=artistInfoInner;\r\n      \r\n      this.addToContainer(artistInfoParent);\r\n      \r\n      this.hudElements.artistInfo.closeSvg=SVGUtils.svgPromise( `${this.guiRoot}global/carrotClose_animated.svg`, \"artistInfoCarrotX\" );\r\n      this.hudElements.artistInfo.closeSvg.promise.finally(()=>{\r\n        this.artistInfoButtonPrep();\r\n      });\r\n  }\r\n    this.toggleArtistInfo(false);\r\n      \r\n    if( artistInfo!= null && this.hudVisibility && !this.pxlAutoCam.active){\r\n      this.hudElements.artistInfo.parent.style.zIndex=155;\r\n      this.hudElements.artistInfo.parent.style.display=\"grid\";\r\n      this.hudElements.artistInfo.inner.innerHTML=artistInfo;\r\n      setTimeout( ()=>{\r\n        this.setArtistInfoSizing();\r\n      },20);\r\n    }else{\r\n      this.hudElements.artistInfo.parent.style.zIndex=-5;\r\n      this.hudElements.artistInfo.parent.style.display=\"none\";\r\n    }\r\n  }\r\n  artistInfoButtonPrep( run=0 ){\r\n  let curSVG=this.hudElements.artistInfo.closeSvg.svg;\r\n  if(curSVG){ // If this doesn't pass, means loading the svg broke\r\n    \r\n    let toX=curSVG.getElementById(\"carrotToClone_on\");\r\n    let fromX=curSVG.getElementById(\"carrotToClone_off\");\r\n    if( toX && fromX ){\r\n  this.hudElements.artistInfo.onAnim=toX;\r\n  this.hudElements.artistInfo.offAnim=fromX;\r\n  \r\n    }else{\r\n  if(run==2){\r\n    // This should never run,\r\n    //   If it does, check the SVG file has propper IDs on the shapes\r\n    //console.log(\"Failed to prep Status SVG\");\r\n  }else{\r\n    setTimeout( ()=>{\r\n    this.artistInfoButtonPrep( run+=1 );\r\n    },100); // This should never hit, so if it does, die after a few runs.\r\n  }\r\n    }\r\n  }\r\n  }\r\n  \r\n  setArtistInfoSizing(){\r\n    if( this.hudElements.artistInfo ){\r\n      let iHeight=this.hudElements.artistInfo.inner.clientHeight;\r\n      let iWidth=this.hudElements.artistInfo.inner.clientWidth;\r\n      let bHeight=this.hudElements.artistInfo.button.clientHeight;\r\n      let bWidth=this.hudElements.artistInfo.button.clientWidth;\r\n      this.hudElements.artistInfo.innerHeight=iHeight;\r\n      this.hudElements.artistInfo.innerWidth=iWidth;\r\n      this.hudElements.artistInfo.baseHeight=bHeight;\r\n      this.hudElements.artistInfo.baseWidth=bWidth;\r\n      this.hudElements.artistInfo.parent.style.height= iHeight+\"px\";\r\n      this.hudElements.artistInfo.parent.style.width= iWidth+\"px\";\r\n      let tWidth=this.hudElements.artistInfo.buttonText.clientWidth;\r\n      this.hudElements.artistInfo.buttonText.maxWidth= tWidth;\r\n      this.hudElements.artistInfo.buttonText.style.maxWidth= tWidth+\"px\";\r\n      this.toggleArtistInfo(this.hudElements.artistInfo.active);\r\n    }\r\n  }\r\n  toggleArtistInfo( active=null ){\r\n    active= active==null ? !this.hudElements.artistInfo.active : active;\r\n    this.hudElements.artistInfo.active=active;\r\n    \r\n    let iHeight=this.hudElements.artistInfo.innerHeight;\r\n    let iWidth=Math.min( this.pxlDevice.sW*.3, this.hudElements.artistInfo.innerWidth);\r\n    let bHeight=this.hudElements.artistInfo.baseHeight;\r\n    let bWidth=this.hudElements.artistInfo.baseWidth;\r\n    this.hudElements.artistInfo.parent.style.maxHeight= active ? iHeight+\"px\" : bHeight+\"px\";\r\n    this.hudElements.artistInfo.parent.style.maxWidth= active ? iWidth+\"px\" : bWidth+\"px\";\r\n    this.hudElements.artistInfo.parent.style.padding= active ? \"5px\" : \"0px\";\r\n    \r\n    // this.hudElements.artistInfo.buttonText.innerText= active ? \"x\" : \"artwork info\";\r\n    let tWidth=this.hudElements.artistInfo.buttonText.maxWidth;\r\n    this.hudElements.artistInfo.buttonText.style.maxWidth= active ? \"0px\" : tWidth+\"px\";\r\n    this.hudElements.artistInfo.buttonText.style.opacity= active ? \"0\" : \"1\";\r\n    this.hudElements.artistInfo.buttonText.style.filter= \"alpha(opacity=\"+( active ? \"0\" : \"1000\" )+\")\";\r\n    \r\n    this.hudElements.artistInfo.inner.style.opacity= active ? \"1\" : \"0\";\r\n    this.hudElements.artistInfo.inner.style.filter= \"alpha(opacity=\"+( active ? \"100\" : \"0\" )+\")\";\r\n    \r\n    if( this.hudElements.artistInfo.onAnim ){\r\n      if( active ){\r\n        this.hudElements.artistInfo.onAnim.beginElement();\r\n      }else{\r\n        this.hudElements.artistInfo.offAnim.beginElement();\r\n      }\r\n    }\r\n  }\r\n  \r\n\t// -- -- -- --\r\n\t\r\n  prepPageDisplay( artistInfo=null ){\r\n    if( !this.pxlEnv?.postIntro || artistInfo==\"\" ){\r\n      return;\r\n    }\r\n\t\tif( !this.hudElements.artistInfo ){\r\n      this.hudElements.artistInfo={};\r\n\t\t\tthis.hudElements.artistInfo.active=false;\r\n      let artistInfoParent=document.createElement( \"div\" );\r\n      artistInfoParent.classList.add( \"hud_aristInfoParentStyle\" )\r\n      this.hudElements.artistInfo.parent=artistInfoParent;\r\n      \r\n      let artistInfoButton=document.createElement( \"div\" );\r\n      artistInfoButton.classList.add( \"hud_aristInfoButtonStyle\" )\r\n      artistInfoParent.appendChild( artistInfoButton );\r\n      let tmpThis=this;\r\n      artistInfoButton.onclick=()=>{tmpThis.togglePageDisplay()};\r\n      this.hudElements.artistInfo.button=artistInfoButton;\r\n      \r\n      \r\n      let artistInfoButtonText=document.createElement( \"div\" );\r\n      artistInfoButtonText.classList.add( \"hud_aristInfoButtonTextStyle\" )\r\n      artistInfoButtonText.innerHTML=\"artwork info&nbsp;&nbsp;\";\r\n      artistInfoButton.appendChild( artistInfoButtonText );\r\n      this.hudElements.artistInfo.buttonText=artistInfoButtonText;\r\n      \r\n      let artistInfoButtonSvg=document.createElement( \"div\" );\r\n      artistInfoButtonSvg.classList.add( \"hud_aristInfoCarrotXStyle\" )\r\n      artistInfoButtonSvg.id=\"artistInfoCarrotX\";\r\n      artistInfoButton.appendChild( artistInfoButtonSvg );\r\n      \r\n      let artistInfoInner=document.createElement( \"div\" );\r\n      artistInfoInner.classList.add( \"hud_aristInfoInner\" )\r\n      artistInfoInner.innerHTML=artistInfo;\r\n      artistInfoParent.appendChild( artistInfoInner );\r\n      this.hudElements.artistInfo.inner=artistInfoInner;\r\n      \r\n      this.addToContainer(artistInfoParent);\r\n      \r\n\t\t}\r\n    this.togglePageDisplay(false);\r\n      \r\n    if( artistInfo!= null && this.hudVisibility && !this.pxlAutoCam.active){\r\n      this.hudElements.artistInfo.parent.style.zIndex=155;\r\n      this.hudElements.artistInfo.parent.style.display=\"grid\";\r\n      this.hudElements.artistInfo.inner.innerHTML=artistInfo;\r\n      setTimeout( ()=>{\r\n        this.setArtistInfoSizing();\r\n      },20);\r\n    }else{\r\n      this.hudElements.artistInfo.parent.style.zIndex=-5;\r\n      this.hudElements.artistInfo.parent.style.display=\"none\";\r\n    }\r\n  }\r\n  \r\n  setPageToDisplay(){\r\n    if( this.hudElements.artistInfo ){\r\n      let iHeight=this.hudElements.artistInfo.inner.clientHeight;\r\n      let iWidth=this.hudElements.artistInfo.inner.clientWidth;\r\n      let bHeight=this.hudElements.artistInfo.button.clientHeight;\r\n      let bWidth=this.hudElements.artistInfo.button.clientWidth;\r\n      this.hudElements.artistInfo.innerHeight=iHeight;\r\n      this.hudElements.artistInfo.innerWidth=iWidth;\r\n      this.hudElements.artistInfo.baseHeight=bHeight;\r\n      this.hudElements.artistInfo.baseWidth=bWidth;\r\n      this.hudElements.artistInfo.parent.style.height= iHeight+\"px\";\r\n      this.hudElements.artistInfo.parent.style.width= iWidth+\"px\";\r\n      let tWidth=this.hudElements.artistInfo.buttonText.clientWidth;\r\n      this.hudElements.artistInfo.buttonText.maxWidth= tWidth;\r\n      this.hudElements.artistInfo.buttonText.style.maxWidth= tWidth+\"px\";\r\n      this.toggleArtistInfo(this.hudElements.artistInfo.active);\r\n    }\r\n  }\r\n  togglePageDisplay( active=null ){\r\n    if( this.hudElements.artistInfo ){\r\n\t\t\t// If no active boolean is passed, toggle the current state\r\n\t\t\tactive= active==null ? !this.hudElements.artistInfo.active : active;\r\n\t\t\tif( this.hudElements?.artistInfo ){\r\n\t\t\t\t this.hudElements.artistInfo.active=active;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet iHeight=this.hudElements.artistInfo.innerHeight;\r\n\t\t\tlet iWidth=Math.min( this.pxlDevice.sW*.3, this.hudElements.artistInfo.innerWidth);\r\n\t\t\tlet bHeight=this.hudElements.artistInfo.baseHeight;\r\n\t\t\tlet bWidth=this.hudElements.artistInfo.baseWidth;\r\n\t\t\tthis.hudElements.artistInfo.parent.style.maxHeight= active ? iHeight+\"px\" : bHeight+\"px\";\r\n\t\t\tthis.hudElements.artistInfo.parent.style.maxWidth= active ? iWidth+\"px\" : bWidth+\"px\";\r\n\t\t\tthis.hudElements.artistInfo.parent.style.padding= active ? \"5px\" : \"0px\";\r\n\t\t\t\r\n\t\t\t// this.hudElements.artistInfo.buttonText.innerText= active ? \"x\" : \"artwork info\";\r\n\t\t\tlet tWidth=this.hudElements.artistInfo.buttonText.maxWidth;\r\n\t\t\tthis.hudElements.artistInfo.buttonText.style.maxWidth= active ? \"0px\" : tWidth+\"px\";\r\n\t\t\tthis.hudElements.artistInfo.buttonText.style.opacity= active ? \"0\" : \"1\";\r\n\t\t\tthis.hudElements.artistInfo.buttonText.style.filter= \"alpha(opacity=\"+( active ? \"0\" : \"1000\" )+\")\";\r\n\t\t\t\r\n\t\t\tthis.hudElements.artistInfo.inner.style.opacity= active ? \"1\" : \"0\";\r\n\t\t\tthis.hudElements.artistInfo.inner.style.filter= \"alpha(opacity=\"+( active ? \"100\" : \"0\" )+\")\";\r\n\t\t\t\r\n\t\t\tif( this.hudElements.artistInfo.onAnim ){\r\n\t\t\t\tif( active ){\r\n\t\t\t\t\tthis.hudElements.artistInfo.onAnim.beginElement();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.hudElements.artistInfo.offAnim.beginElement();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n  \r\n\t\r\n\t// -- -- -- --\r\n\t\r\n  // TODO : Wow this is stupid....\r\n  iconEvent(func, obj, mode=null){\r\n    if(this.hudBlock.obj){\r\n      this.hudBlock.obj.style.display=\"none\";\r\n    }\r\n    if(func==\"click\"){\r\n      switch (mode) {\r\n        case \"chat\":\r\n          this.toggleChatBox();\r\n          break;\r\n        case \"musicToggle\":\r\n          this.pxlAudio.djPlayerMuteToggle();\r\n          this.toggleIcon(obj, !this.pxlAudio.djMuted, true);\r\n          break;\r\n        case \"userSpeakerToggle\":\r\n          this.setUserControls(obj);\r\n          break;\r\n        case \"speakerToggle\":\r\n          this.toggleIcon(obj, false, true);\r\n          break;\r\n        case \"speakerChoice\":\r\n          let curType = \"audiooutput\";\r\n          this.flipIcon(obj, this.guiWindows[curType] && this.guiWindows[curType].active);\r\n          break;\r\n        case \"help\":\r\n          let helpActive = this.guiWindows.helpGui ? this.guiWindows.helpGui.active : false;\r\n          this.checkOpenWindows(true);\r\n          this.helpGuiToggle(!helpActive);\r\n          break;\r\n        case \"info\":\r\n          let infoActive = this.guiWindows.infoGui ? this.guiWindows.infoGui.active : false;\r\n          this.checkOpenWindows(true);\r\n          this.infoGuiToggle(!infoActive);\r\n          break;\r\n        case \"settings\":\r\n          let settingsActive = this.guiWindows.settingsGui ? this.guiWindows.settingsGui.active : false;\r\n          this.checkOpenWindows(true);\r\n          this.settingsGuiToggle(!settingsActive);\r\n          break;\r\n        case \"userProfile\":\r\n          this.toggleUserProfile();\r\n          break;\r\n        //&=\r\n        case \"users\":\r\n          break;\r\n        //&\r\n        case \"stats\":\r\n        default:\r\n          // Handle unknown mode if necessary\r\n          break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  setMicVolumeLevel( volLevel ){\r\n    if( !this.hudIcons.micIcon.volumeMask ){\r\n      this.hudIcons.micIcon.volumeMask=document.getElementById(\"gui_micVolumeMask\");\r\n      this.hudIcons.micIcon.timer=this.pxlTimer.msRunner.x-1;\r\n    }\r\n    let yVal= 12-volLevel*11;\r\n    this.hudIcons.micIcon.volumeMask.setAttribute( \"y\", yVal );\r\n  }\r\n  \r\n  toggleIcon(obj, active, loadingCheck=false){ // Mute toggle\r\n    if( obj ){\r\n      obj.mute.style.filter= active ? \"alpha(opacity=0)\" : \"alpha(opacity=100)\";\r\n      obj.mute.style.opacity= active ? \"0\" : \"1\";\r\n      obj.mute.style.transform= active ? \"scale(0,0)\" : \"scale(1,1)\";\r\n      //obj.mute.style.display=active ? \"none\" : \"inline-block\";\r\n      \r\n      if( [\"camToggle\",\"speakerToggle\"].includes( obj.eventType ) ){//\"speaker\" ){\r\n        return; // No need to have a loader on the speaker toggle.\r\n      }\r\n      \r\n      let loadingTypeList= { \"speakerToggle\":\"speaker\", \"micToggle\":\"audio\", \"camToggle\":\"video\" };\r\n      let loadingType= loadingTypeList[ obj.eventType ];\r\n      if(loadingType && loadingCheck){\r\n        this.loadingDeviceChange( loadingType, active );\r\n      }\r\n  }\r\n  }\r\n  flipIcon(obj, active){ // Caret flip\r\n  obj.caret.style.transform=`rotate( ${(active ? \"180deg\" : \"0deg\")} )`;\r\n  }\r\n\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  \r\n  // -- -- -- -- -- -- -- -- -- //\r\n  \r\n  loadingDeviceChange( loadingType, loadingState=true ){\r\n  let curButton=null;\r\n  if( loadingType == \"speaker\"){ // Shouldn't run, but if I add this in the future.\r\n    curButton=this.hudIcons.speakerIcon;\r\n  }else if( loadingType == \"audio\"){\r\n    curButton=this.hudIcons.micIcon;\r\n  }else if( loadingType == \"video\"){\r\n    curButton=this.hudIcons.camIcon;\r\n  }\r\n  \r\n  curButton.indicator.style.display= loadingState ? \"inline-block\" : \"none\";\r\n  curButton.indicator.style.animationPlayState= loadingState ? \"running\" : \"paused\";\r\n  \r\n  curButton.waiting.forEach( (p)=>{\r\n    p.setAttribute(\"fill-opacity\", ( loadingState ? \".5\" : \"1\" ) );\r\n  });\r\n  \r\n  if(loadingState){\r\n    setTimeout( ()=>{\r\n  this.loadingDeviceChange(loadingType,false);\r\n    },1000);\r\n  }\r\n  }\r\n  \r\n  \r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n  \r\n  djBuildPlayer(){\r\n    if( this.buildGuiStatus.djPlayer ){\r\n      this.djPlayerObj=document.createElement(\"div\");\r\n      this.djPlayerObj.id=\"djPlayer\";\r\n      //this.djPlayerObj.classList.add( \"fader\" );\r\n      //this.djPlayerObj.classList.add( \"visOff\" );\r\n      \r\n      let djPlayerHtml=`\r\n          <audio id=\"djStream\" playsinline muted>\r\n            <source src=\"`+this.pxlAudio.djUrlSource+`\"></source>\r\n          </audio>\r\n          <table cellpadding=0 cellspacing=5 border=0 style=\"height:100%;\"><tbody><tr>\r\n              <td align=\"left\">\r\n                  <div id=\"djPlayerVol\"></div>\r\n              </td><td valign=\"center\" align=\"left\" width=100%>\r\n                  <div id=\"djPlayerVolumeParent\" class=\"volParent\"><div id=\"djPlayerVolume\" class=\"volSlider\"></div></div>\r\n              </td></tr>\r\n          </tbody></table>`;\r\n      this.djPlayerObj.innerHTML=djPlayerHtml;\r\n\r\n      let playerParent=document.getElementById( \"musicControllerBlock\" );\r\n      playerParent.appendChild( this.djPlayerObj );\r\n\r\n      this.hudIcons.musicIcon = SVGUtils.svgIconPromise( `${this.guiRoot}icons/icon_music.svg`, \"djPlayerVol\", \"musicToggle\", !this.pxlAudio.djMuted );\r\n      \r\n      this.pxlAudio.djBuildPlayer();\r\n    }\r\n  }\r\n  \r\n\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  \r\n  buildItemHud(objName, text){\r\n    this.activeItem.innerHTML=text;\r\n    this.activeItem.style.opacity=\"1\";\r\n    this.activeItem.style.filter=\"alpha(opacity=100)\";\r\n    this.activeItem.style.textShadow=\"1px 1px 3px #000000\";\r\n    setTimeout(()=>{    \r\n      this.activeItem.style.fontSize=\"1.5em\";\r\n      this.activeItem.style.top=\".5%\";\r\n      this.activeItem.style.right=\"140px\";\r\n      this.activeItem.style.transform=\"translateX(0%)\";\r\n    },1500);\r\n  }\r\n  hideItemHud(){\r\n    this.activeItem.innerHTML=\"\";\r\n    this.activeItem.style.fontSize=\"3em\";\r\n    this.activeItem.style.top=\"10%\";\r\n    this.activeItem.style.right=\"50%\";\r\n    this.activeItem.style.transform=\"translateX(50%)\";\r\n    this.activeItem.style.opacity=\"0\";\r\n    this.activeItem.style.filter=\"alpha(opacity=0)\";\r\n  }\r\n  \r\n\r\n  mapPrepPrompts(){\r\n    this.activeItem=document.createElement(\"div\");\r\n    this.activeItem.classList.add(\"activeItemStyle\");\r\n    this.addToContainer(this.activeItem);\r\n  }\r\n  \r\n  updateGuiPositions(){\r\n    if(this.loading){\r\n      let cLen=this.radioControls.length;\r\n      let stillLoading=false;\r\n      for(let x=0; x<cLen; ++x){\r\n    if(!this.radioControls[x][3]){\r\n      stillLoading=true;\r\n      break;\r\n    }\r\n    let child=this.radioControls[x][0];\r\n    let parent=this.radioControls[x][2];\r\n    let pBB=parent.getBoundingClientRect();\r\n    let cW=pBB.width+this.buttonPadding*2;\r\n    let cH=pBB.height+this.buttonPadding*2;\r\n    let cT=pBB.top-this.buttonPadding;\r\n    let cL=pBB.left-this.buttonPadding;\r\n    child.style.width=cW;\r\n    child.style.height=cH;\r\n    child.style.top=cT;\r\n    child.style.left=cL;\r\n    \r\n    this.radioControls[x][1].style.width=cW;\r\n    this.radioControls[x][1].style.height=cH;\r\n    this.radioControls[x][1].style.top=cT;\r\n    this.radioControls[x][1].style.left=cL;\r\n      }\r\n      this.loading=stillLoading;\r\n    }\r\n  }\r\n\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  \r\n  togglGuiWindow( guiName=null, vis=false ){\r\n    if(guiName==\"helpGui\"){\r\n      this.helpGuiToggle( vis, false );\r\n    }else if(guiName==\"infoGui\"){\r\n      this.infoGuiToggle( vis, false );\r\n    }else if(guiName==\"settingsGui\"){\r\n      this.settingsGuiToggle( vis, false );\r\n    }\r\n  }\r\n\r\n  svgCheckClick(e=null, action=null){\r\n    if(!action){ return; }\r\n    \r\n    if( action== \"close\" ){\r\n      this.toggleGuiWindowContainer(null, false, true );\r\n      return;\r\n    \r\n    }else if(action==\"ft1\"){\r\n      return;\r\n    }else if(action==\"ft2\"){\r\n      return;\r\n    }else if(action==\"ft3\"){\r\n        this.toggleInviteUser();\r\n      return;\r\n    }else if(action==\"ft4\"){\r\n      return;\r\n    }else if(action==\"ft5\"){\r\n      this.pxlAutoCam.toggleAutoCam();\r\n      return;\r\n    }\r\n  }\r\n  svgStylize(e=null, active=false){\r\n    if( !e ){ return; }\r\n    let target= e.path ? e.path[1] : e.target.parentNode;\r\n\r\n    let stateObj=target.getElementById(\"state\");//getElementsByTagName(\"id\");\r\n      if(stateObj){\r\n        let color= active ? \"white\" : \"none\" ;\r\n        stateObj.setAttribute(\"fill\", color );\r\n      }\r\n    \r\n    let hoverObj=target.getElementById(\"hover\");//getElementsByTagName(\"id\");\r\n    if(hoverObj){\r\n      let color= \"white\";\r\n      hoverObj.setAttribute(\"fill\", color );\r\n    }\r\n  }\r\n  \r\n  renderQualitySettings(val){\r\n  this.pxlQuality.percent=val;\r\n  this.pxlQuality.screenResPerc=val*.75+.25;\r\n  this.pxlQuality.mapAutoQualityUpdate(val, true);\r\n  this.pxlDevice.resizeRenderResolution();\r\n  }\r\n\r\n\r\n  pxlNavDataUpdate(){\r\n    if( this.pxlNavData.active && this.pxlNavData?.fps ){\r\n      if( this.pxlTimer.msRunner.x > this.pxlNavData.fpsSet ){\r\n        this.pxlNavData.fpsSet=this.pxlTimer.msRunner.x+1;\r\n        this.pxlNavData.fps.innerText=parseInt(1  / this.pxlTimer.msRunner.y);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n\r\n  buildGuiWindowContainer(){\r\n    let bgDiv=document.createElement(\"div\");\r\n    bgDiv.classList.id=\"guiWindowBackground\";\r\n    bgDiv.classList.add(\"guiWindowBackground\");\r\n    bgDiv.classList.add(\"fader\");\r\n    bgDiv.classList.add(\"visOff\");\r\n    bgDiv.style.display=\"none\";\r\n    \r\n    let tmpThis=this;\r\n    bgDiv.onclick=(e)=>{\r\n      tmpThis.toggleGuiWindowContainer(e, false, true );\r\n    }\r\n    this.guiWindowBG=bgDiv;\r\n    //this.addToContainer( bgDiv );\r\n    document.body.appendChild( bgDiv );\r\n  }\r\n\r\n  toggleGuiWindowContainer(e, active, closeWindows=false ){\r\n    if(e){\r\n      let target= e.path ? e.path[0] : e.target;\r\n      let targetId=target.getAttribute(\"id\");\r\n      if(targetId!=\"guiWindowBackground\"){\r\n        // ## Bad way to do this....\r\n        let exitObjList=[\"pxlNav-container\", \"gui_helpGuiWindow\", \"gui_helpContent\", \"gui_infoGuiWindow\", \"gui_infoContent\", \"gui_settingsGuiWindow\", \"gui_settingsContent\"];\r\n        if( !exitObjList.includes( targetId ) ){\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    let openStatus=this.checkOpenWindows( closeWindows );\r\n\r\n    if(this.guiWindowBG && openStatus==active ){\r\n      this.promptFader(this.guiWindowBG, active,null,false); \r\n    }\r\n\r\n    if(active){\r\n      this.pxlNavCanvas.blur();\r\n    }else{\r\n      this.pxlNavCanvas.focus();\r\n    }\r\n  }\r\n\r\n  helpGuiBuild(){\r\n    this.guiWindows.helpGui={};\r\n    this.guiWindows.helpGui.gui=null;\r\n    this.guiWindows.helpGui.active=false;\r\n    \r\n    let helpGuiDiv=document.createElement( \"div\" );\r\n    helpGuiDiv.id=\"gui_helpGuiWindow\";\r\n    helpGuiDiv.classList.add(\"gui_helpGuiParentStyle\");\r\n    this.prepPromptFader( helpGuiDiv );\r\n    this.guiWindowBG.appendChild( helpGuiDiv );\r\n\r\n    // Build welcome message\r\n    let messageText = \"\";\r\n    let messageHTML = \"\";\r\n    if( this.pxlOptions.onboarding.pc?.message != \"\" ){\r\n      messageText = this.pxlOptions.onboarding.pc.message;\r\n      messageText = this.formatWelcomeMessage( messageText );\r\n\r\n      let messageStyles = \"\";\r\n      if( this.pxlOptions.onboarding.pc.messageStyle.length > 0 ){\r\n        messageStyles = this.pxlOptions.onboarding.pc.messageStyle.join(\" \");\r\n      }\r\n      messageHTML = `<div class=\"${messageStyles}\" id=\"guiWelcomeMessage\">${messageText}</div>`;\r\n    }\r\n    \r\n    // Build close button text and styles\r\n    let buttonText = \"close\";\r\n    let buttonStyles = \"guiButton\";\r\n    if( this.pxlOptions.onboarding.pc?.buttonText != \"\" ){\r\n      buttonText = this.pxlOptions.onboarding.pc.buttonText;\r\n    }\r\n    if( this.pxlOptions.onboarding.pc?.buttonStyle.length > 0 ){\r\n      buttonStyles = this.pxlOptions.onboarding.pc.buttonStyle.join(\" \");\r\n    }\r\n    \r\n    // Build the help window\r\n    let html = \"\";\r\n    html+=`\r\n      <div id=\"gui_helpContent\" class=\"gui_contentStyle\">\r\n      ${messageHTML}\r\n    <div class=\"gui_body\">\r\n      <div id=\"gui_helpGui_keyboardParent\" class=\"gui_helpGui_keyboardParent\">\r\n      <div id=\"gui_helpGui_controlsKeyboard\" class=\"guiPadding settings_sectionHeader\">keyboard controls</div>\r\n      <div class=\"gui_helpGui_ASDWorUDLR\">\r\n        <div id=\"gui_helpGui_asdw\" class=\"gui_helpGui_asdw\"></div>\r\n        <div id=\"gui_helpGui_or\" class=\"gui_helpGui_text\">or</div>\r\n        <div id=\"gui_helpGui_udlr\" class=\"gui_helpGui_udlr\"></div>\r\n      </div>\r\n      <div id=\"gui_helpGui_useKeys\" class=\"gui_helpGui_text\" style=\"display:inline-block;\">Use your keyboard <span class=\"gui_boldText\">WASD</span> or<br><span class=\"gui_boldText\">ARROWS</span> keys to move around</div>\r\n      </div>\r\n      <div id=\"gui_helpGui_mouse\" class=\"gui_helpGui_mouse\">\r\n      <div id=\"gui_helpGui_MouseControls\" class=\"guiPadding settings_sectionHeader\">mouse controls</div>\r\n      <div id=\"gui_helpGui_MouseOutlined\" class=\"gui_helpGui_mouseOutline\"></div>\r\n      <div id=\"gui_helpGui_useMouse\" class=\"guiPadding gui_helpGui_text\" style=\"display:inline-block;\">To orient your view:<br><span class=\"gui_boldText\">LEFT CLICK</span> and drag your mouse<br><span class=\"gui_boldText\">RIGHT CLICK</span> to lock your mouse</div>\r\n      </div>\r\n    </div>\r\n    <div id=\"gui_helpGui_hotKeys\" class=\"gui_helpGui_hotKeys\">\r\n            You can change <span class=\"gui_boldText\">Navigation</span> and <span class=\"gui_boldText\">Look controls</span> in the <span class=\"gui_boldText\">Settings (G)</span> <span id=\"gui_helpGui_settingIcon\"></span> menu\r\n            <br> To show this screen again, open the <span class=\"gui_boldText\">Help (H)</span> screen\r\n            <br> For additional info, see the <span class=\"gui_boldText\">Info (I)</span> screen\r\n          </div>\r\n    <div id=\"guiHelpFooter\" class=\"gui_footer\">\r\n      <div class=\"${buttonStyles}\" id=\"guiHelpBackButton\">${buttonText}</div>\r\n    </div>\r\n    <div class=\"gui_spacer\"></div>\r\n      </div>\r\n    `;\r\n    helpGuiDiv.innerHTML=html;\r\n      \r\n    // SVG images to load into which divs\r\n    let svgDivList=[\r\n      [this.guiRoot+\"keyboard_asdw.svg\", \"gui_helpGui_asdw\",\"guiKeyDispSVG\",false],\r\n      [this.guiRoot+\"keyboard_udlr.svg\", \"gui_helpGui_udlr\",\"guiKeyDispSVG\",false],\r\n      [this.guiRoot+\"mouse_outline.svg\", \"gui_helpGui_MouseOutlined\",\"guiMouseDispSVG\",false],\r\n    ];\r\n    svgDivList.forEach( (s)=>{\r\n      SVGUtils.svgButtonPromise( ...s );\r\n    });\r\n    \r\n    // -- -- --\r\n    \r\n    // Close Button\r\n    let tmpThis=this;\r\n    let guiClose=document.getElementById(\"guiHelpBackButton\");\r\n    if(guiClose){\r\n      guiClose.onclick=(e)=>{ \r\n          if(tmpThis.introHelpActive){\r\n            tmpThis.introHelpActive=false;\r\n            tmpThis.pxlEnv.postHelpIntro();\r\n          }\r\n          tmpThis.svgCheckClick(e, \"close\");\r\n        };\r\n    }\r\n    \r\n    // Remove linking from hud icons only\r\n    //let hudIconKeys=Object.keys( this.hudIcons );\r\n    let hudIconKeys=Object.keys( this.textDescriptions );\r\n    //hudIconKeys.push( \"djPlayerVolumeParent\" );\r\n    /*hudIconKeys.forEach( (i)=>{\r\n      let textDesc = this.textDescriptions[ i ];\r\n      if(textDesc){\r\n        let text = textDesc.text;\r\n        let pos = textDesc.pos;\r\n        let helpObj = document.createElement( \"div\" );\r\n        helpObj.id = \"helpText_\"+i;\r\n        helpObj.classList.add( \"helpTextDescriptionParent\" );\r\n        helpObj.innerHTML = text;\r\n        helpGuiDiv.appendChild( helpObj );\r\n        this.textDescriptions[ i ].obj = helpObj;\r\n      }\r\n    });*/\r\n  \r\n      \r\n    let settingsIcon=document.getElementById(\"gui_helpGui_settingIcon\");\r\n    if(settingsIcon && this.hudIcons.settingsIcon){\r\n      settingsIcon.innerHTML=this.hudIcons.settingsIcon.svg.parentNode.innerHTML;\r\n      settingsIcon.style.position=\"relative\";\r\n      settingsIcon.style.top=\"7.3px\";\r\n      settingsIcon.style.width=\"30px\";\r\n      settingsIcon.style.padding=\"2px\";\r\n      settingsIcon.style.cursor=\"pointer\";\r\n      settingsIcon.children[0].style.height=\"26px\";\r\n      settingsIcon.onclick=()=>{\r\n        tmpThis.iconEvent(\"click\", null, \"settings\");\r\n      };\r\n    }\r\n      \r\n    // -- -- -- -- -- -- -- -- -- -- //\r\n    // Store gui window as object\r\n    this.guiWindows.helpGui.gui=helpGuiDiv;\r\n    \r\n    // Let the browser update sizing and any potential display:block limitations\r\n    setTimeout( ()=>{\r\n      this.resize();\r\n    }, 50);\r\n  }\r\n  helpGuiToggle( active=null, bgVis=true ){\r\n    if( !this.guiWindows.helpGui ){\r\n      this.helpGuiBuild();\r\n    }\r\n  \r\n\r\n  active= active==null ? !this.guiWindows.helpGui.active : active;\r\n  this.guiWindows.helpGui.active=active;\r\n  this.promptFader( this.guiWindows.helpGui.gui, active );\r\n\r\n  this.toggleGuiWindowContainer( null, active );\r\n  if(this.hudBlock.active){ this.toggleHudBlock( active ); }\r\n  \r\n    //this.promptFader( this.guiWindows.container, active );\r\n    this.promptFader( this.guiWindows.container, true );\r\n\r\n    if(this.introHelpActive && !active){\r\n      this.introHelpActive=false;\r\n      this.pxlEnv.postHelpIntro();\r\n    }\r\n    \r\n  // Make sure help text is placed correctly; Happens when resizing the window without the help gui open\r\n  setTimeout( ()=>{\r\n    this.resetHelpTextPlacement();\r\n  },20);\r\n  }\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  infoGuiBuild(){\r\n  this.guiWindows.infoGui={};\r\n  this.guiWindows.infoGui.gui=null;\r\n  this.guiWindows.infoGui.active=false;\r\n  \r\n  let infoGuiDiv=document.createElement( \"div\" );\r\n  infoGuiDiv.id=\"gui_infoGuiWindow\";\r\n  infoGuiDiv.classList.add(\"gui_infoGuiParentStyle\");\r\n  this.prepPromptFader( infoGuiDiv );\r\n  this.guiWindowBG.appendChild( infoGuiDiv );\r\n  \r\n  let html=\"\";\r\n  html+=`\r\n    <div id=\"gui_infoContent\" class=\"gui_contentInfoStyle\">\r\n  <div class=\"gui_infoBody\">\r\n    <div id=\"gui_infoGuiParent\" class=\"gui_infoGuiParent\">\r\n    <br>${this.projectTitle}\r\n    <br>&nbsp;&nbsp; Created by <a href=\"https://github.com/ProcStack\" target=\"_blank\">Kevin Edzenga / ProcStack</a> 2024; 2025\r\n    <br>\r\n    <br>If any bugs are found in pxlNav, you can share them on the GitHub issues page:\r\n    <br>&nbsp;&nbsp; <a href=\"https://github.com/ProcStack/pxlNav/issues\" target=\"_blank\">pxlNav / issues</a>\r\n    <br>\r\n    </div>\r\n  </div>\r\n  \r\n  <div id=\"guiInfoFooter\" class=\"gui_footer\">\r\n    <div class=\"guiButton\" id=\"guiInfoBackButton\">close</div>\r\n  </div>\r\n    </div>\r\n  `;\r\n  infoGuiDiv.innerHTML=html;\r\n        \r\n  // Close Button\r\n  let tmpThis=this;\r\n  let guiClose=document.getElementById(\"guiInfoBackButton\");\r\n  guiClose.onclick=(e)=>{ tmpThis.svgCheckClick(e, \"close\"); };\r\n    \r\n  \r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  this.guiWindows.infoGui.gui=infoGuiDiv;  \r\n  }\r\n  \r\n  infoGuiToggle(active=null, bgVis=true){\r\n  if( !this.guiWindows.infoGui ){\r\n    this.infoGuiBuild();\r\n  }\r\n\r\n  active= active==null ? !this.guiWindows.infoGui.active : active;\r\n  this.guiWindows.infoGui.active=active;\r\n  this.promptFader( this.guiWindows.infoGui.gui, active );\r\n  this.toggleGuiWindowContainer( null, active );\r\n  if(this.hudBlock.active){ this.toggleHudBlock( active ); }\r\n    \r\n    if(this.introHelpActive && !active){\r\n      this.introHelpActive=false;\r\n      this.pxlEnv.postHelpIntro();\r\n    }\r\n  }\r\n  \r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  applyCookies(){\r\n  if(this.controlSettings){\r\n    //console.log(this.controlSettings);\r\n    this.controlSettings=(this.controlSettings);\r\n  }\r\n  if(this.renderSettings){\r\n    //console.log(this.renderSettings);\r\n    this.renderSettings=(this.renderSettings);\r\n  }\r\n  }\r\n  \r\n  settingsGuiBuild(){\r\n  this.guiWindows.settingsGui={};\r\n  this.guiWindows.settingsGui.gui=null;\r\n  this.guiWindows.settingsGui.active=false;\r\n  \r\n  let settingsGuiDiv=document.createElement( \"div\" );\r\n  settingsGuiDiv.id=\"gui_settingsGuiWindow\";\r\n  settingsGuiDiv.classList.add(\"gui_settingsGuiParentStyle\");\r\n  this.prepPromptFader( settingsGuiDiv );\r\n  this.guiWindowBG.appendChild( settingsGuiDiv );\r\n  let curName=\"Default\";\r\n    curName=!curName ? \"\" : curName;\r\n  let html=`\r\n    <div id=\"gui_settingsContent\" class=\"gui_contentSettingsStyle\">\r\n  <div class=\"gui_settingsBody\">\r\n    <div class=\"gui_settingsParentGrid\">\r\n    `;\r\n    if( this.settingsFields.changeUsername ){\r\n      html+=`\r\n        <!-- -- Username -- -- -->\r\n        <div class=\"cellMargin settings_icon\" id=\"settings_user\"></div>\r\n        <div class=\"settings_optionHeader\">Username</div>\r\n        <div class=\"settings_radio\" style=\"grid-auto-flow: row; justify-content: start;\">\r\n            <div id=\"guiuserProfileBoxFieldParent\" class=\"gui_userProfileBoxFieldParentStyle\">\r\n              <input type=\"text\" placeholder=\"Set your username\" value=\"${curName}\" id=\"settings_usernameInput\" class=\"settings_usernameInput\"></input>\r\n              <input type=\"button\" value=\"Set\" id=\"settings_sendUsername\" class=\"sendUsername\">\r\n            </div>\r\n            <div id=\"settings_usernameResponseMessage\" class=\"usernameResponseMessageStyle\"></div>\r\n        </div>\r\n      <!-- -- -- -- -- -- -->\r\n      <div class=\"settingsGridSpan settingsSpacer\"></div>\r\n      <!-- -- -- -- -- -- -->\r\n      `;\r\n    }\r\n    html+=`\r\n      <!-- -- Left/Right -- -- -->\r\n    <div class=\"cellMargin settings_icon\" id=\"settings_left_right\"></div>\r\n    <div class=\"settings_optionHeader\">Left/Right</div>\r\n    <div class=\"settings_radio\" id=\"settingsRadioBlock_leftRight\">\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_tankTurning\" name=\"settings_leftRight\" value=\"0\" hidden>\r\n      <label for=\"settings_tankTurning\">Turn</label>\r\n      </span>\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_strafing\" name=\"settings_leftRight\" value=\"1\" hidden>\r\n      <label for=\"settings_strafing\">Strafe</label>\r\n      </span>\r\n    </div>\r\n      <!-- -- Mouse -- -- -->\r\n    <div class=\"cellMargin settings_icon\" id=\"settings_mouse\"></div>\r\n    <div class=\"settings_optionHeader\">Mouse Looking</div>\r\n    <div class=\"settings_radio\" id=\"settingsRadioBlock_mouse\">\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_dragLooking\" name=\"settings_mouse\" value=\"0\" hidden>\r\n      <label for=\"settings_dragLooking\">Native</label>\r\n      </span>\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_pointLooking\" name=\"settings_mouse\" value=\"1\" hidden>\r\n      <label for=\"settings_pointLooking\">Inverted</label>\r\n      </span>\r\n    </div>\r\n      <!-- -- -- -- -- -- -->\r\n    <div class=\"settingsGridSpan settingsSpacer\"></div>\r\n      <!-- -- Graphics Quality -- -- -->\r\n    <div class=\"cellMargin settings_icon\" id=\"settings_graphics\"></div>\r\n    <div class=\"settings_optionHeader\">Graphics Quality</div>\r\n    <div class=\"settings_radio\" id=\"settingsRadioBlock_graphics\">\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_graphicsQuality_low\" name=\"settings_autoQuality\" value=\"0\" hidden>\r\n      <label for=\"settings_graphicsQuality_low\">Low</label>\r\n      </span>\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_graphicsQuality_med\" name=\"settings_autoQuality\" value=\"1\" hidden>\r\n      <label for=\"settings_graphicsQuality_med\">Medium</label>\r\n      </span>\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_graphicsQuality_high\" name=\"settings_autoQuality\" value=\"2\" hidden>\r\n      <label for=\"settings_graphicsQuality_high\">High</label>\r\n      </span>\r\n      <span>\r\n      <input type=\"radio\" id=\"settings_graphicsQuality_custom\" name=\"settings_autoQuality\" value=\"3\" hidden>\r\n      <label for=\"settings_graphicsQuality_custom\">Custom</label>\r\n      </span>\r\n    </div>\r\n      <!-- -- -- -- -->\r\n      <div class=\"r7Adv gui_settingsAdvancedParentGrid\" id=\"gui_advancedSettings\">\r\n    <!-- -- -- -- -->\r\n      <div class=\"cellMargin settings_icon\" id=\"settings_render\"></div>\r\n      <div class=\"settings_optionHeader\">Render Resolution</div>\r\n      <div class=\"settings_radio\" id=\"settingsRadioBlock_resolution\">\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_render_25\" name=\"settings_renderPerc\" value=\".25\" hidden>\r\n        <label for=\"settings_render_25\">25%</label>\r\n      </span>\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_render_50\" name=\"settings_renderPerc\" value=\".5\" hidden>\r\n        <label for=\"settings_render_50\">50%</label>\r\n      </span>\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_render_75\" name=\"settings_renderPerc\" value=\".75\" hidden>\r\n        <label for=\"settings_render_75\">75%</label>\r\n      </span>\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_render_100\" name=\"settings_renderPerc\" value=\"1\" hidden>\r\n        <label for=\"settings_render_100\">100%</label>\r\n      </span>\r\n      </div>\r\n    <!-- -- -- -- -->\r\n      <div class=\"cellMargin settings_icon\" id=\"settings_fog\"></div>\r\n      <div class=\"settings_optionHeader\">Fog Quality</div>\r\n      <div class=\"settings_radio\" id=\"settingsRadioBlock_fog\">\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_noRedFog\" name=\"settings_fogLevel\" value=\"0\" hidden>\r\n        <label for=\"settings_noRedFog\">Low</label>\r\n      </span>\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_cheapResFog\" name=\"settings_fogLevel\" value=\"1\" hidden>\r\n        <label for=\"settings_cheapResFog\">Medium</label>\r\n      </span>\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_highResFog\" name=\"settings_fogLevel\" value=\"2\" hidden>\r\n        <label for=\"settings_highResFog\">High</label>\r\n      </span>\r\n      </div>\r\n    <!-- -- -- -- -->\r\n      <div class=\"cellMargin settings_icon\" id=\"settings_bloom\"></div>\r\n      <div class=\"settings_optionHeader\">Bloom Effects</div>\r\n      <div class=\"settings_radio\" id=\"settingsRadioBlock_bloom\">\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_noBloom\" name=\"settings_bloomEffects\" value=\"0\" hidden>\r\n        <label for=\"settings_noBloom\">Off</label>\r\n      </span>\r\n      <span>\r\n        <input type=\"radio\" id=\"settings_bloomActive\" name=\"settings_bloomEffects\" value=\"1\" hidden>\r\n        <label for=\"settings_bloomActive\">On</label>\r\n      </span>\r\n      </div>\r\n    <!-- -- -- -- -->\r\n      </div>\r\n    </div>\r\n      <div class=\"settingsGridSpan settingsEmptySpacer\"></div>\r\n    </div>\r\n    <div class=\"guiSettingsFooterButtons\">\r\n    <div class=\"guiButton\" id=\"guiSettingsBackButton\">close</div>\r\n    </div>\r\n  </div>\r\n    </div>\r\n  `;\r\n  \r\n  settingsGuiDiv.innerHTML=html;\r\n  this.guiWindows.settingsGui.gui=settingsGuiDiv;  \r\n  \r\n  let tmpThis=this;\r\n  this.qualitySlider=document.getElementById( \"SettingsGraphicsQualitySlider\" );\r\n  \r\n  // Close Button\r\n  // ## Add \"Save cookies\" to closing the window\r\n  let guiClose=document.getElementById(\"guiSettingsBackButton\");\r\n  guiClose.onclick=(e)=>{ tmpThis.svgCheckClick(e, \"close\"); };\r\n  \r\n  // -- -- -- -- -- -- -- -- -- -- -- -- //\r\n  // --  Advanced Quality Controls -- -- //\r\n  // -- -- -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  \r\n  let svgDivList=[\r\n    [this.guiRoot+\"settings_user.svg\", \"settings_user\",[\"settings_icon_scale\"],false],\r\n    \r\n    [this.guiRoot+\"settings_left_right.svg\", \"settings_left_right\",[\"settings_icon\"],false],\r\n    [this.guiRoot+\"settings_mouse.svg\", \"settings_mouse\",[\"settings_icon\"],false],\r\n    \r\n    [this.guiRoot+\"settings_graphics.svg\", \"settings_graphics\",[\"settings_icon\"],false],\r\n    [this.guiRoot+\"settings_render.svg\", \"settings_render\",[\"settings_icon\"],false],\r\n    [this.guiRoot+\"settings_fog.svg\", \"settings_fog\",[\"settings_icon\"],false],\r\n    [this.guiRoot+\"settings_bloom.svg\", \"settings_bloom\",[\"settingsIconStyle\"],false],\r\n  ];\r\n  svgDivList.forEach( (s)=>{\r\n    SVGUtils.svgButtonPromise( ...s );\r\n  });\r\n\r\n  // -- -- -- -- -- -- -- //\r\n    \r\n  \r\n  let msgInput=document.getElementById( \"settings_usernameInput\" );\r\n  if( msgInput ){\r\n    msgInput.onkeyup=(e)=>{ tmpThis.keyUsernameSet(e); };\r\n    msgInput.onkeydown=(e)=>{ tmpThis.keyDownUsernameSet(e); };\r\n    this.guiWindows.settingsGui.usernameInput=msgInput;\r\n\r\n    let button=document.getElementById( \"settings_sendUsername\" );\r\n    button.addEventListener(\"click\", ()=>{\r\n      tmpThis.sendUsernameUpdate( msgInput );\r\n    });\r\n\r\n    // If the `changeUsername` field is enabled, set the username input to the current username\r\n    let retMessage=document.getElementById( \"settings_usernameResponseMessage\" );\r\n    if( retMessage ){\r\n      this.guiWindows.settingsGui.usernameReturn=retMessage;\r\n    }\r\n  }\r\n    \r\n  \r\n  // -- -- -- -- -- -- -- //\r\n  \r\n  let radioList,rLength;\r\n  \r\n  this.guiWindows.settingsGui.advObj=document.getElementById(\"gui_advancedSettings\");\r\n  this.guiWindows.settingsGui.customObj=document.getElementById(\"settings_graphicsQuality_custom\");\r\n  \r\n  radioList=[\"settings_graphicsQuality_low\", \"settings_graphicsQuality_med\", \"settings_graphicsQuality_high\", \"settings_graphicsQuality_custom\"];\r\n  rLength=radioList.length;\r\n  for(let x=0; x<rLength; ++x){\r\n    let r=radioList[x];\r\n    let rad=document.getElementById( r );\r\n    this.setRadioStyle(rad, x, rLength);\r\n    \r\n    let val=parseInt( rad.value );\r\n    rad.addEventListener('change', (e)=>{\r\n  tmpThis.pxlQuality.setQualityLevel(val);\r\n  tmpThis.setRadioValues();\r\n    });\r\n    /*if( val != 3){\r\n  rad.addEventListener('change', (e)=>{\r\n    tmpThis.guiWindows.settingsGui.advObj.style.maxHeight=\"0px\";\r\n    tmpThis.pxlQuality.setQualityLevel(val);\r\n    tmpThis.setRadioValues();\r\n  });\r\n    }else{\r\n  rad.addEventListener('change', (e)=>{\r\n    let advObj=tmpThis.guiWindows.settingsGui.advObj;\r\n    let oHeight=advObj.getAttribute( \"maxHeight\" );\r\n    advObj.style.maxHeight = oHeight+\"px\";\r\n  });\r\n    }*/\r\n  }\r\n  radioList=[\"settings_render_25\", \"settings_render_50\", \"settings_render_75\", \"settings_render_100\"];\r\n  rLength=radioList.length;\r\n  for(let x=0; x<rLength; ++x){\r\n    let r=radioList[x];\r\n    let rad=document.getElementById( r );\r\n    this.setRadioStyle(rad, x, rLength);\r\n    \r\n    let val=parseFloat( rad.value );\r\n    rad.addEventListener('change', (e)=>{\r\n  tmpThis.guiWindows.settingsGui.customObj.checked=true;\r\n  tmpThis.pxlQuality.setGraphicsSettings( {resolution:val} );\r\n  tmpThis.pxlQuality.setQualityCookie(3);\r\n    });\r\n  }\r\n  \r\n  \r\n  radioList=[\"settings_noRedFog\", \"settings_cheapResFog\", \"settings_highResFog\"];\r\n  rLength=radioList.length;\r\n  for(let x=0; x<rLength; ++x){\r\n    let r=radioList[x];\r\n    let rad=document.getElementById( r );\r\n    this.setRadioStyle(rad, x, rLength);\r\n    \r\n    let val=rad.value;\r\n    rad.addEventListener('change', (e)=>{\r\n  tmpThis.guiWindows.settingsGui.customObj.checked=true;\r\n  tmpThis.pxlQuality.setGraphicsSettings( {fog:val} );\r\n  tmpThis.pxlQuality.setQualityCookie(3);\r\n    });\r\n  }\r\n  \r\n  radioList=[\"settings_noBloom\",\"settings_bloomActive\"];\r\n  rLength=radioList.length;\r\n  for(let x=0; x<rLength; ++x){\r\n    let r=radioList[x];\r\n    let rad=document.getElementById( r );\r\n    this.setRadioStyle(rad, x, rLength);\r\n    \r\n    let val= rad.value==1;\r\n    rad.addEventListener('change', (e)=>{\r\n  tmpThis.guiWindows.settingsGui.customObj.checked=true;\r\n  tmpThis.pxlQuality.setGraphicsSettings( {bloom:val} );\r\n  tmpThis.pxlQuality.setQualityCookie(3);\r\n    });\r\n  }\r\n  \r\n  radioList=[\"settings_tankTurning\",\"settings_strafing\"];\r\n  rLength=radioList.length;\r\n  for(let x=0; x<rLength; ++x){\r\n    let r=radioList[x];\r\n    let rad=document.getElementById( r );\r\n    this.setRadioStyle(rad, x, rLength);\r\n    \r\n    let val= rad.value==1;\r\n    rad.addEventListener('change', (e)=>{\r\n  tmpThis.pxlQuality.setGraphicsSettings( {leftRight:val}, null );\r\n  //tmpThis.pxlQuality.settings.leftRight=val;\r\n  //tmpThis.pxlCookie.setCookie(\"leftRight\", val);\r\n    });\r\n  }\r\n  \r\n  radioList=[\"settings_dragLooking\",\"settings_pointLooking\"];\r\n  rLength=radioList.length;\r\n  for(let x=0; x<rLength; ++x){\r\n    let r=radioList[x];\r\n    let rad=document.getElementById( r );\r\n    this.setRadioStyle(rad, x, rLength);\r\n    \r\n    let val= rad.value==1;\r\n    rad.addEventListener('change', (e)=>{\r\n  tmpThis.pxlQuality.setGraphicsSettings( {mouse:val}, null );\r\n  //tmpThis.pxlQuality.settings.mouse=val;\r\n  //tmpThis.pxlCookie.setCookie(\"mouse\", val);\r\n    });\r\n  }\r\n  \r\n\r\n  this.setRadioValues();\r\n  \r\n  /*setTimeout( ()=>{\r\n    this.settingsGuiAdvObjSizing(false);\r\n  }, 50);*/\r\n  \r\n  }\r\n  \r\n  setRadioStyle(rad,cur,aLen){\r\n    let addStyle=\"settings_radio_label_mid\";\r\n    if(cur==0){\r\n  addStyle=\"settings_radio_label_start\";\r\n    }else if(cur==aLen-1){\r\n  addStyle=\"settings_radio_label_end\";\r\n    }\r\n    rad.parentNode.children[1].classList.add( addStyle );\r\n  }\r\n  setRadioValues(){\r\n  let qualitySettings=this.pxlQuality.settings;\r\n  \r\n  let keys=Object.keys(qualitySettings);\r\n  keys.forEach( (k)=>{\r\n    let radioBlock=document.getElementById( \"settingsRadioBlock_\"+k );\r\n    if(radioBlock){\r\n  let val= k==\"resolution\" ? qualitySettings[k]*4-1 : ~~qualitySettings[k];\r\n  radioBlock.children[val].children[0].checked=true; // Assuming [input, label]\r\n    }\r\n  });\r\n  }\r\n  \r\n  \r\n  settingsGuiAdvObjSizing(active=true){\r\n    let advObj=this.guiWindows.settingsGui.advObj;\r\n    let oHeight=advObj.offsetHeight;\r\n    advObj.style.maxHeight=(active ? oHeight : 0)+\"px\";\r\n    advObj.setAttribute(\"maxHeight\", oHeight);\r\n  }\r\n  \r\n  settingsGuiToggle(active=null, bgVis=true){\r\n  if( !this.guiWindows.settingsGui ){\r\n    this.settingsGuiBuild();\r\n  }\r\n  \r\n  active= active==null ? !this.guiWindows.settingsGui.active : active;\r\n    \r\n    if(active && this.guiWindows?.settingsGui?.usernameReturn){\r\n      this.guiWindows.settingsGui.usernameReturn.innerText=\"\";\r\n    }\r\n    \r\n  this.guiWindows.settingsGui.active=active;\r\n  this.promptFader( this.guiWindows.settingsGui.gui, active );\r\n  this.toggleGuiWindowContainer( null, active );\r\n  if(this.hudBlock.active){ this.toggleHudBlock( active ); }\r\n  this.toggleHudBlock(active, false);\r\n    \r\n    this.togglePxlNavDataDisplay(active);\r\n    \r\n    if(this.introHelpActive && !active){\r\n      this.introHelpActive=false;\r\n      this.pxlEnv.postHelpIntro();\r\n    }\r\n    \r\n  }\r\n\r\n  togglePxlNavDataDisplay( active=null ){\r\n    if( active==null ){\r\n      if( this.guiWindows.settingsGui ){\r\n      active = this.guiWindows.settingsGui.active;\r\n      }else{\r\n      active = false;\r\n      }\r\n    }\r\n    \r\n    this.pxlNavData.active=active;\r\n    \r\n    let toHeight= this.pxlNavData.height || 200;\r\n    if( this.pxlNavData?.gui ){\r\n      this.pxlNavData.gui.style.maxHeight= active ? toHeight+\"px\" : \"0px\" ;\r\n      if( !active ){\r\n        this.pxlNavData.height=this.pxlNavData.gui.offsetHeight;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Settings GUI Functions for resolution and glow settings\r\n\r\n  renderRadius(val){\r\n    this.pxlEnv.mapGlowPass.strength = Number( val );\r\n    this.pxlEnv.roomBloomPass.strength = Number( val );\r\n  }\r\n  renderThreshold(val){\r\n    this.pxlEnv.mapGlowPass.threshold = Number( val );\r\n    this.pxlEnv.roomBloomPass.threshold = Number( val );\r\n  }\r\n  renderGlowRadius(val){\r\n    this.pxlEnv.mapGlowPass.radius = Number( val );\r\n    this.pxlEnv.roomBloomPass.radius = Number( val );\r\n  }\r\n  renderResolution(val){\r\n    this.pxlQuality.screenResPerc=val*.75+.25;\r\n    this.pxlDevice.resizeRenderResolution();\r\n  }\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n\r\n  inviteUserBuild(){\r\n  this.guiWindows.inviteUserGui={};\r\n  this.guiWindows.inviteUserGui.gui=null;\r\n  this.guiWindows.inviteUserGui.active=false;\r\n  \r\n  let inviteUserGuiDiv=document.createElement( \"div\" );\r\n  inviteUserGuiDiv.id=\"gui_inviteUserWindow\";\r\n  inviteUserGuiDiv.classList.add(\"gui_inviteUserParentStyle\");\r\n  this.prepPromptFader( inviteUserGuiDiv );\r\n  this.addToContainer( inviteUserGuiDiv );\r\n  \r\n    let urlDisplay=window.location+\"\";\r\n    urlDisplay=urlDisplay.replace(/^https?:\\/\\//,\"\");\r\n    let html=\"\";\r\n    html+=`\r\n        <div class=\"gui_inviteUserBody\">\r\n          <div class=\"iu_urlStyle\">${urlDisplay}</div>\r\n          <div id=\"iu_copy\" class=\"iu_copyStyle\">Copy</div>\r\n        </div>\r\n    `;\r\n  inviteUserGuiDiv.innerHTML=html;\r\n        \r\n    let utils=this.pxlUtils;\r\n    let iuCopy=document.getElementById(\"iu_copy\");\r\n    iuCopy.addEventListener(\"click\", ()=>{\r\n      let status=utils.copyRoomUrl();\r\n      if(status){\r\n        iuCopy.innerText=\"Copied\";\r\n      }else{\r\n        iuCopy.innerText=\"Error\";\r\n      }\r\n      if(iuCopy.timeout){\r\n        clearTimeout( iuCopy.timeout ); \r\n      }\r\n      iuCopy.timeout=setTimeout( ()=>{\r\n        iuCopy.innerText=\"Copy\";\r\n        clearTimeout( iuCopy.timeout ); \r\n      }, 2000);\r\n    });\r\n  \r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  this.guiWindows.inviteUserGui.gui=inviteUserGuiDiv;  \r\n  }\r\n  inviteUserPosition(){\r\n    if( this.guiWindows.inviteUserGui && this.guiWindows.inviteUserGui.active ){\r\n      let iu=document.getElementById(\"ft3Button\");\r\n      let iuBB=iu.getBoundingClientRect();\r\n      this.guiWindows.inviteUserGui.gui.style.display=\"grid\";\r\n      this.guiWindows.inviteUserGui.gui.style.top=iuBB.y;\r\n      this.guiWindows.inviteUserGui.gui.style.right=this.pxlDevice.sW - iuBB.x + 5;\r\n      this.guiWindows.inviteUserGui.gui.style.minHeight=iuBB.height;\r\n    }\r\n  }\r\n  \r\n  toggleInviteUser(active=null){\r\n  if( !this.guiWindows.inviteUserGui ){\r\n    this.inviteUserBuild();\r\n  }\r\n\r\n  active= active==null ? !this.guiWindows.inviteUserGui.active : active;\r\n  this.guiWindows.inviteUserGui.active=active;\r\n  this.promptFader( this.guiWindows.inviteUserGui.gui, active );\r\n    \r\n    this.inviteUserPosition();\r\n  }\r\n      \r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  /**\r\n   * Format the welcome message to include the project title.\r\n   * \r\n   * Pass `%projectTitle%` in the message to have it replaced with the project title.\r\n   * \r\n   * Set the welcome message in the pxlOptions fields -\r\n   * `pxlOptions.onboarding.pc.message`\r\n   * `pxlOptions.onboarding.mobile.message`\r\n   * @param {string} message - The message to format\r\n   * @returns {string} The formatted message\r\n   * @memberof pxlGui\r\n   */\r\n  formatWelcomeMessage( message ){\r\n    let projectTitle=this.projectTitle;\r\n    let outputMessage = message.replace(/%projectTitle%/g, projectTitle);\r\n    return outputMessage;\r\n  }\r\n\r\n\r\n\r\n  buildMobileWelcome(){\r\n  this.guiWindows.mobileGui={};\r\n  this.guiWindows.mobileGui.gui=null;\r\n  this.guiWindows.mobileGui.active=false;\r\n  \r\n  let mobileWelcomeGuiDiv=document.createElement( \"div\" );\r\n  mobileWelcomeGuiDiv.id=\"gui_mobileWelcomeGuiWindow\";\r\n  mobileWelcomeGuiDiv.classList.add(\"gui_helpGuiParentStyle\");\r\n  this.prepPromptFader( mobileWelcomeGuiDiv );\r\n  this.guiWindowBG.appendChild( mobileWelcomeGuiDiv );\r\n  \r\n\r\n  // Format welcome screen message\r\n  let welcomeText=\"\";\r\n  let welcomeHTML=\"\";\r\n  if( this.pxlOptions.onboarding.mobile?.message != \"\" ){\r\n    welcomeText = this.pxlOptions.onboarding.mobile.message;\r\n    welcomeText = this.formatWelcomeMessage( welcomeText );\r\n    let welcomeStyle=\"\"\r\n    if( this.pxlOptions.onboarding.mobile?.messageStyle.length > 0 ){\r\n      welcomeStyle=this.pxlOptions.onboarding.mobile.messageStyle.join(\" \");\r\n      welcomeStyle = `class=\"${welcomeStyle}\"`;\r\n    }\r\n\r\n    welcomeHTML=`<div id=\"gui_mobileWelcomeMessage\" ${welcomeStyle}>${welcomeText}</div>`;\r\n  }\r\n\r\n  // Button Text\r\n  let buttonStyles=\"guiButton\";\r\n  if( this.pxlOptions.onboarding.mobile?.buttonStyle.length > 0 ){\r\n    buttonStyles=this.pxlOptions.onboarding.mobile.buttonStyle.join(\" \");\r\n  }\r\n\r\n  let buttonText=\"enter\";\r\n  if( this.pxlOptions.onboarding.mobile?.buttonText != \"\" ){\r\n    buttonText=this.pxlOptions.onboarding.mobile.buttonText;\r\n  }\r\n\r\n  let html=\"\";\r\n  html+=`\r\n    <div id=\"gui_helpContent\" class=\"gui_contentStyle\">\r\n  <div class=\"pxlGui-mobile-body\">\r\n    ${welcomeHTML}\r\n  </div> \r\n  <div id=\"gui_helpGui_hotKeys\" class=\"gui_helpGui_mobileHud\">\r\n    Tap-&-Drag the <span class=\"gui_boldText\">Left Circle</span> to move you,\r\n    <br>The <span class=\"gui_boldText\">Right Circle</span> to look around;\r\n    <br>\r\n    <br> Tap the <span class=\"gui_boldText\">upper</span> half of the screen to jump\r\n    <br>\r\n    <br> If the screen is black behind this message,\r\n    <br> Please <span id=\"refeshPxlPage\">refresh</span> the page\r\n  </div>\r\n  <div id=\"guiHelpFooter\" class=\"gui_footer\">\r\n    <div class=\"${buttonStyles}\" id=\"guiMobileWelcomeButton\">${buttonText}</div>\r\n  </div>\r\n  <div class=\"gui_spacer\"></div>\r\n    </div>\r\n  `;\r\n  mobileWelcomeGuiDiv.innerHTML=html;\r\n    \r\n  // Refresh page link\r\n  let refreshPage=document.getElementById(\"refeshPxlPage\");\r\n  if(refreshPage){\r\n    refreshPage.onclick=(e)=>{\r\n      e.preventDefault();\r\n      this.refreshPage();\r\n    };\r\n  }\r\n\r\n  \r\n  // Close Button\r\n  let tmpThis=this;\r\n  let guiClose=document.getElementById(\"guiMobileWelcomeButton\");\r\n  guiClose.onclick=(e)=>{ \r\n      tmpThis.toggleMobileWelcome( false );\r\n      tmpThis.pxlEnv.postHelpIntro();\r\n      tmpThis.promptFader(this.guiWindowBG, false,null,false);\r\n\r\n      // Request fullscreen\r\n      this.pxlDevice.requestFullScreen();\r\n    };\r\n    \r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  // Store gui window as object\r\n  this.guiWindows.mobileGui.gui=mobileWelcomeGuiDiv;\r\n  \r\n  }\r\n\r\n\r\n  toggleMobileWelcome( active=null ){\r\n  if( !this.guiWindows.mobileGui ){\r\n    this.buildMobileWelcome();\r\n  }\r\n  \r\n  if( active !== null && this.guiWindows.mobileGui.active == active ){\r\n    console.error(\"Mobile welcome already set to active: \"+active);\r\n    return;\r\n  }\r\n\r\n  active= active==null ? !this.guiWindows.mobileGui.active : active;\r\n  \r\n  this.guiWindows.mobileGui.active=active;\t\t \r\n  //this.promptFader( this.guiWindows.mobileGui.gui, active );\r\n  \r\n  if( active ){\r\n    this.promptFader( this.guiWindows.mobileGui.gui, active );\r\n  }else{\r\n    this.promptFader( this.guiWindows.mobileGui.gui, active, null, true );\r\n  }\r\n  this.toggleGuiWindowContainer( null, active );\r\n  if(this.hudBlock.active){ this.toggleHudBlock( active ); }\r\n  }\r\n\r\n\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n\r\n\r\n\r\n  // TODO : CTA should request the desired dictionary key\r\n  ctaBuildPopup(response=''){\r\n  if( this.ctaContentLoading ){\r\n    return;\r\n  }\r\n  if( !this.googleDocHTML ){\r\n    this.ctaContentLoading=true;\r\n    this.pxlFile.getURLContent( this.ctaLocalDocURL['cta'] ).then( (r)=>{\r\n      this.ctaContentLoading=false;\r\n      this.googleDocHTML=r;\r\n      this.ctaDisplayPopup();\r\n    });\r\n  }else{\r\n    this.ctaDisplayPopup();\r\n  }\r\n  }\r\n  \r\n  // TODO : CTA Display should request the desired dictionary key's iframe data\r\n  ctaDisplayPopup(){\r\n  if(this.actionPopUp){\r\n    this.actionPopUp.parentNode.removeChild(this.actionPopUp);\r\n  }\r\n  //let rxExp= /(?<=<body>)(.*?)(?=<\\/body>)$/gm;\r\n  \r\n  let bodyOnly=this.googleDocHTML;\r\n  \r\n  this.actionPopUp=document.createElement(\"div\");\r\n  this.actionPopUp.setAttribute(\"id\",\"ctaPopup\");\r\n  this.actionPopUp.classList.add(\"parentGoogleLinkDoc\");\r\n  this.actionPopUp.classList.add(\"fader\");\r\n  this.actionPopUp.classList.add(\"visOff\");\r\n  let apuInner=document.createElement(\"div\");\r\n  apuInner.setAttribute(\"id\",\"ctaPopupInner\");\r\n  //apuInner.classList.add(\"innerGoogleLinkDoc\");\r\n  this.actionPopUp.appendChild( apuInner );\r\n  this.addToContainer(this.actionPopUp);\r\n  \r\n  let iframe=null;\r\n  if(bodyOnly == '' || !bodyOnly){\r\n    iframe=document.createElement(\"iframe\");\r\n    iframe.src=\"\"\r\n    iframe.classList.add(\"iframeGoogleLinkDoc\");\r\n    apuInner.appendChild(iframe);\r\n    //iframe.allow='';\r\n    iframe.referrerpolicy=\"unsafe-url\";\r\n  }else{\r\n    apuInner.innerHTML=bodyOnly;\r\n    apuInner.classList.add(\"iframeGoogleLinkDoc\");\r\n  }\r\n  let self=this;\r\n  this.actionPopUp.onclick=function(e){\r\n    let eventObject=e.srcElement.getAttribute(\"id\");\r\n    if(eventObject == \"ctaPopup\" ){\r\n  self.promptFader(this, false, null, true);\r\n  self.actionPopUp=null;\r\n    }\r\n  };\r\n  \r\n  if(iframe){\r\n    iframe.onload=function(){\r\n  setTimeout( ()=>{\r\n    this.promptFader(this.actionPopUp, true, null, false);\r\n    }, 100);\r\n    }\r\n  }else{\r\n    setTimeout( ()=>{\r\n    this.promptFader(this.actionPopUp, true, null, false);\r\n  }, 100);\r\n  }\r\n  }\r\n\r\n\r\n\r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n  getUserControls( curId ){\r\n    if( !curId ) return [null];\r\n    let curAvatar=curId;\r\n    let curGui=curAvatar.userStatusGui;\r\n    let curAudio=curAvatar.audio;\r\n    let curAudioMuted=curAvatar.audioMuted;\r\n    let curAudioGui=curAvatar.userSoundGui;\r\n    let curName=curAvatar.displayName;\r\n    let curNameGui=curAvatar.userNameGui;\r\n    let curVerse=curAvatar.verse;\r\n    return {curAvatar, curName, curAudio, curAudioMuted, curGui, curNameGui, curAudioGui, curVerse };\r\n  }\r\n  \r\n  async setUserControlPosition(){\r\n    if( this.userControlBlock ){\r\n      let curTop=0;\r\n      let curLeft=0;\r\n      if( this.hudTopBar ){\r\n        let htbr=this.hudTopBar.getBoundingClientRect();\r\n        curTop=htbr.y+htbr.height;\r\n      }\r\n      \r\n      /*if( this.guiWindows.chatBoxGui ){\r\n        if( this.guiWindows.chatBoxGui.active ){\r\n          let htbr=this.guiWindows.chatBoxGui.gui.getBoundingClientRect();\r\n          curLeft=htbr.width;\r\n          curTop=0;\r\n        }\r\n      }*/\r\n      this.userControlBlock.gui.style.top= curTop+\"px\";\r\n      //this.userControlBlock.gui.style.left= curLeft+\"px\";\r\n    }\r\n  }\r\n\r\n  buildUserSpeaker(){\r\n    let ret={};\r\n    \r\n    let retSpeaker=this.userControlBlock.speakerIcon.svg.cloneNode( true );\r\n    retSpeaker.classList.add( \"userControlSpeakerStyle\" );\r\n    retSpeaker.classList.add( \"userControlSpeakerButtonStyle\" );\r\n    ret.gui=retSpeaker;\r\n    ret.remoteMuted=false;\r\n    ret.volPrev=0;\r\n    \r\n    let children=retSpeaker.children;\r\n    for(let x=0; x<children.length; ++x){\r\n      let cd=children[x];\r\n      let curId=cd.getAttribute(\"id\");\r\n      ret[curId]=cd;\r\n      if( curId == \"mute\"){\r\n        cd.classList.add( \"userControlVisStyle\" );\r\n      }else if( curId == \"button\"){\r\n        cd.classList.add( \"userControlSpeakerButtonStyle\" );\r\n      }\r\n    }\r\n    \r\n    let volChildren=ret.volLines.children;\r\n    for(let x=0; x<volChildren.length; ++x){\r\n      let cd=volChildren[x];\r\n      let curId=cd.getAttribute(\"id\");\r\n      ret[curId]=cd;\r\n    }\r\n    \r\n    volChildren=ret.remoteMutedLines.children;\r\n    for(let x=0; x<volChildren.length; ++x){\r\n      let cd=volChildren[x];\r\n      let curId=cd.getAttribute(\"id\");\r\n      ret[curId]=cd;\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  // Remote User Controls\r\n  async addUserControls( curId, muted=false ){\r\n    let {curAvatar, curName, curGui} = this.getUserControls( curId );\r\n    \r\n    let userControlsBlock=document.createElement( \"div\" );\r\n    userControlsBlock.classList.add( \"userControlProximityOff\" );\r\n    userControlsBlock.classList.add( \"userControlParentStyle\" );\r\n    userControlsBlock.classList.add( \"userControlSpeakerButtonStyle\" );\r\n    if( this.mobile ){\r\n      userControlsBlock.style.display=\"none\";\r\n    }\r\n    //userControls.setAttribute( \"jid\", curId ); // This will become stale very quickly, want to have it tho...\r\n    let tmpThis=this;\r\n    userControlsBlock.onclick=()=>{ tmpThis.setUserControlMute(curId); };\r\n    curAvatar.userStatusGui=userControlsBlock;\r\n    this.userControlBlock.gui.appendChild( userControlsBlock );\r\n    \r\n    \r\n    let userControlsParent=document.createElement( \"div\" );\r\n    userControlsParent.classList.add( \"userControlInnerParentStyle\" );\r\n    userControlsBlock.appendChild( userControlsParent );\r\n    \r\n    \r\n    let userSpeakerParent=document.createElement( \"div\" );\r\n    userSpeakerParent.classList.add( \"userControlSpeakerParentStyle\" );\r\n    let userSpeaker=this.buildUserSpeaker();\r\n    userSpeakerParent.appendChild( userSpeaker.gui );\r\n    curAvatar.userSoundGui=userSpeaker;\r\n    userControlsParent.appendChild( userSpeakerParent );\r\n    \r\n    let userNameParent=document.createElement( \"div\" );\r\n    userNameParent.classList.add( \"userControlNameStyle\" );\r\n    userNameParent.innerText=curName;\r\n    curAvatar.userNameGui=userNameParent;\r\n    userControlsParent.appendChild( userNameParent );\r\n    \r\n    this.setUserControlColor( curId );\r\n  }\r\n  \r\n  async setUserControlVolume( curId, audioLevel, smoothing=true ){\r\n    if( this.userControlBlock.activeList.includes( curId ) ){\r\n      let {curAudioGui, curAudioMuted} = this.getUserControls( curId );\r\n      if( curAudioGui && ( !curAudioMuted || audioLevel==0 ) ){\r\n        if( curAudioGui.remoteMuted ){\r\n          audioLevel=0;\r\n        }else if( smoothing && audioLevel>0){\r\n          audioLevel*=2;\r\n          audioLevel=Math.min(1, Math.max(audioLevel, (audioLevel+curAudioGui.volPrev)*.5));\r\n        }\r\n        curAudioGui.volPrev=audioLevel;\r\n        curAudioGui.volLines.style.opacity = audioLevel;\r\n        curAudioGui.volLines.style.filter = \"alpha(opacity=\"+(audioLevel*100)+\")\";\r\n      }\r\n    }\r\n  }\r\n  \r\n  async setUserControlMute( curId ){\r\n    let {curAvatar, curAudio, curAudioMuted, curAudioGui} = this.getUserControls( curId );\r\n    if( curAudio ){\r\n      let active=!curAudioMuted; // Muted Value Toggle\r\n      if( active ){\r\n        this.setUserControlVolume( curId, 0, false );\r\n        curAudioGui.mute.classList.add( \"userControlVisible\" ); // Mute Line Visible\r\n        curAudio.volume=0;\r\n        curAudio.muted=true;\r\n      }else{\r\n        curAudioGui.mute.classList.remove( \"userControlVisible\" ); // Mute Line Hidden\r\n        curAudio.muted=false;\r\n        curAudio.volume=1;\r\n      }\r\n      \r\n      curAvatar.audioMuted=active;\r\n    }\r\n  }\r\n  async setUserControlRemoteMute( curId, track=null, inVerse=true, color=\"#ffffff\" ){\r\n    let {curAudio, curAudioGui} = this.getUserControls( curId );\r\n    if( curAudioGui ){\r\n      if( track==null ){\r\n        if( curAudio ){\r\n          track=curAudio.muted;\r\n        }else{\r\n          track=false;\r\n        }\r\n      }\r\n      let active = typeof track == \"object\" ? track.muted : track;\r\n      curAudioGui.remoteMuted=active;\r\n      curAudioGui.base.setAttribute(\"fill\", (active ? \"#ff0000\" : color ) );\r\n      curAudioGui.remoteMutedLines.style.display=(active || !inVerse ? \"inline-block\" : \"none\" );\r\n      curAudioGui.remoteS1.setAttribute(\"stroke\", (inVerse ? \"#ff0000\" : color ) );\r\n      curAudioGui.remoteS2.setAttribute(\"stroke\", (inVerse ? \"#ff0000\" : color ) );\r\n      this.setUserControlVolume( curId, 0, false );\r\n    }\r\n  }\r\n  \r\n  async setUserControlVis( curId, active=null, deleteController=false ){\r\n    let {curAvatar, curGui,curAudio} = this.getUserControls( curId );\r\n    \r\n    /*if( !curAvatar.avatarGroup.visible ){\r\n      return;\r\n    }*/\r\n    \r\n    \r\n    if(curGui){\r\n      let proxVisOff=\"userControlProximityOff\";\r\n      if( active == null ){\r\n        active=!curGui.classList.contains( proxVisOff );\r\n      }\r\n      if( active ){\r\n        curGui.classList.remove( proxVisOff );\r\n        curGui.style.maxWidth=curGui.children[0].getBoundingClientRect().width+\"px\";\r\n        //if( curAudio ){  curAudio.muted=false; }\r\n        \r\n        this.setUserControlVolume( curId, 0 );\r\n        if( !this.userControlBlock.activeList.includes( curId ) ){\r\n          this.userControlBlock.activeList.push( curId );\r\n        }\r\n      }else{\r\n        curGui.classList.add( proxVisOff );\r\n        curGui.style.maxWidth=\"30px\";\r\n\r\n        //if( curAudio ){  curAudio.muted=false; }\r\n        \r\n        let curIdEl= this.userControlBlock.activeList.indexOf( curId );\r\n        if( curIdEl>-1 ){\r\n          this.userControlBlock.activeList.splice( curIdEl, 1 );\r\n        }\r\n      }\r\n      this.userControlBlock.gui.style.padding= this.userControlBlock.activeList.length == 0 ? \"0px\" : \"5px\" ;\r\n    }\r\n  }\r\n  \r\n  async deleteUserControlVis( curId ){\r\n    let {curAvatar, curGui} = this.getUserControls( curId );\r\n    \r\n    if(curGui){\r\n      let proxVisOff=\"userControlProximityOff\";\r\n      curGui.classList.add( proxVisOff );\r\n      curGui.style.maxWidth=\"30px\";\r\n\r\n      let curIdEl= this.userControlBlock.activeList.indexOf( curId );\r\n      if( curIdEl>-1 ){\r\n        this.userControlBlock.activeList.splice( curIdEl, 1 );\r\n      }\r\n      this.userControlBlock.gui.style.padding= this.userControlBlock.activeList.length == 0 ? \"0px\" : \"5px\" ;\r\n\r\n      // Clean up User Speaker Gui Element\r\n      if( curGui ){\r\n        curGui.parentNode.removeChild( curGui );\r\n      }\r\n    }\r\n  }\r\n  \r\n  userControlsSwap( idFrom, idTo ){\r\n    //console.log( \"is this needed?\", idFrom, idTo );\r\n    let curIdEl= this.userControlBlock.activeList.indexOf( idFrom );\r\n    if( curIdEl>-1 ){\r\n      this.userControlBlock.activeList.splice( curIdEl, 1 );\r\n      \r\n      if( !this.userControlBlock.activeList.includes( idTo ) ){\r\n        this.userControlBlock.activeList.push( idTo );\r\n      }\r\n    }\r\n  }\r\n  \r\n  setUserControlColor( curId, color=null ){\r\n    let {curAvatar, curGui, curAudioGui, curVerse} = this.getUserControls( curId );\r\n    let verseCompare=true;\r\n    if( color == null ){\r\n      if(verseCompare){\r\n        color=\"#ffffff\";\r\n      }else{\r\n        let colorRGB=this.pxlUtils.stringToRgb( curVerse, .3 );\r\n        color=this.pxlUtils.rgbToHex( ...colorRGB );\r\n      }\r\n    }\r\n    curGui.style.color=color;\r\n    curAudioGui.base.setAttribute(\"fill\", color );\r\n    curAudioGui.mute.setAttribute(\"stroke\", color );\r\n    curAudioGui.mid.setAttribute(\"fill\", color );\r\n    curAudioGui.max.setAttribute(\"fill\", color );\r\n    \r\n    curAudioGui.volPrev=0;\r\n    curAudioGui.volLines.style.opacity = 0;\r\n    curAudioGui.volLines.style.filter = \"alpha(opacity=0)\";\r\n    \r\n    let tmpThis=this;\r\n    curAvatar.userStatusGui.onclick=()=>{ tmpThis.setUserControlMute(curId); };\r\n    \r\n    this.setUserControlRemoteMute( curId, null, verseCompare, color );\r\n  }\r\n  \r\n  toggleUserControls( curAvatar ){\r\n    if( !curAvatar ) return null;\r\n  }\r\n  \r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n  \r\n}\r\n","import { Vector3 } from \"../../libs/three/three.module.min.js\";\r\n\r\n\r\nexport class ShaderEditor {\r\n  constructor( pxlCore, guiManager ){\r\n    \r\n    this.active = false;\r\n    this.isEditing = false;\r\n    this.name = \"GLSL Editor\";\r\n    this.type = \"shaderGui\";\r\n    this.pxlCore = pxlCore;\r\n    this.pxlEnv = pxlCore.pxlEnv;\r\n\t\tthis.guiManager = guiManager;\r\n    this.parent = null;\r\n    this.gui = null;\r\n    this.helpGui = null;\r\n    this.shaderEditorDisplay = null;\r\n    this.children = {};\r\n    \r\n    this.uniformsObj = null;\r\n    this.vertObj = null;\r\n    this.fragObj = null;\r\n    \r\n    this.currentShader = null;\r\n    this.clickThroughListener = this.clickThroughCheck.bind(this);\r\n    \r\n    this.shaderSliderValues=new Vector3();\r\n\r\n    // 'min' for when you click off the editor window itself; into the pxlNav canvas\r\n    // 'max' for when you click into a field to edit\r\n    //   Values are in `uw` units; for easy scaling\r\n    this.editorWidthMinMax = {\r\n      \"min\": 30,\r\n      \"max\": 70\r\n    };\r\n\r\n  }\r\n  \r\n  addSlider(parentObj, label, val, min, max, step, callback, args){\r\n    if( typeof(parentObj) == \"string\" ){\r\n      parentObj=document.getElementById( parentObj );\r\n    }\r\n    let sliderParent=document.createElement(\"div\");\r\n    sliderParent.style.display=\"grid\";\r\n    sliderParent.style.gridAutoFlow=\"column\";\r\n    sliderParent.style.alignItems=\"center\";\r\n    sliderParent.style.gridAutoColumns=\"max-content auto max-content\";\r\n    sliderParent.innerHTML=\"<div class='input_sliderLabel'>\"+label+\" : </div>\";\r\n\r\n    let slider=document.createElement(\"input\");\r\n    slider.type=\"range\";\r\n    slider.classList.add(\"input_sliderRange\");\r\n    slider.min=min;\r\n    slider.max=max;\r\n    slider.step=step;\r\n    slider.value=val;\r\n    sliderParent.appendChild( slider );\r\n    \r\n    let numberDisp=document.createElement(\"input\");\r\n    numberDisp.type=\"number\";\r\n    numberDisp.classList.add(\"gui_defaultInput\");\r\n    numberDisp.classList.add(\"input_numberInput\");\r\n    numberDisp.value=val;\r\n    \r\n    sliderParent.appendChild( numberDisp );\r\n    numberDisp.onchange=(e)=>{\r\n      slider.value=e.target.value;\r\n    };\r\n    \r\n    slider.onchange=(e)=>{\r\n      numberDisp.value=e.target.value;\r\n      callback(e.target.value, ...args);\r\n    };\r\n    slider.oninput=(e)=>{\r\n      numberDisp.value=e.target.value;\r\n      callback(e.target.value, ...args);\r\n    };\r\n    \r\n    parentObj.appendChild( sliderParent );\r\n  }\r\n  \r\n  updateShaderTextFields( objRead=null ){\r\n    let roomShader;\r\n    let type=\"shaderGui\";\r\n    if( !objRead ){\r\n      objRead= this.pxlEnv.currentRoom==this.pxlEnv.mainRoom ? this.currentShader : this.pxlEnv.roomSceneList[ this.pxlEnv.currentRoom ].getCurrentShader();\r\n    }\r\n    \r\n    try{\r\n      roomShader=this.pxlEnv.roomSceneList[ this.pxlEnv.currentRoom ].readShader(objRead, this.shaderSliderValues);\r\n    }catch(err){\r\n\r\n      return;\r\n    }\r\n    \r\n    let uniforms, vert, frag;\r\n    uniforms=vert=frag=\"Unable To Load\";\r\n    \r\n    try{\r\n      roomShader.uniforms['sliders']={type:\"v\",value:this.shaderSliderValues};\r\n\r\n      uniforms=JSON.stringify( roomShader.uniforms );\r\n      vert=roomShader.vertexShader;\r\n      frag=roomShader.fragmentShader;\r\n      //uniforms=uniforms.replace(\"{\",\"{\\n\").replace(\"}\",\"\\n}\").replace(\",\",\",\\n\");\r\n      //uniforms=Object.keys(  roomShader.uniforms );\r\n      uniforms=\"\";\r\n      for( const x in roomShader.uniforms ){\r\n        let curType =\"float\";\r\n        let typeDict={\r\n        \"t\":\"sampler2D\",\r\n        \"b\":\"bool\",\r\n        \"i\":\"int\",\r\n        \"f\":\"float\",\r\n        \"v\":\"vec\",\r\n        \"c\":\"vec\",\r\n        };\r\n        curType = typeof(roomShader.uniforms[x].value)\r\n        \r\n        if( curType == \"object\"){\r\n          curType=\"\"\r\n          let curVal = roomShader.uniforms[x].value;\r\n          if(!curVal){\r\n            continue;\r\n          }\r\n          if(\"image\" in roomShader.uniforms[x].value){\r\n            curType = \"sampler2D\";\r\n          }else{\r\n            curType = curType + \"vec\" + (Object.keys(roomShader.uniforms[x].value).length);\r\n          }\r\n        }else{\r\n          if( typeDict.hasOwnProperty( roomShader.uniforms[x].type ) ){\r\n            curType = roomShader.uniforms[x].type==\"i\" ? \"i\" : \"\";\r\n          }\r\n          if( typeDict.hasOwnProperty( roomShader.uniforms[x].type ) ){\r\n            curType = typeDict[roomShader.uniforms[x].type];\r\n          }\r\n        }\r\n        uniforms+= `uniform ${curType} ${x};   `;\r\n      }\r\n      \r\n      vert=vert.replace(/[\\t]/g, \"  \");\r\n      frag=frag.replace(/[\\t]/g, \"  \");\r\n    }catch(err){\r\n      console.log(\"Error Reading Shader\");\r\n      console.log(err);\r\n    }\r\n    \r\n    if( roomShader ){\r\n      roomShader.needsUpdate=true;\r\n      this.children.uniformsObj.value = uniforms;\r\n      this.children.vertObj.value = vert;\r\n      this.children.fragObj.value = frag;\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  \r\n\r\n  // -- -- -- -- -- -- -- -- --\r\n  // -- Build DOM Objects -- -- --\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n  \r\n  buildShaderEditor(){\r\n    let type=\"shaderGui\";\r\n    \r\n    let shaderDiv=document.createElement( \"div\" );\r\n    shaderDiv.id=\"guiShaderEditorBlock\";\r\n    shaderDiv.classList.add( \"gui_shaderEditorBlockStyle\" );\r\n    shaderDiv.style.transition = \"max-width .5s ease, opacity .8s, filter .8s\";\r\n    this.pxlEnv.pxlGuiDraws.prepPromptFader( shaderDiv );\r\n    this.pxlEnv.pxlGuiDraws.guiWindows[type]={};\r\n    this.pxlEnv.pxlGuiDraws.guiWindows[type].gui=shaderDiv;\r\n    this.pxlEnv.pxlGuiDraws.guiWindows[type].active=false;\r\n    this.gui = shaderDiv;\r\n\r\n    // -- -- --\r\n    \r\n    let shaderHelpDiv=document.createElement( \"div\" );\r\n    shaderHelpDiv.id=\"guiShaderHelpBlock\";\r\n    shaderHelpDiv.classList.add( \"gui_shaderHelpBlockStyle\" );\r\n    shaderHelpDiv.style.transition = \"left .3s ease, opacity .8s, filter .8s\";\r\n    this.pxlEnv.pxlGuiDraws.prepPromptFader( shaderHelpDiv );\r\n    this.pxlEnv.pxlGuiDraws.guiWindows[type].help=shaderHelpDiv;\r\n    this.helpGui = shaderHelpDiv;\r\n\r\n\r\n    // -- -- --\r\n    \r\n    let curRoom = this.pxlEnv.currentRoom;\r\n    \r\n    // -- -- --\r\n\r\n    //let geoList = this.pxlEnv.geoList;\r\n    let geoList = this.pxlEnv.roomSceneList[curRoom].geoList;\r\n    let geoKeys=Object.keys( geoList );\r\n    let objectShaderOptions=\"\";\r\n    geoKeys.forEach( (k)=>{\r\n      if( [\"Mesh\",\"Points\"].includes( geoList[k].type ) ){\r\n        if(geoList[k].material.type == \"ShaderMaterial\" ){\r\n          let curOpt=k.substring(0,1).toUpperCase()+k.substring(1,k.length);\r\n          objectShaderOptions+=\"<option value='geo_\" + k + \"'>\" + curOpt + \"</option>\";\r\n        }\r\n      }\r\n    });\r\n\r\n    let avatarSelected=\"\";\r\n    let fogSelected=\"selected\";\r\n    this.pxlEnv.pxlGuiDraws.guiWindows[type].currentShader=\"script_fog\";\r\n\r\n    let html=`\r\n    <div id=\"gui_shaderEditorParent\" class=\"gui_shaderEditorParentStyle\">\r\n      <div id=\"gui_shaderEditorHeaderBlock\" class=\"gui_shaderEditorHeaderBlock\">\r\n      <div class=\"gui_shaderEditorOptionBlock\">\r\n        <div class=\"gui_shaderEditorTitleBlock\">\r\n        <div id=\"gui_shaderEditorTitleParent\" class=\"gui_shaderEditorTitleParentStyle\">\r\n            <div id=\"gui_shaderEditorTitle\" clsss=\"gui_shaderEditorTitleStyle\">GLSL Shader Editor</div>\r\n            <div id=\"gui_shaderEditorHeaderList\" clsss=\"gui_shaderEditorHeaderListStyle\">\r\n              <span id=\"gui_shaderEditorPulldownHeader\" clsss=\"gui_shaderEditorPulldownHeaderStyle\">Edit Shader</span>\r\n              <select name=\"shaderEditor_loadShader\" id=\"shaderEditor_loadShader\" class=\"pickerStyle gui_shaderPickerStyle\">\r\n                <option value=\"script_avatar\" ${avatarSelected}>Avatar</option>\r\n                <option value=\"script_fog\" ${fogSelected}>Fog</option>\r\n                <option value=\"script_dArrows\">Direction Arrows</option>\r\n                <option value=\"script_userScreens\">User Screens</option>\r\n                <option value=\"script_warpZonePortals\">Warp Zone Portals</option>\r\n                <option value=\"script_lizardking\">Item; Lizard King</option>\r\n                <option value=\"script_majorTom\">Item; Major Tom</option>\r\n                <option value=\"script_fractalSubstrate\">Item; Fractal Substrate</option>\r\n                <option value=\"script_fractalEcho\">Item; Fractal Echo Pass</option>\r\n                ${objectShaderOptions}\r\n              </select>\r\n            </div>\r\n            <div id=\"gui_shaderEditorFontSize\" clsss=\"gui_shaderEditorFontSizeStyle\">\r\n              <span  style=\"font-size:.75em;margin-right:5px;\">Font Size</span>\r\n              <span id=\"gui_shaderEditorFontSmaller\" class=\"shaderEditor_settingsButton\">-</span>\r\n              <span id=\"gui_shaderEditorFontLarger\" class=\"shaderEditor_settingsButton\">+</span>\r\n              <span class=\"gui_shaderEditorOptionBarSpacer\"> </span>\r\n              <span id=\"gui_shaderEditorCloseButton\" class=\"shaderEditor_settingsButton\">X</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"gui_shaderEditorHeaderLine\"></div>\r\n        <div id=\"guiShaderUserSliders\"></div>\r\n        <div class=\"gui_shaderEditorHeaderLine\"></div>\r\n      </div>\r\n      </div>\r\n      \r\n      \r\n      <div id=\"guiShaderFieldParent\" class=\"gui_shaderEditorFieldParentStyle\">\r\n        <span style='height:12px'>Uniforms -</span>\r\n        <textarea spellcheck=\"false\" placeholder=\"Shader Uniforms\" rows=\"3\" id=\"shaderEditor_uniformInput\" style=\"height:unset;\" readonly></textarea>\r\n        <span style='height:12px'>Vertex Shader -</span>\r\n        <textarea spellcheck=\"false\" placeholder=\"Vertex Shader\" id=\"shaderEditor_vertInput\"></textarea>\r\n        <span style='height:12px'>Fragment Shader -</span>\r\n        <textarea spellcheck=\"false\" placeholder=\"Fragment Shader\" id=\"shaderEditor_fragInput\"></textarea>\r\n      </div>\r\n      <div id=\"shader_updateShader\" class=\"shaderEditor_sendMessage\">Update Shader</div>\r\n    </div>\r\n    `;\r\n    \r\n    // -- -- --\r\n    let spacer = \"<div class='gui_shaderHelpSpacerStyle'></div>\"\r\n    html +=`\r\n    <div id=\"gui_shaderHelpBlock\" class=\"gui_shaderHelpBlockStyle\">\r\n      <div class=\"gui_shaderHelpTitle\">:: Keyboard Shortcuts ::</div>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Ctrl + Enter</span><br> - Update Shader on Material</span>\r\n      <br>&nbsp;&nbsp;<span>Returns use existing indent type (Spaces or Tabs)</span>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Ctrl + D</span><br> - Duplicate current line</span>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Ctrl + K</span><br> - Comment current/selected lines</span>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Ctrl + Shift + K</span><br> - Uncomment current/selected lines</span>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Ctrl + NumPad {1,2,3}</span><br> - Add selection or '.0' into float(), vec2(), vec3() </span>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Ctrl + {Up,Down,Left,Right}</span><br> - Searches for current selection in direction</span>\r\n      ${spacer}\r\n      <span><span class=\"gui_boldText\">Y</span><br> - To opn/close the Shader Editor</span>\r\n      ${spacer}\r\n    </div>\r\n    `;\r\n    shaderDiv.innerHTML = html;\r\n    document.body.appendChild( shaderDiv );\r\n\r\n    // -- -- --\r\n\r\n    let shaderSliders=document.getElementById(\"guiShaderUserSliders\");\r\n    \r\n    this.parentObj=shaderSliders;\r\n      \r\n    let peSliderValues=this.shaderSliderValues;\r\n    let sliderSetShader=(v, ...c)=>{\r\n      peSliderValues[c[0]]=v;\r\n    };\r\n    \r\n    //shaderSliders.style.paddingBottom = \"2px\";\r\n    this.addSlider(shaderSliders, \"sliders.x\", 0,-1,1, .0001, sliderSetShader, ['x'])\r\n    this.addSlider(shaderSliders, \"sliders.y\", 0,-5,5, .001, sliderSetShader, ['y'])\r\n    this.addSlider(shaderSliders, \"sliders.z\", 0,-10,10, .001, sliderSetShader, ['z'])\r\n    this.children.shaderSliders=shaderSliders;\r\n      \r\n      \r\n    this.children.shaderParentObj=document.getElementById(\"shaderEditor_uniformInput\").parentNode;\r\n    this.children.shaderEditor=document.getElementById(\"gui_shaderEditorParent\");\r\n    this.children.headerBar=document.getElementById(\"gui_shaderEditorHeaderBlock\");\r\n    this.children.titleParentObj=document.getElementById(\"gui_shaderEditorTitleParent\");\r\n    this.children.titleObj=document.getElementById(\"gui_shaderEditorTitle\");\r\n    this.children.pulldownHeaderObj=document.getElementById(\"gui_shaderEditorPulldownHeader\");\r\n    this.children.uniformsObj=document.getElementById(\"shaderEditor_uniformInput\");\r\n    this.children.vertObj=document.getElementById(\"shaderEditor_vertInput\");\r\n    this.children.fragObj=document.getElementById(\"shaderEditor_fragInput\");\r\n    this.children.updateObj=document.getElementById(\"shader_updateShader\");\r\n    this.children.helpDiv=document.getElementById(\"gui_shaderHelpBlock\");\r\n    this.children.shaderList=document.getElementById(\"gui_shaderEditorHeaderList\");\r\n    this.children.shaderFieldParent=document.getElementById(\"guiShaderFieldParent\");\r\n    this.shaderEditorDisplay=document.getElementById(\"shaderEditorDisplay\");\r\n    this.children.shaderSelect=document.getElementById(\"shaderEditor_loadShader\");\r\n    \r\n\r\n    let textSizeObj=document.getElementById(\"gui_shaderEditorFontSize\");\r\n    textSizeObj.style.justifySelf=\"end\";\r\n    textSizeObj.style.marginTop=\"2px\";\r\n    textSizeObj.style.marginRight=\"3px\";\r\n    textSizeObj.style.userSelect=\"none\";\r\n    textSizeObj.style.display=\"flex\";\r\n    textSizeObj.style.alignItems=\"center\";\r\n\r\n\r\n    let tmpThis=this;\r\n      \r\n    this.children.shaderSelect.onchange=(s)=>{\r\n      tmpThis.updateShaderTextFields( this.children.shaderSelect.value );\r\n    };\r\n      \r\n      \r\n    let fontSizeSmallerObj=document.getElementById(\"gui_shaderEditorFontSmaller\");\r\n    fontSizeSmallerObj.onclick=(e)=>{ tmpThis.shiftFontSize(-.15); };\r\n    let fontSizeLargerObj=document.getElementById(\"gui_shaderEditorFontLarger\");\r\n    fontSizeLargerObj.onclick=(e)=>{ tmpThis.shiftFontSize(.15); };\r\n    let closeButtonObj = document.getElementById(\"gui_shaderEditorCloseButton\");\r\n    closeButtonObj.onclick=(e)=>{ tmpThis.toggleShaderEditor(); };\r\n\r\n    /*\r\n      let shaderLinkList=this.pxlEnv.pxlGuiDraws.guiWindows[type].shaderList.children;\r\n      for( let x=0; x<shaderLinkList.length; ++x){\r\n        let l=shaderLinkList[x];\r\n        let curShader=l.getAttribute('shader');\r\n        l.onclick= (e)=>{\r\n          tmpThis.updateShaderTextFields(curShader);\r\n        };\r\n      };*/\r\n      \r\n    \r\n    this.children.updateObj.addEventListener(\"click\", ()=>{\r\n      this.isEditing = false;\r\n\r\n      let unisObj=document.getElementById(\"shaderEditor_uniformInput\");\r\n      let unis=unisObj.value;\r\n      let vertObj=document.getElementById(\"shaderEditor_vertInput\");\r\n      let vert=vertObj.value;\r\n      let fragObj=document.getElementById(\"shaderEditor_fragInput\");\r\n      let frag=fragObj.value;\r\n      \r\n      let stripper=document.createElement(\"div\");\r\n      stripper.innerHTML=unis;\r\n      unis=stripper.innerText;\r\n      stripper.innerHTML=vert;\r\n      vert=stripper.innerText;\r\n      stripper.innerHTML=frag;\r\n      frag=stripper.innerText;\r\n      \r\n      tmpThis.pxlEnv.roomSceneList[ tmpThis.pxlEnv.currentRoom ].setShader( unis, vert, frag );\r\n      //unisObj.blur();\r\n      vertObj.blur();\r\n      fragObj.blur();\r\n\r\n\r\n      // -- -- --\r\n\r\n      tmpThis.guiManager.pxlNavCanvas.focus();\r\n    });\r\n      \r\n    this.children.vertObj.onfocus=(e)=>{ tmpThis.focusShaderMessage(e,'vertObj'); };\r\n    this.children.vertObj.onkeydown=(e)=>{ tmpThis.keyShaderMessage(e); };\r\n    this.children.vertObj.onmousedown=(e)=>{ tmpThis.mDownShaderMessage(e); };\r\n    this.children.vertObj.onclick=(e)=>{ tmpThis.clickShaderMessage(e); };\r\n    this.children.vertObj.ondblclick=(e)=>{ tmpThis.dblclickShaderMessage(e); };\r\n    this.children.fragObj.onfocus=(e)=>{ tmpThis.focusShaderMessage(e,'fragObj'); };\r\n    this.children.fragObj.onkeydown=(e)=>{ tmpThis.keyShaderMessage(e); };\r\n    this.children.fragObj.onmousedown=(e)=>{ tmpThis.mDownShaderMessage(e); };\r\n    this.children.fragObj.onclick=(e)=>{ tmpThis.clickShaderMessage(e); };\r\n    this.children.fragObj.ondblclick=(e)=>{ tmpThis.dblclickShaderMessage(e); };\r\n    this.mouseX=0;\r\n    this.mouseY=0;\r\n    this.prevSelectStart=0;\r\n    this.prevSelectEnd=0;\r\n  }\r\n\r\n\r\n\r\n  // -- -- -- -- -- -- -- -- --\r\n  // -- GUI Change Functions -- --\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n  shiftFontSize(inc){\r\n    let shaderEditor = document.getElementById(\"gui_shaderEditorParent\");\r\n    if( !shaderEditor ){\r\n      return;\r\n    }\r\n    let hasStyleStore = shaderEditor.hasAttribute(\"styleStore\");\r\n    if( !hasStyleStore ){\r\n      shaderEditor.setAttribute(\"styleStore\", 1.0);\r\n    }\r\n    let curSize = parseFloat( shaderEditor.getAttribute(\"styleStore\") );\r\n    let newSize = curSize + inc;\r\n    shaderEditor.setAttribute(\"styleStore\", newSize);\r\n    shaderEditor.style.fontSize = newSize + \"em\";\r\n    \r\n    let unisObj=document.getElementById(\"shaderEditor_uniformInput\");\r\n    if( unisObj ){\r\n      unisObj.style.fontSize = newSize + \"em\";\r\n    }\r\n    let vertObj=document.getElementById(\"shaderEditor_vertInput\");\r\n    if( vertObj ){\r\n      vertObj.style.fontSize = newSize + \"em\";\r\n    }\r\n    let fragObj=document.getElementById(\"shaderEditor_fragInput\");\r\n    if( fragObj ){\r\n      fragObj.style.fontSize = newSize + \"em\";\r\n    }\r\n    setTimeout( ()=>{\r\n      this.resizeShaderElements();\r\n    }, 130);\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n\r\n  updateHeaderBar(){\r\n    if( this.isEditing ){\r\n      this.children.titleParentObj.style.fontSize=\"2.05em\";\r\n      this.children.titleObj.style.fontSize=\"1.15em\";\r\n    }else{\r\n      this.children.titleParentObj.style.fontSize=\"1.3em\";\r\n      this.children.titleObj.style.fontSize=\"1em\";\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // -- -- -- -- -- -- --\r\n  // -- Click Events - -- --\r\n  // -- -- -- -- -- -- -- -- --\r\n\r\n  mDownShaderMessage(e){\r\n    this.mouseX=e.x;\r\n    this.mouseY=e.y;\r\n  }\r\n  clickShaderMessage(e){\r\n    if( !this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].dcActive ){\r\n      // ## Not sure why this was needed, but must have been a patch for some jankie antibody gui works\r\n      let dx=Math.abs( this.mouseX-e.x );\r\n      let dy=Math.abs( this.mouseY-e.y );\r\n      let desel=Math.max( dx,dy )<5;\r\n      if(desel){\r\n        let textObj=e.target;\r\n        let posStart=textObj.selectionStart;\r\n        let posEnd=textObj.selectionEnd;\r\n        let pos=parseInt( (posStart+posEnd)*.5 );\r\n        if(posStart!=posEnd){\r\n          this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].prevSelectStart=posStart;\r\n          this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].prevSelectEnd=posEnd;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  dblclickShaderMessage(e){\r\n    let start=this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].prevSelectStart;\r\n    let end=this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].prevSelectEnd;\r\n    let textObj=e.target;\r\n    \r\n    let posStart=textObj.selectionStart;\r\n    let posEnd=textObj.selectionEnd; \r\n    let textValue=textObj.value;\r\n    let selectStr=textValue.substring(start, end+20 );\r\n    let selectMatcher=selectStr.match(/[a-zA-Z0-9\\.\\_\\[\\]]+/);\r\n    if( selectMatcher && !selectStr[0].match(/\\n/)){\r\n      end = start+selectMatcher[0].length;\r\n    }\r\n    textObj.setSelectionRange( start, end );\r\n    \r\n    // Prevent deselection of a whole line by triple clicking\r\n    this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].dcActive=true;\r\n    setTimeout( ()=>{\r\n      this.pxlEnv.pxlGuiDraws.guiWindows[\"shaderGui\"].dcActive=false;\r\n    },500);\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- --\r\n  // -- -- -- -- -- -- -- -- -- --\r\n  // -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n\r\n  // -- -- -- -- -- -- -- -- --\r\n  // -- Key Press Processing -- --\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n  keyShaderMessage(e){\r\n    // Avoid held down keys\r\n    if( e.repeat){ return false; }\r\n\r\n    let keyHit=e.key;\r\n    let keyCode=e.code;\r\n\r\n    let shift=e.shiftKey;\r\n    let ctrl=e.ctrlKey;\r\n    let alt=e.altKey;\r\n    let numPad=keyCode.includes(\"Numpad\");\r\n    let breaker = keyHit == \"Enter\" || keyHit == \"Tab\" || ( keyCode==\"KeyD\" && ctrl ) || ( keyCode==\"KeyK\" && ctrl ) || ( numPad && ctrl ) || ( keyCode.includes(\"Arrow\") && ctrl);\r\n    if( !breaker ){ return false; }\r\n    \r\n    e.preventDefault();\r\n\r\n    let textObj=e.target;\r\n    \r\n    if( keyCode==\"NumpadAdd\" ){\r\n      let cs=window.getComputedStyle(textObj);\r\n      let csSize=parseFloat(cs.fontSize) + 2;\r\n      textObj.style.fontSize = csSize;\r\n      return false;\r\n    }\r\n    if( keyCode == \"NumpadSubtract\" ){\r\n      let cs=window.getComputedStyle(textObj);\r\n      let csSize=parseFloat(cs.fontSize) - 2;\r\n      textObj.style.fontSize = csSize;\r\n      return false;\r\n    }\r\n\r\n    let posStart=textObj.selectionStart;\r\n    let posEnd=textObj.selectionEnd; \r\n\r\n    let textValue=textObj.value;\r\n    if( keyCode.includes(\"Arrow\") ){\r\n      if( posStart == posEnd ){\r\n        return false;\r\n      }\r\n      let searchStr=textValue.substring(posStart, posEnd );\r\n      let reg, searchBin, cpos;\r\n      if( keyCode==\"ArrowUp\" ){\r\n        searchBin=textValue.substring( 0, posStart );\r\n        posStart=searchBin.search( /.*$/ );\r\n\r\n\r\n        keyCode=\"ArrowLeft\";\r\n      }else if( keyCode==\"ArrowDown\" ){\r\n        searchBin=textValue.substring( posEnd, textValue.length );\r\n        posEnd=searchBin.search( /\\n/ ) + posEnd;\r\n\r\n        keyCode=\"ArrowRight\";\r\n      }\r\n\r\n      if( keyCode==\"ArrowLeft\" ){\r\n        reg=new RegExp(searchStr+\".*\",'gm');\r\n        searchBin=textValue.substring( 0, posStart );\r\n\r\n        let mLineMatches= [...searchBin.matchAll( searchStr, \"g\" )];\r\n\r\n        if( mLineMatches.length == 0){\r\n          mLineMatches= [...textValue.matchAll( searchStr, \"g\" )];\r\n\r\n          if( mLineMatches.length == 0){\r\n            return false;\r\n          }\r\n        }\r\n        cpos=mLineMatches.pop().index;\r\n      }\r\n      if( keyCode==\"ArrowRight\" ){\r\n        reg=new RegExp(searchStr,'m');\r\n        searchBin=textValue.substring( posEnd, textValue.length );\r\n\r\n        let searchPos= reg.exec( searchBin );\r\n\r\n        if( !searchPos ){\r\n          searchPos= reg.exec( textValue );\r\n\r\n          if( !searchPos ){\r\n            return false;\r\n          }\r\n          cpos=searchPos.index;\r\n        }else{\r\n          cpos=searchPos.index + posEnd;\r\n        }\r\n      }\r\n      \r\n      if(cpos>-1){\r\n        let cposEnd=cpos+searchStr.length;\r\n        textObj.setSelectionRange( cpos, cposEnd );\r\n\r\n        // Auto scroll to location of selection\r\n        let taRect=textObj.getBoundingClientRect();\r\n        let cs=window.getComputedStyle(textObj);\r\n        let csFont=cs.font;\r\n        let taSplitter=[textValue.slice(0,cpos),\"<span id='tmpShaderPosition'>.</span>\",textValue.slice(cpos)].join(\"\");\r\n        taSplitter=taSplitter.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br>\");\r\n        let tmpDiv=document.createElement(\"div\");\r\n        tmpDiv.style.position=\"fixed\";\r\n        tmpDiv.style.width=taRect.width;\r\n        tmpDiv.style.height=taRect.height;\r\n        tmpDiv.style.overflowY=\"scroll\";\r\n        tmpDiv.style.font=csFont;\r\n        tmpDiv.innerHTML=taSplitter;\r\n        document.body.appendChild( tmpDiv );\r\n        let tmpSpan=tmpDiv.querySelector( \"#tmpShaderPosition\" );\r\n        let spanOffsetTop=tmpSpan.offsetTop-200;\r\n        document.body.removeChild( tmpDiv );\r\n        textObj.scrollTo(0, spanOffsetTop);\r\n      }\r\n\r\n      return false;\r\n    }\r\n    \r\n\r\n    if( keyHit==\"Enter\" && ctrl){\r\n      this.children.updateObj.click();\r\n      textObj.focus();\r\n      textObj.setSelectionRange( posStart, posEnd );\r\n      return false;\r\n    }\r\n\r\n\r\n    if(numPad){\r\n      let curSel=textValue.substring( posStart, posEnd );\r\n      let repStr=curSel;\r\n      let hasSel=repStr.length > 0;\r\n      let preBuffer=textValue.substr( posStart-1,1);\r\n\r\n      preBuffer = /[\\w|\\d]/.test(preBuffer) && repStr.length==0 ? \" \" : \"\"; // Add a space if need be\r\n      let postBuffer=textValue.substr( posEnd+1,1);\r\n      postBuffer = /[\\w|\\d]/.test(postBuffer) && repStr.length==0 ? \" \" : \"\"; // Add a space if need be\r\n\r\n      let postPos=posStart+preBuffer.length;\r\n      if( keyCode==\"Numpad1\" ){\r\n        let vType= \"float(\";\r\n        postPos+=vType.length;\r\n        repStr= hasSel ? repStr : \".0\" ;\r\n        repStr= vType+repStr+\")\";\r\n      }else if( keyCode==\"Numpad2\" ){\r\n        let vType= \"vec2(\";\r\n        postPos+=vType.length;\r\n        repStr= hasSel ? repStr : \".0, .0\" ;\r\n        repStr= vType+repStr+\")\";\r\n      }else if( keyCode==\"Numpad3\" ){\r\n        let vType= \"vec3(\";\r\n        postPos+=vType.length;\r\n        repStr= hasSel ? repStr : \".0, .0, .0\" ;\r\n        repStr= vType+repStr+\")\";\r\n      }\r\n      repStr= preBuffer+repStr+postBuffer;\r\n      document.execCommand(\"insertText\", false, repStr);\r\n      // No undo added--\r\n      //textObj.setRangeText(repStr, textObj.selectionStart, textObj.selectionEnd, \"end\");\r\n      \r\n      if( !hasSel ){\r\n        textObj.setSelectionRange( postPos, postPos );\r\n      }\r\n\r\n      return false;\r\n    }\r\n    \r\n    let curPos=Math.min(posStart,posEnd);\r\n    let prevValues=textValue.substr(0, curPos );\r\n    if( keyCode==\"KeyK\" ){\r\n      let searchSelection=false;\r\n      let runMult=false;\r\n      let cList=[];\r\n\r\n      let newStart,origEnd,selection;\r\n      if( posStart != posEnd ){\r\n        newStart=prevValues.search( /.*$/ );\r\n        origEnd=posEnd;\r\n        selection=textValue.substring(newStart, posEnd );\r\n        searchSelection=/\\n/.test(selection); // Multi Line Check\r\n      }\r\n\r\n      if( !searchSelection){\r\n        let strPos=prevValues.search( /[\\S\\w].*$/ );\r\n        let forward=false;\r\n        if( strPos == -1 ){ // Ugh...\r\n          let futureValues=textValue.substring(curPos, textValue.length );\r\n\r\n          strPos=futureValues.search( /(?:[^\\s])/ );\r\n\r\n          if( strPos == -1 ){ return false; }\r\n\r\n          strPos+=curPos;\r\n          forward=true;\r\n        }\r\n\r\n        let cStart=strPos;\r\n        let cEnd= cStart;\r\n        let cText= \"\";\r\n        if( shift ){\r\n          cEnd+=2;\r\n          let ss=textValue.substr( cStart, 2 );\r\n\r\n          if(ss!=\"//\"){\r\n            return false;\r\n          }\r\n          posStart-=2;\r\n          posEnd-=2;\r\n        }else{\r\n          let ss=textValue.substr( cStart, 2 );\r\n\r\n          if(ss==\"//\"){\r\n            return false;\r\n          }\r\n          cText=\"//\";\r\n          posStart+=2;\r\n          posEnd+=2;\r\n        }\r\n        textObj.setSelectionRange( cStart, cEnd );\r\n        document.execCommand(\"insertText\", false, cText);\r\n        textObj.setSelectionRange( posStart, posEnd );\r\n\r\n        return false;\r\n      }\r\n\r\n      if( searchSelection ){\r\n        // Multi line selections where the last line has no selected text\r\n        //   Find the text and add to range\r\n        let futureValues=textValue.substring(origEnd, textValue.length );\r\n        let newEnd=origEnd+futureValues.search( /\\n./ );\r\n        let selection=textValue.substring(newStart, newEnd );\r\n\r\n        let selPush=shift ? -2 : 2;\r\n        let mLineMatches= [...selection.matchAll( /[\\S\\w].*/g )];\r\n        let insertList=[];\r\n        let refStart=posStart-newStart;\r\n        let refEnd=origEnd-newStart;\r\n\r\n        mLineMatches.forEach( (m)=>{\r\n          let mid=m.index;\r\n          insertList.push( mid );\r\n        });\r\n        insertList=insertList.reverse(); // Edit text from back to begining\r\n        insertList.forEach( (mid) => {\r\n          let ss=selection.substr( mid, 2 );\r\n          if(shift){\r\n            if(ss!=\"//\"){\r\n              return;\r\n            }\r\n\r\n            selection=selection.substring(0,mid)+selection.substring(mid+2,selection.length);\r\n          }else{\r\n            if(ss==\"//\"){\r\n              return;\r\n            }\r\n            selection=selection.substring(0,mid)+\"//\"+selection.substring(mid,selection.length);\r\n          }\r\n          posStart+= mid<refStart ? selPush : 0;\r\n          posEnd+= mid<refEnd ? selPush : 0;\r\n        });\r\n\r\n        textObj.setSelectionRange( newStart, newEnd );\r\n        document.execCommand(\"insertText\", false, selection);\r\n        textObj.setSelectionRange( posStart, posEnd );\r\n        return false;\r\n      }\r\n      return false;\r\n    }\r\n\r\n\r\n    let prevValuesList=prevValues.split(\"\\n\");\r\n\r\n    if( keyHit==\"Enter\" || keyHit==\"Tab\" ){\r\n      let curLine=prevValuesList.pop();\r\n      if( curLine.length == 0){\r\n        curLine=prevValuesList.pop();\r\n      }\r\n      let spacer=curLine.replace(/[\\S\\w].*$/g, \"\");\r\n      if(keyHit == \"Tab\"){\r\n        spacer=spacer.length==0 ? \" \" : spacer.substr(0,1);\r\n        if(spacer === \" \"){\r\n          spacer=\"  \";\r\n        }else{\r\n          spacer=\"\\t\";\r\n        }\r\n      }else{\r\n        spacer=\"\\n\"+spacer;\r\n      }\r\n      \r\n      let inText=spacer;\r\n      let cPosStart=posStart;\r\n      let cPosEnd=posEnd;\r\n      if( keyHit==\"Tab\" && posStart!=posEnd ){\r\n        let curSel=textValue.substring( posStart, posEnd );\r\n        curSel=curSel.split(\"\\n\");\r\n        if( shift ){\r\n          curSel=curSel.map( (s)=>{ return s==\"\" ? s : s.replace(spacer, \"\")});\r\n        }else{\r\n          curSel=curSel.map( (s)=>{ return s==\"\" ? s : spacer+s});\r\n        }\r\n        inText=curSel.join(\"\\n\");\r\n        cPosEnd=cPosStart + inText.length;\r\n      }else{\r\n        cPosStart=cPosStart + inText.length;\r\n        cPosEnd=cPosStart;\r\n      }\r\n      document.execCommand(\"insertText\", false, inText);\r\n      textObj.setSelectionRange( cPosStart, cPosEnd );\r\n      return false;\r\n    }\r\n\r\n\t\tif(keyCode==\"KeyD\" && ctrl){\r\n      if( posStart == posEnd ){\r\n        let textValueArray= textValue.split( \"\\n\" );\r\n        prevValuesList.pop()\r\n        let prevCount=prevValuesList.length; \r\n        let curLine=textValueArray[ prevCount ];\r\n        // ## Kind of a stupid way to find selection locations\r\n        //    What ever, it works\r\n        let retArr=[...prevValuesList, curLine];\r\n        let retString=retArr.join(\"\\n\");\r\n        let cursorPos=retString.length;\r\n        curLine=\"\\n\" + curLine ;\r\n        textObj.setSelectionRange(cursorPos, cursorPos);\r\n        document.execCommand(\"insertText\", false, curLine);\r\n\r\n        cursorPos=curPos+curLine.length;\r\n        textObj.setSelectionRange(cursorPos, cursorPos);\r\n      }else{\r\n        let selection=textValue.substring( posStart, posEnd );\r\n        textObj.setSelectionRange(posEnd, posEnd);\r\n        document.execCommand(\"insertText\", false, selection);\r\n        posEnd+=selection.length;\r\n        textObj.setSelectionRange(posEnd, posEnd);\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  //\r\n\r\n  updateShaderList(){\r\n    let pulldown=this.children.shaderSelect;\r\n    if( !pulldown ){\r\n      console.log(\"No Object shader pulldown found.\");\r\n      console.log(this.gui);\r\n      return;\r\n    }\r\n    let editables= this.pxlEnv.roomSceneList[ this.pxlEnv.currentRoom ].getShaderList();\r\n\r\n    let keys=Object.keys( editables );\r\n    let html=\"\";\r\n    let getSelected=this.pxlEnv.roomSceneList[ this.pxlEnv.currentRoom ].getCurrentShader()\r\n    keys.forEach( (k)=>{\r\n      let sel= k==getSelected ? \" selected\" : \"\";\r\n      html+=`<option value=\"${k}\" ${sel}>${editables[k]}</option>`;\r\n    });\r\n    pulldown.innerHTML=html;\r\n    \r\n  }\r\n  \r\n\r\n  // -- -- -- -- -- -- -- -- --\r\n  // -- -- -- -- -- -- -- -- --\r\n  // -- -- -- -- -- -- -- -- --\r\n\r\n\r\n\r\n  // -- -- -- -- -- -- -- -- --\r\n  // -- Resizing Functions - -- --\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n  resize( e ){\r\n    this.resizeShaderElements();\r\n  }\r\n\r\n  resizeShaderElements(){\r\n\t\tlet bBarHeight= 0;\r\n\t\tif(this.hudBottomBar){\r\n\t\t\tbBarHeight = this.hudBottomBar.offsetHeight\r\n\t\t}\r\n\t\tif(this.children.headerBar){\r\n\t\t\tbBarHeight += this.children.headerBar.offsetHeight\r\n\t\t}\r\n\r\n\t\tif( this.gui ){\r\n\t\t\tthis.gui.style.height = window.innerHeight-bBarHeight;\r\n\r\n\t\t\tlet vertTextTop = this.children.vertObj.getBoundingClientRect().top;\r\n\t\t\tlet bHeight = this.children.updateObj.getBoundingClientRect().height;\r\n\t\t\tbHeight += 40;\r\n\t\t\tlet pHeight = window.innerHeight - bHeight - vertTextTop;\r\n\t\t\t\r\n\t\t\tthis.children.vertObj.style.maxHeight=pHeight*.4+\"px\";\r\n\t\t\tthis.children.vertObj.displayHeight=pHeight*.4;\r\n\t\t\tthis.children.fragObj.style.maxHeight=pHeight*.6+\"px\";\r\n\t\t\tthis.children.fragObj.displayHeight=pHeight*.6;\r\n\t\t\tthis.children.fieldBodyHeight=pHeight;\r\n\t\t}\r\n  }\r\n\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n  // -- Editor Side Bar Visibility Functions - -- --\r\n  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n  toggleShaderEditor( active=null ){\r\n\t\tif( !this.gui ){\r\n\t\t\tthis.buildShaderEditor();\r\n\t\t}\r\n\t\t\r\n\t\tthis.updateShaderList();\r\n\t\tthis.updateShaderTextFields( this.children.shaderSelect.value);\r\n\t\t\r\n\t\tactive= active==null ? !this.active : active;\r\n\t\tthis.active=active;\r\n\t\tthis.guiManager.promptFader( this.gui, active );\r\n\t\tthis.guiManager.promptFader( this.helpGui, active );\r\n\r\n    this.pxlEnv.emit( \"shaderEditorVis\", active );\r\n\r\n\t\tif(active){\r\n\t\t\tthis.guiManager.pxlNavCanvas.addEventListener(\"mousedown\", this.blurShaderEditor.bind(this));\r\n\t\t}else{\r\n\t\t\tthis.guiManager.pxlNavCanvas.removeEventListener(\"mousedown\", this.blurShaderEditor.bind(this));\r\n\t\t}\r\n\t\t\r\n    setTimeout( ()=>{\r\n      this.resizeShaderElements();\r\n    }, 130);\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  blurShaderEditor(){\r\n    this.isEditing=false;\r\n\r\n    document.activeElement.blur()\r\n    let fieldParent=document.getElementById(\"guiShaderEditorBlock\");\r\n    fieldParent.style.maxWidth = this.editorWidthMinMax['min']+\"vw\";\r\n\r\n    let helpDiv=document.getElementById(\"gui_shaderHelpBlock\");\r\n    if(helpDiv){\r\n      helpDiv.style.left = \"max(\"+this.editorWidthMinMax['min']+\"vw, 430px)\";\r\n    }\r\n    \r\n    let curPulldown = document.getElementById(\"shaderEditor_loadShader\");\r\n    if( curPulldown ){\r\n      curPulldown.style.maxWidth=\"85px\";\r\n    }\r\n\r\n\r\n    this.disconnectFocusListener();\r\n\r\n    this.updateHeaderBar( );\r\n\r\n    setTimeout( ()=>{\r\n      this.resizeShaderElements();\r\n    },130);\r\n  }\r\n  \r\n  // -- -- --\r\n\t\r\n  focusShaderMessage(e,area){\r\n    this.isEditing=true;\r\n\r\n    let guiWindow=this.children;\r\n    \r\n    let vertSize = guiWindow.vertObj.displayHeight;\r\n    let fragSize = guiWindow.fragObj.displayHeight;\r\n    // TODO : Upgrade to CSS restrictions\r\n    let minSize = Math.max(150, window.innerHeight * .135);\r\n    let sizeShift= guiWindow.fieldBodyHeight-minSize;\r\n    \r\n    vertSize= area==\"vertObj\" ? sizeShift : minSize;\r\n    fragSize= area==\"fragObj\" ? sizeShift : minSize;\r\n    guiWindow.vertObj.style.maxHeight=vertSize+\"px\";\r\n    guiWindow.fragObj.style.maxHeight=fragSize+\"px\";\r\n    \r\n    let fieldParent=document.getElementById(\"gui_shaderEditorParent\");\r\n    this.gui.style.maxWidth = this.editorWidthMinMax['max']+\"vw\";\r\n    \r\n    if( this.children?.shaderSelect ){\r\n      this.children.shaderSelect.style.maxWidth=\"225px\";\r\n    }\r\n\r\n    let helpDiv=document.getElementById(\"gui_shaderHelpBlock\");\r\n    if(helpDiv){\r\n      helpDiv.style.left = this.editorWidthMinMax['max']+\"vw\";\r\n    }\r\n\r\n    this.connectFocusListener();\r\n\r\n    this.updateHeaderBar();\r\n\r\n    \r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  clickThroughCheck( e ){\r\n    let clickX = e.x;\r\n    let clickY = e.y;\r\n\r\n    let clickTargetStack = document.elementsFromPoint( clickX, clickY );\r\n    \r\n    // Check if the user clicked on the shader editor\r\n    //   But with DOM elements over the top of it in z-index\r\n    for( let x=0; x<clickTargetStack.length; ++x ){\r\n      let curObj = clickTargetStack[x];\r\n      if( curObj.id == \"gui_shaderEditorParent\" ){\r\n        return;\r\n      }\r\n    }\r\n\r\n    // User didn't click on the shader editor\r\n    this.blurShaderEditor();\r\n\r\n  }\r\n\r\n  connectFocusListener(){\r\n    document.addEventListener(\"mousedown\", this.clickThroughListener);\r\n  }\r\n  disconnectFocusListener(){\r\n    document.removeEventListener(\"mousedown\", this.clickThroughListener);\r\n  }\r\n\r\n}","// HUD Element Base Class\r\n//   Written by Kevin Edzenga, 2025\r\n// -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n//\r\n\r\nimport { HUD_DRAW, HUD_ELEMENT } from \"../../core/Enums.js\";\r\n\r\nexport class ElementBase{\r\n  constructor( name=\"hudRegion\", data = {} ){\r\n    this.name = name;\r\n    this.object = null; // DOM Object\r\n    this.type = HUD_ELEMENT.REGION;\r\n\r\n    this.pxlOptions = null;\r\n    this.pxlEnums = null;\r\n    this.pxlDevice = null;\r\n\r\n    this.touchId = -1;\r\n    this.isDown = false;\r\n    this.isDragging = false;\r\n\r\n    this.dragCount = 0;\r\n    this.dragThreshold = 10;\r\n\r\n    this.startPos = null;\r\n    this.currentPos = null;\r\n    this.previousPos = null;\r\n    this.startDelta = {\r\n      'x':0,\r\n      'y':0\r\n    };\r\n\r\n    this.stepDelta = {\r\n      'x':0,\r\n      'y':0\r\n    };\r\n\r\n    // -- -- --\r\n\r\n    this.defaultObject = {\r\n      'pos' : {\r\n        'x' : 0,\r\n        'y' : 0,\r\n      },\r\n      'bbox' : {\r\n        'width' : 0,\r\n        'height' : 0,\r\n      },\r\n      'draw' : HUD_DRAW.DEFAULT,\r\n      'style' : [],\r\n      'objectStyles' : [],\r\n      'objectStyleKeys' : [],\r\n    };\r\n\r\n    this.defaultObjectStyleEntry = {\r\n      'object': 'parent',\r\n      'base': ['pxlNav-hudElement-thumbstick-default'],\r\n      'hover': ['pxlNav-hudElement-thumbstick-hover'],\r\n      'active': ['pxlNav-hudElement-thumbstick-active']\r\n    }\r\n\r\n    if( typeof data !== 'object' ){\r\n      data = {};\r\n    }\r\n    data = Object.assign( this.defaultObject, data );\r\n\r\n    // Parse object override style keys\r\n    //   Make for easier lookup into the objectStyles [{},{},...]\r\n    if( data.objectStyles.length > 0 ){\r\n      data.objectStyles.forEach(( style )=>{\r\n        data.objectStyleKeys.push( style.object );\r\n      });\r\n    }\r\n\r\n    this.data = data;\r\n\r\n    // -- -- --\r\n\r\n    this.callbacks = [];\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlOptions = pxlNav.pxlOptions;\r\n    this.pxlEnums = pxlNav.pxlEnums\r\n    this.pxlDevice = pxlNav.pxlDevice;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  build(){\r\n    let emptyObj = this.createMainElement();\r\n    emptyObj.classList.add('pxlNav-hudElement-region');\r\n    this.object = emptyObj;\r\n\r\n    this.object.ontouchstart = this.ontouchstart.bind( this );\r\n    this.object.ontouchend = this.ontouchend.bind( this );\r\n\r\n    return emptyObj;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Build generic parent object for HUD Element\r\n  createMainElement(){\r\n    let emptyObj = document.createElement('div');\r\n    if( this.data.hasOwnProperty('id') ){\r\n      emptyObj.id = this.data.id;\r\n    }\r\n    if( this.data.hasOwnProperty('style') ){\r\n      this.data.style.forEach( style => {\r\n        emptyObj.classList.add( style );\r\n      });\r\n    }\r\n    this.object = emptyObj;\r\n    return emptyObj;\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  ontouchstart( e ){\r\n    this.emit( true );\r\n  }\r\n\r\n  ontouchmove( e ){}\r\n\r\n  ontouchend( e ){\r\n    this.emit( false );\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  updateStyle(){}\r\n  \r\n  // -- -- --\r\n\r\n  subscribe( callbackFn ){\r\n    this.callbacks.push( callbackFn );\r\n  }\r\n\r\n  emit( data ){\r\n    this.callbacks.forEach( function( fn ){\r\n      fn( data );\r\n    });\r\n  }\r\n}","// HUD Element Base Class\r\n//   Written by Kevin Edzenga, 2025\r\n// -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n//\r\n\r\nimport { ElementBase } from './elementBase.js';\r\nimport { HUD_DRAW, HUD_ELEMENT } from \"../../core/Enums.js\";\r\n\r\nexport class DragRegion extends ElementBase{\r\n  constructor( name=\"hudDrawRegion\", data = {} ){\r\n    super( name, data );\r\n\r\n    this.type = HUD_ELEMENT.DRAG_REGION;\r\n\r\n    this.dragThreshold = 10;\r\n\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  build(){\r\n    let dragEmptyObj = this.createMainElement();\r\n    dragEmptyObj.classList.add('pxlNav-hudElement-dragRegion');\r\n    return dragEmptyObj;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  ontouchstart( e ){}\r\n\r\n  ontouchmove( e ){}\r\n\r\n  ontouchend( e ){}\r\n  \r\n}","// Thumbstick interface for the PxlNav GUI\r\n//   Written by Kevin Edzenga, 2025\r\n// -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n\r\nimport { ElementBase } from './elementBase.js';\r\nimport { HUD_ACTION, HUD_ELEMENT } from \"../../core/Enums.js\";\r\n\r\nexport class Thumbstick extends ElementBase{\r\n  constructor( name, data = {} ){\r\n    super( name, data );\r\n\r\n    this.type = HUD_ELEMENT.THUMBSTICK;\r\n    \r\n    this.block = null;\r\n    this.currentState = HUD_ACTION.NONE;\r\n    this.innerObj = null;\r\n    this.blockStyleOverrides = null;\r\n    this.parentStyleOverrides = null;\r\n    this.innerStyleOverrides = null;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  build(){\r\n    let blockObj = this.createMainElement();\r\n    blockObj.classList.add('pxlNav-hudElement-thumbstick-block');\r\n\r\n    let parentObj = document.createElement('div');\r\n    parentObj.classList.add('pxlNav-hudElement-thumbstick');\r\n    blockObj.appendChild( parentObj );\r\n\r\n    let innerObj = document.createElement('div');\r\n    innerObj.classList.add('pxlNav-hudElement-thumbstick-inner');\r\n    parentObj.appendChild( innerObj );\r\n\r\n    // -- -- --\r\n\r\n    blockObj.ontouchstart = this.ontouchstart.bind( this );\r\n    blockObj.ontouchmove = this.ontouchmove.bind( this );\r\n    blockObj.ontouchend = this.ontouchend.bind( this );\r\n\r\n    // -- -- --\r\n    \r\n    this.block = blockObj;\r\n    this.object = parentObj;\r\n    this.innerObj = innerObj;\r\n    \r\n    // -- -- --\r\n\r\n    if( this.data.hasOwnProperty('objectStyleKeys') && this.data.objectStyleKeys.length > 0 ){\r\n      let blockIndex = this.data.objectStyleKeys.indexOf('block');\r\n      let parentIndex = this.data.objectStyleKeys.indexOf('parent');\r\n      let innerIndex = this.data.objectStyleKeys.indexOf('inner');\r\n\r\n      if( blockIndex >= 0 ){\r\n        this.blockStyleOverrides = this.data.objectStyles[ blockIndex ];\r\n        this.blockStyleOverrides[ 'currentAction' ] = this.pxlEnums.HUD_ACTION.NONE;\r\n        this.blockStyleOverrides[ this.pxlEnums.HUD_ACTION.NONE ].forEach(( s )=>{\r\n          blockObj.classList.add( s );\r\n        });\r\n      }\r\n\r\n      if( parentIndex >= 0 ){\r\n        this.parentStyleOverrides = this.data.objectStyles[ parentIndex ];\r\n        this.parentStyleOverrides[ 'currentAction' ] = this.pxlEnums.HUD_ACTION.NONE;\r\n        this.parentStyleOverrides[ this.pxlEnums.HUD_ACTION.NONE ].forEach(( s )=>{\r\n          parentObj.classList.add( s );\r\n        });\r\n      }\r\n\r\n      if( innerIndex >= 0 ){\r\n        this.innerStyleOverrides = this.data.objectStyles[ innerIndex ];\r\n        this.innerStyleOverrides[ 'currentAction' ] = this.pxlEnums.HUD_ACTION.NONE;\r\n        this.innerStyleOverrides[ this.pxlEnums.HUD_ACTION.NONE ].forEach(( s )=>{\r\n          innerObj.classList.add( s );\r\n        });\r\n      }\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    return blockObj;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Check multiple touch points targets, if target is thumbstick, return target touch info\r\n  getTouchId( e ){\r\n    if( !e.touches || e.touches.length < 1 ){\r\n      return -1;\r\n    }\r\n    if( e.touches.length == 1 ){\r\n      return e.touches[0].identifier;\r\n    }\r\n      \r\n    let retId = null;\r\n    for( let x=0; x<e.touches.length; ++x ){\r\n      let curTouch = e.touches[x];\r\n      if( curTouch.target == this.block ){\r\n        retId = curTouch.identifier;\r\n        break;\r\n      }\r\n    }\r\n    return retId;\r\n  }\r\n\r\n  getTouchInfo( e ){\r\n    if( this.touchId == -1 || !e.touches || e.touches.length < 1 ){\r\n      return null;\r\n    }\r\n    let touchInfo = null;\r\n    for( let x=0; x<e.touches.length; ++x ){\r\n      if( e.touches[x].identifier === this.touchId ){\r\n        touchInfo = e.touches[x];\r\n        break;\r\n      }\r\n    }\r\n    return touchInfo;\r\n  }\r\n      \r\n\r\n\r\n  // -- -- --\r\n\r\n  ontouchstart( e ){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    this.isDown = true;\r\n    this.isDragging = false;\r\n    this.dragCount = -1;\r\n\r\n    this.touchId = this.getTouchId( e );\r\n    let touchInfo = this.getTouchInfo( e );\r\n    if( !touchInfo ){\r\n      return;\r\n    }\r\n\r\n    this.startPos = {\r\n      'x': touchInfo.clientX,\r\n      'y': touchInfo.clientY\r\n    };\r\n\r\n    this.updateStyle();\r\n  }\r\n\r\n  ontouchmove( e ){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if( this.isDown ){\r\n      this.dragCount++;\r\n\r\n      if( !this.isDragging ){\r\n        if( Math.abs( this.startDelta.x ) > this.pxlOptions.userSettings.deadZone.touch || Math.abs( this.startDelta.y ) > this.pxlOptions.userSettings.deadZone.touch ){\r\n          this.isDragging = true;\r\n        }\r\n      }\r\n\r\n      let touchInfo = this.getTouchInfo( e );\r\n      if( !touchInfo ){\r\n        return;\r\n      }\r\n\r\n      let tempX = this.currentPos?.x || touchInfo.clientX;\r\n      let tempY = this.currentPos?.y || touchInfo.clientY;\r\n\r\n      this.previousPos = {\r\n        'x': tempX,\r\n        'y': tempY\r\n      }\r\n\r\n      this.currentPos = {\r\n        'x': touchInfo.clientX,\r\n        'y': touchInfo.clientY\r\n      };\r\n\r\n      \r\n      this.startDelta = {\r\n        'x': this.currentPos.x - this.startPos.x,\r\n        'y': this.currentPos.y - this.startPos.y \r\n      };\r\n\r\n      this.stepDelta = {\r\n        'x': this.currentPos.x - this.previousPos.x,\r\n        'y': this.currentPos.y - this.previousPos.y \r\n      };\r\n\r\n      this.emit( {\r\n        'startPos' : this.startPos,\r\n        'previousPos' : this.previousPos,\r\n        'currentPos' : this.currentPos,\r\n        'startDelta' : this.startDelta,\r\n        'stepDelta' : this.stepDelta,\r\n        'dragCount' : this.dragCount,\r\n        'status' : true\r\n      });\r\n\r\n      this.updateStyle();\r\n    }\r\n  }\r\n\r\n  ontouchend( e ){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    this.emit( {\r\n      'startPos' : this.startPos,\r\n      'previousPos' : this.previousPos,\r\n      'currentPos' : Object.assign( {}, this.currentPos ),\r\n      'startDelta' : this.startDelta,\r\n      'stepDelta' : this.stepDelta,\r\n      'dragCount' : this.dragCount,\r\n      'status' : false\r\n    });\r\n\r\n    this.touchId = -1;\r\n    this.isDown = false;\r\n    this.isDragging = false;\r\n    this.dragCount = -1;\r\n    this.currentPos = null;\r\n    this.startPos = null;\r\n    this.prevPos = null;\r\n    \r\n\r\n    this.updateStyle();\r\n\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  updateStyle(){\r\n    if( !this.innerObj || !this.object ){\r\n      return;\r\n    }\r\n    \r\n    if( this.isDown && !this.isDragging ){\r\n\r\n      // \r\n      if( this.blockStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.HOVER, this.blockStyleOverrides );\r\n      }\r\n\r\n      if( this.parentStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.HOVER, this.parentStyleOverrides );\r\n      }\r\n\r\n      if( this.innerStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.HOVER, this.innerStyleOverrides );\r\n      }\r\n\r\n      // Touch is down; dragCount < dragThreshold\r\n      this.innerObj.style.left = 0 + 'px';\r\n      this.innerObj.style.top = 0 + 'px';\r\n\r\n      this.currentState = HUD_ACTION.HOVER;\r\n\r\n\r\n    }else if( this.isDragging ){\r\n\r\n\r\n      if( this.blockStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.ACTIVE, this.blockStyleOverrides );\r\n      }\r\n\r\n      if( this.parentStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.ACTIVE, this.parentStyleOverrides );\r\n      }\r\n\r\n      if( this.innerStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.ACTIVE, this.innerStyleOverrides );\r\n      }\r\n\r\n      if( this.currentState !== HUD_ACTION.ACTIVE ){\r\n        let parentRect = this.object.getBoundingClientRect();\r\n        let parentCenterX = parentRect.width / 2 + parentRect.left;\r\n        let parentCenterY = parentRect.height / 2 + parentRect.top;\r\n\r\n        let pushX = Math.max( -this.pxlDevice.sW*.085, Math.min( this.pxlDevice.sW*.085, this.startPos.x - parentCenterX ) );\r\n        let pushY = Math.max( -this.pxlDevice.sH*.095, this.startPos.y - parentCenterY );\r\n\r\n        this.object.style.left = pushX + 'px';\r\n        this.object.style.top = pushY + 'px';\r\n        \r\n      }\r\n\r\n      // -- -- --\r\n    \r\n      let pushInnerX = this.startDelta.x ;\r\n      let pushInnerY = this.startDelta.y ;\r\n\r\n      let dist = Math.max( ( pushInnerX ** 2 + pushInnerY ** 2 ) ** 0.5, 1.0 );\r\n      if( dist > 80 ){\r\n        pushInnerX = (pushInnerX / dist) * 80;\r\n        pushInnerY = (pushInnerY / dist) * 80;\r\n      }\r\n\r\n      // Touch is dragging; dragCount > dragThreshold\r\n      this.innerObj.style.left = pushInnerX + 'px';\r\n      this.innerObj.style.top = pushInnerY + 'px';\r\n\r\n\r\n      this.currentState = HUD_ACTION.ACTIVE;\r\n    }else{\r\n      if( this.blockStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.NONE, this.blockStyleOverrides );\r\n      }\r\n\r\n      if( this.parentStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.NONE , this.parentStyleOverrides );\r\n      }\r\n\r\n      if( this.innerStyleOverrides ){\r\n        this.toggleStyle( this.pxlEnums.HUD_ACTION.NONE, this.innerStyleOverrides );\r\n      }\r\n\r\n      // Reset thumbstick objects\r\n      this.innerObj.style.left = '0px';\r\n      this.innerObj.style.top = '0px';\r\n      this.object.style.left = '0px';\r\n      this.object.style.top = '0px';\r\n\r\n      this.currentState = HUD_ACTION.NONE;\r\n    }\r\n  }\r\n\r\n\r\n  // -- -- --\r\n  \r\n  toggleStyle( action, overrides ){\r\n    if( action === overrides[ 'currentAction' ] ){\r\n      return;\r\n    }\r\n\r\n    let actionList = [ this.pxlEnums.HUD_ACTION.NONE, this.pxlEnums.HUD_ACTION.HOVER, this.pxlEnums.HUD_ACTION.ACTIVE ];\r\n    let actionIndex = actionList.indexOf( action );\r\n    let curObj = null;\r\n\r\n    if( overrides.object === 'block' ){\r\n      curObj = this.block;\r\n    }else if( overrides.object === 'parent' ){\r\n      curObj = this.object;\r\n    }else if( overrides.object === 'inner' ){\r\n      curObj = this.innerObj;\r\n    }\r\n\r\n    actionList.forEach(( a, index )=>{\r\n      if( index !== actionIndex ){\r\n        overrides[ a ].forEach(( s )=>{\r\n          curObj.classList.remove( s );\r\n        });\r\n      }else{\r\n        overrides[ a ].forEach(( s )=>{\r\n          curObj.classList.add( s );\r\n        });\r\n      }\r\n    });\r\n\r\n    overrides[ 'currentAction' ] = action;\r\n\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  subscribe( fn ){\r\n    this.callbacks.push( fn );\r\n  }\r\n\r\n}","// pxlNav Includes\r\n//   Kevin Edzenga, 2021-2022; 2024\r\n//\r\n\r\n// Core; Device & User Classes\r\nimport { Utils } from './core/Utils.js'; // Math and General Functions\r\nimport { FileIO } from './core/FileIO.js'; // File In / Out\r\nimport { QualityController } from './core/QualityController.js'; // Quality Settings and Controls\r\nimport { CookieManager } from './core/CookieManager.js'; // Local Browser Cookies\r\nimport { Timer } from './core/Timer.js'; // Universal Timer; Used in all custom Shaders & real time animations\r\nimport { User } from './core/User.js'; // User Status, Items, and States\r\nimport { Device } from './core/Device.js'; // User's Machine / Device Dependencies\r\nimport { Colliders } from './core/Colliders.js'; // Collision Detection and Management\r\nimport { Animation } from './core/Animation.js'; // Rigging and skeletal animations mostly\r\n\r\n\r\n// Primary drawing and run time class\r\nimport { Environment } from './Environment.js';\r\n\r\n// HTML DOM; HUD / GUI\r\nimport { GUI } from './gui/GUI.js';\r\nimport { HUD } from './hud/HUD.js';\r\n\r\n// Camera and Camera Sequencing Automation\r\nimport { Camera } from './cam/Camera.js';\r\nimport { AutoCamera } from './cam/AutoCamera.js';\r\n\r\n// Extentions for lesser used tech; Media, Devices, Computer Vision, & AI\r\nimport { Extensions } from './extensions/Extensions.js';\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n// -- v v To move to Extentions v v -- -- -- //\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n// Media; Audio, Video, and Music Interfaces / Players (Unused in MAP)\r\nimport { MusicUtils } from './media/MusicUtils.js';\r\nimport { Audio } from './media/Audio.js';\r\nimport { Video } from './media/Video.js';\r\n\r\n\r\nexport const pxlBase = { \r\n  Utils, FileIO, QualityController, \r\n  CookieManager, Timer, User, Device, \r\n  Colliders, Animation, Environment, GUI, HUD, \r\n  Camera, AutoCamera, Extensions, \r\n  MusicUtils, Audio, Video };","\r\n/**\r\n * @namespace pxlUtils\r\n * @description Utility functions\r\n */\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  ImageLoader,\r\n  Texture,\r\n  VideoTexture,\r\n  CanvasTexture,\r\n  LinearFilter,\r\n  AlphaFormat,\r\n  RedFormat,\r\n  RGBAFormat,\r\n  RGFormat,\r\n  RGBFormat,\r\n  LuminanceFormat,\r\n  DepthFormat,\r\n  MeshBasicMaterial\r\n} from \"../../libs/three/three.module.min.js\";\r\n/*LinearSRGBColorSpace,\r\nSRGBColorSpace,\r\nCubeUVRefractionMapping,*/\r\n\r\n\r\nexport class Utils{\r\n  constructor(assetRoot=\"images/assets/\", mobile ){\r\n    this.assetRoot=assetRoot;\r\n    this.mobile=mobile;\r\n    this.pxlTimer=null;\r\n    this.pxlEnums=null;\r\n    this.verboseLoading=false;\r\n    this.texLoader=new ImageLoader();\r\n    this.textLoaderArray=[];\r\n    // Texture formats, use as needed\r\n    // ImageLoader's defauls; images load as RGBAFormat by default, and JPG as RGBAFormat\r\n    this.channelFormats=[ AlphaFormat, RedFormat, RGFormat, RGBFormat, RGBAFormat, LuminanceFormat, DepthFormat ];\r\n  }\r\n\r\n  get curMS(){\r\n      return this.pxlTimer.curMS;\r\n  }\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlEnums=pxlNav.pxlEnums;\r\n  }\r\n  \r\n  updateUrl(url,state={},title=\"\"){\r\n      if (window.history.replaceState) {\r\n          window.history.replaceState(state, title, url);\r\n      }else{\r\n          window.history.pushState(state, title, url);\r\n      }\r\n  }\r\n  \r\n  copyRoomUrl(){\r\n      let url=window.location;\r\n      let tmpFocus=document.activeElement;\r\n      let tmpText = document.createElement(\"textarea\");\r\n      tmpText.value = url;\r\n\r\n      document.body.appendChild(tmpText);\r\n      tmpText.focus();\r\n      tmpText.select();\r\n\r\n      let status=false;\r\n      try{\r\n          let callback = document.execCommand('copy');\r\n          status = callback ? 'successful' : 'unsuccessful';\r\n      }catch(err){}\r\n\r\n      document.body.removeChild(tmpText);\r\n      tmpFocus.focus();  \r\n      \r\n      return status;\r\n  }\r\n    \r\n  checkInt(val){\r\n    return (val%1)==0;\r\n  }\r\n\r\n  degToRad(deg){\r\n    return deg*(Math.PI/180);\r\n  }\r\n\r\n  toHundreths(val){ // int(val*100)*.01 returns an erronious float on semi ussual basis...\r\n    if(!val) return 0;\r\n\r\n    if( Number.isInteger(val) ){\r\n      return val;\r\n    }else{\r\n      let sp=(val+\"\").split(\".\");\r\n      let ret=parseFloat(sp[0]+\".\"+sp[1].substr(0,2));\r\n      return ret;\r\n    }\r\n  }\r\n\r\n  toTenths(val){ // int(val*100)*.01 returns an erronious float on semi ussual basis...\r\n    if(!val) return 0;\r\n\r\n    if( Number.isInteger(val) ){\r\n      return val;\r\n    }else{\r\n      let sp=(val+\"\").split(\".\");\r\n      let ret=parseFloat(sp[0]+\".\"+sp[1].substr(0,1));\r\n      return ret;\r\n    }\r\n  }\r\n  \r\n  getDateTime(){\r\n    let d=new Date();\r\n    let date=(d.getFullYear()+\"\").padStart(2,'0')+\"-\"+((d.getMonth()+1)+\"\").padStart(2,'0')+\"-\"+(d.getDate()+\"\").padStart(2,'0');\r\n    let time=(d.getHours()+\"\").padStart(2,'0')+\":\"+(d.getMinutes()+\"\").padStart(2,'0')+\":\"+(d.getSeconds()+\"\").padStart(2,'0');\r\n    return [date, time];\r\n  }\r\n  \r\n  // -- -- -- //\r\n\r\n  cleanStrict( messageString ){\r\n    let strip=document.createElement( \"div\" );\r\n    strip.innerHTML=messageString;\r\n    strip=strip.innerText;\r\n    let matcher=strip.match(/([a-zA-Z0-9])\\w+/g);\r\n\r\n    if(matcher){\r\n      strip=matcher.join(\" \");\r\n    }\r\n    return strip;\r\n  }\r\n    \r\n  cleanBasic( messageString ){\r\n    let strip=document.createElement( \"div\" );\r\n    strip.innerHTML=messageString;\r\n    strip=strip.innerText;\r\n    let matcher=strip.match(/([a-zA-Z0-9\\s\\w-+()\\[\\]])+/g);\r\n\r\n    if(matcher){\r\n      strip=matcher.join(\"\");\r\n    }\r\n    return strip;\r\n  }\r\n    \r\n  cleanString( messageString ){\r\n    let strip=document.createElement( \"div\" );\r\n    strip.innerHTML=messageString;\r\n    strip=strip.innerText;\r\n    return strip;\r\n  }\r\n\r\n\r\n  // Round to nearest\r\n  toNearestStr( val, precision=2 ){\r\n    let retVal = val.toFixed(precision);\r\n    return retVal;\r\n  }\r\n\r\n  // Round array elements to nearest\r\n  arrayToStr( arr, precision=2 ){\r\n    let retArr = [];\r\n    arr.forEach( (val)=>{\r\n      retArr.push( this.toNearestStr(val, precision) );\r\n    });\r\n    return retArr;\r\n  }\r\n\r\n  // Flatten array to joined string\r\n  flattenArrayToStr( arr, precision=2, delimiter=\",\" ){\r\n    return this.arrayToStr( arr, precision ).join(delimiter);\r\n  }\r\n\r\n  // -- -- -- //\r\n  \r\n  randomFloat(min,max){\r\n    return Math.random()*(max-min)+min;\r\n  }\r\n\r\n  // -- -- -- //\r\n\r\n  screenToNDC( x, y, width, height ){\r\n    let ndcX = ( x / width ) * 2 - 1;\r\n    let ndcY = - ( y / height ) * 2 + 1;\r\n    return new Vector2( ndcX, ndcY );\r\n  }\r\n  \r\n  // -- -- -- //\r\n\r\n  componentToHex(c) {\r\n    var hex = c.toString(16);\r\n    return hex.padStart(2,'0');\r\n  }\r\n  rgbToHex(r, g, b) {\r\n    return \"#\" + this.componentToHex(Math.min(255, Math.max(0,Math.round(r)))) + this.componentToHex(Math.min(255, Math.max(0,Math.round(g)))) + this.componentToHex(Math.min(255, Math.max(0,Math.round(b))));\r\n  }\r\n  \r\n  hexToRgb( hex ) {\r\n    let buffer=hex[0];\r\n    if(buffer==\"#\"){\r\n      hex=hex.substr( 1, 6 );\r\n    }else{\r\n      hex=hex.substr( 0, 6 );\r\n    }\r\n    let r,g,b;\r\n    if(hex.length==3){\r\n      r=hex[0]+hex[0];\r\n      g=hex[1]+hex[1];\r\n      b=hex[2]+hex[2];\r\n    }else{\r\n      r=hex[0]+hex[1];\r\n      g=hex[2]+hex[3];\r\n      b=hex[4]+hex[5];\r\n    }\r\n    r=parseInt(r,16);\r\n    g=parseInt(g,16);\r\n    b=parseInt(b,16);\r\n    return [r,g,b];\r\n  }\r\n  \r\n  // -- -- -- //\r\n\r\n  stringToRgb( string, boost=null, zoFit=false ){\r\n    let stringColor=[255,0,0];\r\n    if( string ){\r\n      let sLength=string.length;\r\n      let charCode=\"\";\r\n      for(let x=0; x<sLength; ++x){\r\n        charCode+=string[ (sLength-1-x) ].charCodeAt(0).toString(16);\r\n      }\r\n\r\n      let ccLength=charCode.length;\r\n      if(ccLength>6){\r\n        let offset=1;\r\n        if(string==\"tussin\"){\r\n          offset=0;\r\n        }else if(string==\"fexofenadine\"){\r\n          offset=-1;\r\n        }\r\n        let reader=Math.max(0,parseInt((ccLength-6)/2+offset));\r\n        charCode=charCode.substr(reader,6);\r\n      }\r\n      \r\n      stringColor=this.hexToRgb( charCode );\r\n    }\r\n    \r\n    if( boost != null){\r\n      let maxCd=Math.max(...stringColor);\r\n      let minCd=Math.min(...stringColor);\r\n      let boostCd=maxCd*boost;\r\n      stringColor[0]= parseInt( Math.min(255, ((stringColor[0]-minCd) / (maxCd-minCd))*255+boostCd) );\r\n      stringColor[1]= parseInt( Math.min(255, ((stringColor[1]-minCd) / (maxCd-minCd))*255+boostCd) );\r\n      stringColor[2]= parseInt( Math.min(255, ((stringColor[2]-minCd) / (maxCd-minCd))*255+boostCd) );\r\n      /*\r\n      stringColor[0]= Math.max(0, Math.min(255, (stringColor[0]-100)*boost+100));\r\n      stringColor[1]= Math.max(0, Math.min(255, (stringColor[1]-100)*boost+100));\r\n      stringColor[2]= Math.max(0, Math.min(255, (stringColor[2]-100)*boost+100));\r\n      */\r\n    }\r\n    \r\n    if( zoFit==true ){\r\n      stringColor[0]=stringColor[0]/255;\r\n      stringColor[1]=stringColor[1]/255;\r\n      stringColor[2]=stringColor[2]/255;\r\n    }\r\n    \r\n    return stringColor;\r\n  }\r\n    \r\n  // -- -- -- //\r\n\r\n\r\n  // Convert Color/Vector3 to sRGB Color Space\r\n  colorTosRGB( color ){\r\n    // Check if the colorue is a color object\r\n    if( typeof color == \"object\" ){\r\n      // Color Object\r\n      if( color.hasOwnProperty && color.hasOwnProperty(\"r\") ){\r\n        color.r = this.tosRGB(color.r);\r\n        color.g = this.tosRGB(color.g);\r\n        color.b = this.tosRGB(color.b);\r\n      }\r\n      if( color.hasOwnProperty && color.hasOwnProperty(\"x\") ){\r\n        color.x = this.tosRGB(color.x);\r\n        color.y = this.tosRGB(color.y);\r\n        color.z = this.tosRGB(color.z);\r\n      }\r\n      return color;\r\n    }\r\n    return color;\r\n  }\r\n\r\n  // Convert Linear to sRGB\r\n  tosRGB( val ){\r\n    // Convert the value per channel\r\n    if( val <= 0.0031308 ){\r\n      val *= 12.92;\r\n    }else{\r\n      val = 1.055 * Math.pow(val, this.oneTwoPFour) - 0.055;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Convert Color/Vector3 to Linear Color Space\r\n  colorToLinear( color ){\r\n    // Check if the colorue is a color object\r\n    if( typeof color == \"object\" ){\r\n      // Color Object\r\n      if( color.hasOwnProperty && color.hasOwnProperty(\"r\") ){\r\n        color.r = this.toLinear(color.r);\r\n        color.g = this.toLinear(color.g);\r\n        color.b = this.toLinear(color.b);\r\n      }\r\n      if( color.hasOwnProperty && color.hasOwnProperty(\"x\") ){\r\n        color.x = this.toLinear(color.x);\r\n        color.y = this.toLinear(color.y);\r\n        color.z = this.toLinear(color.z);\r\n      }\r\n      return color;\r\n    }\r\n    return color;\r\n  }\r\n  // Convert sRGB to Linear\r\n  toLinear( val ){\r\n    if( val <= 0.04045 ){\r\n      val *= this.twelvePNineTwoDiv;\r\n    }else{\r\n      val = Math.pow((val + 0.055) * this.onePOFiveFiveDiv, 2.4);\r\n    }\r\n    return val;\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  gammaCorrectColor( color, gammaIn=\"2.2\", gammaOut=\"1.8\" ){\r\n    // Check if the colorue is a color object\r\n    if( typeof color == \"object\" ){\r\n      // Color Object\r\n      if( color.hasOwnProperty && color.hasOwnProperty(\"r\") ){\r\n        color.r = this.gammaCorrect(color.r, gammaIn, gammaOut);\r\n        color.g = this.gammaCorrect(color.g, gammaIn, gammaOut);\r\n        color.b = this.gammaCorrect(color.b, gammaIn, gammaOut);\r\n      }\r\n      if( color.hasOwnProperty && color.hasOwnProperty(\"x\") ){\r\n        color.x = this.gammaCorrect(color.x, gammaIn, gammaOut);\r\n        color.y = this.gammaCorrect(color.y, gammaIn, gammaOut);\r\n        color.z = this.gammaCorrect(color.z, gammaIn, gammaOut);\r\n      }\r\n      return color;\r\n    }\r\n    return color;\r\n  }\r\n\r\n  gammaCorrection( channel, gammaIn=\"2.2\", gammaOut=\"1.8\" ){\r\n    // Linearize the color\r\n    let linearChannel = Math.pow( channel, gammaIn );\r\n\r\n    // Apply the gamma correction\r\n    let channelShift = Math.pow( linearChannel, 1.0 / gammaOut );\r\n\r\n    return channelShift;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n\r\n\r\n  // TODO : Prep & re-implement THREE.GammaFactor -> pxlNav.pxlDevice.GammaFactor\r\n  // TODO : pxlDevice OS detect needs to be implement for color conversion between known OS color spaces\r\n  convertColor( color, space=this.pxlEnums.COLOR_SHIFT.KEEP ){\r\n    if( space == this.pxlEnums.COLOR_SHIFT.KEEP ){\r\n      return color;\r\n    }\r\n\r\n    // Notes on OS Gamma levels --\r\n    //   Linear Gamma is 1.0\r\n    //   Windows default Gamma is 2.2\r\n    //   Mac, Linux, & Androids default Gamma is 1.8\r\n    //   Other Unix systems are 2.3-2.5\r\n\r\n    // Notes on Color Spaces --\r\n    //   sRGB & Rec.709 are the same\r\n    //     sRGB is more in line with how the human eye percieves color\r\n    //   Linear is an uncorrected color space, not data is lost between programs or devices\r\n    //     Linear Colors should then be converted to sRGB for display,\r\n    //       But not converted if the color is for Data needs\r\n\r\n    let retColor = color.clone();\r\n    switch (space) {\r\n      // Assuming color adjustments have been made with shader math --\r\n      case this.pxlEnums.COLOR_SHIFT.sRGB_TO_LINEAR:\r\n        retColor = this.colorTosRGB(retColor);\r\n        break;\r\n      case this.pxlEnums.COLOR_SHIFT.LINEAR_TO_sRGB:\r\n        retColor = this.colorToLinear(retColor);\r\n        break;\r\n\r\n      // TODO : These need to be checked, added for completeness, not tested\r\n      case this.pxlEnums.COLOR_SHIFT.WINDOWS_TO_UNIX:\r\n        retColor = this.gammaCorrectColor(retColor, \"2.2\", \"1.8\");\r\n        break;\r\n      case this.pxlEnums.COLOR_SHIFT.UNIX_TO_WINDOWS:\r\n        retColor = this.gammaCorrectColor(retColor, \"1.8\", \"2.2\");\r\n        break;\r\n      case this.pxlEnums.COLOR_SHIFT.LINEAR_TO_WINDOWS:\r\n        retColor = this.gammaCorrectColor(retColor, \"1.0\", \"2.2\");\r\n        break;\r\n      case this.pxlEnums.COLOR_SHIFT.WINDOWS_TO_LINEAR:\r\n        retColor = this.gammaCorrectColor(retColor, \"2.2\", \"1.0\");\r\n        break;\r\n      case this.pxlEnums.COLOR_SHIFT.LINEAR_TO_UNIX:\r\n        retColor = this.gammaCorrectColor(retColor, \"1.0\", \"1.8\");\r\n        break;\r\n      case this.pxlEnums.COLOR_SHIFT.UNIX_TO_LINEAR:\r\n        retColor = this.gammaCorrectColor(retColor, \"1.8\", \"1.0\");\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return retColor;\r\n  }\r\n\r\n\r\n  // -- -- -- //\r\n\r\n  randomizeArray(inputArr){\r\n    let tmpArr=[...inputArr];\r\n    let retArr=[];\r\n    while( tmpArr.length > 0){\r\n      let rand=tmpArr.length==1 ? 0 : parseInt(Math.random()*21*tmpArr.length)%tmpArr.length;\r\n      retArr.push( tmpArr.splice( rand, 1 )[0] );\r\n    }\r\n    return retArr;\r\n  }\r\n    \r\n  getRandom( list, seed=1.14 ){\r\n    let randEl= Math.floor( Math.random( seed ) * list.length);\r\n    return list[ randEl ];\r\n  }\r\n    \r\n  applyTransformList(curObj,transList){\r\n    var rotate=transList[\"r\"];\r\n    curObj.rotateX(rotate[0]);\r\n    curObj.rotateY(rotate[1]);\r\n    curObj.rotateZ(rotate[2]);\r\n    if(typeof(transList[\"rOrder\"]) !== \"undefined\" ){\r\n      curObj.rotation.order=transList[\"rOrder\"];\r\n    }\r\n    var pos=transList[\"t\"];\r\n    curObj.position.set(pos[0],pos[1],pos[2]);\r\n    var scale=transList[\"s\"];\r\n    curObj.scale.set(scale[0],scale[1],scale[2]);\r\n    \r\n    curObj.matrixAutoUpdate=false;\r\n    curObj.updateMatrix();\r\n  }\r\n  \r\n    vec2(x=null,y=null){\r\n        return new Vector2(x,y);\r\n    }\r\n    vec3(x=0,y=0,z=0){\r\n        return new Vector3(x,y,z);\r\n    }\r\n    \r\n  //this.channelFormats=[ AlphaFormat, RedFormat, RGFormat, RGBFormat, RGBAFormat, LuminanceFormat, DepthFormat ];\r\n  loadTexture(imgPath,channels=null,mods={}){\r\n    // ## Check how textLoaderArray textures are being handled after being disposed\r\n\r\n    // No path, default to the asset root\r\n    if( !imgPath.includes( \"/\") ){\r\n      imgPath = this.assetRoot + imgPath;\r\n    }\r\n\r\n    if(typeof(this.textLoaderArray[imgPath]) != \"undefined\"){\r\n      texture=this.textLoaderArray[imgPath];\r\n    }else{\r\n      //var texLoader=new ImageLoader(verboseLoading);\r\n      var texture=new Texture();\r\n      let modKeys = Object.keys(mods);\r\n      this.texLoader.load(imgPath,\r\n        (tex)=>{\r\n          if(channels!=null){\r\n            texture.format = this.channelFormats[ channels ];\r\n          }\r\n          texture.image=tex;\r\n          texture.needsUpdate=true;\r\n\r\n          // Apply texture mods passed from the user\r\n          if(modKeys.length>0){\r\n            modKeys.forEach((x)=>{\r\n              texture[x]=mods[x];\r\n            });\r\n          }\r\n        },\r\n        undefined,\r\n        (err)=>{\r\n          console.error(\" TextureLoader :: Error loading texture :: \"+imgPath);\r\n          console.error(err);\r\n        }\r\n      );\r\n      this.textLoaderArray[imgPath]=texture;\r\n    }\r\n    return texture;\r\n  }\r\n\r\n  getVideoTexture( videoObject ){\r\n    let videoTexture=new VideoTexture(videoObject);\r\n    videoTexture.minFilter=LinearFilter;\r\n    videoTexture.magFilter=LinearFilter; // faster, lower samples, NearestFilter\r\n    videoTexture.format=RGBFormat;\r\n    \r\n    return videoTexture;\r\n  }\r\n  \r\n  getCanvasTexture( canvas ){\r\n    const texture = new CanvasTexture(canvas);\r\n      \r\n    const material = new MeshBasicMaterial({\r\n      map: texture,\r\n    });\r\n    return {texture, material};\r\n  }\r\n\r\n  // -- -- -- //\r\n\r\n  \r\n  /**\r\n   * Duplicate an array.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {Array} val - The array to duplicate.\r\n   * @param {number} count - The number of times to duplicate the array.\r\n   * @returns {Array} The duplicated array.\r\n   * @example\r\n   * // Duplicate an array\r\n   * import { pxlNav } from 'pxlNav.esm.js';\r\n   * const pxlParticleBase = pxlNav.pxlEffects.pxlParticles.pxlParticle\r\n   * \r\n   * build(){\r\n   *  pxlParticleBase.dupeArray( [0.0,0.75], 4 );\r\n   *  // Output: [0.0,0.75], [0.0,0.75], [0.0,0.75], [0.0,0.75]\r\n   * }\r\n   */\r\n  dupeArray( val, count ){\r\n    return Array.from({length:count}).fill(val);\r\n  }\r\n  \r\n  \r\n}","\r\n/**\r\n * @namespace pxlQuality\r\n * @description Quality settings and benchmarking\r\n */\r\n\r\nimport { VERBOSE_LEVEL } from \"./Enums.js\";\r\nimport { Vector3 } from \"../../libs/three/three.module.min.js\";\r\n\r\nexport class QualityController{\r\n  constructor( verbose, mobile=false, searchParms={}){\r\n    this.pxlTimer=null;\r\n    this.pxlCookie=null;\r\n    this.pxlDevice=null;\r\n    this.pxlEnv=null;\r\n    this.msLog=0;\r\n    this.prevMS=new Date().getTime()*.001;\r\n    this.autoQuality=false;\r\n    this.percent=1;\r\n    this.verbose=verbose;\r\n        \r\n    this.screenResPerc=1;\r\n    this.mBlurPercMult=mobile?.65:1;\r\n    this.bloomPercMult=mobile?.65:1;\r\n    this.bufferPercMult=1;//mobile?.3:.5,\r\n    this.renderTargetScale=10; // ## Not implemented\r\n    this.percentSteps=[.3,.45,.85];\r\n    this.fpsCounter=new Vector3(30, 0, (new Date().getTime())*.001); // [ Cur FPS, Frame Count Since Last FPS Check, Last FPS Sample Time ]\r\n    this.countAtLevel=0;\r\n    this.shiftRate=.01;\r\n    this.moduleQualityList=[];\r\n    \r\n    this.qualityStep=-1;\r\n    this.qualityMaxSteps=3;\r\n    this.qualityStepValues=[ .25, .5, .75, 1 ];\r\n    \r\n    this.benchmarkStart=-1;\r\n    this.benchmarkTime=-1;\r\n    this.benchmarkRating=-1;\r\n    this.benchmarkTimes=[9,17];\r\n    \r\n    this.setFromBenchmark=true;\r\n    this.benchmarkQuality=1;\r\n    this.benchmarkQualityRange=[.25, 1];\r\n    \r\n    this.settingsQualityChoice=null;\r\n    this.detailLimitOverride= Object.keys(searchParms).includes(\"dlimit\") ? searchParms[\"dlimit\"] : 0;\r\n    this.detailLimit= this.detailLimitOverride!=null ? this.detailLimitOverride : 0;\r\n    \r\n    // Default Quality Settings & Benchmark Settings\r\n    //   Numbers or Booleans ONLY; or update GuiDraw.setRadioValues()\r\n    // TODO : Movement settings shouldn't be on the Quality controller\r\n    //          \"Quality\" should strictly remain Render Settings\r\n    this.settings={\r\n      leftRight:true, // Turn, Strafe\r\n      mouse:true, // Drag, Point\r\n      graphics:2, // Low, Medium, High, Custom\r\n      resolution:1, // % Screen Size; [sW,sH] \r\n      fog:2, // Off, Medium, High\r\n      bloom:true, // Unreal Bloom\r\n      motion:false, // pxlNav Motion Blur // ## Implement\r\n    };\r\n    \r\n    // Low Quality Settings\r\n    this.settingsLow={\r\n      resolution:.5,\r\n      fog:0,\r\n      bloom:false,\r\n      motion:false,\r\n    };\r\n    // Medium Quality Settings\r\n    this.settingsMedium={\r\n      resolution:.75,\r\n      fog:1,\r\n      bloom:true,\r\n      motion:false,\r\n    };\r\n    // High Quality Settings\r\n    this.settingsHigh={\r\n      resolution:1,\r\n      fog:2,\r\n      bloom:true,\r\n      motion:false,\r\n    };\r\n    // Custom Quality Settings\r\n    this.settingsCustom=null;\r\n  }\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlCookie=pxlNav.pxlCookie;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n  }\r\n\r\n  init(){\r\n        \r\n    if( this.detailLimitOverride!=null ){\r\n        this.detailLimit = this.detailLimitOverride;\r\n    }else{\r\n        if(this.pxlCookie.hasCookie(\"detailLimit\")){\r\n            this.detailLimit=this.pxlCookie.parseCookie(\"detailLimit\");\r\n        }\r\n    }\r\n    \r\n    if( this.verbose >= VERBOSE_LEVEL.INFO ){\r\n      console.log( \"Graphics Limiting is set to level \", this.detailLimit );\r\n    }\r\n    \r\n    //parseDict sets the dict key values, returning true/false if keys missed\r\n    this.setFromBenchmark = !this.pxlCookie.parseDict( this.settings );\r\n\r\n    if(this.pxlCookie.hasCookie(\"leftRight\")){\r\n      this.settings.leftRight=this.pxlCookie.parseCookie(\"leftRight\");\r\n    }\r\n    if(this.pxlCookie.hasCookie(\"mouse\")){\r\n      this.settings.mouse=this.pxlCookie.parseCookie(\"mouse\");\r\n    }\r\n        let cookieEntries=Object.keys( this.settingsHigh );\r\n    if(this.pxlCookie.hasCookie(\"qualitySetting\")){\r\n      let qualitySetting=this.pxlCookie.parseCookie(\"qualitySetting\");\r\n            this.settings.graphics=qualitySetting;\r\n            this.settingsQualityChoice=qualitySetting;\r\n    }\r\n  }\r\n  step(){\r\n    this.mapFpsQualitCheck();\r\n  }\r\n  \r\n    // ## Indended for a more universe \"Quality Control\" system\r\n    //      But not implemented yet.\r\n  attachModule( module=null ){\r\n    if(module){\r\n      this.moduleQualityList.push( module );\r\n    }\r\n  }\r\n  \r\n  startBenchmark(){\r\n    this.pxlTimer.step();\r\n    this.benchmarkStart=this.pxlTimer.curMS;\r\n  }\r\n  endBenchmark(){\r\n    this.pxlTimer.step();\r\n    let bDelta=this.pxlTimer.curMS-this.benchmarkStart;\r\n    this.benchmarkTime=bDelta;\r\n    \r\n    this.benchmarkRating= 1-Math.min(1, Math.max(0, (bDelta-this.benchmarkTimes[0])/(this.benchmarkTimes[1]-this.benchmarkTimes[0]) ));\r\n    \r\n    // Set Benchmark Target Quality Percent to range; currently 25% to 100%\r\n    this.benchmarkQuality= this.benchmarkRating*(this.benchmarkQualityRange[1]-this.benchmarkQualityRange[0]) + this.benchmarkQualityRange[0];\r\n    \r\n    //%=\r\n    //console.log(\"Benchmark Timing - \",bDelta); \r\n    //console.log(\"Benchmark Rating - \",this.benchmarkRating);\r\n    //console.log(\"Benchmark Quality - \", parseInt(this.benchmarkQuality*100), \"%\");\r\n    //%\r\n    \r\n    let percStep=Math.min(1, Math.max(0, this.benchmarkRating ));\r\n    percStep=Math.ceil( Math.max(.05,percStep)*this.qualityMaxSteps)-1;\r\n    this.qualityStep=percStep;\r\n    if( this.setFromBenchmark ){\r\n      //%=\r\n      let levelText=[\"Low\",\"Medium\",\"High\"][this.qualityStep];\r\n      //console.log( \"Setting Benchmark to \"+levelText+\" quality.\");\r\n      //%\r\n      this.setQualityLevel( this.qualityStep );\r\n    }else{\r\n            if(this.settingsQualityChoice==null){\r\n                this.settingsQualityChoice=3;\r\n            }\r\n            \r\n      this.settingsCustom={};\r\n      let keys=Object.keys( this.settingsHigh ); // Just using this.settingsHigh reference for Keys\r\n      keys.forEach( (k)=>{\r\n        this.settingsCustom[k]=this.settings[k];\r\n      });\r\n    }\r\n        \r\n        this.setDependentSettings();\r\n  }\r\n  \r\n    // ## This might be causing some issues with movement jittering\r\n  mapFpsQualitCheck(){\r\n    if( this.pxlTimer.curMS-this.fpsCounter.z > 1){\r\n      this.fpsCounter.x= this.fpsCounter.y; //':new THREE.Vector3(30, 0, (new Date().getTime())), // [ Cur FPS, Time Since Last FPS Check, Last Sample Time ]\r\n      this.fpsCounter.y=0;\r\n      this.fpsCounter.z=this.pxlTimer.curMS;\r\n      \r\n      let dir=1;\r\n      if(this.fpsCounter.x<15){\r\n        dir=-1;\r\n      }\r\n      let toPerc=Math.min(1, Math.max(0, this.percent+this.shiftRate*dir));\r\n      //datRenderResolutionSlider.setValue(toPerc);\r\n      if(this.autoQuality){\r\n        this.mapAutoQualityUpdate(toPerc, false);\r\n      }\r\n    }\r\n    this.fpsCounter.y+=1;\r\n    this.pxlTimer.prevMS=this.pxlTimer.curMS;\r\n  }\r\n\r\n  mapAutoQualityUpdate(percUpdate=null, force=false){\r\n    // Core percentage updates via settings dict\r\n    let percStep=Math.min(1, Math.max(0, percUpdate ));\r\n    percStep=Math.ceil( Math.max(.05,percStep)*this.qualityMaxSteps)-1;\r\n    this.qualityStep=percStep;\r\n  }\r\n  \r\n  setGraphicsSettings( qualitySettings=null, graphicsPreset=3 ){\r\n    if(qualitySettings==null){\r\n      if(this.qualityStep==0){\r\n        qualitySettings=this.settingsLow;\r\n      }else if(this.qualityStep==1){\r\n        qualitySettings=this.settingsMedium;\r\n      }else if(this.qualityStep==2){\r\n        qualitySettings=this.settingsHigh;\r\n      }else{\r\n        return;\r\n      }\r\n    }\r\n    \r\n    if(graphicsPreset==3){\r\n      this.checkCustomDict();\r\n    }\r\n    \r\n    let keys=Object.keys(qualitySettings);\r\n    keys.forEach( (k)=>{\r\n      this.setComponentQuality(k,qualitySettings[k]);\r\n      this.settings[k]=qualitySettings[k];\r\n      if(graphicsPreset==3){\r\n        this.settingsCustom[k]=qualitySettings[k];\r\n      }\r\n    });\r\n    \r\n       // this.pxlEnv.mapRender(false);\r\n    \r\n    // ## I dunno, I need to set more settings per component\r\n    //   Just set em all again!\r\n    /*keys=Object.keys(this.settings);\r\n    keys.forEach( (k)=>{\r\n      if( ![\"leftRight\",\"mouse\",\"graphics\"].includes(k) ){\r\n        this.setComponentQuality(k,this.settings[k], false);\r\n      }\r\n    });*/\r\n       // this.pxlEnv.mapRender(false);\r\n    \r\n    this.setDependentSettings();\r\n    this.colliderPrevObjHit=null;\r\n    \r\n    if( graphicsPreset!=null ){\r\n      this.settings.graphics=graphicsPreset;\r\n    }\r\n  }\r\n  \r\n    reapplySettings(){\r\n    let keys=Object.keys(this.settingsLow);\r\n    keys.forEach( (k)=>{\r\n      //this.setComponentQuality(k,this.settingsLow[k], false);\r\n      //this.setComponentQuality(k,this.settingsHigh[k], false);\r\n      this.setComponentQuality(k,this.settings[k], false);\r\n    });\r\n    this.setDependentSettings();\r\n    }\r\n    \r\n  setQualityLevel(val){\r\n        if( this.pxlDevice.mobile ){\r\n            val=1;\r\n        }\r\n        \r\n    this.setQualityCookie(val);\r\n        \r\n    if(val==0){\r\n      this.setLowQuality();\r\n    }else if(val==1){\r\n      this.setMediumQuality();\r\n    }else if(val==2){\r\n      this.setHighQuality();\r\n    }else if(val==3){\r\n      this.setCustomQuality();\r\n    }\r\n  }    \r\n  \r\n  setLowQuality(){\r\n    this.settingsQualityChoice=0;\r\n    this.setGraphicsSettings(this.settingsLow, 0);\r\n  }\r\n  setMediumQuality(){\r\n    this.settingsQualityChoice=1;\r\n    this.setGraphicsSettings(this.settingsMedium, 1);\r\n  }\r\n  setHighQuality(){\r\n    this.settingsQualityChoice=2;\r\n    this.setGraphicsSettings(this.settingsHigh, 2);\r\n  }\r\n  setCustomQuality(){\r\n    this.checkCustomDict();\r\n    this.settingsQualityChoice=3;\r\n    this.setGraphicsSettings( this.settingsCustom);\r\n  }\r\n  checkCustomDict(){\r\n    if(this.settingsCustom==null){\r\n      this.settingsCustom={};\r\n      let sourceDict=this.settingsHigh;\r\n      if(this.settingsQualityChoice){\r\n        if(this.settingsQualityChoice==0){\r\n          sourceDict= this.settingsLow ;\r\n        }else if(this.settingsQualityChoice==1){\r\n          sourceDict= this.settingsMedium ;\r\n        }else if(this.settingsQualityChoice==2){\r\n          sourceDict= this.settingsHigh ;\r\n        }\r\n      }\r\n      Object.assign( this.settingsCustom, sourceDict );\r\n    }\r\n  }\r\n  \r\n    setQualityCookie(val){\r\n    this.pxlCookie.setCookie( \"qualitySetting\", val );\r\n    }\r\n    \r\n  // Set values per specific setting change\r\n  //   Render & Navigational Settings\r\n  setComponentQuality( component, val, setCookie=true ){\r\n    switch(component){\r\n      case \"leftRight\":\r\n        this.settings[component]=val;\r\n        break;\r\n        \r\n      case \"mouse\":\r\n        this.settings[component]=val;\r\n        break;\r\n        \r\n      case \"resolution\":\r\n        this.screenResPerc=val;\r\n        this.pxlDevice.resizeRenderResolution();\r\n        this.settings[component]=val;\r\n        if( this.pxlEnv.geoList['snow'] && this.pxlEnv.geoList['snow'].material ){\r\n            this.pxlEnv.geoList['snow'].material.uniforms.pointScale.value = this.pxlEnv.geoList['snow'].pBaseScale * val;\r\n        }\r\n        break;\r\n        \r\n      case \"fog\":\r\n        if( this.pxlEnv.mapOverlayHeavyPass ) this.pxlEnv.mapOverlayHeavyPass.enabled = val==2;\r\n        if( this.pxlEnv.mapOverlayPass ) this.pxlEnv.mapOverlayPass.enabled = val==1;\r\n        if( this.pxlEnv.mapOverlaySlimPass ) this.pxlEnv.mapOverlaySlimPass.enabled = val==0;\r\n        if( this.pxlEnv.mapBoxAAPass.enabled ) this.pxlEnv.mapBoxAAPass.enabled=val==2;\r\n        if( this.pxlEnv.mapCrossAAPass.enabled ) this.pxlEnv.mapCrossAAPass.enabled=val==1;\r\n                \r\n        if( this.pxlEnv.portaluserScreenIntensity ) this.pxlEnv.portaluserScreenIntensity.x=1;\r\n        //this.pxlEnv.pxlRenderSettings.mult=1;\r\n        if( this.pxlEnv.userScreenIntensity ){\r\n          this.pxlEnv.userScreenIntensity.x = .65 ;\r\n          this.pxlEnv.userScreenIntensity.y =  0 ;\r\n        }\r\n        if(this.pxlEnv.geoList['HDRView']){\r\n            this.pxlEnv.geoList['HDRView'].material.uniforms.cdMult.value = val==0 ? .7 : .3;\r\n        }\r\n        this.settings[component]=val;\r\n        break;\r\n        \r\n      case \"bloom\":\r\n        this.pxlEnv.portaluserScreenIntensity.x = val ? .4 : 1;\r\n        if( this.pxlEnv.mapGlowPass ) this.pxlEnv.mapGlowPass.enabled = val;\r\n        if( this.pxlEnv.roomBloomPass )  this.pxlEnv.roomBloomPass.enabled = val;\r\n        if( this.pxlEnv.roomGlowPass ) this.pxlEnv.roomGlowPass.enabled = val;\r\n        \r\n        if( this.pxlEnv.userScreenIntensity ){\r\n          this.pxlEnv.userScreenIntensity.x = val ? .65 : .8;\r\n          this.pxlEnv.userScreenIntensity.y = val ? 0 : .8;\r\n        }\r\n        if(this.pxlEnv.geoList['HDRView']){\r\n            this.pxlEnv.geoList['HDRView'].material.uniforms.cdMult.value = val==0 ? .7 : .3;\r\n        }\r\n        \r\n        if( this.pxlEnv.mapMotionBlurPass ) this.pxlEnv.mapMotionBlurPass.enabled=val;  \r\n      \r\n        this.settings[component]=val;\r\n        break;\r\n        \r\n      case \"motion\":\r\n        if( this.pxlEnv.mapMotionBlurPass ) this.pxlEnv.mapMotionBlurPass.enabled=val;  \r\n      \r\n        this.settings[component]=val;\r\n        break;\r\n        \r\n      default:\r\n        //%=\r\n        //console.error(\"No Setting Component Updated - \",component,\": \",val);\r\n        //%\r\n        break;\r\n    }\r\n    if(setCookie){\r\n      this.pxlCookie.setCookie( component, val );\r\n    }\r\n  }\r\n  setDependentSettings(){\r\n    let multVal=1;\r\n    let portalIntensity=1;\r\n        let circleGateBloom=0;\r\n        let circleGateColor=.6;\r\n    \r\n        let mapMotionBlurPassEnabled = false;\r\n        let mapOverlayHeavyPassEnabled = false;\r\n        let mapOverlayPassEnabled = false;\r\n        let mapOverlaySlimPassEnabled = false;\r\n                  \r\n        let mapBoxAAPassEnabled = false;\r\n        let mapCrossAAPassEnabled = false;\r\n\r\n        if( this.settings.fog==2 ){\r\n          mapMotionBlurPassEnabled =false;  \r\n          mapOverlayHeavyPassEnabled = true;\r\n          mapOverlayPassEnabled = false;\r\n          mapOverlaySlimPassEnabled = false;\r\n\r\n          mapBoxAAPassEnabled = true;\r\n          mapCrossAAPassEnabled = false;\r\n          multVal=1.00;\r\n          portalIntensity=.5;\r\n                    \r\n          /*if( this.pxlEnv.geoList['skySemiSphere'] ){\r\n              this.pxlEnv.geoList[\"skySemiSphere\"].material.uniforms.fogIntensity.value=1; // Post Process Fog\r\n          }*/\r\n                    \r\n        }else if( this.settings.fog==1 ){\r\n          mapMotionBlurPassEnabled = false;  \r\n          mapOverlayHeavyPassEnabled = false;\r\n          mapOverlayPassEnabled = true;\r\n          mapOverlaySlimPassEnabled = false;\r\n                    \r\n          mapBoxAAPassEnabled = false;\r\n          mapCrossAAPassEnabled = true;\r\n          multVal=1.15;\r\n          portalIntensity=.5;\r\n        }else{\r\n          mapMotionBlurPassEnabled = false;\r\n          mapOverlayPassEnabled = false;\r\n          mapOverlaySlimPassEnabled = true;\r\n                    \r\n          mapBoxAAPassEnabled = false;\r\n          mapCrossAAPassEnabled = false;\r\n          multVal=1.;\r\n          portalIntensity=.4;\r\n        }\r\n\r\n\r\n        if( this.pxlEnv.mapMotionBlurPass ) this.pxlEnv.mapMotionBlurPass.enabled = mapMotionBlurPassEnabled;\r\n        if( mapOverlayHeavyPassEnabled ) this.pxlEnv.mapOverlayHeavyPass.enabled = mapOverlayHeavyPassEnabled;\r\n        if( mapOverlayPassEnabled ) this.pxlEnv.mapOverlayPass.enabled = mapOverlayPassEnabled;\r\n        if( mapOverlaySlimPassEnabled ) this.pxlEnv.mapOverlaySlimPass.enabled = mapOverlaySlimPassEnabled;\r\n                  \r\n        if( mapBoxAAPassEnabled ) this.pxlEnv.mapBoxAAPass.enabled = mapBoxAAPassEnabled;\r\n        if( mapCrossAAPassEnabled ) this.pxlEnv.mapCrossAAPass.enabled = mapCrossAAPassEnabled;\r\n\r\n\r\n        \r\n        if( this.settings.bloom ){\r\n          if( this.pxlEnv.mapGlowPass ) this.pxlEnv.mapGlowPass.enabled=true;  \r\n\r\n          if( this.pxlEnv.roomBloomPass) this.pxlEnv.roomBloomPass.enabled=true;  \r\n\r\n          if( this.pxlEnv.roomGlowPass ) this.pxlEnv.roomGlowPass.enabled=true;  \r\n\r\n          this.pxlEnv.userScreenIntensity.x=.65;\r\n          this.pxlEnv.userScreenIntensity.y=0;\r\n                    circleGateBloom=1;\r\n                    circleGateColor=.25;\r\n        }else{\r\n          if( this.pxlEnv.mapGlowPass ) this.pxlEnv.mapGlowPass.enabled=false;\r\n          if( this.pxlEnv.roomBloomPass ) this.pxlEnv.roomBloomPass.enabled=false;\r\n          if( this.pxlEnv.roomGlowPass ) this.pxlEnv.roomGlowPass.enabled=false;\r\n          \r\n          if( this.pxlEnv?.mapComposerGlow?.renderTarget2 ){\r\n            this.pxlEnv.engine.setRenderTarget(this.pxlEnv.mapComposerGlow.renderTarget2);\r\n            this.pxlEnv.engine.clear();\r\n          }\r\n          if( this.pxlEnv?.roomGlowPass?.renderTarget2 ){\r\n            this.pxlEnv.engine.setRenderTarget(this.pxlEnv.roomGlowPass.renderTarget2);\r\n            this.pxlEnv.engine.clear();\r\n          }\r\n          \r\n          this.pxlEnv.engine.setRenderTarget(null);\r\n                    \r\n          this.pxlEnv.userScreenIntensity.x=.8;\r\n          this.pxlEnv.userScreenIntensity.y=0;\r\n                    \r\n          //multVal=1.0;\r\n          portalIntensity=1;\r\n                    circleGateBloom=0;\r\n                    circleGateColor=.5;\r\n        }\r\n                let cGate=this.pxlEnv.geoList['Circular_Gate'];\r\n        if( cGate ){\r\n                    cGate.material.uniforms.bloomBoost.value=circleGateBloom;\r\n                }\r\n                \r\n                if( this.pxlEnv.geoList['HDRView'] ){\r\n                    this.pxlEnv.geoList['HDRView'].material.uniforms.cdMult.value= this.settings.bloom ? .3 : .7;\r\n                }\r\n                \r\n                let cVid=this.pxlEnv.geoList['CirculateGateVideoSphere'];\r\n        if( cVid ){\r\n                    cVid.material.color.r=circleGateColor;\r\n                    cVid.material.color.g=circleGateColor;\r\n                    cVid.material.color.b=circleGateColor;\r\n                }\r\n                \r\n        if( this.pxlEnv.portaluserScreenIntensity ) this.pxlEnv.portaluserScreenIntensity.x=portalIntensity;\r\n        //this.pxlEnv.pxlRenderSettings.mult=multVal;\r\n        this.pxlEnv.pxlCamera.colliderCurObjHit=null;\r\n        //this.pxlEnv.setExposure(multVal);\r\n  }\r\n  \r\n};","/////////////////////////////////////\r\n// pxlCookieManager -\r\n//  Written by Kevin Edzenga; 2020, 2025\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n//  Read, Write, Clear, a Check if a cookie exists\r\n//  Will prepend a given name to isolate cookies,\r\n//    That said, cookies should be set per room if this is used in pxlNav\r\n//      This way dynamic rooms can maintain\r\n//        cookies between Networking rooms / Environments\r\n//      This would be your \"per room\" user data\r\n//    If not used in pxlNav, just provide a unique prefix to the constructor\r\n\r\n/**\r\n * @namespace pxlCookie\r\n * @description Cookie management\r\n */\r\n\r\n// This is only used for `CookieManager.log()`\r\n//   Alter the verbose check in `log()` to make this file standalone\r\nimport { VERBOSE_LEVEL } from \"./Enums.js\";\r\n\r\nexport class CookieManager{\r\n  constructor(verbose=false, prefix=\"pxlNav-\", path=\"/\", expiration=30){\r\n    // Suffix name to help searching and avoid cookie name conflictions\r\n    let prepPrepend= prefix.substring(-1)==\"-\" ? prefix : prefix+\"-\" ;\r\n    this.prepend=prepPrepend; \r\n    this.verbose=verbose;\r\n    \r\n    // Days till expiration\r\n    this.exp=expiration; \r\n    \r\n    // Update this with the folder name from your domain\r\n    this.path=\"path=\"+path; \r\n    \r\n    // Do not edit this--\r\n    //  This forces cookies to be removed when the expiration value\r\n    //    is set prior to the current date\r\n    this.deleteDate=\"expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n    \r\n    // If variables contain a ';'\r\n    //   The variable will break the cookies for the site\r\n    // Substitute ; with _%_\r\n    this.sub=\"_%_\";\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Simple logger with verbose check\r\n  log( ...logger ){\r\n    if( this.verbose >= VERBOSE_LEVEL.INFO ){\r\n      console.log(\"-- Cookie Manager --\");\r\n      logger.forEach( (l)=>{ console.log(l); } );\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Set expiration date for the new cookie\r\n  getExpiration(){ \r\n    let d = new Date();\r\n    d.setTime( d.getTime() + (this.exp*24*60*60*1000) );\r\n    return \"expires=\" + d.toGMTString() + \";\";\r\n  }\r\n\r\n  // Is the cookie value equal to a given input?\r\n  isEqual( cName ){ \r\n    if( this.hasCookie(cName) ){\r\n      this.log( cName );\r\n      return this.readCookie( cName ) == this.variableToString( cName );\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getRegexp( cName ){\r\n    return new RegExp( '(?=' + cName + ').*?((?=;)|(?=$))', 'g' );\r\n  }\r\n\r\n  // TODO : Validate this opposed to `getRegexp()`\r\n  getClearCookieRegexp( cName ){\r\n    return new RegExp( '(?=' + cName + ').*?(?==)', 'g' );\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  // Read all of CookieManager's controlled cookies\r\n  //   Returns a dictionary of `this.prepend` cookies\r\n  pullData(){ \r\n    let cur = document.cookie;\r\n    let reg = this.getRegexp( this.prepend );\r\n    let curCookies = cur.match( reg );\r\n    \r\n    let ret = {};\r\n    if( curCookies ){\r\n      curCookies.forEach( c =>{ \r\n        let cName = c.split(\"=\")[0].replace(this.prepend,'');\r\n        let cData = c.split(\"=\")[1].replace(this.sub,';');\r\n        ret[cName] = cData;\r\n      });\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Convert given value to a string\r\n  valueToString(val){ \r\n    let type = typeof(val);\r\n    \r\n    if( !isNaN(Number(val)) ){\r\n      return val;\r\n    }else if( type==\"string\" ){\r\n      return \"'\" + val + \"'\";\r\n    }else if( type==\"boolean\" ){\r\n      return ( val ? \"true\" : \"false\" );\r\n    }else if(val==null){ // Non-Strict Null Check; null==undefined true; null===undefined false\r\n      return \"null\";\r\n    }else if( isNaN(Number(val) )){\r\n      return \"NaN\";\r\n    }else{\r\n      return val;\r\n    }\r\n  }\r\n\r\n  // Convert a given variable to a string; account for arrays or not\r\n  variableToString(arr){ \r\n    if( Array.isArray(arr) ){\r\n      let ret = arr.map((x)=>{\r\n        if( Array.isArray(x) ){\r\n          return this.variableToString(x);\r\n        }\r\n        return this.valueToString(x);\r\n      });\r\n      return \"[\" + ret.join(\",\") + \"]\";\r\n    }else{\r\n      return this.valueToString( arr );\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Check if a cookie exists\r\n  hasCookie( cName ){ \r\n    return document.cookie.includes( this.prepend + cName );\r\n  }\r\n  // Read the value of the cookie; returns string\r\n  readCookie( cName ){ \r\n    if(this.hasCookie(cName)){\r\n      let reg = this.getRegexp( this.prepend + cName );\r\n      \r\n      let val = document.cookie.match( reg )[0].split( \"=\" )[1].replace( this.prepend, '' ).replace( this.sub, ';' );\r\n      \r\n      return val;\r\n    }\r\n    return null;\r\n  }\r\n  // Read the value of the cookie; returns rectified value\r\n  parseCookie( cName ){ \r\n    if( this.hasCookie(cName) ){\r\n      let reg = this.getRegexp( this.prepend + cName );\r\n      \r\n      let val=document.cookie.match(reg)[0].split(\"=\")[1].replace(this.prepend,'').replace(this.sub,';');\r\n      \r\n      if( val==\"true\" ){\r\n        val = true;\r\n      }else if( val==\"false\" ){\r\n        val = false;\r\n      }else if( parseInt(val)==val ){\r\n        val=parseInt(val);\r\n      }else if( parseFloat(val)==val ){\r\n        val = parseFloat(val);\r\n      }\r\n      return val;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Read all cookie entries with the given suffix\r\n  evalCookie(cName){ \r\n    if( cName ){\r\n      if( this.hasCookie(cName) ){\r\n        let reg = this.getRegexp( this.prepend + cName );\r\n        this.log(\"Eval Cookie has been limited, responce is: \");\r\n        this.log(document.cookie.match(reg)[0].replace(this.prepend,'').replace(this.sub,';'));\r\n        return true;\r\n      }\r\n      return false;\r\n    }else{\r\n      let reg = this.getRegexp( this.prepend );\r\n      this.log( \"Eval Cookie has been limited, may error.\" );\r\n      document.cookie.match( reg ).forEach( e =>{ e.replace(this.prepend,'').replace(this.sub,';') });\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // Set cookie value; setCookie( string, variable )\r\n  setCookie(cName, cData){ \r\n    cData = this.variableToString(cData);\r\n    if( cData.replace ){\r\n      cData.replace( \";\", this.sub );\r\n    }\r\n    document.cookie = this.prepend + cName + \"=\" + cData + \";\" + this.getExpiration() + this.path;\r\n  }\r\n  \r\n  // Add dictionary keys and values to cookies\r\n  addDictionary(cDict){ \r\n    let cKeys = Object.keys(cDict);\r\n    for( let x=0; x<cKeys.length; ++x ){\r\n      let cData = cDict[ cKeys[x] ];\r\n      cData = this.variableToString(cData);\r\n      if( cData.replace ){\r\n        cData.replace( \";\", this.sub );\r\n      }\r\n      document.cookie = this.prepend + cKeys[x] + \"=\" + cData + \";\" + this.getExpiration() + this.path;\r\n    }\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  // Parse Dict Values, Update if they exist\r\n  //   Overwrites Input Dict\r\n  // Returns if any items in the dict were set\r\n  parseDict(cDict){\r\n    let keys = Object.keys( cDict );\r\n    let ret = false;\r\n    keys.forEach( (k)=>{\r\n      if( this.hasCookie(k) ){\r\n        cDict[k] = this.parseCookie(k);\r\n        ret = true;\r\n      }\r\n    });\r\n    return ret;\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  // Clear specific cookie entry\r\n  clearCookie( cName ){ \r\n    if(!cName){\r\n      let reg = this.getClearCookieRegexp( this.prepend );\r\n      let curCookies = document.cookie.match( reg );\r\n      curCookies.forEach( c =>{ document.cookie = c + \"=;\" + this.deleteDate + this.path; });\r\n    }else{\r\n      if( typeof(cName) == \"string\" ){\r\n        cName=[cName];\r\n      }\r\n      cName.forEach( c =>{ document.cookie = c + \"=;\" + this.deleteDate + this.path; });\r\n    }\r\n  }\r\n}\r\n","// pxlNav Timer\r\n//   Written by Kevin Edzenga; 2020,2024,2025\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n//  Since there are a few different ways to calculate `deltaTime` in a runtime loop,\r\n//    This take the time difference at the begining of the runtime loop step()\r\n//      Incorporating real time user input detection, independent of frame rendering\r\n//        Running at \"browser animation frame\" time\r\n//\r\n//  This may change in the future, since input detection and frame calculations run\r\n//    While frame renders are locked to a given frame rate\r\n//\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n//  For runtime clock and time-based operations\r\n//    Current time - `pxlNav.pxlTimer.curMS`\r\n//    Delta time between frames - `pxlNav.pxlTimer.deltaTime`\r\n//    An averaged delta time between frames - `pxlNav.pxlTimer.avgDeltaTime`\r\n//      By default, averaging is 0.7 -\r\n//        `this.avgDeltaTime = PreviousDeltaTime * (1.0-avgDeltaRate) + CurrentDeltaTime * avgDeltaRate`\r\n//      This provides a blending between the absolute delta times, so this easing isn't a \"lingering\" blending\r\n//        Averaging only takes into considering the prior 3 frames, being 2 delta times\r\n//\r\n//  When blending (Lerp / Slerp) operations,\r\n//    Blending with deltaTime will cause a stuttering effects or mis-matched rates\r\n//      Situations could arrise where `Value * deltaTime` may go above 1.0\r\n//        This will cause blending (Lerp / Slerp) to blend instantly to the target value\r\n//  To remedy this, pass your 'rate' for blending to -\r\n//    deltaTime - `pxlNav.timer.getLerpRate( rate )`\r\n//      -or-\r\n//    avgDeltaTime - `pxlNav.timer.getLerpAvgRate( rate )`\r\n//  This will return a deltaTime influenced rate using -\r\n//    `1.0 - Math.pow( 0.5, deltaTime * rate )`\r\n//      Providing a scalled rate better for blending operations\r\n\r\n/**\r\n * @namespace pxlTimer\r\n * @description Timer and time management\r\n */\r\n\r\n\r\nimport { Vector2 } from \"../../libs/three/three.module.min.js\";\r\n\r\nexport class Timer{\r\n  constructor(){\r\n    this.active=false;\r\n    this.msRunner=new Vector2(0,0);\r\n    this.msLog=0;\r\n    this.fpsStats=-1;\r\n    \r\n    this._msRate = 0.001; // MS to Seconds\r\n    this.baseRate = 0.001; // MS to Seconds\r\n\r\n\t\tlet msTime=new Date().getTime() * this._msRate; // Current time in seconds\r\n    this._bootMS=msTime;\r\n    this._prevWorldMS=msTime;\r\n\t\tthis._curMS=msTime;\r\n    this._prevMS=msTime;\r\n    this.deltaTime=0;\r\n    this.avgDeltaTime=0;\r\n\r\n    this.avgDeltaRate = 0.7;  // Rate of averaging prior delta time with current delta time\r\n\r\n    \r\n    this.videoFeeds=[];\r\n    this.booted=false;\r\n  }\r\n  \r\n  // Reset pxlNav clock\r\n  //   Benchmarking steps the timer\r\n  init(){\r\n    if(!this.booted){\r\n      this.prevMS=this.curMS;\r\n      this.msRunner.x=0;\r\n      this.msRunner.y=0;\r\n      this.step();\r\n      this.booted=true;\r\n    }\r\n  }\r\n  \r\n  get runtime(){\r\n    return this._curMS-this._bootMS;\r\n  }\r\n\r\n  get curMS(){\r\n      return this._curMS;\r\n  }\r\n  updateTime(){\r\n      this._curMS=new Date().getTime() * this._msRate;\r\n  }\r\n  \r\n  get prevMS(){\r\n      return this._prevMS;\r\n  }\r\n  set prevMS( val ){\r\n      this._prevMS=val;\r\n  }\r\n  \r\n  // -- -- --\r\n  \r\n  // Scale the time rate\r\n  //   Since time is scaled, \r\n  scaleTime( scale ){\r\n    this._msRate=this.baseRate*scale;\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  start(){\r\n    this.play();\r\n  }\r\n    \r\n  pause( state=null){\r\n    if( state === null ){\r\n      this.active=!this.active;\r\n    }else{\r\n      this.active=!!state;\r\n    }\r\n    return this.active;\r\n  }\r\n  \r\n  play(){\r\n    this.active=true;\r\n    return this.active;\r\n  }\r\n  \r\n  stop(){\r\n    this.active=false;\r\n    return this.active;\r\n  }\r\n  \r\n  toggleMSLog(){\r\n    this.msLog=(this.msLog+1)%2;\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  step(){\r\n    let prevTime = this._curMS; \r\n\t\tthis.updateTime();\r\n\r\n    // If the time was stepped multiple times in a single frame, ignore the step\r\n    if( this._curMS == prevTime ){\r\n      this._curMS = prevTime;\r\n      return;\r\n    }\r\n\r\n\t\tthis.prevMS=prevTime;\r\n        \r\n    if(this.fpsStats!=-1){\r\n      this.fpsStats.update();\r\n    }\r\n    \r\n\r\n    let msDelta= this.curMS - this.prevMS;\r\n\r\n    this.avgDeltaTime = this.deltaTime * (1.0-this.avgDeltaRate) + msDelta * this.avgDeltaRate;\r\n    this.deltaTime = msDelta;\r\n    this.msRunner.x += (msDelta>0?msDelta:0);\r\n    this.msRunner.y = this.avgDeltaTime; // Prior-frame biased delta time\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // In the case of changing rates of a Lerp,\r\n  //  This will return a \"deltaTime\" influenced lerp rate\r\n  // Note: Using deltaTime alone will cause a missmatch for your lerp rate\r\n  getLerpRate( rate ){\r\n    return 1.0 - Math.pow( 0.5, this.deltaTime * rate );\r\n  }\r\n\r\n  // If the Average Delta Time works better for your needs --\r\n  getLerpAvgRate( rate ){\r\n    return 1.0 - Math.pow( 0.5, this.avgDeltaTime * rate );\r\n  }\r\n\r\n}","\r\n/**\r\n * @namespace pxlUser\r\n * @description User Object\r\n */\r\n\r\nexport class User{\r\n  constructor(id=null){\r\n\r\n    this.pxlEnums=null;\r\n    this.pxlEnv=null;\r\n    this.pxlTimer=null;\r\n\r\n    this.id=null;\r\n    this.Stats=null;\r\n    this.jmaConnectObj=false;\r\n    this.jmaServer=false;\r\n    this.jmaRoom=false;\r\n    this.jmaUserId=null;\r\n    this.jmaUserName=null;\r\n    this.jmaTempUserIdActive=false;\r\n    \r\n    this.welcome=false;\r\n    \r\n    this.tankStrafe=false;\r\n    this.invertMouse=false;\r\n\r\n    // -- -- --\r\n    \r\n    this.moveSpeed = 1.0;\r\n    this.moveSpeedSlow = 0.5;\r\n    this.moveSpeedBase = 1.0;\r\n    this.moveSpeedBoost = 2.0; // Hold shift to boost\r\n\r\n    // -- -- --\r\n\r\n    this.renderSettingsCookie=\"settings_renderSettings\";\r\n    this.controlModeCookie=\"settings_controlMode\";\r\n    this.tankStrageCookie=\"settings_tankStrage\";\r\n    this.invertMouseCookie=\"settings_invertMouse\";\r\n    this.rootUserCookie=\"data_userEnlil\";\r\n    this.adminUserCookie=\"data_userNanna\";\r\n    \r\n    this.localUserMoved=false;\r\n    this.localUserTurned=false;\r\n        \r\n    this.itemRunTime=60; // Time in Seconds an Item is Active\r\n    this.itemGroupList=[];\r\n    this.itemList={};\r\n    this.itemListNames=[];\r\n    this.itemBaseList=[];\r\n    this.itemActiveList=[];\r\n    this.itemInactiveCmd=[];\r\n    this.itemActiveTimer=[];\r\n    this.itemRotateRate=.65;\r\n    this.itemBaseRotateRate=.1;\r\n    this.itemBobRate=.35;\r\n    this.itemBobMag=.0;\r\n    this.mPick=[];\r\n    \r\n    this.activeEffects={};\r\n    \r\n    this.lowGrav=0;\r\n        \r\n    // -- -- --\r\n\r\n    // TODO : Awaiting the much needed Item Manager vv\r\n\r\n    this.lKing=0;\r\n    this.lKingInactive=[.025, .018];\r\n    this.lKingActive=[.35,.25];\r\n    this.lKingWarp=0;\r\n    this.lizardKingPass=null;\r\n        \r\n    this.sField=0;\r\n    this.sFieldWarp=0;\r\n    this.starFieldPass=null;\r\n        \r\n    this.iZoom=0;\r\n    this.iZoomWarp=0;\r\n    this.crystallinePass=null;\r\n\r\n    // -- -- --\r\n        \r\n  }\r\n\r\n\r\n\r\n  // -- -- --\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlEnums=pxlNav.pxlEnums;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  setSlowSpeed( speed ){\r\n    speed = Math.max( 0.001, speed );\r\n    this.moveSpeedSlow = speed;\r\n  }\r\n\r\n  setBaseSpeed( speed ){\r\n    speed = Math.max( 0.001, speed );\r\n    this.moveSpeedBase = speed;\r\n  }\r\n\r\n  setBoostSpeed( speed ){\r\n    speed = Math.max( 0.001, speed );\r\n    this.moveSpeedBoost = speed;\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  // Nothing triggers STOP or SLOW yet\r\n  //   But can be ran from pxlRooms\r\n  setSpeed( enumType ){\r\n    switch(enumType){\r\n      case this.pxlEnums.USER_SPEED.STOP:\r\n        this.moveSpeed = 0;\r\n        break;\r\n      case this.pxlEnums.USER_SPEED.SLOW:\r\n        this.moveSpeed = this.moveSpeedBase * this.moveSpeedSlow;\r\n        break;\r\n      case this.pxlEnums.USER_SPEED.BASE:\r\n        this.moveSpeed = this.moveSpeedBase;\r\n        break;\r\n      case this.pxlEnums.USER_SPEED.BOOST:\r\n        this.moveSpeed = this.moveSpeedBase * this.moveSpeedBoost;\r\n        break;\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  checkItemWearOff(curTime){\r\n    if(this.itemActiveList.length > 0){\r\n      let timeLeft=this.itemActiveTimer[0]-curTime;\r\n      if(timeLeft<=0){\r\n        let cmd=this.itemInactiveCmd.shift();\r\n        cmd();\r\n        this.itemActiveTimer.shift();\r\n        this.itemActiveList.shift();\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  checkItemPickUp(itemName){\r\n    if(itemName==\"LowGravity\"){\r\n      if(this.lowGrav==0){\r\n        this.lowGrav=1;\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    }else if( itemName==\"LizardKing\" ){\r\n      if(this.lKing==0){\r\n        this.lKing=1;\r\n                this.lKingWarp.set( ...this.lKingActive );\r\n                this.lizardKingPass.enabled=true;\r\n                //this.lKingRoomPass.enabled=true;\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    }else if( itemName==\"StarField\" ){\r\n      if(this.sField==0){\r\n        this.sField=1;\r\n                this.starFieldPass.enabled=true;\r\n                //this.lKingRoomPass.enabled=true;\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    }else if( itemName==\"InfinityZoom\" ){\r\n      if(this.iZoom==0){\r\n        this.iZoom=1;\r\n                this.crystallinePass.enabled=true;\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  toggleTankRotate(active=null){\r\n    this.tankStrafe= active==null ? !this.tankStrafe : active;\r\n    this.tankStrageText= this.tankStrafe ? \"Left/Right Rotation\" : \"Left/Right Strafe\" ;\r\n  }\r\n  toggleMouseInf(active=null){\r\n    this.invertMouse= active==null ? !this.invertMouse : active;\r\n    this.invertMouseText= this.invertMouse ? \"Revert Mouse\" : \"Invert Mouse\" ;\r\n  }\r\n  toggleFpsStats(){\r\n    /*if(this.pxlTimer.fpsStats == -1){\r\n      this.pxlTimer.fpsStats=new Stats();\r\n      document.body.appendChild(this.pxlTimer.fpsStats.domElement);\r\n      this.pxlTimer.fpsStats.update();\r\n      this.fpsDisplayText=\"Hide FPS Stats\";\r\n    }else{\r\n      this.pxlTimer.fpsStats.domElement.remove();\r\n      this.pxlTimer.fpsStats=-1;\r\n      this.fpsDisplayText=\"Display FPS Stats\";\r\n    }*/\r\n  }\r\n}","\r\n/**\r\n * @namespace pxlDevice\r\n * @description Device and input handling\r\n */\r\n\r\nimport { \r\n  Vector2,\r\n  Vector3,\r\n  Quaternion\r\n} from \"../../libs/three/three.module.min.js\";\r\n\r\n// TODO : So much dependency on outside data and classes\r\n//          Promote as much as possible to callback subscriptions\r\n\r\nexport class Device{\r\n  constructor(projectTitle, pxlCore, mobile){\r\n    this.projectTitle=projectTitle;\r\n    this.pxlCore=pxlCore;\r\n    this.pxlEnv=null;\r\n    this.pxlEnums=null;\r\n    this.pxlTimer=null;\r\n    this.pxlAudio=null;\r\n    this.pxlUser=null;\r\n    this.pxlCamera=null;\r\n    this.pxlAutoCam=null;\r\n    this.pxlGuiDraws=null;\r\n    this.pxlQuality=null;\r\n    this.pxlOptions=null;\r\n\r\n\r\n    // If the cursor swaps between grabbing and grabable\r\n    // 'false' will keep the cursor as a pointer\r\n    // 'true' will be grabable over pxlNav, grabbing while clicking\r\n    this.allowCursorSwap = false;\r\n\r\n    this.longTouchLength = .75; // Seconds to hold a tap, without moving, for long touch\r\n    \r\n    //this.bootTime=new Date().getTime();\r\n\r\n    let sW = window.innerWidth;\r\n    let sH = window.innerHeight;\r\n    this.sW=sW;\r\n    this.sH=sH;\r\n\r\n    this.lookRange = .30;\r\n    this.lookXScalar = 1 / (this.sW * this.lookRange);\r\n    this.lookYScalar = 1 / (this.sH * this.lookRange);\r\n    this.touchScreen=false;\r\n    this.x=sW*.5;\r\n    this.y=sH*.5;\r\n    this.screenRes=new Vector2( 1/sW,1/sH );\r\n    this.screenAspect=new Vector2( 1,1);//sH/sW,sW/sH );\r\n    this.screenRatio=new Vector2( sW/sH, sH/sW );\r\n    this.origRes=new Vector2( sW, sH );\r\n    this.screenResDeltaPerc=new Vector2( 1, 1 );\r\n    this.mapW=1;\r\n    this.mapH=1;\r\n    //this.wheelDelta=0;\r\n    \r\n    this.gammaCorrection = new Vector3(1,1,1);\r\n    this.lightShift = new Vector2(1,1);\r\n    \r\n    this.firefox=/Firefox/i.test(navigator.userAgent);\r\n    this.mobile=mobile;\r\n        \r\n    //const IE = document.all?true:false;\r\n    //this.mouseWheelEvt=(firefox)? \"DOMMouseScroll\" : \"mousewheel\" ;\r\n    this.button=0;\r\n    this.inputActive=false;\r\n    this.startPos=[0,0];\r\n    this.endPos=[0,0];\r\n    this.dragCount=0;\r\n    this.dragTotal=0;\r\n    this.latched=false;\r\n    this.windowHidden=false;\r\n    \r\n    // -- -- -- -- -- -- -- -- //\r\n    \r\n    this.mouseX=sW/2;\r\n    this.mouseY=sH/2;\r\n\r\n    this.keyDownCount=[0,0,0];\r\n    this.directionKeyDown=false;\r\n    this.directionKeysPressed=[0,0,0,0];\r\n    this.controlKey=false;\r\n    \r\n    this.objectPercList=[];\r\n    this.objectPercFuncList={};\r\n    this.objectPerc={\r\n        active:false,\r\n        object:null,\r\n        left:0,\r\n        top:0,\r\n        width:0,\r\n        height:0,\r\n        startX:0,\r\n        startY:0,\r\n        offsetX:0,\r\n        offsetY:0,\r\n        percX:0,\r\n        percY:0,\r\n        offsetPercX:0,\r\n        offsetPercY:0,\r\n    };\r\n    this.canCursorLock=\r\n      'pointerLockElement' in document||\r\n      'mozPointerLockElement' in document ||\r\n      'webkitPointerLockElement' in document;\r\n    this.cursorLockActive=false;\r\n    this.cursorRightButtonLockActive=false;\r\n    \r\n    // ## All of this isn't needed, clean it up\r\n    //      Controller Module?\r\n    this.gyroGravity=[0,0,0];\r\n    this.touchMouseData={\r\n      'active':false,\r\n      'lock':false,\r\n      'mode':0,\r\n      'updated':0,\r\n      'button':0,\r\n      'dragCount':0,\r\n      'dragTotal':0,\r\n      'startPos':null, //vec2\r\n      'moveMult':new Vector2(1.,1.),\r\n      'velocityEase':new Vector2(0,0),\r\n      'velocityEasePrev':null, // new Vector2(0,0)\r\n      'velocity':new Vector2(0,0), //vec2\r\n      'mBlurVelInf':new Vector2(2*this.screenRes.x,2*this.screenRes.y),\r\n      'prevDeltaPos':[0,0,0], //vec2\r\n      'endPos':null, //  [x,y] \r\n      'latchMatrix':null, // Mat4\r\n      'netDistance':new Vector2(0,0), //vec2\r\n      'netDistYPerc':0, //vec2\r\n      'curDistance':new Vector2(0,0), //vec2\r\n      'curFadeOut':new Vector2(0,0), //vec2\r\n      'curStepDistance':new Vector2(0,0), //vec2\r\n      'initialQuat':new Quaternion(),\r\n      'releaseTime':0,\r\n    };\r\n        \r\n    this.subscriptableEvents=[\r\n        //\"touchstart\",\r\n        //\"touchmove\",\r\n        //\"touchend\",\r\n        //\"mousedown\",\r\n        //\"mousemove\",\r\n        //\"mouseup\",\r\n        \"keydown\",\r\n        \"keyup\",\r\n        \"resize\"\r\n      ];\r\n    this.callbackList={};\r\n    \r\n  }\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n    this.pxlEnums=pxlNav.pxlEnums;\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlAudio=pxlNav.pxlAudio;\r\n    this.pxlUser=pxlNav.pxlUser;\r\n    this.pxlCamera=pxlNav.pxlCamera;\r\n    this.pxlAutoCam=pxlNav.pxlAutoCam;\r\n    this.pxlGuiDraws=pxlNav.pxlGuiDraws;\r\n    this.pxlQuality=pxlNav.pxlQuality;\r\n    this.pxlOptions=pxlNav.pxlOptions;\r\n  }\r\n\r\n  init(){\r\n    \r\n    this.setGammaCorrection();\r\n    \r\n    let curObj=this;\r\n    if( !this.pxlOptions.staticCamera || (this.pxlOptions.allowStaticRotation && this.pxlOptions.staticCamera) ){\r\n      document.addEventListener(\"mousedown\", (e)=>{ curObj.onmousedown(curObj,e); }, false);\r\n      document.addEventListener(\"mousemove\", (e)=>{ curObj.onmousemove(curObj,e); }, false);\r\n      document.addEventListener(\"mouseup\", (e)=>{ curObj.onmouseup(curObj,e); }, false);\r\n      document.addEventListener('touchstart', function(e) {curObj.touchstart(curObj,e);}, {passive : true});\r\n      document.addEventListener('touchmove', function(e) {curObj.touchmove(curObj,e);}, {passive : true});\r\n      document.addEventListener('touchend', function(e) {curObj.touchend(curObj,e);}, {passive : true});\r\n    }\r\n\r\n    document.addEventListener(\"contextmenu\", (e)=>{ curObj.oncontextmenu(e); }, false);\r\n    window.addEventListener(\"resize\", (e)=>{ curObj.resizeRenderResolution(); }, false);\r\n    \r\n    document.onkeydown=(e)=>{curObj.onkeydown(curObj,e)};\r\n    document.onkeyup=(e)=>{curObj.onkeyup(curObj,e)};\r\n  \r\n    let tmpThis=this;\r\n    /*window.addEventListener(\"popstate\", (e)=>{\r\n        console.log( e );\r\n        //JSON.stringify(e.state);\r\n    });*/\r\n    document.addEventListener(\"visibilitychange\", this.onVisibilityChange.bind(this), false);\r\n      \r\n      if( typeof window.onblur == \"object\" ){\r\n          window.onblur= this.resetUserInput.bind(this);\r\n      }\r\n        /*\r\n    window.addEventListener( 'blur', (e)=>{\r\n      tmpThis.directionKeysPressed=[0,0,0,0];\r\n      tmpThis.directionKeyDown=false;\r\n      tmpThis.pxlUser.setSpeed( tmpThis.pxlEnums.USER_SPEED.STOP );\r\n      tmpThis.pxlCamera.workerFunc(\"focus\");\r\n    });*/\r\n    window.addEventListener( 'beforeunload', (e)=>{\r\n      if( tmpThis.controlKey==true ){\r\n          e.preventDefault();\r\n          e.returnValue=\"Close tab?\";\r\n          tmpThis.controlKey=false;\r\n          tmpThis.mapLockCursor(false, 0);\r\n          return \"Close tab?\";\r\n      }\r\n    });\r\n\r\n\r\n    // Catch uncaught promises --\r\n    window.addEventListener('unhandledrejection', ( e )=>{\r\n      if( this.verbose >= this.pxlEnums.VERBOSE_LEVEL.ERROR ){\r\n          console.error('Unhandled promise rejection:', e.reason);\r\n      }else{ // Silently fail rejections\r\n        e.preventDefault();\r\n      }\r\n      return false;\r\n    });\r\n  }\r\n    \r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  step(){\r\n    this.addMoveDelta();\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  // Post Process Gamma Correction; Set from Value / Detect based on OS\r\n  // Default Gamma Settings --\r\n  //   Windows - 2.2\r\n  //   Mac - 1.8\r\n  //   Linux - 1\r\n  //     **Linux seems wrong, but can't find any reliable values other than `1`\r\n  setGammaCorrection( value=null ){\r\n    if( value != null ){ // Set from Settings Menu\r\n      this.gammaCorrection.x = 1/value;\r\n      this.gammaCorrection.y = value;\r\n      this.gammaCorrection.z = value;\r\n      return;\r\n    }\r\n    \r\n    // Detect based on device operating system\r\n    let toGamma = 1.5; // Most devices will be 1 (Mobile); Fail to middle ground\r\n    let lightShift = 1.1; // Most devices will be 1 (Mobile); Fail to middle ground\r\n    let shadowShift = 1.2; // Most devices will be 1 (Mobile); Fail to middle ground\r\n    let shadowBoost = .5;\r\n    if( window && window.navigator && window.navigator.userAgent ){\r\n      let isWindows = window.navigator.userAgent.match(/(windows|win32|win64|wince)/i)\r\n      if( isWindows && isWindows.length>0 ){ \r\n        toGamma = 2.2; // Windows\r\n        lightShift = 0.95;\r\n        shadowShift = 1;\r\n        shadowBoost = 0;\r\n      }else{\r\n        let isMac = window.navigator.userAgent.match(/(macintosh|macintel|macppc|mac68k|iphone|ipad|ipod)/i)\r\n        if( isMac && isMac.length>0 ){ \r\n          toGamma = 1.8; // Mac\r\n          lightShift = 0.9;\r\n          shadowShift = .97;\r\n          shadowBoost = .1;\r\n        }else{ \r\n          toGamma = 1.8; // Linux / Android\r\n          lightShift = 0.70;\r\n          shadowShift = .96;\r\n          shadowBoost = .1;\r\n        }\r\n      }\r\n    }\r\n    // Color space is bugging me.... Just designing for windows and adjusting for the others\r\n    this.gammaCorrection.x = 1/toGamma;\r\n    this.gammaCorrection.y = shadowShift;\r\n    this.gammaCorrection.z = shadowBoost;\r\n    this.lightShift.x = lightShift;\r\n  }\r\n    \r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  getRenderScalar(){\r\n    let renderScalar = 1.0;\r\n    if( this.mobile && this.pxlOptions.renderScale.mobile != 0){\r\n      renderScalar = this.pxlOptions.renderScale.mobile;\r\n    }else if( this.pxlOptions.renderScale.pc != 0){\r\n      renderScalar = this.pxlOptions.renderScale.pc;\r\n    }\r\n\r\n    return renderScalar;\r\n  }\r\n\r\n  // Set main pxlNav canvas size, with overscan if enabled\r\n  //   Overscan is a percentage to render outside the canvas size\r\n  //     But is scaled back to fit within the canvas\r\n  //   This is primarily to allow for better rendering on mobile devices\r\n  // Set `overscan` in pxlOptions to a percentage value\r\n  //   pxlOptions.overscan = {\r\n  //    'pc' : 0.0,\r\n  //    'mobile' : 0.0\r\n  //   }\r\n  /**\r\n   * Set main pxlNav canvas size, with overscan if enabled\r\n   * \r\n   * Overscan is a percentage to render outside the canvas size\r\n   * <br/>&nbsp;&nbsp; But is scaled back to fit within the canvas\r\n   * <br/>This is primarily to allow for better rendering on mobile devices\r\n   */\r\n  setCanvasSize( sW, sH ){\r\n    // Set main pxlNav Canvas Size\r\n    this.pxlGuiDraws.pxlNavCanvas.width = sW;\r\n    this.pxlGuiDraws.pxlNavCanvas.height = sH;\r\n    \r\n    let renderScalar = this.getRenderScalar();\r\n\r\n    // Set overscan if enabled\r\n    if( renderScalar != 1.0 ){\r\n      let overscanFit = 1 / renderScalar;\r\n      this.pxlGuiDraws.pxlNavCanvas.style.transform = \"scale(\" + overscanFit + \")\";\r\n    }else{\r\n      this.pxlGuiDraws.pxlNavCanvas.style.transform = \"\";\r\n    }\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  runHiddenCalcs(){\r\n      if( this.windowHidden ){\r\n          setTimeout( ()=>{\r\n              this.runHiddenCalcs();\r\n          }, 100);\r\n      }\r\n  }\r\n  \r\n  onVisibilityChange(){\r\n    this.windowHidden=document.hidden ;\r\n          \r\n    this.directionKeysPressed=[0,0,0,0];\r\n    this.directionKeyDown=false;\r\n    this.pxlUser.setSpeed( this.pxlEnums.USER_SPEED.BASE );\r\n    this.pxlCamera.workerFunc(\"focus\", !document.hidden);\r\n    \r\n    this.runHiddenCalcs();\r\n  }\r\n\r\n  resetUserInput(e){\r\n    this.directionKeysPressed=[0,0,0,0];\r\n    this.directionKeyDown=false;\r\n    this.pxlUser.setSpeed( this.pxlEnums.USER_SPEED.BASE );\r\n    this.mapLockCursor(false,0);\r\n    this.pxlCamera.camJumpKey(false);\r\n    this.pxlCamera.deviceKey(\"space\", false);\r\n    \r\n    if( this.touchMouseData.active ){\r\n      if( this.touchScreen ){\r\n        this.endTouch(e);\r\n      }else{\r\n        this.mapOnUp(e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  requestFullScreen(){\r\n    let elem = document.documentElement;\r\n    let requestMethod = elem.requestFullScreen ||\r\n                        elem.webkitRequestFullScreen ||\r\n                        elem.mozRequestFullScreen ||\r\n                        elem.msRequestFullScreen;\r\n    if( requestMethod ){\r\n      requestMethod.call(elem);\r\n    }\r\n  }\r\n\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  \r\n  onmousemove(curObj,e){\r\n    curObj.mapOnMove(e);\r\n  }\r\n  onmousedown(curObj,e){\r\n\r\n    curObj.mapOnDown(e);\r\n  }\r\n  onmouseup(curObj,e){\r\n    curObj.mapOnUp(e);\r\n  }\r\n  oncontextmenu(e){\r\n        e.preventDefault();\r\n        return false;\r\n  }\r\n  touchstart(curObj,e){\r\n    curObj.startTouch(e);\r\n  }\r\n  touchmove(curObj,e){\r\n    curObj.doTouch(e);\r\n  }\r\n  touchend(curObj,e){\r\n    curObj.endTouch(e);\r\n  }\r\n  onkeydown(curObj,e){\r\n    curObj.keyDownCall(e);\r\n  }\r\n  onkeyup(curObj,e){\r\n    curObj.keyUpCall(e);\r\n  }\r\n  \r\n  \r\n  get active(){\r\n    return this.inputActive;\r\n  }\r\n  set active(state){\r\n    this.inputActive=!!state;\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  preventDefault(e){\r\n    e=e||window.event;\r\n    if (e.preventDefault(e)){\r\n      e.preventDefault(e)();\r\n    }\r\n    e.returnValue=false;\r\n  }\r\n    \r\n  setCursor(cursorType){\r\n    if(this.allowCursorSwap){\r\n      if(cursorType == \"activeLatch\"){\r\n              let cursorType=[\"grab\", \"grabbing\",\"all-scroll\"][this.touchMouseData.button];\r\n      }\r\n      document.body.style.cursor=cursorType;\r\n    }\r\n  }\r\n\r\n  hideAddressBar(){\r\n    setTimeout(function(){ window.scrollTo(0, 1); }, 0);\r\n  }\r\n    \r\n  getMouseXY(e){\r\n    //e.this.preventDefault(e)();\r\n    if(!this.mobile){\r\n      let invert=this.pxlQuality.settings.mouse ? -1 : 1;\r\n      if(this.cursorLockActive){\r\n        this.mouseX+=(e.movementX||e.mozMovementX||e.webkitMovementX||0)*invert;\r\n        this.mouseY+=(e.movementY||e.mozMovementY||e.webkitMovementY||0)*invert;\r\n      }else{\r\n        this.mouseX=e.clientX;\r\n        this.mouseY=e.clientY;\r\n      }\r\n    }else{\r\n      try{\r\n        let touch = e.touches[0];\r\n        this.mouseX = touch.pageX;\r\n        this.mouseY = touch.pageY;\r\n        //pxlDevice.touchMouseData.startPos=new Vector2(this.mouseX,this.mouseY);\r\n        //pxlDevice.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n      }catch(err){};\r\n    }\r\n    //mapMouse.x=(this.mouseX/sW)*2 - 1;\r\n    //mapMouse.y=-(this.mouseY/sH)*2 + 1;\r\n  }\r\n\r\n  mapLockCursor(lock=false, button){\r\n    if(this.canCursorLock && !this.mobile ){\r\n      if(button==2){\r\n        if(!lock && this.cursorRightButtonLockActive){\r\n          this.cursorRightButtonLockActive=false;\r\n        }else if(!lock && !this.cursorRightButtonLockActive){\r\n          this.cursorRightButtonLockActive=true;\r\n        }\r\n        \r\n        lock=lock || this.cursorRightButtonLockActive;\r\n      }else{\r\n        if(!lock){\r\n          this.cursorRightButtonLockActive=lock;\r\n        }\r\n      }\r\n      \r\n      if(lock==true){\r\n        this.pxlGuiDraws.pxlNavCanvas.focus();\r\n        let curCanvas = this.pxlGuiDraws.pxlNavCanvas;\r\n        curCanvas.requestPointerLock = curCanvas.requestPointerLock || \r\n                                       curCanvas.mozRequestPointerLock ||\r\n                                       curCanvas.webkitRequestPointerLock;\r\n        try{\r\n          curCanvas.requestPointerLock()\r\n          //  Catch isn't working on firefox\r\n          //    .catch((err)=>{}); // User likely hit ESC out of the cursor lock\r\n        }catch(err){}\r\n      }else{\r\n        if( document.pointerLockElement ){\r\n          document.exitPointerLock();\r\n        }\r\n      }\r\n      this.cursorLockActive=lock;\r\n    }\r\n  }\r\n\r\n  mapOnDown(e){\r\n    //let target= e.path ? e.path[0] : e.target; // Chrome or Firefox\r\n    let target= e.target; // Chrome or Firefox\r\n    if( target.getAttribute && target.getAttribute(\"id\") == this.pxlCore && this.pxlTimer.active ){\r\n      if(this.pxlGuiDraws.chatMessageInput){ this.pxlGuiDraws.chatMessageInput.blur(); }\r\n      this.pxlGuiDraws.pxlNavCanvas.focus();\r\n      this.preventDefault(e);\r\n      this.touchMouseData.button=e.which;\r\n      this.touchMouseData.active=true;\r\n      this.touchMouseData.mode=this.touchMouseData.button;\r\n      this.touchMouseData.startPos=new Vector2(this.mouseX,this.mouseY);\r\n      this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n      this.touchMouseData.curDistance=new Vector2(0,0);\r\n      this.touchMouseData.curStepDistance=new Vector2(0,0);\r\n      this.touchMouseData.dragCount=0;\r\n      this.pxlAutoCam.touchBlender=false;\r\n      this.setCursor(\"grabbing\");\r\n      this.mapLockCursor(true, e.button);\r\n    }\r\n  }\r\n  mapOnMove(e){\r\n    //let target= e.path ? e.path[0] : e.target; // Chrome or Firefox\r\n    let target= e.target; // Chrome or Firefox\r\n\r\n    if( (target.getAttribute && target.getAttribute(\"id\") == this.pxlCore && this.pxlTimer.active) || this.cursorLockActive){\r\n\r\n      this.preventDefault(e);\r\n      this.getMouseXY(e);\r\n      if((this.touchMouseData.active || this.cursorLockActive) && this.touchMouseData.startPos ){\r\n        this.touchMouseData.dragCount++;\r\n\r\n        let xyDeltaTemp=this.touchMouseData.endPos.clone();\r\n        this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n        this.touchMouseData.curDistance= this.touchMouseData.startPos.clone().sub(this.touchMouseData.endPos) ;\r\n        \r\n        this.touchMouseData.curStepDistance = this.touchMouseData.endPos.clone().sub(xyDeltaTemp) ;\r\n        this.touchMouseData.netDistance.add( this.touchMouseData.curStepDistance.clone());\r\n        //let curvelocity=this.touchMouseData.velocity.clone();\r\n        this.touchMouseData.velocity = this.touchMouseData.velocity.clone().multiplyScalar(3).add(this.touchMouseData.curStepDistance).multiplyScalar(.25);\r\n\r\n        // ## Add into this.pxlQuality for 3rd mouse velocity reference\r\n        /*this.touchMouseData.velocity.add(this.touchMouseData.curStepDistance).multiplyScalar(.5);\r\n        let curveleaseprev=this.touchMouseData.velocityEasePrev.clone();\r\n        this.touchMouseData.velocityEasePrev=this.touchMouseData.velocityEase.clone();\r\n        this.touchMouseData.velocityEase=curveleaseprev.clone().add(curvelocity.add(this.touchMouseData.velocity).multiplyScalar(.5)).multiplyScalar(.5);*/\r\n        \r\n        this.touchMouseData.netDistYPerc = (this.touchMouseData.netDistance.y+this.touchMouseData.curDistance.y+250)*0.0008;\r\n        this.touchMouseData.curFadeOut.add( xyDeltaTemp.sub(this.touchMouseData.endPos)  );\r\n        \r\n      }else{\r\n        this.pxlEnv.hoverUserDetect();\r\n      }\r\n    }\r\n  }\r\n  mapOnUp(e){\r\n    //let target= e.path ? e.path[0] : e.target; // Chrome or Firefox\r\n    let target= e.target; // Chrome or Firefox\r\n        if( this.pxlAudio.djVolumeParentObj ){\r\n            this.pxlAudio.djVolumeParentObj.down=false;\r\n        }\r\n        if( target.getAttribute && target.getAttribute(\"id\") == this.pxlCore){\r\n            this.pxlGuiDraws.checkFocus( target.getAttribute(\"id\"), true );\r\n            \r\n            if( this.mobile ){\r\n                this.pxlAutoCam.getNextPath(false, 1);\r\n            }else{\r\n                \r\n                this.preventDefault(e);\r\n                \r\n                this.touchMouseData.dragCount++;\r\n                this.touchMouseData.dragTotal+=this.touchMouseData.dragCount;\r\n                this.touchMouseData.active=false;\r\n                this.touchMouseData.releaseTime=this.pxlTimer.curMS;\r\n                this.pxlAutoCam.touchBlender=true;\r\n                this.pxlAutoCam.setNextTrigger();\r\n                \r\n                if(this.touchMouseData.dragCount<9){ // User simply clicked, didn't dragCount\r\n                    this.pxlEnv.clickUserDetect();\r\n                }\r\n                this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n                this.touchMouseData.netDistYPerc =  (this.touchMouseData.netDistance.y+250)/1250;\r\n                //this.touchMouseData.curDistance.multiplyScalar(0);\r\n                //this.touchMouseData.curStepDistance.multiplyScalar(0);\r\n                this.setCursor(\"grab\");\r\n                \r\n                this.mapLockCursor(false, e.button);\r\n                \r\n                e.preventDefault();\r\n                return false;\r\n            }\r\n        }\r\n  }\r\n\r\n    // -- -- -- -- -- -- //\r\n    \r\n  startTouch(e) {\r\n    \r\n    let target= e.target; // Chrome or Firefox\r\n    // Check if something other than the pxlCore canvas was touched\r\n    let runTouch = target.getAttribute && target.getAttribute(\"id\") == this.pxlCore && this.pxlTimer.active;\r\n    if( !runTouch ){\r\n      return;\r\n    }\r\n\r\n    this.touchScreen=true;\r\n    let touch = e.touches[0];\r\n    this.mouseX = touch.pageX;  \r\n    this.mouseY = touch.pageY;\r\n    this.touchMouseData.active=true;\r\n    this.touchMouseData.mode=this.touchMouseData.button;\r\n    this.touchMouseData.startPos=new Vector2(this.mouseX,this.mouseY);\r\n    this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n    this.touchMouseData.curDistance=new Vector2(0,0);\r\n    this.touchMouseData.curStepDistance=new Vector2(0,0);\r\n    this.touchMouseData.dragCount=0;\r\n    this.pxlAutoCam.touchBlender=false;\r\n    this.touchMouseData.releaseTime=this.pxlTimer.curMS;\r\n    \r\n    let id=target.getAttribute(\"id\");\r\n    if( this.objectPercList.includes( id ) ){\r\n      if( id == \"djPlayerVolume\" ){\r\n        target=this.pxlAudio.djVolumeParentObj;\r\n        id=target.getAttribute(\"id\");\r\n      }\r\n      \r\n      let pBB=target.getBoundingClientRect();\r\n\r\n      this.objectPerc.active=true;\r\n      this.objectPerc.object=target;\r\n      this.objectPerc.left=pBB.left;\r\n      this.objectPerc.top=pBB.top;\r\n      this.objectPerc.width=pBB.width;\r\n      this.objectPerc.height=pBB.height;\r\n      this.objectPerc.startX= this.mouseX - pBB.left;\r\n      this.objectPerc.startY= this.mouseY - pBB.top;\r\n      this.objectPerc.percX= ( this.mouseX - this.objectPerc.left ) / this.objectPerc.width ;\r\n      this.objectPerc.percY= ( this.mouseY -this.objectPerc.top ) / this.objectPerc.height ;\r\n      this.objectPerc.offsetX=0;\r\n      this.objectPerc.offsetY=0;\r\n      this.objectPerc.offsetPercX = 0 ;\r\n      this.objectPerc.offsetPercY = 0 ;\r\n      \r\n      if( this.objectPercFuncList[id] ){\r\n        this.objectPercFuncList[id](e);\r\n      }\r\n    }\r\n  }\r\n\r\n  doTouch(e) {\r\n    \r\n    // Touch started on something other than the pxlCore canvas, ignore\r\n    if(!this.touchMouseData.active){\r\n      return;\r\n    }\r\n    \r\n    let target= e.target; // Chrome or Firefox\r\n\r\n    let touch = e.touches[0];\r\n    this.mouseX=touch.pageX;\r\n    this.mouseY=touch.pageY;\r\n    if(this.touchMouseData.active){\r\n      this.touchMouseData.dragCount++;\r\n      \r\n      // Rotate the fog color, cause why not???\r\n      // TODO : \"why not???\" because its specific to Antibody Club,\r\n      //          But its fun, so I'll figure out some way to make it a bit more generic if the user wants to enable it\r\n      if(typeof(e.touches[1]) !== 'undefined'){\r\n        let touchTwo = e.touches[1];\r\n        if( e.touches.length>1 && this.touchMouseData.dragCount>10 ){\r\n          this.touchMouseData.lock=true;\r\n          touch = e.touches[1];\r\n          this.pxlEnv.setFogHue( [this.mouseX, this.mouseY], [touch.pageX, touch.pageY] );\r\n        }\r\n        return;\r\n      }\r\n\r\n      let xyDeltaTemp=this.touchMouseData.endPos.clone();\r\n      this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n      this.touchMouseData.curDistance= this.touchMouseData.startPos.clone().sub(this.touchMouseData.endPos) ;\r\n      this.touchMouseData.curStepDistance = this.touchMouseData.endPos.clone().sub(xyDeltaTemp) ;\r\n      this.touchMouseData.netDistance.add( this.touchMouseData.curStepDistance.clone() );\r\n      this.touchMouseData.velocity.add(this.touchMouseData.curStepDistance).multiplyScalar(.5);\r\n      //this.touchMouseData.velocityEase.add(this.touchMouseData.curStepDistance).multiplyScalar(.5);\r\n            \r\n      this.touchMouseData.netDistYPerc =  (this.touchMouseData.netDistance.y+this.touchMouseData.curDistance.y+250)/1250;\r\n      this.touchMouseData.curFadeOut.add( xyDeltaTemp.sub(this.touchMouseData.endPos)  );\r\n    }\r\n      \r\n    if( this.objectPerc.active ){\r\n      this.objectPerc.percX = ( this.mouseX - this.objectPerc.left ) / this.objectPerc.width ;\r\n      this.objectPerc.percY = ( this.mouseY - this.objectPerc.top ) / this.objectPerc.height ;\r\n      this.objectPerc.offsetX = this.mouseX - this.objectPerc.startX ;\r\n      this.objectPerc.offsetY = this.mouseY - this.objectPerc.startY ;\r\n      this.objectPerc.offsetPercX = this.objectPerc.offsetX / this.objectPerc.width ;\r\n      this.objectPerc.offsetPercY = this.objectPerc.offsetY / this.objectPerc.height ;\r\n    }\r\n        \r\n  }\r\n  endTouch(e) {\r\n\r\n    // Touch started on something other than the pxlCore canvas, ignore\r\n    if(!this.touchMouseData.active){\r\n      return;\r\n    }\r\n\r\n    this.touchScreen=false;\r\n    this.touchMouseData.dragCount++;\r\n    this.touchMouseData.dragTotal+=this.touchMouseData.dragCount;\r\n    this.touchMouseData.active=false;\r\n    this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n    //this.touchMouseData.netDistance.add( this.touchMouseData.curDistance.clone() );\r\n    //this.touchMouseData.netDistance.y = Math.max(-1000, Math.min(1500, this.touchMouseData.netDistance.y ));\r\n    this.touchMouseData.netDistYPerc =  (this.touchMouseData.netDistance.y+250)/1250;\r\n    this.touchMouseData.curDistance.multiplyScalar(0);\r\n    this.touchMouseData.curStepDistance.multiplyScalar(0);\r\n        \r\n    /*\r\n      // Disabling for now, but is the overlay effect trigger when holding a long-touch\r\n      if( this.mobile && this.touchMouseData.dragCount<10 && this.pxlTimer.curMS-this.touchMouseData.releaseTime > this.longTouchLength ){\r\n        this.pxlCamera.itemTrigger();\r\n        this.touchMouseData.lock=true;\r\n      }\r\n        */\r\n      this.touchMouseData.releaseTime=this.pxlTimer.curMS;\r\n      \r\n      if( this.touchMouseData.lock ){\r\n          this.touchMouseData.lock=false;\r\n          return;\r\n      }\r\n      \r\n      this.pxlAutoCam.touchBlender=true;\r\n      this.pxlAutoCam.setNextTrigger();\r\n        \r\n    //let target= e.path ? e.path[0] : e.target; // Chrome or Firefox\r\n    /*let target= e.target; // Chrome or Firefox\r\n      //let dragLength=this.touchMouseData.startPos.clone().sub( this.touchMouseData.endPos ).length();\r\n      if( this.touchMouseData.dragCount < 10 && target.getAttribute && target.getAttribute(\"id\")==this.pxlCore ){\r\n          // this.pxlAutoCam.prevNextAutoCam(1, true);\r\n          this.pxlAutoCam.getNextPath(false, 0);\r\n      }\r\n      \r\n      this.objectPerc.active=false;\r\n      if( this.pxlAudio.djVolumeParentObj ){\r\n          this.pxlAudio.djVolumeParentObj.down=false;\r\n      }*/\r\n  }\r\n    \r\n    // -- -- -- -- -- -- //\r\n    \r\n  async keyDownCall(e){\r\n\r\n    this.emit(\"keydown\", e);\r\n\r\n    //e.this.preventDefault(e)();\r\n        if( e.ctrlKey ){\r\n            this.controlKey=true;\r\n        }\r\n    if(document.activeElement.type==undefined ){\r\n      //%=\r\n      if(false){\r\n      //%\r\n      if( e.ctrlKey || e.altKey || e.code.includes(\"F\") ){\r\n          e.preventDefault();\r\n          return false;\r\n      }\r\n      //%=\r\n      }\r\n      //%\r\n      \r\n      if( this.pxlTimer.active){\r\n        if( e.repeat ){\r\n          return;\r\n        }\r\n\r\n        let keyHit=e.keyCode || e.which;\r\n        if(keyHit==37 || keyHit==65){ // Left\r\n          this.directionKeyDown=true;\r\n          this.keyDownCount[0]=this.pxlQuality.fpsCounter.z;\r\n          this.directionKeysPressed[0]=1;\r\n          this.pxlCamera.deviceKey(0, true);\r\n        }\r\n        if(e.ctrlKey && keyHit==87 && this.directionKeysPressed[1]==1){\r\n          e.this.preventDefault(e)();\r\n        }\r\n        if(keyHit==38 || keyHit==87){ // Up\r\n          this.directionKeyDown=true;\r\n          this.keyDownCount[1]=this.pxlQuality.fpsCounter.z;\r\n          this.directionKeysPressed[1]=1;\r\n          this.pxlCamera.deviceKey(1, true);\r\n        }\r\n        if(keyHit==39 || keyHit==68){ // Right\r\n          this.directionKeyDown=true;\r\n          this.keyDownCount[0]=this.pxlQuality.fpsCounter.z;\r\n          this.directionKeysPressed[2]=1;\r\n\r\n          this.pxlCamera.deviceKey(2, true);\r\n        }\r\n        if(keyHit==40 || keyHit==83){ // Down\r\n          this.directionKeyDown=true;\r\n          this.keyDownCount[1]=this.pxlQuality.fpsCounter.z;\r\n          this.directionKeysPressed[3]=1;\r\n          this.pxlCamera.deviceKey(3, true);\r\n        }\r\n        if(keyHit==16 || keyHit==224){ // Shift\r\n          this.deviceAction( this.pxlEnums.DEVICE_ACTION.RUN, {}, true );\r\n        }\r\n        if(keyHit==32){\r\n          this.deviceAction( this.pxlEnums.DEVICE_ACTION.JUMP, {}, true ); \r\n        }\r\n      }\r\n    }//else{\r\n      // pxlNav Canvas not in focus\r\n      //   User likely typing within a text field or other focus'ed object \r\n    //}\r\n  }\r\n    \r\n\r\n  async keyUpCall(e){\r\n\r\n    this.emit(\"keyup\", e);\r\n\r\n    //e.this.preventDefault(e)();\r\n        if( e.ctrlKey ){\r\n            this.controlKey=false;\r\n            e.preventDefault();\r\n            return false;\r\n        }\r\n    if(document.activeElement.type==undefined ){\r\n      let keyHit=e.keyCode || e.which;\r\n      let kCode=e.code || e.which;\r\n      if( !e.isTrusted ){\r\n        return false;\r\n      }\r\n      if( e.ctrlKey || e.altKey || e.code.includes(\"F\") ){\r\n          e.preventDefault();\r\n          return false;\r\n      }\r\n            \r\n      // -- -- -- -- -- -- -- -- -- -- //\r\n\r\n      // Non-Active dependent functions -\r\n      // 192 `\r\n      if( kCode == \"Backquote\" ){\r\n        this.pxlGuiDraws.guiToggleVisibility(); // No Texture\r\n        return;\r\n      }\r\n      // 89 Y\r\n      if( keyHit == 89 ){\r\n        this.pxlGuiDraws.toggleShaderEditor();\r\n      }\r\n              \r\n      // 220 \\ | \r\n      if( keyHit == 220 ){\r\n        //console.log( \"Saving screenshot\" );\r\n        let tmpResSave=this.pxlQuality.screenResPerc;\r\n        this.pxlQuality.screenResPerc=1;\r\n        //this.resizeRenderResolution( 3840, 2160 );//3240, 3240 );\r\n        \r\n        this.pxlEnv.mapRender(false);\r\n        \r\n        let dlData=this.pxlGuiDraws.pxlNavCanvas.toDataURL(\"image/png\");\r\n        let blob=atob( dlData.split(',')[1] );\r\n        let size=blob.length;\r\n        let arr=new Uint8Array(size);\r\n        for(let x=0; x<size; ++x){\r\n            arr[x]=blob.charCodeAt(x);\r\n        }\r\n        let cameraData=URL.createObjectURL(new Blob([arr]));\r\n\r\n        let dt=new Date();\r\n        let d=dt.getDate();\r\n        let m=dt.getMonth()+1;\r\n        let y=dt.getFullYear();\r\n        let fileSuffix=y+\"-\"+m+\"-\"+d+\"_\"+dt.getHours()+\"-\"+dt.getMinutes()+\"-\"+dt.getSeconds();\r\n\r\n        let tempLink=document.createElement(\"a\");\r\n        tempLink.download=this.projectTitle+\"_\"+fileSuffix+\".png\";\r\n        tempLink.href=cameraData;\r\n        document.body.appendChild(tempLink);\r\n        tempLink.click();\r\n        tempLink.parentNode.removeChild(tempLink);\r\n        \r\n        this.pxlQuality.screenResPerc=tmpResSave;\r\n        //this.resizeRenderResolution();\r\n        this.pxlEnv.mapRender(false);\r\n        \r\n        return;\r\n      }\r\n\r\n      // -- -- -- -- -- -- -- -- -- -- //\r\n      \r\n      // Active dependent functions; pxlNav needs to be running\r\n\r\n      if(this.pxlTimer.active){\r\n        if(keyHit==37 || keyHit==65){ // Left\r\n          this.directionKeysPressed[0]=0;\r\n          //this.pxlAutoCam.prevNextAutoCam(-1);\r\n          //this.pxlAutoCam.getNextPath(false, -1);\r\n          this.pxlCamera.deviceKey(0, false);\r\n        }\r\n        if(keyHit==38 || keyHit==87){ // Up\r\n          this.directionKeysPressed[1]=0;\r\n          if( this.pxlAutoCam.active ){\r\n              this.pxlAutoCam.step(true);\r\n          }\r\n          this.pxlCamera.deviceKey(1, false);\r\n        }\r\n        if(keyHit==39 || keyHit==68){ // Right\r\n          this.directionKeysPressed[2]=0;\r\n          this.pxlCamera.deviceKey(2, false);\r\n        }\r\n        if(keyHit==40 || keyHit==83){ // Down\r\n          this.directionKeysPressed[3]=0;\r\n          if( this.pxlAutoCam.active ){\r\n              this.pxlAutoCam.setRoom(true);\r\n          }\r\n          this.pxlCamera.deviceKey(3, false);\r\n        }\r\n        if(!this.directionKeysPressed.includes(1)){\r\n          this.directionKeyDown=false;\r\n        }\r\n        // Shift\r\n        if(keyHit==16 || keyHit==224){ // Shift\r\n          this.deviceAction( this.pxlEnums.DEVICE_ACTION.RUN, {}, false );\r\n          return;\r\n        }\r\n        // Space\r\n        if(keyHit==32){\r\n          this.deviceAction( this.pxlEnums.DEVICE_ACTION.JUMP, {}, false );\r\n          return;\r\n        }\r\n        \r\n        if( !this.directionKeyDown ){\r\n          // 1 / Numpad 1 - Warp to Lobby\r\n          /*if(keyHit == 49 || keyHit == 97){\r\n            this.pxlCamera.fastTravel(0);\r\n            return;\r\n          }*/\r\n          // 5 / Numpad 5 - Drone Cam\r\n          if(keyHit == 53 || keyHit == 101){\r\n            this.pxlAutoCam.preAutoCamToggle();\r\n            return;\r\n          }\r\n        }\r\n                \r\n             \r\n        \r\n        //%=\r\n        // 75 K Numpad-Plus\r\n        if(keyHit == 75 || keyHit == 107 || keyHit == 187){\r\n        }\r\n        // 74 J Numpad-Minus\r\n        if(keyHit == 74 || keyHit == 109 || keyHit == 189){\r\n        }\r\n        // 76 L\r\n        if(keyHit == 76){\r\n        }\r\n        // 48  0\r\n        if(keyHit == 48){\r\n        }\r\n        \r\n        // 221 ]\r\n        if( keyHit == 221 ){\r\n          // Prevent current item from wearing off\r\n          //   Printing it from the check list\r\n          if( this.pxlUser?.itemInactiveCmd?.length >0 ){\r\n            this.pxlUser.itemInactiveCmd.pop();\r\n          }\r\n          return;\r\n        }\r\n        // 106 *\r\n        if( keyHit == 106 ){\r\n        }\r\n        \r\n      }\r\n      \r\n      // Close all gui windows\r\n      // ESC / Enter\r\n      if(keyHit==27 || ( keyHit == 13 && !e.ctrlKey )){\r\n        this.pxlGuiDraws.toggleHudBlock(false, true);\r\n        this.pxlGuiDraws.toggleGuiWindowContainer(false, false, true);\r\n        return;\r\n      }\r\n      \r\n      \r\n      if( e.altKey || e.ctrlKey || e.shiftKey ){\r\n        return;\r\n      }\r\n      \r\n      // 85  U\r\n      if(keyHit == 85){\r\n      }\r\n      // 73  I\r\n      if(keyHit == 73){\r\n        this.pxlGuiDraws.iconEvent( \"click\", this.pxlGuiDraws.hudIcons.infoIcon, \"info\" );\r\n        return;\r\n      }\r\n      // 71 G\r\n      if(keyHit == 71){\r\n        this.pxlGuiDraws.iconEvent( \"click\", this.pxlGuiDraws.hudIcons.settingsIcon, \"settings\" );\r\n        return;\r\n      }\r\n      // 72 H; 191  ?\r\n      if( keyHit == 191 || keyHit == 72 ){ // Open Help Screen\r\n        this.pxlGuiDraws.iconEvent( \"click\", this.pxlGuiDraws.hudIcons.helpIcon, \"help\" );\r\n        return;\r\n      }\r\n      \r\n      // 67  C\r\n      if(keyHit == 67){\r\n      }\r\n      // 66  B\r\n      if(keyHit == 66){\r\n        this.pxlGuiDraws.iconEvent( \"click\", this.pxlGuiDraws.hudIcons.musicIcon, \"musicToggle\" );\r\n        return;\r\n      }\r\n      // 78 N\r\n      if(keyHit == 78){\r\n        this.pxlGuiDraws.iconEvent( \"click\", this.pxlGuiDraws.hudIcons.speakerIcon, \"speakerToggle\" );\r\n        return;\r\n      }\r\n      // 77  M\r\n      if(keyHit == 77){\r\n      }\r\n      // 86  V\r\n      if(keyHit == 86){\r\n      }\r\n      \r\n      // P \r\n      if(keyHit == 80){ // Pause pxlNav Environment\r\n        this.deviceAction( this.pxlEnums.DEVICE_ACTION.PAUSE );\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  // -- -- -- -- -- -- //\r\n\r\n\r\n  deviceAction( action, data, state=null ){\r\n    switch( action ){\r\n      case this.pxlEnums.DEVICE_ACTION.MOVE:\r\n        //this.directionKeysPressed[2]=0;\r\n        this.addMoveDelta( data );\r\n        //this.pxlCamera.deviceKey(1, state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.LOOK:\r\n        this.addLookDelta( data );\r\n        //this.pxlCamera.deviceKey(2, state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.JUMP:\r\n        this.pxlCamera.camJumpKey( state );\r\n        //this.pxlCamera.deviceKey(\"space\", state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.RUN:\r\n        let speed = state ? this.pxlEnums.USER_SPEED.BOOST : this.pxlEnums.USER_SPEED.BASE;\r\n        this.pxlUser.setSpeed( speed );\r\n        //this.pxlCamera.deviceKey(\"shift\", true);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.ACTION:\r\n        //this.pxlCamera.deviceKey(\"action\", state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.ACTION_ALT:\r\n        //this.pxlCamera.deviceKey(\"actionAlt\", state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.ITEM:\r\n        //this.pxlCamera.deviceKey(\"item\", state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.MENU:\r\n        //this.pxlCamera.deviceKey(\"menu\", state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.PAUSE:\r\n        this.togglePause( state );\r\n        //this.pxlCamera.deviceKey(\"pause\", state);\r\n        break;\r\n      case this.pxlEnums.DEVICE_ACTION.MAP:\r\n        //this.pxlCamera.deviceKey(\"map\", state);\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  // -- -- -- -- -- -- //\r\n\r\n  addMoveDelta( data=null ){\r\n    let status = false;\r\n    if( !this.pxlOptions.mobile || this.pxlOptions.staticCamera || (data === null && !this.directionKeyDown)){\r\n      return;\r\n    }\r\n    \r\n    if( data !== null ){\r\n      if( data.hasOwnProperty(\"status\") ){\r\n        status = data.status;\r\n      }\r\n\r\n      if( status ){\r\n        let absDeltaX = Math.abs(data.startDelta.x);\r\n        let absDeltaY = Math.abs(data.startDelta.y);\r\n\r\n        let deadZone = this.pxlOptions.userSettings.deadZone.touch;\r\n        let startDeltaX = absDeltaX > deadZone ? data.startDelta.x - deadZone*Math.sign(data.startDelta.x) : 0;\r\n        let startDeltaY = absDeltaY > deadZone ? data.startDelta.y - deadZone*Math.sign(data.startDelta.y) : 0;\r\n\r\n        // Fit pixel distances to percentage of screen\r\n        let xRatio = this.sW / this.sH;\r\n        let yRatio = this.sH / this.sW;\r\n        startDeltaX = Math.min(startDeltaX * this.lookXScalar, 1.0) * this.pxlOptions.userSettings.movement.max * xRatio;\r\n        startDeltaY = Math.min(startDeltaY * this.lookYScalar, 1.0) * this.pxlOptions.userSettings.movement.max * yRatio;\r\n\r\n        //this.pxlCamera.cameraMovement[0] =  ( this.pxlCamera.cameraMovement[0] + Math.min( Math.max( startDeltaX * 0.01, -1), 1) ) * .5; // x / 50\r\n        //this.pxlCamera.cameraMovement[1] = ( this.pxlCamera.cameraMovement[1] + Math.min( Math.max( startDeltaY * 0.01, -1), 1) ) * .5; // x / 50 \r\n\r\n        this.pxlCamera.cameraMovement[0] =  ( this.pxlCamera.cameraMovement[0] + startDeltaX ) * .7 // x / 50\r\n        this.pxlCamera.cameraMovement[1] = ( this.pxlCamera.cameraMovement[1] +  startDeltaY ) * .7; // y / 50 \r\n        this.userInputMoveScalar = Math.max(this.pxlCamera.cameraMovement[0]**2, this.pxlCamera.cameraMovement[1]**2) ** .5;\r\n        this.userInputMoveScalar = this.userInputMoveScalar*this.userInputMoveScalar*this.userInputMoveScalar * 1.5;\r\n        this.userInputMoveScalar += this.userInputMoveScalar>1.0 ? (this.userInputMoveScalar-1.0)*30. : 0;\r\n        if( this.userInputMoveScalar > 1.0 ){\r\n          // Trigger Run automatically on mobile\r\n          this.deviceAction( this.pxlEnums.DEVICE_ACTION.RUN, {}, true );\r\n        }else{\r\n          this.deviceAction( this.pxlEnums.DEVICE_ACTION.RUN, {}, false );\r\n        }\r\n      }\r\n    }else{\r\n      status = this.directionKeyDown;\r\n    }\r\n\r\n    this.directionKeyDown = status;\r\n    if( status ){\r\n      this.directionKeysPressed[0]= this.pxlCamera.cameraMovement[0] < 0 ? 1 : 0;\r\n      this.directionKeysPressed[1]= this.pxlCamera.cameraMovement[1] < 0 ? 1 : 0;\r\n      this.directionKeysPressed[2]= this.pxlCamera.cameraMovement[0] > 0 ? 1 : 0;\r\n      this.directionKeysPressed[3]= this.pxlCamera.cameraMovement[1] > 0 ? 1 : 0;\r\n      this.pxlCamera.userInputMoveScalar.x = this.pxlCamera.cameraMovement[0];\r\n      this.pxlCamera.userInputMoveScalar.y = this.pxlCamera.cameraMovement[1];\r\n      this.pxlCamera.cameraMovementEase = 1;\r\n      this.pxlUser.setSpeed( this.userInputMoveScalar * this.pxlEnums.USER_SPEED.BASE );\r\n    }else{\r\n      this.directionKeysPressed[0]=0;\r\n      this.directionKeysPressed[1]=0;\r\n      this.directionKeysPressed[2]=0;\r\n      this.directionKeysPressed[3]=0;\r\n      this.pxlCamera.cameraMovementEase = .85;\r\n    }\r\n  }\r\n\r\n  addLookDelta( data ){\r\n    let status = false;\r\n    if( data.hasOwnProperty(\"status\") ){\r\n      status = data.status;\r\n    }\r\n\r\n    this.mouseX = data.currentPos.x;\r\n    this.mouseY = data.currentPos.y;\r\n\r\n    if( status ){\r\n\r\n      if( data.dragCount == 0 ){\r\n        this.touchScreen=true;\r\n        this.touchMouseData.active=true;\r\n        this.touchMouseData.mode=this.touchMouseData.button;\r\n        this.touchMouseData.startPos=new Vector2(this.mouseX,this.mouseY);\r\n        this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n        this.touchMouseData.curDistance=new Vector2(0,0);\r\n        this.touchMouseData.curStepDistance=new Vector2(0,0);\r\n        this.touchMouseData.dragCount=0;\r\n        this.pxlAutoCam.touchBlender=false;\r\n        this.touchMouseData.releaseTime=this.pxlTimer.curMS;\r\n      }else{\r\n        this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n\r\n        this.touchMouseData.curDistance= new Vector2( data.startDelta.x, data.startDelta.y );\r\n        this.touchMouseData.curStepDistance = new Vector2( data.stepDelta.x, data.stepDelta.y );\r\n        this.touchMouseData.netDistance.add( this.touchMouseData.curStepDistance.clone() );\r\n        this.touchMouseData.velocity.add(this.touchMouseData.curStepDistance).multiplyScalar(.5);\r\n        //this.touchMouseData.velocityEase.add(this.touchMouseData.curStepDistance).multiplyScalar(.5);\r\n              \r\n        this.touchMouseData.netDistYPerc =  (this.touchMouseData.netDistance.y+this.touchMouseData.curDistance.y+250)/1250;\r\n        \r\n        this.touchMouseData.curFadeOut.add( (new Vector2( data.previousPos.x, data.previousPos.y )).sub(this.touchMouseData.endPos)  );\r\n  \r\n          \r\n        if( this.objectPerc.active ){\r\n          this.objectPerc.percX = ( this.mouseX - this.objectPerc.left ) / this.objectPerc.width ;\r\n          this.objectPerc.percY = ( this.mouseY - this.objectPerc.top ) / this.objectPerc.height ;\r\n          this.objectPerc.offsetX = this.mouseX - this.objectPerc.startX ;\r\n          this.objectPerc.offsetY = this.mouseY - this.objectPerc.startY ;\r\n          this.objectPerc.offsetPercX = this.objectPerc.offsetX / this.objectPerc.width ;\r\n          this.objectPerc.offsetPercY = this.objectPerc.offsetY / this.objectPerc.height ;\r\n        }\r\n      }\r\n\r\n    }else{\r\n        \r\n      this.touchScreen=false;\r\n      this.touchMouseData.dragTotal+=data.dragCount;\r\n      this.touchMouseData.active=false;\r\n      this.touchMouseData.endPos=new Vector2(this.mouseX,this.mouseY);\r\n      //this.touchMouseData.netDistance.add( this.touchMouseData.curDistance.clone() );\r\n      //this.touchMouseData.netDistance.y = Math.max(-1000, Math.min(1500, this.touchMouseData.netDistance.y ));\r\n      this.touchMouseData.netDistYPerc =  (this.touchMouseData.netDistance.y+250)/1250;\r\n      this.touchMouseData.curDistance.multiplyScalar(0);\r\n      this.touchMouseData.curStepDistance.multiplyScalar(0);\r\n\r\n      this.touchMouseData.releaseTime=this.pxlTimer.curMS;\r\n      \r\n      if( this.touchMouseData.lock ){\r\n          this.touchMouseData.lock=false;\r\n          return;\r\n      }\r\n      \r\n      this.pxlAutoCam.touchBlender=true;\r\n      //this.pxlAutoCam.setNextTrigger();\r\n    }\r\n  }\r\n\r\n  // -- -- -- -- -- -- //\r\n\r\n  togglePause( state=null ){\r\n    if( state === null ){\r\n      state = !this.pxlTimer.active;\r\n    }\r\n    this.directionKeysPressed=[0,0,0,0];\r\n    this.directionKeyDown=false;\r\n    this.pxlTimer.pause( state );\r\n    if( this.pxlTimer.active ){ \r\n      this.pxlEnv.mapRender();\r\n    }\r\n    this.pxlCamera.workerFunc(\"activeToggle\",this.pxlTimer.active);\r\n  }\r\n\r\n\r\n  // -- -- -- -- -- -- //\r\n\r\n  // ## Have it run a pxlEnv class function instead of all this mess\r\n  resizeRenderResolution( iWidthBase=null, iHeightBase=null ){\r\n\r\n    //let iWidth= window?.screen?.width ? window.screen.width / window.devicePixelRatio : window.innerWidth;\r\n    //let iHeight= window?.screen?.height ? window.screen.height / window.devicePixelRatio : window.innerHeight;\r\n\r\n    let iWidth = window.innerWidth;\r\n    let iHeight = window.innerHeight;\r\n    iWidth=!iWidthBase ? iWidth : iWidthBase;\r\n    iHeight=!iHeightBase ? iHeight : iHeightBase;\r\n\r\n    // -- -- -- \r\n\r\n    let renderScalar = this.getRenderScalar();\r\n    iWidth = iWidth * renderScalar;\r\n    iHeight = iHeight * renderScalar;\r\n        \r\n    this.mapW=(this.sW=iWidth)*this.pxlQuality.screenResPerc;\r\n    this.mapH=(this.sH=iHeight)*this.pxlQuality.screenResPerc;\r\n        \r\n    /*let screenWidth = window?.screen?.width ? window.screen.width : this.mapW;\r\n    let screenHeight = window?.screen?.height ? window.screen.height : this.mapH;\r\n    this.mapW=screenWidth;\r\n    this.mapH=screenHeight;*/\r\n\r\n    this.screenRes.x=1/this.mapW;\r\n    this.screenRes.y=1/this.mapH;\r\n    this.screenRatio.x=this.sW * this.screenRes.x;\r\n    this.screenRatio.y=this.sH * this.screenRes.y;\r\n\r\n    if(this.pxlEnv.geoList['HDRView']){\r\n      let rU=this.mapW>this.mapH ? 1 : this.mapW/this.mapH;\r\n      //let rV=this.mapW>this.mapH ? this.mapH  his.mapW : 1;\r\n      this.pxlEnv.geoList['HDRView'].material.uniforms.ratioU.value=rU;\r\n      //this.pxlEnv.geoList['HDRView'].material.uniforms.ratioV.value=rV;\r\n    }\r\n    \r\n    this.touchMouseData.mBlurVelInf=new Vector2(2*this.screenRes.x,2*this.screenRes.y);\r\n    if(!this.pxlEnv.mapGlowPass){\r\n      return;\r\n    }\r\n\r\n    // TODO : All of this should be set up through callbacks vv\r\n    //this.pxlEnv.scene.renderTarget.setSize(this.mapW*this.pxlQuality.bufferPercMult,this.mapH*this.pxlQuality.bufferPercMult);\r\n    //this.pxlEnv.scene.renderWorldPos.setSize(this.mapW*this.pxlQuality.bufferPercMult,this.mapH*this.pxlQuality.bufferPercMult);\r\n    \r\n    this.pxlEnv.scene.renderTarget.setSize(this.mapW,this.mapH);\r\n    this.pxlEnv.scene.renderWorldPos.setSize(this.mapW,this.mapH);\r\n    \r\n    if( this.pxlEnv.mapComposer ) this.pxlEnv.mapComposer.setSize(this.mapW,this.mapH);\r\n    if( this.pxlEnv.mapComposerGlow ) this.pxlEnv.mapComposerGlow.setSize(this.mapW,this.mapH);\r\n    \r\n    // For external rooms --\r\n    if( this.pxlEnv.roomComposer ){\r\n      this.pxlEnv.roomComposer.setSize( this.mapW,this.mapH);\r\n    }\r\n  \r\n    if( this.pxlEnv.roomGlowPass ){\r\n      this.pxlEnv.roomGlowPass.setSize(this.mapW*this.pxlQuality.bloomPercMult,this.mapH*this.pxlQuality.bloomPercMult);\r\n    }\r\n\r\n    // -- -- -- -- -- -- --\r\n        \r\n    // For texture swapping --\r\n    if( this.pxlEnv.delayComposer ) this.pxlEnv.delayComposer.setSize(this.mapW,this.mapH);\r\n\r\n    // -- -- -- -- -- -- --\r\n        \r\n    if( this.pxlEnv.mapGlowPass ){\r\n      this.pxlEnv.mapGlowPass.setSize(this.mapW*this.pxlQuality.bloomPercMult,this.mapH*this.pxlQuality.bloomPercMult);\r\n    }\r\n    \r\n    if( this.pxlEnv.mapMotionBlurPass ){\r\n      this.pxlEnv.mapMotionBlurPass.setSize(this.mapW*this.pxlQuality.mBlurPercMult,this.mapH*this.pxlQuality.mBlurPercMult);\r\n    }\r\n    \r\n    if( this.pxlEnv.mapOverlayHeavyPass ){\r\n      this.pxlEnv.mapOverlayHeavyPass.setSize(this.mapW,this.mapH);\r\n      this.pxlEnv.mapOverlayHeavyPass.uniforms.ratio.value = Math.min( 1, this.mapW/this.mapH );\r\n    }\r\n    \r\n    if( this.pxlEnv.mapOverlayPass ){\r\n      this.pxlEnv.mapOverlayPass.setSize(this.mapW,this.mapH);\r\n      this.pxlEnv.mapOverlayPass.uniforms.ratio.value = Math.min( 1, this.mapW/this.mapH );\r\n    }\r\n\r\n    if( this.pxlEnv.mapOverlaySlimPass ){\r\n      this.pxlEnv.mapOverlaySlimPass.setSize(this.mapW,this.mapH);\r\n      this.pxlEnv.mapOverlaySlimPass.uniforms.ratio.value = Math.min( 1, this.mapW/this.mapH );\r\n    }\r\n    \r\n\r\n    // Set main pxlNav canvas size\r\n    this.setCanvasSize( this.sW, this.sH );\r\n\r\n\r\n    this.pxlGuiDraws.loading=true;\r\n    \r\n    this.pxlEnv.engine.setPixelRatio(window.devicePixelRatio*this.pxlQuality.screenResPerc);\r\n    //this.pxlEnv.engine.setPixelRatio(window.devicePixelRatio);\r\n    //this.pxlEnv.engine.setSize(this.mapW, this.mapH);\r\n    this.pxlEnv.engine.setSize(this.sW, this.sH);\r\n    //let aspectRatio=this.mapW/this.mapH;\r\n    let aspectRatio = window.innerWidth / window.innerHeight;\r\n    this.pxlCamera.setAspect( aspectRatio );\r\n        \r\n        \r\n    let safeAspect=[ this.sW/this.sH, this.sH/this.sW ];\r\n    let aspectMult=[1,1];\r\n    aspectMult[0]=(aspectRatio>safeAspect[0]) ? 1 : this.sW/(this.sH*safeAspect[0]) ;\r\n    aspectMult[1]=(aspectRatio>safeAspect[1]) ? this.sH/(this.sW*safeAspect[1]) : 1 ;\r\n    if(aspectMult[0]>1){\r\n      aspectMult[1]*=1/aspectMult[0];\r\n      aspectMult[0]=1;\r\n    }else if(aspectMult[1]>1){\r\n      aspectMult[0]*=1/aspectMult[1];\r\n      aspectMult[1]=1;\r\n    }\r\n\r\n    this.screenAspect.x=aspectMult[0] * (1/(.5**2+.5**2)**.5);\r\n    this.screenAspect.y=aspectMult[1];\r\n    \r\n    this.screenResDeltaPerc.x=this.sW/this.origRes.x;\r\n    this.screenResDeltaPerc.y=this.sH/this.origRes.y;\r\n\r\n    this.pxlEnv.updateCompUniforms();\r\n    \r\n    this.pxlEnv.roomNameList.forEach( (r)=>{\r\n      this.pxlEnv.roomSceneList[ r ].pxlCamAspect = aspectRatio ;\r\n      //if( r != this.pxlEnv.mainRoom){\r\n      if( this.pxlEnv.roomSceneList[ r ]?.resize ){\r\n        this.pxlEnv.roomSceneList[ r ].resize( this.mapW, this.mapH );\r\n      }\r\n    });\r\n        \r\n    // Emit the resize calculations \r\n    this.emit(\"resize\", {\r\n      \"rawWidth\" : window.innerWidth,\r\n      \"rawHeight\" : window.innerHeight,\r\n      \"width\" : this.mapW,\r\n      \"height\" : this.mapH,\r\n      \"xPixelPerc\" : this.screenRes.x,\r\n      \"yPixelPerc\" : this.screenRes.y,\r\n      \"aspectRatio\" : aspectRatio\r\n    });\r\n        \r\n    if( !this.pxlTimer.active ){\r\n        this.pxlEnv.mapRender( false );\r\n    }\r\n    \r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n  // -- Module Communication -- -- //\r\n  // -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  subscribe( eventType, callbackFn ){\r\n    if( !this.subscriptableEvents.includes( eventType ) ){\r\n      console.error( \"Event type not subscribable: \", eventType );\r\n      return;\r\n    }\r\n    if( !this.callbackList[eventType] ){\r\n      this.callbackList[eventType] = [];\r\n    }\r\n    this.callbackList[eventType].push( callbackFn );\r\n  }\r\n\r\n  unsubscribe( eventType, callbackFn ){\r\n    let index = -1;\r\n    if( this.callbackList[eventType] ){\r\n      index = this.callbackList[eventType].indexOf( callbackFn );\r\n      if( index >= 0 ){\r\n        this.callbackList[eventType].splice( index, 1 );\r\n      }\r\n    }\r\n    return (index >= 0);\r\n  }\r\n\r\n  emit( eventType, data ){\r\n    if( this.callbackList.hasOwnProperty( eventType ) ){\r\n      this.callbackList[eventType].forEach( (callbackFn)=>{\r\n        callbackFn( data );\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","// pxlNav Collision Manager\r\n// -- -- -- -- -- -- -- -- --\r\n// Written by Kevin Edzenga; 2025\r\n//\r\n// Parse colliders from the FBX scene, prep collision objects, pre-calculate barycentric data, and perform collision detections.\r\n//\r\n// I looked to Three.js for ray-intercept integration, which cited -\r\n//   Real-Time Collision Detection, Chapter 5 - 5.1.5; by Christer Ericson;\r\n//     Published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.\r\n//     Page 136; 5.1.5 -\r\n//       https://www.r-5.org/files/books/computers/algo-list/realtime-3d/Christer_Ericson-Real-Time_Collision_Detection-EN.pdf\r\n//   Along with barycentric coordinates for triangle collision detection cited in Three.js from -\r\n//     http://www.blackpawn.com/texts/pointinpoly/default.html\r\n//   ( This source also cites `Real-Time Collision Detection` by Christer Ericson )\r\n//\r\n//   This was source from Three.js `closestPointToPoint()`,\r\n//     Linked to `getInterpolation()` & `getBarycoord()`; from `three.core.js:8504` v172\r\n//       https://github.com/mrdoob/three.js/blob/dev/build/three.core.js\r\n//     ( Since the source is split up, I'm just linking to the main file )\r\n//\r\n//  Couldn't get the above working 100%, so made `castRay()` for Vector Ray to Triangle collision\r\n//    It works with floor and interactable colliders, but slightly heavier than the other method\r\n//  Looked to this PDF for Moller-Trumbore Ray-Intersect, pages 4 & 5\r\n//    https://cadxfem.org/inf/Fast%20MinimumStorage%20RayTriangle%20Intersection.pdf\r\n//\r\n// I implemented a per-pxlRoom hash grid for ground collision detection, \r\n//   As ray casting to all polygons in a scene is inefficient\r\n// While also using the logic outlined in the book as used in Three.js, I've adapted it to my needs --\r\n//  `Colliders.prepColliders()` and `Colliders.prepInteractables()`\r\n//     Are used to build the hash grid and face-vertex associations for collision detection.\r\n//  `Colliders.castGravityRay()` and `Colliders.castInteractRay()`\r\n//     Are the primary functions for collision detection.\r\n\r\n/**\r\n * @namespace pxlColliders\r\n * @description Collider handling\r\n */\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  BufferAttribute,\r\n  BufferGeometry,\r\n  ShaderMaterial,\r\n  Mesh,\r\n  DoubleSide,\r\n  AdditiveBlending\r\n} from \"../../libs/three/three.module.min.js\";\r\n\r\nimport { VERBOSE_LEVEL, COLLIDER_TYPE, GEOMETRY_SIDE } from \"./Enums.js\";\r\n\r\n// Some assumptions are made here, as collision meshes are ussually low poly\r\n//   A grid size of 100 is assumed for -+500 unit bounds\r\n//     This is 10x larger than the assumed grid size in my CGI program.\r\n//       As my collision triangles range from 20-200 Meter units in size\r\n//\r\n// Many productions assume 1 Unit as 1 Meter; 500 units is 500 meters\r\n//   But that isn't good when precision is an issue for \"other\" reasons\r\n//     Blend shapes or other deformations can be problematic with precision issues\r\n//   If you are using Centimeters or Inches, you may need to adjust the grid size 10x or 40x smaller\r\n//\r\n// Please pass in the appropriate grid size & reference bounds for your scene\r\n//   If unsure, you're grid in your cgi program of choice is a good reference\r\n//     Most CGI program grids are -10 to +10, split into 5 units, in X,Z\r\n//       Or marked every 10 units\r\n//     If using Blender, you have an infinite X,Y grid, with FAINTLY thicker lines every 5 units\r\n//       Place a 10x10 grid on the floor and use that as a reference\r\n//\r\n// Reference Bounds?\r\n//   This is used to adjust the grid size based on the collider bounds\r\n//     As productions ussually employ a set unit scale, \r\n//       Scene bounds may be an after-thought\r\n//   By defualt, I'm using 10x the grid size as a reference.\r\n//   If the grid size is smaller than expected based on the bounding box,\r\n//     The gridSize will be adjusted to your scene automatically\r\n//       It will be REDUCED to match the grid-bounds ratio of the collider\r\n//         So setting your grid sizing higher is better than lower\r\n//\r\n// Still not sure?\r\n//   Leave the defaults and run pxlNav in -\r\n//    `pxlOptions.verbose = pxlEnums.VERBOSE_LEVEL.INFO` verbose mode\r\n//       Then look at the console output for the found bounds and grid size adjustments\r\n//\r\n// Defaults -\r\n//   Grid Sizing of 100 units\r\n//   Reference Bounds of 500 units\r\n//\r\nexport class Colliders{\r\n  constructor( verbose=false, hashGridSizing = 100, colliderBoundsReference = 500.0 ){\r\n    this.pxlEnv = null;\r\n    this.pxlUtils = null;\r\n    this.verbose = verbose;\r\n\r\n    this.delimiter = ',';\r\n\r\n    this.roomColliderData = {};\r\n\r\n    this.baseGridSize = hashGridSizing;\r\n\r\n    this.degToRad = Math.PI / 180;\r\n    this.epsilon = 0.00001;\r\n\r\n    // Assume a base grid size of 100 to assume for -+500 unit bounds\r\n    //   This will generate potentially 10x10 grid locations\r\n    //     This should be enough to mitigate higher poly count colliders\r\n    this.colliderBoundsReference = colliderBoundsReference;\r\n\r\n    // Debugging --\r\n    this.prevGridKey = \"\";\r\n\r\n  }\r\n  setDependencies( pxlEnv ){\r\n    this.pxlEnv = pxlEnv;\r\n    this.pxlUtils = pxlEnv.pxlUtils;\r\n  }\r\n  log( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.INFO ){\r\n      console.log( msg );\r\n    }\r\n  }\r\n  debug( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.DEBUG ){\r\n      console.log( msg );\r\n    }\r\n  }\r\n  warn( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.WARN ){\r\n      console.warn( msg );\r\n    }\r\n  }\r\n  error( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.ERROR ){\r\n      console.error( msg );\r\n    }\r\n  }\r\n\r\n  // For now, all classes should have a init(), start(), stop() step()\r\n  init(){}\r\n  start(){}\r\n  stop(){}\r\n  step(){}\r\n\r\n  // -- -- --\r\n\r\n  // Boot room colliders and find hash map for collision detection\r\n  prepColliders( pxlRoomObj, colliderType=COLLIDER_TYPE.FLOOR, gridSize = null ){\r\n    if( pxlRoomObj.hasColliders() ){\r\n\r\n      if( !gridSize ){\r\n        gridSize = this.baseGridSize;\r\n      }\r\n\r\n      let gridSizeInv = 1 / gridSize;\r\n\r\n      // If the user runs `prepColliders` on Hover or Clickable objects,\r\n      //   It's assumed the user meant to run `prepInteractables`\r\n      // `prepColliders` is ran internally, but can be called externally\r\n      if( colliderType == COLLIDER_TYPE.HOVERABLE || colliderType == COLLIDER_TYPE.CLICKABLE ){\r\n        this.prepInteractables( pxlRoomObj, colliderType );\r\n        return;\r\n      }\r\n\r\n      let roomName = pxlRoomObj.getName();\r\n      let collidersForHashing = pxlRoomObj.getColliders( colliderType );\r\n      // \r\n      if( !this.roomColliderData.hasOwnProperty( roomName ) ){\r\n        this.roomColliderData[ roomName ] = {};\r\n      }\r\n      if( !this.roomColliderData[ roomName ].hasOwnProperty( colliderType ) ){\r\n        this.roomColliderData[ roomName ][ colliderType ] = {};\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'helper' ] = null;\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'count' ] = 0;\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'gridSize' ] = gridSize;\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'gridSizeInv' ] = gridSizeInv;\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'faceVerts' ] = {};\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'faceGridGroup' ] = {};\r\n      }\r\n\r\n      // Agregate vertex locations and find min/max for collider bounds\r\n      let vertexLocations = [];\r\n      // Collider minimum and maximum bounding box data\r\n      //   Infinity scares me...\r\n      let colliderMinMax = { \r\n          \"min\" : new Vector2( Infinity, Infinity ), \r\n          \"max\" : new Vector2( -Infinity, -Infinity )\r\n        };\r\n\r\n      // Find grid size, gather vertex locationns for grid positioning, and store the collidering faces in the grid\r\n      //   Utilizing barcentric coordinates to determine if a grid location is within a face triangle\r\n      collidersForHashing.forEach( (collider)=>{\r\n        let colliderVertices = collider.geometry.attributes.position.array;\r\n        let colliderVertexCount = colliderVertices.length / 3;\r\n        for( let x = 0; x < colliderVertexCount; ++x ){\r\n          let vert = new Vector2( colliderVertices[ x * 3 ], colliderVertices[ (x * 3) + 2 ] );\r\n          vertexLocations.push( vert );\r\n          colliderMinMax.min.min( vert );\r\n          colliderMinMax.max.max( vert );\r\n        }\r\n      });\r\n\r\n\r\n      // Adjust gridSize based on min/max bounds\r\n      //   If default gridSize is too large, reduce it to help performance\r\n      let colliderSize = colliderMinMax.max.clone().sub( colliderMinMax.min );\r\n      let maxColliderSize = Math.abs( Math.max( colliderSize.x, colliderSize.z ) );\r\n      let gridSizeScalar = Math.min( 1.0, maxColliderSize / this.colliderBoundsReference );\r\n      if( gridSizeScalar < 1.0 ){\r\n        let origGridSize = gridSize;\r\n        gridSize = gridSize * gridSizeScalar;\r\n        gridSizeInv = 1 / gridSize;\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'gridSize' ] = gridSize;\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'gridSizeInv' ] = gridSizeInv;\r\n\r\n        // Verbose feedback to aid in adjusting grid size for users\r\n        this.debug( \"Grid size adjusted for pxlRoom: \" + roomName + \"; from \" + origGridSize + \" to \" + gridSize + \" units; \" + gridSizeScalar + \"%\" );\r\n        this.debug( \"Reference bound set to: \" + this.colliderBoundsReference + \" units\" );\r\n        this.debug( \"Total pxlRoom bounds found: \" + maxColliderSize + \" units\" );\r\n      }else{\r\n        // Verbose feedback to aid in adjusting grid size for users\r\n        this.debug( \"-- Grid size unchanged for pxlRoom '\" + roomName + \"', collider bounds within reference bounds --\" );\r\n      }\r\n      this.debug( \"Collider bounds: {x:\" + colliderMinMax.min.x + \", y:\" + colliderMinMax.min.y + \"} -to- {x:\" + colliderMinMax.max.x + \", y:\" + colliderMinMax.max.y +\" }\" );\r\n\r\n      // Generate the grid map for collision detection per faces within grid locations\r\n      //   Store the face vertices, edges, and barycentric coordinates for collision detection performance\r\n      let colliderBaseName = -1;\r\n      let colliderTriCount = 0;\r\n      collidersForHashing.forEach( (collider)=>{\r\n        colliderBaseName++;\r\n        let colliderFaceVerts = collider.geometry.attributes.position.array;\r\n        let colliderFaceCount = colliderFaceVerts.length / 3;\r\n\r\n        let colliderMatrix = collider.matrixWorld;\r\n\r\n        //Gather occupied grid locations\r\n        for( let x = 0; x < colliderFaceCount; ++x ){\r\n          // Get face-vertex positions\r\n          //   [ [...], x1,y1,z1, x2,y2,z2, x3,y3,z3, [...] ] -> Vector3( x1, y1, z1 )\r\n          let baseIndex = x * 9;\r\n          let v0 = new Vector3( colliderFaceVerts[ baseIndex ], colliderFaceVerts[ baseIndex + 1 ], colliderFaceVerts[ baseIndex + 2 ] );\r\n          let v1 = new Vector3( colliderFaceVerts[ baseIndex + 3 ], colliderFaceVerts[ baseIndex + 4 ], colliderFaceVerts[ baseIndex + 5 ] );\r\n          let v2 = new Vector3( colliderFaceVerts[ baseIndex + 6 ], colliderFaceVerts[ baseIndex + 7 ], colliderFaceVerts[ baseIndex + 8 ] );\r\n\r\n          // Apply matrix world to face vertices\r\n          v0.applyMatrix4( colliderMatrix );\r\n          v1.applyMatrix4( colliderMatrix );\r\n          v2.applyMatrix4( colliderMatrix );\r\n\r\n          // Perhaps degenerative or empty face\r\n          //   I was seeing it in some instances, so I'm checking for it\r\n          if( v0.length() == 0 && v1.length() == 0 && v2.length() == 0 ){\r\n            continue;\r\n          }\r\n\r\n          // Find bounding box for the triangle\r\n          let minX = Math.min(v0.x, v1.x, v2.x);\r\n          let maxX = Math.max(v0.x, v1.x, v2.x);\r\n          let minZ = Math.min(v0.z, v1.z, v2.z);\r\n          let maxZ = Math.max(v0.z, v1.z, v2.z);\r\n\r\n          // Find the grid spances of the bounding box\r\n          let minGridX = Math.floor(minX * gridSizeInv);\r\n          let maxGridX = Math.floor(maxX * gridSizeInv);\r\n          let minGridZ = Math.floor(minZ * gridSizeInv);\r\n          let maxGridZ = Math.floor(maxZ * gridSizeInv);\r\n\r\n          // -- -- --\r\n\r\n          colliderTriCount++;\r\n\r\n          // -- -- --\r\n\r\n          // Gather the core math required for every ray cast\r\n          //   The below is stored to reduce runtime calculation latency\r\n\r\n          // Edge vectors\r\n          let edge0 = v1.clone().sub(v0);\r\n          let edge1 = v2.clone().sub(v0);\r\n\r\n          // Face normal\r\n          let faceNormal = edge0.clone().cross(edge1);//.normalize();\r\n\r\n          // Vertex-Edge relationships\r\n          let dotE0E0 = edge0.dot(edge0);\r\n          let dotE0E1 = edge0.dot(edge1);\r\n          let dotE1E1 = edge1.dot(edge1);\r\n\r\n          // Calculate tiangle area ratio\r\n          let areaInv = 1 / (dotE0E0 * dotE1E1 - dotE0E1 * dotE0E1);\r\n\r\n\r\n          // Face-Vertex data for grid location association\r\n          let curColliderName = collider.name != \"\" ? collider.name : \"collider_\" + colliderBaseName;\r\n          let faceKey = this.getGridKey(curColliderName,\"_face_\", this.flattenVector3( v0 ), this.flattenVector3( v1 ), this.flattenVector3( v2 ) );\r\n          let faceVerts = {\r\n              \"object\" : collider,\r\n              \"name\" : collider.name,\r\n              \"key\" : faceKey,\r\n              \"verts\" : [ v0, v1, v2 ],\r\n              \"edge0\" : edge0,\r\n              \"edge1\" : edge1,\r\n              \"normal\" : faceNormal,\r\n              \"dotE0E0\" : dotE0E0,\r\n              \"dotE0E1\" : dotE0E1,\r\n              \"dotE1E1\" : dotE1E1,\r\n              \"areaInv\" : areaInv\r\n            };\r\n          this.roomColliderData[roomName][ colliderType ]['faceVerts'][faceKey] = faceVerts;\r\n\r\n          // -- -- --\r\n\r\n          // Triangle is self contained within 1 grid location\r\n          if( minGridX == maxGridX && minGridZ == maxGridZ ){\r\n            this.addFaceToGridLocation( roomName, colliderType, minGridX, minGridZ, faceKey );\r\n            continue;\r\n          }\r\n\r\n          // -- -- --\r\n\r\n          // Third edge segment is used for edge-grid intersection detection\r\n          let edge3 = v2.clone().sub(v1);\r\n\r\n          // -- -- --\r\n\r\n          // Should no triangles be self contained within a grid location,\r\n          //   Check if any triangle edges clip the grid location,\r\n          //     If not, check if each grid center is within the triangle using barycentric coordinates\r\n\r\n          for (let gx = minGridX; gx <= maxGridX; ++gx) {\r\n            for (let gz = minGridZ; gz <= maxGridZ; ++gz) {\r\n              // Add face to grid location\r\n              //   I was running into some issues with the grid key generation, so log all grid locations\r\n              //     This does add some overhead to castRay(), but it's still WAY less than checking all triangles in a mesh\r\n              this.addFaceToGridLocation( roomName, colliderType, gx, gz, faceKey );\r\n              continue;\r\n\r\n\r\n              let gridXMin = gx * gridSize;\r\n              let gridXMax = (gx + 1) * gridSize;\r\n              let gridZMin = gz * gridSize;\r\n              let gridZMax = (gz + 1) * gridSize;\r\n              // Check if any triangle edges intersect the grid location\r\n              let checkEdgeIntersections = \r\n                  this.isGridEdgeIntersecting( v0, edge0, gridXMin, gridXMax, gridZMin, gridZMax ) ||\r\n                  this.isGridEdgeIntersecting( v0, edge1, gridXMin, gridXMax, gridZMin, gridZMax ) ||\r\n                  this.isGridEdgeIntersecting( v1, edge3, gridXMin, gridXMax, gridZMin, gridZMax ) ;\r\n\r\n\r\n              if( checkEdgeIntersections ){\r\n                this.addFaceToGridLocation( roomName, colliderType, minGridX, minGridZ, faceKey );\r\n                continue;\r\n              }\r\n\r\n              // -- -- --\r\n\r\n              // Triangle is larger than the grid location and no edges intersect grid edges\r\n              //   Fallback to grid center barcentric check\r\n\r\n              let gridCenter = new Vector3((gx + 0.5) * gridSize, 0, (gz + 0.5) * gridSize);\r\n              \r\n              // Origin-Edge relationships\r\n              let origEdge = gridCenter.clone().sub(v0);\r\n\r\n              // Vertex-Edge relationships\r\n              let dotE0EOrig = edge0.dot(origEdge);\r\n              let dotE1EOrig = edge1.dot(origEdge);\r\n\r\n              // Calculate barycentric coordinates\r\n              let u = (dotE1E1 * dotE0EOrig - dotE0E1 * dotE1EOrig) * areaInv;\r\n              let v = (dotE0E0 * dotE1EOrig - dotE0E1 * dotE0EOrig) * areaInv;\r\n\r\n              // Grid center collided with given triangle\r\n              if (u >= 0 && v >= 0 && (u + v) < 1) {\r\n                this.addFaceToGridLocation( roomName, colliderType, gx, gz, faceKey );\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      // Remove any duplicate face entries from `faceGridGroup`\r\n      //   This should be rare, but since I'm not reading Y values for key naming, it's possible\r\n      //     Make a building with a bunch of the same layout per floor, with the same collision object, you'll get duplicate face vertices\r\n      //       Better safe than sorry, it should be a fast run, but it is javascript after all\r\n      let faceGridGroupKeys = Object.keys( this.roomColliderData[ roomName ][ colliderType ][ 'faceGridGroup' ] );\r\n      for( let x = 0; x < faceGridGroupKeys.length; ++x ){\r\n        let curEntry = this.roomColliderData[ roomName ][ colliderType ][ 'faceGridGroup' ][ faceGridGroupKeys[x] ];\r\n        this.roomColliderData[ roomName ][ colliderType ][ 'faceGridGroup' ][ faceGridGroupKeys[x] ] = [ ...new Set( curEntry ) ]; // Python has ruined me, `list( set( (...) ) )`\r\n      }\r\n\r\n\r\n      this.roomColliderData[ roomName ][ colliderType ][ 'count' ] = colliderTriCount;\r\n      this.debug( \" -- Collider Count for \" + roomName + \" : \" + colliderTriCount );\r\n\r\n\r\n      // Full dump of collider data for the room\r\n      //   This is for debugging purposes\r\n      //this.log( this.roomColliderData[roomName][ colliderType ]['faceGridGroup'] );\r\n    }else{\r\n      this.debug( \" -- No colliders found for room: \" + pxlRoomObj.getName() );\r\n      this.debug( \"      If you didn't intend on including collider objects in your FBX, something went wrong. Please check your FBX for unintentional collider user-detail attributes on mainScene objects.\" );\r\n    }\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  // Parse vert locations, calculate barcentric coordinates, and build roomColliderData dictionary\r\n  //   No need for grid sampling, as the likely-hood of an interactable being in the same/neighboring grid location is low\r\n  prepInteractables( pxlRoomObj, colliderType=COLLIDER_TYPE.HOVERABLE ){\r\n\r\n    if( !pxlRoomObj.hasColliderType( colliderType ) ) return;\r\n\r\n    let roomName = pxlRoomObj.getName();\r\n    let curInteractables = pxlRoomObj.getColliders( colliderType );\r\n    //console.log( curInteractables );\r\n\r\n    if( curInteractables.length == 0 ) return; // No interactables found, user may have removed objects from the scene during runtime\r\n\r\n    // Build interactable collider base data\r\n    if( !this.roomColliderData.hasOwnProperty( roomName ) ){\r\n      this.roomColliderData[ roomName ] = {};\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    let colliderBaseName = -1;\r\n    curInteractables.forEach( (collider)=>{\r\n      colliderBaseName++;\r\n      let colliderFaceVerts = collider.geometry.attributes.position.array;\r\n      let colliderFaceCount = colliderFaceVerts.length / 3;\r\n\r\n      let curInteractableName = collider.name ;// != \"\" ? collider.name : \"Interactable_\" + colliderBaseName;\r\n\r\n      // Logic change from `prepColliders`, as interactables may be hover AND clickable\r\n      //   By-pass the colliderType specification\r\n      // If the interactable is already in the roomColliderData, skip it\r\n      if( this.roomColliderData[ roomName ].hasOwnProperty( curInteractableName ) ){\r\n        return; // the forEach `continue`\r\n      }\r\n\r\n      // Gather interactable collider data\r\n      this.roomColliderData[ roomName ][ curInteractableName ] = {};\r\n      this.roomColliderData[ roomName ][ curInteractableName ][ 'hoverable' ] = colliderType == COLLIDER_TYPE.HOVERABLE;\r\n      this.roomColliderData[ roomName ][ curInteractableName ][ 'clickable' ] = colliderType == COLLIDER_TYPE.CLICKABLE;\r\n      this.roomColliderData[ roomName ][ curInteractableName ][ 'gridSize' ] = this.baseGridSize; // Unused; it's for parity with other collider types\r\n      this.roomColliderData[ roomName ][ curInteractableName ][ 'faceVerts' ] = {};\r\n\r\n      // Gather Face-Vertex data for interactable collider and barcentric coordinates\r\n      for( let x = 0; x < colliderFaceCount; ++x ){\r\n        // Get Face-Vertex positions\r\n        //   [ [...], x1,y1,z1, x2,y2,z2, x3,y3,z3, [...] ] -> Vector3( x1, y1, z1 )\r\n        let baseIndex = x * 9;\r\n        let v0 = new Vector3( colliderFaceVerts[ baseIndex ], colliderFaceVerts[ baseIndex + 1 ], colliderFaceVerts[ baseIndex + 2 ] );\r\n        let v1 = new Vector3( colliderFaceVerts[ baseIndex + 3 ], colliderFaceVerts[ baseIndex + 4 ], colliderFaceVerts[ baseIndex + 5 ] );\r\n        let v2 = new Vector3( colliderFaceVerts[ baseIndex + 6 ], colliderFaceVerts[ baseIndex + 7 ], colliderFaceVerts[ baseIndex + 8 ] );\r\n\r\n        // Edge vectors\r\n        let edge0 = v1.clone().sub(v0);\r\n        let edge1 = v2.clone().sub(v0);\r\n        let normal = edge0.clone().cross(edge1);\r\n\r\n        // Face-Vertex data for grid location association\r\n        let faceKey = this.getGridKey(curInteractableName, \"_\", this.flattenVector3( v0 ), this.flattenVector3( v1 ), this.flattenVector3( v2 ) );\r\n        let faceVerts = {\r\n            \"object\" : collider,\r\n            \"key\" : faceKey,\r\n            \"verts\" : [ v0, v1, v2 ],\r\n            \"edge0\" : edge0,\r\n            \"edge1\" : edge1,\r\n            \"normal\" : normal\r\n          };\r\n        this.roomColliderData[roomName][ curInteractableName ]['faceVerts'][faceKey] = faceVerts;\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  // Check if line segment intersects 2d grid edge\r\n  //   Used for triangle edge -> grid boundary intersection detection\r\n  isGridEdgeIntersecting( edgeStart, edgeSegment, gridXMin, gridXMax, gridZMin, gridZMax ){\r\n        // Line segment parameters\r\n        let dx = edgeSegment.x;\r\n        let dz = edgeSegment.z;\r\n        \r\n        // Calculate intersection parameters for each grid boundary\r\n        let txMin = dx !== 0 ? (gridXMin - edgeStart.x) / dx : Infinity;\r\n        let txMax = dx !== 0 ? (gridXMax - edgeStart.x) / dx : -Infinity;\r\n        let tzMin = dz !== 0 ? (gridZMin - edgeStart.z) / dz : Infinity;\r\n        let tzMax = dz !== 0 ? (gridZMax - edgeStart.z) / dz : -Infinity;\r\n        \r\n        // Find intersection interval\r\n        let tMin = Math.max(Math.min(txMin, txMax), Math.min(tzMin, tzMax));\r\n        let tMax = Math.min(Math.max(txMin, txMax), Math.max(tzMin, tzMax));\r\n        \r\n        // Line intersects if tMax >= tMin and intersection occurs within segment (0 <= t <= 1)\r\n        return tMax >= tMin && tMax >= 0 && tMin <= 1;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Simple key generation\r\n  getGridKey( ...args ){\r\n    let retVal = args.join( this.delimiter );\r\n    return retVal;\r\n  }\r\n\r\n  // Flatten Vector3 to a string\r\n  flattenVector3( vec ){\r\n    return this.getGridKey( this.pxlUtils.toNearestStr(vec.x), this.pxlUtils.toNearestStr(vec.y), this.pxlUtils.toNearestStr(vec.z) );\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  // Add face to grid location by its `facekey`\r\n  addFaceToGridLocation( roomName, colliderType, gridX, gridZ, faceKey ){\r\n    // All your keys are belong to us!\r\n    let gridKey = this.getGridKey(gridX, gridZ);\r\n\r\n    // Add an empty array should it not exist\r\n    if (!this.roomColliderData[roomName][ colliderType ]['faceGridGroup'][gridKey]) {\r\n      this.roomColliderData[roomName][ colliderType ]['faceGridGroup'][gridKey] = [];\r\n    }\r\n\r\n    // Map of grid locations to [ ..., face keys, ... ]\r\n    this.roomColliderData[roomName][ colliderType ]['faceGridGroup'][gridKey].push( faceKey );\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Moller-Trumbore triangle ray intersection\r\n  //   The other ray casting method has issues to be worked out\r\n  //     This is the general purpose rayCaster for now\r\n  // Implemented to be side-non-specific, as the ray may be cast from any direction\r\n  //   Ray intersection for front facing or back facing triangles\r\n  //     ** This is assuming Three.js is using right-handed winding order **\r\n  //\r\n  // Using - Scalar Triple Product; Cramer's Rule - Determinant of a 3x3 matrix\r\n  //   u = (origin - v0) . (direction x edge1) / (edge0 . (direction x edge1))\r\n  //   v = (origin - v0) . (edge0 x direction) / (edge0 . (direction x edge1))\r\n  //   t = (v1 - origin) . (edge1 x direction) / (edge0 . (direction x edge1))\r\n  // Pages 4 & 5 -\r\n  //   https://cadxfem.org/inf/Fast%20MinimumStorage%20RayTriangle%20Intersection.pdf\r\n  //\r\n  castRay( roomName, origin, direction, colliderType=COLLIDER_TYPE.FLOOR, geoSide=GEOMETRY_SIDE.DOUBLE, multiHits=true ){\r\n    \r\n    if( !this.roomColliderData.hasOwnProperty( roomName ) || !this.roomColliderData[ roomName ].hasOwnProperty( colliderType ) ){\r\n      this.error( \"Room '\" + roomName + \"' does not have collider data for type: \" + colliderType );\r\n      this.error( \" -- Please register any collider objects with `pxlColliders.prepColliders()` or `pxlColliders.prepInteractables` first -- \" );\r\n      return [];\r\n    }\r\n\r\n    let roomData = this.roomColliderData[roomName][colliderType];\r\n    let gridSize = roomData['gridSize'];\r\n    let gridSizeInv = 1 / gridSize;\r\n    let gridX = Math.floor(origin.x * gridSizeInv);\r\n    let gridZ = Math.floor(origin.z * gridSizeInv);\r\n    let gridKey = this.getGridKey(gridX, gridZ);\r\n\r\n    // Default checks for front and back facing triangles\r\n    let backFaceCheck = 1;\r\n    let frontFaceCheck = 1;\r\n    if( geoSide == GEOMETRY_SIDE.FRONT ){\r\n      backFaceCheck = 0;\r\n    }else if( geoSide == GEOMETRY_SIDE.BACK ){\r\n      frontFaceCheck = 0;\r\n    }\r\n\r\n    if (!roomData['faceGridGroup'].hasOwnProperty(gridKey)) return [];\r\n    let faceKeys = roomData['faceGridGroup'][gridKey];\r\n    //let faceKeys = Object.keys( roomData['faceVerts'] );\r\n\r\n    let hits = [];\r\n    let retHits = {};\r\n\r\n\r\n    faceKeys.forEach(faceKey => {\r\n      let faceVerts = roomData['faceVerts'][faceKey];\r\n      let v0 = faceVerts['verts'][0];\r\n      //let v1 = faceVerts['verts'][1];\r\n      //let v2 = faceVerts['verts'][2];\r\n\r\n      let edge0 =  faceVerts['edge0']; // v1.clone().sub(v0);\r\n      let edge1 =  faceVerts['edge1']; // v2.clone().sub(v0);\r\n      let directionCross = direction.clone().cross(edge1);\r\n      let isFacing = edge0.dot( directionCross ); // Determinant of the matrix\r\n\r\n      // Triangle is parallel to the ray\r\n      //   This allows negative facing triangles to be detected\r\n      if( isFacing*backFaceCheck > -this.epsilon && isFacing*frontFaceCheck < this.epsilon ) return; // This ray is parallel to this triangle.\r\n\r\n      // Calculate barycentric coordinates\r\n      \r\n      let edgeOrig = origin.clone().sub(v0);\r\n      let u = edgeOrig.dot( directionCross );\r\n\r\n      if( u < 0.0 || u > isFacing ) return; // Invalid barcentric coordinate, outside of triangle\r\n\r\n      let crossOrig = edgeOrig.clone().cross(edge0);\r\n      let v = direction.dot( crossOrig );\r\n\r\n      if( v < 0.0 || u + v > isFacing) return; // Invalid barcentric coordinate, outside of triangle\r\n\r\n      let factor = 1.0 / isFacing; // Inverted Determinant to reduce divisions, Scale factor for ray intersection\r\n      u *= factor;\r\n      v *= factor;\r\n\r\n      let dist = factor * edge1.dot( crossOrig ); // 'dist' is 't' in the Moller-Trumbore algorithm\r\n\r\n      if( dist > this.epsilon ){ // ray intersection\r\n        let intersectionPoint = origin.clone().add( direction.clone().multiplyScalar(dist) );\r\n        retHits[ dist ] = {\r\n          'object' : faceVerts['object'],\r\n          'pos' : intersectionPoint,\r\n          'dist' : dist\r\n        };\r\n      }\r\n    });\r\n\r\n    // Find closest intersection point to the origin\r\n    let distKeys = Object.keys( retHits );\r\n    distKeys.sort();\r\n    let retArr = [];\r\n    for( let x = 0; x < distKeys.length; ++x ){\r\n      retArr.push( retHits[ distKeys[x] ] );\r\n    }\r\n\r\n    // Update active face in collision helper object, if exists\r\n    if( roomData[ 'helper' ] ){\r\n      let curFace = retArr.length > 0 ? retArr[0] : -1;\r\n      this.setHelperActiveFace( roomName, colliderType, curFace );\r\n    }\r\n\r\n    return retArr;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // ** Currently not 100% correct, user castRay() for now **\r\n  //\r\n  // Returns array of collision positions on the collider, sorted by distance from the origin\r\n  //   Each object in the array contains -\r\n  // \"object\" : Collided Three.js object\r\n  // \"pos\" : Vector3 position of the collision\r\n  // \"dist\" : Distance from the origin\r\n  castGravityRay( roomName, origin, colliderType=COLLIDER_TYPE.FLOOR, multiHits=true ){\r\n    // Check if collider type exists in the room's collider data\r\n    if( !this.roomColliderData.hasOwnProperty( roomName ) || !this.roomColliderData[roomName].hasOwnProperty( colliderType ) ){\r\n      return [];\r\n    }\r\n    \r\n    let roomData = this.roomColliderData[ roomName ][ colliderType ];\r\n    let gridSize = roomData[ 'gridSize' ];\r\n    let faceGridGroup = roomData[ 'faceGridGroup' ];\r\n\r\n    // Find the grid location of the origin\r\n    let gridSizeInv = 1 / gridSize;\r\n    let gridX = Math.floor(origin.x * gridSizeInv);\r\n    let gridZ = Math.floor(origin.z * gridSizeInv);\r\n    let gridKeyArr = [\r\n        this.getGridKey( gridX-1, gridZ-1 ),\r\n        this.getGridKey( gridX-1, gridZ ),\r\n        this.getGridKey( gridX, gridZ-1 ),\r\n        this.getGridKey( gridX, gridZ ),\r\n        this.getGridKey( gridX+1, gridZ ),\r\n        this.getGridKey( gridX, gridZ+1 ),\r\n        this.getGridKey( gridX+1, gridZ+1 ),\r\n      ];\r\n    \r\n    // Find face vert arrays for current and neighboring grid locations\r\n    //   Since the ray is cast from the origin, it's possible that the origin is not within a face,\r\n    //     Or not within the current grid location of the face\r\n    // Parse all face ids, remove dupelicates, and find the closest face to the origin\r\n    let faceIds = [];\r\n    for( let x = 0; x < gridKeyArr.length; ++x ){\r\n      if( faceGridGroup?.hasOwnProperty( gridKeyArr[x] ) ){\r\n        faceIds.push( ...faceGridGroup[ gridKeyArr[x] ] );\r\n      }\r\n    }\r\n\r\n    faceIds = Object.keys( roomData['faceVerts'] );\r\n\r\n    // No collider faces found\r\n    if( faceIds.length == 0 ){\r\n      return [];\r\n    }\r\n\r\n    // Python really has ruined me for removing dupelicates, `list( set( (...) ) )`\r\n    //   I love golfing when I can!\r\n    faceIds = [...new Set( faceIds )];\r\n\r\n    let retPositions = {};\r\n\r\n    //console.log( faceIds.length );\r\n\r\n    // Find face vert arrays for the grid location\r\n    for( let x = 0; x < faceIds.length; ++x ){\r\n      // Face-Vertex data\r\n      let faceVerts = roomData[ 'faceVerts' ][ faceIds[x] ];\r\n      let v0 = faceVerts[ 'verts' ][0];\r\n      let v1 = faceVerts[ 'verts' ][1];\r\n      let v2 = faceVerts[ 'verts' ][2];\r\n\r\n\r\n      // Get edge vectors\r\n      let edgeOrigin = origin.clone().sub(v0);\r\n\r\n      let faceNormal = faceVerts[ 'normal' ];\r\n      //console.log( Object.keys( faceVerts ) );\r\n\r\n      let distToFace = edgeOrigin.dot( faceNormal ) / faceNormal.dot( faceNormal );\r\n      let projection = origin.clone().sub( faceNormal.clone().multiplyScalar( distToFace ) );\r\n      \r\n      let edge0 = v2.sub( v0 ); // faceVerts[ 'edge0' ];\r\n      let edge1 = v1.sub( v0 ); // faceVerts[ 'edge1' ];\r\n      let edgeProj = projection.clone().sub(v0);\r\n\r\n      // Get Vertex-Edge relationships\r\n      let dotE0E0 = edge0.dot( edge0 ); // faceVerts[ 'dotE0E0' ];\r\n      let dotE0E1 = edge0.dot( edge1 ); // faceVerts[ 'dotE0E1' ];\r\n      let dotE0EOrigin = edge0.dot( edgeProj );\r\n      let dotE1E1 = edge1.dot( edge1 ); // faceVerts[ 'dotE1E1' ];\r\n      let dotE1EOrigin = edge1.dot( edgeProj );\r\n\r\n      // Calculate triangle area and barycentric coordinates\r\n      let areaInv = (dotE0E0 * dotE1E1 - dotE0E1 * dotE0E1); // faceVerts[ 'areaInv' ];\r\n      if( areaInv == 0 ) continue; // Triangle is degenerate\r\n      areaInv = 1 / (dotE0E0 * dotE1E1 - dotE0E1 * dotE0E1); // faceVerts[ 'areaInv' ];\r\n      let u = (dotE1E1 * dotE0EOrigin - dotE0E1 * dotE1EOrigin) * areaInv;\r\n      let v = (dotE0E0 * dotE1EOrigin - dotE0E1 * dotE0EOrigin) * areaInv;\r\n\r\n      //console.log( dotE0E0, dotE0E1, dotE0EOrigin, dotE1E1, dotE1EOrigin );\r\n      //console.log( areaInv, u, v );\r\n      if( u >= 0 && v >= 0 && (u + v) < 1 ){\r\n        // Intersection found\r\n        //   Return collision position on face\r\n        let intersectionPoint = v0.clone().add(edge0.multiplyScalar(u)).add(edge1.multiplyScalar(v));\r\n\r\n        //console.log( \"--\", intersectionPoint );\r\n\r\n        // Store distance for sorting\r\n        let dist = origin.distanceTo(intersectionPoint);\r\n\r\n        let intersectData = {\r\n          \"object\" : faceVerts[ 'object' ],\r\n          \"pos\" : intersectionPoint,\r\n          \"dist\" : dist\r\n        }\r\n\r\n        retPositions[dist] = intersectData;\r\n\r\n        if( !multiHits ){\r\n          return [intersectData];\r\n        }\r\n      }\r\n    }\r\n\r\n    // Find closest intersection point to the origin\r\n    let distKeys = Object.keys( retPositions );\r\n    distKeys.sort();\r\n    let retArr = [];\r\n    for( let x = 0; x < distKeys.length; ++x ){\r\n      retArr.push( retPositions[ distKeys[x] ] );\r\n    }\r\n\r\n    // Update active face in collision helper object, if exists\r\n    if( roomData[ 'helper' ] ){\r\n      let curFace = retArr.length > 0 ? retArr[0] : -1;\r\n      this.setHelperActiveFace( roomName, colliderType, curFace );\r\n    }\r\n\r\n    return retArr;\r\n  }\r\n\r\n  // -- -- -- \r\n\r\n  // 'objectInteractList' is an array of Three.js objects\r\n  // 'camera' is a three.js camera object\r\n  // 'screenUV' is a Vector2 of the screen position in NDC, from -1 to 1\r\n  //   If needed, run `pxlNav.pxlUtils.screenToNDC( mX,mY, swX,swY )` to convert screen position to NDC before passing to this function\r\n  castInteractRay( roomName, objectInteractList=[], camera=null, screenUV=Vector2(0.0, 0.0), multiHits=true ){\r\n\r\n    // Calculate ray direction & origin\r\n    let cameraRay = new Vector3( 0, 0, 0 );\r\n    camera.getWorldDirection( cameraRay );\r\n    let rayOrigin = camera.position.clone();\r\n    \r\n    // Calculate frustum dimensions using FOV and aspect ratio\r\n    let fovRadians = camera.fov * this.degToRad;\r\n    let tanFov = Math.tan(fovRadians * .5);\r\n    let aspectRatio = camera.aspect;\r\n\r\n    // Calculate ray direction in camera space\r\n    let dirX = screenUV.x * aspectRatio * tanFov;\r\n    let dirY = screenUV.y * tanFov;\r\n    let dirZ = -1; // Forward in camera space\r\n\r\n    // Create direction vector and transform to world space\r\n    let rayDirection = new Vector3(dirX, dirY, dirZ)\r\n        .applyMatrix4(camera.matrixWorld)\r\n        .sub(camera.position)\r\n        .normalize();\r\n\r\n    // -- -- --\r\n\r\n    let retClickedObjects = {};\r\n\r\n    objectInteractList.forEach(( curObj )=>{\r\n      let curName = curObj.name;\r\n\r\n      // TODO : Add check for current object Face-Vertex data; build if not found\r\n      //if( !this.roomColliderData[ roomName ].hasOwnProperty( curName ) ){\r\n      //  this.prepInteractables( curObj );\r\n      //}\r\n\r\n      // Iterate Face-Vertex data for current object\r\n      let curFaceData = this.roomColliderData[ roomName ][ curName ];\r\n      let objFaceVerts = curFaceData[ 'faceVerts' ];\r\n      let faceVertKeys = Object.keys( objFaceVerts );\r\n      //console.log( faceVertKeys );\r\n      faceVertKeys.forEach(( curFaceKey )=>{\r\n        let curFace = objFaceVerts[ curFaceKey ];\r\n        let v1 = curFace[ 'verts' ][0];\r\n        let v2 = curFace[ 'verts' ][1];\r\n        let v3 = curFace[ 'verts' ][2];\r\n\r\n        // Get edge vectors\r\n        let edge0 = curFace[ 'edge0' ];\r\n        let edge1 = curFace[ 'edge1' ];\r\n        let normal = curFace[ 'normal' ];\r\n\r\n        // Check if ray and triangle are parallel\r\n        let NDotRay = normal.dot(rayDirection);\r\n        if( Math.abs(NDotRay) < 0.000001 ) return;  // Ray parallel to triangle\r\n\r\n        // Calculate distance from ray origin to triangle plane\r\n        let d = normal.dot(v1); // TODO : Verify this is the correct\r\n        let dist = (d - normal.dot(rayOrigin)) / NDotRay;\r\n\r\n        if( dist < 0 ) return;  // Triangle is behind ray\r\n\r\n        // Calculate intersection point\r\n        let intersection = rayOrigin.clone().add(rayDirection.clone().multiplyScalar( dist ));\r\n\r\n        // Calculate barycentric coordinates\r\n        let va = v1.clone().sub(intersection);\r\n        let vb = v2.clone().sub(intersection);\r\n        let vc = v3.clone().sub(intersection);\r\n\r\n        let na = vb.clone().cross(vc).length();\r\n        let nb = vc.clone().cross(va).length();\r\n        let nc = va.clone().cross(vb).length();\r\n        let total = na + nb + nc;\r\n\r\n        // Calculate barycentric coordinates\r\n        let u = na / total;\r\n        let v = nb / total;\r\n        let w = nc / total;\r\n\r\n        // Check if ray intersects triangle\r\n        if( u >= 0 && u <= 1 && v >= 0 && v <= 1 && w >= 0 && w <= 1 ) {\r\n          // Intersection found\r\n          //   Return collision position on face\r\n          let intersectionPoint = v1.clone().add(edge0.multiplyScalar(u)).add(edge1.multiplyScalar(v));\r\n\r\n          //console.log( \"--!!--\", intersectionPoint );\r\n\r\n          // Store distance for sorting\r\n          let dist = rayOrigin.distanceTo(intersectionPoint);\r\n          retClickedObjects[dist] = { \r\n            'obj' : curObj,\r\n            'pos' : intersection\r\n          };\r\n\r\n          if( !multiHits ) {\r\n            return { \r\n              'obj' : curObj,\r\n              'pos' : intersection\r\n            };\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    // Sort by closest intersection point to the camera\r\n    let distKeys = Object.keys( retClickedObjects );\r\n    distKeys.sort();\r\n    let retArr = {};\r\n    retArr[ 'order' ] = [];\r\n    retArr[ 'hits' ] = {};\r\n    retArr[ 'hitCount' ] = 0;\r\n    for( let x = 0; x < distKeys.length; ++x ){\r\n      let curObj = retClickedObjects[ distKeys[x] ][ 'obj' ];\r\n      let curIntersect = retClickedObjects[ distKeys[x] ][ 'pos' ];\r\n      let curName = curObj.name;\r\n      retArr[ 'order' ].push( curObj );\r\n\r\n      if(  !retArr[ 'hits' ].hasOwnProperty( curName ) ){\r\n        retArr[ 'hits' ][ curName ] = [];\r\n      }\r\n      retArr[ 'hits' ][ curName ].push( curIntersect );\r\n      retArr[ 'hitCount' ]++;\r\n    }\r\n\r\n    return retArr;\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n  //////////////////////////////////////////////////\r\n  // Helper Functions for Collider Visualization //\r\n  ////////////////////////////////////////////////\r\n\r\n  // Face ID To Color ID\r\n  //   Fit color to limit for easier visual identification\r\n  toColorId( faceId, limit=256 ){\r\n    let limitInv = 1.0 / limit;\r\n    let redLimit = 1.0 / (limit * limit);\r\n    // -- -- --\r\n    let redId = Math.floor( faceId * redLimit ) % limit;\r\n    let greenId = Math.floor( faceId * limitInv ) % limit;\r\n    let blueId = faceId % limit;\r\n    // -- -- --\r\n    return  [ redId*limitInv, greenId*limitInv, blueId*limitInv ];\r\n  }\r\n\r\n  // Generate a random color ID list for visual identification\r\n  //   This will shift neighboring triangles to different colors\r\n  getRandomColorIdList( count=64 ){\r\n    let colorIdList = Array.from({length: count}, (_, x) => { return x });\r\n    let stepSize = parseInt( Math.floor( colorIdList.length / 3 ) );\r\n\r\n    // If stepSize is even, make it odd\r\n    stepSize += (stepSize & 0x0001)==0 ? 1 : 0;\r\n\r\n    let randomColorIdList = [];\r\n    for( let x = 0; x < count; ++x ){\r\n      if( colorIdList.length == 0 ){ // Should never run, but just in case\r\n        break;\r\n      }else if( colorIdList.length == 1 ){\r\n        randomColorIdList.push( colorIdList.pop() );\r\n        break;\r\n      }\r\n      let curComponent = (stepSize*x) % colorIdList.length;\r\n      let curEntry = colorIdList.splice( curComponent , 1 );\r\n      randomColorIdList.push( curEntry[0] );\r\n    }\r\n    return randomColorIdList;\r\n  }\r\n\r\n    \r\n  // Display known triangles as a visual red when in the users grid\r\n  //  The intersected triangle will be displayed as a green triangle\r\n  buildHelper( roomObj, colliderType=COLLIDER_TYPE.FLOOR ){\r\n    let roomName = roomObj.getName();\r\n    let roomData = this.roomColliderData[ roomName ][ colliderType ];\r\n    let triCount = roomData[ 'count' ];\r\n\r\n    this.log( \"Building helper for \" + roomName + \" with \" + triCount + \" triangles\" );\r\n\r\n    // Create a geometry to hold all triangles\r\n    let geometry = new BufferGeometry();\r\n\r\n    // Arrays to hold vertices and visibility attributes\r\n    let vertices = [];\r\n    let colorId = [];\r\n    let visibility = [];\r\n\r\n    let colorIdList = this.getRandomColorIdList( triCount );\r\n\r\n    let colorLimit = parseInt( triCount ** .5 );\r\n    let posYShift = 0.1;\r\n\r\n    // Iterate through all face vertices in roomData\r\n    Object.keys(roomData['faceVerts']).forEach((faceKey, index) => {\r\n      let faceVerts = roomData['faceVerts'][faceKey]['verts'];\r\n\r\n      // Push vertices for each triangle\r\n      vertices.push( faceVerts[0].x, faceVerts[0].y + posYShift, faceVerts[0].z );\r\n      vertices.push( faceVerts[1].x, faceVerts[1].y + posYShift, faceVerts[1].z );\r\n      vertices.push( faceVerts[2].x, faceVerts[2].y + posYShift, faceVerts[2].z );\r\n\r\n      // Push visibility attribute for each vertex (default to 0, meaning not visible)\r\n      visibility.push( 0, 0, 0 );\r\n\r\n      // Set unique color for each triangle\r\n      let curColorId = this.toColorId( colorIdList[index], colorLimit );\r\n      colorId.push( ...curColorId, ...curColorId, ...curColorId );\r\n\r\n    });\r\n\r\n    // Convert arrays to Float32Array\r\n    let verticesArray = new Float32Array( vertices );\r\n    let colorIdArray = new Float32Array( colorId );\r\n    let visibilityArray = new Float32Array( visibility );\r\n\r\n\r\n    // Set attributes for geometry\r\n    geometry.setAttribute( 'position', new BufferAttribute( verticesArray, 3 ) );\r\n    geometry.setAttribute( 'colorId', new BufferAttribute( colorIdArray, 3 ) );\r\n    geometry.setAttribute( 'visibility', new BufferAttribute( visibilityArray, 1 ) );\r\n\r\n    // Create a material with a shader that can toggle visibility based on vertex attributes\r\n    let material = new ShaderMaterial({\r\n      uniforms: {\r\n      visibleFaceId: { value: -1 } // Default to -1, meaning no face is green\r\n      },\r\n      vertexShader: `\r\n        uniform float visibleFaceId;\r\n\r\n        attribute vec3 colorId;\r\n        attribute float visibility;\r\n\r\n        varying vec4 vCd;\r\n        varying float vVisibility;\r\n\r\n        void main() {\r\n          vVisibility = visibility*.5+.5;\r\n          \r\n          vCd = vec4( normalize(colorId), 0.50 ); // Pre-calculated Blue for visible face\r\n          if (visibleFaceId == 1.0) {\r\n            vCd = vec4( 0.0, 1.0, 0.0, 1.0 ); // Green for visible face\r\n          }\r\n\r\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n        }\r\n      `,\r\n      fragmentShader: `\r\n        varying vec4 vCd;\r\n        varying float vVisibility;\r\n\r\n        void main() {\r\n\r\n          vec4 Cd = vCd;\r\n          //Cd.a *= vVisibility;\r\n          //Cd.rgb = vec3( vVisibility );\r\n\r\n          gl_FragColor = Cd;\r\n        }\r\n      `,\r\n    });\r\n\r\n\r\n    material.side = DoubleSide;\r\n    material.transparent = true;\r\n    material.depthTest = true;\r\n    material.depthWrite = false;\r\n    material.blending = AdditiveBlending;\r\n\r\n    // Create mesh and add to the scene\r\n    let mesh = new Mesh(geometry, material);\r\n    mesh.renderOrder = 2;\r\n\r\n    // Store the mesh for later use\r\n    this.roomColliderData[ roomName ][ colliderType ][ 'helper' ] = mesh;\r\n\r\n    return mesh;\r\n\r\n  }\r\n\r\n  // Update vertex attributes to current grid location\r\n  stepHelper( roomObj, colliderType=COLLIDER_TYPE.FLOOR ){\r\n    let roomName = roomObj.getName();\r\n    let roomData = this.roomColliderData[ roomName ][ colliderType ];\r\n    let helperMesh = roomData[ 'helper' ];\r\n    let faceGridGroup = roomData[ 'faceGridGroup' ];\r\n\r\n\r\n    // Get current grid location\r\n    let gridSize = roomData[ 'gridSize' ];\r\n    let gridSizeInv = 1 / gridSize;\r\n    let gridX = Math.floor(roomObj.position.x * gridSizeInv);\r\n    let gridZ = Math.floor(roomObj.position.z * gridSizeInv);\r\n    let gridKey = this.getGridKey(gridX, gridZ);\r\n\r\n    // Get all face keys in the current grid location\r\n    let faceKeys = faceGridGroup[gridKey];\r\n\r\n    if( this.prevGridKey == gridKey ){\r\n      return;\r\n    }\r\n\r\n    // Update face-vertex visibility attribute based on grid location\r\n    let geometry = helperMesh.geometry;\r\n    let visibility = geometry.attributes.visibility;\r\n    let visibilityArray = visibility.array;\r\n    /*for (let i = 0; i < visibilityArray.length; i++) {\r\n      visibilityArray[i] = 0;\r\n    }*/\r\n\r\n    // Set visibility to 1 for all faces in the current grid location\r\n    /*if (faceKeys) {\r\n      faceKeys.forEach((faceKey) => {\r\n        let faceVerts = roomData['faceVerts'][faceKey];\r\n        let idx = 3 * faceVerts['idx'];\r\n        visibilityArray[idx] = 1;\r\n        visibilityArray[idx + 1] = 1;\r\n        visibilityArray[idx + 2] = 1;\r\n      });\r\n    }*/\r\n  }\r\n\r\n  setHelperActiveFace( roomName, colliderType=COLLIDER_TYPE.FLOOR, faceIdx=-1 ){\r\n    let roomData = this.roomColliderData[ roomName ][ colliderType ];\r\n    let helperMesh = roomData[ 'helper' ];\r\n\r\n    let material = helperMesh.material;\r\n    material.uniforms.visibleFaceId.value = faceIdx;\r\n  }\r\n\r\n\r\n  // -- -- -- \r\n  \r\n\r\n  destroy( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      this.animMixer[ animName ].stopAllAction();\r\n      delete this.animMixer[ animName ];\r\n      delete this.objects[ animName ];\r\n      let idx = this.objNames.indexOf( animName );\r\n      this.objNames.splice( idx, 1 );\r\n    }\r\n  }\r\n\r\n}","// pxlNav Animation Manager\r\n// -- -- -- -- -- -- -- -- --\r\n// Written by Kevin Edzenga; 2024\r\n\r\n\r\nimport {\r\n  Clock,\r\n  AnimationMixer,\r\n  MeshStandardMaterial,\r\n} from \"../../libs/three/three.module.min.js\";\r\n\r\n/**\r\n * @alias pxlAnim\r\n * @class\r\n * @description Animation handling\r\n */\r\nexport class Animation{\r\n  constructor( assetPath=null, msRunner=null ){\r\n    this.pxlEnv = null;\r\n    this.assetPath=assetPath;\r\n    this.verbose = false;\r\n    \r\n    this.animInitEntry = {\r\n      'rig' : null,\r\n      'mesh' : null,\r\n      'mixer' : null,\r\n      'clips' : {},\r\n\r\n      'state' : null,\r\n      'hasConnection' : false,\r\n      'prevTime' : -1,\r\n      'connected' : [],\r\n      'connections' : {}\r\n    }\r\n    \r\n    this.objNames = [];\r\n    this.objects = {};\r\n    this.animMixer = {};\r\n    this.msRunner=msRunner;\r\n    this.clock = new Clock();\r\n  }\r\n  setDependencies( pxlEnv ){\r\n    this.pxlEnv = pxlEnv;\r\n  }\r\n  log( msg ){\r\n    if( this.verbose ){\r\n      console.log( msg );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize an object for animation\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @param {Object} animFbx - The FBX object to animate\r\n   */\r\n  initObject( animName, animFbx ){\r\n    \r\n    let animRoot = null;\r\n    let bindObj = null;\r\n    let runCount = animFbx.children.length;\r\n    let x = 0;\r\n    let checkList = [...animFbx.children];\r\n    let meshCount = 0;\r\n    let boneCount = 0;\r\n    let SkinnedMeshCount = 0;\r\n    let GroupCount = 0;\r\n    while( x < runCount ){\r\n      let c = checkList[x];\r\n      switch( c.type ){\r\n        case \"Bone\":\r\n          ++boneCount;\r\n          animRoot = c;\r\n          break;\r\n        case \"Mesh\":\r\n          ++meshCount;\r\n          c.visible = false;\r\n          break;\r\n        case \"SkinnedMesh\":\r\n          ++SkinnedMeshCount;\r\n          bindObj = c;\r\n          break;\r\n        case \"Group\":\r\n          ++GroupCount;\r\n          checkList = checkList.concat( c.children );\r\n          runCount = checkList.length;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      ++x;\r\n    }\r\n\r\n    let error = false;\r\n    if( !animRoot ){\r\n      this.log(\"Error, No Bone/Rig Root Found; Please move your rig to the scene's root. Grouped rigs aren't supported yet.\");\r\n      error = true;\r\n    }\r\n    if( !bindObj ){\r\n      this.log(\"Error, No SkinnedMesh Found; Please ensure your rig has a mesh to animate.\");\r\n      error = true;\r\n    }\r\n    if( error ){\r\n      console.log( \"Unable to prepare '\"+animName+\"' for animation\" );\r\n\r\n      console.log( \"Group Count: \"+GroupCount );\r\n      console.log( \"Bone Root Found : \"+(boneCount>0) );\r\n      console.log( \"Bone Count : \"+boneCount );\r\n      console.log( \"Mesh Count: \"+meshCount );\r\n      console.log( \"SkinnedMesh Count: \"+SkinnedMeshCount );\r\n      return;\r\n    }\r\n\r\n\r\n    //console.log( animFbx)\r\n\r\n    if( !this.objNames.includes( animName ) ){\r\n      this.objNames.push( animName );\r\n      let outDict = Object.assign({}, this.animInitEntry);\r\n      outDict[ 'rig' ] = animRoot;\r\n      outDict[ 'mesh' ] = bindObj;\r\n      this.animMixer[ animName ] = new AnimationMixer( animRoot );\r\n      outDict[ 'mixer' ] = this.animMixer[ animName ];\r\n      this.objects[ animName ] = outDict;\r\n\r\n      let skinnedMaterial = new MeshStandardMaterial();\r\n      skinnedMaterial.map = bindObj.material.map;\r\n\r\n      bindObj.material = skinnedMaterial;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Add a clip to an object\r\n   *   Use `pxlFile.loadAnimFBX() to load your animation clips`\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @param {string} clipName - The name of the clip to add\r\n   * @param {Object} animFbx - The FBX object to animate\r\n   * @example\r\n   * // Add a clip to an object\r\n   * pxlAnim.addClips( \"myAnim\", \"myClip\", fbxLoader_animationCycleRoot );\r\n   */\r\n  addClips( animName, clipName, animFbx ){\r\n    if( !this.objNames.includes( animName ) ){\r\n      this.log(\"Error, '\"+animName+\"' not found in Animation Manager\");\r\n      return;\r\n    }\r\n    let clipNames = Object.keys( this.objects[ animName ][ 'clips' ] );\r\n    if( clipNames.includes( clipName ) ){\r\n      this.log(\"Warning, '\"+clipName+\"' already exists in '\"+animName+\"'\");\r\n    }\r\n    let animMixer = this.animMixer[ animName ];\r\n    //console.log(animFbx.animations);\r\n\r\n    // TODO : Add support for objects to reuse animation sources\r\n\r\n    let newClip = animMixer.clipAction( animFbx.animations[0] );\r\n    this.objects[ animName ][ 'clips' ][ clipName ] = newClip;\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Check if an object has a clip\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @param {string} clipName - The name of the clip to check for\r\n   * @returns {boolean} - True if the object has the clip\r\n   * @example\r\n   * // Check if an object has a clip\r\n   * let hasClip = this.pxlAnim.hasClip( this.animRigName, \"myClipName\" );\r\n   * console.log( hasClip );\r\n   */\r\n  hasClip( animName, clipName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      let clipNames = Object.keys( this.objects[ animName ][ 'clips' ] );\r\n      return clipNames.includes( clipName );\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get the current state of an object\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @returns {string} - The current state of the object\r\n   * @example\r\n   * // Get the current state of an object\r\n   * let curState = this.pxlAnim.getMixer( this.animRigName );\r\n   * console.log( curState );\r\n   */\r\n  getMixer( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      return this.animMixer[ animName ];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get animation rig of an object\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @returns {Object} - The rig object of the animation object\r\n   * @example\r\n   * // Get animation rig of an object\r\n   * let rig = this.pxlAnim.getRig( this.animRigName );\r\n   * console.log( rig );\r\n   */\r\n  getRig( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      return this.objects[ animName ][ 'rig' ];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get mesh of the rigged object\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @returns {Object} - The mesh object of the animation object\r\n   * @example\r\n   * // Get mesh of the rigged object\r\n   * let mesh = this.pxlAnim.getMesh( this.animRigName );\r\n   * console.log( mesh );\r\n   */\r\n  getMesh( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      return this.objects[ animName ][ 'mesh' ];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getFallbackCycle( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      let clipNames = Object.keys( this.objects[ animName ][ 'clips' ] );\r\n      if( clipNames.length > 0 ){\r\n        return clipNames[0]; // Return the first clip as fallback\r\n      }\r\n    }else{\r\n      \r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Play a clip on an object\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @param {string} clipName - The name of the clip to play\r\n   * @example\r\n   * // Play a clip on an object\r\n   * this.pxlAnim.playClip( this.animRigName, \"myClipName\" );\r\n   */\r\n  playClip( animName, clipName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      let clipNames = Object.keys( this.objects[ animName ][ 'clips' ] );\r\n      if( clipNames.includes( clipName ) ){\r\n        let clip = this.objects[ animName ][ 'clips' ][ clipName ];\r\n        this.objects[ animName ][ 'state' ] = clipName ;\r\n        this.objects[ animName ][ 'prevTime' ] = -1 ;\r\n        this.objects[ animName ][ 'hasConnection' ] = this.objects[ animName ][ 'connected' ].includes( clipName );\r\n\r\n        this.setWeight( animName, clipName, 1, true );\r\n\r\n        clip.reset();\r\n        clip.play();\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Set blend weights of animation cycle in the mixer\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @param {string} clipName - The name of the clip to set weight for\r\n   * @param {number} weight - The weight to set\r\n   * @param {boolean} disableOthers - Disable other clips in the mixer\r\n   * @example\r\n   * // Set blend weights of animation cycle in the mixer\r\n   * //this.pxlAnim.setWeight( this.animRigName, \"myClipName\", 1, true );\r\n   * this.pxlAnim.setWeight( this.animRigName, \"myClipName\", 0.5, false );\r\n   * //this.pxlAnim.setWeight( this.animRigName, \"myClipName\", 0.25, true );\r\n   */\r\n  setWeight( animName, clipName, weight, disableOthers=false ){\r\n    if( this.objNames.includes( animName ) ){\r\n      let clipNames = Object.keys( this.objects[ animName ][ 'clips' ] );\r\n      if( clipNames.includes( clipName ) ){\r\n        let clip = this.objects[ animName ][ 'clips' ][ clipName ];\r\n        clip.enabled = true;\r\n        clip.setEffectiveTimeScale( 1 );\r\n        clip.setEffectiveWeight( weight );\r\n        if( disableOthers ){\r\n          clipNames.forEach( (clipKey)=>{\r\n            if( clipKey != clipName ){\r\n              let nonClip = this.objects[ animName ][ 'clips' ][ clipKey ];\r\n              nonClip.enabled = false;\r\n              nonClip.setEffectiveTimeScale( 1 );\r\n              nonClip.setEffectiveWeight( 0 );\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set animation cycle speed in the mixer\r\n   * \r\n   * This is handled when the FBX is loaded, this is visible for the example\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @param {string} clipName - The name of the clip to set speed for\r\n   * @param {number} speed - The speed to set\r\n   * @example\r\n   * // Set animation cycle speed in the mixer\r\n   * constructor(){\r\n   *     this.animSource = {\r\n   *       \"RabbitDruidA\" : {\r\n   *         \"rig\" : this.assetPath+\"RabbitDruidA/RabbitDruidA_rig.fbx\",\r\n   *         \"anim\" : {\r\n   *           \"Sit_Idle\" : this.assetPath+\"RabbitDruidA/RabbidDruidA_anim_sit_idle.fbx\",\r\n   *           \"Sit_Stoke\" : this.assetPath+\"RabbitDruidA/RabbidDruidA_anim_sit_stoke.fbx\",\r\n   *           \"Sit_Look\" : this.assetPath+\"RabbitDruidA/RabbidDruidA_anim_sit_look.fbx\"\r\n   *         },\r\n   *         \"stateConnections\"  : {\r\n   *           // Non existing states will be ignored and loop'ed, ie \"Walk\"\r\n   *           \"Sit_Idle\" : [ ...Array(6).fill(\"Sit_Idle\"), ...Array(6).fill(\"Sit_Stoke\"), ...Array(5).fill(\"Sit_Look\")],\r\n   *           \"Sit_Stoke\" : [\"Sit_Idle\"],\r\n   *           \"Sit_Look\" : [\"Sit_Idle\"]\r\n   *         }\r\n   *       }\r\n   *     };\r\n   *   }\r\n   */\r\n  setStateConnections( animName, stateConnections ){\r\n    if( this.objNames.includes( animName ) ){\r\n      let stateKeys = Object.keys( stateConnections );\r\n      this.objects[ animName ][ 'connected' ] = stateKeys;\r\n      this.objects[ animName ][ 'connections' ] = stateConnections;\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  // Rudimentary State Machine Implementation\r\n  // If the current state has 'connections',\r\n  //   It'll random pick form those possible states\r\n  // If no outgoing connections, it'll loop the current state\r\n  step( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      let hasConnection = this.objects[ animName ][ 'hasConnection' ];\r\n      if( !hasConnection ){\r\n        this.animMixer[ animName ].update( this.clock.getDelta() );\r\n        return;\r\n      }\r\n\r\n      let curState = this.objects[ animName ][ 'state' ];\r\n      if( curState ){ // Dunno why this would never be set when 'hasConnection' is set, sanity check\r\n        let curClip = this.objects[ animName ][ 'clips' ][ curState ];\r\n        let curTime = curClip.time;\r\n        let prevTime = this.objects[ animName ][ 'prevTime' ];\r\n\r\n        // Cycle loop check\r\n        if( prevTime > curTime ){\r\n          let nextStates = this.objects[ animName ][ 'connections' ][ curState ];\r\n          let randState = nextStates[ Math.floor( Math.random() * nextStates.length ) ];\r\n          this.playClip( animName, randState );\r\n        }else{\r\n          this.animMixer[ animName ].update( this.clock.getDelta() );\r\n          this.objects[ animName ][ 'prevTime' ] = curTime;\r\n        }\r\n      }else{\r\n        this.animMixer[ animName ].update( this.clock.getDelta() );\r\n      }\r\n    }\r\n  }\r\n\r\n  // -- -- -- \r\n\r\n  /**\r\n   * Destroy a rig + animation objects of the provided animation name\r\n   * @method\r\n   * @memberof pxlAnim\r\n   * @param {string} animName - The name of the animation object\r\n   * @example\r\n   * // Destroy a rig + animation objects of the provided animation name\r\n   * this.pxlAnim.destroy( \"myAnim\" );\r\n   */\r\n  destroy( animName ){\r\n    if( this.objNames.includes( animName ) ){\r\n      this.animMixer[ animName ].stopAllAction();\r\n      delete this.animMixer[ animName ];\r\n      delete this.objects[ animName ];\r\n      let idx = this.objNames.indexOf( animName );\r\n      this.objNames.splice( idx, 1 );\r\n    }\r\n  }\r\n\r\n}","// -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// --   The Core pxlNav Engine File          --\r\n// --    -- -- -- -- -- -- -- --             --\r\n// --  Written by Kevin Edzenga; 2020-2024   --\r\n// --    Using js as its backbone      --\r\n// --                                        --\r\n// --  The 'Environment' class manages       --\r\n// --    engine management & render stack    --\r\n// --  This is the class that interprets     --\r\n// --    the rooms found in -                --\r\n// --     ./Source/js/pxlRooms               --\r\n// --  To make a custom room,                --\r\n// --    See the 'templateRoom' project      --\r\n// --                                        --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  WebGLRenderTarget,\r\n  RGBAFormat,\r\n  LinearFilter,\r\n  DepthTexture,\r\n  DepthFormat,\r\n  UnsignedShortType,\r\n  FloatType,\r\n  HalfFloatType,\r\n  Scene,\r\n  Group,\r\n  Color,\r\n  FogExp2,\r\n  ShaderMaterial,\r\n  FrontSide,\r\n  LinearSRGBColorSpace,\r\n  PlaneGeometry,\r\n  DoubleSide,\r\n  Mesh\r\n} from \"../libs/three/three.module.min.js\";\r\n\r\nimport { ANTI_ALIASING, VERBOSE_LEVEL, COLLIDER_TYPE } from \"./core/Enums.js\";\r\nimport { pxlOptions } from \"./core/Options.js\";\r\n\r\n// Import room loader\r\nimport { loadRoomModule } from '../pxlRooms/index.js'; \r\n\r\nimport { EffectComposer } from '../libs/three/EffectComposer.js';\r\nimport { RenderPass } from '../libs/three/RenderPass.js';\r\nimport { ShaderPass } from '../libs/three/ShaderPass.js';\r\nimport { CopyShader } from '../libs/three/CopyShader.js';\r\n// TODO : Remove all traces of bloom passes, implement Neurous Box Blur passes\r\nimport { UnrealBloomPass } from '../libs/three/UnrealBloomPass.js';\r\n\r\n\r\n// TODO : This class needs breaking up into BaseEnvironment & MainEnvironment expand\r\n\r\n/**\r\n * @namespace pxlEnv\r\n * @description pxlNav Environment\r\n */\r\nexport class Environment{\r\n  constructor( options, mainRoom='Default', mobile ){\r\n    this.engine=null;\r\n    this.scene=null;\r\n    this.parentGroupList={};\r\n    this.parentGroupList[mainRoom]=[];\r\n    this.parentNameList=[];\r\n    this.pxlOptions=options;\r\n\r\n\r\n\r\n    // -- -- -- --\r\n    // TODO : Move to pxlQuality, when I finally get to that module\r\n    this.prevRenderMS=0;\r\n    this.prevRuntimeMS=0;\r\n    this.nextRenderMS=0;\r\n\r\n    // Max frame rate - \r\n    this.fps = 30;\r\n    if( this.pxlOptions.fps.hasOwnProperty(\"mobile\") ){\r\n      this.fps = mobile ? this.pxlOptions.fps.mobile : this.pxlOptions.fps.pc;\r\n    }else if( this.pxlOptions.fps.hasOwnProperty(\"Mobile\") ){ // Legacy\r\n      this.fps = mobile ? this.pxlOptions.fps.Mobile : this.pxlOptions.fps.PC;\r\n    }\r\n    this.renderInterval = 1.0 / this.fps;\r\n    // -- -- -- --\r\n\r\n    let pxlRoomName = \"Default\";\r\n    if( this.pxlOptions.hasOwnProperty(\"pxlRoomName\") ){\r\n      pxlRoomName = this.pxlOptions.pxlRoomName;\r\n    }else{\r\n      pxlRoomName = mainRoom || \"Default\";\r\n    }\r\n\r\n    this.pxlRoomAbsRoot = pxlRoomName;\r\n    let splitRoot = pxlRoomName.split(\"/\");\r\n    splitRoot.splice(0,1);\r\n    splitRoot = splitRoot.join(\"/\");\r\n    pxlRoomName = pxlRoomName.startsWith('./') ? pxlRoomName.slice(1) : pxlRoomName;\r\n    \r\n    if( this.pxlOptions.hasOwnProperty(\"pxlRoomRoot\") ){\r\n      this.pxlRoomLclRoot = this.pxlOptions.pxlRoomRoot;\r\n    }else{\r\n      this.pxlRoomLclRoot = \"./\"+pxlRoomName.split(\"/\").pop().join(\"/\");\r\n    }\r\n    \r\n    this.mainRoom=mainRoom; // Main environment room\r\n    this.bootRoom=mainRoom; // Room to start pxlNav in\r\n    this.bootLocation=null; // Camera Position to start pxlNav at\r\n    this.currentRoom=mainRoom; // Current residing room\r\n    this.roomNameList=[mainRoom]; // Room name list\r\n    this.roomSubList={};\r\n    this.roomSceneList={}; // Room Object list; [ Environment Object, ... ]\r\n    this.roomSceneList[mainRoom]=this;\r\n    this.roomPostGuiCalls=[];\r\n    this.jmaCheckConnection=false;\r\n        \r\n    this.checkContext=0;\r\n    this.activeContext=false;\r\n    \r\n    this.warpPortalTextures={};\r\n    this.warpZoneRenderTarget=null;\r\n    this.currentAudioZone=0;\r\n    \r\n    this.pxlUtils=null;\r\n    this.pxlEnums=null;\r\n    this.pxlTimer=null;\r\n    this.pxlAnim=null;\r\n    this.pxlColliders=null;\r\n    this.pxlAutoCam=null;\r\n    this.pxlAudio=null;\r\n    this.pxlFile=null;\r\n    this.pxlVideo=null;\r\n    this.pxlQuality=null;\r\n    this.pxlUser=null;\r\n    this.pxlShaders=null;\r\n    this.pxlDevice=null;\r\n    this.pxlCamera=null;\r\n    this.pxlGuiDraws=null;\r\n    \r\n    \r\n    this.cloud3dTexture=null;\r\n    this.softNoiseTexture=null;\r\n    this.detailNoiseTexture=null;\r\n    this.chroAberUVTexture=null;\r\n    this.chroAberUVAlpha=null;\r\n    this.blockAnimTexture=null;\r\n    this.userScreenIntensity=new Vector2(0,.8); // User Screen Multi, x=Base Color Mult, y=Added Boost\r\n    this.portaluserScreenIntensity=new Vector2(1,0);\r\n    this.portalMtlRate=.7;\r\n    this.mobile=mobile;\r\n    \r\n    this.camNear=.1;\r\n    this.camFar=5000;\r\n    \r\n    this.fogMult = new Vector2(0,0);\r\n    this.fogColor=new Color(.07,.07,.10);//new Color(.07,.07,.10);\r\n    this.fogColorSky=new Color(.1,.1,.12);\r\n    this.fogExp=.0003;\r\n    this.fog=new FogExp2( this.fogColor, this.fogExp);\r\n\r\n    this.listener=null;\r\n    this.posted=false;\r\n    this.postIntro=false;\r\n    \r\n    this.camLocation = {};\r\n    this.camInitPos=new Vector3(0,15,0);\r\n    this.camInitLookAt=new Vector3(0,15,0);\r\n    this.camThumbPos=new Vector3(0,0,0);\r\n    this.camThumbLookAt=new Vector3(0,20,0);\r\n    this.camReturnPos=new Vector3(0,0,0);\r\n    this.camReturnLookAt=new Vector3(0,0,0);\r\n    this.camLobbyPos=new Vector3(0, 15, 0);\r\n    this.camLobbyLookAt=new Vector3(0, 15, -100);\r\n    this.pxlCamFOV={ 'PC':60, 'MOBILE':80 };\r\n    this.pxlCamZoom=1;\r\n    this.pxlCamAspect=1;\r\n    this.pxlCamNearClipping = this.camNear;\r\n    this.pxlCamFarClipping = this.camFar;\r\n    \r\n    this.groupList=[];\r\n    this.geoList=[];\r\n    this.geoLoadList=[]; // 0 Not loaded, 1 Loaded, 2 Loaded and Processed (Setting Dependants)\r\n    this.geoLoadListComplete=0;\r\n    this.lightList=[];\r\n    this.returnPortalGlowList=[];\r\n    this.roomWarpVisuals={};\r\n    this.proximityGeo=null;\r\n    this.userAvatarGroup=new Group();\r\n    \r\n    // ## Warp visuals to dict\r\n    this.warpVisualActive=false;\r\n    this.warpVisualMaxTime=[1.5,1];\r\n    this.warpVisualStartTime=0;\r\n    this.warpVisualFader=new Vector2(0,1);\r\n    this.warpVisualCmd=null;\r\n\r\n    // ## Move passes to a dict\r\n    this.stepShaderFuncArr=[];\r\n    this.mapMotionBlurPass=null;\r\n    this.mapCopyMotionBlurPass=null;\r\n    this.mapOverlayHeavyPass=null;\r\n    this.mapOverlayPass=null;\r\n    this.mapOverlaySlimPass=null;\r\n    this.mapBoxAAPass=null;\r\n    this.mapCrossAAPass=null;\r\n    this.mapWorldPosMaterial=null;\r\n    this.mapGlowPass=null;\r\n    this.mapGlowMotionBlur=null;\r\n    this.mapComposer=null;\r\n    this.mapComposerMotionBlur=null;\r\n    this.mapComposerBloom=null;\r\n    this.mapComposerGlow=null;\r\n    this.chromaticAberrationPass=null;\r\n    this.chroAberrationRoomPass=null;\r\n    this.lizardKingPass=null;\r\n    this.lizardKingRoomPass=null;\r\n    this.mapComposerWarpPass=null;\r\n    this.blurScreenMerge=null;\r\n    this.pxlRenderSettings={\r\n      'exposure':1.0,\r\n      'mult':( mobile ? 1.0 : 1.0 ),\r\n      'bloomStrength':0.5,\r\n      'bloomThresh':.6,\r\n      'bloomRadius':.05,\r\n    }\r\n    this.exposureShiftActive=false;\r\n\r\n    this.delayComposer=null;\r\n    this.delayPass=null;\r\n    \r\n    this.chroAberMult=new Vector2(1,0);\r\n    this.blurDirCur=new Vector2(0,0);\r\n    this.blurDirPrev=new Vector2(0,0);\r\n    \r\n    this.shaderPasses={};\r\n    \r\n    this.roomComposer=null;\r\n    this.roomRenderPass=null;\r\n    this.roomBloomPass=null;\r\n    this.roomGlowPass=null;\r\n    \r\n    this.blurComposer=null;\r\n    this.glowPassMask = new Vector2(1.0,0.0);\r\n    \r\n    this.objectClickable=[];\r\n    this.objectClickableObjectList={};\r\n    this.clickablePrevActiveObject=null;\r\n        \r\n    this.promoClickable=[];\r\n    this.promoClickableObjectList={};\r\n    this.promoPrevActiveObject=null;\r\n    this.promoClickableLinks={};\r\n\r\n    // Test Web Cam\r\n    this.remoteVideoTextureList=[];\r\n    this.remoteUserNameList=[];\r\n    this.remoteUserMediaList={};\r\n    this.remoteUserVideoList=[];\r\n    this.remoteUserAudioList=[];\r\n    this.camScreenData={\r\n      count:0,\r\n      prevCount:0,\r\n      checkUserCount:true,\r\n      checkVideoStatus:true,\r\n      findCamCount:()=>{},\r\n      videoObjectList:[],\r\n      screenGeoList:[],\r\n      screenClickable:[],\r\n      screenMtlUniforms:[],\r\n      userDataList:[],\r\n      camFindInfoList:[]\r\n    };\r\n    \r\n    this.curUserCount=0;\r\n    this.prevUserCount=0;\r\n\r\n    this.emit=(type,value)=>{};\r\n    \r\n  }\r\n  \r\n  setDependencies( pxlNav ){\r\n    this.scene=pxlNav.scene;\r\n    this.pxlUtils=pxlNav.pxlUtils;\r\n    this.pxlEnums=pxlNav.pxlEnums;\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlAnim=pxlNav.pxlAnim;\r\n    this.pxlColliders=pxlNav.pxlColliders;\r\n    this.pxlAutoCam=pxlNav.pxlAutoCam;\r\n    this.pxlAudio=pxlNav.pxlAudio;\r\n    this.pxlFile=pxlNav.pxlFile;\r\n    this.pxlVideo=pxlNav.pxlVideo;\r\n    this.pxlQuality=pxlNav.pxlQuality;\r\n    this.pxlUser=pxlNav.pxlUser;\r\n    this.pxlShaders=pxlNav.pxlShaders;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlCamera=pxlNav.pxlCamera;\r\n    this.pxlGuiDraws=pxlNav.pxlGuiDraws;\r\n    this.emit=pxlNav.emit.bind(pxlNav);\r\n  }\r\n  \r\n  log( ...msg ){\r\n    if( this.pxlOptions.verbose > VERBOSE_LEVEL.INFO ){\r\n      console.log( msg );\r\n    }\r\n  }\r\n\r\n  debug( ...msg ){\r\n    if( this.pxlOptions.verbose > VERBOSE_LEVEL.DEBUG ){\r\n      console.log( msg );\r\n    }\r\n  }\r\n  warn( ...msg ){\r\n    if( this.pxlOptions.verbose > VERBOSE_LEVEL.WARN ){\r\n      console.warn( msg );\r\n    }\r\n  }\r\n  error( ...msg ){\r\n    if( this.pxlOptions.verbose > VERBOSE_LEVEL.ERROR ){\r\n      console.error( msg );\r\n    }\r\n  }\r\n\r\n  // Function required\r\n  init(){\r\n\r\n    let optionKeys=Object.keys( this.pxlOptions );\r\n    let defaultKeys=Object.keys( pxlOptions );\r\n    defaultKeys.forEach( (k)=>{\r\n      if( !optionKeys.includes( k ) ){\r\n        this.pxlOptions[k]=pxlOptions[k];\r\n      }\r\n    });\r\n\r\n    //this.setExposure( 0 );\r\n    let subList=Object.keys( this.roomSubList );\r\n    subList.forEach( (s)=>{\r\n        this.roomSubList[ s ].init();\r\n    });\r\n  }\r\n    \r\n  boot(){\r\n    //this.pxlQuality.attachModule( this );\r\n  }\r\n    \r\n  setBootRoom(bootRoom, bootLocation){\r\n      this.bootRoom=bootRoom;\r\n      this.bootLocation=bootLocation;\r\n  }\r\n    \r\n  postBoot(){\r\n\t\t\r\n\t\tthis.pxlGuiDraws.togglePageDisplay();\r\n\r\n    this.roomSceneList[this.bootRoom].start();\r\n    \r\n    this.posted=true;\r\n\r\n    //this.buildSnow();\r\n\r\n    // Trigger Mobile or PC How-To \r\n    if( this.pxlOptions.showOnboarding ){\r\n      if( this.pxlDevice.mobile || this.pxlAutoCam.enabled){\r\n        this.pxlGuiDraws.toggleMobileWelcome(true);\r\n      }else{\r\n        this.pxlGuiDraws.iconEvent( \"click\", this.pxlGuiDraws.hudIcons.helpIcon, \"help\" );\r\n      }\r\n    }\r\n  }\r\n    \r\n\r\n  postHelpIntro(){\r\n    // If the device is a computer, without autocam, send player details to the server\r\n    //   TODO : This will need to be accessible from the room object and set-up networking as an extention\r\n    if( !this.pxlDevice.mobile && !this.pxlAutoCam.enabled ){\r\n      this.pxlCamera.jogServerMemory();\r\n    \r\n    // If the device is a mobile, or autocam is enabled,\r\n    //   Trigger a valid collider to allow the camera to be placed.\r\n    }else{\r\n      this.pxlCamera.colliderValid=true;\r\n      this.pxlCamera.eventCheckStatus=true;\r\n      this.pxlCamera.colliderShiftActive=true;\r\n      this.pxlCamera.nearestFloorObjName=\"mobile\";\r\n      this.pxlCamera.colliderCurObjHit=\"AudioTrigger_2\";\r\n      this.pxlCamera.proximityScaleTrigger=true;\r\n      this.exposureShiftActive=true;\r\n      \r\n      // TODO : Media (audio, video, music) needs to be an setting on the pxlOptions object\r\n      if( !this.pxlDevice.mobile ){\r\n        this.pxlAudio.play();\r\n        setTimeout( ()=>{\r\n          this.pxlAudio.initPlay();\r\n        },100);\r\n      }\r\n    }\r\n    this.postIntro=true;\r\n  }\r\n\r\n  start(){\r\n    this.init();\r\n  }\r\n    \r\n  step(){\r\n        \r\n    // ## Should just have a stepper system set up...\r\n    //      Easier for modular installations\r\n    this.pxlTimer.step();\r\n    this.pxlAudio.step();\r\n    this.pxlQuality.step();\r\n    this.pxlDevice.step();\r\n    if( this.pxlAutoCam.step() ){\r\n        this.pxlCamera.step();\r\n    }\r\n    this.pxlGuiDraws.step();\r\n\r\n    this.stepWarpPass();\r\n        \r\n    if( this.pxlTimer.msRunner.x > this.checkContext && this.activeContext ){\r\n      this.checkContext=this.pxlTimer.msRunner.x+1;\r\n      let tmpCanvas=document.createElement('canvas');\r\n      try{\r\n        let ctxVal=!!tmpCanvas.getContext('webgl');\r\n      }catch(err){\r\n        this.activeContext=true;\r\n        this.pxlGuiDraws.pxlNavCanvas.style.display='none';\r\n      }\r\n    }\r\n    \r\n    //if( this.pxlDevice.mobile && this.exposureShiftActive ){\r\n      //this.pxlCamera.colliderShiftActive=!(this.pxlCamera.colliderAdjustPerc==1 || this.pxlCamera.colliderAdjustPerc==0);\r\n      //this.updateCompUniforms(curExp);\r\n    //}\r\n\r\n    this.emit( \"step\", {\r\n      'time': this.pxlTimer.curMS,\r\n      'delta': this.pxlTimer.msRunner.y,\r\n    });\r\n\r\n  }\r\n  \r\n  // Function required, stoping functions\r\n  async stop(){\r\n    this.setExposure( 0 );\r\n    let subList=Object.keys( this.roomSubList );\r\n    subList.forEach( (s)=>{\r\n      this.roomSubList[ s ].stop();\r\n    });\r\n  }\r\n  \r\n  // Load room module using static imports\r\n  // Is this the best way?\r\n  //   I don't know, React is persnickety about dynamic imports\r\n  //   So if it works, ... at this point, then it works\r\n  async loadReadRoomModule(roomName) {\r\n    if( this.pxlOptions.hasOwnProperty(\"framework\") && this.pxlOptions.framework === this.pxlEnums.FRAMEWORK.NATIVE ){\r\n      let curImportPath=`${this.pxlRoomLclRoot}/${roomName}/${roomName}.js`;\r\n      try {\r\n        return await import(curImportPath);\r\n      } catch (error) {\r\n        console.error(`Failed to load room module: ${curImportPath}`, error);\r\n        throw error;\r\n      }\r\n    }else{\r\n      try {\r\n        return await loadRoomModule(roomName);\r\n      } catch (error) {\r\n        console.error(`Failed to load room module: ${roomName}`, error);\r\n        throw error;\r\n      }\r\n    }\r\n  }\r\n  \r\n\r\n\r\n  loadRoom(roomName){\r\n    return new Promise( async (resolve, reject) => {\r\n\r\n      this.log(\"Loading Room - \", roomName);\r\n      \r\n      try {\r\n        // Use the enhanced loading system with manifest support\r\n        const module = await this.loadReadRoomModule(roomName)\r\n        \r\n        if (!module || !module[roomName]) {\r\n          throw new Error(`Room class ${roomName} not found in loaded module`);\r\n        }\r\n        \r\n        this.debug(\"Module loaded - \", module);\r\n        let roomObj = new module[roomName]( \r\n          roomName, \r\n          `${this.pxlRoomLclRoot}/${roomName}/`, \r\n          this.pxlTimer.msRunner, \r\n          null, \r\n          null, \r\n          this.cloud3dTexture\r\n        );\r\n        roomObj.setDependencies( this );\r\n\r\n        roomObj.camera=this.pxlCamera.camera;\r\n        roomObj.scene=new Scene();\r\n        if( !roomObj.userAvatarGroup ){\r\n            roomObj.userAvatarGroup=new Group();\r\n        }\r\n        roomObj.scene.add( roomObj.userAvatarGroup );\r\n        \r\n        var options = {\r\n            format : RGBAFormat,\r\n            antialias: false,\r\n            sortObjects:true,\r\n            alpha:true,\r\n            type : /(iPad|iPhone|iPod)/g.test(navigator.userAgent) ? HalfFloatType : FloatType\r\n        };\r\n        \r\n        roomObj.scene.renderTarget=new WebGLRenderTarget( this.pxlDevice.sW*this.pxlQuality.screenResPerc, this.pxlDevice.sH*this.pxlQuality.screenResPerc,options);\r\n        roomObj.scene.renderTarget.texture.format=RGBAFormat;\r\n        roomObj.scene.renderTarget.texture.minFilter=LinearFilter;\r\n        roomObj.scene.renderTarget.texture.magFilter=LinearFilter;\r\n        roomObj.scene.renderTarget.texture.generateMipmaps=false;\r\n        //roomObj.scene.renderTarget.texture.type=FloatType;\r\n        roomObj.scene.renderTarget.depthBuffer=true;\r\n        roomObj.scene.renderTarget.depthTexture = new DepthTexture( this.pxlDevice.sW*this.pxlQuality.screenResPerc, this.pxlDevice.sH*this.pxlQuality.screenResPerc );\r\n        roomObj.scene.renderTarget.depthTexture.format=DepthFormat;\r\n        //roomObj.scene.renderTarget.depthTexture.type=UnsignedIntType;\r\n        roomObj.scene.renderTarget.depthTexture.type=UnsignedShortType;\r\n        \r\n        // World Pos Target\r\n        //   Remains from a Portal Room Snapshot Display system\r\n        //     Would be desired tech, but needs re-implementation\r\n        // roomObj.scene.renderWorldPos=new WebGLRenderTarget( this.pxlDevice.sW*this.pxlQuality.screenResPerc, this.pxlDevice.sH*this.pxlQuality.screenResPerc,options);\r\n        // roomObj.scene.renderWorldPos.texture.format=RGBAFormat;\r\n        // roomObj.scene.renderWorldPos.texture.minFilter=NearestFilter;\r\n        // roomObj.scene.renderWorldPos.texture.magFilter=NearestFilter;\r\n        // roomObj.scene.renderWorldPos.texture.generateMipmaps=false;\r\n        \r\n        roomObj.cloud3dTexture=this.cloud3dTexture;\r\n        if( !this.roomNameList.includes( roomName ) ){\r\n          this.roomNameList.push( roomName );\r\n        }\r\n        this.roomSceneList[ roomName ]=roomObj;\r\n        this.debug(this.roomSceneList[ roomName ]);\r\n    \r\n        resolve(true);\r\n        \r\n      } catch (err) {\r\n        console.error(\"Error Loading Room - \", roomName);\r\n        console.error(\"Error details:\", err.message);\r\n        if(this.pxlOptions.verbose >= VERBOSE_LEVEL.ERROR){\r\n          console.error(\"Full error:\", err);\r\n        }\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n  \r\n  startAllRooms(){\r\n    this.roomNameList.forEach( (roomName)=>{\r\n        this.startRoom( this.roomSceneList[ roomName ] );\r\n    });\r\n  }\r\n  \r\n  startRoom( room ){\r\n    room.active=false;\r\n    room.startTime=this.pxlTimer.msRunner.x;\r\n  }\r\n    \r\n  newSubRoom( roomObject ){\r\n    this.roomSubList[ roomObject.getName() ]=roomObject;\r\n  }\r\n  addToRooms( obj ){\r\n    let roomObjDict={};\r\n    \r\n    this.roomNameList.forEach( (n)=>{\r\n      let dupe=obj.clone();\r\n      this.roomSceneList[ n ].scene.add( dupe );\r\n      roomObjDict[n]=dupe;\r\n    });\r\n    return roomObjDict;\r\n  }\r\n  \r\n  addToRoomLayers( obj, layer=1 ){\r\n    let roomObjDict={};\r\n    \r\n    this.roomNameList.forEach( (n)=>{\r\n      let dupe=obj.clone();\r\n      this.roomSceneList[ n ].scene.add( dupe );\r\n      roomObjDict[n]=dupe;\r\n      dupe.layers.set( layer );\r\n    });\r\n    return roomObjDict;\r\n  }\r\n  \r\n  addToRoomParents( obj, parent ){\r\n    let roomObjDict={};\r\n    \r\n    if( !this.parentNameList.includes( parent ) ){\r\n      this.parentNameList.push( parent );\r\n    }\r\n    \r\n    this.roomNameList.forEach( (n)=>{\r\n      let dupe=obj.clone();\r\n      if( !this.parentGroupList[ n ] ){\r\n        this.parentGroupList[ n ]={};\r\n      }\r\n      if( !this.parentGroupList[ n ][ parent ] ){\r\n        let newGroup = new Group();\r\n        this.parentGroupList[ n ][ parent ]=newGroup;\r\n        this.roomSceneList[ n ].scene.add( newGroup );\r\n      }\r\n      this.parentGroupList[ n ][ parent ].add( dupe );\r\n      roomObjDict[n]=dupe;\r\n    });\r\n    return roomObjDict;\r\n  }\r\n  \r\n  // Initially, main room was loaded as a nexus room\r\n  //   Should see if this is still necessary\r\n  buildRoomEnvironments(){\r\n    \r\n    this.debug(\"Building Room Environments - \");\r\n    this.debug(this.roomNameList);\r\n    let loadPromisList=[];\r\n    \r\n    this.roomNameList.forEach( (r)=>{\r\n      if( this.roomSceneList[ r ].init ){\r\n        this.roomSceneList[ r ].init();\r\n      }\r\n      if( this.roomSceneList[ r ].build ){\r\n        this.roomSceneList[ r ].build();\r\n      }\r\n    });\r\n  }\r\n  \r\n  getArtistInfo(){\r\n    return null;\r\n  }\r\n    \r\n  setFogHue( orig=[0,0], rot=[1,1] ){\r\n    let hsl=this.fog.color.getHSL();\r\n\r\n    let atanVals=[ rot[0]-orig[0], rot[1]-orig[1] ];\r\n    //let scalar=(atanVals[0]+atanVals[1]);\r\n    //atanVals= [ atanVals[0]/scalar, atanVals[0]/scalar ]\r\n    let hRot=Math.abs(Math.atan2( atanVals[0], atanVals[1] ) * 0.3183098861837907 ); // 1/pi\r\n    \r\n    let scale= (atanVals[0]**2+atanVals[1]**2)**.5 / Math.max(this.pxlDevice.sW, this.pxlDevice.sH);\r\n    this.fog.color.setHSL( hRot, scale*.5+.3, scale*.5 );\r\n    \r\n    if( this.roomSceneList[this.currentRoom] && this.roomSceneList[this.currentRoom].setFog ){\r\n      this.roomSceneList[this.currentRoom].setFog( this.fog.color );\r\n    }\r\n  }\r\n    \r\n  //%=\r\n  // Return Primary Shader Material\r\n  readShader( objShader=\"\" ){\r\n    if( objShader==\"script_fog\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n        \r\n      if(this.mapOverlayHeavyPass.enabled==true){\r\n        return this.mapOverlayHeavyPass.material ;\r\n      }else if(this.mapOverlayPass.enabled==true){\r\n        return this.mapOverlayPass.material ;\r\n      }else if(this.mapOverlaySlimPass.enabled==true){\r\n        return this.mapOverlaySlimPass.material ;\r\n      }\r\n    }else if( objShader==\"script_dArrows\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.geoList[ \"dArrows\" ][0].material;\r\n    }else if( objShader==\"script_userScreens\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.camScreenData.screenGeoList[0].material;\r\n    }else if( objShader==\"script_warpZonePortals\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.returnPortalGlowList[0].material;\r\n        \r\n    }else if( objShader==\"script_lizardking\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.lizardKingPass.material;\r\n    }else if( objShader==\"script_majorTom\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.pxlUser.starFieldPass.material;\r\n    }else if( objShader==\"script_fractalSubstrate\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.pxlUser.crystallinePass.material;\r\n    }else if( objShader==\"script_fractalEcho\" ){\r\n      this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n      return this.delayPass.material;\r\n        \r\n    }else{\r\n      let geoRead=objShader.split(\"_\");\r\n      geoRead.shift();\r\n      geoRead=geoRead.join(\"_\");\r\n      if( this.geoList[ geoRead ] ){\r\n          this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader=objShader;\r\n          return this.geoList[ geoRead ].material ;\r\n      }\r\n    }\r\n        \r\n        \r\n    //return this.pxlUser.starFieldPass.material;\r\n  }\r\n  setShader( unis, vert, frag ){\r\n        let setShaderMtl;\r\n        \r\n        let objShader=this.pxlGuiDraws.guiWindows[\"shaderGui\"].currentShader;\r\n        if( objShader==\"script_fog\" ){\r\n            if(this.mapOverlayHeavyPass.enabled==true){\r\n                setShaderMtl= this.mapOverlayHeavyPass.material ;\r\n            }else if(this.mapOverlayPass.enabled==true){\r\n                setShaderMtl= this.mapOverlayPass.material ;\r\n            }else if(this.mapOverlaySlimPass.enabled==true){\r\n                setShaderMtl= this.mapOverlaySlimPass.material ;\r\n            }\r\n        }else if( objShader==\"script_dArrows\" ){\r\n            this.geoList[ \"dArrows\" ].forEach( (o)=>{\r\n                setShaderMtl=o.material;\r\n                setShaderMtl.vertexShader=vert;\r\n                setShaderMtl.fragmentShader=frag;\r\n                setShaderMtl.needsUpdate=true;\r\n            });\r\n            return;\r\n        }else if( objShader==\"script_userScreens\" ){\r\n            this.camScreenData.screenGeoList.forEach( (o)=>{\r\n                setShaderMtl=o.material;\r\n                setShaderMtl.vertexShader=vert;\r\n                setShaderMtl.fragmentShader=frag;\r\n                setShaderMtl.needsUpdate=true;\r\n            });\r\n            return;\r\n        }else if( objShader==\"script_warpZonePortals\" ){\r\n            this.returnPortalGlowList.forEach( (o)=>{\r\n                setShaderMtl=o.material;\r\n                setShaderMtl.vertexShader=vert;\r\n                setShaderMtl.fragmentShader=frag;\r\n                setShaderMtl.needsUpdate=true;\r\n            });\r\n            return;\r\n            \r\n        }else if( objShader==\"script_lizardking\" ){\r\n                setShaderMtl=this.lizardKingPass.material;\r\n        }else if( objShader==\"script_majorTom\" ){\r\n                setShaderMtl=this.pxlUser.starFieldPass.material;\r\n        }else if( objShader==\"script_fractalSubstrate\" ){\r\n                setShaderMtl=this.pxlUser.crystallinePass.material;\r\n        }else if( objShader==\"script_fractalEcho\" ){\r\n                setShaderMtl=this.delayPass.material;\r\n            \r\n        }else{\r\n            let geoRead=objShader.split(\"_\");\r\n            geoRead.shift();\r\n            geoRead=geoRead.join(\"_\");\r\n            if( this.geoList[ geoRead ] ){\r\n                setShaderMtl= this.geoList[ geoRead ].material ;\r\n            }\r\n        }\r\n        \r\n        if(setShaderMtl){\r\n            setShaderMtl.vertexShader=vert;\r\n            setShaderMtl.fragmentShader=frag;\r\n            setShaderMtl.needsUpdate=true;\r\n        }\r\n  }\r\n  //%\r\n  \r\n  // Load the given texture file from the internal pxlNav 'assetRoot'\r\n  //   Default is \"./assets/\" from the web root.\r\n  //     Please pass the path to your asset folder when creating your pxlNav object.\r\n  // It would be best if you pass channel count and mods\r\n  //   But you can tell it attempts to mitigate the issue.\r\n    getAssetTexture( assetName, channels=null, mods=null ){\r\n      this.log(\"Get Internal Texture - \", assetName);\r\n      let curTexturePath = this.pxlUtils.assetRoot + assetName;\r\n      if(!channels){\r\n        let assetSplit = assetName.split(\".\");\r\n        let assetExt = assetSplit.pop().toLowerCase();\r\n        if( assetExt==\"jpg\" || assetExt==\"jpeg\"  ){\r\n          channels=3;\r\n        }else if( assetExt==\"png\" ){\r\n          channels=4;\r\n        }\r\n      }\r\n      if(!mods){\r\n        mods={\"encoding\":LinearSRGBColorSpace, \"magFilter\":LinearFilter, \"minFilter\":LinearFilter};\r\n      }\r\n\r\n      let textureRead = this.pxlUtils.loadTexture( curTexturePath, channels, mods );\r\n      return textureRead;\r\n    }\r\n    \r\n    \r\n    // A screen filled plane to render outside of effect composer passes\r\n    buildBackgroundObject( customUniforms={}, bgVert=null, bgFrag=null){\r\n        let geo = new PlaneGeometry();\r\n        \r\n        let bgUniforms={}\r\n        Object.assign( bgUniforms, customUniforms );\r\n        \r\n        if( bgVert==null || typeof(bgVert)!=\"string\"){\r\n            bgVert=this.pxlShaders.scene.bgScreenVert();\r\n        }\r\n        if( bgFrag==null || typeof(bgFrag)!=\"string\"){\r\n            bgFrag=this.pxlShaders.scene.bgScreenFrag();\r\n        }\r\n        \r\n        let mtl = this.pxlFile.pxlShaderBuilder( bgUniforms, bgVert, bgFrag );\r\n        mtl.side=DoubleSide;\r\n        mtl.depthTest=true;\r\n        mtl.depthWrite=false;\r\n        //mtl.transparent=true;\r\n        let bgMesh = new Mesh( geo, mtl );\r\n        bgMesh.frustumCulled = false;\r\n        \r\n        return bgMesh;\r\n    }\r\n    \r\n  // In-Scene clickables\r\n  clickUserDetect(){\r\n    \r\n    // Current Room Obj\r\n    let curRoomObj = this.roomSceneList[ this.currentRoom ];\r\n\r\n    // Cast mouse or touch position to NDC\r\n    let mouseScreenSpace = this.pxlUtils.screenToNDC( this.pxlDevice.mouseX, this.pxlDevice.mouseY, this.pxlDevice.sW, this.pxlDevice.sH );\r\n    \r\n    // Get clickable objects under mouse\r\n    let rayHits={};\r\n    if( curRoomObj?.hasColliderType && curRoomObj.hasColliderType( COLLIDER_TYPE.CLICKABLE ) ){\r\n      let curObjList = curRoomObj.getColliders( COLLIDER_TYPE.CLICKABLE );\r\n      rayHits = this.pxlColliders.castInteractRay( this.currentRoom, curObjList, this.pxlCamera.camera, mouseScreenSpace );\r\n    }\r\n\r\n    // Get nearest object hit,\r\n    //   rayHits.order is an array of objects hit, in order of distance\r\n    if( rayHits.hasOwnProperty(\"order\") && rayHits.order.length > 0 ){\r\n      let objHit = rayHits.order[0];\r\n      this.clickableActions(objHit.name);\r\n      return;\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    // If no clickable object hit, check for promo clickables\r\n    rayHits = {};\r\n    rayHits = this.pxlColliders.castInteractRay( this.currentRoom, this.promoClickable, this.pxlCamera.camera, mouseScreenSpace );\r\n\r\n    if(rayHits.hasOwnProperty(\"order\") && rayHits.order.length > 0){\r\n      let promoHit = rayHits.order[0];\r\n      this.promoActions( promoHit );\r\n    }\r\n  }\r\n\r\n  clickableActions(action=null){\r\n    if(action == \"CallToAction\" && this.clickablePrevActiveObject){\r\n      this.pxlGuiDraws.ctaBuildPopup();\r\n      this.objectClickableObjectList[this.clickablePrevActiveObject]['Inactive'].visible=true;\r\n      this.objectClickableObjectList[this.clickablePrevActiveObject]['Hover'].visible=false;\r\n      this.clickablePrevActiveObject=null;\r\n    }\r\n  }\r\n    \r\n  promoActions(pName=null){\r\n        let pLink=pName.userData.video;\r\n        let pScreen=pName.name;\r\n        \r\n        if( this.promoClickableLinks.hasOwnProperty( pLink ) ){\r\n            var link= window.open( this.promoClickableLinks[pLink], \"_blank\");\r\n            link.focus();\r\n        }\r\n  }\r\n  // Hover over clickable\r\n  hoverUserDetect(){\r\n    \r\n    // Current Room Obj\r\n    let curRoomObj = this.roomSceneList[ this.currentRoom ];\r\n\r\n    // Cast mouse or touch position to NDC\r\n    let mouseScreenSpace = this.pxlUtils.screenToNDC( this.pxlDevice.mouseX, this.pxlDevice.mouseY, this.pxlDevice.sW, this.pxlDevice.sH );\r\n    \r\n    // Get hoverable objects under mouse\r\n    let rayHits={};\r\n    if( curRoomObj?.hasColliderType && (curRoomObj.hasColliderType( COLLIDER_TYPE.CLICKABLE ) || curRoomObj.hasColliderType( COLLIDER_TYPE.HOVERABLE )) ){\r\n      // Combine objectClickable with objectHoverable This may change\r\n      let curObjList = [ ...curRoomObj.getColliders( COLLIDER_TYPE.CLICKABLE ), ...curRoomObj.getColliders( COLLIDER_TYPE.HOVERABLE ) ];\r\n      rayHits = this.pxlColliders.castInteractRay( this.currentRoom, curObjList, this.pxlCamera.camera, mouseScreenSpace );\r\n    }\r\n\r\n    // Get nearest object hit,\r\n    //   rayHits.order is an array of objects hit, in order of distance\r\n    if( rayHits.hasOwnProperty(\"order\") && rayHits.order.length > 0 ){\r\n      let objHit = rayHits.order[0];\r\n      this.pxlDevice.setCursor(\"help\");\r\n      if(this.objectClickableObjectList[objHit.name]){\r\n        if(this.clickablePrevActiveObject==null){\r\n          this.clickablePrevActiveObject=objHit.name;\r\n        }\r\n        this.objectClickableObjectList[objHit.name]['Inactive'].visible=false;\r\n        this.objectClickableObjectList[objHit.name]['Hover'].visible=true;\r\n      }\r\n      return;\r\n    }else{\r\n      if(this.clickablePrevActiveObject){\r\n        this.objectClickableObjectList[this.clickablePrevActiveObject]['Inactive'].visible=true;\r\n        this.objectClickableObjectList[this.clickablePrevActiveObject]['Hover'].visible=false;\r\n        this.clickablePrevActiveObject=null;\r\n      }\r\n      this.pxlDevice.setCursor(\"grab\");\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    // If no clickable object hit, check for promo clickables\r\n    rayHits = {};\r\n    rayHits = this.pxlColliders.castInteractRay( this.currentRoom, this.promoClickable, this.pxlCamera.camera, mouseScreenSpace );\r\n\r\n    if(rayHits.hasOwnProperty(\"order\") && rayHits.order.length > 0){\r\n      let promoHit = rayHits.order[0];\r\n      this.pxlDevice.setCursor(\"alias\");\r\n      if(this.promoClickableObjectList[promoHit.name]){\r\n        if(this.promoPrevActiveObject==null){\r\n          this.promoPrevActiveObject=promoHit.name;\r\n        }\r\n        this.promoClickableObjectList[promoHit.name].x=1;\r\n      }\r\n    }else{\r\n      if(this.promoPrevActiveObject){\r\n        this.promoClickableObjectList[this.promoPrevActiveObject].x=.1;\r\n        this.promoPrevActiveObject=null;\r\n      }\r\n      this.pxlDevice.setCursor(\"grab\");\r\n    }\r\n  }\r\n\r\n  // Set composer uniforms\r\n  updateCompUniforms(exposure=null){\r\n    if(exposure){\r\n      this.pxlRenderSettings.exposure=exposure*this.pxlRenderSettings.mult;\r\n    }\r\n    if(this.mapOverlayPass){\r\n      this.mapMotionBlurPass.uniforms.exposure.value = this.pxlRenderSettings.exposure;\r\n      this.mapOverlayHeavyPass.uniforms.exposure.value = this.pxlRenderSettings.exposure;\r\n      this.mapOverlayPass.uniforms.exposure.value = this.pxlRenderSettings.exposure;\r\n      this.mapOverlaySlimPass.uniforms.exposure.value = this.pxlRenderSettings.exposure;\r\n      //this.blurScreenMerge.uniforms.exposure.value = this.pxlRenderSettings.exposure;\r\n    }\r\n  }\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  // Event Helpers\r\n  sendRoomMessage( roomName, messageType, messageValue ){\r\n    if( this.roomSceneList[ roomName ] ){\r\n      this.roomSceneList[ roomName ].onMessage( messageType, messageValue );\r\n    }\r\n  }\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  // Build composers and passes\r\n  buildComposers(){\r\n        \r\n        // Set up swapable frame buffers, for prior frame reads\r\n        /*EffectComposer.prototype.swapBuffer = ()=>{\r\n            let tmpBuffer = this.renderTarget2;\r\n            this.renderTarget2 = this.renderTarget1;\r\n            this.renderTarget1 = tmpBuffer;\r\n        };*/\r\n        \r\n    ///////////////////////////////////////////////////\r\n    // -- SCENE WIDE MATERIALS  -- -- -- -- -- -- -- //\r\n    ///////////////////////////////////////////////////\r\n\r\n    let near = this.pxlCamera.camera?.near || 0.1;\r\n    let far = this.pxlCamera.camera?.far || 1000;\r\n    this.mapWorldPosMaterial=new ShaderMaterial({\r\n      uniforms:{\r\n        camNear: { type:\"f\", value: near },\r\n        camFar: { type:\"f\", value: far }\r\n      },\r\n      vertexShader: this.pxlShaders.rendering.worldPositionVert(),\r\n      fragmentShader: this.pxlShaders.rendering.worldPositionFrag()\r\n    });\r\n    //this.mapWorldPosMaterial.side=DoubleSide;\r\n    this.mapWorldPosMaterial.side=FrontSide;\r\n    this.mapWorldPosMaterial.name=\"mapWorldPosMaterial\";\r\n      \r\n    ///////////////////////////////////////////////////\r\n    // -- 2-Step Blur Composer  -- -- -- -- -- -- -- //\r\n    ///////////////////////////////////////////////////\r\n\r\n    this.blurComposer = new EffectComposer(this.engine);\r\n    \r\n    this.shaderPasses.blurXShaderPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          time:{ value:this.time },\r\n          tDiffuse: { value: null },\r\n          pDiffuse: { value: null },\r\n          resUV: { value: this.pxlDevice.screenRes },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.directionalBlurPass( \"pDiffuse\", [1,0], 4, 1.8 ),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.shaderPasses.blurXShaderPass.material.uniforms.pDiffuse = this.scene.renderGlowTarget.texture;\r\n    this.shaderPasses.blurXShaderPass.material.transparent = true;\r\n    this.shaderPasses.blurXShaderPass.needsSwap = true;\r\n    this.shaderPasses.blurXShaderPass.enabled=false;\r\n    this.shaderPasses.blurXShaderPass.name=\"blurXShaderPass\";\r\n    this.blurComposer.addPass( this.shaderPasses.blurXShaderPass );\r\n    \r\n    \r\n    this.shaderPasses.dirBlurCopyPass = new ShaderPass(CopyShader);\r\n    this.shaderPasses.dirBlurCopyPass.enabled=false;\r\n    this.shaderPasses.dirBlurCopyPass.name=\"dirBlurCopyPass\";\r\n    this.blurComposer.addPass(this.shaderPasses.dirBlurCopyPass);\r\n    \r\n    this.shaderPasses.blurYShaderPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          time:{ value:this.time },\r\n          tDiffuse: { value: null },\r\n          //pDiffuse: { value: this.scene.renderGlowTarget.texture },\r\n          //pDiffuse: { value: this.blurComposer.writeBuffer.texture },\r\n          pDiffuse: { value: null },\r\n          resUV: { value: this.pxlDevice.screenRes },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.directionalBlurPass( \"pDiffuse\", [0,1], 4, 1.3 ),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.shaderPasses.blurYShaderPass.material.uniforms.pDiffuse = this.scene.renderGlowTarget.texture;\r\n    this.shaderPasses.blurYShaderPass.material.transparent = true;\r\n    this.shaderPasses.blurYShaderPass.enabled=false;\r\n    this.shaderPasses.blurYShaderPass.name=\"blurYShaderPass\";\r\n    this.blurComposer.addPass( this.shaderPasses.blurYShaderPass );\r\n  \r\n    \r\n    this.shaderPasses.scatterMixShaderPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          time:{ value:this.time },\r\n          tDiffuse: { value: null },\r\n          pDiffuse: { value: null },\r\n          resUV: { value: this.pxlDevice.screenRes },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.mixBlurShaderPass(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.shaderPasses.scatterMixShaderPass.material.uniforms.pDiffuse = this.scene.renderGlowTarget.texture;\r\n    this.shaderPasses.scatterMixShaderPass.material.transparent = true;\r\n    this.shaderPasses.scatterMixShaderPass.enabled=false;\r\n    this.shaderPasses.scatterMixShaderPass.name=\"scatterMixShaderPass\";\r\n    this.blurComposer.addPass( this.shaderPasses.scatterMixShaderPass );\r\n    \r\n      \r\n    // Set Anti-Aliasing Quality\r\n    if( this.pxlOptions.antiAliasing == ANTI_ALIASING.LOW){\r\n      this.shaderPasses.scatterMixShaderPass.enabled=true;\r\n    }else if( this.pxlOptions.antiAliasing == ANTI_ALIASING.MEDIUM){\r\n      this.shaderPasses.blurXShaderPass.enabled=true;\r\n      this.shaderPasses.dirBlurCopyPass.enabled=true;\r\n      this.shaderPasses.blurYShaderPass.enabled=true;\r\n    }else if( this.pxlOptions.antiAliasing == ANTI_ALIASING.HIGH ){\r\n      this.shaderPasses.blurXShaderPass.enabled=true;\r\n      this.shaderPasses.dirBlurCopyPass.enabled=true;\r\n      this.shaderPasses.blurYShaderPass.enabled=true;\r\n      this.shaderPasses.scatterMixShaderPass.enabled=true;\r\n    }\r\n\r\n\r\n\r\n\r\n    ///////////////////////////////////////////////////\r\n    // -- POST PROCESSING; MAIN MENU  -- -- -- -- -- //\r\n    ///////////////////////////////////////////////////\r\n    // Post Processing\r\n    \r\n    this.mapComposerMotionBlur=new EffectComposer(this.engine);\r\n    \r\n    this.mapMotionBlurPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          rDiffuse: { value: null },\r\n          exposure:{type:\"f\",value:this.pxlRenderSettings.exposure},\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          camRotXYZ:{ value:this.pxlCamera.camRotXYZ },\r\n          blurDirCur:{ type:'f',value:this.blurDirCur },\r\n          blurDirPrev:{ type:'f',value:this.blurDirPrev },\r\n          noiseTexture: { value: this.cloud3dTexture },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.motionBlurPostProcess(this.pxlDevice.screenRes,this.pxlDevice.mobile),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapMotionBlurPass.material.uniforms.rDiffuse = this.scene.renderTarget.texture;\r\n    this.mapMotionBlurPass.needsSwap = true;\r\n    this.mapMotionBlurPass.name = \"mapMotionBlurPass\";\r\n    this.mapComposerMotionBlur.addPass(this.mapMotionBlurPass);\r\n    this.mapMotionBlurPass.enabled=false;\r\n    this.mapComposerMotionBlur.renderToScreen=false;\r\n    //this.mapComposerMotionBlur.autoClear=false;\r\n    \r\n    // -- -- -- -- -- -- -- -- -- -- //\r\n    \r\n    this.mapComposerGlow=new EffectComposer(this.engine);\r\n    \r\n    let renderGlowPass = new RenderPass(this.scene, this.pxlCamera.camera);\r\n    this.mapComposerGlow.addPass(renderGlowPass);\r\n    \r\n    this.blurScreenMerge = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          rDiffuse: { value: null },\r\n          mtDiffuse: { value: null },\r\n          exposure:{type:\"f\",value:this.pxlRenderSettings.exposure}\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.compLayersPostProcess(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.blurScreenMerge.material.uniforms.rDiffuse = this.scene.renderTarget.texture;\r\n    // TODO : Motion Blur pass, performance is slow but should be enableable through 'options'\r\n    //this.blurScreenMerge.material.uniforms.mtDiffuse = this.mapComposerMotionBlur.renderTarget2.texture;\r\n    this.blurScreenMerge.material.uniforms.mtDiffuse = this.scene.renderTarget.texture;\r\n    this.blurScreenMerge.needsSwap = true;\r\n    this.blurScreenMerge.name = \"blurScreenMerge\";\r\n    this.mapComposerGlow.addPass(this.blurScreenMerge);\r\n    \r\n    let glowCopyPassBlur = new ShaderPass(CopyShader);\r\n    glowCopyPassBlur.name = \"glowCopyPassBlur\";\r\n    this.mapComposerGlow.addPass(glowCopyPassBlur);\r\n    \r\n    //this.mapGlowPass = new UnrealBloomPass( new Vector2( this.pxlDevice.mapW*this.pxlQuality.bloomPercMult, this.pxlDevice.mapH*this.pxlQuality.bloomPercMult ), .28, 0.08, 0.13 );\r\n    //this.mapGlowPass.threshold = this.pxlRenderSettings.bloomThresh;\r\n    //this.mapGlowPass.strength = this.pxlRenderSettings.bloomStrength;\r\n    //this.mapGlowPass.radius = this.pxlRenderSettings.bloomRadius;\r\n    /*this.mapGlowPass = new BloomPass( this.pxlRenderSettings.bloomStrength, 50, 4, 512);\r\n    this.mapGlowPass.threshold = this.pxlRenderSettings.bloomThresh;\r\n    this.mapGlowPass.strength = this.pxlRenderSettings.bloomStrength;\r\n    this.mapGlowPass.radius = this.pxlRenderSettings.bloomRadius;*/\r\n    //this.mapGlowPass.clear=true;\r\n    \r\n    //this.mapComposerGlow.addPass(this.mapGlowPass);\r\n    this.mapComposerGlow.renderToScreen=false;\r\n    this.mapComposerGlow.autoClear=true;\r\n\r\n    this.mapOverlayHeavyPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          gamma:{type:\"f\",value:this.pxlDevice.gammaCorrection},\r\n          exposure:{type:\"f\",value:this.pxlRenderSettings.exposure},\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          camPos: { value: this.pxlCamera.camera.position },\r\n          ratio:{ type:'f',value: 1 },\r\n          tDiffuse: { value: null },\r\n          rDiffuse: { value: null },\r\n          bloomTexture: { value: null },\r\n          sceneDepth: { value: null },\r\n          scenePos: { value: null },\r\n          noiseTexture: { value: this.cloud3dTexture },\r\n          fogMult: { value: this.fogMult },\r\n          proximityMult: { value: 1 },\r\n          //bloomTexture: { value: this.mapComposerMotionBlur.renderTarget2.texture }\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.finalOverlayHeavyShader(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapOverlayHeavyPass.material.uniforms.rDiffuse = this.scene.renderTarget.texture;\r\n    this.mapOverlayHeavyPass.material.uniforms.bloomTexture = this.mapComposerGlow.renderTarget2.texture;\r\n    this.mapOverlayHeavyPass.material.uniforms.sceneDepth = this.scene.renderTarget.depthTexture;\r\n    this.mapOverlayHeavyPass.material.uniforms.scenePos = this.scene.renderWorldPos.texture;\r\n    this.mapOverlayHeavyPass.needsSwap = true;\r\n    this.mapOverlayHeavyPass.name = \"mapOverlayHeavyPass\";\r\n\r\n    this.mapOverlayPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          gamma:{type:\"f\",value:this.pxlDevice.gammaCorrection},\r\n          exposure:{type:\"f\",value:this.pxlRenderSettings.exposure},\r\n          time:{ value:this.pxlTimer.msRunner },\r\n                    camPos: { value: this.pxlCamera.camera.position },\r\n          ratio:{ type:'f',value: 1 },\r\n          tDiffuse: { value: null },\r\n          rDiffuse: { value: null },\r\n          bloomTexture: { value: null },\r\n          sceneDepth: { value: null },\r\n          scenePos: { value: null },\r\n          noiseTexture: { value: this.cloud3dTexture },\r\n          fogMult: { value: this.fogMult },\r\n          proximityMult: { value: 1 },\r\n          //bloomTexture: { value: this.mapComposerMotionBlur.renderTarget2.texture }\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.finalOverlayShader(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapOverlayPass.material.uniforms.rDiffuse = this.scene.renderTarget.texture;\r\n    this.mapOverlayPass.material.uniforms.bloomTexture = this.mapComposerGlow.renderTarget2.texture;\r\n    this.mapOverlayPass.material.uniforms.sceneDepth = this.scene.renderTarget.depthTexture;\r\n    this.mapOverlayPass.material.uniforms.scenePos = this.scene.renderWorldPos.texture;\r\n    this.mapOverlayPass.needsSwap = true;\r\n    this.mapOverlayPass.name = \"mapOverlayPass\";\r\n    \r\n    this.mapOverlaySlimPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          gamma:{type:\"f\",value:this.pxlDevice.gammaCorrection},\r\n          exposure:{type:\"f\",value:this.pxlRenderSettings.exposure},\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          camPos: { value: this.pxlCamera.camera.position },\r\n          ratio:{ type:'f',value: 1 },\r\n          tDiffuse: { value: null },\r\n          rDiffuse: { value: null },\r\n          bloomTexture: { value: null },\r\n          sceneDepth: { value: null },\r\n          fogMult: { value: this.fogMult },\r\n          proximityMult: { value: 1 },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.finalOverlaySlimShader(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapOverlaySlimPass.material.uniforms.rDiffuse = this.scene.renderTarget.texture;\r\n    //bloomTexture: { value: this.mapComposerMotionBlur.renderTarget2.texture }\r\n    this.mapOverlaySlimPass.material.uniforms.bloomTexture = this.mapComposerGlow.renderTarget2.texture;\r\n    this.mapOverlaySlimPass.material.uniforms.sceneDepth = this.scene.renderTarget.depthTexture;\r\n    this.mapOverlaySlimPass.needsSwap = true;\r\n    this.mapOverlaySlimPass.name = \"mapOverlaySlimPass\";\r\n\r\n    // -- -- -- -- -- -- -- -- -- -- //\r\n    \r\n    this.mapGlowPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          ratio:{ type:'f',value: 1 },\r\n          tDiffuse: { value: null },\r\n          rDiffuse: { value: null },\r\n          sceneDepth: { value: null },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.glowPassPostProcess(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapGlowPass.material.uniforms.rDiffuse = this.scene.renderGlowTarget.texture;\r\n    this.mapGlowPass.material.uniforms.sceneDepth = this.scene.renderTarget.depthTexture;\r\n    this.mapGlowPass.needsSwap = true;\r\n    this.mapGlowPass.name = \"mapGlowPass\";\r\n\r\n    // -- -- -- -- -- -- -- -- -- -- //\r\n    \r\n    this.mapComposer = new EffectComposer(this.engine);\r\n    \r\n    this.mapComposer.addPass( this.mapOverlayHeavyPass );\r\n    this.mapComposer.addPass( this.mapOverlayPass );\r\n    this.mapComposer.addPass( this.mapOverlaySlimPass );\r\n    this.mapComposer.addPass( this.mapGlowPass );\r\n    this.mapOverlayHeavyPass.enabled=false;\r\n    this.mapOverlayPass.enabled=false;\r\n    //this.mapOverlayPass.autoClear=true;\r\n    //this.mapOverlaySlimPass.enabled=false;\r\n    \r\n        // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n    this.pxlUser.lKingWarp=new Vector2( ...this.pxlUser.lKingInactive );\r\n        \r\n    this.lizardKingPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          ratio: { value: this.pxlDevice.screenRes },\r\n          noiseTexture: { value: this.cloud3dTexture },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.lKingPostProcess(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n        this.pxlUser.lizardKingPass=this.lizardKingPass;\r\n        this.lizardKingPass.enabled=false;\r\n        this.pxlUser.lizardKingPass.name = \"lizardKingPass\";\r\n    \r\n        // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n    this.pxlUser.starFieldPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          ratio: { value: this.pxlDevice.screenRes },\r\n          noiseTexture: { value: this.cloud3dTexture },\r\n          starTexture: { value: this.pxlUtils.loadTexture(this.pxlUtils.assetRoot+\"uv_starNoise.jpg\", null, {\"encoding\":LinearSRGBColorSpace}) },\r\n        },\r\n        vertexShader: this.pxlShaders.rendering.sFieldPostProcessVert(),\r\n        fragmentShader: this.pxlShaders.rendering.sFieldPostProcessFrag(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n        this.pxlUser.starFieldPass.enabled=false;\r\n        this.pxlUser.starFieldPass.name = \"starFieldPass\";\r\n    \r\n        // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n    this.pxlUser.crystallinePass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          tDiffusePrev: {type:'t', value: null },\r\n          time:{ value:this.pxlTimer.msRunner },\r\n          ratio: { value: this.pxlDevice.screenRes },\r\n          noiseTexture: { value: this.cloud3dTexture },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.iZoomPostProcess(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n        this.pxlUser.crystallinePass.enabled=false;\r\n        this.pxlUser.crystallinePass.name = \"crystallinePass\";\r\n    \r\n        \r\n        \r\n        // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n    \r\n    if( this.pxlOptions.postProcessPasses.chromaticAberrationPass ){\r\n      this.chromaticAberrationPass = new ShaderPass(\r\n        new ShaderMaterial( {\r\n          uniforms: {\r\n            tDiffuse: { value: null },\r\n            ratio: { value: this.pxlDevice.screenRes },\r\n            warpMult: { value: this.chroAberMult },\r\n            chroAberUVTexture: { value: this.chroAberUVTexture },\r\n            chroAberUVAlpha: { value: this.chroAberUVAlpha },\r\n            lKing: { value: this.pxlUser.lKingWarp },\r\n          },\r\n          vertexShader: this.pxlShaders.core.defaultVert(),\r\n          fragmentShader: this.pxlShaders.rendering.chroAberPostProcess(),\r\n          defines: {}\r\n        } ), \"tDiffuse\"\r\n      );\r\n      this.chromaticAberrationPass.enabled=false;\r\n      this.chromaticAberrationPass.name = \"chromaticAberrationPass\";\r\n      this.mapComposer.addPass( this.chromaticAberrationPass );\r\n    }\r\n    \r\n    if( this.pxlOptions.postProcessPasses.lizardKingPass ){\r\n      this.mapComposer.addPass( this.lizardKingPass );\r\n    }\r\n    //if( !this.mobile ) {\r\n    if( this.pxlOptions.postProcessPasses.starFieldPass ){\r\n      this.mapComposer.addPass( this.pxlUser.starFieldPass );\r\n    }\r\n    if( this.pxlOptions.postProcessPasses.crystallinePass ){\r\n      this.mapComposer.addPass( this.pxlUser.crystallinePass );\r\n    }\r\n    \r\n    if( this.pxlOptions.postProcessPasses.mapComposerWarpPass ){\r\n      this.mapComposerWarpPass = new ShaderPass(\r\n        new ShaderMaterial( {\r\n          uniforms: {\r\n            time:{ value:this.pxlTimer.msRunner },\r\n            fader:{ value:this.warpVisualFader },\r\n            tDiffuse: { value: null },\r\n            noiseTexture: { value: this.cloud3dTexture },\r\n            animTexture: { value: this.blockAnimTexture  },\r\n            //bloomTexture: { value: this.mapComposerMotionBlur.renderTarget2.texture }\r\n          },\r\n          vertexShader: this.pxlShaders.core.camPosVert(),\r\n          fragmentShader: this.pxlShaders.rendering.warpPostProcess(),\r\n          defines: {}\r\n        } ), \"tDiffuse\"\r\n      );\r\n      this.mapComposerWarpPass.needsSwap = true;\r\n      this.mapComposerWarpPass.enabled=false;\r\n      this.mapComposerWarpPass.name = \"mapComposerWarpPass\";\r\n      this.mapComposer.addPass( this.mapComposerWarpPass );\r\n    }\r\n        // 8 Samples\r\n    this.mapBoxAAPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          resUV:{ type:'f',value:this.pxlDevice.screenRes },\r\n          ratio:{ type:'f',value: 1 },\r\n          gamma:{type:\"f\",value:this.pxlDevice.gammaCorrection},\r\n        },\r\n        vertexShader: this.pxlShaders.core.camPosVert(),\r\n        fragmentShader: this.pxlShaders.rendering.boxAntiAliasPass(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapBoxAAPass.enabled=false;\r\n    this.mapBoxAAPass.name = \"mapBoxAAPass\";\r\n    this.mapComposer.addPass( this.mapBoxAAPass );\r\n        \r\n        // 4 samples\r\n    this.mapCrossAAPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          resUV:{ type:'f',value:this.pxlDevice.screenRes },\r\n          ratio:{ type:'f',value: 1 },\r\n          gamma:{type:\"f\",value:this.pxlDevice.gammaCorrection},\r\n        },\r\n        vertexShader: this.pxlShaders.core.camPosVert(),\r\n        fragmentShader: this.pxlShaders.rendering.crossAntiAliasPass(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.mapCrossAAPass.enabled=false;\r\n    this.mapCrossAAPass.name = \"mapCrossAAPass\";\r\n    this.mapComposer.addPass( this.mapCrossAAPass );\r\n    \r\n    this.mapComposer.autoClear=true;\r\n    \r\n    // -- -- -- -- -- -- -- -- -- -- //\r\n    \r\n    // External Room composer\r\n    let bootScene= this.roomSceneList[this.bootRoom].scene; // this.roomSceneList['ShadowPlanet'].scene ||\r\n    this.roomComposer=new EffectComposer(this.engine);\r\n\r\n    this.roomRenderPass = new RenderPass(bootScene, this.pxlCamera.camera);\r\n    this.roomRenderPass.name = \"roomRenderPass\";\r\n    this.roomComposer.addPass(this.roomRenderPass);\r\n        \r\n        \r\n    this.roomNameList.forEach( (r)=>{\r\n      if( r != this.mainRoom){\r\n        let curPass=this.roomSceneList[ r ].applyRoomPass( this.roomComposer );\r\n        if( curPass ){\r\n            curPass.enabled=false;\r\n            this.roomComposer.addPass( curPass );\r\n        }\r\n      }\r\n    });\r\n        \r\n    \r\n    this.roomBloomPass = new UnrealBloomPass( new Vector2( this.pxlDevice.mapW*.5, this.pxlDevice.mapH*.5 ), 1.5, 0.8, 0.85 );\r\n    this.roomBloomPass.threshold = this.pxlRenderSettings.bloomThresh;\r\n    this.roomBloomPass.strength = this.pxlRenderSettings.bloomStrength;\r\n    this.roomBloomPass.radius = this.pxlRenderSettings.bloomRadius;\r\n    this.roomBloomPass.name = \"roomBloomPass\";\r\n    this.roomComposer.addPass( this.roomBloomPass );\r\n    \r\n    \r\n    if( this.pxlOptions.postProcessPasses.roomGlowPass ){\r\n      this.roomGlowPass = new ShaderPass(\r\n        new ShaderMaterial( {\r\n          uniforms: {\r\n            time:{ value:this.pxlTimer.msRunner },\r\n            ratio:{ type:'f',value: 1 },\r\n            tDiffuse: { value: null },\r\n            gDiffuse: { value: null },\r\n            rDiffuse: { value: null },\r\n            sceneDepth: { value: null },\r\n          },\r\n          vertexShader: this.pxlShaders.core.defaultVert(),\r\n          fragmentShader: this.pxlShaders.rendering.glowPassPostProcess(),\r\n          defines: {}\r\n        } ), \"tDiffuse\"\r\n      );\r\n      \r\n      //gDiffuse: { value: this.scene.renderGlowTarget.texture },\r\n      //gDiffuse: { value: this.blurComposer.renderTarget1.texture },\r\n      this.roomGlowPass.material.uniforms.gDiffuse = this.blurComposer.writeBuffer.texture;\r\n      this.roomGlowPass.material.uniforms.rDiffuse = this.blurComposer.renderTarget2.texture;\r\n      this.roomGlowPass.material.uniforms.sceneDepth = this.scene.renderTarget.depthTexture;\r\n      this.roomGlowPass.needsSwap = true;\r\n      this.roomGlowPass.name = \"roomGlowPass\";\r\n\r\n      this.roomComposer.addPass( this.roomGlowPass );\r\n    }\r\n    \r\n    if( this.pxlOptions.postProcessPasses.chromaticAberrationPass ){\r\n      this.roomComposer.addPass( this.chromaticAberrationPass );\r\n    }\r\n    \r\n    if( this.pxlOptions.postProcessPasses.lizardKingPass ){\r\n      this.roomComposer.addPass( this.lizardKingPass );\r\n    }\r\n    \r\n    if( this.pxlOptions.postProcessPasses.starFieldPass ){\r\n      this.roomComposer.addPass( this.pxlUser.starFieldPass );\r\n    }\r\n\r\n    if( this.pxlOptions.postProcessPasses.crystallinePass ){\r\n      this.roomComposer.addPass( this.pxlUser.crystallinePass );\r\n    }\r\n\r\n    if( this.pxlOptions.postProcessPasses.mapComposerWarpPass ){\r\n      this.roomComposer.addPass( this.mapComposerWarpPass );\r\n    }\r\n        \r\n    this.roomComposer.addPass( this.mapCrossAAPass );\r\n    this.roomComposer.addPass( this.mapBoxAAPass );\r\n        \r\n    this.roomComposer.autoClear=true;\r\n        \r\n        // -- -- -- -- -- -- -- -- //\r\n        \r\n    \r\n        // -- -- -- -- -- -- -- -- //\r\n        // Set above, for pass to use renderTarget in uniforms\r\n    this.delayComposer=new EffectComposer(this.engine);\r\n    \r\n    let renderDelayPass = new RenderPass(this.scene, this.pxlCamera.camera);\r\n    //this.delayComposer.addPass(renderDelayPass);\r\n        \r\n    this.delayPass = new ShaderPass(\r\n      new ShaderMaterial( {\r\n        uniforms: {\r\n          tDiffuse: { value: null },\r\n          roomComposer: { type:\"f\", value : 0 },\r\n          tDiffusePrev: { value: null },\r\n          tDiffusePrevRoom: { value: null },\r\n        },\r\n        vertexShader: this.pxlShaders.core.defaultVert(),\r\n        fragmentShader: this.pxlShaders.rendering.textureStorePass(),\r\n        defines: {}\r\n      } ), \"tDiffuse\"\r\n    );\r\n    this.delayPass.material.uniforms.tDiffusePrev = this.mapComposer.renderTarget1.texture;\r\n    this.delayPass.material.uniforms.tDiffusePrevRoom = this.roomComposer.renderTarget1.texture;\r\n    //this.delayPass.needsSwap = true;\r\n    this.delayPass.clear=false;\r\n    this.delayComposer.addPass( this.delayPass );\r\n    this.delayComposer.renderToScreen=false;\r\n    this.delayComposer.autoClear=false;\r\n        \r\n    this.pxlUser.crystallinePass.uniforms.tDiffusePrev.value = this.delayComposer.renderTarget2.texture;\r\n  }\r\n  \r\n  setExposure(curExp){\r\n    let animPerc=1;\r\n    //curExp= this.pxlCamera.uniformScalars.curExp + curExp*this.pxlCamera.uniformScalars.brightBase*animPerc; \r\n    curExp= curExp*animPerc; \r\n    this.pxlCamera.uniformScalars.exposureUniformBase=curExp;\r\n    // Set scene exposure on post-process composer passes \r\n    this.updateCompUniforms(curExp);\r\n  }\r\n  \r\n  stepWarpPass(){\r\n    if( this.warpVisualActive ){\r\n      let curPerc= ( this.pxlTimer.curMS - this.warpVisualStartTime ) / this.warpVisualMaxTime[this.pxlCamera.warpType];\r\n      let fUp=Math.min( 1, curPerc*3 );\r\n      let fDown=Math.min( 1, 3-curPerc*3 );\r\n      \r\n      if(fUp==1 && fDown==1 && this.pxlCamera.warpActive){\r\n        this.pxlCamera.warpCamRun();\r\n      }\r\n      \r\n      this.warpVisualFader.x=fUp;\r\n      this.warpVisualFader.y=fDown;\r\n      if( fDown <= 0){\r\n        this.stopWarpVisual();\r\n      }\r\n    }\r\n  }\r\n  \r\n  checkUserVideoStatus(curId){\r\n  }\r\n    \r\n  remoteUserUpdateMedia( curId, video=false, audio=null){\r\n        //\r\n  }\r\n    \r\n    userRemoveRemoteData( curId ){\r\n        //\r\n    }\r\n    \r\n    \r\n  stepShaderValues(){ // ## Switch variables in shaders to three variables to avoid this whole thing  \r\n    this.stepShaderFuncArr.forEach((x)=>{\r\n      if(typeof(x)==\"object\"){\r\n        x.step();\r\n      }else if(typeof(x)==\"string\"){\r\n        //console.log(\"shader trigger?\");\r\n        //console.log(x);\r\n        //(x);\r\n      }\r\n    });\r\n    \r\n  }\r\n\r\n  stepAnimatedObjects(){\r\n    if(this.pxlUser.itemListNames.length > 0){\r\n      this.pxlUser.itemListNames.forEach( (i)=>{\r\n                this.pxlUser.itemList[i].rotation.y=this.pxlTimer.msRunner.x*this.pxlUser.itemRotateRate;\r\n      });\r\n    }\r\n  }\r\n\r\n  initWarpVisual( visualType ){\r\n    this.warpVisualActive=true;\r\n    this.warpVisualFader.x=0;\r\n    this.warpVisualFader.y=1;\r\n    this.warpVisualStartTime=this.pxlTimer.curMS;\r\n    \r\n    if( this.mapComposerWarpPass ){\r\n      this.mapComposerWarpPass.enabled=true;\r\n    }\r\n  }\r\n  stopWarpVisual(){\r\n    this.warpVisualActive=false;\r\n    this.warpVisualFader.x=1;\r\n    this.warpVisualFader.y=0;\r\n    \r\n    if( this.mapComposerWarpPass ){\r\n      this.mapComposerWarpPass.enabled= !!this.pxlUser.iZoom;\r\n    }\r\n  }\r\n  \r\n// Function required, but no prep needed\r\n  prepPortalRender(){}\r\n// Function required, but no cleanup needed\r\n  cleanupPortalRender(){}\r\n// Set the Room Warp Portal plane to display the render from that environment\r\n  setPortalTexture(texture, toRoom){\r\n    this.roomWarpVisuals[toRoom].material.map=texture;\r\n  }\r\n  warpPortalQueue(){\r\n    return Object.keys(this.roomSceneList).reverse(); // So .pop'ing goes the correct direction\r\n  }\r\n    \r\n  getSceneSnapshot(curScene){\r\n    let prepRoom=this.roomSceneList[curScene];\r\n    \r\n    //this.pxlCamera.setTransform( prepRoom.camInitPos, prepRoom.camInitLookAt );\r\n    this.engine.setRenderTarget(prepRoom.warpZoneRenderTarget);\r\n    //this.engine.clear();\r\n    \r\n    prepRoom.prepPortalRender();\r\n    this.engine.render(  prepRoom.scene || prepRoom.scene, this.pxlCamera.camera );\r\n    prepRoom.cleanupPortalRender();\r\n    /*\r\n    if( curScene == this.mainRoom ){\r\n      //this.mapRender();\r\n      \r\n      //this.warpPortalTextures[ curScene ] = this.mapComposer.renderTarget1.texture.clone();\r\n      \r\n    }else{\r\n      //prepRoom.step();\r\n    \r\n      prepRoom.prepPortalRender();\r\n      this.engine.render(  prepRoom.scene, this.pxlCamera.camera );\r\n      prepRoom.cleanupPortalRender();\r\n      \r\n      this.warpPortalTextures[ curScene ] = this.scene.renderTarget.clone();\r\n    \r\n      prepRoom.warpPortalTexture=this.warpPortalTextures[ curScene ];\r\n      //prepRoom.setPortalTexture( prepRoom.warpPortalTexture );\r\n      //prepRoom.setPortalTexture( this.warpPortalTextures[ this.mainRoom ] );\r\n      prepRoom.setPortalTexture( this.cloud3dTexture );//  this.warpPortalTextures[ this.mainRoom ] );\r\n      this.setPortalTexture( this.warpPortalTextures[ curScene ], curScene );\r\n    }*/\r\n    \r\n    this.engine.setRenderTarget(null);\r\n  \r\n  }\r\n\r\n  mapRender(anim=true){\r\n    if(this.pxlTimer.active){\r\n        this.step();\r\n    }\r\n    \r\n    if( this.pxlTimer.runtime > this.nextRenderMS || anim==false ){\r\n\r\n      this.prevRenderMS = this.nextRenderMS;\r\n      this.nextRenderMS = this.pxlTimer.runtime + this.renderInterval;\r\n\r\n\r\n      // Render appropriate room\r\n      this.stepShaderValues();\r\n      this.stepAnimatedObjects();\r\n      \r\n      // Send out event to allow for any pre-render calculations\r\n      this.emit( \"render-prep\", {\r\n        'time': this.pxlTimer.runtime\r\n      });\r\n\r\n      let curRoom=this.roomSceneList[this.currentRoom];\r\n      if(curRoom && curRoom.booted){\r\n        curRoom.step();\r\n        curRoom.camera.layers.disable( this.pxlEnums.RENDER_LAYER.SKY );\r\n        this.engine.setRenderTarget(curRoom.scene.renderTarget);\r\n        this.engine.clear();\r\n        this.engine.render( curRoom.scene, curRoom.camera);\r\n        this.engine.setRenderTarget(null);\r\n        curRoom.camera.layers.enable( this.pxlEnums.RENDER_LAYER.SKY );\r\n        \r\n        if( false && this.pxlQuality.settings.fog>0 ){\r\n          this.pxlCamera.camera.layers.disable( 1 );\r\n          \r\n          curRoom.scene.overrideMaterial=this.mapWorldPosMaterial;\r\n          this.engine.setRenderTarget(this.scene.renderWorldPos);\r\n          this.engine.clear();\r\n          this.engine.render( curRoom.scene, this.pxlCamera.camera);\r\n          curRoom.scene.overrideMaterial=null;\r\n        \r\n          this.pxlCamera.camera.layers.enable( 1 );\r\n          this.engine.setRenderTarget(null);\r\n        }\r\n        \r\n        if( this.mapComposerGlow && ( this.pxlQuality.settings.bloom || this.pxlQuality.settings.fog ) ){ //  || this.pxlQuality.settings.motion ){ \r\n          this.mapComposerGlow.render();\r\n        }\r\n        \r\n        this.mapRenderBlurStack( curRoom, curRoom.camera, curRoom.scene, this.scene.renderGlowTarget)\r\n        \r\n        this.roomComposer.render();\r\n        //this.engine.render( this.roomSceneList[this.currentRoom].scene, this.pxlCamera.camera);\r\n      }\r\n      \r\n      if( this.pxlUser.iZoom ){\r\n        this.delayComposer.render();\r\n      }\r\n    }else if( this.pxlOptions.subTickCalculations ){\r\n      // Step room calculations for render-independent user input and collision calculations\r\n      let curRoom=this.roomSceneList[this.currentRoom];\r\n      if(curRoom && curRoom.booted){\r\n        curRoom.step();\r\n      }\r\n    }\r\n        \r\n    if(this.pxlTimer.active && anim){\r\n      requestAnimationFrame( ()=>{ this.mapRender(); });\r\n    }\r\n  }\r\n  \r\n  mapRenderBlurStack( curRoom, camera, scene, target ){\r\n    if(this.blurComposer){\r\n      if(curRoom.geoList[\"GlowPass\"]){\r\n        curRoom.geoList[\"GlowPass\"].forEach((g)=>{\r\n          if( g.userData.hasOwnProperty('GlowPerc') ){\r\n            let multVal = g.userData['GlowPerc']\r\n            if( g.material.hasOwnProperty('uniforms') && g.material.uniforms.mult ){\r\n              g.material.uniforms.mult.value = multVal;\r\n            }\r\n          }\r\n        });\r\n        \r\n        if( curRoom.geoList.hasOwnProperty('GlowPassMask') ){\r\n          curRoom.geoList['GlowPassMask'].forEach( (m)=>{\r\n            if( m.material.uniforms && m.material.uniforms.cdMult ){\r\n              m.material.uniforms.cdMult.value = 0;\r\n            }\r\n          });\r\n        }\r\n      }\r\n      \r\n      //this.pxlEnv.pxlEnums.RENDER_LAYER SCENE PARTICLES GLOW\r\n      camera.layers.disable( this.pxlEnums.RENDER_LAYER.SCENE );\r\n      camera.layers.disable( this.pxlEnums.RENDER_LAYER.PARTICLES );\r\n      camera.layers.disable( this.pxlEnums.RENDER_LAYER.SKY );\r\n      \r\n      this.engine.setRenderTarget(target);\r\n      let bgCd=0x000000;\r\n      let curgb = scene.background.clone()\r\n      scene.background.set( bgCd );\r\n      this.engine.setClearColor(bgCd, 0);\r\n      //this.engine.clear();\r\n      this.engine.render( scene, camera);\r\n      //this.scene.overrideMaterial=null;\r\n      scene.background.r=curgb.r;\r\n      scene.background.g=curgb.g;\r\n      scene.background.b=curgb.b;\r\n      \r\n      camera.layers.enable( this.pxlEnums.RENDER_LAYER.SCENE );\r\n      camera.layers.enable( this.pxlEnums.RENDER_LAYER.PARTICLES );\r\n      camera.layers.enable( this.pxlEnums.RENDER_LAYER.SKY );\r\n      this.engine.setRenderTarget(null);\r\n      \r\n      if(curRoom.geoList[\"GlowPass\"]){\r\n        curRoom.geoList[\"GlowPass\"].forEach((g)=>{\r\n          if( g.userData.hasOwnProperty('GlowPerc') ){\r\n            if( g.material.hasOwnProperty('uniforms') && g.material.uniforms.mult ){\r\n              g.material.uniforms.mult.value = 1;\r\n            }\r\n          }\r\n        });\r\n        if( curRoom.geoList.hasOwnProperty('GlowPassMask') ){\r\n          curRoom.geoList['GlowPassMask'].forEach( (m)=>{\r\n            if( m.material.uniforms && m.material.uniforms.cdMult ){\r\n              m.material.uniforms.cdMult.value = 1;\r\n            }\r\n          });\r\n        }\r\n      }\r\n      \r\n      this.blurComposer.render();\r\n      this.roomBloomPass.enabled = false;\r\n    }\r\n  }\r\n}\r\n","// GUI Draws\r\n//   document.body element & css management\r\n//   Written by Kevin Edzenga; 2020, 2024\r\n// -- -- -- -- -- --\r\n\r\nimport { GUIManager } from './GUIBase.js';\r\nimport { ShaderEditor } from './ShaderEditor.js';\r\n/*import { HelpGui } from './pxlGui/HelpGui.js';\r\nimport { InfoGui } from './pxlGui/InfoGui.js';\r\nimport { SettingsGui } from './pxlGui/SettingsGui.js';*/\r\n\r\n\r\n/**\r\n * @namespace pxlGuiDraws\r\n * @description GUI drawing and management\r\n */\r\n\r\nexport class GUI extends GUIManager{\r\n  constructor(verbose, projectTitle=\"Metal-Asylum\", assetRoot=\"images/assets/\", guiRoot=\"images/GUI/\" ){\r\n    super(verbose, projectTitle, assetRoot, guiRoot );\r\n    \r\n    this.verbose = verbose;\r\n\r\n    // Dynamic Styles \r\n    this.lableBoxSize = 40; // Device Label Box Size\r\n    this.optionWidthRound = 10;\r\n    this.optionWidthAdd = 25;\r\n    this.deviceOptionHeight = [0, 300]; // Device Option List Max-Height's\r\n    \r\n\t\tthis.ShaderEditor = null;\r\n\t\t\r\n    // TODO : This is the loadable stage count\r\n    //          Load js, load room, run room boot, await room environment load/setup, and run post-boot code.\r\n    //          This should be a registration system, not hard coded\r\n    //            As it would be better for loading status for multi-room systems\r\n    //          Loader stages added to a promise/stage list during pre-boot, update max stage count here\r\n    this.pxlLoaderTotal = 5;\r\n    \r\n    this.hudVisibility=true;\r\n    \r\n    this.camChoicesActive=false;\r\n    //this.camChoicePrevObj=null;\r\n    this.micChoicesActive=false;\r\n    //this.micChoicePrevObj=null;\r\n    \r\n    // TODO : Move to function to prep dictionary for div lookup\r\n    this.textDescriptions={\r\n      chatIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">C</span> )</span><br>chat', 'pos':[1,-1.5]},\r\n      multiverseIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">U</span> )</span><br>multiverse<br>selection', 'pos':[0,-1.3]},\r\n      djPlayerVolumeParent:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">B</span> )</span><br>music volume', 'pos':[0,-1.5]},\r\n      \r\n      speakerIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">N</span> )</span><br>mute people<br>pick audio output', 'pos':[0,-1.5]},\r\n      micIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">M</span> )</span><br>mute/pick<br>mic input', 'pos':[0,-1.5]},\r\n      camIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">V</span> )</span><br>enable/pick<br>video input', 'pos':[0,-1.5]},\r\n      \r\n      helpIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">?</span> )</span><br>help &<br>instructions', 'pos':[0,-1.5]},\r\n      infoIconParent:{'text':'Info <span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">I</span> )</span>', 'pos':[-1,0], 'offset':[-10,0]},\r\n      settingsIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">G</span> )</span><br>graphics &<br>navigation', 'pos':[0,-1.5]},\r\n      muteAllIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">N</span> )</span><br>mute all users', 'pos':[1,0]},\r\n      fullScreenIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">F</span> )</span><br>toggle full screen', 'pos':[-1,0]},\r\n      videoQualityIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">H</span> )</span><br>video quality settings', 'pos':[-1,0]},\r\n      //%=\r\n      statsIcon:{'text':'jitsi connection status; toggle connection ', 'pos':[1,0]},\r\n      //%\r\n      //&=\r\n      usersIcon:{'text':'<span class=\"helpHotKeyParent\">( <span class=\"helpHotKey\">T</span> )</span> user moderator tools', 'pos':[1,0]},\r\n      //&\r\n      ft2Button:{'text':'Environment', 'pos':[-1,0], 'offset':[-10,0]},\r\n      ft3Button:{'text':'Invite Friends', 'pos':[-1,0], 'offset':[-10,0]},\r\n      hud_userCount:{'text':'# of People', 'pos':[-1,0], 'offset':[-10,0]},\r\n    };\r\n    \r\n    this.activeItem=null;\r\n    \r\n    this.actionPopUp=null;\r\n    \r\n    this.init();\r\n  }\r\n  \r\n  setDependencies( pxlNav ){\r\n    super.setDependencies( pxlNav );\r\n    this.ShaderEditor = new ShaderEditor( pxlNav, this );\r\n  }\r\n\r\n  //  Runs\r\n  init(){\r\n    super.init();\r\n  }\r\n  \r\n  // Runs post pxlNav load & boot\r\n  //   All files have been requested & document elements prepped\r\n  booted(){\r\n    super.booted();\r\n  }\r\n    \r\n  step(){\r\n    super.step();\r\n  }\r\n  \r\n\ttoggleShaderEditor(){\r\n\t\tthis.ShaderEditor.toggleShaderEditor();\r\n\t}\r\n\r\n  resize( e ){\r\n    super.resize();\r\n    if( this.ShaderEditor ){\r\n      this.ShaderEditor.resize( e );\r\n    }\r\n  }\r\n  \r\n/////////////////////////////////////////////\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n///////////////////////////////////////////\r\n\r\n\r\n\r\n}\r\n","// Heads-Up-Display (HUD) class for PxlNav\r\n//   Written by Kevin Edzenga, 2025\r\n// -- -- -- -- -- -- -- -- -- -- -- --\r\n//\r\n// Init() is called after pxlRoom's have loaded and post processing has been applied\r\n//   All room items and collider object triggers are loaded and ready for HUD visual display\r\n//\r\n// Initial pass on this class is handling events within the class\r\n//   Will move to EventManager class once the HUD is fully functional\r\n//     (EventManager class isn't fully integrated yet)\r\n//\r\n\r\n\r\nimport { DEVICE_ACTION, HUD_DRAW, HUD_ELEMENT } from \"../core/Enums.js\";\r\n\r\nimport { ElementBase } from \"./elements/elementBase.js\";\r\nimport { DragRegion } from \"./elements/dragRegion.js\";\r\nimport { Thumbstick } from \"./elements/thumbstick.js\";\r\n\r\n\r\n/**\r\n * Class to handle a Heads-Up Display (HUD) management for pxlNav.\r\n *   Examples should be ran from your `pxlRoom.build()` function --\r\n * @alias pxlHUD\r\n * @class\r\n * @description HUD drawing and management\r\n * @example\r\n * // Add a button to the HUD from your room\r\n * let buttonData = { 'style': ['my-button-style'] };\r\n * this.pxlHUD.addItem('myButton', HUD_ELEMENT.BUTTON, buttonData, () => {\r\n *   console.log('Button clicked!');\r\n * });\r\n * @example\r\n * // Add a draggable region to the HUD from your room\r\n * let dragData = { 'style': ['my-drag-style'] };\r\n * this.pxlHUD.addItem('myDragRegion', HUD_ELEMENT.DRAG_REGION, dragData, ( data ) => {\r\n *   // data = { type = pxlEnum, name='myDragRegion', value={ x: number, y: number } };\r\n *   console.log('Drag delta / relative offset : ', data.value );\r\n * });\r\n * @example\r\n * // Add a thumbstick to the HUD from your room\r\n * let thumbData = { 'style': ['my-thumbstick-style'] };\r\n * this.pxlHUD.addItem('myThumbstick', HUD_ELEMENT.THUMBSTICK, thumbData, ( data ) => {\r\n *   // data = { type = pxlEnum, name='myThumbstick', value={ x: number (-1 to 1), y: number (-1 to 1) } };\r\n *   console.log('Thumbstick value : ', data.value );\r\n * });\r\n */\r\nexport class HUD{\r\n  /**\r\n   * Create a new HUD instance.\r\n   */\r\n  constructor(){\r\n    /**\r\n     * @type {Object|null}\r\n     */\r\n    this.pxlOptions = null;\r\n    /**\r\n     * @type {Object|null}\r\n     */\r\n    this.pxlEnums = null;\r\n    /**\r\n     * @type {Object|null}\r\n     */\r\n    this.pxlGuiDraws = null;\r\n    /**\r\n     * @type {Object|null}\r\n     */\r\n    this.pxlDevice = null;\r\n\r\n    /**\r\n     * @type {HTMLElement|null}\r\n     */\r\n    this.hudParent = null;\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    this.huds = {};\r\n\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    this.mobileHUD = {};\r\n\r\n\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Set dependencies for the HUD.\r\n   * @param {Object} pxlNav - The pxlNav instance containing dependencies.\r\n   * @private\r\n   */\r\n  setDependencies( pxlNav ){\r\n    this.pxlOptions = pxlNav.pxlOptions;\r\n    this.pxlEnums = pxlNav.pxlEnums;\r\n    this.pxlGuiDraws = pxlNav.pxlGuiDraws;\r\n    this.pxlDevice = pxlNav.pxlDevice;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Initialize the HUD.\r\n   * @private\r\n   */\r\n  init(){\r\n\r\n    let hudParent = document.createElement('div');\r\n    hudParent.classList.add('pxlNav-hud-parent');\r\n    this.pxlGuiDraws.addToContainer( hudParent );\r\n    this.hudParent = hudParent;\r\n\r\n    // Add mobile hud elements\r\n    //   Thumbsticks, jump + run empty regions\r\n    if( this.pxlOptions.mobile && !this.pxlOptions.staticCamera ){\r\n      hudParent.classList.add('pxlNav-hud-parent-mobile');\r\n      this.createMobileHUD();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add an element to the HUD DOM Object.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {HTMLElement|Object} hudElement - The HUD element to add.\r\n   * @example\r\n   * //Add an created element to the managed HUD or specific parent\r\n   * let newButton = this.pxlHUD.createButton('myButton', buttonData, ( data )=>{\r\n   *   console.log('Button clicked!');\r\n   * });\r\n   * \r\n   * this.pxlHUD.addToHUD( newButton );\r\n   */\r\n  addToHUD( hudElement ){\r\n    if( hudElement.hasOwnProperty('block') && hudElement.block !== null ){\r\n      this.hudParent.appendChild( hudElement.block );\r\n    }else if( hudElement?.object !== null ){\r\n      this.hudParent.appendChild( hudElement.object );\r\n    }else{\r\n      this.hudParent.appendChild( hudElement );\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Add an item to the HUD.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} [label='default'] - The label for the HUD item.\r\n   * @param {string} type - The type of HUD element.\r\n   * @param {Object} data - The data for the HUD element.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the HUD element.\r\n   * @param {Object|null} [parentObj=null] - The parent object for the HUD element.\r\n   * @returns {Object|null} The created HUD element.\r\n   * @example\r\n   * // Add a button to the HUD\r\n   * //   Subscription passed through the `addItem()` function\r\n   * //   Its preferer you use this function over directly creating HUD elements\r\n   * //     As pxlHUD can manage the HUD elements and their subscriptions\r\n   * let buttonData = { 'style': ['my-button-style'] };\r\n   * this.pxlHUD.addItem('myButton', HUD_ELEMENT.BUTTON, buttonData, () => {\r\n   *   console.log('Button clicked!');\r\n   * });\r\n   * \r\n   * // Add a draggable region to the HUD\r\n   * //   Subscription called after hud element creation\r\n   * let dragData = { 'style': ['my-drag-style'] };\r\n   * this.pxlHUD.addItem('myDragRegion', HUD_ELEMENT.DRAG_REGION, dragData);\r\n   *  // [...] // Later in your code\r\n   * this.pxlHUD.subscribe('myDragRegion', ( data ) => {\r\n   *   console.log('Drag delta / relative offset : ', data.value );\r\n   * });\r\n   */\r\n  addItem( label='default', type, data, callbackFn = null, parentObj = null ){\r\n    if( !this.huds.hasOwnProperty( label ) ){\r\n      this.huds[ label ] = [];\r\n    }\r\n    let curRegion = null;\r\n\r\n    switch( type ){\r\n      case HUD_ELEMENT.REGION:\r\n        curRegion = this.createRegion( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      case HUD_ELEMENT.DRAG_REGION:\r\n        curRegion = this.createDragRegion( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      case HUD_ELEMENT.BUTTON:\r\n        curRegion = this.createButton( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      case HUD_ELEMENT.THUMBSTICK:\r\n        curRegion = this.createThumbstick( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      case HUD_ELEMENT.SLIDER:\r\n        curRegion = this.createSlider( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      case HUD_ELEMENT.IMAGE:\r\n        curRegion = this.createImage( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      case HUD_ELEMENT.TEXT:\r\n        curRegion = this.createText( label, data, callbackFn, parentObj );\r\n        this.huds[ label ].push( curRegion );\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if( curRegion !== null ){\r\n\r\n      if( parentObj !== null ){\r\n        parentObj.appendChild( curRegion.object );\r\n      }else{\r\n        // Add new HUD element to the DOM\r\n        this.addToHUD( curRegion );\r\n      }\r\n\r\n      // Subscribe to the HUD element if callbackFn provided\r\n      if( callbackFn !== null ){\r\n        curRegion.subscribe( callbackFn );\r\n      }\r\n    }\r\n\r\n    return curRegion;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Create a region element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the region.\r\n   * @param {Object} data - The data for the region.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the region.\r\n   * @returns {Object} The created region element.\r\n   * @example\r\n   * // Create a region element\r\n   * let regionData = { 'style': ['my-region-style'] };\r\n   * let newRegion = this.pxlHUD.createRegion('myRegion', regionData, ( data )=>{\r\n   *   console.log( 'Region clicked!' );\r\n   *   console.log( data );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newRegion );\r\n   */\r\n  createRegion( label, data, callbackFn=null, parentObj=null ){\r\n    let region = new ElementBase( label, data );\r\n    region.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    region.build();\r\n\r\n    if(callbackFn !== null){\r\n      region.subscribe( callbackFn );\r\n    }\r\n    if( parentObj !== null ){\r\n      parentObj.appendChild( region.object );\r\n    }\r\n\r\n    return region;\r\n  }\r\n\r\n  /**\r\n   * Create a draggable region element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the draggable region.\r\n   * @param {Object} data - The data for the draggable region.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the draggable region.\r\n   * @returns {Object} The created draggable region element.\r\n   * @example\r\n   * // Create a draggable region element\r\n   * let dragData = { 'style': ['my-drag-style'] };\r\n   * let newDragRegion = this.pxlHUD.createDragRegion('myDragRegion', dragData, ( data )=>{\r\n   *  console.log( 'Drag delta / relative offset {X,Y} :' );\r\n   *  console.log( data.value );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newDragRegion );\r\n   */\r\n  createDragRegion( label, data, callbackFn=null, parentObj=null ){\r\n    let dragRegion = new DragRegion( label, data );\r\n    dragRegion.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    dragRegion.build();\r\n\r\n    if(callbackFn !== null){\r\n      dragRegion.subscribe( callbackFn );\r\n    }\r\n    if( parentObj !== null ){\r\n      parentObj.appendChild( dragRegion.object );\r\n    }\r\n\r\n    return dragRegion;\r\n  }\r\n\r\n  /**\r\n   * Create a button element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the button.\r\n   * @param {Object} data - The data for the button.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the button.\r\n   * @returns {Object} The created button element.\r\n   * @example\r\n   * // Create a button element\r\n   * let buttonData = { 'style': ['my-button-style'] };\r\n   * let newButton = this.pxlHUD.createButton('myButton', buttonData, ( data )=>{\r\n   *   console.log( 'Button clicked!' );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newButton );\r\n   */\r\n  createButton( label, data, callbackFn=null, parentObj=null ){\r\n    let button = new ElementBase( label, data );\r\n    button.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    button.build();\r\n\r\n    if(callbackFn !== null){\r\n      button.subscribe( callbackFn );\r\n    }\r\n    if( parentObj !== null ){\r\n      parentObj.appendChild( button.object );\r\n    }\r\n\r\n    return button;\r\n  }\r\n\r\n  /**\r\n   * Create a thumbstick element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the thumbstick.\r\n   * @param {Object} data - The data for the thumbstick.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the thumbstick.\r\n   * @returns {Object} The created thumbstick element.\r\n   * @example\r\n   * // Create a thumbstick element\r\n   * let thumbstickData = { 'style': ['my-thumbstick-style'] };\r\n   * let newThumbstick = this.pxlHUD.createThumbstick('myThumbstick', thumbstickData, ( data )=>{\r\n   *   console.log( 'Thumbstick value changed!' );\r\n   *   console.log( data );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newThumbstick );\r\n   */\r\n  createThumbstick( label, data, callbackFn=null ){\r\n\r\n    let thumbstickObj = new Thumbstick( label, data );\r\n    thumbstickObj.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    thumbstickObj.build();\r\n\r\n    // Connect thumbstick interactions to listeners\r\n    if( callbackFn !== null ){\r\n      thumbstickObj.subscribe( callbackFn );\r\n    }\r\n\r\n    return thumbstickObj;\r\n  }\r\n\r\n  /**\r\n   * Create a slider element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the slider.\r\n   * @param {Object} data - The data for the slider.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the slider.\r\n   * @returns {Object} The created slider element.\r\n   * @example\r\n   * // Create a slider element\r\n   * let sliderData = { 'min': 0, 'max': 100, 'value': 50, 'style': ['my-slider-style'] };\r\n   * let newSlider = this.pxlHUD.createSlider('mySlider', sliderData, ( data )=>{\r\n   *   console.log( 'Slider value changed!' );\r\n   *   console.log( data );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newSlider );\r\n   */\r\n  createSlider( label, data, callbackFn=null, parentObj=null ){\r\n    let slider = new ElementBase( label, data );\r\n    slider.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    slider.build();\r\n\r\n    if(callbackFn !== null){\r\n      slider.subscribe( callbackFn );\r\n    }\r\n    if( parentObj !== null ){\r\n      parentObj.appendChild( slider.object );\r\n    }\r\n\r\n    return slider;\r\n  }\r\n\r\n  /**\r\n   * Create an image element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the image.\r\n   * @param {Object} data - The data for the image.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the image.\r\n   * @returns {Object} The created image element.\r\n   * @example\r\n   * // Create an image element\r\n   * let imageData = { 'src': 'path/to/image.png', 'style': ['my-image-style'] };\r\n   * let newImage = this.pxlHUD.createImage('myImage', imageData, ( data )=>{\r\n   *   console.log( 'Image clicked!' );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newImage );\r\n   */\r\n  createImage( label, data, callbackFn=null, parentObj=null ){\r\n    let image = new ElementBase( label, data );\r\n    image.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    image.build();\r\n\r\n    if(callbackFn !== null){\r\n      image.subscribe( callbackFn );\r\n    }\r\n    if( parentObj !== null ){\r\n      parentObj.appendChild( image.object );\r\n    }\r\n\r\n    return image;\r\n  }\r\n\r\n  /**\r\n   * Create a text element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label for the text.\r\n   * @param {Object} data - The data for the text.\r\n   * @param {Function|null} [callbackFn=null] - The callback function for the text.\r\n   * @returns {Object} The created text element.\r\n   * @example\r\n   * // Create a text element\r\n   * let textData = { 'text': 'Hello, world!', 'style': ['my-text-style'] };\r\n   * let newText = this.pxlHUD.createText('myText', textData, ( data )=>{\r\n   *   console.log( 'Text clicked!' );\r\n   * });\r\n   * this.pxlHUD.addToHUD( newText );\r\n   */\r\n  createText( label, data, callbackFn=null, parentObj=null ){\r\n    let text = new ElementBase( label, data );\r\n    text.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );\r\n    text.build();\r\n\r\n    if(callbackFn !== null){\r\n      text.subscribe( callbackFn );\r\n    }\r\n    if( parentObj !== null ){\r\n      parentObj.appendChild( text.object );\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Create mobile HUD elements.\r\n   * @private\r\n   */\r\n  createMobileHUD(){\r\n    let curId = '';\r\n    let curElement = '';\r\n    let curData = {};\r\n\r\n    let mobileHudParent = document.createElement('div');\r\n    mobileHudParent.classList.add('pxlNav-hudMobile-parent');\r\n    mobileHudParent.classList.add();\r\n\r\n    this.hudParent.appendChild( mobileHudParent );\r\n\r\n    let noneState = this.pxlEnums.HUD_ACTION.NONE;\r\n    let hoverState = this.pxlEnums.HUD_ACTION.HOVER;\r\n    let activeState = this.pxlEnums.HUD_ACTION.ACTIVE;\r\n\r\n    // Virtual thumbsticks with dragable inner peg\r\n    curId = 'thumbstick_left';\r\n    curData = {\r\n       'style': [ 'pxlNav-hudMobile-joystick-left' ],\r\n       'objectStyles': [\r\n          {\r\n            'object': 'block',\r\n          },\r\n          {\r\n            'object': 'parent',\r\n          },\r\n          {\r\n            'object': 'inner',\r\n          },\r\n        ]\r\n      };\r\n      curData['objectStyles'][0][noneState] = ['pxlNav-hudElement-thumbstick-block-default'];\r\n      curData['objectStyles'][0][hoverState] = ['pxlNav-hudElement-thumbstick-block-hover'];\r\n      curData['objectStyles'][0][activeState] = ['pxlNav-hudElement-thumbstick-block-active'];\r\n\r\n      curData['objectStyles'][1][noneState] = ['pxlNav-hudElement-thumbstick-default'];\r\n      curData['objectStyles'][1][hoverState] = ['pxlNav-hudElement-thumbstick-hover'];\r\n      curData['objectStyles'][1][activeState] = ['pxlNav-hudElement-thumbstick-active', 'pxlNav-hudElement-thumbstick-left'];\r\n\r\n      curData['objectStyles'][2][noneState] = ['pxlNav-hudElement-thumbstick-inner-default'];\r\n      curData['objectStyles'][2][hoverState] = ['pxlNav-hudElement-thumbstick-inner-hover'];\r\n      curData['objectStyles'][2][activeState] = ['pxlNav-hudElement-thumbstick-inner-active'];\r\n\r\n    \r\n    curElement = this.addItem( curId, HUD_ELEMENT.THUMBSTICK, Object.assign({},curData) );\r\n\r\n    // Connect movement joystick to device actions\r\n    curElement.subscribe(( deltas )=>{\r\n      this.mobileDeligate( DEVICE_ACTION.MOVE, deltas );\r\n    });\r\n\r\n    this.mobileHUD[ curId ] = curElement;\r\n\r\n    // -- -- --\r\n\r\n    curId =  'thumbstick_right';\r\n    \r\n    curData = Object.assign({},curData);\r\n    curData['style'] = [ 'pxlNav-hudMobile-joystick-right' ];\r\n    curData['objectStyles'][1] = { 'object': 'parent' };\r\n    curData['objectStyles'][1][noneState] = ['pxlNav-hudElement-thumbstick-default'];\r\n    curData['objectStyles'][1][hoverState] = ['pxlNav-hudElement-thumbstick-hover'];\r\n    curData['objectStyles'][1][activeState] = ['pxlNav-hudElement-thumbstick-active', 'pxlNav-hudElement-thumbstick-right'];\r\n\r\n    curElement = this.addItem( curId, HUD_ELEMENT.THUMBSTICK, curData );\r\n\r\n    // Connect look joystick to device actions\r\n    curElement.subscribe(( deltas )=>{\r\n      this.mobileDeligate( DEVICE_ACTION.LOOK, deltas );\r\n    });\r\n\r\n    this.mobileHUD[ curId ] = curElement;\r\n\r\n    // -- -- --\r\n\r\n\r\n    // Empty tap reagions for mobile jump & run\r\n    curId = 'mobile_jump';\r\n    curData = { 'style': [ 'pxlNav-hudMobile-region-jump' ] };\r\n    curElement = this.addItem( curId, HUD_ELEMENT.REGION, curData, ( e )=>{\r\n      this.mobileDeligate( DEVICE_ACTION.JUMP, {}, e );\r\n    } );\r\n\r\n    this.mobileHUD[ 'jump' ] = curElement;\r\n\r\n    // -- -- --\r\n\r\n    curId =  'mobile_ACTION';\r\n    curData = { 'style': [ 'pxlNav-hudMobile-region-action' ] };\r\n    curElement = this.addItem( curId, HUD_ELEMENT.REGION, curData );\r\n\r\n    // Connect item region to device actions\r\n    curElement.subscribe(( e )=>{\r\n      this.mobileDeligate( DEVICE_ACTION.ACTION, e );\r\n    });\r\n\r\n    this.mobileHUD[ 'item' ] = curElement;\r\n\r\n\r\n\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Handle mobile HUD interactions to the device.\r\n   * @param {pxlEnum} eventType - The type of event.\r\n   * @param {Object} data - The data for the event.\r\n   * @private\r\n   */\r\n  mobileDeligate( eventType, data={}, status=true ){\r\n    this.pxlDevice.deviceAction( eventType, data, status );\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Subscribe to a HUD element's events.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label of the HUD element.\r\n   * @param {Function} callbackFn - The callback function to subscribe.\r\n   * @example\r\n   * // Subscribe to a HUD element\r\n   * let newButton = this.pxlHUD.addItem( 'myButton', HUD_ELEMENT.BUTTON );\r\n   * this.pxlHUD.subscribe( 'myButton', ( data )=>{\r\n   *   console.log( 'Button clicked!' );\r\n   * });\r\n   */\r\n  subscribe( label, callbackFn ){\r\n    if( this.huds.hasOwnProperty( label ) ){\r\n      if( !this.huds[ label ].hasOwnProperty('callbacks') ){\r\n        this.huds[ label ].callbacks = [];\r\n      }\r\n      this.huds[ label ].callbacks.push( callbackFn );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emit an event for a HUD element.\r\n   * @method\r\n   * @memberof pxlHUD\r\n   * @param {string} label - The label of the HUD element.\r\n   * @param {Object} data - The data for the event.\r\n   */\r\n  emit( label, data ){\r\n    if( this.huds.hasOwnProperty( label ) && this.huds[ label ].hasOwnProperty('callbacks') ){\r\n      this.huds[ label ].callbacks.forEach( (fn)=>{\r\n        fn( data );\r\n      });\r\n    }\r\n  }\r\n\r\n}","// pxlNav Camera manager\r\n//   Written by Kevin Edzenga 2020; 2024\r\n\r\n// Note : Since item implementation was done rather hastily,\r\n//          Triggering full screen overlays occures in the Camera class currently.\r\n//            This include LizardKing, StarField and InfiniteZoom\r\n//        The Low-Gravity Jump is triggered through the `User` class\r\n//\r\n//        TODO : Move item functions from Camera and User to an `Item` class\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  Quaternion,\r\n  Object3D,\r\n  Euler\r\n} from \"../../libs/three/three.module.min.js\";\r\n\r\nimport { pxlUserSettings } from \"../core/Options.js\";\r\nimport { VERBOSE_LEVEL, COLLIDER_TYPE, CAMERA_EVENT } from \"../core/Enums.js\";\r\n\r\n// TODO : Extend this damn monolith of a chunky boy\r\n//          Camera, Player Controller, Force Influence / Collision\r\n\r\n\r\n \r\n/**\r\n * Camera or pxlCamera class\r\n * @alias pxlCamera\r\n * @class\r\n * @description Camera or pxlCamera class\r\n */\r\nexport class Camera{\r\n  constructor(){\r\n    \r\n    // -- -- -- -- -- -- -- -- -- -- --\r\n    // -- Default Camera Settings -- -- --\r\n    // -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n    // User Height\r\n    this.standingHeight=1.75; // ~5'9\" in meters\r\n\r\n    // Movement Speed Scalar\r\n    this.movementScalar=1.0;\r\n\r\n    // Max Movement Settings\r\n    this.hasMovementLimit=true;\r\n    this.movementMax = 100.0; // Meters per second\r\n\r\n    // Jump Height Scalar\r\n    this.jumpScalar=1.0;\r\n\r\n    // Scale of the User & Settings\r\n    //   Standing Height, Jumping Height, Walking Speed, etc.\r\n    this.userScale=1.0;\r\n\r\n    // Max distance (Meters) up or down, like walking up and down stairs.\r\n    this.maxStepHeight=5; \r\n\r\n    // Once click/tap is done, how much does the last velocity ease out\r\n    //  Velocity * this.cameraEasing\r\n    this.cameraEasing = [ .55, .45 ]; // [ PC, Mobile ]\r\n\r\n    // Touch screen sensitivity settings\r\n    this.touchMaxSensitivity = 800;\r\n    \r\n    // The jumping impulse per frame\r\n    //this.cameraJumpImpulse= [ 0.045, 0.085 ];// [.035,.075]; // [ Grav, Low Grav ]\r\n    this.cameraJumpImpulse= [ .75, 1.5 ];// [.035,.075]; // [ Grav, Low Grav ]\r\n    this.cameraMaxJumpHold=[ 2.85, 2.0 ]; // Second; [ Grav, Low Grav ]\r\n\r\n    this.gravityCount=0;\r\n    this.gravityRate=0;\r\n    this.gravityMax=15.5; // Gravity at scale of 1 / avg human(1.8 meters) * 9.8mms = 5.44;  But this is digital here, lower is lighter\r\n    this.gravityUPS=[.3,.15]; // Units Per Step(); Influence of M/S^2 .. I guess haha; [ Grav, Low Grav ]\r\n\r\n    // -- -- -- //\r\n    // -- -- -- //\r\n    // -- -- -- //\r\n\r\n    this.pxlAudio=null;\r\n    this.pxlTimer=null;\r\n    this.pxlAutoCam=null;\r\n    this.pxlEnv=null;\r\n    this.pxlColliders=null;\r\n    this.pxlUser=null;\r\n    this.pxlUtils=null;\r\n    this.pxlDevice=null;\r\n    this.pxlGuiDraws=null;\r\n    this.pxlQuality=null;\r\n    this.pxlOptions=null;\r\n    this.socket=null;\r\n    \r\n    this.camera=null;\r\n    this.canMove=true;\r\n    this.HDRView=false;\r\n    \r\n    \r\n    // Run updateCamera\r\n    this.camUpdated=true;\r\n    this.cameraBooted=false;\r\n\r\n    // Calculation triggers\r\n    this.hasMoved = false; // Player has moved camera, WASD or Arrow Keys\r\n    this.hasRotated = false; // Player clicked and dragged mouse/touch to rotate camera\r\n    this.hasJumped = false; // Initial Jump Trigger\r\n    this.hasJumpLock = false; // Held jump upon landing, jump again after delay, this is the delay notification\r\n    this.hasGravity = false; // Player isn't on the ground; due to jump or running off a ledge\r\n\r\n    // -- -- --\r\n\r\n    // User-Input Movement & Look Scalars\r\n    //   Only set when there is analog / float input; like gamepad thumbstick or touch 'joysticks'\r\n    this.userInputMoveScalar = {x:1,y:1};\r\n    this.userInputLookScalar = 1;\r\n\r\n    this.roomStandingHeight = { 'default' : this.standingHeight };\r\n    this.standingHeightGravInfluence=0;\r\n    this.standingMaxGravityOffset=.5; // Usage -  ( standingHeight / standingHeightGravInfluence ) * standingMaxGravityOffset\r\n    \r\n    this.walkBounceSeed=230;\r\n    this.walkBounceHeight = .3; // sin(walkBounce) * walkBounceHeight\r\n    this.walkBounce=0;\r\n    this.walkBouncePerc=0;\r\n    this.walkBounceRate=.025; // Bounce rate per frame; walkBounce + walkBounceRate\r\n    this.walkBounceEaseIn=.03; // Ease in bouncePerc rate up to 1; perc + easeIn\r\n    this.walkBounceEaseOut=.95; // Ease out bouncePerc scalar; perc * easeOut\r\n    \r\n    this.posRotEasingThreshold=.01; // Velocity based calculations with any per frame scalar cut off value; val<posRotEasingThreshold ? 0\r\n\r\n    this.cameraMovement=[0,0]; // Left/Right, Forward/Back, Jump\r\n    this.cameraMovementEase=.85; // After key up, pre-frame rate to 0\r\n    this.cameraMoveLength=0;\r\n    this.cameraMoveLengthMult=.1; // cameraMoveLength scalar // ## check adding multiplier to keydown movement calculations\r\n    this.camPosBlend=.65; // Blend to previous position, easing movement\r\n    \r\n    this.camRotXYZ=new Vector3(0,0,0);//new Vector3(0,0,0);\r\n    this.camRotPitch=new Vector2(0,0);\r\n    this.cameraJumpActive=false;\r\n    this.cameraAllowJump=true;\r\n    this.cameraJumpHeight=0;\r\n    this.cameraJumpVelocity=0;\r\n    this.cameraJumpVelocityEaseOut=.90; // Ease out Jump Button Influence after Button Released\r\n    this.cameraJumpInAir=false;\r\n    \r\n    this.floorColliderInitialHit=false;\r\n    this.colliderValidityChecked=true; // Value shouldn't matter, but should Room Environments not set colliderValidity, assume checked initially\r\n    this.nearestFloorHit=new Vector3(0,0,0);\r\n    this.nearestFloorObjName=null;\r\n    this.nearestFloorHitPrev=new Vector3(0,0,0);\r\n    this.nearestFloorObjNamePrev=null;\r\n    \r\n    this.gravitySourceActive=false;\r\n    this.gravityDirection=new Vector3( 0, -1, 0 );\r\n    this.gravityEaseOutRate=.50;\r\n\r\n    this.jump=0;\r\n    // TODO : Unsure if I'd rather a contant timer for all \"allowed\" jumps or not\r\n    //          For now, this lock holds that the player should jump again when the timer is up\r\n    this.releaseJumpLockTime = 0;\r\n    this.releaseJumpLockDelay = .08; // Seconds dely between repeated jumping, its less jaring with a slight delay\r\n\r\n    this.runMain=true;\r\n    this.workerActive=false;\r\n    this.worker=null;\r\n    this.workerTransfers=false;\r\n    this.workerMessage=()=>{}; // Browser Compatibility\r\n    this.workerFunc=()=>{}; // Browser Compatibility\r\n    this.deviceKey=()=>{}; // Browser Compatibility\r\n    \r\n    this.portalList={};\r\n\r\n    this.roomWarpZone=[];\r\n    this.colliderCurObjHit=null;\r\n    this.colliderPrevObjHit=null;\r\n    this.colliderValid=false;\r\n    this.colliderFail=false;\r\n    \r\n    this.warpActive=false;\r\n    this.warpType=0;\r\n    this.warpObj=null;\r\n    this.warpTarget=null;\r\n    this.hotKeyTriggered=false;\r\n\r\n    this.eventCheckStatus=false;\r\n    this.proximityScaleTrigger=false;\r\n        \r\n    this.colliderShiftActive=true;\r\n    this.colliderAdjustPerc=0;\r\n    this.colliderAdjustRate=.020;\r\n\r\n    // ## Move to Device.js\r\n    this.gyroGravity=[0,0,0];\r\n    this.cameraPose={\r\n      alpha:null,\r\n      beta:null,\r\n      gamma:null,\r\n      alphaOffset:0,\r\n      betaOffset:0,\r\n      gammaOffset:0,\r\n      orientation:window.orientation||0,\r\n      pos:[0,0,0],\r\n      posOffset:[0,0,0],\r\n      rx:()=>{return this.beta},\r\n      ry:()=>{return this.alpha},\r\n      rz:()=>{return this.gamma},\r\n      accelZeroed:[0,0,0],\r\n      accelCalibration:10,\r\n      accelCalDiv:1/10,\r\n      accelCalCount:0,\r\n      accelTotal:[0,0,0],\r\n      accelPrev:null,\r\n      accelDelta:[0,0,0],\r\n      accelClearDelta:()=>{this.accelDelta=[0,0,0];},\r\n    };\r\n\r\n    this.uniformScalars={\r\n      curExp:1.0,\r\n      darkBase:.1,\r\n      brightBase:0.5,\r\n      exposureUniformBase:1.0,\r\n    }\r\n    \r\n    // TODO : This needs to be moved and integrated into fileIO and RoomClass\r\n    this.cameraPosLookAtNames = {\r\n      \"default\":{\r\n        pos:\"position\",\r\n        lookAt:\"lookat\",\r\n      },\r\n      \"mobile\":{\r\n        pos:\"positionmobile\",\r\n        lookAt:\"lookatmobile\",\r\n      },\r\n      \"vr\":{\r\n        pos:\"positionvr\",\r\n        lookAt:\"lookatvr\",\r\n      }\r\n    };\r\n\r\n    this.cameraPos=new Vector3(0,0,0);\r\n    this.cameraPrevPos=new Vector3(0,0,0);;\r\n    this.cameraPrevLookAt=new Vector3(0,0,0);;\r\n    this.cameraAim=new Vector3(0,0,1);\r\n    this.cameraAimTarget=new Vector3(0,0,0);;\r\n    this.cameraCross=new Vector3(1,0,0); // For Audio API faux 3d audio; UNUSED CURRENTLY\r\n    \r\n    this.lookAtTargetActive=new Vector3(0,0,0);;\r\n    this.lookAtPerc=new Vector2(1,0);\r\n    this.lookAtLockPerc=0;\r\n    this.lookAtLockFader=0;\r\n    this.lookAtLockFadeRate=.01;\r\n    \r\n    this.prevQuaternion=new Quaternion(); // Used in motionBlur shader calculations only\r\n    //this.prevWorldMatrix= new Matrix4(); // Only used if running higher quality motionBlur calculations, not needed\r\n    \r\n    this.pi=3.141592653589793238462643383279;\r\n    this.touchSensitivityLimits = this.touchMaxSensitivity * this.pi;\r\n\r\n    // Event callbacks\r\n    this.callbacks={};\r\n\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Sets dependencies for the Camera class.\r\n   * @param {Object} pxlNav - The navigation object containing dependencies.\r\n   * @private\r\n   */\r\n  setDependencies( pxlNav ){\r\n    this.pxlAudio=pxlNav.pxlAudio;\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlAutoCam=pxlNav.pxlAutoCam;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n    this.pxlColliders=pxlNav.pxlColliders;\r\n    this.pxlUser=pxlNav.pxlUser;\r\n    this.pxlUtils=pxlNav.pxlUtils;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlGuiDraws=pxlNav.pxlGuiDraws;\r\n    this.pxlQuality=pxlNav.pxlQuality;\r\n    this.pxlOptions=pxlNav.pxlOptions;\r\n    this.socket=pxlNav.socket;\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  log( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.INFO ){\r\n      console.log( msg );\r\n    }\r\n  }\r\n  warn( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.WARN ){\r\n      console.warn( msg );\r\n    }\r\n  }\r\n  error( msg ){\r\n    if( this.verbose >= VERBOSE_LEVEL.ERROR ){\r\n      console.error( msg );\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Initializes the Camera class and Camera Worker.\r\n   */\r\n  // TODO : Get worker implemented for whole of camera scripts\r\n  init(){\r\n    // Camera Service Worker - Ray Intersect Collision Detector\r\n    // TODO : Finish adding workers to monitor the Collider class and raycasting\r\n    var worker;\r\n    if( false && Worker ){\r\n        worker = new Worker(\"js/pxlBase/webWorkers/CameraWorker.js\");  \r\n        this.worker=worker;\r\n        //this.workerList.push( worker );\r\n    \r\n        let tmpThis=this;\r\n        worker.onmessage= (event) => {  \r\n            tmpThis.workerMessage(event.data);\r\n        };\r\n        worker.onerror= (event)=>{  \r\n            tmpThis.workerMessage({type:\"err\", data:event.data});\r\n        };\r\n        \r\n        // Transferables Status\r\n        let ab= new ArrayBuffer(1);\r\n        worker.postMessage(ab, [ab]); // ab.byteLength -> If transfer successful\r\n        this.workerTransfers=ab.byteLength==0; // Can transfer ArrayBuffers directly\r\n        \r\n        // Message Functions\r\n        this.workerMessage= async ( msg )=>{\r\n            if( msg.type == \"update\" ){\r\n                tmpThis.updateMainValues( msg );\r\n            }\r\n        }\r\n        this.workerFunc= async ( type, state=null )=>{\r\n            tmpThis.worker.postMessage({type, state})\r\n        }\r\n        this.deviceKey= async ( key=false, state=false )=>{\r\n            if( typeof key == \"number\"){\r\n            }else if( typeof key == \"string\"){\r\n                let type=\"key\";\r\n                tmpThis.worker.postMessage({type, key, state})\r\n            }\r\n        }\r\n        this.workerActive=true;\r\n        this.runMain=false;\r\n        \r\n        this.workerFunc(\"init\");\r\n    }\r\n  }\r\n  /**\r\n   * Updates main values from worker data.\r\n   * UNUSED CURRENTLY\r\n   * @param {Object} data - The data from the worker.\r\n   * @private\r\n   */\r\n  updateMainValues( data ){\r\n      let {gravityRate, standingHeightGravInfluence, cameraJumpImpulse}=data;\r\n      if( gravityRate != null ){\r\n          this.gravityRate = gravityRate;\r\n      }\r\n      if( standingHeightGravInfluence != null ){\r\n          this.standingHeightGravInfluence = standingHeightGravInfluence;\r\n      }\r\n      if( cameraJumpImpulse != null ){\r\n          this.cameraJumpVelocity+=cameraJumpImpulse;\r\n      }\r\n      this.camUpdated=true;\r\n  }\r\n    \r\n////////////////////////////////////////////\r\n// Update settings externally of Camera  //\r\n//////////////////////////////////////////\r\n\r\n  // Allow access to alter the Camera's internal settings\r\n  //   Run these updates during the Room's `init()`, `start()`, or `build()` functions\r\n  // TODO : Allow per-Room settings to be set in the Room's FBX file or Room Class\r\n  // TODO : Move these to the User class when updated for pxlNav\r\n  //          User is currently as it was for Antibody.club, so it needs to be updated for the pxlNav module\r\n  \r\n\r\n  // Default is 1.75\r\n  /**\r\n   * Sets the user's standing height.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's standing height.\r\n   * @param {string} [roomName='default'] - The name of the room.\r\n   * @example\r\n   * // Set the user's standing height to 1.75 meters.\r\n   * this.pxlCamera.setUserHeight( 1.75 );\r\n   */\r\n  setUserHeight( val, roomName=\"default\" ){\r\n    val = Math.max( val, 0.01 );\r\n    if( !this.roomStandingHeight.hasOwnProperty(roomName) ){\r\n      this.roomStandingHeight[roomName]=this.standingHeight;\r\n    }\r\n    \r\n    if( roomName==\"default\" ){\r\n      this.standingHeight=val;\r\n    }\r\n\r\n    this.roomStandingHeight[roomName]=val;\r\n  }\r\n\r\n  // Default is 5\r\n  /**\r\n   * Sets the user's maximum step height.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's maximum step height.\r\n   * @example\r\n   * // Set the user's maximum step height to 5 meters.\r\n   * this.pxlCamera.setMaxStepHeight( 5 );\r\n   */\r\n  setMaxStepHeight( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.maxStepHeight=val;\r\n  }\r\n\r\n  // Default is 1\r\n  /**\r\n   * Sets the user's scale.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's scale.\r\n   * @example\r\n   * // Set the user's scale to 1.\r\n   * this.pxlCamera.setUserScale( 1 );\r\n   */\r\n  setUserScale( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.userScale=val;\r\n  }\r\n  // Default is 1\r\n  /**\r\n   * Sets the user's movement scalar.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's movement scalar.\r\n   * @example\r\n   * // Set the user's movement scalar to 1.\r\n   * this.pxlCamera.setMovementScalar( 1 );\r\n   */\r\n  setMovementScalar( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.movementScalar=val;\r\n  }\r\n  // Default is 10\r\n  /**\r\n   * Sets the user's maximum movement speed.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's maximum movement speed.\r\n   * @example\r\n   * // Set the user's maximum movement speed to 10 meters per second.\r\n   * this.pxlCamera.setMovementMax( 10 );\r\n   */\r\n  setMovementMax( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.movementMax=val;\r\n  }\r\n  // Default is 0.85\r\n  /**\r\n   * Sets the user's movement easing rate.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's movement easing rate.\r\n   * @example\r\n   * // Set the user's movement easing rate to 0.85.\r\n   * this.pxlCamera.setMovementEase( 0.85 );\r\n   */\r\n  setMovementEase( val ){\r\n    val = Math.min( 1, Math.max( val, 0.01 ) );\r\n    this.cameraMovementEase=val;\r\n  }\r\n\r\n  // Default is 0.75\r\n  /**\r\n   * Sets the jump scalar.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The jump scalar.\r\n   * @example\r\n   * // Set the jump scalar to 0.75.\r\n   * this.pxlCamera.setJumpScalar( 0.75 );\r\n   */\r\n  setPositionBlend( val ){\r\n    val = Math.min( 1, Math.max( val, 0.01 ) );\r\n    this.camPosBlend=val;\r\n  }\r\n\r\n  // Default is 0.1\r\n  /**\r\n   * Sets the user's movement multiplier.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's movement multiplier.\r\n   * @example\r\n   * // Set the user's movement multiplier to 0.1.\r\n   * this.pxlCamera.setInputMovementMult( 0.1 );\r\n   */\r\n  setInputMovementMult( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.cameraMoveLengthMult=val;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Default is 1\r\n  /**\r\n   * Sets the user's jump scalar.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's jump scalar.\r\n   * @example\r\n   * // Set the user's jump scalar to 1.\r\n   * this.pxlCamera.setJumpScalar( 1 );\r\n   */\r\n  setJumpScalar( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.jumpScalar=val;\r\n  }\r\n  // Default is 0.75\r\n  /**\r\n   * Sets the user's jump impulse.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's jump impulse.\r\n   * @example\r\n   * // Set the user's jump impulse to 0.75.\r\n   * this.pxlCamera.setJumpImpulse( 0.75 );\r\n   */\r\n  setJumpImpulse( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.cameraJumpImpulse[0]=val;\r\n  }\r\n  // Default is 2.85\r\n  /**\r\n   * Sets the user's maximum jump hold.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's maximum jump hold.\r\n   * @example\r\n   * // Set the user's maximum jump hold to 2.85.\r\n   * this.pxlCamera.setJumpHoldMax( 2.85 );\r\n   */\r\n  setJumpHoldMax( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.cameraMaxJumpHold[0]=val;\r\n  }\r\n  // Default is 0.08\r\n  /**\r\n   * Sets the user's jump repeat delay.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's jump repeat delay.\r\n   * @example\r\n   * // Set the user's jump repeat delay to 0.08.\r\n   * this.pxlCamera.setJumpRepeatDelay( 0.08 );\r\n   */\r\n  setJumpRepeatDelay( val ){\r\n    val = Math.max( val, 0.01 );\r\n    this.releaseJumpLockDelay=val;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Default is 0.85\r\n  /**\r\n   * Sets the user's camera movement easing.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's camera movement easing.\r\n   * @example\r\n   * // Set the user's camera movement easing to 0.85.\r\n   * this.pxlCamera.setCameraMoveEasing( 0.85 );\r\n   */\r\n  setCameraRotateEasing( val ){\r\n    if( !Array.isArray(val) ){\r\n      if( typeof val == \"number\" ){\r\n        val=[val,val];\r\n        this.warn(\"Warning : Camera.setCameraEasing() expects an array of two numeric values, [PC Easing 0-1, Mobile Easing 0-1]; Default is [.55,.45]\");\r\n      }else{\r\n        this.error(\"Error : Camera.setCameraEasing() unexpected values type; expecting an array of two numeric values, [PC Easing 0-1, Mobile Easing 0-1]; Default is [.55,.45]\");\r\n      }\r\n    }\r\n    this.cameraEasing=val;\r\n  }\r\n  \r\n  // Touch Sensitivity should be a pixel-to-device reasonable value\r\n  //   Default is 500, being 500 pixels dragging range to look around\r\n  /**\r\n   * Sets the user's touch sensitivity.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's touch sensitivity.\r\n   * @example\r\n   * // Set the user's touch sensitivity to 500.\r\n   * this.pxlCamera.setTouchSensitivity( 500 );\r\n   */\r\n  setTouchSensitivity( val ){\r\n    if(val<=0){\r\n      val=1;\r\n    }\r\n    this.touchMaxSensitivity=val;\r\n    this.touchSensitivityLimits = this.touchMaxSensitivity * this.pi;\r\n  }\r\n  \r\n  /**\r\n   * Sets the user's gravity rate.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's gravity rate.\r\n   * @example\r\n   * // Set the user's gravity rate to 0.3\r\n   * this.pxlCamera.setGravityRate( 0.3 );\r\n   */\r\n  setGravityRate( val ){\r\n    if(val<=0){\r\n      val=1;\r\n    }\r\n    this.gravityRate=val;\r\n  }\r\n\r\n  // Assume 1 unit is 1 meter/second^2\r\n  //  But default is 2.5, so it's a bit lighter than Earth's gravity\r\n  /**\r\n   * Sets the user's gravity rate.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's gravity rate.\r\n   * @example\r\n   * // Set the user's gravity rate to 2.5\r\n   * this.pxlCamera.setGravityRate( 2.5 );\r\n   */\r\n  setGravityMax( val ){\r\n    if(val<=0){\r\n      val=1;\r\n    }\r\n    this.gravityMax=val;\r\n  }\r\n\r\n  // Set walking bounce settings\r\n  // Default is 230\r\n  /**\r\n   * Sets the user's walk bounce seed.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's walk bounce seed.\r\n   * @example\r\n   * // Set the user's walk bounce seed to 230.\r\n   * this.pxlCamera.setWalkBounceSeed( 230 );\r\n   */\r\n  setWalkBounceHeight( val ){\r\n    if(val<=0){\r\n      val=0;\r\n    }\r\n    this.walkBounceHeight=val;\r\n  }\r\n  // Default is 0.025\r\n  /**\r\n   * Sets the user's walk bounce rate.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's walk bounce rate.\r\n   * @example\r\n   * // Set the user's walk bounce rate to 0.025.\r\n   * this.pxlCamera.setWalkBounceRate( 0.025 );\r\n   */\r\n  setWalkBounceRate( val ){\r\n    if(val<=0){\r\n      val=0.0001;\r\n    }\r\n    this.walkBounceRate=val;\r\n  }\r\n  // Default is 0.03\r\n  /**\r\n   * Sets the user's walk bounce ease in.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's walk bounce ease in.\r\n   * @example\r\n   * // Set the user's walk bounce ease in to 0.03\r\n   * this.pxlCamera.setWalkBounceEaseIn( 0.03 );\r\n   */\r\n  setWalkBounceEaseIn( val ){\r\n    val = Math.min( 1, Math.max( val, 0.0001 ) );\r\n    this.walkBounceEaseIn=val;\r\n  }\r\n  // Default is 0.95\r\n  /**\r\n   * Sets the user's walk bounce ease out.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {number} val - The user's walk bounce ease out.\r\n   * @example\r\n   * // Set the user's walk bounce ease out to 0.95\r\n   * this.pxlCamera.setWalkBounceEaseOut( 0.95 );\r\n   */\r\n  setWalkBounceEaseOut( val ){\r\n    val = Math.min( 1, Math.max( val, 0.01 ) );\r\n    this.walkBounceEaseOut=val;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  // Set camera values from `pxlUserSettings` structure\r\n  //   Should custom entries have been added, they wont be processed\r\n  // TODO : This is a bit messy at the moment\r\n  // TODO : Add a per-room userSettings with lookup into the `pxlUserSettings` structure\r\n  //          Since with this set structure, it doesn't need to be individual variables\r\n  /**\r\n   * Sets the user's settings.\r\n   * @method\r\n   * @memberof pxlCamera\r\n   * @param {Object} userSettingsObject - The user's settings object.\r\n   * @example\r\n   * // Set the user's settings.\r\n   * import { pxlUserSettings } from \"../core/Options.js\";\r\n   * let userSettingsObject = Object.assign({}, pxlUserSettings);\r\n   * this.pxlCamera.setUserSettings( userSettingsObject );\r\n   */\r\n  setUserSettings( userSettingsObject ){\r\n    // User & collider step height settings\r\n    if( userSettingsObject.hasOwnProperty(\"height\") ){\r\n      if( userSettingsObject.height.hasOwnProperty(\"standing\") ){\r\n        this.setUserHeight( userSettingsObject.height.standing );\r\n      }\r\n      if( userSettingsObject.height.hasOwnProperty(\"stepSize\") ){\r\n        this.setMaxStepHeight( userSettingsObject.height.stepSize );\r\n      }\r\n    }\r\n    // -- -- --\r\n    // Camera movement settings\r\n    if( userSettingsObject.hasOwnProperty(\"movement\") ){\r\n      if( userSettingsObject.movement.hasOwnProperty(\"scalar\") ){\r\n        this.setMovementScalar( userSettingsObject.movement.scalar );\r\n      }\r\n      if( userSettingsObject.movement.hasOwnProperty(\"max\") ){\r\n        this.setMovementMax( userSettingsObject.movement.max );\r\n      }\r\n      if( userSettingsObject.movement.hasOwnProperty(\"easing\") ){\r\n        this.setMovementEase( userSettingsObject.movement.easing );\r\n      }\r\n    }\r\n    // -- -- --\r\n    // Head bounce settings\r\n    if( userSettingsObject.hasOwnProperty(\"headBounce\") ){\r\n      if( userSettingsObject.headBounce.hasOwnProperty(\"height\") ){\r\n        this.setWalkBounceHeight( userSettingsObject.headBounce.height );\r\n      }\r\n      if( userSettingsObject.headBounce.hasOwnProperty(\"rate\") ){\r\n        this.setWalkBounceRate( userSettingsObject.headBounce.rate );\r\n      }\r\n      if( userSettingsObject.headBounce.hasOwnProperty(\"easeIn\") ){\r\n        this.setWalkBounceEaseIn( userSettingsObject.headBounce.easeIn );\r\n      }\r\n      if( userSettingsObject.headBounce.hasOwnProperty(\"easeOut\") ){\r\n        this.setWalkBounceEaseOut( userSettingsObject.headBounce.easeOut );\r\n      }\r\n    }\r\n    // -- -- --\r\n    // Jump settings\r\n    if( userSettingsObject.hasOwnProperty(\"jump\") ){\r\n      if( userSettingsObject.jump.hasOwnProperty(\"impulse\") ){\r\n        this.setJumpScalar( userSettingsObject.jump.impulse );\r\n      }\r\n      if( userSettingsObject.jump.hasOwnProperty(\"holdMax\") ){\r\n        this.setJumpHoldMax( userSettingsObject.jump.holdMax );\r\n      }\r\n      if( userSettingsObject.jump.hasOwnProperty(\"repeatDelay\") ){\r\n        this.setJumpRepeatDelay( userSettingsObject.jump.repeatDelay );\r\n      }\r\n    }\r\n    // -- -- --\r\n    // Gravity settings\r\n    //   From a Jump or running off a ledge\r\n    if( userSettingsObject.hasOwnProperty(\"gravity\") ){\r\n      if( userSettingsObject.gravity.hasOwnProperty(\"ups\") ){\r\n        this.setGravityRate( userSettingsObject.gravity.ups );\r\n      }\r\n      if( userSettingsObject.gravity.hasOwnProperty(\"max\") ){\r\n        this.setGravityMax( userSettingsObject.gravity.max );\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n/////////////////////////\r\n// Main runtime loop  //\r\n///////////////////////\r\n  /**\r\n   * Main step function to update camera state.\r\n   * @private\r\n   */\r\n  step(){\r\n    // Update camera position with out gravity, jump, or collider influences.\r\n    //   Simply apply initial frame movement vectors\r\n    if(this.pxlDevice.directionKeyDown){\r\n        this.updateMovement(this.pxlTimer.prevMS);\r\n    }\r\n    if( this.runMain ){\r\n      \r\n      if( this.hasJumpLock && this.pxlTimer.runtime > this.releaseJumpLockTime ){\r\n        this.hasJumpLock = false;\r\n        this.hasGravity = false; \r\n        this.cameraAllowJump = true;\r\n        this.camInitJump();\r\n      }\r\n      if( this.hasGravity && this.cameraJumpActive ){\r\n          this.camJump(this.pxlTimer.prevMS);\r\n      }else if(this.cameraJumpVelocity>0 ){\r\n          this.killJumpImpulse();\r\n      }\r\n    }\r\n    \r\n    // Check if camera calculations should be ran\r\n    this.camUpdated= this.camUpdated || this.hasMoved || this.hasRotated || this.hasGravity || this.cameraMovement[0]!=0 || this.cameraMovement[1]!=0 ;// || this.pxlDevice.cursorLockActive;\r\n    this.updateCamera();\r\n\r\n\r\n    // Update Shaders to Camera Position / Rotation changes\r\n    this.lowQualityUpdates();\r\n    this.midQualityUpdates();\r\n        \r\n    this.eventCheck();\r\n  }\r\n  \r\n\r\n  /**\r\n   * Checks for events based on environment triggers.\r\n   * Currently only checking for Ground Collider, Room Warps, and Portals\r\n   * @private\r\n   */\r\n  eventCheck(){\r\n      if( this.colliderValid && this.eventCheckStatus){\r\n          // Camera Translate Events don't need further calculatons; Room Warps and Portals\r\n          if( this.eventTrigger(this.nearestFloorObjName) ){ \r\n              this.warpEventTriggered(1, this.nearestFloorObjName);\r\n              //return;\r\n          }\r\n      }\r\n  }\r\n    \r\n  /**\r\n   * Updates device values based on velocity easing magnitude.\r\n   * @param {number} velEaseMag - The current velocity magnitude.\r\n   * @private\r\n   */\r\n  updateDeviceValues( velEaseMag ){\r\n    if(!this.pxlQuality.settings.leftRight){\r\n      let tankRotate=-this.cameraMovement[0];\r\n      if(!this.pxlDevice.touchMouseData.active){\r\n        this.pxlDevice.touchMouseData.velocity.x+=tankRotate;\r\n        //this.pxlDevice.touchMouseData.velocityEase.x+=tankRotate;\r\n      }\r\n      this.pxlDevice.touchMouseData.netDistance.x+=tankRotate*4.0;\r\n    }\r\n    \r\n    //let stillMoving=false;\r\n    // PC Mouse Movement\r\n    if(this.pxlDevice.touchMouseData.velocity!=null && this.pxlDevice.mobile==0){\r\n      if(velEaseMag<this.posRotEasingThreshold){\r\n        this.pxlDevice.touchMouseData.velocity.multiplyScalar(0);\r\n        //this.pxlDevice.touchMouseData.velocityEase.multiplyScalar(0);\r\n      }else{\r\n        let curEasing = this.cameraEasing[ (this.pxlDevice.mobile?1:0) ];\r\n        this.pxlDevice.touchMouseData.velocity.multiplyScalar( curEasing );\r\n        //this.pxlDevice.touchMouseData.velocityEase.multiplyScalar( curEasing );\r\n      }\r\n      this.pxlDevice.touchMouseData.netDistance.add( this.pxlDevice.touchMouseData.velocity.clone().multiply( this.pxlDevice.touchMouseData.moveMult ) );\r\n    }\r\n  }\r\n  \r\n//////////////////////////////////////////\r\n// Gyroscope Enabled Device Functions  //\r\n////////////////////////////////////////\r\n  /**\r\n   * Builds device-pose monitors for gyroscope-enabled devices.\r\n   * CURRENTLY UNWORKING\r\n   * NOTE : Development in-progress through 'Device.js'\r\n   * @private\r\n   */\r\n  buildDeviceMonitors(){\r\n    let camObject=this;\r\n    //window.addEventListener('deviceorientation', (e)=>{camObject.devicePoseData(camObject,e)} );\r\n    //window.addEventListener('orientationchange', (e)=>{camObject.deviceOrientationData(camObject,e)} );\r\n    //window.addEventListener('devicemotion', (e)=>{camObject.deviceMotionData(camObject,e)} );\r\n        //%=\r\n    //gyroscope=new Gyroscope({frequency:10});\r\n    //gyroscope.addEventListener('reading',gyroPoseData);\r\n    //gyroscope.start();\r\n    \r\n    //window.addEventListener('devicemotion', deviceMotionData);\r\n    //window.addEventListener('orientationchange', devicePoseChange); // Don't know when this ever fires, docs seem like it should run tho\r\n    \r\n    // Based around w3.org's Accelerometer builder\r\n  /*  navigator.permissions.query({ name: 'accelerometer' }).then(result => {\r\n      if (result.state === 'denied') {\r\n        console.log('Permission to use accelerometer sensor is denied.');\r\n        return;\r\n      }\r\n\r\n      let acl = new Accelerometer({frequency: 10});\r\n      let max_magnitude = 0;\r\n      acl.addEventListener('activate', () => console.log('Ready to measure.'));\r\n      acl.addEventListener('error', error => console.log(`Error: ${error.name}`));\r\n      acl.addEventListener('reading', () => {\r\n        let magnitude = Math.hypot(acl.x, acl.y, acl.z);\r\n        if (magnitude > max_magnitude) {\r\n          max_magnitude = magnitude;\r\n          console.log(`Max magnitude: ${max_magnitude} m/s2`);\r\n        }\r\n      });\r\n      acl.start();\r\n    });*/\r\n        //%\r\n  }\r\n    /*\r\n  gyroPoseData(camObj,e){\r\n    let x=gyroscope.x;\r\n    let y=gyroscope.y;\r\n    let z=gyroscope.z;\r\n    let prevGyro=[...this.pxlDevice.gyroGravity];\r\n    this.pxlDevice.gyroGravity=[x,y,z];\r\n    accumGravity=[accumGravity[0]+x-prevGyro[0],accumGravity[1]+y-prevGyro[1],accumGravity[2]+z-prevGyro[2]];\r\n    \r\n  }\r\n\r\n  deviceMotionData(camObj,e){\r\n    let acc=e.acceleration;//IncludingGravity;\r\n    //let ag=e.accelerationIncludingGravity;\r\n    if(camObj.cameraPose.accelCalCount<camObj.cameraPose.accelCalibration){\r\n      camObj.cameraPose.accelCalCount+=1;\r\n      camObj.cameraPose.accelZeroed[0]+=acc.x;\r\n      camObj.cameraPose.accelZeroed[1]+=acc.y;\r\n      camObj.cameraPose.accelZeroed[2]+=acc.z;\r\n      if(camObj.cameraPose.accelCalCount==camObj.cameraPose.accelCalibration){\r\n        camObj.cameraPose.accelZeroed[0]*=camObj.cameraPose.accelCalDiv;\r\n        camObj.cameraPose.accelZeroed[1]*=camObj.cameraPose.accelCalDiv;\r\n        camObj.cameraPose.accelZeroed[2]*=camObj.cameraPose.accelCalDiv;\r\n      }\r\n    }\r\n    camObj.cameraPose.accelDelta[0]=acc.x-camObj.cameraPose.accelZeroed[0];\r\n    camObj.cameraPose.accelDelta[1]=acc.y-camObj.cameraPose.accelZeroed[1];\r\n    camObj.cameraPose.accelDelta[2]=acc.z-camObj.cameraPose.accelZeroed[2];\r\n    camObj.cameraPose.accelTotal[0]+=acc.x-camObj.cameraPose.accelZeroed[0];\r\n    camObj.cameraPose.accelTotal[1]+=acc.y-camObj.cameraPose.accelZeroed[1];\r\n    camObj.cameraPose.accelTotal[2]+=acc.z-camObj.cameraPose.accelZeroed[2];\r\n  }\r\n\r\n  devicePoseData(camObj,e){\r\n    if(e.alpha!==null){\r\n      camObj.abs=e.absolute;\r\n      camObj.cameraPose.gamma=e.gamma; // Yaw\r\n      camObj.cameraPose.beta=e.beta; // Pitch\r\n      camObj.cameraPose.alpha=e.alpha; // Roll\r\n      camObj.cameraPose.alphaOffset=e.alphaOffset||0; // Roll\r\n    }\r\n  }\r\n  \r\n  deviceOrientationData(camObj,e){\r\n    camObj.cameraPose.orientation=window.orientation||0;\r\n  }\r\n  */\r\n  \r\n/////////////////////////////////////////////////////////////////////\r\n// Set Camera Position / Look At Functions; Room Warps & Portals  //\r\n///////////////////////////////////////////////////////////////////\r\n  /**\r\n   * Updates camera matrices.\r\n   * Updates - Projection Matrix, Matrix World, & World Matrix\r\n   * @example\r\n   * import { Object3D } from \"three\";\r\n   * let emptyObject=new Object3D();\r\n   * \r\n   * emptyObject.position.set(10,10,0);\r\n   * \r\n   * this.pxlCamera.setTransform(emptyObject.position);\r\n   * \r\n   * // Update camera matrices.\r\n   * this.pxlCamera.updateCameraMatrices();\r\n   */\r\n  updateCameraMatrices(){\r\n    this.camera.updateProjectionMatrix();\r\n    this.camera.updateMatrixWorld();\r\n    this.camera.updateWorldMatrix();\r\n  }\r\n  /**\r\n   * Resets camera calculations to a Vector3.\r\n   * @param {Vector3} newPosition - The new position for the camera.\r\n   * @example\r\n   * import { Vector3 } from \"three\";\r\n   * let newPos=new Vector3(20,5,15);\r\n   * this.pxlCamera.resetCameraCalculations(newPos);\r\n   */\r\n  resetCameraCalculations( newPosition ){\r\n    this.cameraMovement[0] = 0;\r\n    this.cameraMovement[1] = 0;\r\n    this.pxlDevice.touchMouseData.curFadeOut.multiplyScalar(0);\r\n    this.pxlDevice.touchMouseData.velocity.multiplyScalar(0);\r\n    \r\n    this.pxlDevice.touchMouseData.netDistance.set(0,0);\r\n    \r\n    if( newPosition == null ){\r\n      newPosition = this.camera.position.clone();\r\n    }\r\n    \r\n    this.camera.position.copy( newPosition );\r\n    this.updateCameraMatrices();\r\n    this.cameraPos.copy( newPosition );\r\n    this.cameraPrevPos.copy( newPosition );\r\n    \r\n    // Force collision detection\r\n    this.colliderCurObjHit=null; \r\n    this.colliderPrevObjHit=null;\r\n    this.camUpdated=true; // Forces next frame update\r\n    this.hasMoved=true; // Forces next frame update\r\n  }\r\n\r\n  /**\r\n   * Sets the field-of-view for the camera.\r\n   * @param {number} fov - The field-of-view.\r\n   * @example\r\n   * // Set the field-of-view to 75.\r\n   * this.pxlCamera.setFOV( 75 );\r\n   */\r\n  setFOV( fov ){\r\n    this.camera.fov=fov;\r\n    this.camera.updateProjectionMatrix();\r\n    this.camUpdated=true;\r\n  }\r\n\r\n  /**\r\n   * Sets camera stats including FOV, aspect ratio, near and far clipping planes.\r\n   * Used when changing Rooms\r\n   * @param {number} fov - The field of view.\r\n   * @param {number} aspect - The aspect ratio.\r\n   * @param {number} near - The near clipping plane.\r\n   * @param {number} far - The far clipping plane.\r\n   * @example\r\n   * // Set the camera stats.\r\n   * //   FOV: 75, Aspect: 1.33, Near: 0.1, Far: 1000\r\n   * this.pxlCamera.setStats( 75, 1.33, 0.1, 1000 );\r\n   */\r\n  setStats( fov, aspect, near, far ){\r\n    // TODO : Aspect is weird, I need to work out better calculations for this\r\n    //this.camera.aspect=aspect;\r\n    this.camera.near=near;\r\n    this.camera.far=far;\r\n    this.setFOV(fov);\r\n  }\r\n\r\n  setAspect( aspect ){\r\n    this.camera.aspect=aspect;\r\n    this.camera.updateProjectionMatrix();\r\n    //this.camUpdated=true;\r\n  }\r\n\r\n  /**\r\n   * Sets the camera transform to a specific position and lookAt target.\r\n   * For camera position changes, portals, and room warps\r\n   * @param {Vector3} pos - The position to set the camera.\r\n   * @param {Vector3} [lookAt=null] - The lookAt target.\r\n   * @example\r\n   * import { Vector3 } from \"three\";\r\n   * let pos=new Vector3(10,15,15);\r\n   * let lookAt=new Vector3(0,5,0);\r\n   * \r\n   * this.pxlCamera.setTransform(pos, lookAt);\r\n   */\r\n  setTransform(pos, lookAt=null){ // Vector3, Vector3\r\n    this.resetCameraCalculations(pos); // Reinitiates Camera; Forces collision detection, Kills user inputs\r\n\r\n    if(lookAt){\r\n      this.cameraAimTarget.position.copy( lookAt );\r\n      this.camera.lookAt(lookAt);\r\n      this.cameraPrevLookAt.copy( lookAt );\r\n      \r\n      this.updateCameraMatrices();\r\n      \r\n      this.pxlDevice.touchMouseData.initialQuat=this.camera.quaternion.clone();\r\n    }\r\n    \r\n    this.resetGravity();\r\n    this.camUpdated=true; // Forces next frame update\r\n  }\r\n  \r\n  \r\n  /**\r\n  * Best used without a `lookAt` target to allow the object's rotation to be adopted.\r\n  * If you just want to move the camera without rotational changes -or- to an object with a lookAt, it's better to use `setTransform`\r\n  * @param {Object3D} obj - The object to set the camera to.\r\n  * @param {Object3D|string} [lookAt=null] - The lookAt Camera Position Name or target object.\r\n  * If a string is provided, it checks for the camera position if it exists in the Room,\r\n  *   Ussuall set in your FBX file.\r\n  * @example\r\n  * import { Object3D } from \"three\";\r\n  * let obj=new Object3D();\r\n  * obj.position.set(10,15,15);\r\n  * \r\n  * this.pxlCamera.setToObj(obj);\r\n  */\r\n  setToObj(obj, lookAt=null){ // Object3D, Object3D\r\n    this.resetCameraCalculations( obj.position ); // Reinitiates Camera; Forces collision detection, Kills user inputs\r\n    \r\n    // If no lookat, adopt Object rotation\r\n    if(lookAt){\r\n      let toLookAt=lookAt.position.clone();\r\n      this.cameraAimTarget.position.copy( toLookAt );\r\n      this.camera.lookAt(toLookAt);\r\n      this.cameraPrevLookAt.copy( toLookAt );\r\n      \r\n      this.updateCameraMatrices();\r\n      \r\n      this.pxlDevice.touchMouseData.initialQuat=this.camera.quaternion.clone();\r\n    }else{\r\n      this.pxlDevice.touchMouseData.initialQuat=obj.quaternion.clone();\r\n      this.camera.setRotationFromQuaternion(this.pxlDevice.touchMouseData.initialQuat);\r\n      this.updateCameraMatrices();\r\n    }\r\n    \r\n    this.resetGravity();\r\n    this.camUpdated=true; // Forces next frame update\r\n    this.hasMoved=true;\r\n    this.hasRotated=true;\r\n    this.colliderCheck( obj.position );\r\n    this.nearestFloorObjName=null;\r\n\r\n    \r\n  }\r\n  \r\n  /**\r\n   * Warps the camera to a specific room.\r\n   * @param {string} roomName - The name of the room to warp to.\r\n   * @param {boolean} [start=false] - Whether to run the room's `start()` function.\r\n   * @param {Object3D} [objTarget=null] - The target object in the room.\r\n   * @example\r\n   * // Warp the camera to the default location in \"OutletEnvironment\" room.\r\n   * this.pxlCamera.warpToRoom( \"OutletEnvironment\", true );\r\n   * \r\n   * // Warp to the 'aboutMe' camera position in \"CampfireEnvironment\" room.\r\n   * //   Note, camera positions are set in your FBX by the camera's group name.\r\n   * this.pxlCamera.warpToRoom( \"CampfireEnvironment\", true, \"aboutMe\" );\r\n   */\r\n  warpToRoom(roomName, start=false, objTarget=null){\r\n\r\n    let roomKeys = Object.keys(this.pxlEnv.roomSceneList);\r\n    let roomEnv = this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom]\r\n    \r\n    objTarget = objTarget || roomEnv.defaultCamLocation || \"\";\r\n    objTarget = objTarget.toLowerCase()\r\n    let camLocName = roomName.toLowerCase();\r\n\r\n    let hasCurrentRoom = this.pxlEnv.roomSceneList.hasOwnProperty( this.pxlEnv.currentRoom );\r\n    \r\n    if( roomEnv && !roomKeys.includes(roomName) && roomEnv.camLocation.hasOwnProperty(camLocName) ){\r\n      objTarget = camLocName;\r\n      roomName = this.pxlEnv.currentRoom;\r\n    }else{\r\n      if( hasCurrentRoom){\r\n        this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom].stop();\r\n      }\r\n      roomEnv = this.pxlEnv.roomSceneList[roomName];\r\n    };\r\n\r\n    let prevRoom=this.pxlEnv.currentRoom;\r\n    let holdCamera=false;\r\n    if( hasCurrentRoom && this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom].hasOwnProperty( \"camHoldWarpPos\" )){\r\n      holdCamera = this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom].camHoldWarpPos;\r\n    }\r\n\r\n    this.pxlEnv.currentRoom=roomName;\r\n    this.pxlAutoCam.curRoom=roomName;\r\n    \r\n    let isMainRoom=roomName==this.pxlEnv.mainRoom;\r\n    //this.pxlEnv.delayPass.uniforms.roomComposer.value= isMainRoom ? 0 : 1;\r\n    if( this.pxlUser.iZoom ){\r\n      let tDiff= isMainRoom ? this.pxlEnv.roomComposer : this.pxlEnv.mapComposer;\r\n      let tDiffPrev= isMainRoom ? this.pxlEnv.mapComposer: this.pxlEnv.roomComposer;\r\n      this.pxlEnv.delayPass.uniforms.tDiffusePrev.value= tDiff.renderTarget1.texture;\r\n      this.pxlEnv.delayPass.uniforms.tDiffusePrevRoom.value= tDiffPrev.renderTarget1.texture;\r\n      setTimeout( ()=>{\r\n        if(  prevRoom != roomName ){\r\n          if( isMainRoom ){\r\n            this.pxlEnv.roomComposer.reset();\r\n          }else{\r\n            this.pxlEnv.mapComposer.reset();\r\n          }\r\n        }\r\n        setTimeout( ()=>{\r\n          this.pxlEnv.mapComposerWarpPass.needsSwap=false;\r\n        },500);\r\n      },100);\r\n    }\r\n    //this.pxlEnv.delayPass.uniforms.tDiffusePrev.value= roomName==this.pxlEnv.mainRoom ? this.pxlEnv.mapComposer.renderTarget1.texture : this.pxlEnv.roomComposer.renderTarget1.texture;\r\n        \r\n    //if(roomName!=this.pxlEnv.mainRoom || start){\r\n    if( start ){\r\n      if( !roomEnv ){\r\n        this.warn(\"pxlCamera.warpToRoom(); pxlRoom not found - \"+this.pxlEnv.currentRoom);\r\n        return;\r\n      }\r\n\r\n      if( roomName != prevRoom ){\r\n        roomEnv.start();\r\n      }\r\n\r\n      this.pxlEnv.roomRenderPass.scene=roomEnv.scene;\r\n\r\n      let camLocName = objTarget.toLowerCase();\r\n      if( roomEnv.camLocation.hasOwnProperty( camLocName ) ){\r\n          \r\n        let posName = this.cameraPosLookAtNames[\"default\"].pos;\r\n        let lookAtName = this.cameraPosLookAtNames[\"default\"].lookAt;\r\n\r\n        if( this.pxlDevice.mobile ){\r\n          if( roomEnv.camLocation[ camLocName ].hasOwnProperty( this.cameraPosLookAtNames[\"mobile\"].pos ) ){\r\n            posName=this.cameraPosLookAtNames[\"mobile\"].pos;\r\n          }\r\n          if( roomEnv.camLocation[ camLocName ].hasOwnProperty( this.cameraPosLookAtNames[\"mobile\"].lookAt ) ){\r\n            lookAtName=this.cameraPosLookAtNames[\"mobile\"].lookAt;\r\n          }\r\n        }\r\n        let toPos = roomEnv.camLocation[ camLocName ][ posName ];\r\n        let toLookAt = roomEnv.camLocation[ camLocName ][ lookAtName ];\r\n        this.setTransform( toPos, toLookAt );\r\n      }else if( roomEnv.camInitPos && roomEnv.camInitLookAt && ( !holdCamera || !this.pxlEnv.postIntro || this.hotKeyTriggered ) ){\r\n        this.setTransform( roomEnv.camInitPos, roomEnv.camInitLookAt );\r\n        this.hotKeyTriggered=false;\r\n      }\r\n    }else{\r\n      if(  !holdCamera || !this.pxlEnv.postIntro || this.hotKeyTriggered ){\r\n        if(objTarget!=null){\r\n            this.setToObj(objTarget);\r\n        }else{\r\n            this.setTransform( roomEnv.camReturnPos, roomEnv.camReturnLookAt );\r\n        }\r\n        this.hotKeyTriggered=false;\r\n      }\r\n    }\r\n    this.pxlGuiDraws.prepArtistInfo( roomEnv.getArtistInfo() );\r\n    this.camUpdated=true;\r\n    /*this.pxlEnv.mapComposerWarpPass.enabled=!this.pxlEnv.mapComposerWarpPass.enabled;\r\n    this.pxlEnv.mapComposer.render();\r\n    this.pxlEnv.mapComposerWarpPass.enabled=!this.pxlEnv.mapComposerWarpPass.enabled;\r\n    this.pxlEnv.mapComposer.render();*/\r\n    \r\n    let curFOV = roomEnv.pxlCamFOV[  this.pxlDevice.mobile ? 'MOBILE' : 'PC' ];\r\n    this.camera.fov=curFOV;\r\n    this.camera.zoom=roomEnv.pxlCamZoom;\r\n    this.camera.aspect=roomEnv.pxlCamAspect;\r\n    this.camera.near=roomEnv.pxlCamNearClipping;\r\n    this.camera.far=roomEnv.pxlCamFarClipping;\r\n    this.camera.updateProjectionMatrix();\r\n    \r\n    let standingHeight=this.getUserHeight();\r\n    this.emitCameraTransforms( this.camera.position.clone(), standingHeight, true );\r\n        \r\n    // Camera assumes the player is warping to safe ground\r\n    //   So it will treat the position as the nearest floor hit\r\n    //     This was causing initial jumping and movement to use the camera position as the floor\r\n    //   This will drop the player from any height to the nearest floor using gravity when warping to a room\r\n    // TODO : Move this to be Room specific\r\n    if( this.canMove ){\r\n      this.colliderValid=false;\r\n      this.hasGravity=true;\r\n    }\r\n    \r\n    this.pxlAutoCam.checkStatus();\r\n  }\r\n\r\n  /**\r\n   * Get a snapshot of the room to use as the diffuse texture for the warp effect.\r\n   * @private\r\n   *  \r\n   */\r\n  warpToRoomSnapshot(roomName){\r\n    this.pxlEnv.currentRoom=roomName;\r\n    let roomEnv=this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom];\r\n    \r\n    let curFOV = roomEnv.pxlCamFOV[  this.pxlDevice.mobile ? 'MOBILE' : 'PC' ];\r\n    this.camera.fov=curFOV;\r\n    this.camera.zoom=roomEnv.pxlCamZoom;\r\n    this.camera.aspect=roomEnv.pxlCamAspect;\r\n    this.camera.near=roomEnv.pxlCamNearClipping;\r\n    this.camera.far=roomEnv.pxlCamFarClipping;\r\n    this.camera.updateProjectionMatrix();\r\n    this.setTransform( roomEnv.camThumbPos, roomEnv.camThumbLookAt );\r\n\r\n    let standingHeight=this.getUserHeight();\r\n    this.emitCameraTransforms( this.camera.position.clone(), standingHeight, true );\r\n  }\r\n  \r\n  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n    // \r\n  /**\r\n   * Initiates fast travel to a specific location.\r\n   * This begins the warp effect process,\r\n   *   It doesn't affect camera upon triggering, just queuing the warp event\r\n   * \r\n   * *Implementation has been disabled until further development*\r\n   * \r\n   * @param {number} [hotkey=0] - The hotkey for the fast travel location.\r\n   * \r\n   */\r\n  fastTravel(hotkey=0){\r\n        if( this.pxlAutoCam.enabled ){\r\n            return;\r\n        }\r\n        if( this.pxlAutoCam.active || this.pxlAutoCam.autoCamActive ){\r\n            this.pxlAutoCam.preAutoCamToggle();\r\n        }\r\n        \r\n        this.hotKeyTriggered=true;\r\n    if( hotkey == 0 ){ // Lobby\r\n      //this.warpEventTriggered( 1, this.pxlEnv.mainRoom, 'init' );\r\n      this.warpEventTriggered( 1, this.pxlEnv.currentRoom, 'init' );\r\n    }\r\n    \r\n    // Hotkeys are set for a specific scene, make 3d scene file dependant\r\n    return;\r\n    if( hotkey == 1 ){ // Canyon\r\n      //this.warpEventTriggered( 1, this.pxlEnv.mainRoom, this.portalList['Portal_8'] );\r\n    }else if( hotkey == 2 ){ // Dance Hall\r\n      //this.warpEventTriggered( 1, \"ShadowPlanet\", 'init' );\r\n    }else if( hotkey == 3 ){ // Sunflower Room\r\n      //this.warpEventTriggered( 1, this.pxlEnv.mainRoom, this.portalList['Portal_0'] );\r\n    }\r\n  }\r\n\r\n\r\n\r\n////////////////////////////////////\r\n// Camera Jumping Functions      //\r\n//////////////////////////////////\r\n  /**\r\n   * Handles the camera jump key press or release.\r\n   * @param {boolean} [jumpKeyIsDown=false] - Whether the jump (Default : Space) key is pressed.\r\n   * @example\r\n   * // Handle the camera jump key press or release.\r\n   * //   Player has pressed the jump key\r\n   * this.pxlCamera.camJumpKey( true );\r\n   * \r\n   * //   Player has released the jump key\r\n   * this.pxlCamera.camJumpKey( false );\r\n   */\r\n  camJumpKey( jumpKeyIsDown=false ){\r\n    if( jumpKeyIsDown ){ // Space is down\r\n      this.camInitJump();\r\n    }else{ // Space is up\r\n      if(this.cameraJumpActive){ // Space\r\n        this.cameraJumpActive=false;\r\n      }\r\n      this.cameraAllowJump=true;\r\n      this.hasJumpLock=false; // Prevent repeated jumping if Space held down after landing\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initializes the jump values for the camera.\r\n   * @private\r\n   */\r\n  camInitJump(){\r\n    // Link static camera to prevent jumping as well\r\n    if( !this.canMove ){return;}\r\n      \r\n    if( !this.hasGravity && this.cameraAllowJump ){\r\n      this.pxlDevice.keyDownCount[2]=this.pxlTimer.prevMS;\r\n      \r\n\r\n      this.cameraAllowJump=false; // Prevent jump spamming up stacked colliders; this may be desired for ladders\r\n      this.cameraJumpActive=true;\r\n      this.cameraJumpInAir=true;\r\n      \r\n      this.hasGravity=true;\r\n      this.gravityRate=0;\r\n      this.cameraJumpVelocity=this.cameraJumpImpulse[this.pxlUser.lowGrav] * this.userScale;\r\n            \r\n      if( this.hasJumpLock ){\r\n          this.hasJumpLock=false;\r\n          this.nearestFloorHit=this.nearestFloorHitPrev;\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Handles the camera jump step.\r\n   * Step the jump while impulse isn't 0.\r\n   * @param {number} curTime - The current time.\r\n   * @private\r\n   */\r\n  camJump(curTime){\r\n    let timeDelta= (curTime-this.pxlDevice.keyDownCount[2]) ;\r\n    let fpsRateAdjust=1;//Math.min(1, 1/(20*this.pxlTimer.msRunner.y));\r\n    // let jumpPerc=Math.min(1, timeDelta/(this.cameraMaxJumpHold[this.pxlUser.lowGrav]*fpsRateAdjust) );\r\n    let jumpPerc=Math.min(1, timeDelta / (this.cameraMaxJumpHold[this.pxlUser.lowGrav] ) ) ;\r\n        \r\n    if(this.cameraJumpActive){\r\n      let jumpRate=jumpPerc ;\r\n      if(jumpRate==1){\r\n        this.cameraJumpActive=false;\r\n      }else{\r\n        jumpRate=(1-jumpRate)*(1-jumpRate);\r\n        jumpRate=jumpRate* ( jumpRate*.5+.5);\r\n      }\r\n      this.cameraJumpVelocity+=Math.max(0, jumpRate) * this.cameraJumpImpulse[this.pxlUser.lowGrav] * this.jumpScalar * this.pxlTimer.deltaTime;\r\n    }\r\n    this.cameraJumpVelocity*=(1-jumpPerc);//*.5+.5;\r\n\r\n    if( jumpPerc==1 ){\r\n      this.cameraJumpActive=false;\r\n    }\r\n  }\r\n  /**\r\n   * Kills the jump impulse.\r\n   * Space released before max jump\r\n   * @example\r\n   * // Kill the jump impulse.\r\n   * this.pxlCamera.killJumpImpulse();\r\n   */\r\n  killJumpImpulse( scalar=1){\r\n    let toImpulse=this.cameraJumpVelocity * scalar * this.cameraJumpVelocityEaseOut;\r\n\r\n    this.cameraJumpVelocity= toImpulse>.1 ? toImpulse : 0;\r\n    this.workerFunc( \"killJumpImpulse\" );\r\n  }\r\n  \r\n/////////////////////////\r\n// Gravity Functions  //\r\n///////////////////////\r\n  /**\r\n   * Updates the gravity for the camera.\r\n   * Gravity is updated and offset landing height with an ease back to standing upright\r\n   * Ran internally during the main loop, but revealed for external access\r\n   * @param {number} deltaTime - The time since the last frame.\r\n   * @example\r\n   * // Update the gravity for the camera.\r\n   * this.pxlCamera.updateGravity( this.pxlTimer.deltaTime );\r\n   */\r\n  updateGravity( deltaTime ){\r\n    if( this.runMain ){\r\n      this.gravityRate = Math.max(0, this.gravityRate-this.cameraJumpVelocity  );\r\n      \r\n      let gravityRate = this.gravityUPS[ this.pxlUser.lowGrav ];\r\n\r\n      if( this.hasGravity ){\r\n        this.gravityCount += (gravityRate * 2.5) * deltaTime;\r\n        //this.gravityRate = Math.min( 1, ((this.gravityRate+this.gravityMax)*deltaTime)) * gravityRate;\r\n        this.gravityRate = Math.min( 1, ((this.gravityRate+this.gravityMax))) * this.gravityCount;\r\n        //this.gravityRate +=  this.gravityRate * this.gravityCount;\r\n      }\r\n      if( this.gravityRate != 0 ){\r\n        // gMult not used, testing for need\r\n        let gMult=1;\r\n        if( !this.hasGravity ){\r\n          this.gravityRate=this.gravityRate>.01 ? this.gravityRate*this.gravityEaseOutRate*gravityRate * deltaTime : 0;\r\n          gMult= this.gravityRate;\r\n        }else{\r\n          //gMult=this.gravityRate*.08*gravityRate;\r\n          gMult=this.gravityRate;\r\n        }\r\n        gMult=Math.min(1, gMult);\r\n        \r\n        this.standingHeightGravInfluence = Math.min(1, this.gravityRate / this.gravityMax ) * this.standingMaxGravityOffset;\r\n        //this.standingHeightGravInfluence = Math.min(1, gMult / this.gravityMax ) * this.standingMaxGravityOffset;\r\n        //this.standingHeightGravInfluence = Math.min(this.gravityMax, this.gravityRate * deltaTime ) * this.standingMaxGravityOffset;\r\n        //this.standingHeightGravInfluence = Math.min(this.gravityMax, this.gravityRate * deltaTime ) * this.standingMaxGravityOffset;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Resets the gravity for the camera.\r\n   * Ran during Jump Landing, Room & Portal Warps currently\r\n   * @example\r\n   * // Reset the gravity for the camera.\r\n   * this.pxlCamera.resetGravity();\r\n   */\r\n  resetGravity(){\r\n    this.gravityCount=0;\r\n    this.gravityRate=0;\r\n    this.workerFunc( \"resetGravity\" );\r\n    this.jumpLanding( false ); // resetGravity runs jumpLanding on Worker\r\n  }\r\n  /**\r\n   * Handles the jump landing, stopping the camera jump.\r\n   * @param {boolean} [send=true] - Whether to send the landing event.\r\n   * @example\r\n   * // Force the camera to \"land\" from a jump\r\n   * //   Player will still be in the air, but gravity will be active\r\n   * this.pxlCamera.jumpLanding();\r\n   */\r\n  jumpLanding( send=true ){\r\n    // Is space held down?\r\n    //  Trigger short delay before triggering a jump again\r\n    if( this.cameraJumpActive ){\r\n      this.hasJumpLock=true;\r\n      this.releaseJumpLockTime = this.pxlTimer.runtime + this.releaseJumpLockDelay;\r\n    }\r\n\r\n    this.gravityCount=0;\r\n    this.hasGravity=false; // Should probably name it cameraInAir\r\n    this.cameraJumpVelocity=0;\r\n    this.cameraJumpInAir=false; // hasGravity should indicate this value; residual from logic rework\r\n    this.cameraJumpActive=false; // Stop running camJump function\r\n\r\n    // Leave outside if for external access\r\n    if( send ){\r\n        this.workerFunc( \"jumpLanding\" );\r\n    }\r\n  }\r\n  \r\n//////////////////////////////////////////////\r\n// Collision Objects and Ground Functions  //\r\n////////////////////////////////////////////\r\n  /**\r\n   * Checks for main collider interactions.\r\n   * Ground plane, obstacles, and no terrain (If there are colliders in scene)\r\n   * @param {Vector3} curCamPos - The current camera position.\r\n   * @returns {Vector3} - The updated camera position.\r\n   * @example\r\n   * // Check for main collider interactions.\r\n   * let curPos=this.pxlCamera.colliderCheck( this.camera.position );\r\n   * // Update the camera position.\r\n   * this.setTransform( curPos );\r\n   */\r\n  // TODO : gravitySource should probably originate from Room's object list, but for now...\r\n  // TODO : Collision check shouldn't run if no cam movement length aside from gravity, store floor name and collision position from prior run\r\n  colliderCheck( curCamPos ){\r\n\r\n    // Check if camera is in Roam or Static mode\r\n    if( !this.canMove ){\r\n      return curCamPos;\r\n    }\r\n\r\n    // Floor Collider\r\n    //   geoList[\"floorCollider\"] Collision Detection\r\n    let objHit=null;\r\n    this.movementBlocked=false;\r\n    \r\n    if( (this.cameraMoveLength>0 || this.colliderPrevObjHit==null || this.nearestFloorObjName==null) &&\r\n           this.cameraBooted && this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom].collidersExist\r\n        ){\r\n      this.colliderValidityChecked=true; // Prevent doublechecking object validity post collision detection\r\n      \r\n      let curRoomObj = this.pxlEnv.roomSceneList[ this.pxlEnv.currentRoom ];\r\n\r\n      let castDir=new Vector3(0,-1,0);\r\n      let castPos=curCamPos.clone();//.add(new Vector3(0,100,0));\r\n      let castHeight= 150*this.maxStepHeight ;\r\n      castPos.y += castHeight + this.maxStepHeight;\r\n      \r\n      let resetKeyDown=false;\r\n      var rayHits=[];\r\n      \r\n      let curQuadrant= ( ~~(castPos.x>0)+\"\" ) + ( ~~(castPos.z>0)+\"\" );\r\n      \r\n      if( curRoomObj.hasColliderType( COLLIDER_TYPE.WALL ) ){\r\n        rayHits = this.pxlColliders.castRay( this.pxlEnv.currentRoom, castPos, castDir, COLLIDER_TYPE.WALL );\r\n      }\r\n      \r\n      if(rayHits.length > 0){ // Hit a wall, check if you are standing on the wall\r\n        // this.floorColliderInitialHit=true;\r\n        curRoomObj.hitColliders( rayHits, COLLIDER_TYPE.WALL );\r\n        if(curRoomObj.hasColliderType( COLLIDER_TYPE.WALL_TOP )){\r\n          let rayTopHits=this.pxlColliders.castRay( this.pxlEnv.currentRoom, castPos, castDir, COLLIDER_TYPE.WALL_TOP );\r\n          if( rayTopHits.length > 0 ){\r\n            curRoomObj.hitColliders( rayTopHits, COLLIDER_TYPE.WALL_TOP );\r\n          }\r\n          \r\n          let closestDist=-99999;\r\n          let yPrevRef=curCamPos.y;\r\n          let curName;\r\n          let curCollisionPos=this.nearestFloorHit;\r\n          let validHitCheck=false;\r\n          for(var x=0; x<rayTopHits.length;++x){\r\n            var obj=rayTopHits[x];\r\n            curName=obj.object.name;\r\n            let curHit=obj.pos;\r\n            let curDist=obj.dist;\r\n            let camDist=curHit.y;//- curCamPos.y; // ## Why??\r\n            let validHit=camDist < this.maxStepHeight;\r\n            validHitCheck = validHitCheck ? validHitCheck : validHit;\r\n            if( (curDist<closestDist && validHit) || objHit==null){\r\n              objHit=curName;\r\n              closestDist=curDist;\r\n              curCollisionPos=curHit;\r\n            }\r\n          }\r\n\r\n          // Check if camera is on top of wall\r\n          let pullBack;\r\n          if( !validHitCheck || ((curCamPos.y) < curCollisionPos.y && (this.nearestFloorHitPrev.y-curCollisionPos.y > (this.maxStepHeight+this.getStandingHeight()) && !this.hasGravity) && ( (curCamPos.y+this.maxStepHeight+this.getStandingHeight()) < curCollisionPos.y && this.hasGravity) ) ){\r\n              \r\n              //objHit=this.nearestFloorObjName;\r\n              if(this.cameraMovement[0] != 0 || this.cameraMovement[1] != 0 ){\r\n                  validHitCheck=true;\r\n                  this.hasGravity=false;\r\n                  this.hasJumpLock=true;\r\n              }\r\n              \r\n              pullBack=this.cameraPos.clone();\r\n              pullBack.y=Math.min(curCamPos.y,pullBack.y);//+this.cameraJumpVelocity;\r\n              curCamPos=pullBack;\r\n              curCollisionPos=curCamPos;\r\n              if(this.hasGravity){\r\n                  curCollisionPos.y=this.nearestFloorHitPrev.y;\r\n              }else{\r\n                  curCollisionPos.y=this.cameraPos.y;\r\n              }\r\n                  \r\n              this.cameraJumpActive=false;\r\n              this.cameraAllowJump=true;\r\n              this.cameraJumpInAir=false;\r\n              \r\n              this.cameraMovement[0] = 0;\r\n              this.cameraMovement[1] = 0;\r\n              this.pxlDevice.touchMouseData.curFadeOut.multiplyScalar(0);\r\n              this.pxlDevice.touchMouseData.velocity.multiplyScalar(0);\r\n              //this.pxlDevice.touchMouseData.velocityEase.multiplyScalar(0);\r\n          }\r\n          \r\n          \r\n          //this.colliderValid=validHitCheck;\r\n          if( validHitCheck ){\r\n              if( objHit == null ){\r\n                  this.nearestFloorHit = this.nearestFloorHitPrev;\r\n                  this.nearestFloorObjName = this.nearestFloorObjNamePrev;\r\n                  if( Math.abs(curCamPos.y-this.nearestFloorHit.y) > (this.maxStepHeight+this.getStandingHeight()) ){\r\n                      this.colliderValid = false;\r\n                      this.hasGravity = true;\r\n                  }\r\n              }else{\r\n                  this.nearestFloorHitPrev = this.nearestFloorHit;\r\n                  this.nearestFloorObjNamePrev = this.nearestFloorObjName;\r\n                  this.nearestFloorHit = curCollisionPos;\r\n                  this.nearestFloorObjName = objHit;\r\n              }\r\n          }\r\n        }else{\r\n          this.colliderFail=true;\r\n          this.movementBlocked=true;\r\n        }\r\n      }else{\r\n        // ## Find orientation to gravitational source if any exist in Room Environment\r\n        let stepUpDist=this.maxStepHeight;//+this.cameraJumpVelocity;\r\n        let validDistRange=stepUpDist+this.getStandingHeight();\r\n        //castPos.y=curCamPos.y+stepUpDist;\r\n        castPos=curCamPos.clone(); //.add(new Vector3(0,100,0));\r\n        castPos.y += castHeight + this.maxStepHeight;\r\n        \r\n                \r\n        if( this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom].hasColliders() ){\r\n          rayHits=this.pxlColliders.castRay( this.pxlEnv.currentRoom, castPos, castDir, COLLIDER_TYPE.FLOOR );\r\n        }else{\r\n          return curCamPos; // No colliders\r\n        }\r\n                \r\n        if(rayHits.length > 0){\r\n          if(rayHits.length > 1){\r\n            let firstDist = Math.abs( rayHits[0].pos.y-curCamPos.y );\r\n            if( firstDist<stepUpDist ){\r\n              rayHits = [ rayHits[0] ];\r\n            }else if( firstDist>stepUpDist && rayHits[0].pos.y > rayHits[1].pos.y && rayHits[1].pos.y > curCamPos.y-this.maxStepHeight ){\r\n              return curCamPos;\r\n            }\r\n          }\r\n\r\n          this.floorColliderInitialHit=true;\r\n          let closestDist=-99999;\r\n          let curName;\r\n          let curCollisionPos=this.nearestFloorHit;\r\n          \r\n          for(let x=0; x<rayHits.length;++x){\r\n            let obj=rayHits[x];\r\n            let curHit=obj.pos;\r\n            //let curHit=castPos.y-obj.dist;\r\n            //let curDist=obj.dist;\r\n            \r\n            let validHit=false;\r\n            curName=obj.object.name;\r\n            let camDist=curHit.distanceTo( curCamPos );\r\n\r\n            \r\n            validHit=camDist<this.maxStepHeight;\r\n            //console.log(stepUpDist,camDist, obj.dist, validHit);\r\n            if( ( this.portalList[curName] || this.roomWarpZone.includes(curName) ) && validHit){\r\n              objHit=curName;\r\n              curCollisionPos=curHit;\r\n              break;\r\n            }else if( !this.itemCheck(curName, validHit) ){\r\n              if(camDist<closestDist || objHit==null){\r\n                objHit=curName;\r\n                closestDist=camDist;\r\n                curCollisionPos=curHit;\r\n              }\r\n            }\r\n          }\r\n          \r\n          if( this.nearestFloorObjName==null && objHit!=null){\r\n            this.nearestFloorHitPrev=curCollisionPos;\r\n            this.nearestFloorObjNamePrev=objHit;\r\n                        \r\n            this.nearestFloorHit=curCollisionPos;\r\n            this.nearestFloorObjName=objHit;\r\n          }\r\n          \r\n          //console.log(this.nearestFloorHitPrev.y-curCollisionPos.y, this.maxStepHeight+this.getStandingHeight() );\r\n          if( (this.nearestFloorHitPrev.y-curCollisionPos.y) > (this.maxStepHeight+this.getStandingHeight()) && !this.hasGravity){\r\n\r\n            this.nearestFloorHit=this.nearestFloorHitPrev;\r\n            this.nearestFloorObjName=this.nearestFloorObjNamePrev;\r\n            \r\n            //this.cameraMovement[0] = Math.abs(this.cameraMovement[0])<this.posRotEasingThreshold ? 0 : this.cameraMovement[0]*this.cameraMovementEase;\r\n            //this.cameraMovement[1] = Math.abs(this.cameraMovement[1])<this.posRotEasingThreshold ? 0 : this.cameraMovement[1]*this.cameraMovementEase;\r\n\r\n            if( !objHit ){\r\n                curCamPos=this.cameraPrevPos.clone();\r\n            }else{\r\n                curCamPos=this.cameraPos.clone();\r\n            }\r\n            objHit=this.nearestFloorObjName;\r\n            \r\n            this.cameraMovement[0] = 0;\r\n            this.cameraMovement[1] = 0;\r\n            this.pxlDevice.touchMouseData.curFadeOut.multiplyScalar(0);\r\n            this.pxlDevice.touchMouseData.velocity.multiplyScalar(0);\r\n            //this.pxlDevice.touchMouseData.velocityEase.multiplyScalar(0);\r\n\r\n          }else{ // Player is jumping or falling\r\n\r\n            this.nearestFloorHitPrev=this.nearestFloorHit;\r\n            this.nearestFloorObjNamePrev=this.nearestFloorObjName;\r\n            \r\n            this.nearestFloorHit=curCollisionPos;\r\n            this.nearestFloorObjName=objHit;\r\n            if( objHit == null ){\r\n                this.colliderValid=false;\r\n                this.hasGravity=true;\r\n            }\r\n          }\r\n        }else{\r\n          // If this runs, means the user ran off the edge of the collider and there is no floor below them.\r\n          this.colliderFail=true;\r\n          this.movementBlocked=true;\r\n          this.colliderValidityChecked=false;\r\n          curCamPos=this.cameraPos.clone();\r\n        }\r\n      }\r\n    }else{\r\n      // User didn't move, may be falling from gravity\r\n      //   Call valid object check within distance from camera location\r\n      this.colliderValidityChecked=false;\r\n    }\r\n    this.colliderValidityChecked=false;\r\n    \r\n    return curCamPos;\r\n  }\r\n  \r\n  \r\n///////////////////////////////\r\n// Collider Event Triggers  //\r\n/////////////////////////////\r\n  // Should only run when this.colliderValid==false\r\n  // ## \r\n  /**\r\n   * Checks if the collider is valid.\r\n   * For GravitySource, make sure to get vector delta magnitude, not just Y delta\r\n   * @param {Vector3} curCamPos - The current camera position.\r\n   * @returns {number} - The distance to the collider.\r\n   * @example\r\n   * // Check if the collider is valid, within the max step height.\r\n   * let dist=this.pxlCamera.checkColliderValid( this.camera.position );\r\n   * // Update the camera position.\r\n   */\r\n  checkColliderValid( curCamPos ){\r\n    this.colliderValidityChecked=true;\r\n    let validDist=this.maxStepHeight+this.gravityRate;\r\n    \r\n    let curDist = curCamPos.distanceTo( this.nearestFloorHit );\r\n    \r\n    let checkValid= curDist < validDist;// && (curCamPos.y+validDist)<this.nearestFloorHit.y;\r\n    \r\n    this.colliderValid=checkValid;\r\n        \r\n    return curDist;\r\n    //return checkValid; // Currently not needed, pre-emptive\r\n  }\r\n  \r\n  /**\r\n   * Triggers an event based on the collider object.\r\n   * Currently supports inta-room portals, extra-room warp zones, and only 2 audio triggers.\r\n   * Custom triggers haven't been implemented yet,\r\n   *   For any custom Collider Events, use the `castray()`\r\n   * @param {string} [checkObject=null] - The collider object to check.\r\n   * @returns {boolean} - Whether an event was triggered.\r\n   * @example\r\n   * // Trigger an event based on the collider object.\r\n   * this.pxlCamera.eventTrigger( \"AudioTrigger_1\" );\r\n   * // Update the camera position.\r\n   * this.setTransform( curPos );\r\n   */\r\n  eventTrigger( checkObject=null ){\r\n    // Check if camera is in Roam or Static mode\r\n    if( !this.canMove ){ return false; }\r\n\r\n     // No collider, might be in a Room Environment with no colliders\r\n    if(!checkObject){ return false; }\r\n    \r\n  \r\n    // -- Check for Portals -- //\r\n    // -- Within Room Environment position/rotation updates -- //\r\n    if(this.portalList[checkObject]){\r\n      this.warpEventTriggered( 0, this.portalList[checkObject]);\r\n      this.eventCheckStatus=false;\r\n      return true;\r\n    }\r\n    \r\n    // -- Check for between Room Warp Zones -- //\r\n    // -- Separate ThreeJS Scene position/rotation updates -- //\r\n    if( this.roomWarpZone.includes(checkObject) ){ // ## Should live in the Room Environment\r\n      this.warpEventTriggered( 1, checkObject );\r\n      this.eventCheckStatus=false;\r\n      return true; // Room warp, kill camera calculations\r\n    }\r\n    \r\n    // -- Check for change between different Collider objects -- //\r\n    // -- Changes may trigger Audio and Screen Visual Effects -- //\r\n    this.colliderShiftActive=this.colliderCurObjHit!=checkObject || this.colliderShiftActive ;\r\n    this.colliderPrevObjHit= this.colliderCurObjHit;\r\n    this.colliderCurObjHit=checkObject;\r\n    // If the volume adjust is mid transition, keep the fade rolling\r\n    this.colliderShiftActive=this.colliderShiftActive || !(this.colliderAdjustPerc==1 || this.colliderAdjustPerc==0);\r\n    \r\n    // Fade Up/Down Audio/Video effects per room names\r\n    // ## These should be handled by the Room Environment itself\r\n    if(this.colliderShiftActive && this.colliderCurObjHit){\r\n      let volMult= 1;\r\n      let audioTriggerCur = this.colliderCurObjHit.includes(\"AudioTrigger\")\r\n      //let audioTriggerPrev = (this.colliderPrevObjHit || \"\").includes(\"AudioTrigger\")\r\n      //let audioTrigger= ( audioTriggerCur || audioTriggerPrev ) && ( audioTriggerCur != audioTriggerPrev);\r\n      if( audioTriggerCur ){\r\n          volMult=-1;\r\n      }\r\n      this.colliderAdjustPerc=Math.min(1, Math.max(0,  this.colliderAdjustPerc + this.colliderAdjustRate * volMult ));\r\n      let curExposure=(1-this.colliderAdjustPerc);\r\n      \r\n      let curExp=1.0;\r\n      // ## Convert to function dictionary per Room Environment's Collider[objName]\r\n      if(this.colliderCurObjHit == \"AudioTrigger_1\"){ // Sunflower Room\r\n        this.pxlEnv.currentAudioZone=1;\r\n        curExp= curExp - curExposure*this.uniformScalars.darkBase; // ## Don't do it this way... blend, don't add offset\r\n        this.uniformScalars.exposureUniformBase=curExp;\r\n\r\n      }else if(this.colliderCurObjHit == \"AudioTrigger_2\"){ // Lobby\r\n        this.pxlEnv.currentAudioZone=2;\r\n        let animPerc=1;\r\n        curExp= this.uniformScalars.curExp + curExposure*this.uniformScalars.brightBase*animPerc;  // ## Don't do it this way... blend, don't add offset\r\n        this.uniformScalars.exposureUniformBase=curExp;\r\n        this.proximityScaleTrigger=true; // Fade Out proximity range\r\n        this.pxlAudio.setFadeActive(-1);\r\n      //}else if(){ } // TODO : Add camera location warp pad check\r\n      }else{\r\n        this.pxlEnv.currentAudioZone=0;\r\n        curExp= curExp*(1-curExposure) + this.uniformScalars.exposureUniformBase*curExposure; // ## Don't do it this way... blend, don't add offset\r\n      }\r\n      \r\n      // Transition has completed when True\r\n      this.colliderShiftActive=!(this.colliderAdjustPerc==1 || this.colliderAdjustPerc==0);\r\n            \r\n      // If Lobby geomtry is visible, but no longer in the Lobby, toggle visiblity\r\n            // Runs once, at the moment of collider change\r\n      if( this.colliderPrevObjHit==\"AudioTrigger_2\" && this.colliderCurObjHit!=this.colliderPrevObjHit){\r\n        this.proximityScaleTrigger=true; // Fade In proximity range\r\n        this.pxlAudio.setFadeActive(1);\r\n      }\r\n      \r\n      if( this.pxlDevice.mobile ){\r\n          curExp=this.colliderAdjustPerc;\r\n      }\r\n      \r\n      // Set scene exposure on post-process composer passes \r\n      this.pxlEnv.updateCompUniforms(curExp);\r\n            \r\n\r\n      // Scale proximity visual\r\n      if(this.proximityScaleTrigger && !this.pxlDevice.mobile && !this.pxlAutoCam.enabled ){\r\n        let proxMult=this.colliderAdjustPerc;\r\n        proxMult=1-(1-proxMult)*(1-proxMult);\r\n        this.pxlEnv.fogMult.x = proxMult;\r\n        if( !this.colliderShiftActive ){\r\n          this.proximityScaleTrigger=false;\r\n        }\r\n      }\r\n      \r\n      this.eventCheckStatus=this.colliderShiftActive;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Checks if an item was triggered.\r\n   * Currently only used as - if( !this.itemCheck(validHit) ){}\r\n   *   Preventing standing on the item collider plane\r\n   * @param {string} curNameBase - The base name of the item.\r\n   * @param {boolean} validHit - Whether the hit was valid.\r\n   * @returns {boolean} - Whether the item was triggered.\r\n   * @private\r\n   */\r\n  itemCheck(curNameBase, validHit){\r\n    if(!validHit){ return false; }\r\n        \r\n        let curName=curNameBase.split(\"_\").shift();\r\n    \r\n    if(this.pxlUser.itemListNames.includes(curNameBase)){\r\n            let itemPickup=this.pxlUser.checkItemPickUp(curName);\r\n            if(itemPickup){\r\n                return this.itemActive( curName, curNameBase );\r\n            }\r\n    }\r\n    return false; // Allowed to stand on object\r\n  }\r\n  /**\r\n   * Triggers a newly picked-up item.\r\n   * If no item is picked up, a random overlay-effect item is selected.\r\n   */\r\n  itemTrigger(){\r\n        if( this.pxlUser.itemActiveTimer.length>0 ){\r\n            this.pxlUser.itemActiveTimer[0]=this.pxlTimer.curMS;\r\n        }else{\r\n            if( this.pxlUser.mPick.length==0){\r\n                this.pxlUser.mPick=this.pxlUtils.randomizeArray( ['LizardKing', 'StarField', 'InfinityZoom'] );\r\n            }\r\n            //this.pxlUser.mPick=\"LizardKing\";\r\n            let setItem= this.pxlUser.mPick.pop();\r\n            this.pxlUser.checkItemPickUp(setItem);\r\n            this.itemActive( setItem );\r\n        }\r\n    }\r\n    /**\r\n     * Activates an item.\r\n     * @param {string} [curName=null] - The name of the item.\r\n     * @param {string} [curNameBase=null] - The base name of the item.\r\n     * @returns {boolean} - Whether the item was activated.\r\n     */\r\n    itemActive( curName=null, curNameBase=null ){\r\n        if( curName==null ){\r\n            return false;\r\n        }\r\n        let timer=this.pxlTimer.prevMS+this.pxlUser.itemRunTime;\r\n        let finCmd=\"\";\r\n        let text=\"\";\r\n        if(curName==\"LowGravity\"){\r\n            text=\"Low Gravity\";\r\n            finCmd=\"this.lowGrav=0;this.itemGroupList['\"+curNameBase+\"'].visible=true;\";\r\n            timer=this.pxlTimer.prevMS+this.pxlUser.itemRunTime;\r\n        }else if(curName==\"LizardKing\"){\r\n            text=\"I am the Lizard King\";\r\n            finCmd=\"this.lKing=0;this.lKingWarp.set(...this.lKingInactive);this.lizardKingPass.enabled=false;\"+(!this.pxlDevice.mobile && \"this.itemGroupList['\"+curNameBase+\"'].visible=true;\");\r\n            timer=this.pxlTimer.prevMS+this.pxlUser.itemRunTime;\r\n        }else if(curName==\"StarField\"){\r\n            text=\"Major Tom\";\r\n            finCmd=\"this.sField=0;this.starFieldPass.enabled=false;\"+(!this.pxlDevice.mobile && \"this.itemGroupList['\"+curNameBase+\"'].visible=true;\");\r\n            timer=this.pxlTimer.prevMS+this.pxlUser.itemRunTime;\r\n        }else if(curName==\"InfinityZoom\"){\r\n            text=\"Fractal Substrate\";\r\n            finCmd=\"this.iZoom=0;this.crystallinePass.enabled=false;\"+(!this.pxlDevice.mobile && \"this.itemGroupList['\"+curNameBase+\"'].visible=true;this.pxlEnv.mapComposerWarpPass.needsSwap=true;this.pxlEnv.mapComposerWarpPass.enabled=false;\");\r\n            timer=this.pxlTimer.prevMS+this.pxlUser.itemRunTime;\r\n            //this.pxlEnv.mapComposerWarpPass.needsSwap=false;\r\n            this.pxlEnv.mapComposerWarpPass.needsSwap=true;\r\n            setTimeout(()=>{\r\n                /*if( this.pxlEnv.currentRoom==this.pxlEnv.mainRoom ){\r\n                    this.pxlEnv.roomComposer.reset();\r\n                    this.pxlEnv.mapComposer.render();\r\n                }else{\r\n                    this.pxlEnv.mapComposer.reset();\r\n                    this.pxlEnv.roomComposer.render();\r\n                }*/\r\n                this.pxlEnv.mapComposer.render();\r\n                this.pxlEnv.roomComposer.render();\r\n                setTimeout(()=>{\r\n                    this.pxlEnv.mapComposerWarpPass.needsSwap=false;\r\n                    this.pxlEnv.mapComposerWarpPass.enabled=true;\r\n                    /*if( this.pxlEnv.currentRoom==this.pxlEnv.mainRoom ){\r\n                        this.pxlEnv.roomComposer.reset();\r\n                    }else{\r\n                        this.pxlEnv.mapComposer.reset();\r\n                    }*/\r\n                },500);\r\n            },500);\r\n            /*this.pxlEnv.mapComposer.render();\r\n            this.pxlEnv.mapComposerWarpPass.enabled=!this.pxlEnv.mapComposerWarpPass.enabled;\r\n            this.pxlEnv.mapComposer.render();*/\r\n            //this.pxlEnv.roomComposer.render();\r\n            //this.pxlEnv.mapComposer.render();\r\n        }else{\r\n            return false;\r\n        }\r\n        this.pxlGuiDraws.buildItemHud(curName,text);\r\n        if( !this.pxlDevice.mobile ){\r\n            this.pxlUser.itemGroupList[curNameBase].visible=false;\r\n        }\r\n        this.pxlUser.itemInactiveCmd.push( finCmd );\r\n        this.pxlUser.itemActiveTimer.push(timer);\r\n        this.pxlUser.itemActiveList.push(text);\r\n        return true; // Don't stand upon item collision object\r\n    }\r\n    \r\n////////////////////////////////////\r\n// Camera Positional Functions   //\r\n//////////////////////////////////\r\n\r\n  // Flip between free roaming or static camera\r\n  //   Run this through pxlNav's trigger system, trigger --\r\n  //     pxlNav.trigger(\"Camera\",\"Roam\")\r\n  //      -or-\r\n  //     pxlNav.trigger(\"Camera\",\"Static\")\r\n  /**\r\n   * Toggles the camera movement.\r\n   * @param {boolean} [canMoveVal=null] - Whether the camera can move.\r\n   * @example\r\n   * // Toggle the camera to `Static` mode.\r\n   * this.pxlCamera.toggleMovement( false );\r\n   * \r\n   * // Toggle the camera to `Roam` mode.\r\n   * this.pxlCamera.toggleMovement( true );\r\n   */\r\n  toggleMovement( canMoveVal=null ){\r\n    if(canMoveVal == null){\r\n      canMoveVal=!this.canMove;\r\n    }\r\n    this.canMove = canMoveVal;\r\n    this.hasGravity = canMoveVal;\r\n  }\r\n\r\n  /**\r\n   * Updates the movement based on the current time.\r\n   * Appling down directional key values to camera movement array\r\n   * \r\n   * Ran internally during the main loop, but revealed for external access\r\n   * \r\n   * @param {number} curTime - The current time.\r\n   * @example\r\n   * // Update the movement based on the current time.\r\n   * this.pxlCamera.updateMovement( this.pxlTimer.deltaTime );\r\n   * \r\n   * // Log the current camera movement direction in X and Z.\r\n   * console.log( this.pxlCamera.cameraMovement );\r\n   */\r\n  updateMovement(curTime){\r\n\r\n    // Check if camera is in Roam or Static mode\r\n    if( !this.canMove ){ return; }\r\n\r\n    \r\n    if( this.pxlDevice.mobile ){\r\n      return;\r\n    }\r\n\r\n\r\n    let rate=[0,0];//\r\n    let dir=[...this.pxlDevice.directionKeysPressed];\r\n    let strafe=0;\r\n    let dolly=0;\r\n    // Get millisecond time differences so camera movement is independant of FPS\r\n    let deltas=[ (curTime-this.pxlDevice.keyDownCount[0]), (curTime-this.pxlDevice.keyDownCount[1]) ]; // 1.000 seconds\r\n\r\n    // Array entry\r\n    let easingMode = this.mobile ? 1 : 0;\r\n\r\n    // Check if either Left or Right direction keys are pressed\r\n    //  Default: rate[0] is strafing movement\r\n    //    If tank controls are enabled, rate[0] drives rotation rate\r\n    // this.pxlQuality.settings.leftRight == False : Tank Controls;  True : Strafing\r\n    //   TODO : Yeah, I know.  There is a TODO in QualityController.js to decouple movement settings\r\n    if((dir[0]+dir[2])==1){\r\n      strafe=dir[2]-dir[0];\r\n      // Subtract forward/back from strafing movement to reduce diagonal super-speed\r\n      let turnRate=this.pxlQuality.settings.leftRight ?  this.cameraEasing[ easingMode ] : ( 1 - Math.min(1, Math.abs(this.cameraMovement[1]*.3)) ) *.5 ;\r\n      rate[0]=( (this.pxlQuality.settings.leftRight ? 1.0 : 6.0) + (deltas[0]*(deltas[0])) * .1 ) * turnRate;\r\n      rate[0]= Math.min( this.pxlUser.moveSpeed, rate[0] ) * this.movementScalar * this.userInputMoveScalar.x;\r\n    }else{\r\n      // Bother Left AND Right direction keys are pressed, cancel movement\r\n      this.pxlDevice.keyDownCount[0]=curTime;\r\n    }\r\n    \r\n    // Check if either Up or Down direction keys are pressed\r\n    if((dir[1]+dir[3])==1){\r\n      dolly=dir[3]-dir[1];\r\n\r\n      // Subtract strafing movement from dolly movement to reduce diagonal super-speed\r\n      let dollyRate=(1- Math.min(1, Math.abs(this.cameraMovement[0]*.07))) * this.cameraEasing[ easingMode ]; \r\n      rate[1]=( ((deltas[1]*(deltas[1]*3+2+this.pxlUser.moveSpeed))*.5) ) * dollyRate; \r\n      rate[1]= Math.min( this.pxlUser.moveSpeed, rate[1] ) * this.movementScalar * this.userInputMoveScalar.y;\r\n    }else{\r\n      // Both Up AND Down direction keys are pressed, cancel movement\r\n      this.pxlDevice.keyDownCount[1]=curTime;\r\n    }\r\n\r\n    let moveSpeed = ( rate[0]**2 + rate[1]**2 ) ** 0.5;\r\n    \r\n    this.hasMovementLimit=true;\r\n    this.movementMax = 10.0; // Meters per second\r\n\r\n    this.cameraMovement[0]+=strafe*rate[0];\r\n    this.cameraMovement[1]+=dolly*rate[1];\r\n  }\r\n\r\n  /**\r\n   * Initializes the starting camera position per-frame.\r\n   *   This is ran in `updateCamera()` \r\n   * @returns {Vector3} - The initial camera position.\r\n   * @private\r\n   */\r\n  initFrameCamPosition(){\r\n    let curCamPos=this.cameraPos.clone();\r\n\r\n    if(!this.cameraBooted){ // These should be set from Scene File, if not, initial values\r\n      this.cameraAimTarget.position.set(0, 0, 0);//.add(new Vector3(0,0,0));\r\n      this.cameraPrevPos = new Vector3(curCamPos.clone());\r\n      this.cameraPrevLookAt = new Vector3(0,0,1);\r\n      this.hasMoved = true;\r\n      this.hasRotated = true;\r\n    }else{\r\n      let userMovement;\r\n      /*if(this.pxlDevice.mobile){ // ## When Mobile is implemented, convert to this.cameraMovement\r\n        userMovement=new Vector3(-this.pxlDevice.touchMouseData.curDistance.x*.01,0,-this.pxlDevice.touchMouseData.curDistance.y*.01);\r\n        this.cameraMoveLength=userMovement.length();\r\n      }else{*/\r\n        //userMovement=new Vector3(this.cameraMovement[0],0,this.cameraMovement[1]);\r\n        userMovement=new Vector3((this.pxlQuality.settings.leftRight?this.cameraMovement[0]*.5:0),0,this.cameraMovement[1]);\r\n        this.cameraMoveLength=userMovement.length();\r\n      //}\r\n      userMovement.applyQuaternion(this.camera.quaternion);\r\n      let moveScalar = this.cameraMoveLength*this.cameraMoveLengthMult;\r\n\r\n      // Give some base movement to the camera\r\n      //   This way it doesn't ramp up from 0, but from the minimum movement speed\r\n      if( moveScalar!=0 ){\r\n        let minimumMoveSpeed=0.1;\r\n        moveScalar = moveScalar>0 ? Math.max(minimumMoveSpeed,moveScalar) : Math.min(-minimumMoveSpeed,moveScalar);\r\n        userMovement.normalize().multiply(new Vector3(1,0,1)).multiplyScalar(moveScalar);\r\n        curCamPos.add(userMovement);\r\n        \r\n        this.cameraMovement[0] = Math.abs(this.cameraMovement[0])<this.posRotEasingThreshold ? 0 : this.cameraMovement[0]*this.cameraMovementEase;\r\n        this.cameraMovement[1] = Math.abs(this.cameraMovement[1])<this.posRotEasingThreshold ? 0 : this.cameraMovement[1]*this.cameraMovementEase;\r\n\r\n        if( this.cameraMovement[0] == 0 ){\r\n          this.userInputMoveScalar.x=1;\r\n        }\r\n        if( this.cameraMovement[1] == 0 ){\r\n          this.userInputMoveScalar.y=1;\r\n        }\r\n        \r\n\r\n        this.hasMoved=true;\r\n      }\r\n      \r\n      //curCamPos=curCamPos.clone().multiplyScalar(this.camPosBlend).add(this.cameraPrevPos.clone().multiplyScalar(1-this.camPosBlend));\r\n      // ## When GravitySource exists, apply cameraMovement offset\r\n      //     Cam movement to Vector3( cm[0], 0, cm[1] ), rotated by Quaternion from Euler Normalize Vector (camPos - collider hit)\r\n      //   DO NOT USE CAMERA QUATERNION, movement doesn't align to camera orientation\r\n      curCamPos.y=this.cameraPos.y + this.cameraJumpVelocity;\r\n      if( this.workerActive ){\r\n          this.cameraJumpVelocity=0; // Additive from the worker thread\r\n      }\r\n    }\r\n        \r\n    this.cameraCross=new Vector3(1,0,0).applyQuaternion( this.camera.quaternion );\r\n        \r\n    return curCamPos;\r\n  }\r\n\r\n  /**\r\n   * Updates the camera position based on gravity and collisions.\r\n   *      Delta ( camPos + gravity direction * gravity rate ) > ( Distance camPos to Collider Hit )\r\n   * \r\n   * Handled internally during the main loop, but revealed for external access\r\n   * \r\n   * @param {Vector3} curCamPos - The current camera position.\r\n   * @returns {Vector3} - The updated camera position.\r\n   * @example\r\n   * // Update the camera position based on gravity and collisions.\r\n   * let curPos=this.pxlCamera.updateCamera( this.camera.position );\r\n   * curPos = this.pxlCamera.applyGravity( curPos );\r\n   * \r\n   * // Check if the collider is valid, within the max step height.\r\n   * let dist=this.pxlCamera.checkColliderValid( curPos );\r\n   * \r\n   * if( this.colliderValid ){\r\n   *   // Update the camera position.\r\n   *   this.setTransform( curPos );\r\n   * }\r\n   */\r\n  applyGravity( curCamPos ){\r\n    if( this.canMove && this.hasGravity ){\r\n      //curCamPos=this.checkColliderFail( curCamPos );\r\n      \r\n      let validDist=this.maxStepHeight+this.gravityRate;\r\n      let jumpUpState=(curCamPos.y)<this.nearestFloorHit.y;\r\n      /*if( jumpUpState || this.colliderFail ){\r\n        //curCamPos.x = nPrev.x;\r\n        //curCamPos.y = Math.max( nPrev.y, curCamPos.y-this.gravityRate );\r\n        curCamPos.y = Math.max( 100, curCamPos.y-this.gravityRate );\r\n        //curCamPos.z = nPrev.z;\r\n        if( curCamPos.y == 100 ){//nPrev.y){\r\n          let nPrev=this.nearestFloorHitPrev;\r\n          curCamPos=nPrev.clone();\r\n          this.resetGravity();\r\n        }\r\n        }*/\r\n      if( jumpUpState ){\r\n        let nPrev=this.nearestFloorHitPrev;//.nearestFloorHit;//this.nearestFloorHitPrev;\r\n        //curCamPos.x = nPrev.x;\r\n        curCamPos.y = Math.max( nPrev.y, curCamPos.y);//-this.gravityRate );\r\n        //curCamPos.z = nPrev.z;\r\n        if( curCamPos.y < 0 ){//nPrev.y){\r\n          curCamPos.x=nPrev.x;//clone();\r\n          curCamPos.z=nPrev.z;//clone();\r\n          //this.resetGravity();\r\n          //this.jumpLanding();\r\n        }\r\n      }else{\r\n        curCamPos.y = Math.max( this.nearestFloorHit.y, curCamPos.y - this.gravityRate );\r\n        if( curCamPos.y == this.nearestFloorHit.y && curCamPos.y<this.cameraPrevPos.y ){\r\n          this.jumpLanding();\r\n        }\r\n      }\r\n    }else{\r\n      let distToFloor=curCamPos.distanceTo( this.nearestFloorHit );\r\n      if( distToFloor < this.maxStepHeight){\r\n        curCamPos.y = this.nearestFloorHit.y;\r\n      }else{\r\n        curCamPos=this.cameraPos.clone();\r\n        \r\n        let fallStatus=curCamPos.y > this.nearestFloorHit.y;\r\n        this.hasGravity=fallStatus;\r\n        this.hasMoved = this.hasMoved || fallStatus;\r\n        this.colliderFail= !fallStatus;\r\n        this.workerFunc(\"jumpLanding\");\r\n        //curCamPos=this.checkColliderFail( curCamPos );\r\n      }\r\n    }\r\n    return curCamPos;\r\n  }\r\n\r\n  /**\r\n   * Gets the standing height of the user.\r\n   * Head to Foot only - No landing, gravity, or walk-bounce\r\n   * @returns {number} - The standing height.\r\n   * @example\r\n   * // Get the standing height of the user.\r\n   * let standingHeight=this.pxlCamera.getStandingHeight();\r\n   * console.log( \"getStandingHeight()\", standingHeight );\r\n   */\r\n  getStandingHeight(){\r\n    let retHeight = this.standingHeight;\r\n    if( this.roomStandingHeight.hasOwnProperty(this.pxlEnv.currentRoom) ){\r\n      retHeight = this.roomStandingHeight[this.pxlEnv.currentRoom];\r\n    }\r\n    return retHeight * this.userScale;\r\n  }\r\n  \r\n  /**\r\n   * Gets the user height including jump and walking-bounce offsets.\r\n   * @returns {number} - The user height.\r\n   * @example\r\n   * // Get the user height including jump and walking-bounce offsets.\r\n   * let userHeight=this.pxlCamera.getUserHeight();\r\n   * console.log( \"getUserHeight()\", userHeight );\r\n   */\r\n  getUserHeight(){\r\n    // Add bob to movement to appear as taking steps\r\n    let walkBounceAdd=Math.min(1, Math.abs(this.cameraMovement[1]));\r\n\r\n    this.walkBouncePerc=this.walkBouncePerc>=1?1:this.walkBouncePerc + this.walkBounceEaseIn * walkBounceAdd;\r\n    this.walkBounce+=walkBounceAdd * this.walkBounceRate;\r\n    this.walkBouncePerc=this.walkBouncePerc * this.walkBounceEaseOut + walkBounceAdd;\r\n\r\n    if(this.walkBouncePerc<.03){\r\n      this.walkBouncePerc=0;\r\n      this.walkBounce=0;\r\n      this.walkBounceSeed=Math.random()*2351.3256;\r\n    }\r\n    //let walkBounceOffset=Math.sin(this.walkBounce*.4+this.walkBounceSeed+this.cameraMovement[1]*.2)*this.walkBouncePerc*.3;\r\n    let walkBounceOffset=Math.sin(this.walkBounce+this.walkBounceSeed) * this.walkBouncePerc * this.walkBounceHeight;\r\n    \r\n    let curStandingHeight=this.getStandingHeight() - this.standingHeightGravInfluence + walkBounceOffset;\r\n    \r\n    return curStandingHeight;\r\n  }\r\n  \r\n  \r\n////////////////////////////////////\r\n// Camera Rotational Functions   //\r\n//////////////////////////////////\r\n\r\n  /**\r\n   * Applies mobile rotation to the camera.\r\n   * Mobile currently doesn't support movement in Rooms\r\n   * \r\n   * Currently unused; awaiting mobile-gyroscope implementation\r\n   */\r\n  camApplyMobileRotation(){\r\n    if(this.cameraPose.alpha!=null){ \r\n      let dtor=0.017453292519943278; //   PI/180\r\n      let halfSqrt=2.23606797749979; // Sqrt(5)\r\n      \r\n      let camPoseQuat=new Quaternion();\r\n      \r\n      let a=this.cameraPose.alpha*dtor+this.cameraPose.alphaOffset+2.1;\r\n      let b=this.cameraPose.beta*dtor;\r\n      let g=this.cameraPose.gamma*dtor;\r\n      let viewNormal=new Vector3(0,0,1);\r\n      let poseQuat=new Quaternion();\r\n      let initPoseQuat=new Quaternion(-halfSqrt,0,0,halfSqrt);\r\n      let euler=new Euler();\r\n      euler.set(b,a,-g,'YXZ'); // Device returns YXZ for deviceOrientation\r\n      camPoseQuat.setFromEuler(euler);\r\n      camPoseQuat.multiply(initPoseQuat);\r\n      camPoseQuat.multiply(poseQuat.setFromAxisAngle(viewNormal,-this.cameraPose.orientation));\r\n      camPoseQuat.normalize();\r\n      \r\n      let smoothedQuat=new Quaternion();\r\n      Quaternion.slerp(this.camera.quaternion,camPoseQuat,smoothedQuat,0.35);\r\n\r\n      let cameraLimit = new Euler().setFromQuaternion(smoothedQuat);\r\n      cameraLimit.x = Math.max(-0.95 * Math.PI / 2, Math.min(0.95 * Math.PI / 2, cameraLimit.x));\r\n      smoothedQuat.setFromEuler(cameraLimit);\r\n\r\n      this.camera.setRotationFromQuaternion(smoothedQuat);\r\n      \r\n      this.hasRotated=true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the camera rotation; Look At(Aim) Target\r\n   * \r\n   * Note: Known bug, static camera rotation is based on the current camera rotation\r\n   *         This causes an inate rotation when the camera is moved to a new position\r\n   */  \r\n  updateRoamRotation(){\r\n    if(this.cameraPose.alpha==null){ // ## Should gyro exist, don't run.  But need to allow controlled look around on mobile\r\n      let xGrav=this.pxlDevice.gyroGravity[2];//*this.gravityRate;//*PI;\r\n      \r\n      let viewNormal=new Vector3(0,0,1);\r\n      let poseQuat=new Quaternion();\r\n      // ## Theres a better place for this....\r\n      this.pxlDevice.touchMouseData.velocity.y=Math.min(this.touchSensitivityLimits, Math.max(-this.touchSensitivityLimits, this.pxlDevice.touchMouseData.velocity.y));\r\n      let euler=new Euler();\r\n      let camPoseQuat;\r\n      if( this.pxlDevice.mobile ){\r\n\r\n        let invertLookBool = this.pxlOptions.userSettings.look.mobile.invert || false;\r\n        let invertLook = invertLookBool ? -1 : 1;\r\n\r\n        euler.set(\r\n            this.pxlDevice.touchMouseData.netDistance.y/this.pxlDevice.sH*4 * invertLook,\r\n            this.pxlDevice.touchMouseData.netDistance.x/this.pxlDevice.sW*7 * invertLook + xGrav,\r\n            0,\r\n            'YXZ'\r\n          ); // Device returns YXZ for deviceOrientation\r\n        camPoseQuat=new Quaternion();\r\n        camPoseQuat.setFromEuler(euler);\r\n        camPoseQuat=this.pxlDevice.touchMouseData.initialQuat.clone().multiply(camPoseQuat);\r\n        //camPoseQuat.multiply(poseQuat.setFromAxisAngle(viewNormal,-this.cameraPose.orientation));\r\n      }else{\r\n\r\n        let invertLookBool = this.pxlOptions.userSettings.look.pc.invert || false;\r\n        let invertLook = invertLookBool ? -1 : 1;\r\n\r\n        euler.set(\r\n            this.pxlDevice.touchMouseData.velocity.y*.005 * invertLook,\r\n            this.pxlDevice.touchMouseData.velocity.x*.008 * invertLook + xGrav,\r\n            0,\r\n            'YXZ'// Device returns YXZ for deviceOrientation\r\n          ); \r\n        camPoseQuat=new Quaternion();\r\n        camPoseQuat.setFromEuler(euler);\r\n        //camPoseQuat=this.pxlDevice.touchMouseData.initialQuat.clone().multiply(camPoseQuat);\r\n        camPoseQuat=this.camera.quaternion.clone().multiply(camPoseQuat);\r\n      }\r\n      camPoseQuat.normalize();\r\n      \r\n      let lookAt= new Vector3(0,0,-10).applyQuaternion( camPoseQuat ).add( this.camera.position );\r\n      this.camera.setRotationFromQuaternion(camPoseQuat);\r\n      this.camera.lookAt(lookAt);\r\n      this.camera.up.set( 0,1,0 );\r\n\r\n      this.hasRotated=true;\r\n    }\r\n  }\r\n  \r\n  updateStaticRotation(){\r\n      // this.pxlDevice.touchMouseData.startPos;\r\n      // this.pxlDevice.touchMouseData.endPos;\r\n      // this.pxlDevice.touchMouseData.netDistance;\r\n      let blendOut=1;\r\n      if( this.touchBlender ){\r\n        // Camera rotation easing logic-\r\n        blendOut=Math.min(1, Math.max(0, this.pxlTimer.curMS - this.pxlDevice.touchMouseData.releaseTime ));\r\n        blendOut*=blendOut;\r\n        this.pxlDevice.touchMouseData.netDistance.multiplyScalar(1-blendOut);\r\n        this.touchBlender=blendOut<1;\r\n      }else{\r\n        this.pxlDevice.touchMouseData.netDistance.multiplyScalar(.5);\r\n      }\r\n     let euler=new Euler();\r\n      euler.set(\r\n          (this.pxlDevice.touchMouseData.netDistance.y/this.pxlDevice.sH*2),\r\n          (this.pxlDevice.touchMouseData.netDistance.x/this.pxlDevice.sW*2),\r\n          0,\r\n          'YXZ'\r\n        ); // Device returns YXZ for deviceOrientation\r\n      // Limit Up/Down looking\r\n      let camPoseQuat=new Quaternion().clone( this.camera.quaternion );\r\n      camPoseQuat.setFromEuler(euler);\r\n      camPoseQuat=this.camera.quaternion.clone().multiply(camPoseQuat);\r\n      //camPoseQuat.multiply(poseQuat.setFromAxisAngle(viewNormal,-this.cameraPose.orientation));\r\n      camPoseQuat.normalize();\r\n      \r\n      // let smoothedQuat=new Quaternion();\r\n          \r\n      if( this.touchBlender ){\r\n        camPoseQuat.slerp(this.camera.quaternion.clone(),blendOut).normalize();\r\n      }\r\n      let lookAt= new Vector3(0,0,-10).applyQuaternion( camPoseQuat ).add( this.camera.position );\r\n          \r\n      this.camera.setRotationFromQuaternion(camPoseQuat);//smoothedQuat);\r\n      this.camera.lookAt(lookAt);\r\n      this.camera.up.set( 0,1,0 );\r\n      \r\n      this.hasRotated=true;\r\n    }\r\n\r\n  /**\r\n   * Locks the camera to look at a target.\r\n   * @example\r\n   * // Lock the camera to look at a target.\r\n   * let targetObj = new Object3D();\r\n   * targetObj.position.set( 10, 15, 5 );\r\n   * \r\n   * this.lookAtLockPerc=1;\r\n   * this.pxlCamera.lookAtTarget( targetObj );\r\n   */\r\n  lookAtTargetLock(){\r\n    if(!this.lookAtTargetActive){ return; }\r\n    \r\n    if(this.lookAtTargetActive){\r\n      if(this.lookAtLockFader!=0){\r\n        this.lookAtLockPerc+=(this.lookAtLockFader+Math.min(1,this.pxlDevice.touchMouseData.velocity.length()*.001))*this.lookAtLockFadeRate;\r\n        if(this.lookAtLockPerc<0 || this.lookAtLockPerc>1){\r\n          this.lookAtLockPerc=this.lookAtLockPerc<0?0:1;\r\n          this.lookAtLockFader=0;\r\n        }\r\n        this.lookAtPerc.x = this.lookAtLockPerc;\r\n      }\r\n        \r\n      // If Look At is locked\r\n      //    set the offset in rotation\r\n      //  slerpin some quats!\r\n      if(this.lookAtLockPerc>0){\r\n        let origCamQuat=this.camera.quaternion.clone();\r\n        this.camera.lookAt(this.cameraAimTarget.position);\r\n        let targetCamQuat=this.camera.quaternion.clone();\r\n        if(this.lookAtLockPerc==1){\r\n          this.camera.setRotationFromQuaternion( targetCamQuat );\r\n        }else{\r\n          this.camera.setRotationFromQuaternion( targetCamQuat.slerp(origCamQuat,Math.cos(this.lookAtLockPerc*this.pi)*.5+.5) );\r\n        }\r\n\r\n        this.hasRotated=true;\r\n      }\r\n    }\r\n  }\r\n  \r\n///////////////////////////////////////////\r\n// Render Effects / Quality Functions   //\r\n/////////////////////////////////////////\r\n  /**\r\n   * Triggers a Room Warp / Portal Screen Effect event.\r\n   * This will initiate the visual effect and set the end warp object and target.\r\n   * The actual warp will be run in the `warpCamRun()` function on following frames.\r\n   * @param {number} [visualType=0] - The type of visual effect.\r\n   * @param {Object} [warpObj=null] - The warp object.\r\n   * @param {string} [target='init'] - The target of the warp.\r\n   * @example\r\n   * // Trigger a Room Warp / Portal Screen Effect event.\r\n   * this.pxlCamera.warpEventTriggered( 1, warpObj, 'init' );\r\n   */\r\n  warpEventTriggered( visualType=0, warpObj=null, target='init' ){\r\n    if( !this.warpActive ){\r\n      this.pxlEnv.mapComposerWarpPass.needsSwap=true;\r\n      this.warpType=visualType;\r\n      this.warpObj=warpObj;\r\n      this.warpTarget=target;\r\n      this.warpActive=true;\r\n      this.pxlEnv.initWarpVisual( visualType );\r\n    }\r\n  }\r\n  /**\r\n   * Runs the room warping camera effects.\r\n   */\r\n  warpCamRun(){\r\n    if(this.warpType==0){\r\n      this.setToObj( this.warpObj );\r\n    }else if(this.warpType==1){\r\n      let init=this.warpTarget=='init';\r\n      this.warpToRoom( this.warpObj, init, this.warpTarget );\r\n    }\r\n    this.pxlEnv.setExposure( this.uniformScalars.exposureUniformBase );\r\n    this.warpObj=null;\r\n    this.warpTarget=null;\r\n    this.warpActive=false;\r\n        \r\n  }\r\n\r\n  /**\r\n   * Updates low-quality render events.\r\n   * @private\r\n   */\r\n  lowQualityUpdates(){\r\n    if(this.HDRView){\r\n      let uPitch=new Vector3(0,0,-1).applyQuaternion( this.camera.quaternion );\r\n      let uRot=uPitch.clone().multiply(new Vector3(1,0,1)).normalize();\r\n      let ptr=0.1591549430918955;\r\n      \r\n      // Update shader uniforms -\r\n      this.camRotPitch.set(\r\n        -Math.atan2(uRot.x,uRot.z)*ptr,\r\n        uPitch.y*.5 );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates mid-quality render events.\r\n   * @private\r\n   */\r\n  midQualityUpdates(){\r\n    // Trailing Effects; Fake Motion Blur\r\n    if( this.pxlQuality.settings.motion ){ // Don't run blur pass if the quality setting is under 50%\r\n      let shaderCamRot=new Vector3(0,0,0);\r\n      shaderCamRot.applyQuaternion(this.camera.quaternion);//.add(camOrigQuat).multiplyScalar(.5);\r\n      this.camRotXYZ.multiplyScalar(.8).add( shaderCamRot.multiplyScalar(.2) );\r\n      \r\n      let viewDirection;\r\n      if(this.pxlDevice.mobile){\r\n        let sWHalf = this.pxlDevice.sW*.5\r\n        let sHHalf= this.pxlDevice.sH*.5;\r\n        let  fromWorldPos=new Vector3(0,0,10);\r\n        let  toWorldPos=new Vector3(0,0,10);\r\n        //fromWorldPos.applyMatrix4( this.camera.matrixWorld.clone() ).project(this.camera);\r\n        //toWorldPos.applyMatrix4( this.prevWorldMatrix ).project(this.camera);\r\n        fromWorldPos.applyQuaternion( this.camera.quaternion.clone() ).project(this.camera);\r\n        toWorldPos.applyQuaternion( this.prevQuaternion ).project(this.camera);\r\n      \r\n        fromWorldPos.x=(fromWorldPos.x+1)*sWHalf;\r\n        fromWorldPos.y=-(fromWorldPos.y-1)*sHHalf;\r\n        toWorldPos.x=(toWorldPos.x+1)*sWHalf;\r\n        toWorldPos.y=-(toWorldPos.y-1)*sHHalf;\r\n        viewDirection=toWorldPos.clone().sub(fromWorldPos.clone()).multiplyScalar(.6).multiply(new Vector3(this.pxlDevice.screenRes.x,this.pxlDevice.screenRes.y,0));\r\n        let motionBlurMaxDist=.1;\r\n        if(viewDirection.length>motionBlurMaxDist){\r\n          viewDirection.normalize().multiplyScalar(motionBlurMaxDist);\r\n        }\r\n        \r\n        //viewDirection=this.pxlDevice.touchMouseData.velocityEase.clone().multiplyScalar( Math.max(this.screenRes[1],this.screenRes[0]) );\r\n      }else{\r\n        //viewDirection=this.pxlDevice.touchMouseData.velocityEase.clone().multiplyScalar( Math.max(this.pxlDevice.screenRes.x,this.pxlDevice.screenRes.y) );\r\n        viewDirection=this.pxlDevice.touchMouseData.velocity.clone().multiplyScalar( Math.max(this.pxlDevice.screenRes.x,this.pxlDevice.screenRes.y) );\r\n      }\r\n      let toDir=new Vector2( viewDirection.x, -viewDirection.y);\r\n      let blurDir=new Vector2(0,0).lerpVectors( this.pxlEnv.blurDirPrev, toDir, .85 );\r\n      \r\n      // Update motionBlur direction uniforms -\r\n      this.pxlEnv.blurDirPrev.set( this.pxlEnv.blurDirCur );\r\n      this.pxlEnv.blurDirCur.set( blurDir );\r\n    }\r\n  }\r\n  \r\n///////////////////////////////////////////////////////\r\n// WebSocket Emit for Position and Rotation Changes //\r\n/////////////////////////////////////////////////////\r\n  // Notify Server of Position / Rotation Changes\r\n  /**\r\n   * Emits camera transforms to the server.\r\n   * NETWORKING HAS BEEN REMOVED, you'll need to implement your own server-side logic.\r\n   * @param {Vector3} cameraPos - The camera position.\r\n   * @param {number} standingHeight - The standing height.\r\n   * @param {boolean} [force=false] - Whether to force the emission.\r\n   * @private\r\n   */\r\n  emitCameraTransforms( cameraPos, standingHeight, force=false ){\r\n    this.emit(\"cameraTransforms\",{\r\n      cameraPos:cameraPos,\r\n      standingHeight:standingHeight,\r\n      force:force\r\n    });\r\n\r\n    // Networking scripting removed\r\n  }\r\n  /**\r\n   * Jog the server memory with the current camera position.\r\n   *   Originally the server would use this event to update remote client's positions of the local user.\r\n   *   Also as a server-side sanity check that the user is in the correct \"chat\" room and other data that may have gone stale.\r\n   * You'll need to implement your own usage of this function with server-side logic.\r\n   * CURRENTLY UNUSED\r\n   * @private\r\n   */\r\n  jogServerMemory(){\r\n    let curCamPos=this.cameraPos.clone();\r\n    let standingHeight=this.getUserHeight();\r\n    this.emitCameraTransforms( curCamPos, standingHeight, true );\r\n  }\r\n  \r\n///////////////////////////////////\r\n// Main Camera Update Function  //\r\n/////////////////////////////////\r\n  /**\r\n   * Main update function for the camera.\r\n   */\r\n  updateCamera(){\r\n    //this.updateStaticRotation();\r\n    //let velEaseMag=this.pxlDevice.touchMouseData.velocityEase.length();\r\n    let velEaseMag = this.pxlDevice.touchMouseData.velocity.length();\r\n    this.hasRotated = this.hasRotated || velEaseMag > 0;\r\n    this.camUpdated = this.camUpdated || this.hasRotated;\r\n\r\n    // Fade out touchMouseData, likely to be removed in later versions\r\n    this.pxlDevice.touchMouseData.curFadeOut.multiplyScalar( .7 );\r\n\r\n    // Check if the camera has been updated; step camera values, apply gravity, check for colliders, and interact with objects\r\n    if( this.camUpdated ){ // || this.pxlDevice.touchMouseData.active){// || this.lookAtLockPerc>0 ){ // ## Not using any cam locking yet\r\n      \r\n      // Camera checks are initiating\r\n      this.camUpdated=false;\r\n      \r\n      let didUpdate=false;\r\n        \r\n      this.updateDeviceValues( velEaseMag );\r\n      // TODO : Enable when User class is updated\r\n      //this.pxlUser.localUserTurned=this.pxlDevice.touchMouseData.velocity.length() == 0;\r\n      \r\n      this.prevQuaternion.copy( this.camera.quaternion );\r\n      //this.prevWorldMatrix.set( this.camera.matrixWorld ); // Only used if running higher quality motion blur, not needed\r\n      \r\n      // For Gyro enabled devices; Mobile / Tablet / Surface devices\r\n      // ## Work in progress, waste of calculations acurrently\r\n      //this.camApplyMobileRotation();\r\n\r\n      let cameraPos=this.initFrameCamPosition();\r\n\r\n      // Appy Gravity Height Offset\r\n      let standingHeight=this.getUserHeight();\r\n      \r\n      if( this.pxlOptions.staticCamera ){// Static Camera Mode\r\n        this.hasGravity = false;\r\n        this.hasMoved = false;\r\n        if( this.pxlOptions.allowStaticRotation && this.hasRotated ){ // Static Camera Mode\r\n          this.updateStaticRotation();\r\n          this.camera.updateMatrixWorld();\r\n        }\r\n        this.hasRotated = false;\r\n        return;\r\n      }\r\n      \r\n      // Movement checks\r\n      if( this.hasMoved || this.hasGravity ){//&& this.canMove ){\r\n\r\n        // Check if the camera is in a valid position\r\n        cameraPos=this.colliderCheck( cameraPos );\r\n        \r\n        // If in air, gravity grows \r\n        //   This only updates gravity prior to jump calculations\r\n        // User vertical based calculations are ran in `applyGravity()`\r\n        this.updateGravity( this.pxlTimer.deltaTime );\r\n      \r\n        // When Jumping / Falling, Collion Hit Position and Object are marked as Invalid\r\n        if( !this.colliderValid && !this.colliderValidityChecked ){\r\n          // Check if within maxStepHeight+gravityRate distance of collider hit position\r\n          this.jump=this.checkColliderValid( cameraPos ); // Sets colliderValid \r\n        }else{\r\n          this.jump=0;\r\n        }\r\n        \r\n        this.eventCheckStatus=true;\r\n              \r\n        // Apply gravity rate to current camera position\r\n        cameraPos=this.applyGravity(cameraPos);\r\n\r\n        // Check length of Camera Movement, `**.5` is the square root of the sum of the squares\r\n        // TODO : Implement when User class is updated\r\n        //this.pxlUser.localUserMoved= this.hasGravity || ((this.cameraMovement[0]**2 + this.cameraMovement[1]**2) ** .5) > 0;\r\n        \r\n            \r\n        this.cameraPrevPos=this.cameraPos.clone();\r\n        this.cameraPos=cameraPos.clone();\r\n        didUpdate = this.cameraPos.distanceTo(this.cameraPrevPos) > 0;\r\n        cameraPos.y+=standingHeight+this.cameraJumpHeight;\r\n        this.camera.position.copy(cameraPos);\r\n      }\r\n\r\n      // Performing different rotation logic based on if the camera is in Roam or Static mode\r\n      //   Roaming orients the camera up in Y\r\n      //   Static keeps the camera oriented with Camera Position -to- LookAt cross product\r\n      //    `cross( cross( normalized(LookAt-Pos), Up), Up )`\r\n      if( this.hasRotated && this.canMove ){ // Roam Camera Mode\r\n        this.updateRoamRotation();\r\n        didUpdate = didUpdate || this.hasRotated;\r\n      }else if( this.hasRotated ){ // Static Camera Mode\r\n        this.updateStaticRotation();\r\n        didUpdate = didUpdate || this.hasRotated;\r\n      }\r\n      //this.lookAtTargetLock(); // Camera lookAt target locking\r\n      \r\n      if( didUpdate ){\r\n        this.camera.updateMatrixWorld(); // ## Only needed for lobby geo... Fix\r\n        \r\n        this.emitCameraTransforms( cameraPos, standingHeight );\r\n      }\r\n      \r\n      // Calculations completed, reset flags\r\n      this.hasMoved = false;\r\n      this.hasRotated = false;\r\n\r\n      this.cameraBooted=true;\r\n\r\n    }/*else{\r\n      // TODO : User class still not updated to utilize these\r\n      this.pxlUser.localUserMoved=false;\r\n      this.pxlUser.localUserTurned=false;\r\n    }*/\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  // pxlNav Callbacks\r\n  //   `event` should be of `pxlEnum.CAMERA_EVENT` type\r\n  /**\r\n   * Subscribes to a camera event.\r\n   * @param {string} event - The camera event.\r\n   * @param {function} callback - The callback function.\r\n   * @example\r\n   * // Subscribe to a camera event.\r\n   * this.pxlCamera.subscribe( \"cameraTransforms\", (data) => {\r\n   *  console.log( data );\r\n   * }\r\n   */\r\n  subscribe( event, callback ){\r\n    if( !this.callbacks.hasOwnProperty(event) ){\r\n      this.callbacks[event] = [];\r\n    }\r\n    this.callbacks[event].push( callback );\r\n  }\r\n\r\n  /**\r\n   * Unsubscribes from a camera event.\r\n   * @param {string} event - The camera event.\r\n   * @param {function} callback - The callback function.\r\n   * @returns {boolean} - Whether the callback was found and unsubscribed.\r\n   */\r\n  unsubscribe( event, callback ){\r\n    let hasCallback = false;\r\n    if( this.callbacks.hasOwnProperty(event) ){\r\n      hasCallback = this.callbacks[event].includes(callback);\r\n      if( hasCallback ){\r\n        this.callbacks[event] = this.callbacks[event].filter( cb => cb !== callback );\r\n      }\r\n    }\r\n    return hasCallback;\r\n  }\r\n\r\n  /**\r\n   * Emits a camera event.\r\n   * @private\r\n   */\r\n  emit( event, data ){\r\n    if( this.callbacks.hasOwnProperty(event) ){\r\n      this.callbacks[event].forEach( (callback) => {\r\n        callback( data );\r\n      });\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n\r\n}","//AutoCam\r\n\r\n// Currently, any mobile devices default to autocam because of apability issues for web cam / audio support\r\n//   This limits any projects which don't require network support\r\n\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  Quaternion,\r\n  Euler\r\n} from \"../../libs/three/three.module.min.js\";\r\n\r\n/**\r\n * @namespace pxlAutoCam\r\n * @description Auto camera movement\r\n */\r\nexport class AutoCamera{\r\n  constructor( enabled=false ){\r\n    this.enabled=enabled;\r\n    this.active=false;\r\n    this.mobile=null;\r\n    this.pxlTimer=null;\r\n    this.pxlUtils=null;\r\n    this.pxlDevice=null;\r\n    this.pxlAudio=null;\r\n    this.pxlCamera=null;\r\n    this.pxlEnv=null;\r\n    this.camera=null;\r\n    this.netDistance=new Vector2();\r\n\r\n    this.prevCamChange=0;\r\n    this.nextCamChange=0;\r\n    this.delayRange=[25,45];\r\n\r\n    this.autoCamActive=false;\r\n    this.autoCamMode=0;\r\n    this.autoCamPaths={};\r\n    this.resetAutoCam=true;\r\n    this.autoCamPrevPos=null;\r\n    this.autoCamPrevLookAt=null;\r\n    this.touchBlender=false;\r\n\r\n    this.autoCamId=0;\r\n\r\n    // 0 - Drone Came\r\n    // 1 - Follow User\r\n    // 2 - Circle Group\r\n    this.camMode=0;\r\n    this.curModeCount=0;\r\n\r\n    this.curRoom=\"\";\r\n    this.curRoomIndex=0;\r\n    this.curPath=0;\r\n    this.roomList=[];\r\n    this.pathCounts={};\r\n\r\n    this.forceNewRoom=false;\r\n    this.curRoomCount=0;\r\n\r\n    this.avatarMin=0; // Minimum count of avatars before running avatar cams\r\n    this.avatarValid=false;\r\n    this.curAvatar=null;\r\n\r\n    this.clusterReturn=false;\r\n    this.curCluster=[];\r\n    this.clusterValid=2; \r\n    this.clusterRotation=0;\r\n    this.clusterRotRate=.005;\r\n  }\r\n\r\n  setDependencies( pxlNav ){\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlUtils=pxlNav.pxlUtils;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlAudio=pxlNav.pxlAudio;\r\n    this.pxlCamera=pxlNav.pxlCamera;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n    this.camera=pxlNav.pxlCamera.camera;\r\n  }\r\n  \r\n  // Reset pxlNav clock\r\n  //   Benchmarking steps the timer\r\n  init(){\r\n    this.active=this.enabled || this.mobile;\r\n    this.autoCamActive = this.autoCamActive || this.mobile;\r\n    let {roomList,pathCounts}= this.getAutoCamData();\r\n    this.roomList=roomList;\r\n    \r\n    this.curRoom = this.roomList[0];\r\n    this.pathCounts=pathCounts;\r\n    this.setRoom(false, true);\r\n    this.getNextPath();\r\n    \r\n    this.checkStatus();\r\n  }\r\n  \r\n  step( force=false ){\r\n    if( this.autoCamActive == null || this.active == null ){\r\n      this.autoCamActive = false;\r\n      this.active = false;\r\n      return true;\r\n    }\r\n    if( this.active == false){ // Check active state of Auto Cam\r\n      if( this.autoCamActive ){\r\n        this.updateAutoCamera();\r\n      }else{\r\n        return true; // If not active, run default Camera Step\r\n      }\r\n    }\r\n    \r\n    // Check Mode Change Status\r\n    if( ( this.pxlTimer.curMS >= this.nextCamChange || force ) && this.active && !this.pxlDevice.touchMouseData.active){\r\n      if( !force || !this.enabled ){\r\n        let triggerMult= this.checkCamMode();\r\n        this.setNextTrigger( triggerMult );\r\n      }\r\n      \r\n      this.curAvatar=0;\r\n      this.camera.up.set( 0,1,0 );\r\n      \r\n      this.pxlDevice.touchMouseData.netDistance.multiplyScalar(0);\r\n    \r\n      if( this.camMode == 1 ){\r\n        this.setCamMode(0);\r\n      }else if( this.camMode == 2 ){\r\n        this.setCamMode(0);\r\n      }else{\r\n        this.curCluster=[];\r\n        this.stepDroneCam();\r\n      }\r\n      this.setAutoCamMode( this.camMode );\r\n    }\r\n    \r\n    \r\n    // Run AutoCam Mode Step\r\n    this.updateAutoCamera();\r\n    \r\n    this.applyTouchRotate();\r\n    return false;\r\n  }\r\n\r\n\r\n///////////////////////////////\r\n// Auto Cam Mode Functions  //\r\n/////////////////////////////\r\n  \r\n  checkCamMode(){\r\n    let ret=1;\r\n    let prevCamMode=this.camMode;\r\n    this.camMode=0;\r\n    if( !this.enabled ){\r\n      return ret;\r\n    }\r\n    if( !this.active ){ return ret; }\r\n    \r\n    // Insert Mode Logic --\r\n    \r\n    if( this.camMode!=prevCamMode && this.camMode==0){\r\n      this.forceNewRoom=true;\r\n    }\r\n    return ret;\r\n  }\r\n  \r\n  setCamMode( autoCamData ){\r\n    let timeMult=1;\r\n    if( autoCamData.type == 1 ){\r\n      timeMult= 1;\r\n    }else if( autoCamData.type == 2 ){\r\n      timeMult= 1;\r\n    }else{\r\n      this.camMode=0;\r\n      this.forceNewRoom=true;\r\n    }\r\n    this.step( true );\r\n  }\r\n  \r\n  \r\n/////////////////////////////////\r\n// Auto Cam & Room Functions  //\r\n///////////////////////////////\r\n  \r\n  stepDroneCam(){\r\n    let unique=true;\r\n    let randDelay= Math.random( this.nextCamChange );\r\n    let camPathCount= this.pathCounts[ this.pxlEnv.currentRoom ] ;\r\n    if( this.curRoomCount >= camPathCount*2 ){\r\n      this.forceNewRoom=true;\r\n    }\r\n    if( randDelay<.3 || this.forceNewRoom ){\r\n      this.setRoom();\r\n      unique=false;\r\n    }\r\n    this.curRoomCount+=1;\r\n    \r\n    this.getNextPath( unique );\r\n  }\r\n  \r\n  setRoom( setNextRoom=false, init=false ){\r\n    if( this.active || this.autoCamActive ){\r\n      let nextRoom=this.curRoomIndex;\r\n      let roomCount=this.roomList.length;\r\n      if( !this.pxlEnv.postIntro ){\r\n        nextRoom=0;\r\n      }else if(!init){\r\n        if( setNextRoom ){\r\n          nextRoom=(nextRoom+1)%roomCount;\r\n        }else{\r\n          nextRoom=Math.floor( Math.random() * roomCount );\r\n          if( nextRoom == this.curRoomIndex){\r\n            nextRoom=(nextRoom+1)%roomCount;\r\n          }\r\n        }\r\n      }\r\n      \r\n      this.curRoomIndex=nextRoom;\r\n      \r\n      if( this.curRoom != this.roomList[ nextRoom ] ){\r\n        this.curRoom = this.roomList[ nextRoom ];\r\n        this.forceNewRoom=false;\r\n        this.curRoomCount=0;\r\n        this.pxlCamera.warpEventTriggered( 1, this.curRoom, 'init' );\r\n      }\r\n    }\r\n  }\r\n  \r\n  setNextTrigger( timeMult=1 ){\r\n    let randDelay= Math.random( this.nextCamChange );\r\n    randDelay = (this.delayRange[1]-this.delayRange[0])*randDelay + this.delayRange[0];\r\n    this.nextCamChange = this.pxlTimer.curMS + randDelay*timeMult;\r\n  }\r\n  \r\n  getNextPath( unique=true, dir=1 ){\r\n    if( this.enabled && this.active && this.autoCamPaths.hasOwnProperty( this.pxlEnv.currentRoom ) ){\r\n      let camPathCount= this.autoCamPaths[ this.pxlEnv.currentRoom ].length ;\r\n      this.curPath = (this.curPath+dir) % camPathCount;\r\n      if( unique && dir==0 ){\r\n        let path= Math.random( this.nextCamChange );\r\n        path= Math.floor( path * this.autoCamPaths[ this.pxlEnv.currentRoom ].length );\r\n        \r\n        if( this.curPath==path ){\r\n          path = (path+1) % camPathCount;\r\n        }\r\n        \r\n        this.curPath = path;\r\n      }else{\r\n        this.curPath = this.curPath<0 ? camPathCount-1 : this.curPath;\r\n        this.setNextTrigger( 1 );\r\n      }\r\n      this.setAutoCamPath( this.curPath );\r\n    }\r\n  }\r\n  \r\n\r\n\r\n////////////////////////////\r\n// Auto-Camera Function  //\r\n//////////////////////////\r\n\r\n  checkStatus(){\r\n    if( this.autoCamActive || this.pxlDevice.mobile || this.active ){\r\n      this.toggleAutoCam(true);\r\n    }\r\n  }\r\n\r\n  preAutoCamToggle(){\r\n    //if(this.enabled == false){ // Check active state of Auto Cam\r\n      if( !this.autoCamActive ){\r\n        if( this.pxlCamera.colliderCurObjHit == \"AudioTrigger_2\" ){\r\n          this.pxlCamera.proximityScaleTrigger=true;\r\n          this.exposureShiftActive=true;\r\n        }\r\n      }\r\n      /*if( this.pxlEnv.pxlQuality.detailLimitOverride ){\r\n        this.enabled=!this.enabled;\r\n        this.active=this.enabled;\r\n        this.autoCamActive=this.enabled;\r\n      }*/\r\n      this.toggleAutoCam();\r\n    //}\r\n  }\r\n  \r\n  setAutoCamMode( curMode=0 ){\r\n    this.autoCamMode=curMode;\r\n    if( curMode==1 ){\r\n      this.resetAutoCam=true;\r\n    }\r\n  }\r\n\r\n  // For auto cam swapping\r\n  setPosQuat(pos, quat){ // Vector3, Vector4\r\n    this.camera.quaternion.copy( quat );\r\n    this.camera.position.copy( pos );\r\n    this.pxlCamera.updateCameraMatrices();\r\n    this.pxlCamera.camUpdated=true; // Forces next frame update\r\n  }\r\n    \r\n  toggleAutoCam( setValue=null, dir=1 ){\r\n    this.pxlEnv.fogMult.x = 1;\r\n    if( this.autoCamPaths[ this.pxlEnv.currentRoom ] ){\r\n      this.curRoom=this.pxlEnv.currentRoom;\r\n      let camPathCount=this.autoCamPaths[ this.pxlEnv.currentRoom ].length;\r\n      if( isNaN(this.autoCamId) ){\r\n        this.autoCamId=camPathCount-1;\r\n      }\r\n      let origActive=this.autoCamActive;\r\n\r\n      this.autoCamActive= setValue==null && camPathCount>0 ? !this.autoCamActive : setValue;\r\n      this.autoCamActive = this.mobile || this.autoCamActive;\r\n      if( !origActive && this.autoCamActive ){\r\n        this.netDistance= new Vector2().copy( this.pxlDevice.touchMouseData.netDistance );\r\n      }\r\n      this.pxlDevice.touchMouseData.netDistance.multiplyScalar(0);\r\n      \r\n      if( this.autoCamActive ){\r\n        this.pxlCamera.resetGravity(); // Set settings for when Auto-Camera cancels\r\n        \r\n        this.autoCamId = (this.autoCamId+dir) % camPathCount; // Step the auto cam path\r\n        this.autoCamId = this.autoCamId < 0 ? camPathCount-1 : this.autoCamId;\r\n            \r\n        let curAutoCamGroup = this.autoCamPaths[ this.pxlEnv.currentRoom ][this.autoCamId];\r\n        // Path Duration, Point & Look At curve point arrays\r\n        this.totalLoopDuration = curAutoCamGroup.position.userData.duration;\r\n        \r\n        try{\r\n          this.autoCamPositions = curAutoCamGroup.position.geometry.attributes.position;\r\n          this.autoCamLookAt = curAutoCamGroup.lookAt.geometry.attributes.position;\r\n          if( curAutoCamGroup.up ){\r\n            this.autoCamUp=curAutoCamGroup.up.geometry.attributes.position;\r\n          }else{\r\n            this.autoCamUp=null;\r\n            this.camera.up.set( 0,1,0 );\r\n          }\r\n          // Curve count\r\n          this.numControlPoints = this.autoCamPositions.array.length/3;\r\n          \r\n          // Initial time, offset in negative by a random length of the duration\r\n          this.autoCamStartTime = this.pxlTimer.curMS - (this.totalLoopDuration*Math.random());\r\n        }catch(err){}\r\n        \r\n      }else{\r\n        this.setPosQuat(this.pxlCamera.cameraPrevPos.clone(), this.pxlCamera.prevQuaternion.clone());\r\n                \r\n        this.pxlDevice.touchMouseData.netDistance.copy( this.netDistance );\r\n      }\r\n    }\r\n  }\r\n  prevNextAutoCam(dir=1, manual=false){\r\n    // If auto cam active, Left & Right changes current auto cam path\r\n    if( this.autoCamActive ){\r\n      if( this.enabled && this.active && !manual ){\r\n        this.nextCamChange = this.pxlTimer.curMS;\r\n      }else{\r\n        this.toggleAutoCam( true, dir );\r\n      }\r\n    }\r\n  }\r\n  setAutoCamPath( path=0 ){\r\n    if( this.autoCamActive ){\r\n      this.autoCamId=path;\r\n      this.toggleAutoCam( true, 0 );\r\n    }\r\n  }\r\n  getAutoCamData(){\r\n    let roomList=Object.keys( this.autoCamPaths );\r\n    let pathCounts={};\r\n    roomList.forEach( (r)=>{\r\n      pathCounts[r]=this.autoCamPaths[r].length;\r\n    });\r\n    return {roomList, pathCounts};\r\n  }\r\n\r\n  getAutoCamValueFromCurve(array, curIndex, t_lerp, print=false) {\r\n    // Starting Point\r\n    let x = array[curIndex*3];\r\n    let y = array[curIndex*3 + 1];\r\n    let z = array[curIndex*3 + 2];\r\n    \r\n    // Ending point\r\n    let nextIndex = (curIndex + 1) % (this.numControlPoints);\r\n    let x2 = array[nextIndex*3];\r\n    let y2 = array[nextIndex*3 + 1];\r\n    let z2 = array[nextIndex*3 + 2];\r\n    \r\n    // Lerp\r\n    let pos= new Vector3(x,y,z);//.multiplyScalar(-1);\r\n    let nextPos= new Vector3(x2,y2,z2);//.multiplyScalar(-1);\r\n\r\n    pos.lerp(nextPos,t_lerp);\r\n    \r\n\r\n    return pos;\r\n    \r\n  } \r\n  \r\n  updateAutoCamera(){\r\n    \r\n    // TODO : Elevate to active check for running updateAutoCam\r\n    if( !this.autoCamPositions || !this.autoCamPositions.array ){\r\n      return;\r\n    }\r\n    \r\n    // Percent travel along path\r\n    let ms = (this.pxlTimer.curMS - this.autoCamStartTime) % this.totalLoopDuration;\r\n\r\n    // Points to blend\r\n    let t = ms/this.totalLoopDuration;\r\n    t *= this.numControlPoints-1;\r\n    let curIndex = Math.floor(t);\r\n    let t_lerp = t - curIndex;\r\n    \r\n    // Current Position math-   \r\n    let cameraPos = this.getAutoCamValueFromCurve(this.autoCamPositions.array, curIndex, t_lerp, false);\r\n    this.camera.position.copy(cameraPos);\r\n\r\n    \r\n    // -- -- -- -- -- -- //\r\n    // Camera Look At Calculations\r\n    // Current Look At math-   \r\n    let camLookAt = this.getAutoCamValueFromCurve(this.autoCamLookAt.array, curIndex, t_lerp);\r\n    //camLookAt=cameraPos.clone().add( camLookAt.clone().sub( cameraPos ) );\r\n    this.camera.lookAt(camLookAt);\r\n    \r\n    if( this.autoCamUp ){\r\n      let camUp = this.getAutoCamValueFromCurve(this.autoCamUp.array, curIndex, t_lerp);\r\n      camUp=camUp.sub(cameraPos).normalize();\r\n      this.camera.up.copy( camUp  );\r\n    }\r\n    \r\n    /*let camPoseQuat=new Quaternion();\r\n    let euler=new Euler();\r\n    euler.set(0,0,180,'YXZ'); // Device returns YXZ for deviceOrientation\r\n    camPoseQuat.setFromEuler(euler);\r\n    camPoseQuat.normalize();\r\n    camPoseQuat.multiply( this.camera.quaternion );\r\n    this.camera.setRotationFromQuaternion(camPoseQuat);*/\r\n  }\r\n  \r\n  applyTouchRotate(){\r\n    // this.pxlDevice.touchMouseData.startPos;\r\n    // this.pxlDevice.touchMouseData.endPos;\r\n    // this.pxlDevice.touchMouseData.netDistance;\r\n    let blendOut=1;\r\n    if( this.touchBlender ){\r\n      // Camera rotation easing logic-\r\n      blendOut=Math.min(1, Math.max(0, this.pxlTimer.curMS - this.pxlDevice.touchMouseData.releaseTime ));\r\n      blendOut*=blendOut;\r\n      this.pxlDevice.touchMouseData.netDistance.multiplyScalar(1-blendOut);\r\n      this.touchBlender=blendOut<1;\r\n    }else{\r\n      this.pxlDevice.touchMouseData.netDistance.multiplyScalar(.5);\r\n    }\r\n   let euler=new Euler();\r\n    euler.set(\r\n      (this.pxlDevice.touchMouseData.netDistance.y/this.pxlDevice.sH*2),\r\n      (this.pxlDevice.touchMouseData.netDistance.x/this.pxlDevice.sW*2),\r\n      0,\r\n      'YXZ'); // Device returns YXZ for deviceOrientation\r\n    // Limit Up/Down looking\r\n    let camPoseQuat=new Quaternion().clone( this.camera.quaternion );\r\n    camPoseQuat.setFromEuler(euler);\r\n    camPoseQuat=this.camera.quaternion.clone().multiply(camPoseQuat);\r\n    //camPoseQuat.multiply(poseQuat.setFromAxisAngle(viewNormal,-this.cameraPose.orientation));\r\n    camPoseQuat.normalize();\r\n    \r\n    // let smoothedQuat=new Quaternion();\r\n        \r\n    if( this.touchBlender ){\r\n      camPoseQuat.slerp(this.camera.quaternion.clone(),blendOut).normalize();\r\n    }\r\n    let lookAt= new Vector3(0,0,-10).applyQuaternion( camPoseQuat ).add( this.camera.position );\r\n        \r\n    this.camera.setRotationFromQuaternion(camPoseQuat);//smoothedQuat);\r\n    this.camera.lookAt(lookAt);\r\n    this.camera.up.set( 0,1,0 );\r\n  }\r\n}","\r\nexport class MusicUtils{\r\n  constructor( ){\r\n    this.audioObject=null;\r\n  }\r\n}\r\n/*\r\nfunction getPeaksAtThreshold(data, threshold) {\r\n  var peaksArray = [];\r\n  var length = data.length;\r\n  for(var i = 0; i < length;) {\r\n    if (data[i] > threshold) {\r\n      peaksArray.push(i);\r\n      // Skip forward ~ 1/4s to get past this peak.\r\n      i += 10000;\r\n    }\r\n    i++;\r\n  }\r\n  return peaksArray;\r\n}\r\nFiltering\r\nHow simple is it to transform our song with the Web Audio API? Here’s an example that passes the song through a low-pass filter and returns it.\r\n\r\n// Create offline context\r\nvar offlineContext = new OfflineAudioContext(1, buffer.length, buffer.sampleRate);\r\n\r\n// Create buffer source\r\nvar source = offlineContext.createBufferSource();\r\nsource.buffer = buffer;\r\n\r\n// Create filter\r\nvar filter = offlineContext.createBiquadFilter();\r\nfilter.type = \"lowpass\";\r\n\r\n// Pipe the song into the filter, and the filter into the offline context\r\nsource.connect(filter);\r\nfilter.connect(offlineContext.destination);\r\n\r\n// Schedule the song to start playing at time:0\r\nsource.start(0);\r\n\r\n// Render the song\r\nofflineContext.startRendering()\r\n\r\n// Act on the result\r\nofflineContext.oncomplete = function(e) {\r\n  // Filtered buffer!\r\n  var filteredBuffer = e.renderedBuffer;\r\n};\r\n\r\n\r\n\r\n\r\n// Function used to return a histogram of peak intervals\r\n\r\nfunction countIntervalsBetweenNearbyPeaks(peaks) {\r\n  var intervalCounts = [];\r\n  peaks.forEach(function(peak, index) {\r\n    for(var i = 0; i < 10; i++) {\r\n      var interval = peaks[index + i] - peak;\r\n      var foundInterval = intervalCounts.some(function(intervalCount) {\r\n        if (intervalCount.interval === interval)\r\n          return intervalCount.count++;\r\n      });\r\n      if (!foundInterval) {\r\n        intervalCounts.push({\r\n          interval: interval,\r\n          count: 1\r\n        });\r\n      }\r\n    }\r\n  });\r\n  return intervalCounts;\r\n}\r\n*/","/**\r\n * @namespace pxlAudio\r\n * @description Audio handling\r\n */\r\n\r\n// Audio\r\nimport { Vector3, Vector4 } from \"../../libs/three/three.module.min.js\";\r\n\r\nconst SoundLibrary = [\r\n\t\"./sounds/bits.ogg\",\r\n\t\"./sounds/bonus-2.ogg\",\r\n\t\"./sounds/bonus-3.ogg\",\r\n\t\"./sounds/BushesBakedBeans.mp3\",\r\n\t\"./sounds/Cute-Chime-1.mp3\",\r\n\t\"./sounds/funny-blunder.ogg\",\r\n\t\"./sounds/magic-coins.ogg\",\r\n\t\"./sounds/new-message-4.ogg\",\r\n\t\"./sounds/new-message-5.ogg\",\r\n\t\"./sounds/positive-game-sound-3.ogg\",\r\n\t\"./sounds/positive-game-sound-4.ogg\",\r\n\t\"./sounds/positive-win-game-sound-4.ogg\",\r\n\t\"./sounds/the-award-2.ogg\"\r\n];\r\n\r\nexport class Audio{\r\n  constructor(){\r\n    this.pxlTimer=null;\r\n    this.pxlVideo=null;\r\n    this.pxlDevice=null;\r\n    this.pxlEnv=null;\r\n    this.pxlGuiDraws=null;\r\n    this.pxlSocket=null;\r\n        \r\n    this.active=false;\r\n    this.audioTimer=new Vector3(0,0,0);\r\n    this.audioEq=new Vector4(0,0,0,0);\r\n    this.audioWorker=null;\r\n    this.audioProcessor=null;\r\n        \r\n    this.djUrlSource=\"//\"; // URL to the audio source\r\n    this.djMuted=false;\r\n    //this.djVolumeMute=null;\r\n    this.djAudioVolume=0;\r\n    this.djAudioVolumeMax=.65; // Initial Max value\r\n    this.djAudioVolumeMin=.25; // Initial Min/Starting value\r\n    this.djAudioVolumeScalar=.25; // Initial Min/Starting value\r\n    \r\n    this.djAudioObj=null;\r\n    this.djTimecodeObj=null;\r\n    this.djVolumeParentObj=null;\r\n    this.djVolumeObj=null;\r\n        \r\n    this.roomAudioStopped=true;\r\n    \r\n    this.videoStreamObjects=[];\r\n        \r\n    this.colliderVolActive=false;\r\n    \r\n    this.isVideoObject=false;\r\n    this.activeObject=null;\r\n    \r\n    \r\n    this.fadeActive=false;\r\n    this.fadeAdjustRate=.02;\r\n    this.fadeDir=0;\r\n    this.fadePerc=0;\r\n    \r\n    this.audioContext = null;\r\n  }\r\n  \r\n  setDependencies( pxlNav ){\r\n    this.pxlTimer=pxlNav.pxlTimer;\r\n    this.pxlVideo=pxlNav.pxlVideo;\r\n    this.pxlDevice=pxlNav.pxlDevice;\r\n    this.pxlEnv=pxlNav.pxlEnv;\r\n    this.pxlGuiDraws=pxlNav.pxlGuiDraws;\r\n    this.pxlSocket=pxlNav.pxlSocket;\r\n  }\r\n\r\n  init(){\r\n    this.active=true;\r\n    }\r\n    postBoot(){\r\n        if( this.djAudioObj ){\r\n            if(  this.pxlEnv.pxlAutoCam.enabled ){\r\n                this.djAudioVolumeMax=1;\r\n                this.djAudioVolumeMin=0;\r\n            }else if( this.pxlEnv.mobile ){\r\n                let pa= this;\r\n                let avm=this.djAudioVolumeMax;\r\n                let enter=document.getElementById(\"guiMobileWelcomeButton\");\r\n                function audioClickMonitor(e){\r\n                    setTimeout( ()=>{\r\n                        pa.djAudioVolume=0;\r\n                        pa.djAudioVolumeMax=avm;\r\n                        pa.djAudioVolumeMin=0;\r\n                        pa.djAudioObj.byScript=true;\r\n                        pa.djAudioObj.volume=0;\r\n                        audioObj.play().then(()=>{\r\n                            pa.djPlayerMuteToggle(false);\r\n                            pa.setFadeActive( .5 );\r\n                        });\r\n                        enter.removeEventListener('click', audioClickMonitor);\r\n                        enter.removeEventListener('touchstart', audioClickMonitor);\r\n                    },500);\r\n                }\r\n                enter.addEventListener(\"click\", audioClickMonitor);\r\n                enter.addEventListener(\"touchstart\", audioClickMonitor);\r\n            }\r\n            \r\n            this.djAudioVolume= this.pxlEnv.enabled ? 0 : this.djAudioVolumeMin;\r\n            this.djAudioObj.volume= this.pxlEnv.enabled ? 0 : this.djAudioVolumeMin;\r\n            this.djPlayerMuteToggle(false);\r\n            this.djPlayerAdjustVolume({});\r\n            this.djPlayerSetSliderGui();\r\n            \r\n            let audioObj=this.djAudioObj;\r\n            audioObj.setAttribute(\"autoplay\", true);\r\n            \r\n            let tmpThis=this;\r\n            this.djAudioObj.addEventListener(\"volumechange\", (e)=>{\r\n                tmpThis.djPlayerSetSliderGui();\r\n            }, true);\r\n        }\r\n    }\r\n    \r\n  start(){}\r\n  \r\n  step(){\r\n    if(this.djAudioObj){\r\n      if(this.djAudioObj.paused){\r\n        this.djAudioObj.play().catch((err)=>{});\r\n                this.djAudioObj.muted=this.djMuted || !this.roomAudioStopped;\r\n      }\r\n    }\r\n        // Set music volume on the DJ Audio Object\r\n        this.fadeAudioEvent( );\r\n  }\r\n    isPaused(){\r\n        let status = true;\r\n    if(this.djAudioObj){\r\n      status = this.djAudioObj.paused;\r\n    }\r\n        return status;\r\n    }\r\n    \r\n  pausePlayback(){\r\n    this.active=this.pxlTimer.active;\r\n        \r\n        if( this.active ){\r\n            this.play();\r\n        }else{\r\n            this.stop();\r\n        }\r\n  }\r\n  \r\n    initPlay(){\r\n        if( this.pxlVideo.canUnmute( 'dj' ) && !this.isPaused() ){\r\n            this.djPlayerMuteToggle(false);\r\n            this.setFadeActive( 1 );\r\n            \r\n            if( this.pxlDevice.mobile ){\r\n                this.pxlGuiDraws.toggleIcon(this.pxlGuiDraws.hudIcons.musicIcon, !this.djMuted, true );\r\n            }\r\n        }\r\n    }\r\n    \r\n  play(){\r\n    this.active=true;\r\n        \r\n        if( this.isVideoObject ){\r\n            this.pxlVideo.setVolume( \"dj\", this.djAudioVolume );\r\n            this.pxlVideo.setMuted( \"dj\", this.djMuted );\r\n        }else{\r\n            //loadStreamPromise();\r\n            \r\n            this.djAudioObj.byScript=true;\r\n            let djDevice=this.djAudioObj;\r\n            let djSource=djDevice.children[0];\r\n            djSource.setAttribute(\"src\",this.djUrlSource);\r\n            setTimeout( ()=>{\r\n                djDevice.load();\r\n                setTimeout( ()=>{\r\n                    djDevice.volume=this.djAudioVolume;\r\n                    //djDevice.play();\r\n                    djDevice.muted=this.djMuted || !this.roomAudioStopped;\r\n                    if( djDevice.paused ){\r\n                        djDevice.play();\r\n                    }\r\n                },20);\r\n            },20);\r\n        }\r\n  }\r\n  \r\n  stop(){\r\n    this.active=false;\r\n        \r\n        if( this.isVideoObject ){\r\n            this.pxlVideo.setMuted( \"dj\", true );\r\n        }else{\r\n            let djDevice=this.djAudioObj;\r\n            let djSource=djDevice.children[0];\r\n            djSource.setAttribute(\"src\",\"\");\r\n            djDevice.pause();\r\n            setTimeout( ()=>{\r\n                djDevice.load();\r\n            },20);\r\n        }\r\n  }\r\n    \r\n  \r\n    djBuildPlayer(){\r\n        \r\n    this.djAudioObj=document.getElementById(\"djStream\");\r\n    this.djVolumeParentObj=document.getElementById(\"djPlayerVolumeParent\");\r\n    this.djVolumeObj=document.getElementById(\"djPlayerVolume\");\r\n    \r\n    this.djAudioObj.byScript=false;\r\n    this.djAudioObj.volume=0;\r\n    this.djVolumeObj.style.width=\"0%\";\r\n        \r\n    let tmpThis=this;\r\n        this.pxlDevice.objectPercList.push(\"djPlayerVolume\");\r\n        this.pxlDevice.objectPercList.push(\"djPlayerVolumeParent\");\r\n        this.pxlDevice.objectPercFuncList[\"djPlayerVolumeParent\"]=(e)=>{tmpThis.djPlayerAdjustVolume(e);};\r\n        \r\n    \r\n    this.djVolumeParentObj.down=false;\r\n        // I think iPhone emits mouse down events, I'll need to test this\r\n        this.djVolumeParentObj.addEventListener(\"mousedown\", (e)=>{tmpThis.djVolumeParentObj.down=true;tmpThis.djPlayerAdjustVolume(e);});\r\n        this.djVolumeParentObj.addEventListener(\"mousemove\", (e)=>{tmpThis.djPlayerAdjustVolume(e);});\r\n        this.djVolumeParentObj.addEventListener(\"mouseup\", (e)=>{tmpThis.djVolumeParentObj.down=false;});\r\n            \r\n        if( this.pxlDevice.mobile ){\r\n            this.djVolumeParentObj.style.width= \"30vw\";\r\n            this.djVolumeParentObj.addEventListener(\"touchstart\", (e)=>{tmpThis.djVolumeParentObj.down=true;}, {passive : true});\r\n            this.djVolumeParentObj.addEventListener(\"touchmove\", (e)=>{tmpThis.djPlayerAdjustVolume(e);}, {passive : true});\r\n            this.djVolumeParentObj.addEventListener(\"touchend\", (e)=>{tmpThis.djVolumeParentObj.down=false;}, {passive : true});\r\n        }\r\n        this.djAudioObj.muted=true;\r\n\r\n        this.prepAudioProcessor();\r\n    }\r\n    \r\n    prepAudioProcessor(){\r\n        /*\r\n        \r\n        // If its not working, likely IE or Sufari\r\n        //   we told em to use chrome, but chances are iPhone users will still use Sufari\r\n        if( this.audioContext.audioWorklet && AudioWorkletNode ){\r\n            await this.audioContext.audioWorklet.addModule('white-noise-processor.js')\r\n            const whiteNoiseNode = new AudioWorkletNode( this.audioContext, 'white-noise-processor' )\r\n            whiteNoiseNode.connect( this.audioContext.destination )\r\n            \r\n            \r\n  \r\n            var audioInputCtx = new AudioContext();\r\n            var audioDataBufferSeconds=1;\r\n            var audioDataCtx = new OfflineAudioContext(1,audioDataBufferSeconds*44100,44100);\r\n            var analyser;\r\n            var filter = this.audioContext.createBiquadFilter();\r\n            filter.type = 5;\r\n            filter.frequency.value = 440;\r\n            filter.Q.value = 5;\r\n            filter.gain.value = 0;\r\n\r\n\r\n            let audioDeviceList={};\r\n            let audioForm=null; \r\n            let mediaStreamSource=null;\r\n\r\n            function connectAudioDeviceData(e){\r\n                if(this.audioContext.state == \"suspended\"){\r\n                    this.audioContext.resume();\r\n                }\r\n                analyser = this.audioContext.createAnalyser();\r\n                analyser.smoothingTimeConstant = 0;\r\n                analyser.fftSize = 512;\r\n\r\n            //.captureStream().createWorkerProcessor();\r\n\r\n                function(stream) {\r\n                    window.stream=stream;\r\n                    \r\n                    mediaStreamSource = this.audioContext.createMediaStreamSource(window.stream);\r\n                    \r\n                    var scriptNode = this.audioContext.createScriptProcessor(2048,1,1);\r\n                    var bufferSource = this.audioContext.createBufferSource();\r\n                    \r\n                    scriptNode.connect( this.audioContext.destination );\r\n                    //bufferSource.connect( this.audioContext.destination );\r\n                    \r\n                    mediaStreamSource.connect(filter);\r\n                    filter.connect(analyser);\r\n                    \r\n                }\r\n            }  \r\n                \r\n        }\r\n        */\r\n    }\r\n    \r\n    stepAudioProcessor(){\r\n    }\r\n    recieveAudioProcessor( data ){\r\n        //console.log( data );\r\n    }\r\n        \r\n    // ## Intended for Avatar Audio manipulation\r\n    //      Unused currently\r\n  buildRemoteAudioMixer(pID, domObj){\r\n    // Gen audio mixes for bineural\r\n    // ## Cut this down should FPS be hit\r\n        if( false && domObj instanceof HTMLMediaElement ){\r\n            // for cross browser\r\n            if(this.audioCtx==null){\r\n              const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n              this.audioCtx = new AudioContext();\r\n            }\r\n            // volume\r\n            var gainNode = this.audioCtx.createGain();\r\n\r\n            // panning\r\n            //const panner = new StereoPannerNode(this.audioCtx, {pan: 0});\r\n            var panner = this.audioCtx.createStereoPanner();\r\n            \r\n            var curTrack = this.audioCtx.createMediaElementSource(domObj);\r\n            \r\n            // connect to ouput\r\n            curTrack.connect(panner);\r\n            panner.connect(gainNode);\r\n            gainNode.connect(this.audioCtx.destination);\r\n            \r\n            let ret={};\r\n            ret.dest=this.audioCtx.destination;\r\n            ret.ctx=curTrack;\r\n            ret.gainer=gainNode;\r\n            ret.panner=panner;\r\n            //this.jmaActiveBinaural[pID]=ret;    \r\n    }\r\n        return false;\r\n  }\r\n        \r\n    loadStreamPromise(){\r\n        let djDevice=this.djAudioObj;\r\n    return new Promise( (resolve, reject)=>{\r\n            this.djAudioObj.byScript=true;\r\n            let djSource=djDevice.children[0];\r\n            djSource.setAttribute(\"src\",this.djUrlSource);\r\n            djDevice.load();\r\n            //djDevice.play();\r\n            djDevice.muted=this.djMuted || !this.roomAudioStopped ;\r\n    }).then( ()=>{\r\n        }).catch( (err)=>{\r\n            console.log(\"error source\");\r\n        });\r\n    }\r\n    \r\n    djPlayerSetSliderGui(){\r\n        if(this.djAudioObj.byScript || !this.pxlEnv.postIntro || this.pxlEnv.pxlAutoCam.enabled ){\r\n            this.djAudioObj.byScript=false;\r\n        }else{\r\n            this.fadeActive=false;\r\n            this.djAudioVolumeMax=this.djAudioVolume;//tmpThis.djAudioObj.volume;\r\n            this.djAudioVolumeMin=this.djAudioVolume*this.djAudioVolumeScalar;//tmpThis.djAudioObj.volume*.1;\r\n        }\r\n        this.djVolumeObj.style.width=(this.djAudioVolume*100*(~~!this.djMuted))+\"%\";\r\n    }\r\n    \r\n    \r\n  djPlayerAdjustVolume(e){\r\n    if(this.djVolumeParentObj.down || ( this.djVolumeParentObj.down && e.touches ) ){\r\n      let pw= this.djVolumeParentObj.offsetWidth;\r\n      let offset=0;\r\n      if( e.touches ){\r\n        offset = this.pxlDevice.objectPerc.percX;\r\n      }else{\r\n        offset = e.offsetX/pw;\r\n      }\r\n\r\n      let perc=Math.max(0, Math.min(1, offset));\r\n      this.djAudioVolume=perc;\r\n      this.djAudioVolumeMax=perc;\r\n      this.djAudioVolumeMin=perc*.1;\r\n      perc*=perc;\r\n      if( this.djAudioObj ){\r\n        this.djAudioObj.volume=perc; \r\n      }\r\n\r\n      if( e.touches){\r\n        this.djPlayerSetSliderGui();\r\n      }\r\n      //this.colliderVolAdjust=this.djAudioVolume;\r\n    }\r\n    if( this.pxlVideo && this.pxlEnv.posted  ){\r\n      this.pxlVideo.setVolume( \"dj\", this.djAudioVolume );\r\n    }\r\n  }\r\n    \r\n  djPlayerMuteToggle(val=null){\r\n    this.djMuted= val==null ? !this.djMuted : val;\r\n\r\n    if( val!=null ){\r\n      this.pxlGuiDraws.toggleIcon(this.pxlGuiDraws.hudIcons.musicIcon, !val, true );\r\n    }\r\n\r\n    if( this.djAudioObj ){\r\n      this.djAudioObj.muted=this.djMuted;\r\n      this.djAudioObj.byScript=true;\r\n      this.djAudioObj.volume=this.djAudioObj.volume;\r\n    }\r\n    if( this.pxlVideo && this.pxlEnv.posted ){\r\n      this.pxlVideo.setMuted( \"dj\", this.djMuted );\r\n    }\r\n  }\r\n  \r\n  setFadeActive( dir=1 ){\r\n    if( this.fadeDir == dir ){\r\n      return;\r\n    }\r\n    this.fadeDir=dir;\r\n    this.fadeActive=true;\r\n  }\r\n  \r\n  fadeAudioEvent( ){\r\n    if(this.djVolumeParentObj && !this.djVolumeParentObj.down && this.fadeActive && this.pxlEnv.postIntro){\r\n      this.fadePerc+=this.fadeAdjustRate*this.fadeDir;\r\n\r\n      if( this.fadePerc<0 || this.fadePerc>1 ){\r\n        this.fadePerc= this.fadeDir == 1 ? 1 : 0;\r\n        this.fadeActive=false;\r\n        return;\r\n      }\r\n      \r\n      let curVolume= (this.djAudioVolumeMax-this.djAudioVolumeMin) * this.fadePerc + this.djAudioVolumeMin;\r\n\r\n      this.djAudioVolume=curVolume;\r\n      curVolume*=curVolume;\r\n      \r\n      if( this.djAudioObj ){\r\n        this.djAudioObj.byScript=true;\r\n        this.djAudioObj.volume=curVolume;\r\n      }\r\n      \r\n      this.pxlVideo.setVolume( \"dj\", this.djAudioVolume );\r\n    }\r\n  }\r\n}","// Video Streaming Module\r\n\r\nexport class Video{\r\n  constructor( assetRoot=null, pxlUtils=null, pxlAudio=null, pxlFile=null, pxlGuiDraws=null ){\r\n    this.pxlUtils=pxlUtils;\r\n    this.pxlAudio=pxlAudio;\r\n    this.pxlFile=pxlFile;\r\n    this.pxlGuiDraws=pxlGuiDraws;\r\n    this.pxlEnv=null;\r\n    \r\n    this.videojs=null; // VideoJS Library\r\n    this.Hls=null; // HLS.js Library\r\n    this.IVSPlayer=null; // Amazon IVS Player Library\r\n\r\n    this.posted=false;\r\n    \r\n    this.djStreamUrl=\"\";//  '.m3u8' url;\r\n    this.performerStreamUrl=\"\";\r\n        \r\n    this.screenVideoBlock=null;\r\n    this.screenVideos={};\r\n        \r\n    this.videoStreams={};\r\n    this.videoStreamFailCount=0;\r\n    this.videoStreamFailMax=5;\r\n    this.videoAudioEvent={ // If the user should be checking for video feeds or just display the stand-in texture\r\n        dj:false,\r\n        performer:false,\r\n    };\r\n    this.checkForDjStream=false;\r\n    this.checkForPerformerStream=false;\r\n    this.videoStills={\r\n        dj:{ texture:null, url: assetRoot+\"SoftNoise_512.jpg\"},\r\n        performer:{ texture:null, url: assetRoot+\"SoftNoise_512.jpg\"},\r\n    };\r\n  }\r\n    \r\n    init(){\r\n        this.buildVideoBlock();\r\n        \r\n        this.buildPromoVideos();\r\n    }\r\n    buildVideoBlock(){\r\n    if(this.screenVideoBlock==null){\r\n      let svbObj=document.createElement( \"div\" );\r\n      svbObj.classList.add( \"videoScreenBlockStyle\" );\r\n      document.body.appendChild( svbObj );\r\n      this.screenVideoBlock=svbObj;\r\n    }\r\n    }\r\n    \r\n    buildPromoVideos(){\r\n    // ## Split this out to an external JSON file.\r\n    let vidList=[];\r\n    vidList.forEach( (v)=>{\r\n      let curName=v.name;\r\n      let curType=v.type;\r\n      let curIntensity=v.intensity;\r\n      let curBoost=v.boost;\r\n      let curFile=v.file;\r\n      let curLand=v.landscape;\r\n      let curFilePath= this.pxlFile.vidRoot + curFile;\r\n      \r\n      let curObj=document.createElement(\"video\");\r\n      curObj.id=\"screenVideo_\"+curName+\"_\"+(curLand ? \"port\" : \"land\");\r\n      curObj.src=curFilePath;\r\n      curObj.classList.add(\"bgMediaAssets\");\r\n      curObj.controls=false;\r\n      curObj.muted=true;\r\n      curObj.preload=\"true\";\r\n      curObj.setAttribute(\"autoplay\", \"\");\r\n      curObj.setAttribute(\"muted\", \"\");\r\n      curObj.setAttribute(\"playsinline\", \"\");\r\n      curObj.setAttribute(\"loop\", \"\");\r\n      this.screenVideoBlock.appendChild( curObj );\r\n      \r\n      // -- -- -- -- -- -- -- -- -- //\r\n      // Build Video Dict\r\n      if( !this.screenVideos[ curName ] ){\r\n        this.screenVideos[ curName ]={};\r\n      }\r\n      this.screenVideos[ curName ][ \"name\" ]=curName;\r\n      this.screenVideos[ curName ][ \"type\" ]=curType;\r\n            if( curIntensity ){\r\n                this.screenVideos[ curName ][ \"intensity\" ]=curIntensity;\r\n            }\r\n            if( curBoost ){\r\n                this.screenVideos[ curName ][ \"boost\" ]=curBoost;\r\n            }\r\n      let fileList= this.screenVideos[ curName ][ \"file\" ] || [];\r\n      if( !this.screenVideos[ curName ][ \"file\" ] ){\r\n        fileList=[ curFilePath, curFilePath ];\r\n      }else{\r\n        fileList[ ~~curLand ]=curFilePath;\r\n      }\r\n      this.screenVideos[ curName ][ \"file\" ]=fileList;\r\n      \r\n      // -- -- -- -- -- -- -- -- -- //\r\n      // Textures\r\n      let curTexture= this.pxlUtils.getVideoTexture( curObj );\r\n            \r\n      let materialList= this.screenVideos[ curName ][ \"texture\" ] || [];\r\n      if( !this.screenVideos[ curName ][ \"texture\" ] ){\r\n        materialList=[ curTexture, curTexture ];\r\n      }else{\r\n        materialList[ ~~curLand ]=curTexture;\r\n      }\r\n      this.screenVideos[ curName ][ \"texture\" ]=materialList;\r\n      \r\n      // -- -- -- -- -- -- -- -- -- //\r\n      // Video Objects\r\n      let videoObjList=[];\r\n      if( !this.screenVideos[ curName ][ \"videoObjs\" ] ){\r\n        videoObjList=[ curObj, curObj ];\r\n      }else{\r\n        videoObjList[ ~~curLand ]=curObj;\r\n      }\r\n      this.screenVideos[ curName ][ \"videoObjs\" ]=videoObjList;\r\n    });\r\n    }\r\n        \r\n    async boot(){\r\n        if( this.videoAudioEvent[ 'dj' ] ){\r\n            this.buildVideoPlayer('dj');\r\n        }else{\r\n            this.videoStills.dj.texture = this.pxlUtils.loadTexture( this.videoStills.dj.url );\r\n        }\r\n        \r\n    }\r\n    \r\n    buildVideoPlayer( streamId ){\r\n        let tmpThis=this;\r\n        let djStreamObj=document.createElement(\"video\");\r\n        djStreamObj.id=\"antibodyDjStream\";\r\n        djStreamObj.classList.add(\"bgMediaAssets\");\r\n        djStreamObj.controls=false;\r\n        djStreamObj.volume=0;\r\n        djStreamObj.muted=true;\r\n        djStreamObj.setAttribute(\"autoplay\", \"true\");\r\n        djStreamObj.setAttribute(\"playsinline\", \"true\");\r\n        djStreamObj.addEventListener(\"volumechange\", (e)=>{\r\n            djStreamObj.volume= Math.min( djStreamObj.volume, tmpThis.pxlAudio.djAudioVolume);\r\n        }, true);\r\n    \r\n\r\n        this.screenVideoBlock.appendChild( djStreamObj );\r\n        \r\n        this.videoStreams[ streamId ]={};\r\n        this.videoStreams[ streamId ]['mode']=0; // 1 HLS, 2 Default Video MPEG Video Object, 3 Amazon Video Player\r\n        this.videoStreams[ streamId ]['active']=false;\r\n        this.videoStreams[ streamId ]['loading']=false;\r\n        this.videoStreams[ streamId ]['checkResolve']=false;\r\n        this.videoStreams[ streamId ]['prevCheck']=this.pxlUtils.curMS+5;\r\n        this.videoStreams[ streamId ]['delayCheck']=5;\r\n        this.videoStreams[ streamId ]['obj']=djStreamObj;\r\n        \r\n        this.videoStreams[ streamId ]['url']=this.djStreamUrl;\r\n        this.videoStreams[ streamId ]['urlStatus']=false;\r\n        this.videoStreams[ streamId ]['player']=null;\r\n        this.videoStreams[ streamId ]['checkScreens']=false;\r\n        this.videoStreams[ streamId ]['activeLevel']=-1;\r\n        this.videoStreams[ streamId ]['prevFrame']=0;\r\n        this.videoStreams[ streamId ]['prevFrameCount']=0;\r\n\r\n        \r\n        this.videoStreams[ streamId ]['canvasObj'] = null;\r\n        this.videoStreams[ streamId ]['videoTexture'] = this.getTexture( streamId );\r\n        \r\n        this.pxlFile.urlExists( this.djStreamUrl ).then( (resp)=>{\r\n            this.videoStreams[ streamId ]['urlStatus']=resp;\r\n            //this.checkForDjStream=!resp;\r\n        });\r\n        \r\n        this.buildVideoStream(  streamId , false );\r\n    }\r\n    \r\n    postBoot( streamId ){\r\n        if( this.videoStreams[ streamId ] && this.videoStreams[ streamId ]['urlStatus'] ){\r\n            this.load( streamId, this.videoStreams[ streamId ]['url'] );\r\n        }\r\n        this.posted=true;\r\n        this.checkForDjStream=this.videoAudioEvent['dj'];\r\n    }\r\n    step(){\r\n        let ret=false;\r\n        \r\n        let streamId=\"dj\";\r\n        if( this.videoAudioEvent[ streamId ] ){\r\n            let curVid=this.videoStreams[ streamId ];\r\n            if( curVid ){\r\n                if( !curVid[ 'active' ] ){\r\n                    this.checkVideoStreamStatus( streamId ); // Async, will pick up on next .step()\r\n                }else{\r\n                    //this.checkVideoError( streamId );\r\n                }\r\n                \r\n                \r\n                if( this.pxlUtils.mobile ){\r\n                    if( curVid['active'] && curVid['videoTexture'] && curVid['checkScreens']){\r\n                        curVid['checkScreens']=false;\r\n                        this.setScreensToStreams( 1, curVid['videoTexture'] );\r\n                    }\r\n                }else{\r\n                    ret=curVid['checkScreens'];\r\n                    curVid['checkScreens']=false;\r\n                }\r\n                \r\n                /*\r\n                if( curVid['canvasObj'] && curVid['player'] ){\r\n                    let player=curVid['player'].children_[0];\r\n                    if( player ){\r\n                        if( player.videoWidth != curVid['canvasObj'].width ){\r\n                            curVid['canvasObj'].width = player.videoWidth;\r\n                            curVid['canvasObj'].height = player.videoHeight;\r\n                        }\r\n                        curVid['canvasCtx'].drawImage(player, 0, 0);\r\n                        curVid['canvasTexture'].needsUpdate = true;\r\n                    }\r\n                }*/\r\n            }\r\n        }else if( this.videoStills[ streamId ].texture && this.pxlUtils.mobile ){\r\n            this.setScreensToStreams( 1, this.videoStills[ streamId ].texture );\r\n        }\r\n        \r\n        return ret;\r\n    }\r\n    setScreensToStreams( active=0, streamId=\"dj\" ){\r\n        let curTexture = streamId;\r\n        if( typeof curTexture == \"string\" ){\r\n            curTexture = this.getTexture( streamId );\r\n            if( !curTexture ){\r\n                active=0;\r\n                this.videoStreams[ streamId ]['active']=false;\r\n                this.videoStreams[ streamId ]['checkScreens']=true;\r\n            }\r\n        }\r\n        \r\n        this.pxlEnv.camScreenData.screenGeoList.forEach((x,c)=>{\r\n            // Screen material updates\r\n            x.material.uniforms.camExists.value = active;\r\n            x.material.uniforms.videoFeed.value = curTexture;\r\n        });\r\n    }\r\n    \r\n    isActive( streamId ){\r\n        let ret=false;\r\n        if( this.videoStreams.hasOwnProperty( streamId ) ){\r\n            if( this.videoStreams[ streamId ]['active'] && this.videoStreams[ streamId ]['videoTexture'] ){\r\n                ret = true;\r\n            }\r\n        }else{\r\n            ret = this.videoStills[ streamId ].texture!=null;\r\n        }\r\n        return ret;\r\n    }\r\n    \r\n    getTexture( streamId ){\r\n        let retTexture=null;\r\n        if( this.videoAudioEvent[ streamId ] ){\r\n            if( !this.videoStreams[ streamId ]['videoTexture'] ){\r\n                this.videoStreams[ streamId ]['videoTexture'] = this.buildVideoTexture( streamId );\r\n            }\r\n            retTexture = this.videoStreams[ streamId ]['videoTexture'];\r\n        }else if( this.videoStills[ streamId ].texture  ){\r\n            retTexture= this.videoStills[ streamId ].texture;\r\n        }\r\n            \r\n        return retTexture;\r\n    }\r\n    \r\n    buildVideoTexture( streamId ){\r\n        this.disposeVideoTexture( streamId );\r\n        /*if( !this.videoStreams[streamId]['canvasObj'] ){\r\n            const canvas=document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            canvas.width = 256;\r\n            canvas.height = 256;\r\n            ctx.fillStyle = '#F';\r\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n            \r\n            let {texture, material} = this.pxlUtils.getCanvasTexture( canvas );\r\n            \r\n            this.videoStreams[streamId]['canvasObj']=canvas;\r\n            this.videoStreams[streamId]['canvasCtx']=ctx;\r\n            this.videoStreams[streamId]['canvasMtl']=material;\r\n            this.videoStreams[streamId]['canvasTexture']=texture;\r\n            \r\n            this.screenVideoBlock.appendChild( canvas );\r\n            //return texture;\r\n        }else{\r\n            return this.videoStreams[streamId]['videoTexture'];\r\n        }*/\r\n        //return this.videoStreams[streamId]['obj'] && this.videoStreams[streamId]['player'] ? this.pxlUtils.getVideoTexture( this.videoStreams[streamId]['obj'] ) : null;\r\n        return this.videoStreams[streamId]['obj'] && this.videoStreams[streamId]['player'] ? this.pxlUtils.getVideoTexture( this.videoStreams[streamId]['obj'] ) : null;\r\n    }\r\n    disposeVideoTexture( streamId, forceValue=null ){\r\n        if( this.videoStreams[ streamId ]['videoTexture'] ){\r\n            this.videoStreams[ streamId ]['videoTexture'].dispose();\r\n            this.videoStreams[ streamId ]['videoTexture'] = null;\r\n            this.videoStreams[ streamId ]['checkScreens'] = forceValue == null ? true : forceValue ;\r\n        }\r\n    }\r\n    \r\n    resetvideoTexture( streamId ){\r\n        this.setScreensToStreams( 0, streamId );\r\n        this.disposeVideoTexture( streamId, false );\r\n        let curTexture = this.getTexture( streamId );\r\n        // if( this.videoStreams[ streamId ]['mode'] == 1 ){\r\n            // curTexture = this.videoStreams[ streamId ]['player'].currentLevel == -1 ? null : curTexture;\r\n        // }\r\n        \r\n        this.videoStreams[ streamId ]['videoTexture'] = curTexture;\r\n        this.videoStreams[ streamId ]['checkScreens'] = true ;\r\n    }\r\n    resetEnvSettings( streamId ){\r\n        this.resetvideoTexture( streamId );\r\n        this.videoStreams[ streamId ]['checkScreens'] = false;\r\n    }\r\n    \r\n    // Adapted from packed hls.js npm module\r\n    hlsPreflight(){\r\n        let ms=window.MediaSource || window.WebKitMediaSource;\r\n        ms = ms && typeof ms.isTypeSupported == \"function\" && ms.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\r\n        \r\n        let sb = window.SourceBuffer || window.WebKitSourceBuffer;\r\n        sb = !sb || sb.prototype && typeof sb.prototype.appendBuffer == \"function\" && typeof sb.prototype.remove == \"function\";\r\n        return ( ms && sb );\r\n    }\r\n    \r\n    buildVideoStream( streamId, urlStatus=false ){\r\n        let tmpThis=this;\r\n        let djStreamObj=this.videoStreams[ streamId ]['obj'];\r\n          \r\n        if( false && this.hlsPreflight() ){// && !this.pxlEnv.mobile ) {\r\n            if( typeof this.videojs != \"undefined\" ){\r\n                this.buildVhsPlayer( streamId );\r\n            }else{\r\n                let videoScriptUrl=\"https://vjs.zencdn.net/7.5.4/video.min.js\";\r\n                this.pxlFile.loadScript( videoScriptUrl ).then( ()=>{\r\n                    tmpThis.buildVhsPlayer( streamId );\r\n                });\r\n            }\r\n        }else if(false){\r\n            if( typeof this.Hls != \"undefined\" ){\r\n                this.buildHlsPlayer( streamId );\r\n            }else{\r\n                let hlsScriptUrl=\"https://cdn.jsdelivr.net/npm/hls.js@latest\";\r\n                this.pxlFile.loadScript( hlsScriptUrl ).then( ()=>{\r\n                    tmpThis.buildHlsPlayer( streamId );\r\n                });\r\n            }\r\n        }else if(false && djStreamObj.canPlayType('application/vnd.apple.mpegurl')) {\r\n            this.buildFallbackPlayer( streamId );\r\n        }else{\r\n            if( typeof this.IVSPlayer != null ){\r\n                this.buildIvsPlayer( streamId );\r\n            }else{\r\n                let ivsScriptUrl=\"https://player.live-video.net/1.1.2/amazon-ivs-player.min.js\";\r\n                this.pxlFile.loadScript( ivsScriptUrl ).then( ()=>{\r\n                    tmpThis.buildIvsPlayer( streamId );\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    buildVhsPlayer( streamId ){\r\n        if( this.videojs ) { // Just double checking\r\n            this.videoStreams[ streamId ]['mode']=1;\r\n            //djStreamObj.volume = 1;\r\n            let djStreamObj=this.videoStreams[ streamId ]['obj'];\r\n            \r\n            let player = this.videojs(djStreamObj, { \"controls\": false, \"autoplay\": true, \"preload\": \"auto\"});\r\n            \r\n            this.videojs.log.level('off');\r\n            //%=\r\n            this.videojs.log.level('error');\r\n            //%\r\n            \r\n            this.videoStreams[ streamId ]['player']=player;\r\n            let tmpThis=this;\r\n            \r\n            player.ready(function() {\r\n                let promise = player.play();\r\n                if( promise ) {\r\n                    promise.catch(function(error) {\r\n                        document.addEventListener(\"click\", function vhsClickMonitor(e){\r\n                            let ns = player.networkState();\r\n                            if( ns==1 || ns==2 ){\r\n                                player.play();\r\n                                document.removeEventListener('click', vhsClickMonitor);\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n\r\n            player.on(\"play\", (e)=>{ // Initial event to play src url\r\n                tmpThis.ready( streamId );\r\n            });\r\n            player.on(\"loadedmetadata\", (e)=>{ // Once play started\r\n                tmpThis.start( streamId );\r\n            });\r\n            // player.on(\"canplay\", (e)=>{ // Off of a waiting event\r\n                // console.log(\"VHS canplay\",e);\r\n            // });\r\n            player.on(\"waiting\", (e)=>{ // Waiting for hls playlist update\r\n                let prevTime=player.currentTime();\r\n                let prevDur=player.duration();\r\n                if( prevDur > 0 ){\r\n                    setTimeout( ()=>{\r\n                        let curTime=player.currentTime();\r\n                        let curDur=player.duration();\r\n                        if( prevTime==curTime && prevDur == curDur ){\r\n                            this.pxlFile.urlExists( player.src() ).then( (resp)=>{\r\n                                if( !resp ){\r\n                                    tmpThis.ended(  streamId  );   \r\n                                }\r\n                            }).catch( ()=>{\r\n                                tmpThis.ended(  streamId  );\r\n                            });\r\n                        }\r\n                    },500);\r\n                }\r\n            });\r\n            \r\n            \r\n            // player.on(\"timeupdate\", (e)=>{\r\n                // console.log(\"VHS ended\",e);\r\n            // });\r\n            player.on(\"ended\", (e)=>{ // Doesn't fire... leave it anyway... I dunno, mobile maybe? Other browsers?\r\n                //console.log(\"VHS ended\",e);\r\n                tmpThis.ended(  streamId  );\r\n            });\r\n            // player.on(\"stalled\", (e)=>{\r\n                // console.log(\"VHS stalled\",e);\r\n            // });\r\n            // player.on(\"suspend\", (e)=>{\r\n                // console.log(\"VHS suspend\",e);\r\n            // });\r\n            player.on(\"error\", (e)=>{\r\n                //console.log(\"VHS error\",e);\r\n                tmpThis.ended(  streamId  );\r\n            });\r\n            \r\n        }else{ // Fallback, somethings up\r\n            this.buildFallbackPlayer( streamId );\r\n        }\r\n    }\r\n    \r\n    buildHlsPlayer( streamId ){\r\n        if(this.Hls && this.Hls.isSupported()) { // Just double checking\r\n            this.videoStreams[ streamId ]['mode']=4;\r\n            //djStreamObj.volume = 1;\r\n            let djStreamObj=this.videoStreams[ streamId ]['obj'];\r\n            \r\n            var hls = new this.Hls({\r\n                \"enableWorker\": true,\r\n                \"liveBackBufferLength\": 900,\r\n                \"startLevel\":2,\r\n                \"stretchShortVideoTrack\":true,\r\n                \"nudgeOffset\":.5,\r\n                \"fragLoadingTimeOut\":2000,\r\n            });\r\n            hls.attachMedia(djStreamObj);\r\n            //var m3u8Url = decodeURIComponent(this.videoStreams[ streamId ]['url']);\r\n            //if( urlStatus ){\r\n            //    hls.loadSource(m3u8Url);\r\n            //}\r\n            this.videoStreams[ streamId ]['player']=hls;\r\n            let tmpThis=this;\r\n            hls.on(this.Hls.Events.MEDIA_ATTACHED,function(msg) {\r\n                //tmpThis.ready( streamId );\r\n                tmpThis.ready( streamId );\r\n            });\r\n            hls.on(this.Hls.Events.BUFFER_CREATED,function(msg) {\r\n                //tmpThis.ready( streamId );\r\n            });\r\n            hls.on(this.Hls.Events.MANIFEST_PARSED,function(msg) {\r\n                //djStreamObj.play();\r\n                //tmpThis.start( streamId );\r\n                //djStreamObj.play();\r\n                tmpThis.start( streamId );\r\n            });\r\n\r\n            hls.streamController.onMediaEnded=function(msg) {\r\n                tmpThis.ended(  streamId  );\r\n            }\r\n            /*hls.on(this.Hls.Events.MEDIA_DETACHING,function(msg) {\r\n                console.log(\"media detach\", msg);\r\n            });*/\r\n            hls.on(this.Hls.Events.ERROR,function( hlsErr, errDetails ) {\r\n                if( errDetails.fatal ){\r\n                    tmpThis.ended(  streamId  );\r\n                }else if( errDetails.details==\"bufferFullError\" || errDetails.details==\"bufferAppendingError\" ){\r\n                    hls.recoverMediaError();\r\n                }\r\n            });\r\n      \r\n            //jmaConnect.pxlEnv.pxlVideo.videoStreams['dj']['player'].currentLevel\r\n            hls.on(this.Hls.Events.STREAM_STATE_TRANSITION,function(msg, detail) {\r\n                if( detail.previousState == \"PARSED\" && detail.nextState == \"IDLE\" ){\r\n                    tmpThis.videoStreams[ streamId ]['activeLevel']=hls.currentLevel;\r\n                    if( hls.currentLevel == -1){\r\n                        setTimeout( ()=>{\r\n                            if( hls.currentLevel == -1){ // Initialization will fail to -1, catch any level change after\r\n                                /*tmpThis.videoStreams[ streamId ]['active']=false;\r\n                                tmpThis.ended( streamId );\r\n                                tmpThis.resetEnvSettings( streamId );*/\r\n                                hls.recoverMediaError();\r\n                            }\r\n                        }, 1000);\r\n                    }/*else if( !tmpThis.videoStreams[ streamId ]['active'] ){\r\n                        tmpThis.restart( streamId );\r\n                    }*/\r\n                }\r\n            });\r\n            \r\n            //jmaConnect.pxlEnv.pxlVideo.videoStreams.dj.player.streamController.lastCurrentTime\r\n        }else{ // Fallback, somethings up\r\n            this.buildFallbackPlayer( streamId );\r\n        }\r\n    }\r\n    \r\n    sendModMessage( type, msg, details){\r\n        let data={\r\n            msg:type,\r\n            init:msg,\r\n            data:details\r\n        }\r\n        this.pxlEnv.pxlSocket.sendErrorMsg( data );\r\n    }\r\n    buildFallbackPlayer( streamId ){ // I hope this works....\r\n        let djStreamObj=this.videoStreams[ streamId ]['obj'];\r\n        this.videoStreams[ streamId ]['mode']=2;\r\n        djStreamObj.setAttribute(\"src\", ( this.videoStreams[ streamId ]['urlStatus'] ? this.videoStreams[ streamId ]['url'] : \"\" ) );\r\n        let tmpThis=this;\r\n        djStreamObj.addEventListener('error',function(msg, data) {\r\n        });\r\n        \r\n        djStreamObj.addEventListener('loadedmetadata',function(msg) {\r\n            tmpThis.ready( streamId );\r\n        });\r\n        djStreamObj.addEventListener('canplay',function(msg) {\r\n            djStreamObj.play();\r\n            tmpThis.start( streamId );\r\n        });\r\n        djStreamObj.addEventListener('suspend',function(msg) {\r\n            tmpThis.ended(  streamId  );\r\n        });\r\n        djStreamObj.addEventListener('ended',function(msg) {\r\n            tmpThis.ended(  streamId  );\r\n        });\r\n        /*\r\n        hls.on(this.Hls.Events.MEDIA_ATTACHED,function(msg) {\r\n            tmpThis.ready( streamId );\r\n        });\r\n        hls.on(this.Hls.Events.MANIFEST_PARSED,function(msg) {\r\n            djStreamObj.play();\r\n            tmpThis.start( streamId );\r\n        });\r\n        hls.streamController.onMediaEnded=function(msg) {\r\n            tmpThis.ended(  streamId  );\r\n        }\r\n        hls.on(this.Hls.Events.ERROR,function( hlsErr, errDetails ) {\r\n            tmpThis.ended(  streamId  );\r\n        });\r\n        */\r\n        //djStreamObj.volume = 1;\r\n    }\r\n    buildIvsPlayer( streamId ){\r\n        if (this.IVSPlayer.isPlayerSupported) {\r\n            this.videoStreams[ streamId ]['mode']=3;\r\n            \r\n            let djStreamObj=this.videoStreams[ streamId ]['obj'];\r\n            const player = this.IVSPlayer.create();\r\n            player.attachHTMLVideoElement(djStreamObj);\r\n            player.setAutoplay(true);\r\n            player.setLogLevel(\"Error\");\r\n            this.videoStreams[ streamId ]['loading']=true;\r\n            this.videoStreams[ streamId ]['player']=player;\r\n            this.videoStreams[ streamId ]['checkScreens']=false;\r\n            \r\n            let tmpThis=this;\r\n            let playerState = this.IVSPlayer.PlayerState;\r\n            player.addEventListener(playerState.READY,(msg)=>{\r\n                tmpThis.ready( streamId );\r\n            });\r\n            player.addEventListener(playerState.PLAYING,(msg)=>{\r\n                tmpThis.start( streamId );\r\n            });\r\n            player.addEventListener(playerState.ENDED,(msg)=>{\r\n                tmpThis.ended( streamId );\r\n            });\r\n            \r\n            let playerEvent = this.IVSPlayer.PlayerEventType;\r\n            player.addEventListener(playerEvent.ERROR, (err, code, source, msg)=>{\r\n                tmpThis.ended(  streamId, err );\r\n            });\r\n        }else{ // Fallback, somethings up\r\n            this.buildFallbackPlayer( streamId );\r\n        }\r\n    }\r\n    \r\n    unload( target ){}\r\n    \r\n    load( streamId, url ){\r\n        let curVid=this.videoStreams[ streamId ];\r\n        if( curVid ){\r\n            switch( curVid['mode'] ){\r\n                case 1:\r\n                \r\n                    this.videoStreams[ streamId ][ 'url' ]=url;\r\n                    curVid['player'].src({\r\n                        type: \"application/x-mpegURL\",\r\n                        src: url\r\n                    });\r\n                    curVid['player'].load();\r\n                    break\r\n                case 2:\r\n                    curVid['obj'].setAttribute(\"src\", url );\r\n                    curVid['obj'].load();\r\n                    break;\r\n                case 3:\r\n                    curVid['player'].load( url );\r\n                    break;\r\n                case 4:\r\n                    // ## Investigate detachMedia() more\r\n                    //      Should yeild the same as video.src=\"\", yet was having problems attatching vid\r\n                    //    Might be worth looking into hls.stopLoad() and hls.startLoad(-1)\r\n                    if( curVid['player'] ){\r\n                        this.destroyPlayer( streamId, true );\r\n                    }\r\n                    //this.buildHlsPlayer( streamId );\r\n                        \r\n                    curVid['player'].attachMedia( this.videoStreams[ streamId ]['obj'] );\r\n                    var m3u8Url = decodeURIComponent( url );\r\n                    curVid['player'].loadSource(m3u8Url);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    newStream( nameId ){\r\n    }\r\n    \r\n    //%=\r\n    /*\r\n    loadVideoStream( statusResolve, streamDict){\r\n        console.log(statusResolve);\r\n        if( streamDict['player'] ){\r\n            if( statusResolve == 200 ){\r\n                if( streamDict['player'].core.paused && !streamDict['loading'] ){\r\n                    streamDict['player'].load( streamDict['url'] );\r\n                    //this.videoStreams['dj']['player'].play();\r\n                    streamDict['loading']=true;\r\n                }else if( !streamDict['active'] && streamDict['player'].core.state.state==\"Playing\"){\r\n                    streamDict['loading']=streamDict['player'].core.paused;\r\n                    //this.videoStreams['dj']['player'].play();\r\n                    let player=streamDict['player'];\r\n                    streamDict['active']=player.core.isLoaded && !player.core.paused;\r\n                }else{\r\n                    streamDict['loading']=false;\r\n                }\r\n            }else if(statusResolve == 0){\r\n                streamDict['delayCheck']=10;\r\n            }\r\n            \r\n            streamDict['prevCheck']=streamDict['timer'].curMS;\r\n            streamDict['checkResolve']=false;\r\n        }\r\n    }*/\r\n    //%\r\n    \r\n    // Video Player State\r\n    canUnmute( streamId ){\r\n        let status=true;\r\n        if(this.videoStreams[ streamId ]){\r\n            status= this.videoStreams[ streamId ]['active'];\r\n        }\r\n        return status;\r\n    }\r\n    \r\n    setMuted( streamId, val=false ){\r\n        let curVid=this.videoStreams[ streamId ];\r\n        if( curVid ){\r\n            curVid['obj'].muted = val;\r\n            \r\n            /*if( val ){\r\n            }else{\r\n                curStream['obj'].volume=0;\r\n                curStream['obj'].pause();\r\n            }*/\r\n        }\r\n    }\r\n    setVolume( streamId, vol ){\r\n        let curVid=this.videoStreams[ streamId ];\r\n        if( curVid ){\r\n            curVid['obj'].volume = vol;\r\n        };\r\n    }\r\n    getStreamState( streamId ){\r\n        let ret=false;\r\n        let curStream=this.videoStreams[ streamId ];\r\n\r\n        switch( curStream['mode'] ){\r\n            case 1:\r\n                ret = !curStream['obj'].paused; //!curStream['player'].paused();\r\n                break;\r\n            case 2:\r\n                ret= !curStream['obj'].paused;\r\n                break;\r\n            case 3:\r\n                let player=curStream[ 'player' ];\r\n                ret = player.core.isLoaded && !player.core.paused;\r\n                break;\r\n            case 4:\r\n                //ret = !curStream['player'].paused();\r\n                ret = curStream['player'].streamController.lastCurrentTime!=null;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return ret;\r\n    }\r\n    checkVideoError( streamId ){ // Check if needed for Video.js - VHS\r\n        let curPlayer= this.videoStreams[ streamId ];\r\n        if( curPlayer[\"active\"] && curPlayer['mode']==4 ){\r\n            if( curPlayer['obj'].videoWidth == 0 ){\r\n                if( !curPlayer['obj'].paused && curPlayer['player'].streamController.lastCurrentTime > 10 ){\r\n                    this.destroyPlayer( streamId );\r\n                    this.videoStreams[ streamId ][\"active\"]=false;\r\n                    this.checkForDjStream=true;\r\n                    this.buildHlsPlayer( streamId );\r\n                    this.videoStreams[ streamId ]['player'].recoverMediaError();\r\n                }\r\n            }else if( curPlayer['obj'].webkitDecodedFrameCount == curPlayer['prevFrame'] ){\r\n                this.videoStreams[ streamId ]['prevFrameCount']+=1;\r\n                if( this.videoStreams[ streamId ]['prevFrameCount'] > 50){\r\n                    //%=\r\n                    //console.log(\"trigger level drop\");\r\n                    //%\r\n                    this.videoStreams[ streamId ]['prevFrameCount']=0;\r\n                    this.videoStreams[ streamId ]['player'].recoverMediaError();\r\n                    this.videoStreams[ streamId ]['player'].nextLoadLevel= Math.max(0, this.videoStreams[ streamId ]['player'].currentLevel-1);\r\n                    ////this.videoStreams[ streamId ]['player'].loadLevel= Math.max(0, this.videoStreams[ streamId ]['player'].currentLevel-1);\r\n                    //this.videoStreams[ streamId ]['player'].nextLevel= 1;\r\n                    this.videoStreams[ streamId ]['player'].recoverMediaError();\r\n                }\r\n            }else{\r\n                this.videoStreams[ streamId ]['prevFrame']=curPlayer['obj'].webkitDecodedFrameCount;\r\n                ////this.videoStreams[ streamId ]['player'].loadLevel=-1;\r\n                if( this.videoStreams[ streamId ]['player'].nextLevel != -1 ){\r\n                    this.videoStreams[ streamId ]['player'].nextLevel=-1;\r\n                }\r\n                this.videoStreams[ streamId ]['prevFrameCount']=0;\r\n            }\r\n            //jmaConnect.pxlEnv.pxlVideo.videoStreams.dj.obj.webkitDecodedFrameCount .nextLoadLevel\r\n        }\r\n    }\r\n    \r\n    // Video Player / Object Events\r\n    ready( streamId ){\r\n        this.videoStreams[ streamId ]['loading']=false;\r\n        //this.videoStreams[ streamId ]['obj'].play();\r\n        this.videoStreams[ streamId ]['obj'].volume=0;\r\n        this.videoStreams[ streamId ]['activeLevel']=1;\r\n    }\r\n    start( streamId ){\r\n        let curStream=this.videoStreams[ streamId ];\r\n        \r\n        if( curStream['active'] ){\r\n            return;\r\n        }\r\n        let videoObj=curStream['obj']; \r\n        let player=curStream['player']; \r\n        // streamController.appended\r\n        let active=this.getStreamState( streamId );\r\n        this.videoStreams[ streamId ]['active'] = active;\r\n        \r\n        if( !this.videoStreams[ streamId ]['videoTexture'] ){\r\n            this.videoStreams[ streamId ]['videoTexture'] = this.getTexture( streamId );\r\n        }\r\n\r\n        this.pxlAudio.isVideoObject=true;\r\n\r\n        this.videoStreamFailCount=0;\r\n        this.checkForDjStream=false;\r\n\r\n        this.videoStreams[ streamId ]['checkScreens']=true;\r\n        \r\n        this.pxlAudio.djAudioObj.byScript=true;\r\n\r\n        let djDevice=this.pxlAudio.djAudioObj;\r\n        let djSource=djDevice.children[0];\r\n        djSource.setAttribute(\"src\",\"\");\r\n        djDevice.pause();\r\n        djDevice.muted=true;\r\n        setTimeout( ()=>{\r\n            djDevice.load();\r\n            setTimeout( ()=>{\r\n                //curStream['player'].play();\r\n                if( this.pxlAudio.roomAudioStopped ){\r\n                    curStream['obj'].volume=this.pxlAudio.djAudioVolume;\r\n                }\r\n                curStream['obj'].muted=this.pxlAudio.djMuted || !this.pxlAudio.roomAudioStopped;\r\n                curStream['obj'].click();\r\n            },20);\r\n        },20);\r\n    }\r\n    restart( streamId ){\r\n        let active= false;\r\n        let player=this.videoStreams[ streamId ]['player'];\r\n        let vidObj=this.videoStreams[ streamId ]['obj'];\r\n        switch( this.videoStreams[ streamId ]['mode'] ){\r\n            case 1:\r\n            case 2:\r\n                active = !vidObj.paused;\r\n                break;\r\n            case 3:\r\n                active = player.core.isLoaded && !player.core.paused;\r\n                break;\r\n            case 4: \r\n                active = player.currentLevel > -1;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.videoStreams[ streamId ]['active'] = active;\r\n        this.videoStreams[ streamId ]['checkScreens'] = active;\r\n    }\r\n    ended( streamId ){ \r\n        let curStream=this.videoStreams[ streamId ];\r\n        if( !curStream['active'] ){\r\n            return;\r\n        }\r\n        \r\n        this.destroyPlayer( streamId ); // Relies on active==true\r\n        \r\n        let active=curStream['mode']==4 ? !curStream['player'].liveTracker.atLiveEdge() : !curStream['obj'].paused ;\r\n\r\n        this.videoStreams[ streamId ]['active'] = active;\r\n\r\n        this.checkForDjStream=this.videoAudioEvent['dj'];\r\n        this.pxlAudio.isVideoObject=false;\r\n\r\n        this.videoStreams[ streamId ]['checkScreens']=true;\r\n\r\n        \r\n        if( this.pxlAudio.roomAudioStopped ){\r\n            curStream['obj'].volume=0;\r\n        }\r\n        curStream['obj'].pause();\r\n        curStream['obj'].muted=true;\r\n\r\n        this.pxlAudio.djAudioObj.byScript=true;\r\n        let djDevice=this.pxlAudio.djAudioObj;\r\n        let djSource=djDevice.children[0];\r\n        if( djSource.getAttribute(\"src\") == \"\"){\r\n            djSource.setAttribute(\"src\",this.pxlAudio.djUrlSource);\r\n            djDevice.load();\r\n            djDevice.muted=this.pxlAudio.djMuted || !this.pxlAudio.roomAudioStopped;\r\n            djDevice.play();\r\n        }\r\n\r\n        this.videoStreams[ streamId ]['prevCheck']=this.pxlUtils.curMS+15;\r\n        this.videoStreams[ streamId ]['activeLevel']=-1;\r\n    }\r\n    error( streamId, errorData ){\r\n        let type;\r\n        if( typeof errorData === \"object\" ){\r\n            type=errorData.type;\r\n        }else{\r\n            type=errorData;\r\n        }\r\n        \r\n        let errorList=[\"ErrorNetworkIO\", \"networkError\",\"mediaError\",\"internalException\"];\r\n        if( errorList.includes( type ) ){\r\n            this.videoStreams[ streamId ]['active']=false;\r\n        }\r\n    }\r\n    destroyPlayer( streamId, force=false ){\r\n        if( this.videoStreams[ streamId ]['mode'] == 4 && ( this.videoStreams[ streamId ]['active'] || force ) ){\r\n            if( this.videoStreams[ streamId ]['player'] ){\r\n                this.videoStreams[ streamId ]['player'].detachMedia();\r\n                //this.videoStreams[ streamId ]['player'].removeAllListeners();\r\n                //this.videoStreams[ streamId ]['player'].destroy();\r\n                //this.videoStreams[ streamId ]['player']=null;\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    // Status Checks\r\n    \r\n    async streamState(streamData){\r\n        let djVidStopped=true;\r\n        let performerVidStopped=true;\r\n        if( this.videoStreams['dj'] ){\r\n            djVidStopped=!this.videoStreams['dj']['active'];\r\n        }\r\n        if( this.videoStreams['performer'] ){\r\n            performerVidStopped=!this.videoStreams['performer']['active'];\r\n        }\r\n        if( streamData.hasOwnProperty('dj') == true && djVidStopped ){\r\n            this.checkForDjStream= streamData['dj'] && this.videoAudioEvent['dj'];\r\n        }\r\n        if( streamData.hasOwnProperty('performer') == true && performerVidStopped ){\r\n            this.checkForPerformerStream= streamData['performer'] && this.videoAudioEvent['performer'];\r\n        }\r\n        \r\n    }\r\n    async checkVideoStreamStatus( streamId ){\r\n        let curStreamData = this.videoStreams[ streamId ];\r\n        if( curStreamData && this.checkForDjStream && this.posted ){\r\n            if( !curStreamData['active'] && curStreamData['prevCheck']+curStreamData['delayCheck']<this.pxlUtils.curMS ){ // !curStreamData['checkResolve'] &&\r\n                this.checkForDjStream=false; // Prevent multiple checks\r\n                this.pxlFile.urlExists( this.videoStreams[ streamId ]['url'] ).then( (resp)=>{\r\n                    this.videoStreams[ streamId ]['urlStatus']=resp;\r\n                    this.checkForDjStream=!resp;\r\n                    \r\n                    this.videoStreams[ streamId ]['prevCheck']=this.pxlUtils.curMS;\r\n                    this.videoStreams[ streamId ]['checkResolve']=this.pxlUtils.curMS;\r\n                    if( resp ){\r\n                        this.load( streamId, this.videoStreams[streamId]['url'] );\r\n                        /*\r\n                        if( this.videoStreamFailCount > this.videoStreamFailMax ){\r\n                             this.videoStreamFailCount=0;\r\n                             this.checkForDjStream=false;\r\n                             this.pxlSocket.requestStreamState();\r\n                        }*/\r\n                    }else{\r\n                        this.videoStreamFailCount+=1;\r\n                    }\r\n                }).catch( (err)=>{\r\n                    //%=\r\n                    console.log( err );\r\n                    //%\r\n                    this.videoStreamFailCount+=1;\r\n                    this.checkForDjStream=true;\r\n                    this.videoStreams[ streamId ]['prevCheck']=this.pxlUtils.curMS; \r\n                });\r\n            }\r\n        }\r\n    }\r\n}","\r\n///////////////////////////////////////////////////////////\r\n// Header and Quality Information                       //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport function shaderHeader(){\r\n  let ret=`\r\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\r\n      precision highp float;\r\n    #else\r\n      precision mediump float;\r\n    #endif\r\n        `;\r\n  /*if(pxlQuality.percent>.5){\r\n    ret+=`\r\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\r\n        precision highp float;\r\n      #else\r\n        precision mediump float;\r\n      #endif\r\n            `;\r\n  }else if(pxlQuality.percent>.2){\r\n    ret+=`\r\n      precision mediump float;\r\n            `;\r\n  }else{\r\n    ret+=`\r\n      precision lowp float;\r\n            `;\r\n  }*/\r\n    \r\n  return ret;\r\n}\r\n","\r\nimport {shaderHeader} from \"./ShaderHeader.js\";\r\n\r\n///////////////////////////////////////////////////////////\r\n// Default Shaders                                      //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport function defaultVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  varying vec2 vUv;\r\n  void main(){\r\n    vUv=uv;\r\n    vec4 modelViewPosition=modelViewMatrix * vec4(position, 1.0);\r\n    gl_Position = projectionMatrix*modelViewPosition;\r\n  }`;\r\n  return ret;\r\n}\r\n","\r\nimport {shaderHeader} from \"./ShaderHeader.js\";\r\n\r\n///////////////////////////////////////////////////////////\r\n// Default Shaders                                      //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport function defaultShiftVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  varying vec2 vUv;\r\n  varying vec2 vUvShift;\r\n  void main(){\r\n    vUv=uv;\r\n        vUvShift=uv-.5;\r\n    vec4 modelViewPosition=modelViewMatrix * vec4(position, 1.0);\r\n    gl_Position = projectionMatrix*modelViewPosition;\r\n  }`;\r\n  return ret;\r\n}\r\n","\r\nimport {shaderHeader} from \"./ShaderHeader.js\";\r\n\r\nexport function camPosVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  varying vec3 camPos;\r\n  varying vec2 vUv;\r\n  void main(){\r\n    vUv=uv;\r\n    vec4 modelViewPosition=modelViewMatrix * vec4(position, 1.0);\r\n    gl_Position = projectionMatrix*modelViewPosition;\r\n    camPos=(modelViewMatrix*vec4(0.0,0.0,1.0,1.0)).xyz;\r\n  }`;\r\n  return ret;\r\n}\r\n","\r\nimport {shaderHeader} from \"./ShaderHeader.js\";\r\n\r\nexport function discardFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  void main(){\r\n    discard;\r\n    gl_FragColor=vec4(.0,.0,.0,0.0);\r\n  }`;\r\n  return ret;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function animTextureVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  varying vec2 vUv;\r\n  void main(){\r\n    vUv=uv;\r\n    vec4 modelViewPosition=modelViewMatrix * vec4(position, 1.0);\r\n    gl_Position = projectionMatrix*modelViewPosition;\r\n  }`;\r\n  return ret;\r\n}\r\n\r\n// RGB Data packed Texture\r\n//  _Red - Intensity\r\n//  _Green - Frequency\r\n//  _Blue - Glow Pulse Intensity\r\n//  _Alpha - Intensity 2 (for some reason...)\r\n\r\nexport function animTextureFrag(){ // ## set gl common variables to defines\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  uniform vec2 time;\r\n  uniform float rate;\r\n  uniform float freq;\r\n  uniform float intensity;\r\n  uniform vec3 glowColor;\r\n  uniform sampler2D glowTexture;\r\n  varying vec2 vUv;\r\n  float pi=3.14159265358979;\r\n  \r\n  void main(){\r\n    vec4 glowCd=texture2D(glowTexture, vUv);\r\n    vec4 Cd=vec4(glowColor,1.0);\r\n    Cd.rgb*=(cos(glowCd.g*pi*freq+time.x*rate)*.5+.5)*(1.0-glowCd.b)*intensity+glowCd.b;\r\n    Cd.rgb*=glowCd.r*glowCd.a;\r\n    gl_FragColor=Cd;\r\n  }`;\r\n  return ret;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Promo Bevel Shaders                                  //\r\n/////////////////////////////////////////////////////////\r\nexport function clickableBevelVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    varying vec3 pos;\r\n    varying float nDot;\r\n    varying vec2 vUv;\r\n    \r\n    void main(){\r\n      vUv=uv+vec2(rate*time.x, 0.0);\r\n      vec3 camDir=normalize( (projectionMatrix*viewMatrix*vec4(0.0,0.0,-1.0,1.0)).xyz );\r\n      nDot=dot( normal, camDir );\r\n      \r\n      pos=position;\r\n      vec4 modelViewPosition=modelViewMatrix * vec4(pos, 1.0);\r\n      gl_Position = projectionMatrix*modelViewPosition;\r\n      \r\n    }`;\r\n  return ret;\r\n}\r\nexport function clickableBevelFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D alphaMap;\r\n    uniform sampler2D cloudNoise;\r\n    uniform vec2 time;\r\n    uniform vec2 intensity;\r\n    uniform float rate;\r\n    varying vec3 pos;\r\n    varying float nDot;\r\n    varying vec2 vUv;\r\n    \r\n    void main() {\r\n      vec4 Cd=vec4( 1.0 );\r\n      Cd.rgb= mix( vec3(.05,.1,.5), vec3(.3,.5,1.0), intensity.x);\r\n      \r\n      vec2 nUV=pos.xy*.01+vec2(time.x*rate*.1, time.x*rate*.1);\r\n      vec4 noiseCd=texture2D(cloudNoise,nUV);\r\n      noiseCd.xyz=noiseCd.xyz*2.0-1.0;\r\n      nUV=vUv+noiseCd.xy*.05;\r\n      \r\n      float alpha=texture2D(alphaMap,nUV).r;\r\n      float blender=(nDot*.5+.5);\r\n      Cd.rgb=Cd.rgb*(1.0+alpha);//mix( vec3(0.5,0.5,1.0), vec3(0.0,0.2,0.8), blender); // Center Color, Edge Color\r\n      alpha=1.0-(1.0-alpha)*(1.0-alpha);\r\n      alpha*=alpha;\r\n      Cd.a=alpha+alpha;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Item Base Shaders                                    //\r\n/////////////////////////////////////////////////////////\r\nexport function portalBaseVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n        uniform vec2 time;\r\n        uniform float rate;\r\n        varying vec2 shiftUv;\r\n        varying vec2 wUv;\r\n        \r\n        void main(){\r\n            shiftUv=(uv-.5);\r\n            \r\n            float t=time.x*rate;\r\n            vec2 rot=vec2( sin(t), cos(t) );\r\n            vec2 rotUV=vec2(0.0);\r\n            rotUV.x=rot.y*(uv.x-.5) + rot.x*(uv.y-.5);\r\n            rotUV.y=rot.y*(uv.y-.5) - rot.x*(uv.x-.5);\r\n            wUv=rotUV+.5;\r\n            \r\n            vec4 modelViewPosition=modelViewMatrix * vec4(position, 1.0);\r\n            gl_Position = projectionMatrix*modelViewPosition;\r\n            \r\n        }`;\r\n  return ret;\r\n}\r\nexport function portalBaseFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n        uniform vec3 color;\r\n        uniform sampler2D alphaMap;\r\n        uniform sampler2D cloudNoise;\r\n        uniform vec2 intensity;\r\n        varying vec2 shiftUv;\r\n        varying vec2 wUv;\r\n        \r\n        #define TAU 6.28318530717958\r\n        void main() {\r\n            float suvLength=length(shiftUv)+.1;\r\n            vec2 suvSign=sign(shiftUv);\r\n            \r\n            vec2 rUv=sin( (suvLength+wUv*10.*shiftUv)*.5 );\r\n            rUv *= suvLength ;\r\n            \r\n            vec4 noiseCd=texture2D(cloudNoise,rUv);\r\n            vec2 aUv=wUv*(noiseCd.xy*.5+wUv);\r\n            \r\n            float alpha=texture2D(alphaMap,aUv).r;\r\n            \r\n            vec4 Cd=vec4( color*intensity.x*(1.0+alpha)*mix( noiseCd.rgb, vec3(1.0), alpha), 1.);\r\n            alpha*=max(0.0, alpha-noiseCd.r*noiseCd.g*noiseCd.b );\r\n            Cd.a=min(1.0, alpha);\r\n            \r\n            gl_FragColor = Cd;\r\n        }`;\r\n  return ret;\r\n}\r\n\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2025\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// RGB & Alpha Map Frag Shader                          //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport function rgbaMapFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D rgbMap;\r\n    uniform sampler2D alphaMap;\r\n\r\n    varying vec2 vUv;\r\n\r\n    main(){\r\n      vec3 rgb=texture2D( rgbMap, vUv ).rgb;\r\n      float alpha=texture2D( alphaMap, vUv ).r;\r\n\r\n      vec4 outCd = vec4( rgb, alpha );\r\n      gl_FragColor=outCd;\r\n    }\r\n  `;\r\n  return ret;\r\n}\r\n\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n//\r\n// The wave around the base of the item/pickup\r\n// Intended to work with a circular mesh, uvs 0-1 & (.5,.5) centered\r\n//   Please see the asset FBX file in a 3d software of your choice,\r\n//     `./Public/images/assets/EnvironmentAssets.fbx`  \r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Item Base Shaders                                    //\r\n/////////////////////////////////////////////////////////\r\nexport function itemBaseVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec2 time;\r\n    uniform float intensity;\r\n    uniform float rate;\r\n    varying vec3 pos;\r\n    varying float nDot;\r\n    varying vec2 vUv;\r\n    \r\n    void main(){\r\n      vUv=uv+vec2(rate*time.x, 0.0);\r\n      vec3 camDir=normalize( (projectionMatrix*viewMatrix*vec4(0.0,0.0,-1.0,1.0)).xyz );\r\n      nDot=dot( normal, camDir );\r\n      \r\n      pos=position;\r\n      vec4 modelViewPosition=modelViewMatrix * vec4(pos, 1.0);\r\n      gl_Position = projectionMatrix*modelViewPosition;\r\n      \r\n    }`;\r\n  return ret;\r\n}\r\nexport function itemBaseFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec3 color;\r\n    uniform sampler2D alphaMap;\r\n    uniform sampler2D cloudNoise;\r\n    uniform vec2 time;\r\n    uniform float intensity;\r\n    uniform float rate;\r\n    varying vec3 pos;\r\n    varying float nDot;\r\n    varying vec2 vUv;\r\n    \r\n    void main() {\r\n      vec4 Cd=vec4( color, 1.0);\r\n      \r\n      \r\n      vec2 nUV=pos.xy*.01+vec2(time.x*rate*.1, time.x*rate*.1);\r\n      vec4 noiseCd=texture2D(cloudNoise,nUV);\r\n      noiseCd.xyz=noiseCd.xyz*2.0-1.0;\r\n      nUV=vUv+noiseCd.xy*.05;\r\n      \r\n      float alpha=texture2D(alphaMap,nUV).r;\r\n      float blender=(nDot*.5+.5);\r\n      Cd.rgb=color*intensity*(1.0+alpha);//mix( vec3(0.5,0.5,1.0), vec3(0.0,0.2,0.8), blender); // Center Color, Edge Color\r\n      alpha=1.0-(1.0-alpha)*(1.0-alpha);\r\n      alpha*=alpha;\r\n      Cd.a=alpha+alpha;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n// \r\n// For items/pickups on the ground\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Item Shaders                                         //\r\n/////////////////////////////////////////////////////////\r\nexport function itemVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec2 time;\r\n    uniform float intensity;\r\n    uniform float rate;\r\n    varying vec3 pos;\r\n    varying float nDot;\r\n    varying vec2 vUv;\r\n    varying vec2 nUv;\r\n    \r\n    void main(){\r\n      vUv=uv;\r\n      nUv=uv*.5+vec2(rate*time.x*-.1, 0.0);\r\n      nUv.x=sin(nUv.x)*.5+.5;\r\n      vec3 camDir=normalize( (projectionMatrix*viewMatrix*vec4(0.0,0.0,-1.0,1.0)).xyz );\r\n      nDot=dot( normal, camDir );\r\n      \r\n      vec2 nUV=position.xy*.01+vec2(time.x*rate*.1, time.x*rate*.1);\r\n      vec3 pos=position;\r\n      vec4 modelViewPosition=modelViewMatrix * vec4(pos, 1.0);\r\n      gl_Position = projectionMatrix*modelViewPosition;\r\n      \r\n    }`;\r\n  return ret;\r\n}\r\nexport function itemFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec3 color;\r\n    uniform sampler2D alphaMap;\r\n    uniform vec2 time;\r\n    uniform float intensity;\r\n    uniform float rate;\r\n    uniform sampler2D cloudNoise;\r\n    varying vec3 pos;\r\n    varying float nDot;\r\n    varying vec2 vUv;\r\n    varying vec2 nUv;\r\n    \r\n    void main() {\r\n      vec4 Cd=vec4( color, 1.0);\r\n      float alpha=texture2D(alphaMap,vUv).r;\r\n      float noise=length(texture2D(cloudNoise,nUv).rgb)*.5;\r\n      float blender=(nDot*.5+.5);\r\n      Cd.rgb=color*blender;\r\n      Cd.rgb*=intensity*alpha;\r\n      Cd.a=blender*alpha+noise*alpha;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\nexport function itemZoomFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D color;\r\n    uniform vec2 time;\r\n    uniform float intensity;\r\n    uniform sampler2D cloudNoise;\r\n    varying vec2 vUv;\r\n    \r\n    void main() {\r\n      vec4 Cd=texture2D(color,vUv);\r\n      Cd.a=Cd.b;\r\n      Cd.rgb=vec3( Cd.rg*Cd.a, 0.0 );\r\n      Cd.rgb*=Cd.a* mix(.7, 1.0, gl_FrontFacing);\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n","\r\n//import {shaderHeader} from \"../core/ShaderHeader.js\";\r\nimport { \r\n  ShaderChunk\r\n} from \"../../../libs/three/three.module.min.js\";\r\n\r\n///////////////////////////////////////////////////////////\r\n// Geometry Shaders                                     //\r\n/////////////////////////////////////////////////////////\r\n\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// -- pxlNav Principled Shader - -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\nexport function pxlPrincipledVert(shadows=false){\r\n  //let ret=shaderHeader();\r\n  let ret=`\r\n    attribute vec3 color;\r\n    attribute vec3 shading;\r\n\r\n    varying float vFlicker;\r\n    varying vec2 vUv;\r\n    varying vec3 vCd;\r\n    varying vec3 vPos;\r\n    varying vec3 vLocalPos;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalN;\r\n    varying vec3 vShading;\r\n    `;\r\n    if( shadows ){\r\n      ret += `\r\n        ${ShaderChunk[ \"common\" ]}\r\n        ${ShaderChunk[ \"shadowmap_pars_vertex\" ]}\r\n      `;\r\n    }\r\n    ret += `\r\n    \r\n    void main(){\r\n        vUv=uv;\r\n        \r\n        vShading=shading;\r\n        \r\n        vCd=color;\r\n        \r\n        vec3 transformed = vec3( position );\r\n        vec3 objectNormal = vec3( normal );\r\n        vec3 transformedNormal = objectNormal;\r\n        \r\n        \r\n        vLocalPos = position;\r\n        vN = (modelViewMatrix * vec4(normal, 0.0)).xyz;\r\n        vLocalN = ( modelMatrix * vec4(normal, 0.0)).xyz;\r\n        vec4 mvPos=modelViewMatrix * vec4(position, 1.0);\r\n        gl_Position = projectionMatrix*mvPos;\r\n        vPos = mvPos.xyz;\r\n        \r\n        `;\r\n        if( shadows ){\r\n          ret += `\r\n            ${ShaderChunk[ \"worldpos_vertex\" ]}\r\n            ${ShaderChunk[ \"shadowmap_vertex\" ]}\r\n          `;\r\n        }\r\n        ret += `\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n\r\n// Shadow Map Code Used From Three.JS; shadowmap_pars_fragment\r\nexport function pxlPrincipledFrag( ShaderParms, useColor, useFog, lights, shadows, pointLightCount ){\r\n  \r\n  let hasSpecular = false;\r\n  let specularMult = 1.0;\r\n  if( ShaderParms.hasOwnProperty(\"Specular\") &&  ShaderParms.Specular > 0 ){ // Float\r\n    hasSpecular = true;\r\n    specularMult = ShaderParms.Specular;\r\n  }\r\n  \r\n  let hasVertColor = false;\r\n  if( ShaderParms.PointColor ){ // Boolean\r\n    hasVertColor=true;\r\n  }\r\n  \r\n  let hasSurfaceNoise = true;\r\n  let surfaceNoiseMult = \"1.0\";\r\n  if( ShaderParms.hasOwnProperty(\"SurfaceNoise\") ){\r\n    if( ShaderParms.SurfaceNoise%1 == 0 ){ // Boolean\r\n      surfaceNoiseMult = ShaderParms.SurfaceNoise+\".0\";\r\n    }\r\n    if(surfaceNoiseMult==\"0.0\"){\r\n      hasSurfaceNoise=false;\r\n    }\r\n  }\r\n  \r\n  \r\n  //let ret=shaderHeader();\r\n  let ret=`\r\n        `;\r\n    if(!useColor){\r\n      ret+=`uniform sampler2D dTexture;`;\r\n    }\r\n    ret+=`\r\n    \r\n    uniform sampler2D noiseTexture;\r\n    uniform sampler2D detailTexture;\r\n        \r\n    uniform vec2 time;\r\n    uniform float cdMult;\r\n    uniform vec3 fogColor;\r\n    \r\n    varying vec2 vUv;\r\n    varying vec3 vCd;\r\n    varying vec3 vPos;\r\n    varying vec3 vLocalPos;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalN;\r\n    varying vec3 vShading;\r\n    \r\n    varying float vFlicker;\r\n    \r\n    #define PI 3.14159265358979\r\n    \r\n    struct PointLight {\r\n      vec3 color;\r\n      float decay;\r\n      float distance;\r\n      vec3 position;\r\n    };\r\n    struct DirLight {\r\n      vec3 color;\r\n      vec3 direction;\r\n    };\r\n    `;\r\n    if(lights){\r\n      ret+=`\r\n    #if NUM_POINT_LIGHTS > 0\r\n      uniform PointLight pointLights[NUM_POINT_LIGHTS];\r\n    #endif\r\n    #if NUM_DIR_LIGHTS > 0\r\n      uniform DirLight directionalLights[NUM_DIR_LIGHTS];\r\n    #endif\r\n      `;\r\n    }\r\n    if(shadows){\r\n      ret+=`\r\n      \r\n      ${ShaderChunk[ \"packing\" ]}\r\n      \r\n      #if NUM_POINT_LIGHT_SHADOWS > 0\r\n          uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\r\n          varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\r\n          struct PointLightShadow {\r\n              float shadowBias;\r\n              float shadowNormalBias;\r\n              float shadowRadius;\r\n              vec2 shadowMapSize;\r\n              float shadowCameraNear;\r\n              float shadowCameraFar;\r\n          };\r\n          uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\r\n      #endif\r\n      float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\r\n          return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\r\n      }\r\n      vec2 cubeToUV( vec3 v, float texelSizeY ) {\r\n          vec3 absV = abs( v );\r\n          float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\r\n          absV *= scaleToCube;\r\n          v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\r\n          vec2 planar = v.xy;\r\n          float almostATexel = 1.5 * texelSizeY;\r\n          float almostOne = 1.0 - almostATexel;\r\n          if ( absV.z >= almostOne ) {\r\n              if ( v.z > 0.0 )\r\n                  planar.x = 4.0 - v.x;\r\n          } else if ( absV.x >= almostOne ) {\r\n              float signX = sign( v.x );\r\n              planar.x = v.z * signX + 2.0 * signX;\r\n          } else if ( absV.y >= almostOne ) {\r\n              float signY = sign( v.y );\r\n              planar.x = v.x + 2.0 * signY + 2.0;\r\n              planar.y = v.z * signY - 2.0;\r\n          }\r\n          return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\r\n      }\r\n      float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\r\n          vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\r\n          vec3 lightToPosition = shadowCoord.xyz;\r\n          float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\r\n           dp += shadowBias;\r\n          vec3 bd3D = normalize( lightToPosition );\r\n          #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\r\n              vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\r\n              return (\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\r\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\r\n              ) * ( .11111111111 ) * (1.0-dp);\r\n          #else\r\n              return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) * (1.0-dp);\r\n          #endif\r\n      }\r\n    \r\n      vec3 directionToLight( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar  ){\r\n          vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\r\n          vec3 lightToPosition = shadowCoord.xyz;\r\n          float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\r\n          dp += shadowBias;\r\n          vec3 bd3D = normalize( lightToPosition );\r\n          vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\r\n          return texture2D( pointShadowMap[0], cubeToUV( bd3D, texelSize.y )).rgb;\r\n      }\r\n      `;\r\n    }\r\n        \r\n    ret+=`\r\n    void main(){\r\n      `;\r\n        if(hasVertColor){\r\n            ret+=`vec3 vertCd = vCd;`;\r\n        }else{\r\n          if(useColor){\r\n            \r\n            let toFloatStr = ( v )=>{\r\n              if( v%1 == 0 ){\r\n                return v+\".0\";\r\n              }else{\r\n                return v+\"\";\r\n              }\r\n            };\r\n            \r\n            let r= toFloatStr(useColor.r);\r\n            let g= toFloatStr(useColor.g);\r\n            let b= toFloatStr(useColor.b);\r\n            ret+=`vec3 vertCd = vec3( ${r}, ${g}, ${b} ) ;`;\r\n          }else{\r\n            ret+=`vec3 vertCd = texture2D(dTexture,vUv).rgb ;`\r\n          }\r\n        }\r\n        ret+=`\r\n        \r\n        vec4 Cd=vec4( vertCd, 1.0 );\r\n        float specular = 0.0;\r\n        `;\r\n        if( useFog ){\r\n          ret+=`\r\n          float depth = gl_FragCoord.z / gl_FragCoord.w *.0004;\r\n          Cd.rgb=  mix( Cd.rgb, fogColor, depth );\r\n          `;\r\n        }\r\n        \r\n        let surfaceNoiseBaseStr = \"\";\r\n        let surfaceNoiseStr = \"\";\r\n        let surfaceNoiseNoShadowStr = \"\";\r\n        if(hasSurfaceNoise){\r\n            if(surfaceNoiseMult!=\"1.0\"){\r\n              surfaceNoiseBaseStr = \"*\"+surfaceNoiseMult;\r\n            }\r\n            ret+=`\r\n            float detailMult = (texture2D(detailTexture,vUv*4.0).r)*.5+.5;\r\n            `;\r\n            surfaceNoiseStr= `+detailMult * (shadowInf*.5+.5) ${surfaceNoiseBaseStr}`;\r\n            surfaceNoiseNoShadowStr= `(detailMult+.5) ${surfaceNoiseBaseStr}`;\r\n        }\r\n        \r\n        if(lights){\r\n          ret+=`\r\n          #if NUM_POINT_LIGHTS > 0 || NUM_DIR_LIGHTS > 0\r\n            vec4 lights = vec4(0.0, 0.0, 0.0, 1.0);\r\n          #endif\r\n          \r\n          #if NUM_POINT_LIGHTS > 0\r\n            for(int i = 0; i < NUM_POINT_LIGHTS; i++) {\r\n                vec3 lightVector = normalize(vPos - pointLights[i].position);\r\n                vec3 lightInf= clamp(dot(-lightVector, vN), 0.0, 1.0) * pointLights[i].color;\r\n                //lightInf = mix( lightInf, 1.0-(1.0-lightInf)*(1.0-lightInf), .2);\r\n                float distFalloff =  1.0-min(1.0, length(vPos - pointLights[i].position) * pointLights[i].decay*.008 );\r\n                lightInf *=  distFalloff;\r\n                lights.rgb += lightInf;\r\n                `;\r\n                if( hasSpecular ){\r\n                  ret+=`\r\n                  distFalloff = (dot(vN, normalize(-vPos)) )*distFalloff;\r\n                  specular += distFalloff;\r\n                  `;\r\n                }\r\n                ret+=`\r\n            }\r\n          #endif\r\n            \r\n          #if NUM_DIR_LIGHTS > 0\r\n            for(int i = 0; i < NUM_DIR_LIGHTS; i++) {\r\n                vec3 lightInf= max(0.0, dot(directionalLights[i].direction, vN)*.65+.35) * directionalLights[i].color;\r\n                lights.rgb += lightInf;\r\n            }\r\n          #endif\r\n            \r\n            \r\n          #if NUM_POINT_LIGHTS > 0 || NUM_DIR_LIGHTS > 0\r\n            Cd.rgb *= lights.rgb;\r\n          #endif\r\n          `;\r\n          if( hasSpecular ){\r\n            ret+=`\r\n            Cd.rgb += vertCd * specular * ${specularMult};\r\n            `;\r\n          }\r\n        }\r\n        \r\n        \r\n        if(shadows){\r\n          ret+=`\r\n          #if NUM_POINT_LIGHT_SHADOWS > 0\r\n            \r\n            float shadowInf = 0.0;\r\n            float detailInf = 0.0;\r\n            float lShadow = 0.0;\r\n            int i = 0;\r\n            `;\r\n            \r\n            for( let x=0; x<pointLightCount; ++x){\r\n                ret+=`\r\n                i=${x};\r\n                lShadow = getPointShadow( pointShadowMap[${x}], pointLightShadows[i].shadowMapSize, pointLightShadows[i].shadowBias*.75, pointLightShadows[i].shadowRadius*1.65, vPointShadowCoord[i], pointLightShadows[i].shadowCameraNear, pointLightShadows[i].shadowCameraFar );\r\n                shadowInf = max( lShadow, shadowInf);\r\n                `;\r\n            }\r\n            ret+=`\r\n            shadowInf = shadowInf;\r\n            Cd.rgb*=shadowInf ${surfaceNoiseStr} ;\r\n            `;\r\n            if(hasSurfaceNoise){\r\n              ret+=`\r\n              #else\r\n                Cd.rgb*=${surfaceNoiseNoShadowStr};\r\n              `;\r\n            }\r\n            ret+=`\r\n          #endif\r\n          `;\r\n        }else{\r\n          if(hasSurfaceNoise){\r\n            ret+=`\r\n            Cd.rgb*=${surfaceNoiseNoShadowStr};\r\n            `;\r\n          }\r\n        }\r\n        ret+=`\r\n        Cd*=cdMult;\r\n        \r\n        // Convert to sRGB\r\n        Cd.rgb = mix( 12.92 * Cd.rgb, 1.055 * pow(Cd.rgb, vec3(1.0 / 2.4)) - 0.055, step(0.0031308, Cd.rgb) );\r\n\r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024, 2025\r\n\r\nimport {shaderHeader} from \"../../../shaders/core/ShaderHeader.js\";\r\n\r\nexport const emberWispsSettings = {\r\n  'BaseSpeed' : 0.77,\r\n  'EmberSpread' : 10.0,\r\n  'EmberFadeDistance' : 0.04,\r\n  'ShiftFromZero' : 0.6,\r\n  'MultPosXZ' : 1.313\r\n};\r\n\r\n\r\nexport function emberWispsVert( shaderSettings = {} ){\r\n\r\n  shaderSettings = Object.assign( {}, emberWispsSettings, shaderSettings );\r\n\r\n  let toFloatStr = ( num ) => {\r\n    return (num+\"\").includes(\".\") ? num : num+\".0\";\r\n  }\r\n\r\n\r\n  let ret=`\r\n// Ember Settings\r\n  const vec3 EmberEarlyCd = vec3( 0.8, 0.5, .1 );\r\n  const vec3 EmberOldCd = vec3( 0.634, 0.20, 0.20 );\r\n  const float BaseSpeed = ${toFloatStr(shaderSettings.BaseSpeed)};\r\n  const float EmberSpread = ${toFloatStr(shaderSettings.EmberSpread)};\r\n  const float EmberFadeDistance = ${toFloatStr(shaderSettings.EmberFadeDistance)};\r\n  const float ShiftFromZero = ${toFloatStr(shaderSettings.ShiftFromZero)};\r\n  const float MultPosXZ = ${toFloatStr(shaderSettings.MultPosXZ)};\r\n\r\n// -- -- --\r\n  `;\r\n  ret += shaderHeader();\r\n  ret +=`\r\n// -- -- --\r\n\r\nuniform sampler2D noiseTexture;\r\nuniform vec2 time;\r\nuniform vec3 windDir;\r\nuniform vec3 offsetPos;\r\nuniform float rate;\r\nuniform float pointScale;\r\n\r\nattribute vec4 seeds;\r\nattribute vec2 atlas;\r\n\r\nvarying vec3 vCd;\r\nvarying vec2 vAtlas;\r\nvarying vec2 vRot;\r\nvarying float vAlpha;\r\nvarying float vBrightness;\r\n\r\nfloat colDetect( vec2 pos, vec2 pt, vec2 n1, vec2 n2 ){\r\n    vec2 ref=pos-pt;\r\n    float ret = step( dot( ref, n1 ), 0.0 );\r\n    ret *= step( dot( ref, n2 ), 0.0 );\r\n    \r\n    return ret;\r\n}\r\n\r\nvoid main(){\r\n    vAtlas=atlas;\r\n    \r\n    float rot=seeds.z+time.x*seeds.z*3.;\r\n    vRot=vec2( sin(rot), cos(rot) );\r\n    \r\n    vec3 pOff=vec3(seeds.z, seeds.y, seeds.w) ;\r\n    \r\n    vec2 sinUV=abs(sin(pOff.xz*.5+seeds.zw+time.x*.1)*.5+.5);\r\n    vec3 noiseCd=texture2D(noiseTexture, sinUV ).rgb*4.5 + 0.50;\r\n    \r\n    float rateShift = (BaseSpeed*(seeds.x*.4+.6));\r\n    float t=time.x*rate*rateShift;\r\n    \r\n    // Random shift to a cycle y movement\r\n    //float shiftY= mod( t+t*seeds.x+seeds.z*8.0+noiseCd.r*10.20*(seeds.y*2.0-1.0)+noiseCd.b+(-seeds.x+seeds.y)*4.0, 10.0);\r\n    \r\n    float shiftY = (t+t*seeds.x+seeds.z*8.0+noiseCd.r*10.20*(seeds.y*2.0-1.0)+noiseCd.b+(-seeds.x+seeds.y)*4.0) * 0.1;\r\n    float lifePerc = fract( shiftY );\r\n    float loopSeed = floor( shiftY ) * seeds.w * 20.0;\r\n    shiftY = lifePerc * 10.0;\r\n    \r\n    // Change up ages of embers\r\n    float fadeDrop = min(1.0, lifePerc*lifePerc*4. ); \r\n    //\r\n    float life = 1.0-max(0.0,abs(shiftY-seeds.x*.1)*(1.0-(seeds.x*1.0)) );\r\n    life = 1.0-((shiftY*.001-seeds.x*.2) );\r\n    \r\n    pOff.y=shiftY*seeds.y;\r\n    \r\n    pOff.y=(pOff.y)+shiftY; \r\n    vec3 pos= pOff ;\r\n    \r\n\r\n    float spreadPerc = min(1.0, life*2.) * EmberSpread;\r\n    pos.xz=fract(noiseCd.rg*noiseCd.r + loopSeed)*(seeds.x)*(life*seeds.zy*fract(seeds.w*30.0 )) * spreadPerc ;\r\n    \r\n    // Add gap from (0,0) and scale to spread after shift\r\n    pos.x = ( pos.x + (step( 0.0, pos.x )-.5) * ShiftFromZero ) * MultPosXZ;\r\n    pos.z = ( pos.z + (step( 0.0, pos.z )-.5) * ShiftFromZero ) * MultPosXZ;\r\n    \r\n    // Directional push\r\n    float yPush = ( life * (life*.5+.5))  * min(1.0,pos.y*.03) * 4.2;\r\n    pos.xz += windDir.xz * yPush * max(0.0,pos.y-.5)*(.5+life*.5);\r\n    pos.y += yPush;\r\n    \r\n    float pToCamLen = length(pos-cameraPosition);\r\n    float pScalar = max( 0., (1.-pToCamLen *  0.0806 )); // 0.0385\r\n    pScalar += max(0.0,pToCamLen - 0.4) * 0.005;\r\n    \r\n    vAlpha = min(1.0, (seeds.x*.15+.7) * pScalar*3.0 );\r\n\r\n    \r\n    vAlpha=max(0.0, life*life-seeds.z-seeds.z);\r\n    float distMult = ( length( pos )*EmberFadeDistance );\r\n    distMult = 1.0 - ( distMult * distMult );\r\n    vAlpha *= distMult;\r\n    \r\n    \r\n    float pScale = pointScale * seeds.w * pScalar + 2.0;\r\n    \r\n    gl_PointSize =  pScale*fadeDrop ;\r\n    \r\n    \r\n    float tightenBase = min( 1.0, pos.y* 0.12 + .32 );\r\n    pos.xz *= tightenBase*tightenBase;\r\n    \r\n    // Apply Offset Position and move to camera space\r\n    vec4 mvPos=modelViewMatrix * vec4(pos+offsetPos, 1.0);\r\n    gl_Position = projectionMatrix*mvPos;\r\n    \r\n    float cdAge = clamp( 1.0 - life, 0.0, 1.0);\r\n    \r\n    vCd = mix( EmberEarlyCd, EmberOldCd, cdAge )  ;\r\n    \r\n    vBrightness = 1.045 + fadeDrop*2.;\r\n}`;\r\n  return ret;\r\n}\r\n\r\nexport function emberWispsFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D atlasTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    \r\n    varying vec3 vCd;\r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vAlpha;\r\n    varying float vBrightness;\r\n    \r\n    \r\n    \r\n    // -- -- --\r\n    \r\n    // Human Eye Adjusted Luminance\r\n    //   https://en.wikipedia.org/wiki/Grayscale\r\n    float luma(vec3 color) {\r\n      return dot( color, vec3(0.2126, 0.7152, 0.0722) );\r\n    }\r\n      \r\n    // -- -- --\r\n    \r\n    \r\n    void main(){\r\n        vec2 uv=gl_PointCoord;\r\n\r\n        vec2 pos = (uv-.5)*.85;\r\n\r\n        vec2 rotUV;\r\n        rotUV.x = vRot.y * pos.x - vRot.x * pos.y;\r\n        rotUV.y = vRot.x * pos.x + vRot.y * pos.y;\r\n        rotUV=(rotUV+.5)*.25+vAtlas;\r\n        \r\n        \r\n        vec4 dustCd=texture2D(atlasTexture,rotUV);\r\n        float alpha= clamp( dustCd.a*vAlpha, 0.0, 1.0) ;\r\n        \r\n        dustCd.rgb *= vBrightness;\r\n        \r\n        float dirtLuma = luma( dustCd.rgb );\r\n        vec4 Cd=vec4( dirtLuma * vCd * vBrightness, alpha );\r\n        \r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024-2025\r\n\r\nimport {shaderHeader} from \"../../../shaders/core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Floating Dust Shaders                                //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const dustSettings = {\r\n  \"pOpacity\" : 1.0,\r\n  \"proxDist\" : 200,\r\n  \"hasLights\" : false,\r\n  \"fadeOutScalar\" : 1.59 , \r\n  \"wanderInf\" : 1.0 , \r\n  \"wanderRate\" : 1.0 , \r\n  \"wanderFrequency\" : 2.85 \r\n};\r\n\r\nexport function dustVert( userDustData = {} ){\r\n  \r\n  userDustData = Object.assign( {}, dustSettings, userDustData );\r\n  \r\n  let toFloatStr = ( num ) => {\r\n    return (num+\"\").includes(\".\") ? num : num+\".0\";\r\n  }\r\n\r\n  let ret =`\r\n    // Fade-Out Influence multiplier\r\n        const float ParticleOpacity = ${ toFloatStr( userDustData.pOpacity ) };\r\n        const float FadeOutScalar = ${ toFloatStr( userDustData.fadeOutScalar ) };\r\n        const float WanderInf = ${ toFloatStr( userDustData.wanderInf ) };\r\n        const float WanderRate = ${ toFloatStr( userDustData.wanderRate ) };\r\n        const float WanderFrequency = ${ toFloatStr( userDustData.wanderFrequency ) };\r\n\r\n        #define PROX ${userDustData.proxDist.toFixed(3)}\r\n        #define PROX_INV 1.0/${(userDustData.proxDist * 0.80).toFixed(3)}\r\n\r\n    // -- -- --\r\n  `;\r\n  ret += shaderHeader();\r\n  ret +=`\r\n    // -- -- --\r\n\r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    uniform vec2 pointScale;\r\n    uniform vec3 positionOffset;\r\n    uniform vec3 windDir;\r\n  `;\r\n  if( !!userDustData.hasLights ){\r\n    ret+=`\r\n  #if NUM_POINT_LIGHTS > 0\r\n    struct PointLight {\r\n      vec3 color;\r\n      float decay;\r\n      float distance;\r\n      vec3 position;\r\n    };\r\n    uniform PointLight pointLights[NUM_POINT_LIGHTS];\r\n  #endif\r\n    `;\r\n  }\r\n  ret+=`\r\n    \r\n    attribute vec4 seeds;\r\n    attribute vec2 atlas;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vScalar;\r\n    varying float vAlpha;\r\n    \r\n    \r\n    // -- -- --\r\n\r\n    float colDetect( vec2 pos, vec2 pt, vec2 n1, vec2 n2 ){\r\n        vec2 ref=pos-pt;\r\n        float ret = step( dot( ref, n1 ), 0.0 );\r\n        ret *= step( dot( ref, n2 ), 0.0 );\r\n        \r\n        return ret;\r\n    }\r\n    \r\n    vec3 randomVec( vec3 seed ) {\r\n      return vec3(\r\n        fract( dot(seed,vec3(12.9898, 78.233, 45.164)) * 43758.5453 ),\r\n        fract( dot(seed,vec3(93.9898, 67.345, 12.345)) * 43758.5453 ),\r\n        fract( dot(seed,vec3(54.123, 98.765, 32.123)) * 43758.5453 )\r\n      );\r\n    }\r\n\r\n    // -- -- --\r\n    \r\n    void main(){\r\n        vAtlas=atlas;\r\n        \r\n        float rot=seeds.z+time.x*(seeds.z*2.);\r\n        vRot=vec2( sin(rot), cos(rot) );\r\n        \r\n        float t=time.x*rate*0.;\r\n        \r\n        vec3 pOff=seeds.xyz * vec3(PROX);\r\n        \r\n        // Loop point positions based on camera location\r\n        float yFract=fract(t+seeds.x);\r\n        pOff.xyz += time.x * windDir.xyz; \r\n        vec3 pos= pOff ;\r\n        \r\n        vec3 noiseCd=texture2D(noiseTexture, sin(pos.xz*.05+seeds.xz+time.x*2.1) ).rgb-.5;\r\n        vec3 noiseCdb=texture2D(noiseTexture, sin((1.0-pos.xz)*.05+seeds.yw+time.x*.1) ).rgb-.5;\r\n        \r\n        // -- -- --\r\n        \r\n        // Meandering points\r\n        \r\n        \r\n        vec3 randDirA = randomVec( seeds.xyz );\r\n        vec3 randDirB = randomVec( seeds.wyz );\r\n        vec3 randDirC = randomVec( seeds.zxy );\r\n        vec3 randDirBlend = mix( randDirA, randDirB, sin( randDirC * time.x * WanderFrequency ) ) * WanderInf;\r\n        \r\n        // -- -- --\r\n        \r\n        pos += randDirBlend * sin( seeds.x+seeds.z+noiseCd.r*noiseCd.g*seeds.y+noiseCdb.b + (time.x+seeds.y*10.) * WanderRate * seeds.w*noiseCdb.g ) * WanderRate * ( 5. + seeds.z );\r\n\r\n        pos += (noiseCd * noiseCdb ) * 50. * ( (seeds.w+.75)*4.);\r\n\r\n        pos = mod( pos-cameraPosition, PROX) + cameraPosition - PROX*.5;\r\n        pos+=positionOffset;\r\n        \r\n        \r\n        float pScalar = clamp( (1.-length(pos-cameraPosition )*PROX_INV) * FadeOutScalar, 0.0, 1.0  );\r\n        float aMult = min(1.0, pScalar*3.0);\r\n        vAlpha = (seeds.x*.5+.7) * aMult;\r\n\r\n  `;\r\n\r\n  if(  !!userDustData.hasLights ){\r\n    ret+=`\r\n      #if NUM_POINT_LIGHTS > 0\r\n        float lightInf = 1.0;\r\n        for(int x = 0; x < NUM_POINT_LIGHTS; ++x ){\r\n            vec3 lightVector = normalize(pos - pointLights[i]);\r\n            lightInf = min(lightInf, length(pos - pointLights[i]) *.05 );\r\n        }\r\n        vAlpha*=(1.0-lightInf)*.8+.2;\r\n      #endif\r\n    `;\r\n  }\r\n\r\n  ret+=`\r\n        vScalar = pScalar * ParticleOpacity ;\r\n        float pScale = pointScale.x * (seeds.w*.5+.5)*pScalar + 1.0;\r\n        pScale *= 1.0 - clamp( ((1.0-pScalar)-.5)*10.0 * FadeOutScalar, 0.0, 1.0 );\r\n        pScale *= step( .5, atlas.x )*.5+1.;\r\n\r\n        gl_PointSize = pScale;\r\n        \r\n        vec4 mvPos=viewMatrix * vec4(pos, 1.0);\r\n        gl_Position = projectionMatrix*mvPos;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\nexport function dustFrag( hasAlphaMap = false ){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D atlasTexture;\r\n    uniform sampler2D atlasAlphaTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vScalar;\r\n    varying float vAlpha;\r\n    \r\n    void main(){\r\n\r\n        if( vAlpha < .01 ){\r\n          discard;\r\n        }\r\n\r\n\r\n        vec2 uv=gl_PointCoord;\r\n\r\n        vec2 pos = (uv-.5)*.85;\r\n\r\n        vec2 rotUV;\r\n        rotUV.x = vRot.y * pos.x - vRot.x * pos.y;\r\n        rotUV.y = vRot.x * pos.x + vRot.y * pos.y;\r\n        rotUV=(rotUV+.5)*.25+vAtlas;\r\n\r\n      `;\r\n  if( hasAlphaMap ){\r\n    // Split Color & Alpha maps\r\n    ret+=`\r\n        vec4 dustCd=vec4(\r\n                        texture2D(atlasTexture,rotUV).rgb, // rgb\r\n                        texture2D(atlasAlphaTexture,rotUV).r // alpha\r\n                      ); \r\n\r\n    `;\r\n  }else{\r\n    // RGBA Texture Atlas; PNG\r\n    ret+=`\r\n        vec4 dustCd= texture2D(atlasTexture,rotUV);\r\n\r\n    `;\r\n  }\r\n\r\n  ret+=`\r\n        float alpha = clamp( dustCd.a * vAlpha * vScalar, 0.0, 1.0 );\r\n        vec4 Cd=vec4( dustCd.rgb, alpha );\r\n\r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024-2025\r\n\r\nimport {shaderHeader} from \"../../../shaders/core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Floating Dust Shaders                                //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const heightMapSettings = {\r\n  \"pOpacity\" : 1.0,\r\n  \"proxDist\" : 200,\r\n  \"hasLights\" : false,\r\n  \"fadeOutScalar\" : 1.59 , \r\n  \"wanderInf\" : 1.0 , \r\n  \"wanderRate\" : 1.0 , \r\n  \"wanderFrequency\" : 2.85,\r\n  \"jumpHeightMult\" : 15.0 \r\n};\r\n\r\nexport function heightMapVert( userDustData = {} ){\r\n  \r\n  userDustData = Object.assign( {}, heightMapSettings, userDustData );\r\n  \r\n  let toFloatStr = ( num ) => {\r\n    return (num+\"\").includes(\".\") ? num : num+\".0\";\r\n  }\r\n\r\n  let ret =`\r\n    // Fade-Out Influence multiplier\r\n        const float ParticleOpacity = ${ toFloatStr( userDustData.pOpacity ) };\r\n        const float FadeOutScalar = ${ toFloatStr( userDustData.fadeOutScalar ) };\r\n        const float WanderInf = ${ toFloatStr( userDustData.wanderInf ) };\r\n        const float WanderRate = ${ toFloatStr( userDustData.wanderRate ) };\r\n        const float WanderFrequency = ${ toFloatStr( userDustData.wanderFrequency ) };\r\n        const float JumpHeightMult = ${ toFloatStr( userDustData.jumpHeightMult ) };\r\n\r\n        #define PROX ${userDustData.proxDist.toFixed(3)}\r\n        #define PROX_INV 1.0/${(userDustData.proxDist * 0.98).toFixed(3)}\r\n\r\n    // -- -- --\r\n  `;\r\n  ret += shaderHeader();\r\n  ret +=`\r\n    // -- -- --\r\n\r\n    uniform sampler2D heightMap;\r\n    uniform sampler2D spawnMap;\r\n    uniform vec3 tankSize;\r\n    \r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    uniform vec2 pointScale;\r\n    uniform vec3 positionOffset;\r\n    uniform vec3 windDir;\r\n  `;\r\n  if( !!userDustData.hasLights ){\r\n    ret+=`\r\n  #if NUM_POINT_LIGHTS > 0\r\n    struct PointLight {\r\n      vec3 color;\r\n      float decay;\r\n      float distance;\r\n      vec3 position;\r\n    };\r\n    uniform PointLight pointLights[NUM_POINT_LIGHTS];\r\n  #endif\r\n    `;\r\n  }\r\n  ret+=`\r\n    \r\n    attribute vec4 seeds;\r\n    attribute vec2 atlas;\r\n    \r\n    varying vec3 vCd;\r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vAlpha;\r\n    \r\n    \r\n    // -- -- --\r\n\r\n    float colDetect( vec2 pos, vec2 pt, vec2 n1, vec2 n2 ){\r\n        vec2 ref=pos-pt;\r\n        float ret = step( dot( ref, n1 ), 0.0 );\r\n        ret *= step( dot( ref, n2 ), 0.0 );\r\n        \r\n        return ret;\r\n    }\r\n    \r\n    vec3 randomVec( vec3 seed ) {\r\n      return vec3(\r\n        fract( dot(seed,vec3(12.9898, 78.233, 45.164)) * 43758.5453 ),\r\n        fract( dot(seed,vec3(93.9898, 67.345, 12.345)) * 43758.5453 ),\r\n        fract( dot(seed,vec3(54.123, 98.765, 32.123)) * 43758.5453 )\r\n      );\r\n    }\r\n\r\n    // -- -- --\r\n    \r\n    #define oneThird 0.3333333333333333\r\n    #define srgbLow 1.0 / 12.92\r\n    #define srgbHigh 1.0 / 1.055\r\n\r\n    vec3 sRGBToLinear(vec3 srgb) {\r\n      return vec3(\r\n        mix( srgb.r * srgbLow,  pow((srgb.r + 0.055) * srgbHigh, 2.4), step(0.04045, srgb.r) ),\r\n        mix( srgb.g * srgbLow,  pow((srgb.g + 0.055) * srgbHigh, 2.4), step(0.04045, srgb.g) ),\r\n        mix( srgb.b * srgbLow,  pow((srgb.b + 0.055) * srgbHigh, 2.4), step(0.04045, srgb.b) )\r\n      );\r\n    }\r\n\r\n    void main(){\r\n      vAtlas=atlas;\r\n      \r\n      float rot=seeds.z+time.x*(seeds.z*2.);\r\n      vRot=vec2( sin(rot), cos(rot) );\r\n      \r\n      float t=time.x*rate;\r\n      vec2 sizeXZ = tankSize.xz;\r\n      vec2 scaleXZ = 1.0 / (sizeXZ);\r\n      \r\n      vec3 pOff= (seeds.xyz - vec3(0.5,0.0,0.5)) * vec3(PROX);\r\n      \r\n      \r\n      // Loop point positions based on camera location\r\n      float yFract=fract(t+seeds.x);\r\n      pOff.xyz += time.x * windDir.xyz; \r\n      vec3 pos= pOff ;\r\n      \r\n      vec3 noiseCd=texture2D(noiseTexture, sin(pos.xz*.05+seeds.xz+(time.x + seeds.y)*2.1) ).rgb-.5;\r\n      vec3 noiseCdb=texture2D(noiseTexture, sin((1.0-pos.xz)*.05+seeds.yw+time.x*.1) ).rgb-.5;\r\n      \r\n      // -- -- --\r\n      \r\n      // Meandering points\r\n      \r\n      \r\n      vec3 randDirA = randomVec( seeds.xyz );\r\n      vec3 randDirB = randomVec( seeds.wyz );\r\n      vec3 randDirC = randomVec( seeds.zxy );\r\n      vec3 randDirBlend = mix( randDirA, randDirB, sin( randDirC * (time.x + seeds.w) * WanderFrequency ) ) * WanderInf;\r\n      \r\n      float jumpHeight = randDirBlend.y * abs(max(noiseCd.x,noiseCd.y));\r\n      \r\n      // -- -- --\r\n      \r\n\r\n      pos += randDirBlend * sin( seeds.x+seeds.z+noiseCd.r*noiseCd.g*seeds.y+noiseCdb.b + (time.x+seeds.y*10.) * WanderRate * seeds.w*noiseCdb.g ) * WanderRate * ( 5. + seeds.z );\r\n      pos += (noiseCd * noiseCdb ) * 50. * ( (seeds.w+.75)*4.);\r\n\r\n      vec3 mPos = modelMatrix[3].xyz;\r\n      pos.xz = mod( pos.xz - cameraPosition.xz , PROX) + cameraPosition.xz - PROX*.5 + positionOffset.xz;\r\n      \r\n      \r\n      vec2 fitPos = clamp( ( pos.xz - mPos.xz  ) * scaleXZ + .5, vec2(0.0), vec2(1.0));\r\n\r\n      \r\n      vec3 heightCd=texture2D(heightMap, fitPos ).rgb;\r\n      vec2 spawnOffset = vec2( 0.0161 );\r\n      float spawnInf= min(1.0, texture2D(spawnMap, fitPos ).r +\r\n                      texture2D(spawnMap, fitPos + spawnOffset ).r +\r\n                      texture2D(spawnMap, fitPos - spawnOffset ).r );\r\n      heightCd = sRGBToLinear( heightCd );\r\n      float heightVal = heightCd[0] * oneThird + heightCd[1] * oneThird + heightCd[2] * oneThird;\r\n\r\n      pos.y = tankSize.y * heightVal + mPos.y;\r\n      \r\n      \r\n      float pScalar = clamp( (1.-length(pos-cameraPosition )*PROX_INV) * FadeOutScalar, 0.0, 1.0  );\r\n      float aMult = min(1.0, pScalar*pScalar*4.0);\r\n      vAlpha = min( 1.0, (seeds.x*.5+.75) * aMult * spawnInf * 2.5 * ParticleOpacity );\r\n\r\n      pos.y += max(1.0, (jumpHeight*pScalar + positionOffset.y) * JumpHeightMult * WanderInf);\r\n\r\n  `;\r\n\r\n  if(  !!userDustData.hasLights ){\r\n    ret+=`\r\n      #if NUM_POINT_LIGHTS > 0\r\n        float lightInf = 1.0;\r\n        for(int x = 0; x < NUM_POINT_LIGHTS; ++x ){\r\n            vec3 lightVector = normalize(pos - pointLights[i]);\r\n            lightInf = min(lightInf, length(pos - pointLights[i]) *.05 );\r\n        }\r\n        vAlpha*=(1.0-lightInf)*.8+.2;\r\n      #endif\r\n\r\n    `;\r\n  }\r\n\r\n  ret+=`\r\n        float pScale = pointScale.x * (seeds.w*.25+1.0) * pScalar * 2.;\r\n        pScale *= 1.0 - clamp( ((1.0-pScalar)-.5)*10.0 * FadeOutScalar, 0.0, 1.0 );\r\n\r\n        gl_PointSize = pScale;\r\n        \r\n        vec4 mvPos=viewMatrix * vec4(pos, 1.0);\r\n        gl_Position = projectionMatrix*mvPos;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\nexport function heightMapFrag( hasAlphaMap = false ){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D atlasTexture;\r\n    uniform sampler2D atlasAlphaTexture;\r\n    uniform vec3 tint;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    \r\n    varying vec3 vCd;\r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vAlpha;\r\n    \r\n    void main(){\r\n\r\n        if( vAlpha < .01 ){\r\n          discard;\r\n        }\r\n\r\n\r\n        vec2 uv=gl_PointCoord;\r\n\r\n        /*vec2 pos = uv*.25-.125;\r\n        float vis = max(0.0, 1.0-max(0.0,length(pos)-.09)*20.);\r\n\r\n        vec2 rotUV;\r\n        rotUV.x = vRot.y * pos.x - vRot.x * pos.y;\r\n        rotUV.y = vRot.x * pos.x + vRot.y * pos.y;\r\n        rotUV=(rotUV+.125) + vAtlas;*/\r\n\r\n        vec2 pos = (uv-.5)*.85;\r\n\r\n        vec2 rotUV;\r\n        rotUV.x = vRot.y * pos.x - vRot.x * pos.y;\r\n        rotUV.y = vRot.x * pos.x + vRot.y * pos.y;\r\n        rotUV=(rotUV+.5)*.25+vAtlas;\r\n        \r\n\r\n      `;\r\n  if( hasAlphaMap ){\r\n    // Split Color & Alpha maps\r\n    ret+=`\r\n        vec4 dustCd=vec4(\r\n                        texture2D(atlasTexture,rotUV).rgb, // rgb\r\n                        texture2D(atlasAlphaTexture,rotUV).r // alpha\r\n                      ); \r\n\r\n    `;\r\n  }else{\r\n    // RGBA Texture Atlas; PNG\r\n    ret+=`\r\n        vec4 dustCd= texture2D(atlasTexture,rotUV);\r\n\r\n    `;\r\n  }\r\n\r\n  ret+=`\r\n        float alpha = min(1.0, dustCd.a*1.75) * vAlpha ;\r\n        vec4 Cd=vec4( dustCd.rgb * tint, alpha );\r\n\r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../../../shaders/core/ShaderHeader.js\";\r\n\r\nexport const smokeSettings = {\r\n    'BaseSpread' : 200.0,\r\n    'SmokeBrightness' : 0.65,\r\n    'InnerBulster' : -0.05,\r\n    'SmokeDensity' : 0.12,\r\n    'WindInfluenceBoost' : 0.45,\r\n    'TightenBaseSpread' : 1.0,\r\n    'TightenMidSpread' : 0.08,\r\n    'TightenTipSpread' : 0.20\r\n  };\r\n\r\n\r\nexport function smokeVert( shaderSettings = {} ){\r\n\r\n  shaderSettings = Object.assign( {}, smokeSettings, shaderSettings );\r\n\r\n  // -- -- --\r\n\r\n  let toFloatStr = ( num ) => {\r\n    return (num+\"\").includes(\".\") ? num : num+\".0\";\r\n  };\r\n\r\n  // -- -- --\r\n\r\n  let ret=`\r\n// Billowy goodness!\r\n  const float BaseSpread = ${toFloatStr(shaderSettings.BaseSpread)};\r\n  const float SmokeBrightness = ${toFloatStr(shaderSettings.SmokeBrightness)};\r\n  const float InnerBulster = ${toFloatStr(shaderSettings.InnerBulster)};\r\n  const float SmokeDensity = ${toFloatStr(shaderSettings.SmokeDensity)};\r\n  const float WindInfluenceBoost = ${toFloatStr(shaderSettings.WindInfluenceBoost)};\r\n\r\n  const float TightenBaseSpread = ${toFloatStr(shaderSettings.TightenBaseSpread)};\r\n  const float TightenMidSpread = ${toFloatStr(shaderSettings.TightenMidSpread)};\r\n  const float TightenTipSpread = ${toFloatStr(shaderSettings.TightenTipSpread)};\r\n\r\n  // -- -- --\r\n  `;\r\n  ret += shaderHeader();\r\n  ret+=` \r\n\r\n  // -- -- --\r\n         \r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    uniform vec3 windDir;\r\n    uniform vec3 offsetPos;\r\n    uniform vec2 pointScale;\r\n    uniform vec3 sliders;\r\n    \r\n    attribute vec4 seeds;\r\n    attribute vec2 atlas;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vAlpha;\r\n    varying float vBrightness;\r\n    \r\n    \r\n    #define PROX 6.0\r\n    \r\n    \r\n    float colDetect( vec2 pos, vec2 pt, vec2 n1, vec2 n2 ){\r\n      vec2 ref=pos-pt;\r\n      float ret = step( dot( ref, n1 ), 0.0 );\r\n      ret *= step( dot( ref, n2 ), 0.0 );\r\n      \r\n      return ret;\r\n    }\r\n     \r\n        \r\n    void main(){\r\n      vAtlas=atlas;\r\n      \r\n      float rot=seeds.z+time.x*(seeds.z*2.);\r\n      vRot=vec2( sin(rot), cos(rot) );\r\n      \r\n      vec3 pOff=vec3(seeds.z, seeds.y, seeds.w) ;\r\n      \r\n      vec2 sinUV=abs(sin(pOff.xz*.5+seeds.zw+time.x*.1)*.5+.5);\r\n      vec3 noiseCd=texture2D(noiseTexture, sinUV ).rgb*4.5 + 0.50;\r\n      \r\n      float t=time.x*rate;\r\n      float shiftY= mod( t+t*seeds.x+seeds.z*24.0+noiseCd.r+noiseCd.b+(seeds.x+seeds.y)*2.0, 14.0);\r\n      float life = max(0.0,(shiftY-seeds.x)*0.07142857142857142)*.9+.2;\r\n      float alphaMult = (1.0-(1.0-life)*(1.0-life))*SmokeDensity;\r\n      \r\n      pOff.y=shiftY*seeds.y*life - (1.0-life);\r\n      \r\n      pOff.y=(pOff.y)+shiftY; \r\n      vec3 pos= pOff ;\r\n      \r\n      \r\n      // Magic numbers!  Boo!!\r\n      float tightenTip = max(0.0,life-.73);\r\n      tightenTip = 1.0 - (1.0-tightenTip) * (1.0-tightenTip);\r\n      //tightenTip *= tightenTip;\r\n      float tightenBase = max(0.0, (1.0-life)*InnerBulster);\r\n      float tightenMid = max(0.0, TightenBaseSpread - tightenTip - tightenBase - seeds.x*.2);\r\n      \r\n      float curBaseSpread = BaseSpread * tightenBase +\r\n                            BaseSpread * tightenMid * TightenMidSpread +\r\n                            BaseSpread * tightenTip * TightenTipSpread ;\r\n      \r\n      //pos.xz=clamp((noiseCd.rg*noiseCd.b)*seeds.w, vec2(0.0), vec2(1.0))*curBaseSpread*(life*(seeds.zy*.6));\r\n      pos.xz=(noiseCd.rg*noiseCd.b)*seeds.w*curBaseSpread*life;\r\n      \r\n      // Wind -- Forces\r\n      //   Magic numbers, yarb!\r\n      float windInf = life * life * (life*.5+.5);\r\n      vec2 curWindDir = windInf * windDir.xz ;\r\n      \r\n      float yPush = ( life * (life*.5+.5))* min(1.0,pos.y*.12) * .08;\r\n      pos.xz += curWindDir*life + curWindDir * WindInfluenceBoost ;\r\n      \r\n      \r\n      // Alpha with cam distance inf\r\n      float pScalar = 1.0-min( 1.0, (length(pos-cameraPosition )*0.004) );\r\n      pScalar=1.0-(pScalar*pScalar);\r\n      float aMult = min(1.0, pScalar*2.0);\r\n      vAlpha = (seeds.x*.5+.7) * aMult;\r\n\r\n      \r\n      // Alpha from gettin' old\r\n      vAlpha=(1.0-life)*min(1.0,alphaMult);\r\n      vec3 doubleCd=texture2D(noiseTexture, sinUV+pos.xz*.5+vec2(seeds.y,pos.y)).rgb ;\r\n      pos.xz=(pos.xz*(0.9+seeds.xy*.2)+doubleCd.rb*10.0)*min(1.0,life+seeds.y);\r\n      \r\n      \r\n      // Draw size, particle scale\r\n      pScalar = 1.0-(1.0-pScalar)*.75*(1.0-pScalar);\r\n      float pScale = pointScale.x * seeds.w * 0.6 * pScalar + (175.0+125.0*life*pScalar)*(1.0-pScalar);\r\n      pScale += 150.0*(clamp(-(pScalar-.45)*10.0,0.0,1.0));\r\n\r\n      gl_PointSize = pScale;\r\n      \r\n      // Brightness multiplier\r\n      vBrightness = 1.0-tightenMid*.1 - tightenTip + tightenBase;\r\n      float originDelta = length(pos)*(-InnerBulster);\r\n      vBrightness *= max(0.0, 1.0-originDelta * life * 0.807) * SmokeBrightness;\r\n      \r\n      // Apply Offset Position and move to camera space\r\n      vec4 mvPos=modelViewMatrix * vec4(pos+offsetPos, 1.0);\r\n      gl_Position = projectionMatrix*mvPos;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\nexport function smokeFrag( hasAlphaMap = false ){\r\n  let ret = shaderHeader();\r\n  ret +=`\r\n    // -- -- --\r\n    \r\n    uniform sampler2D atlasTexture;\r\n    uniform sampler2D atlasAlphaTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vAlpha;\r\n    varying float vBrightness;\r\n    \r\n\r\n    // -- -- --\r\n    \r\n    // Human Eye Adjusted Luminance\r\n    //   https://en.wikipedia.org/wiki/Grayscale\r\n    float luma(vec3 color) {\r\n      return dot( color, vec3(0.2126, 0.7152, 0.0722) );\r\n    }\r\n      \r\n    // -- -- --\r\n      \r\n\r\n    void main(){\r\n        vec2 uv=gl_PointCoord;\r\n\r\n        vec2 pos = (uv-.5)*.85;\r\n\r\n        vec2 rotUV;\r\n        rotUV.x = vRot.y * pos.x - vRot.x * pos.y;\r\n        rotUV.y = vRot.x * pos.x + vRot.y * pos.y;\r\n        rotUV=(rotUV+.5)*.25+vAtlas;\r\n        \r\n      `;\r\n  if( hasAlphaMap ){\r\n    // Split Color & Alpha maps\r\n    ret+=`\r\n        vec4 dustCd=vec4(\r\n                        texture2D(atlasTexture,rotUV).rgb, // rgb\r\n                        texture2D(atlasAlphaTexture,rotUV).r // alpha\r\n                      ); \r\n\r\n    `;\r\n  }else{\r\n    // RGBA Texture Atlas; PNG\r\n    ret+=`\r\n        vec4 dustCd= texture2D(atlasTexture,rotUV);\r\n\r\n    `;\r\n  }\r\n\r\n  ret+=`\r\n        float alpha=dustCd.a*vAlpha;\r\n        vec4 Cd=vec4( dustCd.rgb, alpha );\r\n\r\n        float lumaCd = luma( Cd.rgb );\r\n\r\n        Cd.rgb = mix( vec3( lumaCd ), Cd.rgb, vBrightness*.2 );\r\n\r\n        Cd.rgb *= vec3(vBrightness);\r\n        //Cd.rgb *= Cd.rgb*.5+.5;\r\n        \r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../../../shaders/core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// Snow Shaders                                         //\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const snowSettings = {\r\n  'ProxDist' : 1000.0, // Distance to loop snow points\r\n  'CalculateCollisions' : true,\r\n  'LandHeight' : 50.0, // Height of the ground\r\n};\r\n\r\n\r\nexport function snowFallVert( userSettings = {} ){\r\n\r\n  userSettings = Object.assign( {}, snowSettings, userSettings );\r\n\r\n  // -- -- --\r\n\r\n  let toFloatStr = ( num ) => {\r\n    return (num+\"\").includes(\".\") ? num : num+\".0\";\r\n  };\r\n\r\n  // -- -- --\r\n\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    uniform float pointScale;\r\n    \r\n    attribute vec4 seeds;\r\n    attribute vec2 atlas;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vScalar;\r\n    \r\n    #define PROX ${toFloatStr(userSettings.ProxDist)}\r\n    #define LAND ${toFloatStr(userSettings.LandHeight)}\r\n    \r\n    float colDetect( vec2 pos, vec2 pt, vec2 n1, vec2 n2 ){\r\n        vec2 ref=pos-pt;\r\n        float ret = step( dot( ref, n1 ), 0.0 );\r\n        ret *= step( dot( ref, n2 ), 0.0 );\r\n        \r\n        return ret;\r\n    }\r\n    \r\n    \r\n    void main(){\r\n        vAtlas=atlas;\r\n        \r\n        float rot=seeds.z+time.x*(seeds.z*2.);\r\n        vRot=vec2( sin(rot), cos(rot) );\r\n        \r\n        float t=time.x*rate;\r\n        \r\n        vec3 pOff=vec3( seeds.x, 0, seeds.y)* vec3(PROX);\r\n        \r\n        // Loop point positions based on camera location\r\n        float yFract=fract(t+seeds.z);\r\n        pOff.y=PROX-yFract*(PROX+LAND); \r\n        vec3 pos= pOff ;\r\n        vec2 camXZ=cameraPosition.xz;\r\n        pos.xz= mod( pos.xz-camXZ, PROX) + camXZ - PROX*.5;\r\n        \r\n        \r\n        // Get some roof tops working\r\n        //   Using opposing points and 2 normals in xz space to determin y floor position\r\n        // Find rooves from xz pos + dot products\r\n        float floor=0.0;\r\n    `;\r\n    if( userSettings.CalculateCollisions ){\r\n        ret+=`\r\n        // -- --\r\n        vec2 lp1=vec2( -186.0, -1002.0 ); // Point 1\r\n        vec2 l1n1=vec2(-.1,1.); // Normal 1\r\n        vec2 l1n2=vec2(1.,-.1); // Normal 2\r\n        vec2 lp2=vec2( -1101.0, -1720.0 ); // Point 2\r\n        vec2 l2n1=vec2(.1,-1.1);\r\n        vec2 l2n2=vec2(-1.,.1);\r\n        floor = max( floor, 170.0*colDetect( pos.xz, lp1,l1n1,l1n2 ) * colDetect( pos.xz, lp2,l2n1,l2n2 ) ); // Lobby roof\r\n\r\n        lp1=vec2( -217.0, 786.0 ); // Point 1\r\n        l1n1=vec2(.2,-1.); // Normal 1\r\n        l1n2=vec2(1.,.1); // Normal 2\r\n        lp2=vec2( -940.0, 1293.0 ); // Point 2\r\n        l2n1=vec2(-.2,1.);\r\n        l2n2=vec2(-1.,-.1);\r\n        floor = max( floor, 500.0*colDetect( pos.xz, lp1,l1n1,l1n2 ) * colDetect( pos.xz, lp2,l2n1,l2n2 ) ); // sunflower roof\r\n\r\n        lp1=vec2( 204.028, 56.7629 ); // Point 1\r\n        l1n1=vec2( 0.152344, -0.988327 ); // Normal 1\r\n        l1n2=vec2( -0.999862, 0.0165819 ); // Normal 2\r\n        lp2=vec2( 755.264, 754.843 ); // Point 2\r\n        l2n1=vec2( -0.160366, 0.987058 );\r\n        l2n2=vec2( 0.999849, 0.0173488 );\r\n        floor = max( floor, 150.0*colDetect( pos.xz, lp1,l1n1,l1n2 ) * colDetect( pos.xz, lp2,l2n1,l2n2 ) ); // sunflower roof\r\n        `;\r\n    }\r\n  ret+=`  \r\n        // Prevent snow drifting after hitting the ground\r\n        float yLimit=max( floor, pos.y ) * .08 * seeds.z;\r\n        pos.xz+=vec2( sin(pos.x+yLimit*seeds.x), sin(pos.z+pos.x+yLimit*seeds.y) )*10.; // Snow sway in the sky\r\n        \r\n        // Shift Y position per camera height\r\n        pos.y+=cameraPosition.y-yFract*(cameraPosition.y); \r\n        pos.y=max( floor+1.5, pos.y );\r\n        \r\n        float melt=min(1.0, (pOff.y+LAND-floor)*.02);\r\n        float pScalar = max( 0., (1.-length(pos-cameraPosition )*0.001) * melt );\r\n        \r\n        vScalar = pScalar;\r\n        float pScale = pointScale * seeds.w * pScalar ;\r\n        gl_PointSize = pScale;\r\n        \r\n        vec4 mvPos=viewMatrix * vec4(pos, 1.0);\r\n        gl_Position = projectionMatrix*mvPos;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n/*\r\n\r\n\r\n        #ifdef GL_FRAGMENT_PRECISION_HIGH\r\n            precision highp float;\r\n        #else\r\n            precision mediump float;\r\n        #endif\r\n        \r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    uniform float pointScale;\r\n    \r\n    attribute vec4 seeds;\r\n    attribute vec2 atlas;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vScalar;\r\n    \r\n    #define PROX 1000.0\r\n    #define LAND 50.0\r\n    \r\n    float colDetect( vec2 pos, vec2 pt, vec2 n1, vec2 n2 ){\r\n        vec2 ref=pos-pt;\r\n        float ret = step( dot( ref, n1 ), 0.0 );\r\n        ret *= step( dot( ref, n2 ), 0.0 );\r\n        \r\n        return ret;\r\n    }\r\n    \r\n    \r\n    void main(){\r\n        vAtlas=atlas;\r\n        \r\n        float rot=seeds.z+time.x*(seeds.z*2.);\r\n        vRot=vec2( sin(rot), cos(rot) );\r\n        \r\n        float t=time.x*rate;\r\n        \r\n        vec3 pOff=vec3( seeds.x, 0, seeds.y)* vec3(PROX);\r\n        \r\n        // Loop point positions based on camera location\r\n        float yFract=fract(t+seeds.z);\r\n        pOff.y=PROX-yFract*(PROX+LAND); \r\n        vec3 pos= pOff ;\r\n        vec2 camXZ=cameraPosition.xz;\r\n        pos.xz= mod( pos.xz-camXZ, PROX) + camXZ - PROX*.5;\r\n        \r\n        \r\n        // Get some roof tops working\r\n        //   Using opposing points and 2 normals in xz space to determin y floor position\r\n        // Find rooves from xz pos + dot products\r\n        float floor=0.0;\r\n        \r\n        // -- --\r\n        vec2 lp1=vec2( -210.0, -1027.0 ); // Point 1\r\n        vec2 l1n1=vec2(-.1,1.); // Normal 1\r\n        vec2 l1n2=vec2(1.,-.1); // Normal 2\r\n        vec2 lp2=vec2( -1101.0, -1720.0 ); // Point 2\r\n        vec2 l2n1=vec2(.1,-1.1);\r\n        vec2 l2n2=vec2(-1.,.1);\r\n        floor = max( floor, 170.0*colDetect( pos.xz, lp1,l1n1,l1n2 ) * colDetect( pos.xz, lp2,l2n1,l2n2 ) ); // Lobby roof\r\n\r\n        lp1=vec2( -217.0, 786.0 ); // Point 1\r\n        l1n1=vec2(.2,-1.); // Normal 1\r\n        l1n2=vec2(1.,.1); // Normal 2\r\n        lp2=vec2( -940.0, 1293.0 ); // Point 2\r\n        l2n1=vec2(-.2,1.);\r\n        l2n2=vec2(-1.,-.1);\r\n        floor = max( floor, 500.0*colDetect( pos.xz, lp1,l1n1,l1n2 ) * colDetect( pos.xz, lp2,l2n1,l2n2 ) ); // Lobby roof\r\n\r\n        \r\n        \r\n        \r\n        // Prevent snow drifting after hitting the ground\r\n        float yLimit=max( floor, pos.y ) * .08 * seeds.z;\r\n        pos.xz+=vec2( sin(pos.x+yLimit*seeds.x), sin(pos.z+pos.x+yLimit*seeds.y) )*10.; // Snow sway in the sky\r\n        \r\n        // Shift Y position per camera height\r\n        pos.y+=cameraPosition.y-yFract*(cameraPosition.y); \r\n        pos.y=max( floor+1.5, pos.y );\r\n        \r\n        float melt=min(1.0, (pOff.y+LAND-floor)*.02);\r\n        float pScalar = max( 0., (1.-length(pos-cameraPosition )*0.001) * melt );\r\n        \r\n        vScalar = pScalar;\r\n        float pScale = pointScale * seeds.w * pScalar ;\r\n        gl_PointSize = pScale;\r\n        \r\n        vec4 mvPos=viewMatrix * vec4(pos, 1.0);\r\n        gl_Position = projectionMatrix*mvPos;\r\n    }\r\n\r\n*/\r\n\r\nexport function snowFallFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D snowTexture;\r\n    uniform vec2 time;\r\n    uniform float rate;\r\n    \r\n    varying vec2 vAtlas;\r\n    varying vec2 vRot;\r\n    varying float vScalar;\r\n    \r\n    void main(){\r\n        vec2 uv=gl_PointCoord;\r\n\r\n        vec2 pos = uv-.5;\r\n\r\n        vec2 rotUV;\r\n        rotUV.x = vRot.y * pos.x - vRot.x * pos.y;\r\n        rotUV.y = vRot.x * pos.x + vRot.y * pos.y;\r\n        rotUV=(rotUV+.5)*.25+vAtlas;\r\n        \r\n        float alpha=texture2D(snowTexture,rotUV).r * vScalar;\r\n        vec4 Cd=vec4( vec3(1.), alpha );\r\n\r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n///////////////////////////////////////////////////////////\r\n// World Pos Shaders                                    //\r\n/////////////////////////////////////////////////////////\r\n// Mostly pulled from Bokeh Shader 2\r\nexport function worldPositionVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n  varying vec3 pos;\r\n  \r\n  void main(){\r\n    vec3 transformed = vec3( position );\r\n      vec4 mvPosition = modelViewMatrix  * vec4( transformed, 1.0 );\r\n    pos=((projectionMatrix * modelMatrix * vec4( transformed-vec3(0.0,0.0,-500.0), 1.0 )).xyz*.0001)*.5+.5;\r\n    \r\n    gl_Position = projectionMatrix * mvPosition;\r\n  }`;\r\n  return ret;\r\n}\r\nexport function worldPositionFrag(){\r\n  let ret=shaderHeader();\r\n  ret=`#include <packing>\r\n  `+ret;\r\n  ret+=`\r\n    uniform sampler2D diffuse;\r\n    uniform sampler2D depth;\r\n    uniform float camNear;\r\n    uniform float camFar;\r\n    varying vec3 pos;\r\n    \r\n    void main() {\r\n      \r\n      vec4 Cd=vec4( pos, 1.0 );\r\n      gl_FragColor = Cd;\r\n    }`;\r\n    return ret;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function glowPassPostProcess(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D gDiffuse;\r\n    uniform sampler2D rDiffuse;\r\n    uniform sampler2D sceneDepth;\r\n    uniform vec2 time;\r\n    uniform vec2 ratio;\r\n    varying vec2 vUv;\r\n\r\n        #define PI 3.14159265358979\r\n        \r\n    void main() {\r\n      vec4 Cd=texture2D( tDiffuse, vUv );\r\n      vec4 gCd=texture2D( gDiffuse, vUv );\r\n      vec4 rCd=texture2D( rDiffuse, vUv );\r\n      \r\n      Cd.rgb=gCd.rgb + gCd.rgb*length(gCd.rgb) + rCd.rgb  + Cd.rgb ;\r\n\r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function textureStorePass(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D tDiffusePrev;\r\n    uniform sampler2D tDiffusePrevRoom;\r\n    uniform float roomComposer;\r\n    varying vec2 vUv;\r\n        \r\n    void main() {\r\n      vec4 Cd = texture2D( tDiffusePrev, vUv );\r\n      vec3 prevRoomCd = texture2D( tDiffusePrevRoom, vUv ).rgb;\r\n      Cd.rgb=mix( Cd.rgb, prevRoomCd, roomComposer);\r\n      //Cd.rgb=Cd.rgb + prevRoomCd;\r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function compLayersPostProcess(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag='';//shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D mtDiffuse;\r\n    uniform sampler2D sceneDepth;\r\n    uniform sampler2D noiseTexture;\r\n    uniform float exposure;\r\n    uniform vec2 camRotPitch;\r\n    uniform vec2 time;\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n      vec4 Cd=texture2D(tDiffuse,vUv)*exposure;\r\n      vec4 mBlurCd=texture2D(mtDiffuse,vUv)*exposure;\r\n      vec4 depth=texture2D(sceneDepth,vUv);\r\n      \r\n  ////////////////////////\r\n  /*\r\n      vec2 uv=vUv;\r\n      float pi=3.14159265358979;\r\n      float t=-time.x*.007;\r\n      float pitch=camRotPitch.y;//depth.w*2.0-1.0;\r\n      float yaw=camRotPitch.x;\r\n      \r\n      float distMult=depth.x*2.0;\r\n      vec2 noiseUV=vec2(fract(uv.x*distMult+t+yaw), fract(uv.y*distMult+pitch));\r\n      vec3 noiseCd=texture2D(noiseTexture,noiseUV).rgb;\r\n      noiseUV=vec2(fract(uv.x*distMult+t*.5+yaw), fract(uv.y*.5*distMult+t*.25+pitch));\r\n      noiseCd.g=texture2D(noiseTexture,noiseUV).g;\r\n      noiseUV=vec2(fract(uv.x*.8*distMult+t*1.3+yaw), fract(uv.y*.3*distMult+t*.5+ pitch + depth.x*2.0));\r\n      noiseCd.b=texture2D(noiseTexture,noiseUV).b;\r\n      float mult=noiseCd.x*noiseCd.y*noiseCd.z*1.3;\r\n      mult*=max(0.0, 1.0-depth.x) + (1.0-depth.z*.6);\r\n      \r\n      float bg=length(depth.rgb)<.02 ? 0.0 : 1.0;\r\n      float bval=length(bloomCd.rgb);\r\n      mult= mult*(bg+bval) ;//*(1.0-depth.z);\r\n      Cd.rgb= mix( Cd.rgb, vec3(mult*.2), mult );\r\n      */\r\n      \r\n      Cd.rgb+=mBlurCd.rgb;\r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function crossAntiAliasPass(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform vec2 resUV;\r\n    uniform float ratio;\r\n    uniform vec3 gamma;\r\n    varying vec2 vUv;\r\n\r\n    // 1/4 ==  0.25\r\n    //  + 2 center samples, 1/6 ==  0.166...\r\n    #define AADIV 0.1666666666666666\r\n    const int runCount = 4;\r\n    const vec2 runDir[4] = vec2[4](\r\n                              vec2( -1.0, -1.0 ),\r\n                              vec2( -1.0, 1.0 ),\r\n                              vec2( 1.0, -1.0 ),\r\n                              vec2( 1.0, 1.0 )\r\n                            );\r\n\r\n    void main() {\r\n      vec4 Cd=texture2D(tDiffuse,vUv)*2.0;\r\n            \r\n      float dist = 1.0;\r\n      vec2 baseUV=vUv;\r\n      vec2 curUV;\r\n      vec3 curCd;\r\n      for(int s=0; s<runCount; ++s){\r\n        curUV = baseUV+runDir[s]*(resUV);//*dist);\r\n        curCd = texture2D(tDiffuse,curUV).rgb;\r\n        Cd.rgb+=curCd;\r\n      }\r\n      Cd.rgb=Cd.rgb*AADIV;\r\n      Cd.a=1.0;\r\n      \r\n      //Cd.rgb = pow(Cd.rgb, vec3(gamma.x));\r\n      Cd.rgb = vec3(1.0)-(vec3(1.0)-Cd.rgb)*gamma.y + Cd.rgb*(1.0-min(1.0,length(Cd.rgb)))*gamma.z;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\nexport function boxAntiAliasPass(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform vec2 resUV;\r\n    uniform float ratio;\r\n    uniform vec3 gamma;\r\n    varying vec2 vUv;\r\n\r\n    // 1/8 ==  0.125\r\n    //  + 2 center samples, 1/10 ==  0.1\r\n    #define AADIV 0.1\r\n    const int runCount = 8;\r\n    const vec2 runDir[8] = vec2[8](\r\n                              vec2( -1.0, -1.0 ),\r\n                              vec2( -1.0, 1.0 ),\r\n                              vec2( 1.0, -1.0 ),\r\n                              vec2( 1.0, 1.0 ),\r\n\r\n                              vec2( -1.0, 0.0 ),\r\n                              vec2( 0.0, -1.0 ),\r\n                              vec2( 0.0, 1.0 ),\r\n                              vec2( 1.0, 0.0 )\r\n                            );\r\n\r\n    void main() {\r\n      vec4 Cd=texture2D(tDiffuse,vUv)*2.0;\r\n            \r\n      float dist = 1.0;\r\n      vec2 baseUV=vUv;\r\n      vec2 curUV;\r\n      vec3 curCd;\r\n      for(int s=0; s<runCount; ++s){\r\n        curUV = baseUV+runDir[s]*(resUV);//*dist);\r\n        curCd = texture2D(tDiffuse,curUV).rgb;\r\n                Cd.rgb+=curCd;\r\n      }\r\n      Cd.rgb=Cd.rgb*AADIV;\r\n      Cd.a=1.0;\r\n      \r\n      //Cd.rgb = pow(Cd.rgb, vec3(gamma.x));\r\n      Cd.rgb = vec3(1.0)-(vec3(1.0)-Cd.rgb)*gamma.y + Cd.rgb*(1.0-min(1.0,length(Cd.rgb)))*gamma.z;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function directionalBlurPass( source, xyDir, blurCounts, stepRate ){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n        uniform sampler2D tDiffuse;\r\n        uniform sampler2D pDiffuse;\r\n        uniform vec2 resUV;\r\n        varying vec2 vUv;\r\n  \r\n        #define PI 3.14159265358979\r\n        \r\n        void main() {\r\n          \r\n          float dist = 2.0;\r\n          float fade = 1.0;\r\n          vec2 baseUV=vUv;\r\n            \r\n          const int blurCount=${blurCounts};\r\n          const int runCount=2;\r\n          vec2 runDir[runCount];\r\n          runDir[0]=vec2(${xyDir[0]}.0, ${xyDir[1]}.0);\r\n          runDir[1]=vec2(-${xyDir[0]}.0, -${xyDir[1]}.0);\r\n          vec2 curUV;\r\n          vec4 curCd;\r\n          vec4 blurCd=vec4(.0);\r\n          for(int b=0; b<blurCount; ++b){\r\n            dist = 1.0 + float(b)*${stepRate};\r\n            fade = (1.0-float(b+1)/float(blurCount+2));\r\n            //fade = 1.- (1.-fade)*(1.-fade);\r\n            for(int s=0; s<runCount; ++s){\r\n              curUV = baseUV+runDir[s]*(resUV*dist);\r\n              curUV = min( vec2(1.), max( vec2(0.), curUV ));\r\n              curCd = texture2D(${source},curUV);\r\n              curCd.a *= fade*(length(curCd.rgb)*.6);\r\n              blurCd.r = max( blurCd.r, curCd.r );\r\n              blurCd.g = max( blurCd.g, curCd.g );\r\n              blurCd.b = max( blurCd.b, curCd.b );\r\n              //blurCd.rgb += curCd.rgb;\r\n              blurCd.a = max( blurCd.a, curCd.a );\r\n            }\r\n          }\r\n          vec4 Cd=blurCd;\r\n          //Cd.a=.01;\r\n          gl_FragColor = Cd;\r\n        }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n\r\nexport function mixBlurShaderPass(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n        uniform sampler2D tDiffuse;\r\n        uniform sampler2D pDiffuse;\r\n        uniform vec2 resUV;\r\n        varying vec2 vUv;\r\n        \r\n        #define PI 3.14159265358979\r\n        \r\n        void main() {\r\n\r\n          float dist = 3.0;\r\n          float fade = 1.0;\r\n          vec2 baseUV=vUv;\r\n          const int blurCount=3;\r\n          const int runCount=8;\r\n          vec2 runDir[runCount];\r\n          runDir[0]=vec2(1.0, 0.0);\r\n          runDir[1]=vec2(1.0, 1.0);\r\n          runDir[2]=vec2(0.0, 1.0);\r\n          runDir[3]=vec2(-1.0, 1.0);\r\n          runDir[4]=vec2(-1.0, 0.0);\r\n          runDir[5]=vec2(-1.0, -1.0);\r\n          runDir[6]=vec2(0.0, -1.0);\r\n          runDir[7]=vec2(1.0, -1.0);\r\n          vec2 curUV;\r\n          vec4 curCd;\r\n          vec4 scatterCd=vec4(.0);\r\n          for(int b=0; b<blurCount; ++b){\r\n            dist = 1.5*(1.0+float(b));\r\n            fade = .1*(1.0-float(b)/float(blurCount));\r\n            for(int s=0; s<runCount; ++s){\r\n              curUV = baseUV+runDir[s]*(resUV*dist);\r\n              curCd = texture2D(pDiffuse,curUV);\r\n              curCd.a *= fade;\r\n              scatterCd.rgb += curCd.rgb;\r\n              scatterCd.a = max( scatterCd.a, curCd.a );\r\n            }\r\n          }\r\n          vec4 Cd=scatterCd;\r\n          \r\n          vec4 blurCd=texture2D(tDiffuse,vUv);\r\n          blurCd.rgb = normalize( blurCd.rgb );\r\n          \r\n          Cd = mix( blurCd, Cd, Cd.a);\r\n          Cd = texture2D(tDiffuse,vUv);\r\n          //Cd.a=.01;\r\n          gl_FragColor = Cd;\r\n        }`;\r\n  \r\n  return retFrag;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function motionBlurPostProcess(sres,mobileBool){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D rDiffuse;\r\n    uniform sampler2D noiseTexture;\r\n    \r\n    uniform float exposure;\r\n    uniform vec2 time;\r\n    uniform vec3 camRotXYZ;\r\n    uniform vec2 blurDirCur;\r\n    uniform vec2 blurDirPrev;\r\n    varying vec2 vUv;\r\n\r\n    vec4 getTexture( sampler2D texelToLinearTexture ) {\r\n      return mapTexelToLinear( texture2D( texelToLinearTexture , vUv ) );\r\n    }\r\n    \r\n    vec3 directionalBlur(vec3 origCd, sampler2D tex, vec2 uv, vec2 dir, vec2 deltaDir, float dist, float thresh){\r\n      float perc;\r\n      float curPerc=1.0;\r\n      vec2 curUV;\r\n      float origLength=length(origCd.rgb);\r\n      vec3 curCd;\r\n      vec3 retCd=origCd;\r\n      float delta;\r\n      float threshTrigger=1.0;\r\n      float dropoff;\r\n      float percCurve;\r\n      float d=dot(dir,deltaDir)*.5+.5;\r\n      for(int r=0; r<10; ++r){\r\n        perc=(float(r)/10.0);\r\n        percCurve=perc*.5;\r\n        dropoff=(dist*float(r))*perc*d;\r\n        curUV=uv+normalize(deltaDir*percCurve+dir*(1.0-percCurve))*dropoff;\r\n        //curUV=uv+dir*dropoff;\r\n        curCd=texture2D(tex,curUV).rgb;\r\n        delta=length(curCd.rgb);\r\n        delta=origLength<delta?1.0-perc*perc:0.0;\r\n        //delta=1.0-perc*perc;\r\n        retCd+=curCd.rgb*delta;\r\n        curPerc+=delta;\r\n        \r\n        percCurve*=percCurve;\r\n        curUV=uv-normalize(-deltaDir*percCurve+dir*(1.0-percCurve))*dropoff*.4;\r\n        //curUV=uv-dir*dropoff*.4;\r\n        curCd=texture2D(tex,curUV).rgb;\r\n        delta=length(curCd.rgb);\r\n        delta=origLength<delta?1.0-perc*perc:0.0;\r\n        //delta=1.0-perc*perc;\r\n        retCd+=curCd.rgb*delta;\r\n        curPerc+=delta;\r\n        \r\n      }\r\n      return retCd /curPerc;\r\n    }\r\n\r\n    void main() {\r\n      \r\n      \r\n      vec4 bloomCd=getTexture( rDiffuse );\r\n      float noise=sin(time.x*1.8+vUv.x*length(bloomCd.rgb)*12.523+cos(time.x*.4+vUv.y*length(bloomCd.rgb)*2.352)*1.9)*.4+.8;\r\n      noise=1.0-min(1.0, max(0.0, noise*sin(time.x*.4+24.512)*3.0+1.0));\r\n      vec2 noiseUV=vUv*0.1;//+vec2(camRotXYZ.x+time.x*.05,-camRotXYZ.y);\r\n      vec4 noiseCd=texture2D(noiseTexture,noiseUV);\r\n      float blurDist=length(blurDirCur);\r\n      blurDist=min(1.0,blurDist*15.0);\r\n      //blurDist=(1.0-(1.0-blurDist)*(1.0-blurDist));\r\n      vec2 blurDir=normalize(blurDirCur);//+(vUv-.5)*2.0);`;\r\n      if(!mobileBool){ retFrag+=`\r\n        blurDir=normalize( blurDir + (noiseCd.gb-.5)*(dot(blurDir,noiseCd.gb)*.5+.5) );\r\n      `;}\r\n\r\n      retFrag+=`\r\n      vec2 deltaDir=normalize(blurDirPrev);\r\n      deltaDir.x+=sin((blurDir.x-deltaDir.x));\r\n      deltaDir.y+=sin((blurDir.y-deltaDir.y));\r\n      \r\n      vec4 bloomAdd=vec4( directionalBlur(bloomCd.rgb, rDiffuse, vUv, blurDir, deltaDir, `+sres.y+`*`+(mobileBool?'3.0':'5.0')+`*(1.5)*blurDist, .5)*(1.0+exposure*.4), 1.0);\r\n      vec4 Cd= bloomAdd* ( 0.50+bloomCd)*exposure;//getTexture( rDiffuse ) + bloomAdd;//+ vec4( 1.0 ) * bloomCd + bloomAdd;\r\n      //Cd.a=bloomAdd.a-bloomCd.a;\r\n      \r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n      \r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function chroAberPostProcess(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D chroAberUVTexture;\r\n    uniform sampler2D chroAberUVAlpha;\r\n    uniform vec2 ratio;\r\n\r\n    uniform vec2 warpMult;\r\n    uniform vec2 lKing;\r\n    \r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n      // I don't know, sRGB to Linear. Keeping it Linear doesn't work, PNG encoding to blame\r\n      vec4 caCd= vec4( \r\n        texture2D( chroAberUVTexture, vUv ).rgb - 0.7294118,\r\n        texture2D( chroAberUVAlpha, vUv ).r - 0.5019608\r\n      );\r\n      //caCd*=mix( .025, .018, length(caCd.rg)*4.0 );\r\n      caCd*=mix( lKing.x, lKing.y, length(caCd.rg)*4.0 )+warpMult.x;\r\n      \r\n      vec2 bUv=vUv+caCd.rg;\r\n      vec2 rUv=vUv+caCd.ba;\r\n      vec2 gUv=vUv+(caCd.rg+caCd.ba);\r\n      vec4 rCd=texture2D( tDiffuse, rUv );\r\n      vec4 Cd=texture2D( tDiffuse, gUv );\r\n      vec4 bCd=texture2D( tDiffuse, bUv );\r\n      \r\n      Cd.rgb=vec3( rCd.r, Cd.g, bCd.b );\r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function lKingPostProcess(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform vec2 ratio;\r\n    varying vec2 vUv;\r\n\r\n        #define PI 3.14159265358979\r\n        \r\n    void main() {\r\n      vec4 Cd=texture2D( tDiffuse, vUv )*.2;\r\n      vec4 noiseCd= (texture2D( noiseTexture, vec2( fract(vUv.x*.2-time.x*.02+sin(time.x*.1+vUv.y*PI+Cd.r+Cd.g)),fract( vUv.y*.2+time.x*.01+cos(-time.x*.2+1.15+vUv.x*PI+Cd.g+Cd.b)) ) )-.5)*.025;\r\n      \r\n      vec2 bUv=vUv+noiseCd.rg;\r\n      vec2 rUv=vUv+noiseCd.gb;\r\n      vec2 gUv=vUv+noiseCd.br;\r\n      vec4 rCd=texture2D( tDiffuse, rUv );\r\n      vec4 gCd=texture2D( tDiffuse, gUv );\r\n      vec4 bCd=texture2D( tDiffuse, bUv );\r\n      \r\n      Cd.rgb=vec3( rCd.r, gCd.g, bCd.b );\r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function iZoomPostProcess(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D tDiffusePrev;\r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform vec2 ratio;\r\n    varying vec2 vUv;\r\n\r\n        #define PI 3.14159265358979\r\n        \r\n    void main() {\r\n      vec4 Cd=texture2D( tDiffuse, vUv );\r\n            vec4 pCd=texture2D( tDiffusePrev, vUv );\r\n            vec3 dCd=Cd.rgb-pCd.rgb;\r\n            vec3 b1Cd= texture2D( tDiffuse, vUv-vec2( dCd.rg*.1 ) ).rgb;\r\n            vec3 b2Cd= texture2D( tDiffusePrev, vUv+vec2( dCd.rg*.1 ) ).rgb;\r\n            b1Cd=mix( b1Cd, b2Cd, step( length(b1Cd), length(b2Cd) ) );\r\n            \r\n            vec4 outCd=vec4(1.0);\r\n            outCd.rgb= mix(  Cd.rgb, b1Cd, length(dCd) );\r\n            \r\n      vec3 noiseCd=texture2D( noiseTexture, fract( vUv*50.0+dCd.rg*.1 + length(Cd.rgb*30.0) + time.x) ).rgb;\r\n\r\n            outCd.rgb= mix( vec3(length(outCd.rgb)*.333-length(noiseCd)*.1), outCd.rgb, min(1.0,length(dCd))*.5+.5 );\r\n            outCd.rgb+= dCd.gbr;\r\n            \r\n            \r\n            \r\n      outCd.a=1.0;\r\n      gl_FragColor = outCd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function sFieldPostProcessVert(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform vec2 time;\r\n    varying vec2 vUv;\r\n    varying vec2 vUvShift;\r\n    varying vec2 starUv;\r\n    varying float vTimer;\r\n\r\n    void main(){\r\n        vUv=uv;\r\n        vUvShift=uv-.5;\r\n        \r\n        vec2 rUv=vUvShift*0.7071067811865476;\r\n        vec2 tmpUv=rUv;\r\n        float rot=time.x*.1;\r\n        vec2 sinCos=vec2( sin(rot), cos(rot) );\r\n        rUv.x=sinCos.x*tmpUv.x + sinCos.y*tmpUv.y;\r\n        rUv.y=sinCos.y*tmpUv.x - sinCos.x*tmpUv.y;\r\n        rUv=(rUv+.5);\r\n        \r\n        float starTimer=sin(time.x*.2)*.1+.1;\r\n        starUv=mix( vUv, rUv, starTimer);\r\n        \r\n        vTimer=time.x*.5;\r\n        \r\n        vec4 modelViewPosition=modelViewMatrix * vec4(position, 1.0);\r\n        gl_Position = projectionMatrix*modelViewPosition;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\nexport function sFieldPostProcessFrag(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n        uniform sampler2D tDiffuse;\r\n        uniform sampler2D starTexture;\r\n        varying vec2 vUv;\r\n        varying vec2 vUvShift;\r\n        varying vec2 starUv;\r\n        varying float vTimer;\r\n\r\n        #define PI 3.14159265358979\r\n        \r\n        void main() {\r\n            float uvDist=length(vUvShift);\r\n            \r\n            vec3 starCd=texture2D( starTexture, starUv ).rgb*uvDist;\r\n            \r\n            float blender=uvDist*starCd.b * abs((fract(starCd.b*PI+vTimer))*2.0-1.0)*.5;\r\n            vec2 starBlendUV=starCd.rg*blender;\r\n            \r\n            vec2 cdUv = vUv+starBlendUV;\r\n            vec4 Cd=texture2D( tDiffuse, cdUv );\r\n            \r\n            vec3 negCd= mix( Cd.brg, Cd.gbr, length(Cd.rgb-Cd.rgb) );\r\n            float cdBlender=step(.015,starBlendUV.x*uvDist)+starCd.b;\r\n            Cd.rgb= mix( Cd.rgb, negCd, cdBlender );\r\n            \r\n            gl_FragColor = Cd;\r\n        }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\nexport function warpPostProcess(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D noiseTexture;\r\n    uniform sampler2D animTexture;\r\n    uniform vec2 time;\r\n    uniform vec2 fader;\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n      vec4 Cd=texture2D( tDiffuse, vUv );\r\n      vec4 animCd=texture2D( animTexture, vUv );\r\n      float timer=time.x*.2;\r\n      vec2 animUV=vec2( mod(animCd.r+Cd.r+Cd.g+timer, 1.0), mod(animCd.g+Cd.g+Cd.b+timer, 1.0) );\r\n      animCd=texture2D( animTexture, animUV );\r\n      \r\n      vec2 noiseUV=animUV+animCd.rg;\r\n      vec4 noiseCd=texture2D(noiseTexture,noiseUV);\r\n      noiseCd.rgb=vec3( length( noiseCd.rgb )*.5-.25 );\r\n      \r\n      float blend=fader.x*fader.y;\r\n      Cd=mix( Cd, noiseCd, blend);\r\n      \r\n      Cd.a=1.0;\r\n      Cd.r=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\n","// TODO : Implement Gamma Correction, 2.2 -> 1.8\r\n// Windows 2.2\r\n// Mobile / Mac 1.8\r\n// float gamma = 2.2\r\n// float gamma = 1.8\r\n// pow(texture(Cd, vUv).rgb, vec3(gamma));\r\n\r\n// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n\r\nexport function finalOverlayBlendedShader(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n    uniform sampler2D tDiffuse;\r\n    uniform sampler2D rDiffuse;\r\n    uniform sampler2D bloomTexture;\r\n    uniform sampler2D sceneDepth;\r\n    uniform sampler2D scenePos;\r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform vec2 fogMult;\r\n    uniform vec2 proximityMult;\r\n    uniform vec2 lookAtPerc;\r\n    uniform vec2 resUV;\r\n    uniform float ratio;\r\n    uniform float exposure;\r\n    varying vec2 vUv;\r\n\r\n\r\n    void main() {\r\n      vec4 Cd=texture2D(rDiffuse,vUv);\r\n      vec4 depth=texture2D(sceneDepth,vUv);\r\n      \r\n      vec3 worldPos = texture2D(scenePos,vUv).rgb;\r\n      float wpDist = worldPos.x+worldPos.z*2.0;\r\n      float t = -time.x*.003;\r\n      \r\n      vec2 noiseUV = vec2( ((t*.5+wpDist*.60)), (worldPos.y*.7+t*.25 ));\r\n      vec3 noiseBaseCd = texture2D(noiseTexture,noiseUV).rgb;\r\n      noiseUV=vec2( ((t*.3+wpDist*.55)), (worldPos.x*.5+t*.35 ));\r\n      noiseBaseCd.g=texture2D(noiseTexture,noiseUV+vec2(0.0,t)).g;\r\n      noiseUV=vec2( ((t*1.2+wpDist*.83)), (worldPos.y+t*.15  ));\r\n      noiseBaseCd.b=texture2D(noiseTexture,noiseUV).b;\r\n      float baseDist=noiseBaseCd.r;\r\n      vec3 noiseCd;\r\n      \r\n      /*float dist = 5.0;\r\n      vec2 baseUV=vUv;\r\n      const int runCount=8;\r\n      vec2 runDir[runCount];\r\n      runDir[0]=vec2(1.0, 0.0);\r\n      runDir[1]=vec2(1.0, 1.0);\r\n      runDir[2]=vec2(0.0, 1.0);\r\n      runDir[3]=vec2(-1.0, 1.0);\r\n      runDir[4]=vec2(-1.0, 0.0);\r\n      runDir[5]=vec2(-1.0, -1.0);\r\n      runDir[6]=vec2(0.0, -1.0);\r\n      runDir[7]=vec2(1.0, -1.0);\r\n      vec2 curUV;\r\n      vec3 curCd;\r\n      float curDist;\r\n      vec3 minCd = worldPos;\r\n      float minDist = baseDist;\r\n      for(int s=0; s<runCount; ++s){\r\n        curUV = baseUV+runDir[s]*(resUV*dist);\r\n        curCd = texture2D(scenePos,curUV).rgb;\r\n        wpDist = curCd.x+curCd.z*2.0;\r\n        noiseUV=vec2( ((t*.5+wpDist*.60)), (curCd.y*.7+t*.25 ));\r\n        noiseCd=texture2D(noiseTexture,noiseUV).rgb;\r\n        curDist = noiseCd.r;\r\n        if(curDist>minDist){\r\n          minDist = curDist;\r\n          minCd = curCd;\r\n        }\r\n      }\r\n      \r\n      worldPos= minCd;\r\n      wpDist = worldPos.x+worldPos.z*2.0;\r\n      \r\n      noiseCd.r=baseDist;//minDist;\r\n      noiseUV=vec2( ((t*.3+wpDist*.55)), (worldPos.x*.5+t*.35 ));\r\n      noiseCd.g=texture2D(noiseTexture,noiseUV+vec2(0.0,t)).g;\r\n      noiseUV=vec2( ((t*1.2+wpDist*.83)), (worldPos.y+t*.15  ));\r\n      noiseCd.b=texture2D(noiseTexture,noiseUV).b;\r\n      noiseCd=mix( noiseCd, noiseBaseCd, step( length(noiseCd), length(noiseBaseCd) ) );\r\n      */\r\n      noiseCd=noiseBaseCd;\r\n      \r\n      float mult=noiseCd.x*noiseCd.y*noiseCd.z*1.3;\r\n      //mult*=max(0.0, 1.0-depth.x) + min(1.0,(1.0-depth.z)*1.8) * max(0.0, (worldPos.y-0.10)*2.0);\r\n      mult*=max(0.0, (worldPos.y-0.04)*1.65) * fogMult.x;\r\n      \r\n      vec4 bloomCd=texture2D(bloomTexture,vUv);\r\n      \r\n      Cd.rgb= mix( Cd.rgb*(1.0-depth.z), vec3(mult), mult )-mult*.5;\r\n      \r\n      float cdMult=max(0.0, 1.0-length(Cd.rgb)*.65);\r\n      Cd.rgb+= bloomCd.rgb* cdMult;// * step(blmDepth, bDepth);\r\n      Cd.rgb*=exposure;\r\n      //Cd.rgb=vec3(mult);\r\n\r\n            // Proximity Draw Over\r\n            float yProxMult= 1.0-min(1.0, max(0.0, (worldPos.y-.5 )*1000.));\r\n            float proxWarp=max(0., cos(( vUv.x-.5 )*1.6*ratio)*.0013);\r\n            float prox=(depth.x);\r\n            prox= min(1.0, (-prox*.5+.48645+proxWarp)*400.);\r\n            prox=(1.0-prox)*yProxMult*step(.0,prox);\r\n            //prox*=prox;\r\n            vec3 proxCd = (vec3(.6,.6,0.35)*prox)*.75;//*max(0., 1.0-length(Cd.rgb)) ;\r\n            proxCd *= proxCd * proximityMult.x ;\r\n            Cd.rgb+=proxCd;\r\n            \r\n      Cd.a=1.0;\r\n      gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\nexport function finalOverlayHeavyShader(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n        uniform sampler2D tDiffuse;\r\n        uniform sampler2D rDiffuse;\r\n        uniform sampler2D bloomTexture;\r\n        uniform sampler2D sceneDepth;\r\n        uniform sampler2D scenePos;\r\n        uniform sampler2D noiseTexture;\r\n        uniform vec3 camPos;\r\n        uniform vec2 time;\r\n        uniform vec2 fogMult;\r\n        uniform vec2 proximityMult;\r\n        uniform float ratio;\r\n        uniform float exposure;\r\n        varying vec2 vUv;\r\n\r\n        vec3 fogValue( vec3 worldPos, float time ){\r\n            float wpDist = worldPos.x+worldPos.z*2.0;\r\n            vec2 noiseUV = vec2( ((time*.5+wpDist*.60)), (worldPos.y*.7+time*.25 ));\r\n            vec3 noiseCd = texture2D(noiseTexture,noiseUV).rgb;\r\n            noiseUV=vec2( ((time*.3+wpDist*.55)), (worldPos.x*.5+time*.35 ));\r\n            noiseCd.g=texture2D(noiseTexture,noiseUV+vec2(0.0,time)).g;\r\n            noiseUV=vec2( ((time*1.2+wpDist*.83)), (worldPos.y+time*.15  ));\r\n            noiseCd.b=texture2D(noiseTexture,noiseUV).b;\r\n            \r\n            return noiseCd;\r\n        }\r\n\r\n        #define PROX_WARP 3.14159265358979*.45\r\n        \r\n        void main() {\r\n            vec4 Cd=texture2D(rDiffuse,vUv);\r\n            float depth=texture2D(sceneDepth,vUv).r;\r\n            \r\n            vec3 worldPos = texture2D(scenePos,vUv).rgb;\r\n            float t = -time.x*.003;\r\n            vec3 baseNoiseCd=fogValue( worldPos, t );\r\n            \r\n            float mult=0.0;\r\n            vec3 noiseCd;\r\n            vec3 curNoiseCd;\r\n            vec3 samplePos;\r\n            float samples=4.3;//+sin(time.x*.001);\r\n            float blender;\r\n            float blenderMax=0.0;\r\n            for( int x=0; x<=3; ++x){\r\n                blender=( float(x+1) / samples );\r\n                samplePos=worldPos*blender;\r\n                curNoiseCd=fogValue( samplePos, t );\r\n                noiseCd=max(noiseCd, curNoiseCd * blender );\r\n                blenderMax+=blender;\r\n            }\r\n            noiseCd += baseNoiseCd*.2;\r\n            mult= noiseCd.x*noiseCd.y*noiseCd.z*1.2;\r\n            //mult*=mult;\r\n            \r\n            // Distance Mapping\r\n            float proxWarp= cos(( vUv.x-.5 ) * PROX_WARP*ratio );\r\n            float mDepth= pow( depth, 28.*proxWarp );\r\n            \r\n            float fogDap= max(0.0, 1.0-mDepth);\r\n            fogDap=1.0-fogDap*fogDap;\r\n            mult*=max(0.0, (worldPos.y-0.04)*1.65) * fogMult.x * fogDap ;\r\n            \r\n            \r\n            Cd.rgb= mix( Cd.rgb, vec3(mult*.7), mult)-mult*.35;\r\n \r\n            vec3 bloomCd=texture2D(bloomTexture,vUv).rgb;\r\n            Cd.rgb+= bloomCd;\r\n            Cd.rgb*=exposure;\r\n            \r\n            // Proximity Draw Over\r\n            float dProx=  ((mDepth-.5)*-10.);\r\n            dProx= max(0.0, (1.0-dProx)*step( 0., dProx));\r\n            float yProxMult= 1.0-min(1.0, max(0.0, (worldPos.y-.5 )*1000.));\r\n            dProx*= dProx* yProxMult * proximityMult.x;\r\n            vec3 proxCd = (vec3(.5,.5,.2)*dProx)*.5;\r\n            Cd.rgb+=proxCd*mult;\r\n            \r\n            Cd.a=1.0;\r\n            gl_FragColor = Cd;\r\n    }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\nexport function finalOverlayShader(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n        uniform sampler2D tDiffuse;\r\n        uniform sampler2D rDiffuse;\r\n        uniform sampler2D bloomTexture;\r\n        uniform sampler2D sceneDepth;\r\n        uniform sampler2D scenePos;\r\n        uniform sampler2D noiseTexture;\r\n        uniform vec2 time;\r\n        uniform vec2 fogMult;\r\n        uniform vec2 proximityMult;\r\n        uniform vec2 lookAtPerc;\r\n        uniform vec2 resUV;\r\n        uniform float ratio;\r\n        uniform float exposure;\r\n        varying vec2 vUv;\r\n\r\n        #define PROX_WARP 3.14159265358979*.45\r\n\r\n        void main() {\r\n            vec4 Cd=texture2D(rDiffuse,vUv);\r\n            float depth=texture2D(sceneDepth,vUv).r;\r\n            \r\n            vec3 worldPos = texture2D(scenePos,vUv).rgb;\r\n            float wpDist = worldPos.x+worldPos.z*2.0;\r\n            float t = -time.x*.003;\r\n            \r\n            vec2 noiseUV = vec2( ((t*.5+wpDist*.60)), (worldPos.y*.7+t*.25 ));\r\n            vec3 noiseCd = texture2D(noiseTexture,noiseUV).rgb;\r\n            noiseUV=vec2( ((t*.3+wpDist*.55)), (worldPos.x*.5+t*.35 ));\r\n            noiseCd.g=texture2D(noiseTexture,noiseUV+vec2(0.0,t)).g;\r\n            noiseUV=vec2( ((t*1.2+wpDist*.83)), (worldPos.y+t*.15  ));\r\n            noiseCd.b=texture2D(noiseTexture,noiseUV).b;\r\n            \r\n            \r\n            // Distance Mapping\r\n            float proxWarp= cos(( vUv.x-.5 ) * PROX_WARP*ratio );\r\n            float mDepth= pow( depth, 28.*proxWarp );\r\n            \r\n            float fogDap= max(0.0, 1.0-mDepth);\r\n            fogDap=1.0-fogDap*fogDap;\r\n            float mult=noiseCd.x*noiseCd.y*noiseCd.z*1.3;\r\n            mult*=max(0.0, (worldPos.y-0.04)*1.65) * fogMult.x * fogDap;\r\n            \r\n            \r\n            Cd.rgb= mix( Cd.rgb, vec3(mult), mult)-mult*.4;\r\n \r\n            vec3 bloomCd=texture2D(bloomTexture,vUv).rgb;\r\n            Cd.rgb+= bloomCd;\r\n            Cd.rgb*=exposure;\r\n            \r\n            // Proximity Draw Over\r\n            float dProx=  ((mDepth-.5)*-10.);\r\n            dProx= max(0.0, (1.0-dProx)*step( 0., dProx));\r\n            float yProxMult= 1.0-min(1.0, max(0.0, (worldPos.y-.5 )*1000.));\r\n            dProx*= dProx* yProxMult * proximityMult.x;\r\n            vec3 proxCd = (vec3(.5,.5,.2)*dProx)*.5;\r\n            Cd.rgb+=proxCd*mult;\r\n            \r\n            Cd.a=1.0;\r\n            gl_FragColor = Cd;\r\n        }`;\r\n  \r\n  return retFrag;\r\n}\r\n\r\nexport function finalOverlaySlimShader(){\r\n  // Frag; Composer Shader Pass\r\n  let retFrag=shaderHeader();\r\n  retFrag+=`\r\n        uniform sampler2D tDiffuse;\r\n        uniform sampler2D rDiffuse;\r\n        uniform sampler2D bloomTexture;\r\n        uniform sampler2D sceneDepth;\r\n        uniform vec2 time;\r\n        uniform vec2 proximityMult;\r\n        uniform vec2 lookAtPerc;\r\n        uniform vec2 resUV;\r\n        uniform float ratio;\r\n        uniform float exposure;\r\n        varying vec2 vUv;\r\n\r\n        #define PROX_WARP 3.14159265358979*.4\r\n        #define PI 3.14159265358979\r\n        \r\n        vec3 boostHighs( vec3 Cd ){\r\n            float sat=max(max(Cd.r,Cd.g),Cd.b) - min(min(Cd.r,Cd.g),Cd.b);\r\n            sat=(1.0-sat);\r\n            sat=1.0-sat*sat;\r\n            Cd+=Cd*sat;\r\n            return Cd;\r\n        }\r\n        \r\n        vec3 boostMids( vec3 Cd ){\r\n            float sat=max(max(Cd.r,Cd.g),Cd.b) - min(min(Cd.r,Cd.g),Cd.b);\r\n            sat=sin( sat*PI );\r\n            Cd+=Cd*sat;\r\n            return Cd;\r\n        }\r\n        \r\n        void main() {\r\n            vec4 Cd=texture2D(rDiffuse,vUv);\r\n            vec2 uv=vUv;\r\n            \r\n            vec3 bloomCd=texture2D(bloomTexture,uv).rgb;\r\n            bloomCd= mix( boostHighs(Cd.rgb), bloomCd,  step( 0.01, length( bloomCd )) );\r\n            \r\n            Cd.rgb+= bloomCd;\r\n\r\n            // Proximity Draw Over\r\n            float depth=texture2D(sceneDepth,vUv).r;\r\n            \r\n            // Distance Mapping\r\n            float proxWarp= cos(( vUv.x-.5 ) * PROX_WARP*ratio );\r\n            float mDepth= pow( depth, 28.*proxWarp );\r\n            \r\n            // Proximity Draw Over\r\n            float dProx=  ((mDepth-.5)*-10.);\r\n            dProx= max(0.0, (1.0-dProx)*step( 0., dProx));\r\n            dProx*= dProx * proximityMult.x;\r\n            vec3 proxCd = (vec3(.5,.5,.2)*dProx)*.5;\r\n            Cd.rgb+=proxCd;\r\n            Cd.r=1.0;\r\n            Cd.a=1.0;\r\n            gl_FragColor = Cd;\r\n        }`;\r\n  \r\n  return retFrag;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\n \r\n// Shader Generated Sky\r\nexport function bgScreenVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform vec2 time;\r\n    \r\n    varying vec2 vUv;\r\n    varying vec3 vCamNormal;\r\n    varying vec3 vWorldNormal;\r\n    varying vec3 vWorldCross;\r\n    varying vec3 vSunPos;\r\n    \r\n    void main(){\r\n        vUv=uv;\r\n        \r\n        mat4 pvMat=projectionMatrix * viewMatrix;\r\n        pvMat[3] = vec4(.0, .0, .0, 1.0);\r\n        mat3 pvRot = inverse( mat3( pvMat ) );\r\n        vCamNormal= pvRot * vec3( position*.2 + vec3(.0, .0, 1.0));\r\n        vWorldNormal= normalize( pvRot[2] *vec3(1.,0.,1.));\r\n        vWorldCross= normalize( pvRot[0]*vec3(1.,0.,1.));\r\n        \r\n        float timeRate = time.x * .1;\r\n        vec3 sunPos = normalize( vec3(.3, 1.0, 1.0) );\r\n        vec3 sunRef = sunPos;\r\n        sunPos.y= sin(timeRate) * sunRef.y + cos(timeRate)*sunRef.z;\r\n        sunPos.z= sin(timeRate) * sunRef.z - cos(timeRate)*sunRef.y;\r\n        sunPos.x = sin( timeRate ) * .1;\r\n        \r\n        vSunPos = normalize( sunPos );\r\n        \r\n        vec4 modelViewPosition= vec4(position*2.0 + vec3(.0, .0, 1.0), 1.0);\r\n        gl_Position = modelViewPosition;\r\n    }`;\r\n  return ret;\r\n}\r\n\r\n\r\n    \r\nexport function bgScreenFrag(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform sampler2D noiseTexture;\r\n    varying vec2 vUv;\r\n    varying vec3 vCamNormal;\r\n    varying vec3 vWorldNormal;\r\n    varying vec3 vWorldCross;\r\n    varying vec3 vSunPos;\r\n    \r\n    void main(){\r\n        vec4 Cd=vec4( vec3(1.0, .10, .10), 1.0);\r\n        \r\n        float sunDot = dot( vSunPos, vCamNormal )*.5 +.5;\r\n        sunDot *= max(0.0, dot( vSunPos, vec3(.0, 1.0, .0)) );\r\n        \r\n        vec2 xOffset = vec2( .0, .0);\r\n        vec3 nCd=texture2D(noiseTexture,vUv*.1+vSunPos.zy*vec2(.15,.22) + xOffset ).rgb;\r\n        nCd*=texture2D(noiseTexture,vUv*.1+vSunPos.yx*.2).rgb;\r\n        sunDot *= nCd.x*nCd.y*nCd.z;\r\n        nCd= vec3( length( nCd ) );\r\n        \r\n        float mixVal= min(1.0, sunDot+(1.-(vWorldNormal.y*.5+.5)));\r\n        Cd.rgb= mix(vec3(0.0, .20, 1.0)+nCd*vWorldNormal.y, vec3(.0, .0, .0), mixVal);\r\n        Cd.rgb=mix( vec3(.0), Cd.rgb, vWorldNormal.y );\r\n        Cd.rgb=vec3(mix( vWorldNormal, vWorldCross, step(.4, vUv.x)));\r\n        Cd.rgb=vec3(mix( vWorldCross, Cd.rgb, step(vUv.y,.9)));\r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}","// pxlNav Shader\r\n//  -- -- -- --\r\n// Written by Kevin Edzenga; 2020; 2024\r\n\r\nimport {shaderHeader} from \"../core/ShaderHeader.js\";\r\nimport { SKY_HAZE } from '../../core/Enums.js';\r\n \r\nexport function skyObjectVert(){\r\n  let ret=shaderHeader();\r\n  ret+=`\r\n    uniform float camFar;\r\n    uniform vec2 resUV;\r\n    \r\n    varying vec2 vUv;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalPos;\r\n    varying vec4 vWorldPos;\r\n    \r\n    void main(){\r\n        vUv=uv;\r\n        vLocalPos=position;\r\n        vN = normal;\r\n        \r\n        vec3 pos = position;\r\n        vec4 modelViewPosition=projectionMatrix * vec4(mat3(viewMatrix)*normalize(pos)*camFar, 1.0);\r\n        gl_Position = modelViewPosition;\r\n        \r\n        vWorldPos = modelViewPosition;\r\n        \r\n    }`;\r\n  return ret;\r\n}\r\n// Sky Fragment Shader\r\nexport function skyObjectFrag( skyHazeValue=SKY_HAZE.OFF ){\r\n  let ret=shaderHeader();\r\n  ret+=`     \r\n    uniform sampler2D diffuse;\r\n    uniform sampler2D noiseTexture;\r\n    uniform vec2 time;\r\n    uniform float camNear;\r\n    uniform float camFar;\r\n    uniform vec2 resUV;\r\n\r\n    uniform float rate;\r\n    uniform vec3 fogColor;\r\n    \r\n    varying vec2 vUv;\r\n    varying vec3 vN;\r\n    varying vec3 vLocalPos;\r\n    varying vec4 vWorldPos;\r\n    \r\n    #define PI 3.14159265358979323\r\n    \r\n    void main(){\r\n        vec2 uv=vUv;\r\n        vec2 screenUV=(vec2(vWorldPos.xy/vWorldPos.w))*.5+.5;\r\n        vec4 Cd=texture2D(diffuse,uv);\r\n\r\n  `;\r\n  if( skyHazeValue == SKY_HAZE.VAPOR ){\r\n    ret+=`\r\n\r\n        // -- -- -- -- -- -- -- -- --\r\n        // -- Horizon Vapor Code - -- --\r\n        // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n        vec3 lPos = vLocalPos;\r\n        lPos.y = abs(lPos.y)*0.05;\r\n\r\n        float t = time.x*.6;\r\n\r\n        // Duel noise texture sampling\r\n        //   Creates a flowing vapor effect flowing through the noise texture\r\n        vec2 nUv =  vec2(vUv.x*0.40, vUv.y*.5 - t*.0065  - vN.y );\r\n        vec3 noiseBaseCd = texture2D( noiseTexture, nUv ).rgb;\r\n        nUv = ( nUv*vec2(1.0,.5)+noiseBaseCd.rg*(noiseBaseCd.b) + t*.02);\r\n        vec3 noiseCd = texture2D( noiseTexture, nUv ).rgb;\r\n        noiseCd.rg = noiseCd.rg*2.0-1.0;\r\n        \r\n        \r\n        float reachDepth = 0.0 ;\r\n        \r\n        // Calculate mask based on the local position\r\n        //   Assuming for a sky-box / sky-sphere object\r\n        vec3 normPos = normalize(vLocalPos);\r\n        normPos.y = 1.0-min(1.0,(normPos.y)*3.0);\r\n        normPos.y = normPos.y*normPos.y*normPos.y;\r\n        \r\n        // Noise-influence of the normal vector to drive the vapoe mask\r\n        reachDepth =  min(1.0, (vN.y * 1. * noiseCd.x  * max(noiseCd.y, noiseCd.z))) ;\r\n\r\n        float vaporMask = clamp(reachDepth+normPos.y * max(.95, noiseBaseCd.x*noiseBaseCd.z+vN.y*.5), 0.0, 1.0)*.1;\r\n        \r\n        float fogMixer = (Cd.r+Cd.g+Cd.b) - (fogColor.r+fogColor.g+fogColor.b) ;\r\n        vec3 toFogColor = mix(  Cd.rgb, fogColor,  fogMixer );\r\n        float blender = (sin(noiseCd.r*PI+t+uv.x))*max(0.0,1.0-(vaporMask+fogMixer))*.1 ;\r\n        vec3 baseColor = (toFogColor-min(1.0,blender+ vaporMask*10.0)) ;\r\n\r\n        Cd.rgb = mix(Cd.rgb, baseColor, vaporMask * step( -0.10, vN.y ));\r\n\r\n        // -- -- -- -- -- -- -- -- -- -- --\r\n        // -- End of Horizon Vapor -- --\r\n        // -- -- -- -- -- -- -- -- --\r\n\r\n    `;\r\n  }\r\n  ret+=`\r\n\r\n        gl_FragColor=Cd;\r\n    }`;\r\n  return ret;\r\n}\r\n","// pxlNav Includes -\r\n//   Primary Shader File Conduit\r\n//     Kevin Edzenga, 2024\r\n//\r\n// Please directly import percision headers in your room's shaders file\r\n//   From your room's root folder -\r\n//     ```\r\n//       import { shaders } from \"../../pxlNav.js\";\r\n//     ```\r\n//\r\n//   Used with -\r\n//     ```\r\n//       export function yourShader(){\r\n//         let ret=shaderHeader();\r\n//         ret+=`void main(){}`;\r\n//         return ret;\r\n//       }\r\n//     ```\r\n\r\nimport * as core from './core.js';\r\n\r\nimport * as animated from './animated.js';\r\nimport * as objects from './objects.js';\r\nimport * as particles from '../effects/particles/shaders.js';\r\nimport * as rendering from './rendering.js';\r\nimport * as scene from './scene.js';\r\n\r\nexport var pxlShaders={\r\n  'animated':animated,\r\n  'core':core,\r\n  'objects':objects,\r\n  'particles':particles,\r\n  'rendering':rendering,\r\n  'scene':scene\r\n}","// Base Particle Class for pxlNav\r\n//   Written by Kevin Edzenga; 2024,2025\r\n\r\nimport {\r\n  Points,\r\n  PointsMaterial,\r\n  Float32BufferAttribute,\r\n  Vector2,\r\n  Vector3,\r\n  NearestFilter,\r\n  NearestMipmapNearestFilter,\r\n  BufferGeometry,\r\n  AdditiveBlending\r\n} from \"../../../libs/three/three.module.min.js\";\r\n\r\nimport { RENDER_LAYER } from \"../../core/Enums.js\";\r\n\r\nimport { dustVert, dustFrag } from './shaders/FloatingDust.js';\r\n\r\n/**\r\n * Default Particle System Class\r\n * \r\n * Access at - `pxlNav.pxlEffects.pxlParticles.ParticleBase`\r\n * \r\n * Outputs a basic system expecting uniforms, vertex shader, and fragment shader to be passed into `build()`\r\n * @alias pxlParticles/ParticleBase\r\n * @class\r\n * @memberof pxlNav.pxlEffects.pxlParticles\r\n * @example\r\n * this.shaderSettings = {\r\n *   \"vertCount\" : 1000,\r\n *   \"pScale\" : 7,\r\n *   \"atlasRes\" : 4,\r\n *   \"atlasPicks\" : [],\r\n *   \"randomAtlas\" : false,\r\n *   \"additiveBlend\" : false,\r\n *   \"hasLights\" : false,\r\n * }\r\n *@example\r\n * // This is a default particle system\r\n * //   It expects uniforms, a vertex shader, and a fragment shader to be passed into the build() function\r\n * //\r\n * // Access this class from your pxlRoom javascript file\r\n * //   Create a new ParticleBase instance\r\n * build(){\r\n *  let dust = new pxlParticleBase( this, 'dust' );\r\n *  let uniforms = {};\r\n *  let vertShader = dustVert( dust.shaderSettings );\r\n *  let fragShader = dustFrag( hasAlphaMap );\r\n *  dust.build( uniforms, vertShader, fragShader );\r\n * }\r\n */\r\nexport class ParticleBase{\r\n  /**\r\n   * Create a ParticleBase instance.\r\n   * @constructor\r\n   * @param {Object} room - The room object where the particle system will be added.\r\n   * @param {string} [systemName='particles'] - The name of the particle system.\r\n   * @property {string} name - The name of the particle system.\r\n   * @property {Object} room - The room object where the particles will be added.\r\n   * @property {BufferGeometry} geometry - The geometry of the particle system.\r\n   * @property {Material} material - The material of the particle system.\r\n   * @property {Points} points - The points object of the particle system.\r\n   * @property {number} count - The number of particles.\r\n   * @property {Vector2} pscale - The scale of the particles.\r\n   * @property {Vector3} position - The position of the particle system.\r\n   * @property {string} atlasPath - The path to the atlas texture file.\r\n   * @property {string} atlasAlphaPath - The path to the atlas alpha texture file.\r\n   * @property {boolean} hasAlphaMap - Flag for whether the atlas texture has an alpha map.\r\n   * @property {Object} shaderSettings - Shader settings for the particle system.\r\n   * @property {Array<string>} knownKeys - Known keys for shader settings.\r\n   */\r\n  constructor( room=null, systemName='particles' ){\r\n    this.type = \"particleSystem\";\r\n    this.name=systemName;\r\n    this.room=room;\r\n    \r\n    this.geometry = null;\r\n    this.material = null;\r\n    \r\n    this.points = null;\r\n    this.count = -1;\r\n    this.pscale = new Vector2(0,0);\r\n    this.position = new Vector3(0,0,0);\r\n    \r\n    // Default atlas texture file path\r\n    this.atlasPath = \"sprite_dustAtlas_rgb.jpg\";\r\n    this.atlasAlphaPath = \"sprite_dustAtlas_alpha.jpg\";\r\n    this.hasAlphaMap = true;\r\n\r\n    /**\r\n     * Shader settings for the floating dust particles.\r\n     * @type {Object}\r\n     * @property {number} vertCount - Number of vertices.\r\n     * @property {number} pScale - Scale of the particles.\r\n     * @property {number} atlasRes - Atlas resolution.\r\n     * @property {Array} atlasPicks - Atlas picks.\r\n     * @property {boolean} randomAtlas - Random atlas flag.\r\n     * @property {boolean} additiveBlend - Additive blending flag.\r\n     * @property {boolean} hasLights - Lights flag.\r\n     */\r\n    this.shaderSettings = {\r\n      \"vertCount\" : 1000,\r\n      \"pScale\" : 7,\r\n      \"atlasRes\" : 4,\r\n      \"atlasPicks\" : [],\r\n      \"randomAtlas\" : false,\r\n      \"additiveBlend\" : false,\r\n      \"hasLights\" : false,\r\n    }\r\n    /**\r\n     * Known keys for shader settings.\r\n     * @type {Array<string>}\r\n     */\r\n    this.knownKeys = Object.keys( this.shaderSettings );\r\n  }\r\n  \r\n  // 'vertexCount' - Point Count\r\n  // 'pScale' - Point Base Scale\r\n  // 'atlasRes' - Sprite Texture Width Count (Square atlas' only)\r\n  // 'atlasPicks' - Atlas Pick's Origin Array\r\n  //                  Starting corners from upper left of image\r\n  //                    Sprite texture size given - 1/atlasRes\r\n  /**\r\n   * Build the particle system with the given shader settings.\r\n   * @method\r\n   * @memberof ParticleBase\r\n   * @param {Object} [curShaderSettings={}] - Current shader settings to override the default settings.\r\n   * @param {string} [vertShader=null] - The vertex shader for the particle system.\r\n   * @param {string} [fragShader=null] - The fragment shader for the particle system.\r\n   */\r\n  build( curShaderSettings={}, uniforms={}, vertShader=null, fragShader=null ){\r\n    if( !vertShader || !fragShader ){\r\n      console.error(\"No Shader Found; Cannot Build Particle System\");\r\n      return;\r\n    }\r\n    if( curShaderSettings && typeof curShaderSettings === Object ){\r\n      let curSettingKeys = Object.keys( curShaderSettings );\r\n      this.knownKeys.forEach(( key )=>{\r\n        if( curSettingKeys.includes( key ) ){\r\n          this.shaderSettings[key] = curShaderSettings[key];\r\n        }else{\r\n          curShaderSettings[key] = this.shaderSettings[key];\r\n        }\r\n      });\r\n    }\r\n\r\n    if( !this.shaderSettings[\"atlasPicks\"] || this.shaderSettings[\"atlasPicks\"].length < 1 ){\r\n      this.shaderSettings[\"atlasPicks\"] = this.elementDuplicator([ [0.0,0.75], [0.0,0.5], [0.25,0.75], [0.25,0.5] ],4);\r\n    }\r\n    \r\n    let mtl = this.room.pxlFile.pxlShaderBuilder( uniforms, vertShader, fragShader );\r\n\r\n    this.material = mtl;\r\n    this.material.transparent=true;\r\n    this.material.depthTest=true;\r\n    this.material.depthWrite=false;\r\n    if( this.shaderSettings.hasOwnProperty(\"additiveBlend\") && this.shaderSettings.additiveBlend ){\r\n      this.material.blending = AdditiveBlending;\r\n    }\r\n\r\n    this.addToScene();\r\n  }\r\n\r\n  /**\r\n   * Set the position of the particle system.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {Vector3} position - The position of the particle system.\r\n   */\r\n  setPosition( ...args ){\r\n    if( args.length === 1 ){\r\n      this.position = args[0];\r\n    }else{\r\n      this.position = new Vector3( ...args );\r\n    }\r\n    if( this.points ){\r\n      this.points.position.copy( this.position );\r\n    }\r\n  }\r\n  \r\n\r\n  setMaterial( mtl ){\r\n    if( !mtl && !mtl.isMaterial ){\r\n      console.error(\"No Material Found; Cannot Set Particle System Material\");\r\n      return;\r\n    }\r\n\r\n    this.material = mtl;\r\n    if( this.points ){\r\n      this.points.material = mtl;\r\n    }\r\n  }\r\n\r\n  setGeometry( geo ){\r\n    if( !geo && !geo.isBufferGeometry ){\r\n      console.error(\"No Geometry Found; Cannot Set Particle System Geometry\");\r\n      return;\r\n    }\r\n\r\n    this.shaderSettings.vertCount = geo.attributes.position.count;\r\n\r\n    this.geometry = geo;\r\n    if( this.points ){\r\n      this.points.geometry = geo;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the shader settings for the particle system.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @returns {Object} The shader settings for the particle system.\r\n   */\r\n  getSettings(){\r\n    return this.shaderSettings;\r\n  }\r\n\r\n  setSettings( settings={} ){\r\n    if( !settings || typeof settings !== \"object\" ){\r\n      console.error(\"No Settings Found; Cannot Set Particle System Settings\");\r\n      return;\r\n    }\r\n    let curSettingKeys = Object.keys( settings );\r\n    this.knownKeys.forEach(( key )=>{\r\n      if( curSettingKeys.includes( key ) ){\r\n        this.shaderSettings[key] = settings[key];\r\n      }else{\r\n        settings[key] = this.shaderSettings[key];\r\n      }\r\n    });\r\n    if( this.points ){\r\n      this.points.material.uniforms.pointScale.value = new Vector2(\r\n        this.shaderSettings.pScale * this.room.pxlEnv.pxlQuality.screenResPerc,\r\n        this.shaderSettings.pScale * this.room.pxlEnv.pxlQuality.screenResPerc\r\n      );\r\n    }\r\n  }\r\n\r\n  // -- -- -- -- -- -- -- --\r\n  // -- Add To Scene Function  -- --\r\n  // -- -- -- -- -- -- -- -- -- --\r\n  \r\n  // 'vertexCount' - Point Count\r\n  // 'pScale' - Point Base Scale\r\n  /**\r\n   * Add the particle system to the scene.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {number} vertexCount - The number of vertices.\r\n   * @param {number} pScale - The scale of the particles.\r\n   * @param {number} atlasRes - The atlas resolution.\r\n   * @param {Array} atlasPicks - The atlas picks.\r\n   * @returns {Object} The particle system added to the scene.\r\n   */\r\n  addToScene(){\r\n    \r\n    if( !this.shaderSettings ){\r\n      console.error(\"No Shader Settings Found; Somehow deleted?\");\r\n      return;\r\n    }\r\n\r\n    let vertexCount = this.shaderSettings.vertCount;\r\n    let pScale = this.shaderSettings.pScale;\r\n    let atlasMtl = this.material;\r\n    let atlasRes = this.shaderSettings.atlasRes;\r\n    let atlasPicks = this.shaderSettings.atlasPicks;\r\n    let randomRanges = this.shaderSettings.randomAtlas;\r\n    let blendAdditive = this.shaderSettings.additiveBlend;\r\n\r\n    if( this.geometry && this.geometry.attributes.position.count > 0 ){\r\n      vertexCount = this.geometry.attributes.position.count;\r\n      this.shaderSettings.vertCount = vertexCount;\r\n    }\r\n\r\n    this.room.materialList[ this.name ] = atlasMtl;\r\n    \r\n    this.count = vertexCount;\r\n    this.pscale.x = pScale * this.room.pxlEnv.pxlQuality.screenResPerc ;\r\n\r\n    let atlasPicker=null;\r\n    // Set random/list atlas picking function as variable \r\n    if( randomRanges ){\r\n      atlasPicker = this.atlasRandomGen;\r\n      atlasPicks = atlasRes;\r\n    }else{\r\n      atlasPicker = this.atlasArrayPicker;\r\n    }\r\n    \r\n    // If no atlas based material is set, create a new one\r\n    if( !atlasMtl ){\r\n      atlasMtl = this.newMaterial();\r\n    }\r\n    \r\n    let verts = [];\r\n    let seeds = [];\r\n    let atlasId = [];\r\n    let geo = null;\r\n    \r\n\r\n    // -- -- --\r\n\r\n    // If a BufferGeometry is already set, check for attributes and generate if needed\r\n\r\n    if( this.geometry ){\r\n      geo = this.geometry;\r\n\r\n      let genSeed = false;\r\n      let genAtlas = false;\r\n\r\n      vertexCount = geo.attributes.position.count;\r\n      this.count = vertexCount;\r\n\r\n      if( !geo.attributes.hasOwnProperty('atlas') ){\r\n        genAtlas = true;\r\n      }\r\n      if( !geo.attributes.hasOwnProperty('seeds') ){\r\n        genSeed = true;\r\n      }\r\n\r\n      if( genAtlas || genSeed ){\r\n        for( let x=0; x<vertexCount; ++x ){\r\n          if( genSeed ){\r\n            seeds.push( (Math.random()), (Math.random()*2-1), (Math.random()), (Math.random()*2-1) );\r\n          }\r\n          if( genAtlas ){\r\n            atlasId.push( ...atlasPicker( atlasPicks ) );\r\n          }\r\n        }\r\n      }\r\n      \r\n      if( genSeed ){\r\n        let seedAttribute = new Float32BufferAttribute( seeds, 4 );\r\n        geo.setAttribute( 'seeds', seedAttribute );\r\n      }\r\n      if( genAtlas ){\r\n        let atlasAttribute = new Float32BufferAttribute( atlasId, 2 );\r\n        geo.setAttribute( 'atlas', atlasAttribute );\r\n      }\r\n\r\n    // If no geometry is set, create a new BufferGeometry\r\n    }else{\r\n      for( let x=0; x<vertexCount; ++x ){\r\n        verts.push( 0,0,0 );\r\n        seeds.push( (Math.random()), (Math.random()*2-1), (Math.random()), (Math.random()*2-1) );\r\n        atlasId.push( ...atlasPicker( atlasPicks ) );\r\n      }\r\n      let posAttribute = new Float32BufferAttribute( verts, 3 );\r\n      let seedAttribute = new Float32BufferAttribute( seeds, 4 );\r\n      let atlasAttribute = new Float32BufferAttribute( atlasId, 2 );\r\n      geo = new BufferGeometry();\r\n      geo.setAttribute( 'position', posAttribute );\r\n      geo.setAttribute( 'seeds', seedAttribute );\r\n      geo.setAttribute( 'atlas', atlasAttribute );\r\n    }\r\n\r\n    // -- -- --\r\n\r\n\r\n    //atlasMtl.transparent = true;\r\n    atlasMtl.depthTest=true;\r\n    atlasMtl.depthWrite=false;\r\n\r\n\r\n    let psystem = new Points( geo, atlasMtl );\r\n    psystem.sortParticles = false;\r\n    psystem.frustumCulled = false;\r\n\r\n    this.room.scene.add( psystem );\r\n\r\n    psystem.layers.set(1);\r\n    psystem.renderOrder = RENDER_LAYER.PARTICLES;\r\n\r\n    psystem.pBaseScale=pScale;\r\n    this.room.geoList[ this.name ]=psystem;\r\n    \r\n    this.geometry = geo;\r\n    this.material = atlasMtl;\r\n    this.points = psystem;\r\n\r\n    //psystem.position.copy( this.position );\r\n    \r\n    if( blendAdditive ){\r\n      psystem.material.blending = AdditiveBlending;\r\n    }\r\n\r\n    return psystem;\r\n  }\r\n  \r\n  // -- -- -- -- -- -- -- --\r\n  // -- Helper Functions  -- --\r\n  // -- -- -- -- -- -- -- -- -- --\r\n  \r\n  /**\r\n   * Generate random atlas values.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {number} [atlasRes=4] - The atlas resolution.\r\n   * @param {number} [dSize=2] - The size of the atlas.\r\n   * @returns {Array} Random atlas values.\r\n   * @example\r\n   * // Generate random atlas values\r\n   * import { pxlNav } from 'pxlNav.esm.js';\r\n   * const pxlParticleBase = pxlNav.pxlEffects.pxlParticles.pxlParticle\r\n   * \r\n   * build(){\r\n   *  pxlParticleBase.atlasRandomGen( 4, 2 );\r\n   * // Output: [0.0,0.75]\r\n   * }\r\n   */\r\n  atlasRandomGen( atlasRes=4, dSize=2 ){\r\n    let atlasDiv = 1.0/atlasRes;\r\n    return Array.from({length:dSize}).map(()=>{\r\n      return Math.floor( (Math.random() * 648405.710 ) % atlasRes )*atlasDiv;\r\n    });\r\n  }\r\n  \r\n  // !!\r\n  /**\r\n   * Generate a list of random atlas values.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {number} [count=4] - The number of random atlas values to generate.\r\n   * @param {number} [res=4] - The atlas resolution.\r\n   * @param {number} [size=2] - The size of the atlas.\r\n   * @returns {Array} A list of random atlas values.\r\n   * @example\r\n   * // Generate a list of random atlas values\r\n   * import { pxlNav } from 'pxlNav.esm.js';\r\n   * const pxlParticleBase = pxlNav.pxlEffects.pxlParticles.pxlParticle\r\n   * \r\n   * build(){\r\n   *   pxlParticleBase.atlasRandomList( 4, 4, 2 );\r\n   *   // Output: [ [0.0,0.75], [0.0,0.5], [0.25,0.75], [0.25,0.5] ]\r\n   * }\r\n   */\r\n  atlasRandomList( count=4, res=4, size=2 ){\r\n    return Array.from({length:count}).map((c)=>{\r\n      return this.atlasRandomGen( res, size );\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * Pick a random atlas value from an array.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {Array} arr - The array of atlas values.\r\n   * @returns {Array} A random atlas value from the array.\r\n   * @example\r\n   * // Pick a random atlas value from an array\r\n   * import { pxlNav } from 'pxlNav.esm.js';\r\n   * const pxlParticleBase = pxlNav.pxlEffects.pxlParticles.pxlParticle\r\n   * \r\n   * build(){\r\n   *   pxlParticleBase.atlasArrayPicker( [ [0.0,0.75], [0.0,0.5], [0.25,0.75], [0.25,0.5] ] );\r\n   *   // Output 1: [0.0,0.75]\r\n   *   // Output 2: [0.0,0.5]\r\n   *   // Output 3: [0.25,0.75]\r\n   *   // Output 4: [0.0,0.5]\r\n   * }\r\n   * \r\n   */\r\n  atlasArrayPicker( arr ){\r\n    return arr[Math.floor( (Math.random() * 92314.75) % arr.length )];\r\n  }\r\n  \r\n  /**\r\n   * Duplicate an array.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {Array} val - The array to duplicate.\r\n   * @param {number} count - The number of times to duplicate the array.\r\n   * @returns {Array} The duplicated array.\r\n   * @example\r\n   * // Duplicate an array\r\n   * import { pxlNav } from 'pxlNav.esm.js';\r\n   * const pxlParticleBase = pxlNav.pxlEffects.pxlParticles.pxlParticle\r\n   * \r\n   * build(){\r\n   *  pxlParticleBase.dupeArray( [0.0,0.75], 4 );\r\n   *  // Output: [0.0,0.75], [0.0,0.75], [0.0,0.75], [0.0,0.75]\r\n   * }\r\n   */\r\n  dupeArray( val, count ){\r\n    return Array.from({length:count}).fill(val);\r\n  }\r\n  \r\n  /**\r\n   * Duplicate an element in an array.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {Array} arr - The array to duplicate.\r\n   * @param {number} [count=4] - The number of times to duplicate the array.\r\n   * @returns {Array} The duplicated array.\r\n   * @example\r\n   * // Duplicate an element in an array\r\n   * import { pxlNav } from 'pxlNav.esm.js';\r\n   * const pxlParticleBase = pxlNav.pxlEffects.pxlParticles.pxlParticle\r\n   * \r\n   * build(){\r\n   *   pxlParticleBase.elementDuplicator([ [0.0,0.75], [0.0,0.5], [0.25,0.75], [0.25,0.5] ],4);\r\n   *   // Output: [\r\n   *   //    [0.0,0.75], [0.0,0.75], [0.0,0.75], [0.0,0.75],\r\n   *   //    [0.0,0.5], [0.0,0.5], [0.0,0.5], [0.0,0.5],   \r\n   *   //    [0.25,0.75], [0.25,0.75], [0.25,0.75], [0.25,0.75], \r\n   *   //    [0.25,0.5], [0.25,0.5], [0.25,0.5], [0.25,0.5]\r\n   *   // ]\r\n   * }\r\n   */\r\n  elementDuplicator( arr, count=4 ){\r\n    return arr.map((c)=>{\r\n      return this.dupeArray( c, count );\r\n    }).flat(1);\r\n  }\r\n  \r\n  // -- -- --\r\n    \r\n  /**\r\n   * Find the light positions in the room.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @returns {Array} The light positions in the room.\r\n   * @private\r\n   */\r\n  findLightPositions(){\r\n    let lightPos=[];\r\n    let lightCount=0;\r\n    if( this.room.lightList.hasOwnProperty(\"PointLight\") ){\r\n      lightCount = this.room.lightList.PointLight.length;\r\n      this.room.lightList.PointLight.forEach( (l)=>{\r\n        lightPos.push( l.position.clone() );\r\n      })\r\n    }\r\n    return lightPos;\r\n  }\r\n  \r\n  /**\r\n   * Check if the room has point lights.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @returns {boolean} Flag for whether the room has point lights.\r\n   */\r\n  hasPointLights(){\r\n    return this.room.lightList.hasOwnProperty(\"PointLight\");\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  // Set image path\r\n  /**\r\n   * Set the path for the atlas texture file.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {string} path - The path to the atlas texture file.\r\n   * @param {string} [alphaPath=null] - The path to the atlas alpha texture\r\n   * @returns {void}\r\n   * @example\r\n   * // Run from your pxlRoom javascript file\r\n   * // Set the path for the atlas texture file\r\n   * build(){\r\n    * let dust = new pxlParticleBase();\r\n    * dust.setAtlasPath( \"sprite_dustAtlas_rgb.jpg\", \"sprite_dustAtlas_alpha.jpg\" );\r\n   * }\r\n   */\r\n  setAtlasPath( path, alphaPath=null ){\r\n    this.atlasPath = path;\r\n    if( alphaPath ){\r\n      this.atlasAlphaPath = alphaPath;\r\n      this.hasAlphaMap = true;\r\n    }else{\r\n      this.hasAlphaMap = false;\r\n    }\r\n  }\r\n  \r\n  // -- -- --\r\n  \r\n  // Set the material for the system\r\n  /**\r\n   * Set the material for the particle system.\r\n   * @method\r\n   * @memberof pxlParticles/ParticleBase\r\n   * @param {Material} mtl - The material for the particle system.\r\n   * @returns {void}\r\n   * @example\r\n   * // Run from your pxlRoom javascript file\r\n   * // Create an Atlas Material\r\n   * import { SphereGeometry, Mesh } from 'three';\r\n   * \r\n   * build(){\r\n   *  let sphere = new SphereGeometry( 1, 32, 32 );\r\n   *  let mtl = pxlNav.pxlEffects.pxlParticles.pxlParticleBase.newMaterial();\r\n   *  let mesh = new Mesh( sphere, mtl );\r\n   *  this.scene.add( mesh );\r\n   * }\r\n   */\r\n  newMaterial(setSystemMtl=true){\r\n    let lightPosArr = this.hasPointLights();\r\n    let dustUniforms={\r\n      atlasTexture:{type:\"t\",value: null },\r\n      noiseTexture:{type:\"t\",value: null },\r\n      time:{type:\"f\",value: this.room.msRunner },\r\n      pointScale:{type:\"f\",value: this.pscale },\r\n      intensity:{type:\"f\",value:1.0},\r\n      rate:{type:\"f\",value:0.035},\r\n      lightPos:{value:lightPosArr},\r\n    };\r\n\r\n    if( this.hasAlphaMap ){\r\n      dustUniforms['atlasAlphaTexture'] = {type:\"t\",value: null };\r\n    }\r\n\r\n    let mtl = this.room.pxlFile.pxlShaderBuilder( dustUniforms, dustVert( this.shaderSettings ), dustFrag( this.hasAlphaMap ) );\r\n\r\n    mtl.transparent=true;\r\n    // mtl.blending=AdditiveBlending;\r\n    \r\n    if( this.hasAlphaMap ){\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      if( this.atlasAlphaPath ){\r\n        mtl.uniforms.atlasAlphaTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 1, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      }\r\n    }else{\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n    }\r\n\r\n\r\n    mtl.uniforms.noiseTexture.value = this.room.smoothNoiseTexture;\r\n    mtl.depthTest=true;\r\n    mtl.depthWrite=false;\r\n    if( setSystemMtl ){\r\n      this.room.materialList[ this.name ]=mtl;\r\n    }\r\n    return mtl ;\r\n  }\r\n}\r\n","\r\n\r\n// pxlNav Includes -\r\n//   Primary Effect's File Conduit\r\n//     Kevin Edzenga, 2024\r\n// -- -- --\r\n// Effects consist of the Effect Manager and the Effect itself.\r\n//   For the case of Particles -\r\n//     The particle system is the Manager and the particles themselves are Shaders\r\n\r\n/**\r\n * @file effects.js\r\n * @description Primary Effect's File Conduit for pxlNav. This module includes the Effect Manager and the Effect itself.\r\n * \r\n * Documentation links for particle effects:\r\n * - [pxlNav.pxlEffects.pxlParticles]{@link pxlNav.pxlEffects.pxlParticles}\r\n * \r\n * @module pxlNav.pxlEffects\r\n * \r\n * @requires ./particles.js\r\n */\r\n\r\nimport { ParticleBase, BillowSmoke, EmberWisps, FloatingDust, HeightMap } from './particles.js';\r\n\r\nconst pxlEffects = { \r\n  \"pxlParticles\" : { ParticleBase, BillowSmoke, EmberWisps, FloatingDust, HeightMap },\r\n};\r\n\r\n/**\r\n * pxlEffects for pxlNav.\r\n * @memberof pxlNav\r\n * @property {Object} pxlParticles - Particle effects.\r\n */\r\nexport { pxlEffects };","// Billow Smoke Particle System for pxlNav\r\n//   Written by Kevin Edzenga; 2024,2025\r\n\r\nimport {\r\n  Vector3,\r\n  AdditiveBlending,\r\n  DoubleSide,\r\n  NearestFilter,\r\n  NearestMipmapNearestFilter\r\n} from \"../../../libs/three/three.module.min.js\";\r\n\r\nimport { ParticleBase } from './ParticleBase.js';\r\nimport { smokeVert, smokeFrag } from './shaders/Smoke.js';\r\n\r\n// Campfire's spiralling smoke sprites\r\n\r\n\r\n/**\r\n * Class representing billowing smoke particles for a campfire effect.\r\n * \r\n * Access at - `pxlNav.pxlEffects.pxlParticles.BillowSmoke`\r\n * \r\n * Extends - [ParticleBase]{@link ParticleBase}\r\n * \r\n * @alias pxlParticles/BillowSmoke\r\n * @class\r\n * @memberof pxlNav.pxlEffects.pxlParticles\r\n * @example\r\n * this.shaderSettings = {\r\n *   \"vertCount\" : 600,\r\n *   \"pScale\" : 56,\r\n *   \"pOpacity\" : 1.0,\r\n *   \"proxDist\" : 200,\r\n *   \"atlasRes\" : 4,\r\n *   \"atlasPicks\" : [],\r\n *   \"randomAtlas\" : true,\r\n *   \"additiveBlend\" : false,\r\n * \r\n *   \"windDir\" : new Vector3( 0, 0, 1 ),\r\n *   \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n * }\r\n * @example\r\n * // Floating Dust Particle System for pxlNav\r\n * import { pxlEffects } from \"pxlNav.esm.js\";\r\n * const BillowSmoke = pxlEffects.pxlParticles.BillowSmoke; \r\n * \r\n * // You can put this in yuor `fbxPostLoad()` or `build()` function\r\n * fbxPostLoad(){\r\n * \r\n *   let billowSmokeSystem = new BillowSmoke( room, 'billowSmoke' );\r\n *  \r\n *   let curShaderSettings = billowSmokeSystem.getSettings();\r\n *   curShaderSettings[\"vertCount\"] = 1200; // Number of particles\r\n *   curShaderSettings[\"pScale\"] = 9; // Scale of the particles\r\n *   curShaderSettings[\"pOpacity\"] = 0.8; // Opacity of the particles\r\n *   curShaderSettings[\"proxDist\"] = 400; // Proximity distance\r\n *   curShaderSettings[\"additiveBlend\"] = true; // Additive blending for the particles\r\n * \r\n *   billowSmokeSystem.build( curShaderSettings );\r\n * }\r\n */\r\nexport class BillowSmoke extends ParticleBase{\r\n  /**\r\n   * Create a BillowSmoke instance.\r\n   * @param {Object} room - The room object where the particles will be added.\r\n   * @param {string} [systemName='billowSmoke'] - The name of the particle system.\r\n   */\r\n  constructor( room=null, systemName='billowSmoke' ){\r\n    super( room, systemName );\r\n    this.name=systemName;\r\n    this.room=room;\r\n\r\n    /**\r\n     * Shader settings for the smoke particles.\r\n     * @type {Object}\r\n     * @property {number} vertCount - Point Count\r\n     * @property {number} pScale - Point Base Scale\r\n     * @property {number} pOpacity - Point Opacity\r\n     * @property {number} proxDist - Proximity Distance\r\n     * @property {number} atlasRes - Sprite Texture Width Count (Square atlas' only)\r\n     * @property {Array} atlasPicks - Atlas Pick's Origin Array\r\n     * @property {boolean} randomAtlas - Random Atlas Flag\r\n     * @property {boolean} additiveBlend - Additive Blend Flag\r\n     * @property {Vector3} windDir - Wind Direction\r\n     * @property {Vector3} offsetPos - Offset Position\r\n     */\r\n    this.shaderSettings = {\r\n      \"vertCount\" : 600,\r\n      \"pScale\" : 56,\r\n      \"pOpacity\" : 1.0,\r\n      \"proxDist\" : 200,\r\n      \"atlasRes\" : 4,\r\n      \"atlasPicks\" : [],\r\n      \"randomAtlas\" : true,\r\n      \"additiveBlend\" : false,\r\n\r\n      \"windDir\" : new Vector3( 0, 0, 1 ),\r\n      \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n    }\r\n    /**\r\n     * Known keys for shader settings.\r\n     * @type {Array<string>}\r\n     */\r\n    this.knownKeys = Object.keys( this.shaderSettings );\r\n  }\r\n  \r\n  // 'vertexCount' - Point Count\r\n  // 'pScale' - Point Base Scale\r\n  // 'atlasRes' - Sprite Texture Width Count (Square atlas' only)\r\n  // 'atlasPicks' - Atlas Pick's Origin Array\r\n  //                  Starting corners from upper left of image\r\n  //                    Sprite texture size given - 1/atlasRes\r\n/**\r\n * Build the smoke particle system with the given shader settings.\r\n * @method\r\n * @memberof pxlParticles/BillowSmoke\r\n * @param {Object} [curShaderSettings={}] - Current shader settings to override the default settings.\r\n * @returns {void}\r\n */\r\n  build( curShaderSettings={} ){\r\n\r\n\r\n    if( curShaderSettings && typeof curShaderSettings === Object ){\r\n      let curSettingKeys = Object.keys( curShaderSettings );\r\n      this.knownKeys.forEach( key => {\r\n        if( curSettingKeys.includes( key ) ){\r\n          this.shaderSettings[key] = curShaderSettings[key];\r\n        }else{\r\n          curShaderSettings[key] = this.shaderSettings[key];\r\n        }\r\n      });\r\n    }\r\n\r\n    // Starting corners from the upper left for the given 1/atlasRes\r\n    if( !this.shaderSettings.atlasPicks || this.shaderSettings.atlasPicks.length == 0 ){\r\n      this.shaderSettings.atlasPicks = [...super.dupeArray([0.5,0.0],2), ...super.dupeArray([0.5,0.25],2),\r\n                    ...super.dupeArray([0.5,0.5],2), ...super.dupeArray([0.5,0.75],2),\r\n                    ...super.dupeArray([0.75,0.75],4), ...super.dupeArray([0.75,0.25],3),\r\n                    ...super.dupeArray([0.75,0.25],3) ];\r\n    }\r\n    \r\n    \r\n    let smokeUniforms={\r\n      atlasTexture:{type:\"t\",value: null },\r\n      noiseTexture:{type:\"t\",value: null },\r\n      time:{type:\"f\",value: this.room.msRunner },\r\n      windDir:{type:\"f\",value: curShaderSettings.windDir },\r\n      offsetPos:{type:\"f\",value: curShaderSettings.offsetPos },\r\n      pointScale:{type:\"f\",value: this.pscale },\r\n      intensity:{type:\"f\",value:0.8},\r\n      rate:{type:\"f\",value:2.85}\r\n    };\r\n\r\n    if( this.hasAlphaMap ){\r\n      smokeUniforms['atlasAlphaTexture'] = {type:\"t\",value: null };\r\n    }\r\n    \r\n    let mtl = this.room.pxlFile.pxlShaderBuilder( smokeUniforms, smokeVert(), smokeFrag( this.hasAlphaMap ) );\r\n    mtl.transparent=true;\r\n\r\n    if( this.shaderSettings[\"additiveBlend\"] ){\r\n      mtl.blending=AdditiveBlending; \r\n    }\r\n\r\n    if( this.hasAlphaMap ){\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      if( this.atlasAlphaPath ){\r\n        mtl.uniforms.atlasAlphaTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 1, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      }\r\n    }else{\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n    }\r\n\r\n\r\n    mtl.uniforms.noiseTexture.value = this.room.softNoiseTexture;\r\n    mtl.depthTest=true;\r\n    mtl.depthWrite=false;\r\n    this.room.materialList[ this.name ]=mtl;\r\n\r\n    this.material = mtl;\r\n    \r\n    super.addToScene();\r\n\r\n  }\r\n}\r\n","// Ember Wisp Particle System for pxlNav\r\n//   Written by Kevin Edzenga; 2024,2025\r\n\r\n\r\nimport {\r\n  Vector3,\r\n  AdditiveBlending,\r\n  DoubleSide,\r\n  NearestFilter,\r\n  NearestMipmapNearestFilter\r\n} from \"../../../libs/three/three.module.min.js\";\r\n\r\nimport { ParticleBase } from './ParticleBase.js';\r\nimport { emberWispsVert, emberWispsFrag } from './shaders/EmberWisps.js';\r\n\r\n\r\n/**\r\n * Class representing EmberWisps, a type of particle effect that simulates fire embers wisping into the air.\r\n * \r\n * Access at - `pxlNav.pxlEffects.pxlParticles.EmberWisps`\r\n * \r\n * Extends - [ParticleBase]{@link ParticleBase}\r\n * \r\n * @alias pxlParticles/EmberWisps\r\n * @class\r\n * @memberof pxlNav.pxlEffects.pxlParticles\r\n * @example\r\n * this.shaderSettings = {\r\n *   \"vertCount\" : 600,\r\n *   \"pScale\" : 7,\r\n *   \"pOpacity\" : 1.0,\r\n *   \"proxDist\" : 200,\r\n *   \"atlasRes\" : 4,\r\n *   \"atlasPicks\" : [],\r\n *   \"randomAtlas\" : true,\r\n *   \"additiveBlend\" : false,\r\n *\r\n *   \"windDir\" : new Vector3( 0, 0, 1 ),\r\n *   \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n * }\r\n * @example\r\n * // Floating Dust Particle System for pxlNav\r\n * import { pxlEffects } from \"pxlNav.esm.js\";\r\n * const EmberWisps = pxlEffects.pxlParticles.EmberWisps; \r\n * \r\n * // You can put this in yuor `fbxPostLoad()` or `build()` function\r\n * fbxPostLoad(){\r\n * \r\n *   let emberWispsSystem = new EmberWisps( room, 'emberWisps' );\r\n *  \r\n *   let curShaderSettings = emberWispsSystem.getSettings();\r\n *   curShaderSettings[\"vertCount\"] = 1200; // Number of particles\r\n *   curShaderSettings[\"pScale\"] = 9; // Scale of the particles\r\n *   curShaderSettings[\"pOpacity\"] = 0.8; // Opacity of the particles\r\n *   curShaderSettings[\"proxDist\"] = 400; // Proximity distance\r\n *   curShaderSettings[\"additiveBlend\"] = true; // Additive blending for the particles\r\n * \r\n *   emberWispsSystem.build( curShaderSettings );\r\n * }\r\n */\r\nexport class EmberWisps extends ParticleBase{\r\n  /**\r\n   * Create an EmberWisps instance.\r\n   * @param {Object} room - The room object where the particle system will be added.\r\n   * @param {string} [systemName='emberWisps'] - The name of the particle system.\r\n   * @property {Object} room - The room object.\r\n   * @property {string} name - The name of the particle system.\r\n   * @property {Object} shaderSettings - The shader settings for the particle system.\r\n   * @property {Array<string>} knownKeys - Known keys for shader\r\n   */\r\n  constructor( room=null, systemName='emberWisps' ){\r\n    super( room, systemName );\r\n    this.name=systemName;\r\n    this.room=room;\r\n    \r\n    /**\r\n     * Shader settings for the EmberWisps particle effect.\r\n     * @type {Object}\r\n     * @property {number} vertCount - Point Count\r\n     * @property {number} pScale - Point Base Scale\r\n     * @property {number} pOpacity - Point Opacity\r\n     * @property {number} proxDist - Proximity Distance\r\n     * @property {number} atlasRes - Sprite Texture Width Count (Square atlas' only)\r\n     * @property {Array} atlasPicks - Atlas Pick's Origin Array\r\n     * @property {boolean} randomAtlas - Random Atlas Flag\r\n     * @property {boolean} additiveBlend - Additive Blend Flag\r\n     * @property {Vector3} windDir - Wind Direction\r\n     * @property {Vector3} offsetPos - Offset Position\r\n     */\r\n    this.shaderSettings = {\r\n      \"vertCount\" : 600,\r\n      \"pScale\" : 7,\r\n      \"pOpacity\" : 1.0,\r\n      \"proxDist\" : 200,\r\n      \"atlasRes\" : 4,\r\n      \"atlasPicks\" : [],\r\n      \"randomAtlas\" : true,\r\n      \"additiveBlend\" : false,\r\n\r\n      \"windDir\" : new Vector3( 0, 0, 1 ),\r\n      \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n    }\r\n    /**\r\n     * Known keys for shader settings.\r\n     * @type {Array<string>}\r\n     */\r\n    this.knownKeys = Object.keys( this.shaderSettings );\r\n  }\r\n  \r\n  // 'vertexCount' - Point Count\r\n  // 'pScale' - Point Base Scale\r\n  // 'atlasRes' - Sprite Texture Width Count (Square atlas' only)\r\n  // 'atlasPicks' - Atlas Pick's Origin Array\r\n  //                  Starting corners from upper left of image\r\n  //                    Sprite texture size given - 1/atlasRes\r\n  /**\r\n   * Build the EmberWisps particle effect with the given shader settings.\r\n   * @method\r\n   * @memberof pxlParticles/EmberWisps\r\n   * @param {Object} [curShaderSettings={}] - Current shader settings to override the default settings.\r\n   */\r\n  build( curShaderSettings={} ){\r\n    \r\n    if( curShaderSettings && typeof curShaderSettings === Object ){\r\n      let curSettingKeys = Object.keys( curShaderSettings );\r\n      this.knownKeys.forEach( key => {\r\n        if( curSettingKeys.includes( key ) ){\r\n          this.shaderSettings[key] = curShaderSettings[key];\r\n        }else{\r\n          curShaderSettings[key] = this.shaderSettings[key];\r\n        }\r\n      });\r\n    }\r\n\r\n    if( !this.shaderSettings['atlasPicks'] || this.shaderSettings['atlasPicks'].length == 0 ){\r\n      this.shaderSettings['atlasPicks']=super.elementDuplicator([ [0.0,0.75], [0.0,0.5], [0.25,0.75], [0.25,0.5] ],4);\r\n    }\r\n    \r\n    let emberUniforms={\r\n      atlasTexture:{type:\"t\",value: null },\r\n      noiseTexture:{type:\"t\",value: null },\r\n      time:{type:\"f\",value: this.room.msRunner },\r\n      windDir:{type:\"v\",value: this.shaderSettings.windDir },\r\n      offsetPos:{type:\"v\",value: this.shaderSettings.offsetPos },\r\n      pointScale:{type:\"f\",value: this.shaderSettings.pScale },\r\n      intensity:{type:\"f\",value:1.0},\r\n      rate:{type:\"f\",value:5.5}\r\n    };\r\n\r\n    if( this.hasAlphaMap ){\r\n      emberUniforms['atlasAlphaTexture'] = {type:\"t\",value: null };\r\n    }\r\n    \r\n    let mtl = this.room.pxlFile.pxlShaderBuilder( emberUniforms, emberWispsVert(), emberWispsFrag( this.hasAlphaMap ) );\r\n    mtl.side=DoubleSide;\r\n    mtl.transparent=true;\r\n    \r\n    if( this.shaderSettings[\"additiveBlend\"] ){\r\n      mtl.blending=AdditiveBlending; \r\n    }\r\n\r\n    if( this.hasAlphaMap ){\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      if( this.atlasAlphaPath ){\r\n        mtl.uniforms.atlasAlphaTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 1, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      }\r\n    }else{\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n    }\r\n\r\n    mtl.uniforms.noiseTexture.value = this.room.softNoiseTexture;\r\n    mtl.depthTest=true;\r\n    mtl.depthWrite=false;\r\n    this.room.materialList[ this.name ]=mtl;\r\n\r\n    this.material = mtl;\r\n\r\n    super.addToScene();\r\n  }\r\n}","// Floating Dust Particle System for pxlNav\r\n//   Written by Kevin Edzenga; 2024,2025\r\n\r\nimport {\r\n  Vector3,\r\n  NearestFilter,\r\n  NearestMipmapNearestFilter,\r\n  AdditiveBlending\r\n} from \"../../../libs/three/three.module.min.js\";\r\n\r\nimport { ParticleBase } from './ParticleBase.js';\r\nimport { dustVert, dustFrag } from './shaders/FloatingDust.js';\r\n\r\n/**\r\n * Class representing floating dust particles in the environment.\r\n * Extends the ParticleBase class.\r\n * \r\n * Access at - `pxlNav.pxlEffects.pxlParticles.FloatingDust`\r\n * \r\n * Extends - [ParticleBase]{@link ParticleBase}\r\n * \r\n * @alias pxlParticles/FloatingDust\r\n * @class\r\n * @memberof pxlNav.pxlEffects.pxlParticles\r\n * @example\r\n * this.shaderSettings = {\r\n *   \"vertCount\" : 1000,\r\n *   \"pScale\" : 7,\r\n *   \"pOpacity\" : 1.0,\r\n *   \"proxDist\" : 200,\r\n *   \"atlasRes\" : 4,\r\n *   \"atlasPicks\" : [],\r\n *   \"randomAtlas\" : false,\r\n *   \"additiveBlend\" : false,\r\n *\r\n *   \"windDir\" : new Vector3( 0, 0, 1 ),\r\n *   \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n *\r\n *   \"hasLights\" : false,\r\n *   \"fadeOutScalar\" : 1.59 , \r\n *   \"wanderInf\" : 1.0 , \r\n *   \"wanderRate\" : 1.0 , \r\n *   \"wanderFrequency\" : 2.85 \r\n * }\r\n * @example\r\n * // Floating Dust Particle System for pxlNav\r\n * import { pxlEffects } from \"pxlNav.esm.js\";\r\n * const FloatingDust = pxlEffects.pxlParticles.FloatingDust; \r\n * \r\n * // You can put this in yuor `fbxPostLoad()` or `build()` function\r\n * fbxPostLoad(){\r\n * \r\n *   let floatingDustSystem = new FloatingDust( room, 'floatingDust' );\r\n *  \r\n *   let curShaderSettings = floatingDustSystem.getSettings();\r\n *   curShaderSettings[\"vertCount\"] = 1200; // Number of particles\r\n *   curShaderSettings[\"pScale\"] = 9; // Scale of the particles\r\n *   curShaderSettings[\"pOpacity\"] = 0.8; // Opacity of the particles\r\n *   curShaderSettings[\"proxDist\"] = 400; // Proximity distance\r\n *   curShaderSettings[\"additiveBlend\"] = true; // Additive blending for the particles\r\n * \r\n *   floatingDustSystem.build( curShaderSettings );\r\n * }\r\n */\r\nexport class FloatingDust extends ParticleBase{\r\n  /**\r\n   * Creates an instance of FloatingDust.\r\n   * \r\n   * @param {Object} room - The room object where the particles will be added.\r\n   * @param {string} [systemName='floatingDust'] - The name of the particle system.\r\n   * @property {Object} room - The room object.\r\n   * @property {string} name - The name of the particle system.\r\n   * @property {Object} material - The material for the particle system.\r\n   * @property {Object} shaderSettings - The shader settings for the particle system.\r\n   * @property {Array<string>} knownKeys - Known keys for shader settings.\r\n   */\r\n  constructor( room=null, systemName='floatingDust'){\r\n    super( room, systemName );\r\n    this.name=systemName;\r\n    this.room=room;\r\n\r\n    this.material = null;\r\n\r\n    /**\r\n     * Shader settings for the floating dust particles.\r\n     * @type {Object}\r\n     * @property {number} vertCount - Number of vertices.\r\n     * @property {number} pScale - Scale of the particles.\r\n     * @property {number} pOpacity - Opacity of the particles.\r\n     * @property {number} proxDist - Proximity distance.\r\n     * @property {number} atlasRes - Atlas resolution.\r\n     * @property {Array} atlasPicks - Atlas picks.\r\n     * @property {boolean} randomAtlas - Random atlas flag.\r\n     * @property {boolean} additiveBlend - Additive blending flag.\r\n     * @property {Vector3} windDir - Wind direction.\r\n     * @property {Vector3} offsetPos - Offset position.\r\n     * @property {boolean} hasLights - Lights flag.\r\n     * @property {number} fadeOutScalar - Fade out scalar.\r\n     * @property {number} wanderInf - Wander influence.\r\n     * @property {number} wanderRate - Wander rate.\r\n     * @property {number} wanderFrequency - Wander frequency.\r\n     */\r\n    this.shaderSettings = {\r\n      \"vertCount\" : 1000,\r\n      \"pScale\" : 7,\r\n      \"pOpacity\" : 1.0,\r\n      \"proxDist\" : 200,\r\n      \"atlasRes\" : 4,\r\n      \"atlasPicks\" : [],\r\n      \"randomAtlas\" : false,\r\n      \"additiveBlend\" : false,\r\n\r\n      \"windDir\" : new Vector3( 0, 0, 1 ),\r\n      \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n\r\n      \"hasLights\" : false,\r\n      \"fadeOutScalar\" : 1.59 , \r\n      \"wanderInf\" : 1.0 , \r\n      \"wanderRate\" : 1.0 , \r\n      \"wanderFrequency\" : 2.85 \r\n    }\r\n    /**\r\n     * Known keys for shader settings.\r\n     * @type {Array<string>}\r\n     */\r\n    this.knownKeys = Object.keys( this.shaderSettings );\r\n  }\r\n  \r\n  /**\r\n   * Builds the floating dust particle system with the given shader settings.\r\n   * @method\r\n   * @memberof pxlParticles/FloatingDust\r\n   * @param {Object} [curShaderSettings={}] - Current shader settings to override the default settings.\r\n   */\r\n  build( curShaderSettings={} ){\r\n    \r\n    if( curShaderSettings && typeof curShaderSettings === Object ){\r\n      let curSettingKeys = Object.keys( curShaderSettings );\r\n      this.knownKeys.forEach( key => {\r\n        if( curSettingKeys.includes( key ) ){\r\n          this.shaderSettings[key] = curShaderSettings[key];\r\n        }else{\r\n          curShaderSettings[key] = this.shaderSettings[key];\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    if( !this.shaderSettings[\"atlasPicks\"] || this.shaderSettings[\"atlasPicks\"].length < 1 ){\r\n      this.shaderSettings[\"atlasPicks\"] = [\r\n        ...super.dupeArray([0.0,0.],4), ...super.dupeArray([0.25,0.],4),\r\n        ...super.dupeArray([0.5,0.0],2), ...super.dupeArray([0.5,0.25],2),\r\n        ...super.dupeArray([0.5,0.5],2), ...super.dupeArray([0.5,0.75],2),\r\n        ...super.dupeArray([0.75,0.75],4), ...super.dupeArray([0.75,0.25],3),\r\n        ...super.dupeArray([0.75,0.25],3)\r\n      ];\r\n    }\r\n    \r\n    this.shaderSettings[\"hasLights\"] = super.hasPointLights();\r\n\r\n    // -- -- --\r\n\r\n    // Clean up any {} settings that should be Vector3s\r\n    let windDir = curShaderSettings[\"windDir\"];\r\n    if( windDir && typeof windDir === Object && typeof windDir !== Vector3 && windDir.length === 3 ){\r\n      this.shaderSettings[\"windDir\"].set( windDir[0], windDir[1], windDir[2] );\r\n    }\r\n\r\n    let offsetPos = curShaderSettings[\"offsetPos\"];\r\n    if( offsetPos && typeof offsetPos === Object && typeof offsetPos !== Vector3 && offsetPos.length === 3 ){\r\n      this.shaderSettings[\"offsetPos\"].set( offsetPos[0], offsetPos[1], offsetPos[2] );\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    let dustUniforms={\r\n      atlasTexture:{ type:\"t\", value: null },\r\n      atlasAlphaTexture:{type:\"t\", value: null },\r\n      noiseTexture:{ type:\"t\", value: null },\r\n      time:{ type:\"f\", value: this.room.msRunner },\r\n      pointScale:{ type:\"f\", value: this.pscale },\r\n      intensity:{ type:\"f\", value:1.0 },\r\n      rate:{ type:\"f\", value:.035 },\r\n      positionOffset:{ type:\"v\", value:this.shaderSettings[\"offsetPos\"] },\r\n      windDir:{ type:\"v\", value:this.shaderSettings[\"windDir\"] }\r\n    };\r\n\r\n    \r\n    let mtl = this.room.pxlFile.pxlShaderBuilder( dustUniforms, dustVert( this.shaderSettings ), dustFrag( this.hasAlphaMap ) );\r\n    mtl.transparent=true;\r\n\r\n    if( this.hasAlphaMap ){\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      if( this.atlasAlphaPath ){\r\n        mtl.uniforms.atlasAlphaTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 1, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      }\r\n    }else{\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n    }\r\n\r\n    if( this.shaderSettings[\"additiveBlend\"] ){\r\n      mtl.blending=AdditiveBlending; \r\n    }\r\n\r\n    mtl.uniforms.noiseTexture.value = this.room.softNoiseTexture;\r\n\r\n    mtl.depthTest=true;\r\n    mtl.depthWrite=false;\r\n    \r\n    this.room.materialList[ this.name ]=mtl;\r\n\r\n    this.material = mtl;\r\n\r\n\r\n    super.addToScene();\r\n  }\r\n}\r\n","// Height-Map based, Bound Box fit, Particle System for pxlNav\r\n//   Written by Kevin Edzenga; 2025\r\n\r\nimport {\r\n  Vector3,\r\n  NearestFilter,\r\n  LinearFilter,\r\n  NearestMipmapNearestFilter,\r\n  LinearMipmapLinearFilter,\r\n  AdditiveBlending\r\n} from \"../../../libs/three/three.module.min.js\";\r\n\r\nimport { ParticleBase } from './ParticleBase.js';\r\nimport { heightMapVert, heightMapFrag } from './shaders/HeightMap.js';\r\n\r\n\r\n/**\r\n * Class representing a HeightMap particle system.\r\n * Extends the ParticleBase class.\r\n * \r\n * Access at - `pxlNav.pxlEffects.pxlParticles.HeightMap`\r\n * \r\n * Extends - [ParticleBase]{@link ParticleBase}\r\n * \r\n * @alias pxlParticles/HeightMap\r\n * @class\r\n * @memberof pxlNav.pxlEffects.pxlParticles\r\n * @example\r\n * this.shaderSettings = {\r\n *   \"vertCount\" : 1000,\r\n *   \"pScale\" : 7,\r\n *   \"pOpacity\" : 1.0,\r\n *   \"proxDist\" : 200,\r\n *   \"atlasRes\" : 4,\r\n *   \"atlasPicks\" : [],\r\n *   \"randomAtlas\" : false,\r\n *   \"additiveBlend\" : false,\r\n *\r\n *   \"jumpHeightMult\" : 0,\r\n *   \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n *   \"windDir\" : new Vector3( 0, 0, 0 ),\r\n *\r\n *   \"size\" : new Vector3( 0, 0, 0 ),\r\n *\r\n *   \"hasLights\" : false,\r\n *   \"fadeOutScalar\" : 1.59 , \r\n *   \"wanderInf\" : 1.0 , \r\n *   \"wanderRate\" : 1.0 , \r\n *   \"wanderFrequency\" : 2.85 \r\n * }\r\n *@example\r\n * // HeightMap particle system\r\n * //   Generate a system that uses a height map to set the Y position of the particles\r\n * //   With a spawn map to determine the density of the particles\r\n * //   Set noise and other settings to alter the particles\r\n * import { Object3D } from \"three\";\r\n * import { pxlEffects } from \"pxlNav.esm.js\";\r\n * const HeightMap = pxlEffects.pxlParticles.HeightMap; \r\n * \r\n * // You can put this in yuor `fbxPostLoad()` or `build()` function\r\n * fbxPostLoad(){\r\n *   \r\n *   // Create the HeightMap system\r\n *   let heightMapSystem = new HeightMap( this, \"heightMap\" );\r\n *   \r\n *   // Set the paths for the height map\r\n *   heightMapSystem.setHeightMapPath( \"path/to/heightMap.jpg\" );\r\n *   \r\n *   // Set the paths for the spawn map\r\n *   heightMapSystem.setSpawnMapPath( \"path/to/spawnMap.jpg\", 1 ); // 1 for single channel map, 3 for RGB\r\n *   \r\n *   // Get a copy of the current particle systems settings\r\n *   //   Update the settings as needed\r\n *   let curShaderSettings = heightMapSystem.getSettings();\r\n *   curShaderSettings[\"vertCount\"] = 600; // Number of particles\r\n *   curShaderSettings[\"pScale\"] = 9; // Scale of the particles\r\n *   curShaderSettings[\"pOpacity\"] = 0.8; // Opacity of the particles\r\n *   curShaderSettings[\"proxDist\"] = 400; // Proximity distance\r\n *   curShaderSettings[\"additiveBlend\"] = true; // Additive blending for the particles\r\n *   \r\n *   // Create a 3D object to use as a reference for the particle system\r\n *   //   The position is used for the system's position\r\n *   //   The scale is used for bounding box size of the system \r\n *   let objectRef = new Object3D();\r\n *   objectRef.position.set( 0, 0, 0 );\r\n *   objectRef.scale.set( 1000, 100, 1000 );\r\n *   \r\n *   // If you used a 3D object in your FBX file, you can use it to set the size\r\n *   //   The object should have a userData property with `Scripted`{bool}\r\n *   //   To set the bounding box size, set your objects scale\r\n *   //     Or use these user attributes - `SizeX`{num}, `SizeY`{num}, & `SizeZ`{num}\r\n *   // let objectRef = this.geoList[ \"Scripted\" ][ \"YouObjectName\" ];\r\n *   \r\n *   heightMapSystem.build( curShaderSettings, objectRef );\r\n * \r\n * }\r\n */\r\nexport class HeightMap extends ParticleBase{\r\n  /**\r\n   * Creates an instance of HeightMap.\r\n   * \r\n   * @param {Object} room - The room object.\r\n   * @param {string} [systemName='heightMap'] - The name of the particle system.\r\n   * @property {Object} room - The room object.\r\n   * @property {string} name - The name of the particle system.\r\n   * @property {Object} heightMapPath - The path to the height map texture.\r\n   * @property {Object} spawnMapPath - The path to the spawn map texture.\r\n   * @property {number} spawnMapMode - The number of channels in the spawn map texture.\r\n   * @property {Object} material - The material for the particle system.\r\n   * @property {Object} shaderSettings - The shader settings for the particle system.\r\n   * @property {Array<string>} knownKeys - Known keys for shader settings.\r\n   */\r\n  constructor( room=null, systemName='heightMap'){\r\n    super( room, systemName );\r\n    this.name=systemName;\r\n    this.room=room;\r\n\r\n    this.heightMapPath = null;\r\n    this.spawnMapPath = null;\r\n    this.spawnMapMode = 1;\r\n\r\n    this.material = null;\r\n\r\n    /**\r\n     * Shader settings for the height map particles.\r\n     * @type {Object}\r\n     * @property {number} vertCount - Number of vertices.\r\n     * @property {number} pScale - Scale of the particles.\r\n     * @property {number} pOpacity - Opacity of the particles.\r\n     * @property {number} proxDist - Proximity distance.\r\n     * @property {number} atlasRes - Atlas resolution.\r\n     * @property {Array} atlasPicks - Atlas picks.\r\n     * @property {boolean} randomAtlas - Random atlas flag.\r\n     * @property {boolean} additiveBlend - Additive blending flag.\r\n     * @property {number} jumpHeightMult - Jump height multiplier\r\n     * @property {Vector3} offsetPos - Offset position.\r\n     * @property {Vector3} windDir - Wind direction.\r\n     * @property {boolean} hasLights - Lights flag.\r\n     * @property {number} fadeOutScalar - Fade out scalar.\r\n     * @property {number} wanderInf - Wander influence.\r\n     * @property {number} wanderRate - Wander rate.\r\n     * @property {number} wanderFrequency - Wander frequency.\r\n     */\r\n    this.shaderSettings = {\r\n      \"vertCount\" : 1000,\r\n      \"pScale\" : 7,\r\n      \"pOpacity\" : 1.0,\r\n      \"proxDist\" : 200,\r\n      \"atlasRes\" : 4,\r\n      \"atlasPicks\" : [],\r\n      \"randomAtlas\" : false,\r\n      \"additiveBlend\" : false,\r\n\r\n      \"tint\" : new Vector3( 1, 1, 1 ),\r\n      \"jumpHeightMult\" : 0,\r\n      \"offsetPos\" : new Vector3( 0, 0, 0 ),\r\n      \"windDir\" : new Vector3( 0, 0, 0 ),\r\n\r\n      \"size\" : new Vector3( 0, 0, 0 ),\r\n\r\n      \"hasLights\" : false,\r\n      \"fadeOutScalar\" : 1.59 , \r\n      \"wanderInf\" : 1.0 , \r\n      \"wanderRate\" : 1.0 , \r\n      \"wanderFrequency\" : 2.85 \r\n    }\r\n    /**\r\n     * Known keys for shader settings.\r\n     * @type {Array<string>}\r\n     */\r\n    this.knownKeys = Object.keys( this.shaderSettings );\r\n  }\r\n  \r\n  /**\r\n   * Sets the path for the height map texture.\r\n   * @method\r\n   * @memberof pxlParticles/HeightMap\r\n   * @param {string} path - The path to the height map texture.\r\n   */\r\n  setHeightMapPath( path ){\r\n    this.heightMapPath = path;\r\n  }\r\n\r\n  /**\r\n   * Sets the path for the spawn map texture and its mode.\r\n   * @method\r\n   * @memberof pxlParticles/HeightMap\r\n   * @param {string} path - The path to the spawn map texture.\r\n   * @param {number} [channels=1] - The number of channels in the spawn map texture.\r\n   */\r\n  setSpawnMapPath( path, channels=1 ){\r\n    this.spawnMapPath = path;\r\n\r\n    // If the spawnMap includes wind direction data in Green & Blue channels\r\n    if( channels == 3 ){\r\n      channels = 4;\r\n    }\r\n    this.spawnMapMode = channels;\r\n  }\r\n\r\n  /**\r\n   * Builds the particle system with the given shader settings and object reference.\r\n   * @method\r\n   * @memberof pxlParticles/HeightMap\r\n   * @param {Object} [curShaderSettings={}] - The current shader settings.\r\n   * @param {Object} [objectRef=null] - The reference object for positioning and sizing.\r\n   * @returns {Object} The particle system added to the scene.\r\n   */\r\n  build( curShaderSettings={}, objectRef=null ){\r\n    \r\n    if( curShaderSettings && typeof curShaderSettings === Object ){\r\n      let curSettingKeys = Object.keys( curShaderSettings );\r\n      this.knownKeys.forEach( key => {\r\n        if( curSettingKeys.includes( key ) ){\r\n          this.shaderSettings[key] = curShaderSettings[key];\r\n        }else{\r\n          curShaderSettings[key] = this.shaderSettings[key];\r\n        }\r\n      });\r\n    }\r\n    if( curShaderSettings.hasOwnProperty(\"atlasPicks\") ){\r\n      this.shaderSettings[\"atlasPicks\"] = curShaderSettings[\"atlasPicks\"];\r\n    }else if( !this.shaderSettings[\"atlasPicks\"] || this.shaderSettings[\"atlasPicks\"].length < 1 ){\r\n      this.shaderSettings[\"atlasPicks\"] = [\r\n        ...super.dupeArray([0.0,0.],4), ...super.dupeArray([0.25,0.],4),\r\n        ...super.dupeArray([0.5,0.0],2), ...super.dupeArray([0.5,0.25],2),\r\n        ...super.dupeArray([0.5,0.5],2), ...super.dupeArray([0.5,0.75],2),\r\n        ...super.dupeArray([0.75,0.75],4), ...super.dupeArray([0.75,0.25],3),\r\n        ...super.dupeArray([0.75,0.25],3)\r\n      ];\r\n    }\r\n    \r\n    this.shaderSettings[\"hasLights\"] = super.hasPointLights();\r\n\r\n    // -- -- --\r\n\r\n    let offsetPos = curShaderSettings[\"offsetPos\"];\r\n    if( offsetPos && typeof offsetPos === Object && typeof offsetPos !== Vector3 && offsetPos.length === 3 ){\r\n      this.shaderSettings[\"offsetPos\"].set( offsetPos[0], offsetPos[1], offsetPos[2] );\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    let sizeX = 100;\r\n    let sizeY = 100;\r\n    let sizeZ = 100;\r\n\r\n    if( curShaderSettings.hasOwnProperty(\"size\") ){\r\n      if( curShaderSettings[\"size\"].x > 0 ){\r\n        sizeX = curShaderSettings[\"size\"].x;\r\n      }\r\n      if( curShaderSettings[\"size\"].y > 0 ){\r\n        sizeY = curShaderSettings[\"size\"].y;\r\n      }\r\n      if( curShaderSettings[\"size\"].z > 0 ){\r\n        sizeZ = curShaderSettings[\"size\"].z;\r\n      }\r\n    }\r\n\r\n    if( this.shaderSettings.pScale >=0 ){\r\n      this.pscale.x = this.shaderSettings.pScale;\r\n    }\r\n    \r\n    // Object Reference has priority\r\n    if( objectRef ){\r\n      if( objectRef.hasOwnProperty(\"userData\") && objectRef.userData.hasOwnProperty(\"SizeX\")){\r\n        sizeX = objectRef.userData.SizeX;\r\n      }else{\r\n        sizeX = objectRef.scale.x;\r\n      }\r\n      if( objectRef.hasOwnProperty(\"userData\") && objectRef.userData.hasOwnProperty(\"SizeY\")){\r\n        sizeY = objectRef.userData.SizeY;\r\n      }else{\r\n        sizeY = objectRef.scale.y;\r\n      }\r\n      if( objectRef.hasOwnProperty(\"userData\") && objectRef.userData.hasOwnProperty(\"SizeZ\")){\r\n        sizeZ = objectRef.userData.SizeZ;\r\n      }else{\r\n        sizeZ = objectRef.scale.z;\r\n      }\r\n\r\n      //this.shaderSettings[\"offsetPos\"] = this.shaderSettings[\"offsetPos\"].add( objectRef.position );\r\n\r\n      this.pscale.x = objectRef.pScale;\r\n    }\r\n\r\n    let tankSize = new Vector3( sizeX, sizeY, sizeZ );\r\n\r\n\r\n\r\n    // -- -- --\r\n\r\n    let dustUniforms={\r\n      heightMap:{ type:\"t\", value: null },\r\n      spawnMap:{ type:\"t\", value: null },\r\n      tankSize:{ type:\"v\", value: tankSize },\r\n\r\n      atlasTexture:{ type:\"t\", value: null },\r\n      atlasAlphaTexture:{type:\"t\", value: null },\r\n      noiseTexture:{ type:\"t\", value: null },\r\n      time:{ type:\"f\", value: this.room.msRunner },\r\n      pointScale:{ type:\"f\", value: this.pscale },\r\n      intensity:{ type:\"f\", value:1.0 },\r\n      tint:{ type:\"v\", value:this.shaderSettings[\"tint\"] },\r\n      rate:{ type:\"f\", value:.035 },\r\n      positionOffset:{ type:\"v\", value:this.shaderSettings[\"offsetPos\"] },\r\n      windDir:{ type:\"v\", value:this.shaderSettings[\"windDir\"] }\r\n    };\r\n\r\n    \r\n    let mtl = this.room.pxlFile.pxlShaderBuilder( dustUniforms, heightMapVert( this.shaderSettings ), heightMapFrag( this.hasAlphaMap ) );\r\n    mtl.transparent=true;\r\n\r\n    if( this.hasAlphaMap ){\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      if( this.atlasAlphaPath ){\r\n        mtl.uniforms.atlasAlphaTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 1, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n      }\r\n    }else{\r\n      mtl.uniforms.atlasTexture.value = this.room.pxlUtils.loadTexture( this.atlasAlphaPath, 4, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n    }\r\n    \r\n    if( this.heightMapPath ){ // RGB Height Map\r\n      mtl.uniforms.heightMap.value = this.room.pxlUtils.loadTexture( this.heightMapPath, 4, {\"magFilter\":LinearFilter, \"minFilter\":LinearMipmapLinearFilter} );\r\n    }\r\n    \r\n    if( this.spawnMapPath ){ // A or RGB Spawn Map\r\n      mtl.uniforms.spawnMap.value = this.room.pxlUtils.loadTexture( this.spawnMapPath, this.spawnMapMode, {\"magFilter\":NearestFilter, \"minFilter\":NearestMipmapNearestFilter} );\r\n    }\r\n\r\n    if( this.shaderSettings[\"additiveBlend\"] ){\r\n      mtl.blending=AdditiveBlending; \r\n    }\r\n\r\n    mtl.uniforms.noiseTexture.value = this.room.softNoiseTexture;\r\n\r\n    mtl.depthTest=true;\r\n    mtl.depthWrite=false;\r\n    \r\n    this.room.materialList[ this.name ]=mtl;\r\n\r\n    this.material = mtl;\r\n\r\n\r\n\r\n    let pSystem = super.addToScene();\r\n    if( objectRef ){\r\n      pSystem.position.set( objectRef.position.x, objectRef.position.y, objectRef.position.z );\r\n    }\r\n    pSystem.userData[\"tankRes\"] = tankSize;\r\n\r\n    return pSystem;\r\n  }\r\n}\r\n","\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// --   Base Room Class Object File          --\r\n// --    -- -- -- -- -- -- -- --             --\r\n// --  Written by Kevin Edzenga; 2020-2024   --\r\n// --                                        --\r\n// --  This class is meant to keep your      --\r\n// --    room file cleaner,                  --\r\n// --  All veriables here are accesible      --\r\n// --    from your file.                     --\r\n// --                                        --\r\n// --  To make your own room;                --\r\n// --    Copy the template room folder -     --\r\n// --     ./Source/js/pxlRooms/templateRoom  --\r\n// --    Then read the 'README.md' file      --\r\n// --                                        --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n\r\nimport {\r\n  Vector2,\r\n  Vector3,\r\n  Object3D,\r\n  Color,\r\n  FogExp2,\r\n  Group,\r\n  RepeatWrapping,\r\n  AmbientLight,\r\n  UniformsUtils,\r\n  UniformsLib\r\n} from \"../libs/three/three.module.min.js\";\r\nimport { pxlPrincipledVert, pxlPrincipledFrag } from \"./shaders/objects/PxlPrincipled.js\";\r\n\r\nimport { RENDER_LAYER, COLLIDER_TYPE } from \"./core/Enums.js\";\r\n\r\n/**\r\n * Class representing a Room Environment.\r\n * @alias pxlRoom RoomEnvironment\r\n * @class\r\n * @description Core functionality and base classes\r\n */\r\nclass RoomEnvironment{\r\n  /**\r\n   * Create a Room Environment.\r\n   * @param {string} roomName - The name of the room.\r\n   * @param {string|null} assetPath - The path to the assets.\r\n   * @param {Object|null} msRunner - The millisecond runner.\r\n   * @param {Object|null} camera - The camera object.\r\n   * @param {Object|null} scene - The scene object.\r\n   * @param {Object|null} cloud3dTexture - The 3D cloud texture.\r\n   */\r\n  constructor( roomName='pxlRoomEnvironment', assetPath=null, msRunner=null, camera=null, scene=null, cloud3dTexture=null ){\r\n    this.roomName=roomName;\r\n    this.pxlOptions=null;\r\n    this.pxlEnums=null;\r\n    this.pxlFile=null;\r\n    this.pxlUtils=null;\r\n    this.pxlTimer=null;\r\n    this.pxlAnim=null;\r\n    this.pxlColliders=null;\r\n    this.pxlDevice=null;\r\n    this.pxlHUD=null;\r\n    this.pxlEnv=null;\r\n    this.booted=false;\r\n    this.initScene=true;\r\n    this.active=true;\r\n    this.assetPath=assetPath+\"Assets/\";\r\n    this.mobile=false;\r\n    \r\n    this.sceneFile = null;\r\n    this.animFile = null;\r\n    this.animClips = {};\r\n    this.animMixer = null;\r\n    \r\n    // Environment Shader \r\n    this.spiralizerUniforms = {};\r\n    this.materialList={};\r\n    this.particleList={};\r\n    \r\n    // Room warp data\r\n    this.camInitPos = null;\r\n    this.camInitLookAt = null;\r\n    this.camThumbPos = new Vector3(0,0,-30);\r\n    this.camThumbLookAt = new Vector3(0,35,-1000);\r\n    this.cameraBooted = false;\r\n    this.cameraPrevPos = new Vector3(0,0,0);\r\n    this.cameraAimTarget = new Object3D(0,0,0);\r\n    this.camHoldWarpPos = true;\r\n    this.defaultCamLocation = \"default\";\r\n    this.camLocation  =  {};\r\n    \r\n    this.pxlCamFOV = { 'PC':60, 'MOBILE':80 };\r\n    this.pxlCamZoom = 1;\r\n    this.pxlCamAspect = 1;\r\n    this.pxlCamNearClipping = 5;\r\n    this.pxlCamFarClipping = 10000;\r\n\r\n    // this.fogColor=new Color(.3,.3,.3);\r\n    this.fogColor = new Color(.01,.02,.05);\r\n    this.fogExp = .0007;\r\n    this.fog = new FogExp2( this.fogColor, this.fogExp);\r\n        \r\n    this.userAvatarGroup = new Group();\r\n    this.packedTextureMaterial = null;\r\n    this.coreTextureMaterial = null;\r\n    this.projectedMaterial = null;\r\n    this.voidMaterial = null;\r\n    this.holoMaterial = null;\r\n    this.aspectRatio = null;\r\n    this.flag = null;\r\n    this.initPos = [];\r\n    this.finalPos = [];\r\n    this.midPos = new Vector3(0,30,-50);\r\n\r\n    this.perspectiveInstances = 160;\r\n    \r\n    this.startTime = 0;\r\n    this.runTime = new Vector2(0, 0);\r\n    this.msRunner = msRunner;\r\n    this.camera = camera;\r\n    this.autoCamPaths = {};\r\n    this.scene = scene;\r\n    this.lightList = {}\r\n    this.geoList = {}\r\n    this.glassGroup = null;\r\n    this.glassList = []\r\n    this.particleList = {};\r\n    this.lodList = [];\r\n    \r\n\r\n    this.enableRaycast = false;\r\n    this.hasHoverables=false;\r\n    this.hoverableList=[];\r\n    this.hoverableObj=null;\r\n    \r\n    this.hasClickables=false;\r\n    this.clickableList=[];\r\n    this.clickableObj=null;\r\n    \r\n    \r\n    this.collidersExist=false;\r\n    this.colliderActive=false;\r\n    this.colliderHashMap={};\r\n    this.colliderList= [];\r\n    this.antiColliderActive=false;\r\n    this.antiColliderList= [];\r\n    this.antiColliderTopActive=false;\r\n    this.antiColliderTopList= [];\r\n    \r\n    this.hasPortalExit=false;\r\n    this.portalList={};\r\n\r\n    this.hasRoomWarp=false;\r\n    this.roomWarp=[];\r\n    this.warpPortalTexture=null;\r\n    this.warpZoneRenderTarget=null;\r\n        \r\n    this.worldPosMaterial=null;\r\n    this.worldPosRenderTarget=null;\r\n    this.spiralizerPass=null;\r\n    \r\n    this.bloomPreState=false;\r\n        \r\n    this.cloud3dTexture=null;\r\n    this.smoothNoiseTexture=null;\r\n        \r\n    // Helper objects for debug visualizations\r\n    this.hasHelpers = false;\r\n    this.helperObjects = {};\r\n\r\n    //%=\r\n    this.currentShader=null;\r\n    //%\r\n  }\r\n\r\n  /**\r\n   * Set pxlNav dependencies.\r\n   * @param {Object} pxlNav - The pxlNav object.\r\n   */\r\n  setDependencies( pxlNav ){\r\n    this.pxlOptions = pxlNav.pxlOptions;\r\n    this.pxlEnums = pxlNav.pxlEnums;\r\n    this.pxlEnv = pxlNav;\r\n    this.pxlFile = pxlNav.pxlFile;\r\n    this.pxlAnim = pxlNav.pxlAnim;\r\n    this.pxlTimer = pxlNav.pxlTimer;\r\n    this.pxlUtils = pxlNav.pxlUtils;\r\n    this.pxlDevice = pxlNav.pxlDevice;\r\n    this.pxlHUD = pxlNav.pxlHUD;\r\n    this.pxlColliders = pxlNav.pxlColliders;\r\n    this.mobile = pxlNav.mobile;\r\n\r\n    this.cloud3dTexture=this.pxlEnv.cloud3dTexture;\r\n    this.cloud3dTexture.wrapS = RepeatWrapping;\r\n    this.cloud3dTexture.wrapT = RepeatWrapping;\r\n    \r\n    this.smoothNoiseTexture=this.pxlEnv.softNoiseTexture;\r\n    this.smoothNoiseTexture.wrapS = RepeatWrapping;\r\n    this.smoothNoiseTexture.wrapT = RepeatWrapping;\r\n  }\r\n  \r\n  // -- -- --\r\n  \r\n  /**\r\n   * Get the delta time.\r\n   * @returns {number} The delta time.\r\n   */\r\n  get deltaTime(){\r\n    return this.pxlTimer.deltaTime;\r\n  }\r\n\r\n  /**\r\n   * Get the average delta time.\r\n   * @returns {number} The average delta time.\r\n   */\r\n  get avgDeltaTime(){\r\n    return this.pxlTimer.avgDeltaTime;\r\n  }\r\n\r\n  /**\r\n   * Get the lerp rate.\r\n   * @param {number} rate - The rate.\r\n   * @returns {number} The lerp rate.\r\n   */\r\n  getLerpRate( rate ){\r\n    return this.pxlTimer.getLerpRate( rate );\r\n  }\r\n\r\n  /**\r\n   * Get the average lerp rate.\r\n   * @param {number} rate - The rate.\r\n   * @returns {number} The average lerp rate.\r\n   */\r\n  getLerpAvgRate( rate ){\r\n    return this.pxlTimer.getLerpAvgRate( rate );\r\n  }\r\n  // -- -- --\r\n\r\n  /**\r\n   * Initialize the room environment.\r\n   * Ran after core `pxlNav` modules have been loaded and initialized\r\n   *   But before the render composers / post-processing\r\n   */\r\n  init(){\r\n    this.scene.fog=this.fog;\r\n    this.scene.background = this.fogColor ;//pxlEnv.fogColor;\r\n  }\r\n\r\n  /**\r\n   * Start the room environment.\r\n   * Run on init room warp; reset room values\r\n   */\r\n  start(){\r\n    if( !this.booted ){\r\n      //this.resetCamera();\r\n    }\r\n\r\n    this.pxlEnv.engine.setClearColor(this.fogColor, 0);\r\n\r\n    /*this.spiralizerPass.enabled=true;\r\n    this.bloomPreState=this.pxlEnv.roomBloomPass.enabled;  \r\n    this.pxlEnv.roomBloomPass.enabled=false;  */\r\n  }\r\n  \r\n  /**\r\n   * Per-frame render updates.\r\n   */\r\n  step(){\r\n    this.runTime.x=this.msRunner.x;\r\n\r\n    // Update helper objects, if they exist\r\n    //this.stepColliderHelper( COLLIDER_TYPE.FLOOR );\r\n\r\n    // Update LODs manually with camera position\r\n    /*if( this.lodList.length > 0 ){\r\n      this.lodList.forEach( (lod)=>{\r\n        if( lod.getCurrentLevel()>0 ){\r\n        lod.update( this.camera );\r\n        }\r\n      });\r\n    }*/\r\n    \r\n    //this.pxlEnv.engine.setClearColor(this.pxlEnv.fogColor, 0);\r\n    \r\n    // Render world positions for composer\r\n    //   There must be a better way to get world positions,\r\n    //     The render pass must have an option for this... Or could be added hHmmMMmmm\r\n    /*this.scene.overrideMaterial=this.worldPosMaterial;\r\n    this.pxlEnv.engine.setRenderTarget(this.worldPosRenderTarget);\r\n    this.pxlEnv.engine.clear();\r\n    this.pxlEnv.engine.render( this.scene, this.camera );\r\n    this.scene.overrideMaterial=null;\r\n    this.pxlEnv.engine.setRenderTarget(null);*/\r\n        \r\n  }\r\n\r\n  /**\r\n   * Stop the room environment.\r\n   * Ran When leaving the room\r\n   */\r\n  stop(){\r\n    //this.spiralizerPass.enabled=false;\r\n    //this.pxlEnv.roomBloomPass.enabled=this.bloomPreState;\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  /**\r\n   * Handle window resize.\r\n   * @param {number} sW - The width of the window.\r\n   * @param {number} sH - The height of the window.\r\n   */\r\n  resize( sW, sH ){\r\n    /*if(this.worldPosRenderTarget){\r\n      this.worldPosRenderTarget.setSize( sW, sH );\r\n    }\r\n    if(this.spiralizerPass){\r\n      this.spiralizerPass.setSize( sW, sH );\r\n    }*/\r\n  }\r\n  \r\n  /**\r\n   * Set the user height.\r\n   * @param {number} [toHeight=1] - The height to set.\r\n   */\r\n  setUserHeight( toHeight=1 ){\r\n    this.pxlEnv.pxlCamera.setUserHeight( toHeight, this.roomName );\r\n  }\r\n\r\n  /**\r\n   * Reset the camera.\r\n   */\r\n  resetCamera(){\r\n    if( (this.camInitPos == null || this.camInitLookAt == null) && this.pxlOptions.verbose >= this.pxlEnums.VERBOSE_LEVEL.WARN ){\r\n      console.warn(\"pxlRoomEnvironment: Room Initial Camera Positions not initialized, \\n Ensure `this.booted=true` is ran in `build()` or `fbxPostLoad()` \\n -&-\\n That there is a `Camera` group with `position` & `lookAt` child nulls in your scene file.\");\r\n    }\r\n    this.pxlEnv.pxlCamera.setTransform( this.camInitPos, this.camInitLookAt );\r\n    /*if( !this.pxlEnv.pxlOptions[\"staticCamera\"] ){\r\n      this.pxlEnv.pxlCamera.camUpdated = true;\r\n      this.pxlEnv.pxlCamera.hasMoved = true;\r\n      this.pxlEnv.pxlCamera.hasGravity = true;\r\n    }*/\r\n  }\r\n    \r\n  /**\r\n   * Prepare Warp Zone Portal Texture\r\n   */\r\n  prepPortalRender(){\r\n    this.geoList['intro'].visible=false;\r\n    this.geoList['MainRoomWarp'].visible=false;\r\n  }\r\n  /**\r\n   * Cleanup portal render.\r\n   */\r\n  cleanupPortalRender(){\r\n    this.geoList['intro'].visible=true;\r\n    this.geoList['MainRoomWarp'].visible=true;\r\n  }\r\n  /**\r\n   * Set the portal texture.\r\n   * Set the Room Warp Portal plane to display the render from the main room\r\n   * @param {Object} texture - The texture.\r\n   * @param {string|null} [toRoom=null] - The room to set.\r\n   */\r\n  setPortalTexture(texture, toRoom=null){\r\n    this.geoList['MainRoomWarp'].material.map=texture;\r\n  }\r\n    \r\n  /**\r\n   * Apply composer's room pass.\r\n   * @param {Object|null} [roomComposer=null] - The room composer.\r\n   * @returns {Object|null} The shader pass.\r\n   */\r\n  applyRoomPass( roomComposer=null ){\r\n    /*if(roomComposer){\r\n      this.worldPosMaterial=new ShaderMaterial({\r\n        uniforms:{\r\n          camNear: { type:\"f\", value: 1 },\r\n          camFar: { type:\"f\", value: 900 } // Measured in the Scene file, 885.61\r\n        },\r\n        vertexShader: worldPositionVert(),\r\n        fragmentShader: worldPositionFrag()\r\n      });\r\n      //this.worldPosMaterial.side=DoubleSide;\r\n      //this.worldPosMaterial.side=FrontSide;\r\n      \r\n      this.spiralizerPass = new ShaderPass(\r\n        new ShaderMaterial( {\r\n          uniforms: {\r\n            tDiffuse: { value: null },\r\n            localPos: { value: this.pxlUtils.loadTexture(this.assetPath+\"SpiralizerFadeMap_1k.jpg\") },\r\n            worldPos: { value: this.worldPosRenderTarget.texture },\r\n            noiseTexture: { value: this.pxlEnv.cloud3dTexture },\r\n            camMat:{ value:this.camera.matrixWorld },\r\n            marker: { value: new Vector3( -619.01, 67.856, 240.177) },\r\n            time:{ value:this.msRunner },\r\n            screenRes: { value: this.pxlDevice.screenRes },\r\n          },\r\n          vertexShader: cameraCalcVert(),\r\n          fragmentShader: spiralizerPostProcess(),\r\n          defines: {}\r\n        } ), \"tDiffuse\"\r\n      );\r\n      this.spiralizerPass.enabled=false;\r\n      \r\n      return this.spiralizerPass;\r\n    }*/\r\n  }\r\n  \r\n  /**\r\n   * Get the room name.\r\n   * @returns {string} The room name.\r\n   */\r\n  getName(){\r\n    return this.roomName;\r\n  }\r\n\r\n  /**\r\n   * Get artist information.\r\n   * @returns {Object|null} The artist information.\r\n   */\r\n  getArtistInfo(){\r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * Set the fog color.\r\n   * @param {Object} color - The color.\r\n   */\r\n  setFog( color ){\r\n    // this.geoList[\"skySemiSphere\"].material.uniforms.skyColor.value.x= this.fog.color.r*10.0 ;\r\n    // this.geoList[\"skySemiSphere\"].material.uniforms.skyColor.value.y= this.fog.color.g*10.0 ;\r\n    // this.geoList[\"skySemiSphere\"].material.uniforms.skyColor.value.z= this.fog.color.b*10.0 ;\r\n    // this.geoList[\"skySemiSphere\"].material.uniforms.fogColor.value.r=this.fog.color.r*5;\r\n    // this.geoList[\"skySemiSphere\"].material.uniforms.fogColor.value.g=this.fog.color.g*5;\r\n    // this.geoList[\"skySemiSphere\"].material.uniforms.fogColor.value.b=this.fog.color.b*5;\r\n  }\r\n      \r\n  //%=\r\n  /**\r\n   * Get the geometry shader list.\r\n   * @returns {Object} The shader list.\r\n   */\r\n  getShaderList(){\r\n    let retList={}\r\n    let objList=Object.keys( this.materialList );\r\n    objList.forEach( (k)=>{\r\n      retList[k]=k\r\n    });\r\n    return retList;\r\n  }\r\n  /**\r\n   * Get the currently editing shader.\r\n   * @returns {string} The current shader.\r\n   */\r\n  getCurrentShader(){\r\n    return this.currentShader || Object.keys( this.materialList )[0];\r\n  }\r\n  /**\r\n   * Read the shader from the object.\r\n   * @param {string} [objShader=\"\"] - The shader object.\r\n   * @param {Object|null} [sliderVectorObj=null] - The slider vector object.\r\n   * @returns {Object} The shader material.\r\n   */\r\n  readShader( objShader=\"\", sliderVectorObj=null ){\r\n    if( this.currentShader!=null && this.materialList[ this.currentShader ].hasOwnProperty('uniforms')){\r\n      if( !sliderVectorObj ){\r\n        sliderVectorObj=new Vector3();\r\n      }\r\n      this.materialList[ this.currentShader ].uniforms.sliders.value=sliderVectorObj;\r\n      this.materialList[ this.currentShader ].needsUpdate=true;\r\n    }\r\n    this.currentShader=objShader;\r\n    return this.materialList[ this.currentShader ];\r\n  }\r\n  /**\r\n   * Set the geometry's material vertex & fragment shaders.\r\n   * @param {Object} unis - The uniforms.\r\n   * @param {string} vert - The vertex shader.\r\n   * @param {string} frag - The fragment shader.\r\n   */\r\n  setShader( unis, vert, frag ){\r\n    if( this.emitterList && this.emitterList[ this.currentShader ] ){\r\n      if( this.emitterList[ this.currentShader ].Particles.length > 0 ){\r\n        this.emitterList[ this.currentShader ].Particles.forEach( (p)=>{\r\n          let mtl = p.material;\r\n          mtl.vertexShader=vert;\r\n          mtl.fragmentShader=frag;\r\n          mtl.needsUpdate=true;\r\n        });\r\n      }\r\n    }\r\n    \r\n    this.materialList[ this.currentShader ].vertexShader=vert;\r\n    this.materialList[ this.currentShader ].fragmentShader=frag;\r\n    this.materialList[ this.currentShader ].needsUpdate=true;\r\n  }\r\n  //%\r\n  \r\n    \r\n  /**\r\n   * Cast a ray using pxlNav's raycaster.\r\n   * For Three.js' raycaster, please use the Three.js raycaster directly\r\n   * Note - pxlNav's raycaster requires object's are registered,\r\n   *   All object's are pre-processes for faster raycasting\r\n   * @param {boolean} isClick - Whether it is a click.\r\n   * @param {number} mButton - The mouse button.\r\n   */\r\n  castRay( isClick, mButton ){\r\n    if(!this.enableRaycast){\r\n      return;\r\n    }\r\n    if( ( !isClick && !this.hasHoverables ) || ( isClick && !this.hasClickables ) ){\r\n      //console.log(\"No Cickable / Hoverable Objects Found\");\r\n      this.mouseRayHits=[];\r\n      return;\r\n    }\r\n    \r\n    let castableObjects = []\r\n    if( !isClick && this.hasHoverables ) {\r\n      castableObjects = this.hoverableList;\r\n    }else if( isClick && this.hasClickables ){\r\n      castableObjects = this.clickableList;\r\n    }\r\n    \r\n    var rayHits=[];\r\n    if(castableObjects.length>0){\r\n    \r\n      let mouseScreenSpace=new Vector2( this.pxlDevice.mouseX/this.pxlDevice.sW*2-1, -this.pxlDevice.mouseY/this.pxlDevice.sH*2+1 );\r\n      this.pxlEnv.pxlCamera.objRaycast.setFromCamera(mouseScreenSpace, this.pxlEnv.pxlCamera.camera );\r\n    \r\n      rayHits=this.pxlEnv.pxlCamera.objRaycast.intersectObjects(castableObjects);\r\n    }\r\n\r\n    this.mouseRayHits=rayHits;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Handle pxlColliders collider hits.\r\n   * @param {Array} colliderList - The list of colliders.\r\n   * @param {number} [colliderType=COLLIDER_TYPE.FLOOR] - The type of collider.\r\n   */\r\n  hitColliders( colliderList=[], colliderType=COLLIDER_TYPE.FLOOR ){\r\n    if( colliderList.length == 0 ){\r\n      return;\r\n    }\r\n    // Implement custom-event logic in this function to handle collisions in your room\r\n    /* switch( colliderType ){\r\n      case COLLIDER_TYPE.FLOOR:\r\n        break;\r\n      case COLLIDER_TYPE.WALL:\r\n        break;\r\n      case COLLIDER_TYPE.WALL_TOP:\r\n        break;\r\n      case COLLIDER_TYPE.CEILING:\r\n        break;\r\n      case COLLIDER_TYPE.PORTAL_WARP:\r\n        break;\r\n      case COLLIDER_TYPE.ROOM_WARP:\r\n        break;\r\n      case COLLIDER_TYPE.ITEM:\r\n        break;\r\n      case COLLIDER_TYPE.SCRIPTED:\r\n        break;\r\n      case COLLIDER_TYPE.HOVERABLE:\r\n        break;\r\n      case COLLIDER_TYPE.CLICKABLE:\r\n        break;\r\n      default:\r\n        break;\r\n    } */\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Check if colliders exist.\r\n   * @returns {boolean} Whether colliders exist.\r\n   */\r\n  hasColliders(){\r\n    return this.collidersExist\r\n  }\r\n\r\n  /**\r\n   * Check if a specific type of collider exists.\r\n   * @param {number} [colliderType=COLLIDER_TYPE.FLOOR] - The type of collider.\r\n   * @returns {boolean} Whether the specific type of collider exists.\r\n   */\r\n  hasColliderType( colliderType=COLLIDER_TYPE.FLOOR ){\r\n    let hasCollidersOfType = false;\r\n    if( !this.hasColliders() ){\r\n      return hasCollidersOfType;\r\n    }\r\n\r\n    switch( colliderType ){\r\n      case COLLIDER_TYPE.FLOOR:\r\n        hasCollidersOfType = this.colliderActive;\r\n        break;\r\n      case COLLIDER_TYPE.WALL:\r\n        hasCollidersOfType = this.antiColliderActive;\r\n        break;\r\n      case COLLIDER_TYPE.WALL_TOP:\r\n        hasCollidersOfType = this.antiColliderTopActive;\r\n        break;\r\n      case COLLIDER_TYPE.CEILING:\r\n        // Not implemented yet\r\n        break;\r\n      case COLLIDER_TYPE.PORTAL_WARP:\r\n        hasCollidersOfType = this.hasPortalExit;\r\n        break;\r\n      case COLLIDER_TYPE.ROOM_WARP:\r\n        hasCollidersOfType = this.hasRoomWarp;\r\n        break;\r\n      case COLLIDER_TYPE.ITEM:\r\n        // Not implemented yet\r\n        break;\r\n      case COLLIDER_TYPE.SCRIPTED:\r\n        // Not implemented yet\r\n        break;\r\n      case COLLIDER_TYPE.HOVERABLE:\r\n        hasCollidersOfType = this.hasHoverables;\r\n        break;\r\n      case COLLIDER_TYPE.CLICKABLE:\r\n        hasCollidersOfType = this.hasClickables;\r\n        break;\r\n    }\r\n\r\n    return hasCollidersOfType;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Get the colliders of a specific type.\r\n   * @param {number} [colliderType=COLLIDER_TYPE.FLOOR] - The type of collider.\r\n   * @returns {Array} The list of colliders.\r\n   */\r\n  getColliders( colliderType=COLLIDER_TYPE.FLOOR ){\r\n    let forHashing = [];\r\n    if( !this.hasColliders() ){\r\n      return forHashing;\r\n    }\r\n\r\n    // Kick out if the collider type is not active\r\n    //  ( No colliders of the given type exist )\r\n    if( colliderType == COLLIDER_TYPE.WALL && !this.antiColliderActive ){\r\n      forHashing = this.antiColliderList;\r\n      return forHashing;\r\n    }else if( colliderType == COLLIDER_TYPE.WALL_TOP && !this.antiColliderTopActive ){\r\n      forHashing = this.antiColliderTopList;\r\n      return forHashing;\r\n    }else if( colliderType == COLLIDER_TYPE.PORTAL_WARP && !this.hasPortalExit ){\r\n      forHashing = this.portalList;\r\n      return forHashing;\r\n    }else if( colliderType == COLLIDER_TYPE.ROOM_WARP && !this.hasRoomWarp ){\r\n      forHashing = this.roomWarp;\r\n      return forHashing;\r\n    }else if( colliderType == COLLIDER_TYPE.HOVERABLE && !this.hasHoverables ){\r\n      forHashing = this.hoverableList;\r\n      return forHashing;\r\n    }else if( colliderType == COLLIDER_TYPE.CLICKABLE && !this.hasClickables ){\r\n      forHashing = this.clickableList;\r\n      return forHashing;\r\n    }\r\n    \r\n    // TODO : Quadrant hashing for colliders should be removed from pxlNav support, with new grid hashing system implemented\r\n    // TODO : Maya tools and FBX requirements needs updating for the new collider system\r\n    switch( colliderType ){\r\n      case COLLIDER_TYPE.FLOOR:\r\n        forHashing = [ ...this.colliderList ];\r\n        break;\r\n      case COLLIDER_TYPE.WALL:\r\n        forHashing = [ ...this.colliderList ];\r\n        break;\r\n      case COLLIDER_TYPE.WALL_TOP:\r\n        forHashing = [ ...this.antiColliderTopList ];\r\n        break;\r\n      case COLLIDER_TYPE.CEILING:\r\n        // Not implemented yet\r\n        break;\r\n      case COLLIDER_TYPE.PORTAL_WARP:\r\n        forHashing = this.portalList;\r\n        break;\r\n      case COLLIDER_TYPE.ROOM_WARP:\r\n        forHashing = this.roomWarp;\r\n        break;\r\n      case COLLIDER_TYPE.ITEM:\r\n        // Not implemented yet\r\n        break;\r\n      case COLLIDER_TYPE.SCRIPTED:\r\n        // Not implemented yet\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    //forHashing = this.colliderHashMap;\r\n    return forHashing;\r\n  }\r\n\r\n  // -- -- --\r\n\r\n  /**\r\n   * Add a visual collider helper.\r\n   * @param {number} [colliderType=COLLIDER_TYPE.FLOOR] - The type of collider.\r\n   * @example\r\n   * // To add a floor collider helper\r\n   * //   To visualize collider triangles in blue & green\r\n   * // Run these helper functions in your rooms `build()` & `step()`-\r\n   * build(){\r\n   *  this.addColliderHelper( COLLIDER_TYPE.FLOOR );\r\n   * }\r\n   * \r\n   * step(){\r\n   *  this.stepColliderHelper( COLLIDER_TYPE.FLOOR );\r\n   * }\r\n   */\r\n  addColliderHelper( colliderType=COLLIDER_TYPE.FLOOR ){\r\n    if( !this.hasColliders() ){\r\n      return;\r\n    }\r\n    if( !this.helperObjects.hasOwnProperty('colliders') ){\r\n      this.helperObjects['colliders'] = {};\r\n      this.helperObjects['colliders'][colliderType] = null;\r\n    }else if( !this.helperObjects['colliders'].hasOwnProperty(colliderType) ){\r\n      this.helperObjects['colliders'][colliderType] = null;\r\n    }\r\n\r\n    // This is only used to easierly reveal the helper objects to the pxlRoom\r\n    //   This is only for debugging purposes\r\n    this.helperObjects['colliders'][colliderType] = this.pxlColliders.buildHelper( this, colliderType );\r\n\r\n    if( this.helperObjects['colliders'][colliderType] ){\r\n      this.scene.add( this.helperObjects['colliders'][colliderType] );\r\n      this.hasHelpers = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Step the collider helper.\r\n   * @param {number} [colliderType=COLLIDER_TYPE.FLOOR] - The type of collider.\r\n   * @example\r\n   * // To add a floor collider helper\r\n   * //   To visualize collider triangles in blue & green\r\n   * // Run these helper functions in your rooms `build()` & `step()`-\r\n   * build(){\r\n   *  this.addColliderHelper( COLLIDER_TYPE.FLOOR );\r\n   * }\r\n   * \r\n   * step(){\r\n   *  this.stepColliderHelper( COLLIDER_TYPE.FLOOR );\r\n   * }\r\n   */\r\n  stepColliderHelper( colliderType=COLLIDER_TYPE.FLOOR ){\r\n    if( !this.hasHelpers ||\r\n        !this.hasColliders() ||\r\n        !this.helperObjects.hasOwnProperty('colliders') ||\r\n        !this.helperObjects['colliders'].hasOwnProperty(colliderType) ){\r\n      return;\r\n    }\r\n\r\n    this.helperObjects['colliders'][colliderType].stepHelper( this, colliderType );\r\n  }\r\n\r\n\r\n  // -- -- --\r\n    \r\n  /**\r\n   * Move the camera to a specific position.\r\n   * @param {string|null} [positionName=null] - The name of the position.\r\n   */\r\n  toCameraPos( positionName = null ){\r\n    if( positionName == null ){\r\n      positionName = this.defaultCamLocation;\r\n    }\r\n    positionName = positionName.toLowerCase();\r\n\r\n    if( this.cameraBooted && this.camLocation.hasOwnProperty( positionName ) ){\r\n      \r\n      let posName = this.mobile?\"positionmobile\":\"position\";\r\n      let lookAtName = this.mobile?\"lookatmobile\":\"lookat\";\r\n      let pos=this.camLocation[ positionName ][ posName ];\r\n      let lookAt=this.camLocation[ positionName ][ lookAtName ];\r\n      if( !lookAt ){\r\n        lookAt=new Vector3(0,0,1);\r\n        lookAt.addVectors( pos, lookAt );\r\n      }\r\n\r\n      this.pxlEnv.pxlCamera.setTransform( this.camLocation[positionName][posName], this.camLocation[positionName][lookAtName] );\r\n      this.setUserHeight( this.camInitPos.y );\r\n    }\r\n  }\r\n    \r\n  /**\r\n   * Ran after the room's FBX loads & processes.\r\n   */\r\n  fbxPostLoad(){\r\n    \r\n    // Let pxlNav know the room is ready\r\n    this.booted=true;\r\n\r\n    // Force Camera to init position with optional init look at\r\n    this.toCameraPos( this.defaultCamLocation );\r\n\r\n    // Find Point light count for adjusted shadowing\r\n    let pointLightCount = 0;\r\n    if( this.lightList.hasOwnProperty(\"PointLight\") ){\r\n      pointLightCount = this.lightList.PointLight.length;\r\n    }\r\n    \r\n    \r\n    \r\n    /*var ambientLight = new AmbientLight( 0x303030 ); // soft white light\r\n    //this.lightList.push( ambientLight );\r\n    this.scene.add( ambientLight );*/\r\n    \r\n    let lightTypeList = Object.keys( this.lightList );\r\n    if(lightTypeList.length>0){\r\n      lightTypeList.forEach( (type)=>{\r\n        this.lightList[type].forEach( (light)=>{\r\n          if( type == \"DirectionalLight\" ){ \r\n            light.castShadow=false;\r\n          }else if( type == \"PointLight\" ){ \r\n            if( light.castShadow){\r\n              light.shadow.radius = 5;\r\n              light.shadow.receiveShadow = true;\r\n              light.shadow.mapSize.width = 512; // default\r\n              light.shadow.mapSize.height = 512; // default\r\n              light.shadow.camera.near = 0.5; // default\r\n              light.shadow.camera.far = 35; // default\r\n              light.shadow.bias = .025; // default\r\n              light.shadow.radius = 5; // default\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n    \r\n    \r\n    if( this.shaderGeoList ) {\r\n      for( const x in this.shaderGeoList){\r\n        let curObj = this.shaderGeoList[x];\r\n        if( curObj.userData && curObj.userData.Shader == \"pxlPrincipled\"){\r\n          \r\n          let shaderUniforms = UniformsUtils.merge(\r\n              [\r\n                UniformsLib[ \"common\" ],\r\n                UniformsLib[ \"lights\" ],\r\n                UniformsLib[ \"shadowmap\" ],\r\n                {\r\n                  'dTexture' : { type:'t', value: null },\r\n                  'noiseTexture' : { type:'t', value: null },\r\n                  'detailTexture' : { type:'t', value: null },\r\n                  'cdMult' : { type:'f', value: 1 },\r\n                  'fogColor' : { type: \"c\", value: this.scene.fog.color },\r\n                }\r\n              ]\r\n          )\r\n          var defines = {};\r\n          defines[ \"USE_MAP\" ] = \"\";\r\n          \r\n          let ShaderParms = {};\r\n          let useLights = true\r\n          let useShadows = curObj.userData.castShadow == true || curObj.userData.receiveShadow == true\r\n          let useFog = true;\r\n          \r\n          let useColor = false;\r\n          if( !curObj.material.map ){\r\n            useColor = curObj.material.color.clone();\r\n          }\r\n          \r\n          // Add ShaderParms support\r\n          if( curObj.userData.ShaderParms && curObj.userData.ShaderParms != \"\" ){\r\n            ShaderParms = JSON.parse(curObj.userData.ShaderParms);\r\n          }\r\n          \r\n          let mat=this.pxlFile.pxlShaderBuilder(\r\n              shaderUniforms,\r\n              pxlPrincipledVert( useShadows ),\r\n              pxlPrincipledFrag( ShaderParms, useColor, useFog, useLights, useShadows, pointLightCount ),\r\n              defines\r\n            );\r\n          //mat.side=FrontSide;\r\n          mat.transparent= false;\r\n          mat.lights= true;\r\n          if(!useColor){\r\n            mat.uniforms.dTexture.value = curObj.material.map;\r\n          }\r\n          mat.uniforms.noiseTexture.value = this.cloud3dTexture;\r\n          mat.uniforms.detailTexture.value = this.pxlEnv.detailNoiseTexture;\r\n              \r\n          curObj.material=mat;\r\n          this.materialList[ curObj.name ] = mat;\r\n        }\r\n      }\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    /*\r\n    let envGroundUniforms = UniformsUtils.merge(\r\n            [\r\n              UniformsLib[ \"common\" ],\r\n              UniformsLib[ \"lights\" ],\r\n              UniformsLib[ \"shadowmap\" ],\r\n              {\r\n                'diffuse' : { type:'t', value: null },\r\n                'dirtDiffuse' : { type:'t', value: null },\r\n                'mult': { type:'f', value:1 },\r\n                'fogColor': { type:'c', value: null },\r\n                'noiseTexture' : { type:'t', value: null },\r\n                'uniformNoise' : { type:'t', value: null },\r\n                'crossNoise' : { type:'t', value: null },\r\n              }\r\n            ]\r\n        );\r\n    let textureOptions = {\r\n        \"wrapS\" : RepeatWrapping,\r\n        \"wrapT\" : RepeatWrapping,\r\n    };\r\n    envGroundUniforms.fogColor.value = this.scene.fog.color;\r\n    envGroundUniforms.diffuse.value = this.pxlUtils.loadTexture( this.assetPath+\"EnvGround_Diffuse.jpg\" );\r\n    envGroundUniforms.dirtDiffuse.value = this.pxlUtils.loadTexture( this.assetPath+\"Dirt_Diffuse.jpg\" );\r\n    envGroundUniforms.noiseTexture.value = this.cloud3dTexture;\r\n    envGroundUniforms.uniformNoise.value = this.pxlUtils.loadTexture( this.assetPath+\"Noise_UniformWebbing.jpg\" );\r\n    envGroundUniforms.crossNoise.value = this.pxlUtils.loadTexture( this.assetPath+\"Noise_NCross.jpg\" );\r\n    \r\n    let environmentGroundMat=this.pxlFile.pxlShaderBuilder( envGroundUniforms, envGroundVert(), envGroundFrag(1) );\r\n    environmentGroundMat.lights= true;\r\n    \r\n    envGroundUniforms.uniformNoise.value.wrapS = RepeatWrapping;\r\n    envGroundUniforms.uniformNoise.value.wrapT = RepeatWrapping;\r\n    envGroundUniforms.crossNoise.value.wrapS = RepeatWrapping;\r\n    envGroundUniforms.crossNoise.value.wrapT = RepeatWrapping;\r\n    envGroundUniforms.dirtDiffuse.value.wrapS = RepeatWrapping;\r\n    envGroundUniforms.dirtDiffuse.value.wrapT = RepeatWrapping;\r\n    \r\n    this.materialList[ \"EnvironmentGround_Geo\" ]=environmentGroundMat;\r\n    */\r\n    \r\n    \r\n    \r\n  }\r\n  \r\n  /**\r\n   * Ran after the room's animation FBX files load & process.\r\n   * @param {string} animKey - The animation key.\r\n   * @param {Object} animMixers - The animation mixers.\r\n   */\r\n  animPostLoad( animKey, animMixers ){\r\n    if( this.pxlAnim.hasClip( animKey, this.animInitCycle ) ){\r\n      let animMixer = this.pxlAnim.getMixer( animKey );\r\n      this.animMixer = animMixer;\r\n      \r\n      this.pxlAnim.playClip( animKey, this.animInitCycle );\r\n    }else{\r\n      let fallback = this.pxlAnim.getFallbackCycle( animKey );\r\n      this.animInitCycle = fallback;\r\n      this.log(\"No animation cycle '\"+this.animInitCycle+\"' found; Using '\"+fallback+\"' instead\");\r\n    }\r\n  }\r\n  \r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  /**\r\n   * Build the scene and assets.\r\n   */\r\n  build(){\r\n    // Attempt to build the FBX if it exists\r\n    if( !this.sceneFile ){\r\n      return;\r\n    }\r\n    //this.pxlFile.loadRoomFBX( this ) \r\n  }\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- //\r\n\r\n  /**\r\n   * Handle incoming messages.\r\n   * @param {string} msgType - The type of message.\r\n   * @param {Object} msgValue - The value of the message.\r\n   */\r\n//   Custom implementation of HTML/GUI in conjunction with pxlNav\r\n//     Lets get some incoming messages to trigger some stuffs!\r\n  onMessage( msgType, msgValue ){\r\n    console.log(\"Room : \"+this.roomName+\" - Message Received: \"+msgType);\r\n    console.log(\"Message : \"+msgValue);\r\n    msgType = msgType.toLowerCase();\r\n    switch( msgType ){\r\n      case \"roomwarp\":\r\n        this.roomWarp=msgValue;\r\n        break;\r\n        default:\r\n      case \"roommessage\":\r\n        console.log( \"-- Message Type Not Recognized -- \" );\r\n        console.log( \"Room : \"+this.roomName );\r\n        console.log( \"Message Received: \"+msgType );\r\n        console.log( \"Message : \"+msgValue );\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport { RoomEnvironment };","//\r\n//  Core pxlNav Engine\r\n//      Written by Kevin Edzenga 2020;2024-2025\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// \r\n//   When importing this module,\r\n//     Navigating the nested classes can be a bit tricky.\r\n//   To help with that, use `pxlNav.trigger` in this file to send events to your custom pxlNav rooms.\r\n//     Used like - `pxlNav.trigger('toRoom','changeRoom','SaltFlatsEnvironment')`\r\n//     This way you can trigger room events or custom code in your rooms\r\n//   Use the `onMessage( *type*, *value* )` function in your room to catch the events you send.\r\n//\r\n//   The only Callback for subscription is \"booted\" at the moment, more to come!\r\n//     Usage - `pxlNav.subscribe('booted', yourCallbackFunc)`\r\n//       This will trigger when the engine has fully booted and is ready to be addressed.\r\n//         ALL rooms, assets, files, and initial functions have completed by this point.\r\n//           ::the progress bar fades out::\r\n//\r\n//   Until I find time to make it easier to connect to `pxlDevice` events.\r\n//     For things like mouse position, clicks, mobile phone pose/orientation, etc.\r\n//   You'll need to stick your nose into `./js/pxlNav/core/Device.js`\r\n//     For all your mouse drag, mouse velocity, key states, etc.\r\n\r\n//\r\n// -- -- --\r\n//\r\n\r\n//   *Note to pxlNav modifiers* -\r\n//     `//%=` `//%`  and  `//&=` `//&`\r\n//        Are used to mark code that is removed during webpack version building\r\n//          The sandwiched code is for the developmental & moderator specific code & builds.\r\n//            ( The initial need for pxlNav was as a virtual event space after all. )\r\n//        Treat them the same as `/*` & `*/` for commenting out code\r\n//          So if you remove a `//%` and not the before `//%=`, it will likely break your build\r\n\r\n\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\nimport {\r\n  WebGLRenderer,\r\n  Scene,\r\n  Color,\r\n  WebGLRenderTarget,\r\n  RGBAFormat,\r\n  LinearFilter,\r\n  RepeatWrapping,\r\n  DepthTexture,\r\n  DepthFormat,\r\n  UnsignedIntType,\r\n  UnsignedShortType,\r\n  BasicShadowMap,\r\n  PCFSoftShadowMap,\r\n  PerspectiveCamera,\r\n  AmbientLight,\r\n  DirectionalLight,\r\n  Object3D,\r\n  FloatType,\r\n  NearestFilter,\r\n  HalfFloatType,\r\n  SRGBColorSpace,\r\n  LinearSRGBColorSpace,\r\n  ColorManagement\r\n} from \"./libs/three/three.module.min.js\";\r\n\r\nimport { pxlBase } from './pxlNav/pxlBase.js';\r\nimport { pxlEnums } from './pxlNav/core/Enums.js';\r\nimport { pxlOptions, pxlUserSettings } from './pxlNav/core/Options.js';\r\nimport { pxlShaders } from './pxlNav/shaders/shaders.js';\r\nimport { pxlEffects } from './pxlNav/effects/effects.js';\r\n\r\nimport { RoomEnvironment } from './pxlNav/RoomClass.js';\r\n\r\nconst pxlCore = \"pxlNav-coreCanvas\"; // Name of DIV in Index\r\nconst pxlNavVersion = \"1.0.0-dev\";\r\n\r\nvar mapW,mapH;\r\nlet sW = window.innerWidth;\r\nlet sH = window.innerHeight;\r\n\r\n\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n// -- -- -- -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n/**\r\n * pxlNav - Core Engine\r\n *   The primary entry point for the pxlNav engine.\r\n * Initialize\r\n * @alias pxlNav\r\n * @module pxlNav\r\n * @description Primary pxlNav engine module\r\n * @param {object} options - The options object for the pxlNav environment\r\n * @param {string} projectTitle - The title of the project\r\n * @param {string} startingRoom - The initial room to load\r\n * @param {string[]} roomBootList - A list of rooms to load\r\n * @example\r\n * // Example of a pxlNav environment setup\r\n * //   This is how you would initialize the pxlNav environment for your project\r\n * import { pxlNav, pxlEnums, pxlUserSettings, pxlOptions } from './pxlNav.js';\r\n *  \r\n * // Verbose Level\r\n * //   NONE = 0, ERROR = 1, WARN = 2, INFO = 3, DEBUG = 4\r\n * const verboseLevel = pxlEnums.VERBOSE_LEVEL.INFO || 3;\r\n *  \r\n * // Project name\r\n * const projectTitle = \"Your Project Title\";\r\n * \r\n * // Booting rooms\r\n * const startingRoom = \"YourEnvironment\";\r\n * const bootRoomList = [startingRoom];\r\n * \r\n * // pxlRoom folder path, available to change folder names or locations if desired\r\n * const pxlRoomRootPath = \"../pxlRooms\";\r\n * // User settings for the default/initial pxlNav environment\r\n * //   These can be adjusted from your `pxlRoom` but easily set defaults here\r\n * const userSettings = Object.assign({}, pxlUserSettings);\r\n * userSettings['height']['standing'] = 1.75; // Standing height in units; any camera in your room's FBX will override this height once loaded\r\n * userSettings['height']['stepSize'] = 5; // Max step height in units\r\n *  \r\n * // Target FPS (Frames Per Second)\r\n * //   Default is - PC = 60  -&-  Mobile = 30\r\n * const targetFPS = {\r\n *   'pc' : 45,\r\n *   'mobile' : 30\r\n * };\r\n * \r\n * // Copy the default options\r\n * let pxlNavOptions = Object.assign({},pxlOptions);\r\n * pxlNavOptions.verbose = verboseLevel;\r\n * pxlNavOptions.fps = targetFPS;\r\n * pxlNavOptions.userSettings = userSettings;\r\n * pxlNavOptions.pxlRoomRoot = pxlRoomRootPath;\r\n * \r\n * // Initialize the pxlNav environment\r\n * const pxlNavEnv = new pxlNav( pxlNavOptions, projectTitle, startingRoom, bootRoomList );\r\n * pxlNavEnv.init();\r\n * @returns {pxlNav} - The pxlNav environment object\r\n * @example\r\n * // Subscribe to events emitted from pxlNav for callback handling\r\n * //   Non loop - pxlNavObj.subscribe(\"pxlNavEventNameHere\", procPages.functionName.bind(procPages));\r\n * const printEvent = ( eventType, eventValue )=>{\r\n *   console.log( eventType, eventValue );\r\n * };\r\n * const myClassObj = new MyCustomClass();\r\n * \r\n * // Subscribe a single function to an event -\r\n * pxlNavEnv.subscribe( \"booted\", printEvent );\r\n * \r\n * // Or multiple event subscriptions -\r\n * const pageListenEvents = [ \"booted\", \"shaderEditorVis\", \"roomChange-Start\", \"roomChange-Middle\", \"roomChange-End\", \"fromRoom\", \"pingPong\" ];\r\n * pageListenEvents.forEach( ( eventType )=>{\r\n *    // Subscribe functions to events -\r\n *   pxlNavEnv.subscribe( eventType, printEvent );\r\n *   // Make sure to bind the class object if you are using class methods\r\n *   pxlNavEnv.subscribe( eventType, myClassObj.eventHandler.bind(myClassObj) );\r\n * }); \r\n * @example\r\n * // Trigger events within pxlNav\r\n * // Possible triggers -\r\n * //   \"camera\" - Change the camera position, either 'roam' or 'static'\r\n * //   \"warptoroom\" - Change the room to a new room\r\n * //   \"roommessage\" - Send a message to the current pxlRoom, add a `onMessage( eventType, eventValue)` method in your pxlRoom to get outside messages.\r\n * //   \"ping\" - Send a \"pong\" event\r\n * pxlNavEnv.trigger( \"warptoroom\", \"changeRoom\", \"SaltFlatsEnvironment\" );\r\n * pxlNavEnv.trigger( \"camera\", \"roam\" );\r\n *  \r\n * // For testing purposes, trigger a `pingPong` event\r\n * //   Subscribe to the `ping` event\r\n * const pongPrint = ( eventType, eventValue )=>{\r\n *   console.log( eventType, eventValue );\r\n * };\r\n * pxlNavEnv.subscribe( \"pingPong\", pongPrint );\r\n * \r\n * // Trigger the `pingPong` event\r\n * pxlNavEnv.trigger( \"ping\" );\r\n * @example\r\n * // pxlNav Event List\r\n * //   \"booted\" : Emitted after the engine has fully booted and is ready to be addressed.\r\n * //   \"shaderEditorVis\" : Returns a [bool]; Emitted when the shader editor is toggled on or off.\r\n * //   \"roomChange-Start\" : Emitted when the room change transition begins.\r\n * //   \"roomChange-Middle\" : Emitted when the room change process occurs mid transition.\r\n * //   \"roomChange-End\" : Returns a [bool]; Emitted when the room change transition ends.\r\n * //   \"fromRoom\" : Returns a custom object; Emitted from your Room code you choose to emit during run time.\r\n * //   \"device-keydown\" : Returns an [int]; The just pressed key.\r\n * //   \"device-keyup\" : Returns an [int]; The just released key.\r\n * //   \"device-resize\" : Returns an [{height:#,width:#}]; Height Width object of the new window size.\r\n * //   \"camera-move\" : Returns a {'pos':vec3(),'dist':float}; Emitted when the camera moves.\r\n * //   \"camera-rotate\" : Returns a [quaternion]; Emitted when the camera rotates.\r\n * //   \"camera-jump\" : Returns a [bool]; Emitted when the camera jumps to a new position.\r\n * //   \"camera-fall\" : Returns a [bool]; Emitted when the camera starts to free-fall / gravity.\r\n * //   \"camera-landed\" : Returns a [bool]; Emitted when the camera lands from a jump / fall.\r\n * //   \"camera-collision\" : Returns a [bool]; Emitted when the camera collides with an object.\r\n * //   \"pxlNavEventNameHere\" : Never emitted; You did some copy'pasta.\r\n * //   \"help\" : Hello! I'm here to help you!\r\n * //   \"pingPong\" : Send 'ping', Get 'pong'! - pxlNav.trigger('ping');\r\n * //\r\n * //   ** NOTE : callbacks get an event object shaped -  **\r\n * //   **   callbackFn( eventType, eventValue ) **\r\n * //   **   eventValue = { 'type' : *eventName*, 'value' : *data* } **\r\n * \r\n * // Listen to when pxlNav has finished booting\r\n * const printBoot = ( eventType, eventValue )=>{\r\n *   console.log( \"pxlNav has booted!\" );\r\n *   console.log( eventType, eventValue );\r\n * };\r\n * pxlNavEnv.subscribe( \"booted\", printBoot );\r\n */\r\nclass pxlNav{\r\n  constructor( options, projectTitle, startingRoom, roomBootList ){\r\n    this._active = false;\r\n\r\n    // Count of loader bar steps\r\n    this.loaderStepTotalCount = 9;\r\n\r\n    // -- -- --\r\n    let pxlRoomRoot = \"./pxlRooms\";\r\n    if( options.hasOwnProperty(\"pxlRoomRoot\") ){\r\n      pxlRoomRoot = options[\"pxlRoomRoot\"];\r\n    }\r\n\r\n    // Enums object\r\n    this.pxlEnums = pxlEnums;\r\n\r\n    // Option Checks & Defaults\r\n    this.assetsToLoadDict = {\r\n      \"Cloud3d\" : true,\r\n      \"SoftNoise\" : true,\r\n      \"SmoothNoise\" : true,\r\n      \"ChromaticAberration\" : false,\r\n      \"WarpAnimTexture\" : false,\r\n      \"MathFuncs\" : false\r\n    };\r\n\r\n    this.knownPostProcessPasses = {\r\n      \"mapComposerWarpPass\" : [ 'cloud3dTexture' ],\r\n      \"chromaticAberrationPass\" : [ 'ChromaticAberration'], \r\n      \"lizardKingPass\" : [ 'cloud3dTexture' ], \r\n      \"starFieldPass\" : [ 'cloud3dTexture' ], \r\n      \"crystallinePass\" : [ 'cloud3dTexture' ] \r\n    };\r\n\r\n    // -- -- --\r\n\r\n    this.pxlOptions = Object.assign( {}, options );\r\n    let optionKeys=Object.keys( this.pxlOptions );\r\n    let defaultKeys=Object.keys( pxlOptions );\r\n    defaultKeys.forEach( (k)=>{\r\n      if( !optionKeys.includes( k ) ){\r\n        this.pxlOptions[k]=pxlOptions[k];\r\n      }\r\n    });\r\n\r\n    \r\n\r\n    // Should there not be a default `userSettings` object, build one\r\n    //   Update these values from `pxlRoom.pxlCamera` set methods\r\n    if( !this.pxlOptions.hasOwnProperty(\"userSettings\") ){\r\n      this.pxlOptions[\"userSettings\"] = Object.assign({}, pxlUserSettings);\r\n    }\r\n\r\n    // -- -- --\r\n\r\n    this.verbose = this.pxlOptions[\"verbose\"];\r\n    this.projectTitle = projectTitle;\r\n    this.startingRoom = startingRoom;\r\n    if( !roomBootList.includes( startingRoom ) ){\r\n      roomBootList.push( startingRoom );\r\n    }\r\n    this.roomBootList = roomBootList\r\n    this.callbacks = {};\r\n\r\n    this.uriHashParms = this.findHashParms();\r\n    this.mobile = this.isMobile();\r\n\r\n    this.pxlOptions[\"mobile\"] = this.mobile;\r\n\r\n    this.autoCam = this.getHashParm(\"autoCam\", false);\r\n    this.loadPercent=0.0;\r\n\r\n    this.folderDict = {\r\n      \"assetRoot\" : this.pxlOptions.pxlAssetRoot + \"/\",\r\n      \"guiRoot\" : this.pxlOptions.pxlAssetRoot + \"/GUI/\",\r\n      \"roomRoot\" : this.pxlOptions.pxlAssetRoot + \"/rooms/\",\r\n      \"vidRoot\" : this.pxlOptions.pxlAssetRoot + \"/screenContent/\"\r\n    };\r\n    \r\n    this.validEvents = {\r\n      \"booted\" : \"Emitted after the engine has fully booted and is ready to be addressed.\",\r\n      \"step\" : \"Emitted when frame update occurs, pre render.\",\r\n      \"render-prep\" : \"Emitted when the pxlNav engine starting to prepare for scene rendering.\",\r\n      \"shaderEditorVis\" : \"Returns a [bool]; Emitted when the shader editor is toggled on or off.\",\r\n      \"roomChange-Start\" : \"Emitted when the room change transition begins.\",\r\n      \"roomChange-Middle\" : \"Emitted when the room change process occurs mid transition.\",\r\n      \"roomChange-End\" : \"Returns a [bool]; Emitted when the room change transition ends.\",\r\n      \"fromRoom\" : \"Returns a custom object; Emitted from your Room code you choose to emit during run time.\",\r\n      \"device-keydown\" : \"Returns an [int]; The just pressed key.\",\r\n      \"device-keyup\" : \"Returns an [int]; The just released key.\",\r\n      \"device-resize\" : \"Returns an [{height:#,width:#}]; Height Width object of the new window size.\",\r\n      \"camera-move\" : \"Returns a {'pos':vec3(),'dist':float}; Emitted when the camera moves.\",\r\n      \"camera-rotate\" : \"Returns a [quaternion]; Emitted when the camera rotates.\",\r\n      \"camera-jump\" : \"Returns a [bool]; Emitted when the camera jumps to a new position.\",\r\n      \"camera-fall\" : \"Returns a [bool]; Emitted when the camera starts to free-fall / gravity.\",\r\n      \"camera-landed\" : \"Returns a [bool]; Emitted when the camera lands from a jump / fall.\",\r\n      \"camera-collision\" : \"Returns a [bool]; Emitted when the camera collides with an object.\",\r\n      \"pxlNavEventNameHere\" : \"Never emitted; You did some copy'pasta.\",\r\n      \"\" : \"** NOTE : callbacks get an event object shaped - **\",\r\n      \"\" : \"**  callbackFn( eventType, eventValue ) **\",\r\n      \"\" : \"**  eventValue = { 'type' : *eventName*, 'value' : *data* } **\",\r\n      \"\" : \"\",\r\n      \"help\" : \"Hello! I'm here to help you!\",\r\n      \"pingPong\" : \"Send 'ping', Get 'pong'! - pxlNav.trigger('ping');\",\r\n    };\r\n    this.validEventsKeys = Object.keys( this.validEvents );\r\n\r\n\r\n\r\n    // Bool to load the environment asset fbx file;\r\n    //   This is the included file with test pick-ups / assets\r\n    //     ./Source/assets/EnvironmentAssets.fbx\r\n    //   For further information of each item & object,\r\n    //     See https://github.com/ProcStack/pxlNav/tree/main/docs\r\n    // TODO : Turning this off breaks loading, fix that\r\n    this.loadEnvAssetFile = this.pxlOptions['loadEnvAssetFile'] || false;\r\n    this.loadEnvAssetFile = true;\r\n\r\n\r\n    this.pxlTimer = new pxlBase.Timer();\r\n    this.pxlShaders = pxlShaders;\r\n    this.pxlCookie = new pxlBase.CookieManager( this.verbose, projectTitle, \"/\" );\r\n    if( this.pxlCookie.hasCookie(\"forceMobile\") ){\r\n        this.mobile = this.pxlCookie.parseCookie(\"forceMobile\");\r\n    }\r\n    this.pxlQuality = new pxlBase.QualityController( this.verbose, this.mobile, this.uriHashParms );\r\n    this.pxlUtils = new pxlBase.Utils( this.folderDict[\"assetRoot\"], this.mobile );\r\n    this.pxlFile = new pxlBase.FileIO( this.folderDict );\r\n\r\n    // Mid Dev, null for now until fully implemented\r\n    this.pxlExtensions = null; // new pxlBase.Extensions();\r\n\r\n    this.pxlAudio = new pxlBase.Audio( this.pxlTimer );\r\n    this.pxlAutoCam = new pxlBase.AutoCamera( this.autoCam, this.mobile );\r\n    this.pxlAutoCam.active = false;\r\n\r\n    this.pxlUser = new pxlBase.User();\r\n\r\n    this.pxlEnv = new pxlBase.Environment( this.pxlOptions, this.startingRoom, this.mobile );\r\n    this.pxlDevice = new pxlBase.Device( projectTitle, pxlCore, this.mobile, this.autoCam );\r\n    \r\n    // Default Grid Size 50, Collider Bounds as reference 1000.0\r\n    //  The reference bounds are used to scale down the grid size for smaller bbox colliders,\r\n    //    Helping with higher poly counts for performance\r\n    this.pxlColliders = new pxlBase.Colliders( this.verbose, this.pxlOptions[\"collisionScale\"][\"gridSize\"], this.pxlOptions[\"collisionScale\"][\"gridReference\"] );\r\n\r\n\r\n    this.pxlCamera = new pxlBase.Camera();\r\n    // Disable Free-Roam camera mode if static camera is enabled\r\n    if( this.pxlOptions[\"staticCamera\"] ){\r\n      this.pxlCamera.toggleMovement( false );\r\n    }\r\n    // TODO : This will be moved to `User.js` in the future\r\n    this.pxlCamera.setUserSettings( this.pxlOptions[\"userSettings\"] );\r\n\r\n    this.pxlAnim = new pxlBase.Animation( this.folderDict[\"assetRoot\"], this.pxlTimer );\r\n\r\n    this.pxlGuiDraws = new pxlBase.GUI( this.verbose, projectTitle, this.folderDict[\"assetRoot\"], this.folderDict[\"guiRoot\"] );\r\n    this.pxlGuiDraws.pxlLoaderTotal = this.loaderStepTotalCount;\r\n\r\n    this.pxlHUD = new pxlBase.HUD();\r\n\r\n    // TODO : These should really be requested via pxlEnv methods, but for now...\r\n    //          Too many dependencies still to refactor, but it's cleaner than its ever been, so I'll take it!\r\n    this.pxlQuality.setDependencies( this );\r\n    this.pxlUtils.setDependencies( this );\r\n    this.pxlFile.setDependencies( this );\r\n    this.pxlAudio.setDependencies( this );\r\n    this.pxlAutoCam.setDependencies( this );\r\n    this.pxlUser.setDependencies( this );\r\n    this.pxlEnv.setDependencies( this );\r\n    this.pxlAnim.setDependencies( this );\r\n    this.pxlDevice.setDependencies( this );\r\n    this.pxlColliders.setDependencies( this );\r\n    this.pxlCamera.setDependencies( this );\r\n    this.pxlGuiDraws.setDependencies( this );\r\n    this.pxlHUD.setDependencies( this );\r\n\r\n    this.pxlDevice.init();\r\n    this.pxlGuiDraws.prepLoader();\r\n\r\n    if( !this.pxlOptions.hasOwnProperty(\"loaderPhrases\") ){\r\n      this.pxlOptions[\"loaderPhrases\"] = ['...loading the pixels...'];\r\n    }\r\n    this.pxlGuiDraws.setLoaderPhrases( this.pxlOptions[\"loaderPhrases\"] );\r\n\r\n    if( this.verbose >= pxlEnums.VERBOSE_LEVEL.INFO ){\r\n      console.log(\"pxlNav v\" + pxlNavVersion +\" set to Verbose Info Mode\");\r\n      console.log(\"  With Three.js v171\");\r\n      console.log(\"Booting pxlNav...\");\r\n    }\r\n\r\n    this.pxlQuality.init() // Load cookies and update settings\r\n  }\r\n  \r\n  set active(val=null){\r\n    if( val == null ){\r\n      val = !this.pxlTimer.active;\r\n    }\r\n    if( val == true ){ // Non-strict Truthy\r\n      this.pxlTimer.play();\r\n      this.step( false );\r\n    }else{ // Non-strict Falsy\r\n      this.pxlTimer.stop();\r\n    }\r\n  }\r\n  get active(){\r\n    return this.pxlTimer.active;\r\n  }\r\n  \r\n  start(){\r\n    this.active = true;\r\n  }\r\n  stop(){\r\n    this.active = false;\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  log( ...msg ){\r\n    if( this.verbose >= pxlEnums.VERBOSE_LEVEL.INFO ){\r\n      console.log( ...msg );\r\n    }\r\n  }\r\n  warn( ...msg ){\r\n    if( this.verbose >= pxlEnums.VERBOSE_LEVEL.WARN ){\r\n      console.warn( ...msg );\r\n    }\r\n  }\r\n  error( ...msg ){\r\n    if( this.verbose >= pxlEnums.VERBOSE_LEVEL.ERROR ){\r\n      console.error( ...msg );\r\n    }\r\n  }\r\n  debug( ...msg ){\r\n    if( this.verbose >= pxlEnums.VERBOSE_LEVEL.DEBUG ){\r\n      console.debug( ...msg );\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  init(){\r\n    // Boot timer\r\n    if(!this.pxlTimer.active){\r\n      this.bootTimer();\r\n    }\r\n\r\n    // Start the pxlNav environment\r\n    this.pxlEnv.boot(); // Environment Asset Prep\r\n    // Initialize a base quality level\r\n    this.pxlQuality.startBenchmark(); // Start benchmark timer\r\n\r\n    // Detect the JS framework in use\r\n    this.detectJSFramework();\r\n\r\n    // Check for post-process passes to load their pxlAssets\r\n    this.checkPxlOptions();\r\n\r\n    this.buildGui()\r\n      .then( ()=>{ \r\n        this.tickLoader();\r\n        this.pxlGuiDraws.stepLoader(\"Build Engine\"); // --\r\n        this.bootEnvironment();\r\n      })\r\n      .then( ()=>{\r\n        this.tickLoader();\r\n        this.pxlGuiDraws.stepLoader(\"Boot Engine\"); // --\r\n        this.bootEngine();\r\n      })\r\n      .then( ()=>{ \r\n        this.tickLoader();\r\n\r\n        this.pxlGuiDraws.stepLoader(\"Build Composers\"); // --\r\n\r\n        // Create post-process passes\r\n        this.pxlEnv.buildComposers();\r\n\r\n        // Prep the HUD\r\n        //   Post room boot to allow for room specific HUD elements\r\n        this.pxlHUD.init();\r\n      })\r\n      .then( ()=>{\r\n        this.tickLoader();\r\n        //this.pxlDevice.resizeRenderResolution();\r\n        this.cameraRunAnimatorMobile( this );\r\n        this.pxlGuiDraws.stepLoader(\"postBoot\"); // --\r\n        this.pxlEnv.mapRender( false );\r\n        this.pxlDevice.setCursor(\"grab\");\r\n       })\r\n       .catch(( err )=>{\r\n          if( this.verbose > pxlEnums.VERBOSE_LEVEL.NONE ){\r\n            console.error(\"Error in pxlNavCore.init(); Load level - \", err);\r\n            console.error(err);\r\n          }\r\n        })\r\n       .finally( ()=>{\r\n        if( this.verbose >= pxlEnums.VERBOSE_LEVEL.DEBUG ){\r\n          console.log(\"'pxlNavCore' Room Build Promise-Chain Completed; \", this.loadPercent);\r\n          console.log(\"-- Starting pxlNav in Room `\"+this.pxlEnv.bootRoom+\"`\");\r\n        }\r\n        this.start();\r\n       });\r\n    \r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  // Check if any post process passes are enabled & toggle load status of their pxlAssets\r\n  checkPxlOptions(){\r\n    if( this.pxlOptions.hasOwnProperty(\"postProcessPasses\") ){\r\n      let postProcessKeys = Object.keys( this.pxlOptions[\"postProcessPasses\"] );\r\n      let knownPassKeys = Object.keys( this.knownPostProcessPasses );\r\n      postProcessKeys.forEach( (key)=>{\r\n        if( knownPassKeys.includes( key ) && this.pxlOptions[\"postProcessPasses\"][key] ){\r\n          let passAssets = this.knownPostProcessPasses[key];\r\n          passAssets.forEach( (assetKey)=>{\r\n            this.assetsToLoadDict[assetKey] = true;\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  // -- -- --\r\n\r\n  detectJSFramework(){\r\n    // Check for Next.js first (includes React)\r\n    if (typeof window !== 'undefined') {\r\n      // Next.js specific globals\r\n      if (window.__NEXT_DATA__ || window.__NEXT_ROUTER__ || window.next) {\r\n        this.pxlOptions.framework = this.pxlEnums.FRAMEWORK.NEXT;\r\n        return;\r\n      }\r\n      \r\n      // React DevTools or React specific globals\r\n      if (window.__REACT_DEVTOOLS_GLOBAL_HOOK__ || \r\n          document.querySelector('[data-reactroot]') ||\r\n          document.querySelector('[data-react-helmet]')) {\r\n        this.pxlOptions.framework = this.pxlEnums.FRAMEWORK.REACT;\r\n        return;\r\n      }\r\n    }\r\n    \r\n    // Check for build environment\r\n    if (typeof process !== 'undefined' && process.env) {\r\n      if (process.env.NEXT_RUNTIME || process.env.__NEXT_ROUTER_BASEPATH) {\r\n        this.pxlOptions.framework = 'next';\r\n        return;\r\n      }\r\n      if (process.env.REACT_APP_) {\r\n        this.pxlOptions.framework = this.pxlEnums.FRAMEWORK.REACT;\r\n        return;\r\n      }\r\n    }\r\n    \r\n    // Check for bundler-specific globals\r\n    if (typeof __webpack_require__ !== 'undefined' || \r\n        typeof webpackJsonp !== 'undefined') {\r\n      // Likely in a bundled React/Next environment\r\n      this.pxlOptions.framework = this.pxlEnums.FRAMEWORK.REACT;\r\n      return;\r\n    }\r\n    \r\n    // Fallback to native JavaScript\r\n    this.pxlOptions.framework = this.pxlEnums.FRAMEWORK.NATIVE;\r\n    \r\n    // Logging the framework\r\n    if( this.verbose >= pxlEnums.VERBOSE_LEVEL.INFO ){\r\n      let frameworkStr = \"Unknown\";\r\n      switch( this.pxlOptions.framework ){\r\n        case this.pxlEnums.FRAMEWORK.NEXT :\r\n          frameworkStr = \"Next.js\";\r\n          break;\r\n        case this.pxlEnums.FRAMEWORK.REACT :\r\n          frameworkStr = \"React.js\";\r\n          break;\r\n        case this.pxlEnums.FRAMEWORK.NATIVE :\r\n          frameworkStr = \"Native JavaScript\";\r\n          break;\r\n        default :\r\n          frameworkStr = \"Unknown\";\r\n          break;\r\n      }\r\n      console.log(\"  Detected Framework : \", frameworkStr);\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  buildGui(){\r\n    return new Promise( (resolve, reject)=>{\r\n      this.pxlGuiDraws.booted();\r\n        \r\n      this.pxlGuiDraws.pxlNavCanvas=document.getElementById(pxlCore);\r\n      \r\n      this.pxlGuiDraws.pxlNavCanvas.width= window.innerWidth * this.pxlQuality.screenResPerc;\r\n      this.pxlGuiDraws.pxlNavCanvas.height= window.innerHeight * this.pxlQuality.screenResPerc;\r\n      \r\n      if(this.pxlDevice.canCursorLock){\r\n        this.pxlGuiDraws.pxlNavCanvas.requestPointerLock=\r\n            this.pxlGuiDraws.pxlNavCanvas.requestPointerLock ||\r\n            this.pxlGuiDraws.pxlNavCanvas.mozRequestPointerLock ||\r\n            this.pxlGuiDraws.pxlNavCanvas.webkitRequestPointerLock;\r\n        document.requestPointerLock=\r\n            this.pxlGuiDraws.pxlNavCanvas.exitPointerLock ||\r\n            this.pxlGuiDraws.pxlNavCanvas.mozExitPointerLock ||\r\n            this.pxlGuiDraws.pxlNavCanvas.webkitExitPointerLock;\r\n      }\r\n      this.pxlGuiDraws.mapPrepPrompts(); // Prep GUI & Hud DOM Elements\r\n      resolve( true );\r\n    });\r\n  }\r\n\r\n////////////////////////////////////////////////////\r\n// -- ENGINE PREP  &  SCENE -- -- -- -- -- -- -- //\r\n//////////////////////////////////////////////////\r\n\r\n  isMobile(){\r\n    var mobile = false;\r\n    mobile = (/\\b(BlackBerry|webOS|iPhone|IEMobile|Android|Windows Phone|iPad|iPod)\\b/i.test(navigator.userAgent));\r\n    \r\n    mobile = this.getHashParm(\"m\", mobile);\r\n\r\n    return mobile;\r\n  }\r\n\r\n  findHashParms(){\r\n    var hashParms={};\r\n    var hashStr=window.location.hash;\r\n    if(hashStr.length>1){\r\n      hashStr=hashStr.substring(1);\r\n      var hashList=hashStr.split(\"&\");\r\n      for(var i=0; i<hashList.length; i++){\r\n        var curParm=hashList[i].split(\"=\");\r\n        hashParms[curParm[0]]=curParm[1];\r\n      }\r\n    }\r\n    return hashParms;\r\n  }\r\n\r\n  getHashParm(parm, def){\r\n    if( Object.keys(this.uriHashParms).includes(parm) ){\r\n      return this.uriHashParms[parm];\r\n    }else{\r\n      return def;\r\n    }\r\n  }\r\n\r\n  tickLoader(){\r\n    this.loadPercent+=1.0;\r\n    //this.pxlGuiDraws.stepLoader(\"tick\");\r\n  }\r\n\r\n  bootEngine(){\r\n    return new Promise( (resolve, reject)=>{\r\n        let promiseList=[];\r\n        for( let x=0; x<this.roomBootList.length; ++x ){\r\n          promiseList.push( this.pxlEnv.loadRoom( this.roomBootList[x] ) );\r\n        }\r\n        \r\n        Promise.all( promiseList ).then( ()=>{\r\n          resolve( true );\r\n        })\r\n        .catch(err => {\r\n          if (this.verbose >= pxlEnums.VERBOSE_LEVEL.ERROR) {\r\n            console.error(\"Error loading rooms:\", err);\r\n          }\r\n          reject(err);\r\n        });\r\n    });\r\n  }\r\n\r\n  bootEnvironment(){\r\n    return new Promise( (resolve, reject)=>{\r\n        // Rederer\r\n        this.pxlEnv.engine=new WebGLRenderer({\r\n            canvas: this.pxlGuiDraws.pxlNavCanvas,\r\n            powerPreference : \"low-power\",\r\n            alpha:true,\r\n            antialias: false,\r\n            sortObjects:true,\r\n            depth:true,\r\n            //logarithmicDepthBuffer:true,\r\n        });\r\n        var options = {\r\n            format : RGBAFormat,\r\n            antialias: false,\r\n            sortObjects:true,\r\n            alpha:true,\r\n            type : /(iPad|iPhone|iPod)/g.test(navigator.userAgent) ? HalfFloatType : FloatType \r\n        };\r\n        this.pxlEnv.engine.autoClear=true;\r\n        ColorManagement.enabled = false;\r\n        this.pxlEnv.engine.outputColorSpace = SRGBColorSpace;\r\n        //this.pxlEnv.engine.outputColorSpace = LinearSRGBColorSpace;\r\n        \r\n        this.pxlEnv.engine.debug.checkShaderErrors=false;\r\n        //%= Dev\r\n        this.pxlEnv.engine.debug.checkShaderErrors=true;\r\n        //%\r\n        \r\n        let bgCd=0x000000;\r\n        let bgCdHex=\"#000000\";\r\n        this.pxlEnv.engine.setClearColor(this.pxlEnv.fogColor, 0);\r\n        //this.pxlEnv.engine.setPixelRatio(window.devicePixelRatio);\r\n        this.pxlEnv.engine.setSize(mapW/this.pxlQuality.screenResPerc, mapH/this.pxlQuality.screenResPerc);\r\n        \r\n        this.pxlEnv.engine.setSize( window.innerWidth, window.innerHeight );\r\n        \r\n        this.pxlEnv.engine.setPixelRatio(1);\r\n\r\n        if(this.pxlOptions.shadowMapBiasing == pxlEnums.SHADOW_MAP.OFF){\r\n          this.pxlEnv.engine.shadowMap.enabled=false;\r\n        }else{\r\n          this.pxlEnv.engine.shadowMap.enabled=true;\r\n          this.pxlEnv.engine.shadowMap.type=BasicShadowMap;\r\n        }\r\n        \r\n        \r\n        // Build render targets for depth and world space reference\r\n        this.pxlEnv.scene=new Scene();\r\n        this.pxlEnv.scene.fog=this.pxlEnv.fog;\r\n        \r\n        //this.pxlEnv.scene.background = new Color(bgCdHex);\r\n        this.pxlEnv.scene.background = new Color(bgCdHex);//this.pxlEnv.fogColor;\r\n        this.pxlEnv.scene.renderTarget=new WebGLRenderTarget(sW*this.pxlQuality.screenResPerc,sH*this.pxlQuality.screenResPerc,options);\r\n        this.pxlEnv.scene.renderTarget.texture.format=RGBAFormat;\r\n        this.pxlEnv.scene.renderTarget.texture.minFilter=LinearFilter;\r\n        this.pxlEnv.scene.renderTarget.texture.magFilter=LinearFilter;\r\n        this.pxlEnv.scene.renderTarget.texture.generateMipmaps=false;\r\n        //this.pxlEnv.scene.renderTarget.texture.type=FloatType;\r\n        this.pxlEnv.scene.renderTarget.depthBuffer=true;\r\n        this.pxlEnv.scene.renderTarget.depthTexture = new DepthTexture();\r\n        this.pxlEnv.scene.renderTarget.depthTexture.format=DepthFormat;\r\n        this.pxlEnv.scene.renderTarget.depthTexture.type=UnsignedIntType;\r\n        //this.pxlEnv.scene.renderTarget.depthTexture.type=UnsignedShortType;\r\n        this.pxlEnv.scene.renderWorldPos=new WebGLRenderTarget(sW*this.pxlQuality.screenResPerc,sH*this.pxlQuality.screenResPerc,options);\r\n        this.pxlEnv.scene.renderWorldPos.texture.format=RGBAFormat;\r\n        this.pxlEnv.scene.renderWorldPos.texture.minFilter=NearestFilter;\r\n        this.pxlEnv.scene.renderWorldPos.texture.magFilter=NearestFilter;\r\n        this.pxlEnv.scene.renderWorldPos.texture.generateMipmaps=false;\r\n        \r\n        options.alpha=true;\r\n        this.pxlEnv.scene.renderGlowTarget=new WebGLRenderTarget( parseInt(sW*this.pxlQuality.screenResPerc), parseInt(sH*this.pxlQuality.screenResPerc),options);\r\n        this.pxlEnv.scene.renderGlowTarget.texture.format=RGBAFormat;\r\n        this.pxlEnv.scene.renderGlowTarget.texture.generateMipmaps=false;\r\n        \r\n        /*this.pxlEnv.warpZoneRenderTarget=new WebGLRenderTarget(1024,1024,options);\r\n        this.pxlEnv.warpZoneRenderTarget.texture.format=RGBFormat;\r\n        this.pxlEnv.warpZoneRenderTarget.texture.minFilter=LinearFilter;\r\n        this.pxlEnv.warpZoneRenderTarget.texture.magFilter=LinearFilter;\r\n        this.pxlEnv.warpZoneRenderTarget.texture.generateMipmaps=false;*/\r\n        \r\n        // TODO : Aspect Ratio is a bit off, need to fix this\r\n        //var aspectRatio=this.pxlGuiDraws.pxlNavCanvas.width/this.pxlGuiDraws.pxlNavCanvas.height;\r\n        // To change the near and far, see Environment .init()\r\n        let curFOV=this.pxlEnv.pxlCamFOV[ this.pxlDevice.mobile ? 'MOBILE' : 'PC' ];\r\n        this.pxlCamera.camera=new PerspectiveCamera( curFOV, 1, this.pxlEnv.camNear, this.pxlEnv.camFar);\r\n        this.pxlAutoCam.camera=this.pxlCamera.camera;\r\n        \r\n        //this.pxlEnv.listener = new AudioListener();\r\n        //this.pxlCamera.camera.add( this.pxlEnv.listener );\r\n        \r\n        //this.pxlCamera.camera.position.set(-20,0,15);\r\n        this.pxlCamera.cameraAimTarget=new Object3D();\r\n        this.pxlEnv.scene.add(this.pxlCamera.cameraAimTarget);\r\n        this.pxlCamera.camera.target=this.pxlCamera.cameraAimTarget;\r\n        \r\n        //this.pxlEnv.roomSceneList[this.pxlEnv.mainRoom]=this.pxlEnv;\r\n        \r\n        //this.pxlCamera.camera.layers.enable(0);\r\n        this.pxlCamera.camera.layers.enable(1);\r\n        this.pxlCamera.camera.layers.enable(2);\r\n        \r\n        \r\n        this.pxlEnv.scene.add( this.pxlEnv.userAvatarGroup );\r\n        \r\n    ///////////////////////////////////////////////////\r\n    // -- FILE I/O & Shared Assets -- -- -- -- -- -- //\r\n    ///////////////////////////////////////////////////\r\n\r\n    \r\n    if( this.assetsToLoadDict[\"Cloud3d\"] ){\r\n        this.pxlEnv.cloud3dTexture=this.pxlUtils.loadTexture( this.folderDict[\"assetRoot\"]+\"Noise_Cloud3d.jpg\", null, {\"encoding\":LinearSRGBColorSpace});\r\n        this.pxlEnv.cloud3dTexture.wrapS=RepeatWrapping;\r\n        this.pxlEnv.cloud3dTexture.wrapT=RepeatWrapping;\r\n    }\r\n    if( this.assetsToLoadDict[\"SoftNoise\"] ){  \r\n        this.pxlEnv.softNoiseTexture=this.pxlUtils.loadTexture( this.folderDict[\"assetRoot\"]+\"Noise_Soft3d.jpg\" );\r\n        this.pxlEnv.softNoiseTexture.wrapS = RepeatWrapping;\r\n        this.pxlEnv.softNoiseTexture.wrapT = RepeatWrapping;\r\n    }\r\n    if( this.assetsToLoadDict[\"SmoothNoise\"] ){  \r\n        this.pxlEnv.detailNoiseTexture=this.pxlUtils.loadTexture( this.folderDict[\"assetRoot\"]+\"Noise_UniformSmooth.jpg\" );\r\n        this.pxlEnv.detailNoiseTexture.wrapS = RepeatWrapping;\r\n        this.pxlEnv.detailNoiseTexture.wrapT = RepeatWrapping;\r\n    }\r\n    if( this.assetsToLoadDict[\"ChromaticAberration\"] ){\r\n        let chroAberUVTexture = this.pxlUtils.loadTexture( this.folderDict[\"assetRoot\"]+\"uv_ChromaticAberration_rgb.jpg\");\r\n        chroAberUVTexture.minFilter=LinearFilter;\r\n        chroAberUVTexture.magFilter=LinearFilter;\r\n        this.pxlEnv.chroAberUVTexture=chroAberUVTexture;\r\n\r\n        let chroAberUVAlpha = this.pxlUtils.loadTexture( this.folderDict[\"assetRoot\"]+\"uv_ChromaticAberration_alpha.jpg\");\r\n        chroAberUVAlpha.minFilter=LinearFilter;\r\n        chroAberUVAlpha.magFilter=LinearFilter;\r\n        this.pxlEnv.chroAberUVAlpha=chroAberUVAlpha;\r\n    }\r\n    if( this.assetsToLoadDict[\"WarpAnimTexture\"] ){\r\n        this.pxlEnv.blockAnimTexture=this.pxlUtils.loadTexture( this.folderDict[\"assetRoot\"]+\"uv_blockPortalWarp.jpg\");\r\n        this.pxlEnv.blockAnimTexture.minFilter=LinearFilter;\r\n        this.pxlEnv.blockAnimTexture.magFilter=LinearFilter;\r\n    }\r\n        \r\n\r\n    ///////////////////////////////////////////////////\r\n    // -- GEOMETRY  -- -- -- -- -- -- -- -- -- -- -- //\r\n    ///////////////////////////////////////////////////\r\n        \r\n        var materialList, transformList;\r\n        // deskCandleHolder\r\n        \r\n        var tListIdent=(parentObj=null)=>{\r\n            var ident={\r\n            \"t\":[0,0,0],\r\n            \"r\":[0,0,0],\r\n            \"s\":[1,1,1]\r\n            };\r\n            if(parentObj != null){\r\n                ident[parentObj[0]]=parentObj[1];\r\n            }\r\n            return ident;\r\n        }\r\n        \r\n        transformList=tListIdent();\r\n\r\n        let mobileSuffix=\"\";\r\n        if( this.mobile ){\r\n            mobileSuffix=\"_mobile\";\r\n        }\r\n        \r\n        if( this.loadEnvAssetFile ){\r\n          //let sceneFile=this.folderDict[\"assetRoot\"]+\"EnvironmentAssets\"+mobileSuffix+\".fbx\";\r\n          let sceneFile=this.folderDict[\"assetRoot\"]+\"EnvironmentAssets.fbx\";\r\n          // This is a separate fbx loaded specifically for the Environment Asset FBX\r\n          //   It opens up the found scene objects to easier global access\r\n          this.pxlFile.loadSceneFBX(sceneFile, materialList, transformList, this.verbose,'EnvironmentAssets',[this.pxlEnv.scene]);\r\n        }\r\n\r\n    ///////////////////////////////////////////////////\r\n    // -- LIGHTS -- -- -- -- -- -- -- -- -- -- -- -- //\r\n    ///////////////////////////////////////////////////\r\n        //Shadow Maps-\r\n        if(this.pxlOptions.shadowMapBiasing == pxlEnums.SHADOW_MAP.OFF){\r\n          this.pxlEnv.engine.shadowMap.enabled=false;\r\n        }else{\r\n          this.pxlEnv.engine.shadowMap.enabled=true;\r\n          if(this.pxlOptions.shadowMapBiasing == pxlEnums.SHADOW_MAP.BASIC || this.mobile){\r\n              this.pxlEnv.engine.shadowMap.type=BasicShadowMap;\r\n          }else if(this.pxlOptions.shadowMapBiasing == pxlEnums.SHADOW_MAP.SOFT){\r\n              this.pxlEnv.engine.shadowMap.type=PCFSoftShadowMap;\r\n              //this.pxlEnv.engine.shadowMap.type=VSMShadowMap;\r\n          }\r\n        }\r\n        \r\n        // Every light is another frag level dot to matrix calculation\r\n        // Add at your own risk\r\n        var ambLight=new AmbientLight(0xffffff,.05);\r\n        this.pxlEnv.lightList.push(ambLight);\r\n        this.pxlEnv.scene.add(ambLight);\r\n        var dirLight=new DirectionalLight(0xffffff,.1);\r\n        dirLight.position.set(1000,550,1200);\r\n        this.pxlEnv.lightList.push(dirLight);\r\n        this.pxlEnv.scene.add(dirLight);\r\n        /*var dirLightB=new DirectionalLight(0xffffff,.05);\r\n        dirLightB.position.set(-500,750,1500);\r\n        this.pxlEnv.lightList.push(dirLightB);\r\n        this.pxlEnv.scene.add(dirLightB); */\r\n        \r\n\r\n        resolve( true );\r\n    });\r\n  }\r\n\r\n  cameraRunAnimatorMobile( tmpThis ){\r\n    let stillLoadingCheck=false;\r\n    let keys=Object.keys(tmpThis.pxlEnv.geoLoadList);\r\n    for(let x=0; x<keys.length; ++x){ // Check if any objects are still loading\r\n      stillLoadingCheck=tmpThis.pxlEnv.geoLoadList[keys[x]]==0;\r\n      stillLoadingCheck = stillLoadingCheck && !tmpThis.pxlEnv.roomSceneList[x]?.booted;\r\n      if(stillLoadingCheck){ // If entry isn't 1, means not fully loaded\r\n        break;\r\n      }\r\n    }\r\n    if(stillLoadingCheck ){ // Files are still loading\r\n      setTimeout(()=>{\r\n        tmpThis.cameraRunAnimatorMobile( tmpThis );\r\n      },300);\r\n    }else{\r\n      tmpThis.initRoomList( tmpThis );\r\n    }\r\n  }\r\n\r\n  initRoomList( tmpThis){\r\n    tmpThis.pxlGuiDraws.stepLoader(\"camAnim\"); // --\r\n    tmpThis.pxlCamera.setTransform( tmpThis.pxlEnv.camInitPos, tmpThis.pxlEnv.camInitLookAt );\r\n    tmpThis.pxlCamera.updateCamera();\r\n\r\n    // Append start up functions\r\n    tmpThis.pxlEnv.buildRoomEnvironments();\r\n    tmpThis.monitorRoomLoad( tmpThis );\r\n  }\r\n  monitorRoomLoad( tmpThis, loop=0, maxAttempts = 25 ){\r\n    let stillLoadingCheck=false;\r\n    let keys=Object.keys(tmpThis.pxlEnv.geoLoadList);\r\n    let bootOnFirst = !pxlOptions[\"fullLoadPreBoot\"];\r\n    for(let x=0; x<keys.length; ++x){ // Check if any objects are still loading\r\n      stillLoadingCheck = tmpThis.pxlEnv.geoLoadList[keys[x]]==0;\r\n      stillLoadingCheck = stillLoadingCheck && !tmpThis.pxlEnv.roomSceneList[x]?.booted;\r\n      if( bootOnFirst && keys[x] == this.startingRoom && stillLoadingCheck){ // If entry isn't 1, means not fully loaded\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Monitor the loading of the rooms\r\n    //   If the rooms are still loading, wait a bit and check again\r\n    //   If the rooms are not loading, continue the room prep\r\n\r\n    // Check loop count to prevent infinite loop\r\n    //  TODO : This requires a verification check of the rooms and perhaps auto refresh\r\n    //           But that is nuclear.\r\n    if( loop > maxAttempts ){\r\n      this.warn(\"pxlNav: Room Load Monitor timed out, continuing with boot\");\r\n      stillLoadingCheck=false;\r\n    }\r\n\r\n    if( stillLoadingCheck ){ // Files are still loading\r\n      setTimeout(()=>{\r\n        tmpThis.monitorRoomLoad( tmpThis, loop+1, maxAttempts );\r\n      },300);\r\n    }else{\r\n      tmpThis.pxlQuality.mapAutoQualityUpdate(1,true);\r\n      //let snapShotCommands=tmpThis.pxlEnv.warpPortalQueue();\r\n      //let camStats={ fov:pxlCamera.camera.fov, zoom:pxlCamera.camera.zoom, aspect:pxlCamera.camera.aspect };\r\n      //runStartFunctions( camStats, 0, true, snapShotCommands);\r\n      tmpThis.runPrepDrawScenes( 0, true, []);//snapShotCommands );\r\n    }\r\n\r\n  }\r\n  \r\n  /**\r\n   * Internal Function\r\n   * Warp player to each room to build materials on gpu\r\n   * This compiles the materials in each scene, at least from the perspective of the camera\r\n   *   This causes a delay during the first warp to the new room in runtime,\r\n   *     So this runs that hiccup before the user can feel it\r\n   * `cmdList` currently unused, was used to take screenshots of each room initially.\r\n   *   But this is a stage where custom commands can be injected during environment prep.\r\n   * @param {*} runner \r\n   * @param {*} jumpCam \r\n   * @param {*} cmdList \r\n   */\r\n  runPrepDrawScenes(runner=0, jumpCam=true, cmdList=[]){\r\n\r\n    if( runner == 0 ){\r\n      this.pxlGuiDraws.stepLoader(\"Room Prep\"); // --\r\n    }\r\n\r\n    runner++;\r\n    if( cmdList.length > 0 ){\r\n      if(jumpCam){\r\n        jumpCam=false;\r\n        let curRoom=cmdList[cmdList.length-1];\r\n        this.pxlCamera.warpToRoom( curRoom );\r\n      }\r\n      \r\n      this.pxlCamera.colliderPrevObjHit=null;\r\n      // Erroring here means shader failure in scene\r\n      this.pxlEnv.mapRender( false );\r\n      \r\n      if(runner%10==0){\r\n        let exitingRoom=cmdList.pop();\r\n        // Snapshots / Env Map Gen\r\n        //pxlEnv.getSceneSnapshot(exitingRoom);\r\n        jumpCam=true;\r\n              \r\n        this.pxlGuiDraws.stepLoader(exitingRoom); // --\r\n      }\r\n      \r\n      requestAnimationFrame( ()=>{ this.runPrepDrawScenes( runner, jumpCam, cmdList ); });\r\n    }else{\r\n      this.pxlGuiDraws.stepLoader(\"Post Room Prep\"); // --\r\n          \r\n      this.pxlNavPrepSettings(); \r\n    }\r\n  }\r\n  \r\n  \r\n  /**\r\n   * Internal Function\r\n   * All booting has completed\r\n   * Clean-up device benchmarking, restart the main room, move player to starting position & look at\r\n   * Final prep; settings and gui values based on cookies or benchmarking\r\n   * Then release the kraken!\r\n   */\r\n  pxlNavPrepSettings(){\r\n    this.pxlCamera.warpToRoom( this.pxlEnv.bootRoom, true );\r\n    this.pxlQuality.endBenchmark(); // All the heavy lifting as completed\r\n      \r\n    this.pxlGuiDraws.stepLoader( \"Nav Settings\" ); // --\r\n    \r\n    this.startPxlNav();\r\n    \r\n  }\r\n\r\n  /**\r\n   * Internal function\r\n   * Start the pxlNav engine\r\n   */\r\n  startPxlNav(){\r\n    this.pxlTimer.init();\r\n    this.pxlTimer.play();\r\n    \r\n    this.pxlGuiDraws.applyCookies();\r\n      \r\n    if(this.pxlGuiDraws.pxlNavCanvas){ this.pxlGuiDraws.pxlNavCanvas.focus(); }\r\n\r\n    let curRoom=this.pxlEnv.roomSceneList[this.pxlEnv.currentRoom];\r\n    curRoom.active=true;\r\n    curRoom.startTime=this.pxlTimer.msRunner.x;\r\n    \r\n    // ## Must be a reason I'm not doing a pop() here\r\n    this.pxlEnv.roomPostGuiCalls.forEach( (e)=>{ e.postGuiEvent(); });\r\n    this.pxlEnv.roomPostGuiCalls=[];\r\n      \r\n    if( this.pxlAutoCam.enabled ){\r\n      this.pxlGuiDraws.guiToggleVisibility( false );\r\n    }\r\n    this.pxlAutoCam.init();\r\n    //this.pxlVideo.boot();\r\n    \r\n    this.pxlDevice.resizeRenderResolution();\r\n    this.pxlEnv.mapRender();\r\n    \r\n    this.pxlQuality.setDependentSettings();\r\n\r\n\r\n    this.pxlGuiDraws.stepLoader( \"Starting...\" );\r\n    \r\n    let tmpThis = this;\r\n    \r\n    setTimeout( ()=>{\r\n      tmpThis.pxlEnv.postBoot();\r\n      if(tmpThis.pxlGuiDraws.mapPrompt) tmpThis.pxlGuiDraws.promptFader(tmpThis.pxlGuiDraws.mapPrompt, false,null,true);\r\n      if(tmpThis.pxlGuiDraws.mapPromptBG) tmpThis.pxlGuiDraws.promptFader(tmpThis.pxlGuiDraws.mapPromptBG, false,null,false);\r\n      this.pxlDevice.hideAddressBar();\r\n      tmpThis.emit(\"booted\", true);\r\n    }, 200);\r\n  }\r\n\r\n\r\n\r\n\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n  // -- -- -- -- -- -- -- -- -- -- --\r\n\r\n\r\n  \r\n\r\n  /**\r\n   * Initialize pxlNav clock for synced external runtimes\r\n   * Don't run `setp(true)` if you are using pxlNav to run the render loop, this will cause two loops to run in tandem.\r\n   * This function should only be used if you are using pxlNav for it's utilities and not pxlRoom / Render Stack management.\r\n   * @param {boolean} anim If the clock should loop or not\r\n   */\r\n  step(anim=false){\r\n    if(this.pxlTimer.active){\r\n      this.pxlTimer.step();\r\n      if( anim ){\r\n        requestAnimationFrame( ()=>{ this.step(); });\r\n      }\r\n    }\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  /**\r\n   * Initialize pxlNav's runtime clock\r\n   */\r\n  bootTimer(){\r\n    this.pxlTimer.init();\r\n    this.pxlTimer.play();\r\n  }\r\n\r\n  /**\r\n   * Stop pxlNav's runtime clock\r\n   * This will pause all animations and events\r\n   */\r\n  stopTimer(){\r\n    this.pxlTimer.stop();\r\n  }\r\n\r\n  /**\r\n   * Pause pxlNav's runtime clock\r\n   */\r\n  pauseTimer(){\r\n    this.pxlTimer.pause();\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  \r\n  \r\n  /**\r\n  * Prep an object with propper css classes to work with {@link promptFader}\r\n  * @param {(string|object)} obj Object to set classes to.\r\n  * @param {boolean=} startVis If the object starts visible or not. Defaults to not visible, easier for a fade in.\r\n  */\r\n  prepPromptFader( obj, startVis=false ){\r\n    let curObj=obj;\r\n    if( typeof(curObj) === \"string\" ){\r\n      curObj=document.getElementById(curObj);\r\n    }\r\n    if(!curObj){\r\n      return;\r\n    }\r\n        \r\n    curObj.classList.add(\"fader\");\r\n    curObj.classList.add( (startVis ? \"visOn\" : \"visOff\") );\r\n    curObj.style.display= startVis ? \"inline-block\" : \"none\";\r\n  }\r\n  \r\n  /**\r\n  * Fade an object in or out of visiblity over time.\r\n  * Fade animation uses css for the visuals, but uses clock time for automatic fade out events.\r\n  * @param {(string|object)} faderObjObject to fade in or out.\r\n  * @param {boolean} vis Visiblity state to fade to.\r\n  * @param {number=} fadeOutLimit Length of time in Seconds until the object automatically fades out.\r\n  * This occures in the requestAnimationFrame Render function.\r\n  * @param {boolean=} deleteOnEnd Option to remove the object from the document once the fade out completes.\r\n  * For garbage collection reasons, its advised to set this `true` when possible.\r\n  */\r\n  promptFader(faderObj, vis, fadeOutLimit=null, deleteOnEnd=false){\r\n    if(typeof(faderObj)==\"string\"){\r\n      faderObj=document.getElementById(faderObj);\r\n    }\r\n    if(!faderObj){\r\n      return;\r\n    }\r\n    if(faderObj.classList?.value.indexOf(\"fader\")<0){\r\n      faderObj.classList.add(\"fader\");\r\n    }\r\n    if(vis){\r\n      faderObj.style.display=\"inline-block\";\r\n      setTimeout( ()=>{\r\n                if(faderObj.classList.contains(\"visOff\")){\r\n                    faderObj.classList.remove(\"visOff\");\r\n                    faderObj.classList.add(\"visOn\");\r\n                    if(fadeOutLimit!=null){\r\n                        faderObj.setAttribute(\"fadeOut\", fadeOutLimit*1000);\r\n                        //fadeOutList.push(faderObj);\r\n                    }\r\n                }\r\n      }, 50);\r\n    }else{\r\n      faderObj.classList.remove(\"visOn\");\r\n      faderObj.classList.add(\"visOff\");\r\n      if(deleteOnEnd){\r\n        let transEnd=[\"webkitTransitionEnd\", \"otransitionend\", \"oTransitionEnd\", \"msTransitionEnd\", \"transitionend\"];\r\n        transEnd.forEach((end)=>{\r\n          faderObj.addEventListener(end,()=>{\r\n            let curParent=faderObj.parentNode;\r\n            if(curParent){\r\n              curParent.removeChild(faderObj);\r\n            }\r\n          });\r\n        });\r\n      }else{\r\n        setTimeout( ()=>{\r\n          if(faderObj.classList.contains(\"visOff\")){\r\n              faderObj.style.display=\"none\";\r\n          }\r\n        }, 1000);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // -- -- --\r\n\r\n  addRooms( roomList ){\r\n    for( let x=0; x<roomList.length; ++x ){\r\n      if( !this.pxlEnv.roomNameList.includes( roomList[x] ) ){\r\n        if(this.booted){\r\n        }else{\r\n          this.roomBootList.push( roomList[x] );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  \r\n  setBootRoom( bootRoom, bootLocation ){\r\n    this.pxlEnv.bootRoom = bootRoom;\r\n    this.pxlEnv.bootLocation = bootLocation;\r\n  }\r\n\r\n  // -- -- --\r\n  \r\n  setLoaderPhrases( phraseList ){\r\n    this.pxlGuiDraws.setLoaderPhrases( phraseList );\r\n  }\r\n  \r\n  \r\n  // -- -- --\r\n  // pxlNav Extension Functions \r\n\r\n  initExtension( extName, onFinishFn, onErrorFn ){\r\n    this.pxlExtensions.init( extName, onFinishFn, onErrorFn );\r\n  }\r\n\r\n  startExtension( extName, onFinishFn, onErrorFn ){\r\n    this.pxlExtensions.start( extName, onFinishFn, onErrorFn );\r\n  }\r\n\r\n  stopExtension( extName, onFinishFn, onErrorFn ){\r\n    this.pxlExtensions.stop( extName, onFinishFn, onErrorFn );\r\n  }\r\n\r\n  extensionStatus( extName ){\r\n    return this.pxlExtensions.status( extName );\r\n  }\r\n\r\n  // -- -- --\r\n  // Messaging Into (triggers) and Out-Of (subscriptions) the pxlNav Engine\r\n\r\n  /**\r\n   * \r\n   * @param {*} eventType \r\n   * @param {*} eventValue \r\n   * @param {*} eventObj \r\n   * @example\r\n   * pxlNav.trigger( \"warptoroom\", \"roomName\" );\r\n   * pxlNav.trigger( \"camera\", \"roam\" );\r\n   * pxlNav.trigger( \"ping\" );\r\n   * pxlNav.trigger( \"roomMessage\", *roomName*, { \"type\" : \"event\", \"value\" : \"eventValue\" } );\r\n   */\r\n  trigger( eventType, eventValue=null, eventObj=null ){\r\n    eventType = eventType.toLowerCase();\r\n    switch( eventType ){\r\n      case \"warptoroom\":\r\n        this.pxlCamera.warpToRoom( eventValue, true, eventObj );\r\n        break;\r\n      case \"camera\":\r\n        let curEventVal = eventValue.toLowerCase();\r\n        if( curEventVal == \"roam\" ){\r\n          this.pxlCamera.toggleMovement( true ); // Enable camera movement from user inputs\r\n        }else if( curEventVal == \"static\" ){\r\n          this.pxlCamera.toggleMovement( false ); // Prevent camera movement from user inputs\r\n        }\r\n        break;\r\n      case \"ping\":\r\n        this.emit(\"pingPong\", \"pong\");\r\n        break;\r\n      case \"roommessage\":\r\n        let roomEventType = eventObj[\"type\"];\r\n        let roomEventValue = eventObj[\"value\"];\r\n        if(eventValue==null){\r\n          eventValue=this.pxlEnv.currentRoom;\r\n        }\r\n        this.pxlEnv.sendRoomMessage( eventValue, roomEventType, roomEventValue );\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} eventType\r\n   * @param {*} callbackFunc \r\n   */\r\n  subscribe( eventType, callbackFunc ){\r\n    let triggerHelp = false;\r\n    if( this.validEventsKeys.includes( eventType ) ){\r\n      if( eventType == \"test\" ){\r\n        console.log(\"Test Event : `pxlNav.subscribe( 'test', ... )` was used; subscription list -\");\r\n      }else if( eventType == \"pxlNavEventNameHere\" ||  eventType == \"help\" ){\r\n        if( eventType == \"pxlNavEventNameHere\" ){\r\n          console.warn(\"Warning : `pxlNav.subscribe( 'pxlNavEventNameHere', ... )` was used; need some help?\");\r\n        }else if( eventType == \"help\" ){\r\n          console.log(\"Help Requested : `pxlNav.subscribe( 'help', ... )` was used; Subscription items--\");\r\n        }\r\n\r\n        // developer triggered the emit help event\r\n        //   Dump all the events and info!\r\n        console.log(\"Valid Event Types : \");\r\n        this.validEventsKeys.forEach( (e)=>{\r\n          console.log( \"  - \", e, \" : \", this.validEvents[e] );\r\n        });\r\n\r\n      }else{\r\n        let eventSplit = eventType.split(\"-\");\r\n        if( eventSplit[0] == \"device\" ){\r\n          this.pxlDevice.subscribe(  eventSplit[1], callbackFunc );\r\n        }else if( eventSplit[0] == \"camera\" ){\r\n          let camEventType = pxlEnums.CAMERA_EVENT.MOVE;\r\n\r\n          // Find the camera event type\r\n          switch( eventSplit[1] ){\r\n              case \"move\":\r\n                camEventType = pxlEnums.CAMERA_EVENT.MOVE;\r\n                break;\r\n              case \"rotate\":\r\n                camEventType = pxlEnums.CAMERA_EVENT.ROTATE;\r\n                break;\r\n              case \"jump\":\r\n                camEventType = pxlEnums.CAMERA_EVENT.JUMP;\r\n                break;\r\n              case \"fall\":\r\n                camEventType = pxlEnums.CAMERA_EVENT.FALL;\r\n                break;\r\n              case \"landed\":\r\n                camEventType = pxlEnums.CAMERA_EVENT.LANDED;\r\n                break;\r\n              case \"collision\":\r\n                camEventType = pxlEnums.CAMERA_EVENT.COLLISION;\r\n                break;\r\n              default:\r\n                console.warn(\"Warning : `pxlNav.subscribe( 'camera-\"+eventSplit[1]+\"', ... )` was used; use 'help' for a list of valid events.\");\r\n                break;\r\n            }\r\n\r\n          this.pxlCamera.subscribe( camEventType, callbackFunc );\r\n\r\n        }else{\r\n          if( !this.callbacks.hasOwnProperty(eventType) ){\r\n            this.callbacks[eventType] = [];\r\n          }\r\n          this.callbacks[eventType].push( callbackFunc );\r\n        }\r\n      }\r\n    }else{\r\n      console.warn(\"Warning : `pxlNav.subscribe( '\"+eventType+\"', ... )` was used; use 'help' for a list of valid events.\");  \r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   * @param {*} eventType\r\n   * @param {*} callbackFunc \r\n   */\r\n  unsubscribe( eventType, callbackFunc ){\r\n    let retValue = false;\r\n    let eventSplit = eventType.split(\"-\");\r\n    if( eventSplit[0] == \"device\" ){\r\n      retValue = this.pxlDevice.unsubscribe(  eventSplit[1], callbackFunc );\r\n    }else if( eventSplit[0] == \"camera\" ){\r\n      let camEventType = pxlEnums.CAMERA_EVENT.MOVE;\r\n\r\n      // Find the camera event type\r\n      switch( eventSplit[1] ){\r\n          case \"move\":\r\n            camEventType = pxlEnums.CAMERA_EVENT.MOVE;\r\n            break;\r\n          case \"rotate\":\r\n            camEventType = pxlEnums.CAMERA_EVENT.ROTATE;\r\n            break;\r\n          case \"jump\":\r\n            camEventType = pxlEnums.CAMERA_EVENT.JUMP;\r\n            break;\r\n          case \"fall\":\r\n            camEventType = pxlEnums.CAMERA_EVENT.FALL;\r\n            break;\r\n          case \"landed\":\r\n            camEventType = pxlEnums.CAMERA_EVENT.LANDED;\r\n            break;\r\n          case \"collision\":\r\n            camEventType = pxlEnums.CAMERA_EVENT.COLLISION;\r\n            break;\r\n          default:\r\n            console.warn(\"Warning : `pxlNav.subscribe( 'camera-\"+eventSplit[1]+\"', ... )` was used; use 'help' for a list of valid events.\");\r\n            break;\r\n        }\r\n\r\n      retValue = this.pxlCamera.unsubscribe( camEventType, callbackFunc );\r\n\r\n    }else{\r\n      if( this.callbacks.hasOwnProperty(eventType) ){\r\n        if( this.callbacks.hasOwnProperty(eventType) && this.callbacks[eventType] instanceof Array ){\r\n          retValue = this.callbacks[eventType].includes( callbackFunc );\r\n          this.callbacks[eventType] = this.callbacks[eventType].filter( cb => cb !== callbackFunc );\r\n        }else{\r\n          console.warn(\"Warning : `pxlNav.unsubscribe( '\"+eventType+\"', ... )` was used; but the callback function does not match the one used in `pxlNav.subscribe()`.\");\r\n        }\r\n      }\r\n    }\r\n    return retValue;\r\n  }\r\n\r\n\r\n  /**\r\n   *   \r\n   * @param {*} eventType\r\n   * @param {*} eventValue\r\n   * @param {*} statusValue \r\n   */\r\n\r\n  emit( eventType, eventValue, statusValue=null ){\r\n    if( this.callbacks.hasOwnProperty(eventType) ){\r\n      let msg = {\r\n        \"type\" : eventType,\r\n        \"value\" : eventValue\r\n      };\r\n      if( statusValue !== null ){\r\n        msg[\"status\"] = statusValue;\r\n      }\r\n      for( let cb of this.callbacks[eventType] ){\r\n        cb( msg );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Named exports for ESM compatibility\r\nexport { \r\n  pxlNavVersion, \r\n  pxlNav, \r\n  pxlEnums, \r\n  pxlUserSettings,\r\n  pxlOptions,\r\n  RoomEnvironment,\r\n  pxlEffects,\r\n  pxlShaders,\r\n  pxlBase\r\n};\r\n\r\n// Default export for React compatibility\r\nexport default {\r\n  pxlNavVersion, \r\n  pxlNav, \r\n  pxlEnums, \r\n  pxlUserSettings,\r\n  pxlOptions,\r\n  RoomEnvironment,\r\n  pxlEffects,\r\n  pxlShaders,\r\n  pxlBase\r\n};\r\n\r\n","\r\n// Extentions.js\r\n\r\nconst pxlAvailableEtxensions = [\r\n  \"PoseEngine\" // Face & Body Pose Estimation; AI / Computer Vision\r\n  /* -- To be converted into extensions --\r\n  \"WebCamera\", // Web Camera; Media\r\n  \"Audio\", // Audio Player; Media\r\n  \"Video\", // Video Player; Media\r\n  \"MusicUtils\", // Music Player; Utils\r\n  \"Networking\", // Server Cross-Talk; WebSocket / WebRTC\r\n  */\r\n];\r\n\r\nexport class Extensions {\r\n  constructor() {\r\n    this.plugins = {};\r\n    this.verbose = false;\r\n  }\r\n\r\n  // Use this to load and boot extensions\r\n  //   Enabling ensures assets have been fully downloaded, parsed, and init();\r\n  // Pass your `onFinishFn` as your callback function to run once extension is ready for use\r\n  init( extName, onFinishFn, onErrorFn, forceReload = false ){\r\n    if( !this.plugins[extName] || forceReload ){\r\n      this.load( extName, (err, pluginInstance) => {\r\n        if( err ){\r\n          if( onErrorFn ){\r\n            onErrorFn(err);\r\n          }else if( this.verbose ){\r\n            console.error(err);\r\n          }\r\n        }else{\r\n          if( onFinishFn ){\r\n            onFinishFn(pluginInstance);\r\n          }\r\n        }\r\n      });\r\n    }else{\r\n      if( this.verbose ){\r\n        console.log(`Extension ${extName} already booted, skipping...`);\r\n      }\r\n      if( onFinishFn ){\r\n        onFinishFn( this.plugins[extName] );\r\n      }\r\n    }\r\n  }\r\n\r\n  async load( extName, callback ){\r\n    if( pxlAvailableEtxensions.includes(extName) ){\r\n      try {\r\n        const module = await import(`./${extName}.js`);\r\n        const pluginInstance = new module.default();\r\n        try {\r\n          this.boot(extName, pluginInstance);\r\n        }catch( bootErr ){\r\n          console.error(`Error (2) Booting extension '${extName}':`, bootErr);\r\n        }\r\n        if( callback ){\r\n          callback( null, pluginInstance );\r\n        }\r\n      }catch( loadErr ){\r\n        console.error(`Error (1) Importing / Parsing extension '${extName}':`, loadErr);\r\n        if( callback ){\r\n          callback( loadErr, null );\r\n        }\r\n      }\r\n    }else{\r\n      const err = new Error(`Extension ${extName} not found`);\r\n      console.error( err );\r\n      if( callback ){\r\n        callback( err, null );\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // -- -- --\r\n  \r\n  start( name ){\r\n    let curEtx = this.get(name);\r\n    if( curEtx ){\r\n      curEtx.start();\r\n    }\r\n  }\r\n  pause( name ){\r\n    let curEtx = this.get(name);\r\n    if( curEtx ){\r\n      curEtx.pause();\r\n    }\r\n  }\r\n  stop( name ){\r\n    let curEtx = this.get(name);\r\n    if( curEtx ){\r\n      curEtx.stop();\r\n    }\r\n  }\r\n  // -- -- --\r\n\r\n  status( name ){\r\n    let curEtx = this.get(name);\r\n    if( curEtx ){\r\n      return curEtx.active;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // -- -- --\r\n  // -- -- --\r\n\r\n  boot( name, pluginInstance ){\r\n    this.plugins[name] = pluginInstance;\r\n    pluginInstance.init();\r\n  }\r\n\r\n  get( name ){\r\n    if( this.plugins[name] ){\r\n      return this.plugins[name];\r\n    }else{\r\n      console.warn(`Extension ${name} not found`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  unload( name ){\r\n    let curEtx = this.get(name);\r\n    if( curEtx ){\r\n      curEtx.destroy();\r\n      delete this.plugins[name];\r\n    }\r\n  }\r\n}","var map = {\n\t\"./ExtensionBase.js\": [\n\t\t942,\n\t\t9,\n\t\t942\n\t],\n\t\"./Extensions.js\": [\n\t\t842,\n\t\t9\n\t],\n\t\"./Networking.js\": [\n\t\t770,\n\t\t9,\n\t\t770\n\t],\n\t\"./PoseEngine.js\": [\n\t\t435,\n\t\t9,\n\t\t435\n\t],\n\t\"./PoseEngine/MediaPipe.js\": [\n\t\t800,\n\t\t9,\n\t\t800\n\t],\n\t\"./PoseEngine/PoseEngine_worker.js\": [\n\t\t78,\n\t\t7,\n\t\t78\n\t],\n\t\"./WebCam.js\": [\n\t\t777,\n\t\t9,\n\t\t777\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(2).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__.t(id, ids[1] | 16)\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 989;\nmodule.exports = webpackAsyncContext;"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","id","module","exports","t","u","d","p","v","w","M","A","T","z","C","I","B","k","E","R","P","O","F","N","L","V","W","U","j","D","H","q","J","X","nt","ht","lt","ct","dt","pt","mt","yt","ft","gt","bt","wt","Mt","_t","Tt","It","Bt","kt","Et","Rt","Pt","Ot","Ft","Vt","Wt","Dt","Ht","qt","Jt","Xt","$t","Qt","Kt","te","ee","ie","ne","oe","ae","he","de","Me","_e","Ee","Re","Pe","Oe","Fe","Ne","Ze","Ge","$e","Qe","Ke","es","fs","gs","xs","bs","vs","ws","Ms","Ss","_s","Ps","Os","Fs","Ns","addEventListener","this","_listeners","s","indexOf","push","hasEventListener","removeEventListener","splice","dispatchEvent","type","target","slice","i","length","call","Ls","Ws","Math","PI","Us","js","random","toLowerCase","Ds","max","min","Hs","qs","Js","constructor","Float32Array","Uint32Array","Uint16Array","Uint8Array","Int32Array","Int16Array","Int8Array","Xs","round","Ys","Zs","arguments","undefined","prototype","isVector2","x","y","width","height","set","setScalar","setX","setY","setComponent","getComponent","clone","copy","add","addScalar","addVectors","addScaledVector","sub","subScalar","subVectors","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","elements","clamp","clampScalar","clampLength","floor","ceil","roundToZero","trunc","negate","dot","cross","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","angleTo","acos","distanceTo","distanceToSquared","manhattanDistanceTo","setLength","lerp","lerpVectors","equals","fromArray","toArray","fromBufferAttribute","getX","getY","rotateAround","cos","sin","r","n","Symbol","iterator","Gs","o","a","h","isMatrix3","l","identity","extractBasis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","c","m","f","g","b","determinant","invert","transpose","getNormalMatrix","transposeIntoArray","setUvTransform","scale","$s","makeScale","rotate","makeRotation","translate","makeTranslation","Qs","Uint8ClampedArray","Float64Array","ei","document","createElementNS","si","style","display","ii","ri","console","warn","hi","li","ui","enabled","workingColorSpace","spaces","convert","transfer","di","primaries","toXYZ","fromXYZ","pi","fromWorkingColorSpace","toWorkingColorSpace","getPrimaries","getTransfer","getLuminanceCoefficients","luminanceCoefficients","define","Object","assign","_getMatrix","_getDrawingBufferColorSpace","outputColorSpaceConfig","drawingBufferColorSpace","_getUnpackColorSpace","workingColorSpaceConfig","unpackColorSpace","whitePoint","ci","pow","mi","yi","getDataURL","test","src","HTMLCanvasElement","getContext","ImageData","putImageData","drawImage","toDataURL","sRGBToLinear","HTMLImageElement","ImageBitmap","getImageData","data","fi","gi","isSource","defineProperty","value","uuid","dataReady","version","needsUpdate","toJSON","images","url","Array","isArray","isDataTexture","xi","image","from","name","bi","vi","DEFAULT_IMAGE","DEFAULT_MAPPING","DEFAULT_ANISOTROPY","super","isTexture","source","mipmaps","mapping","channel","wrapS","wrapT","magFilter","minFilter","anisotropy","format","internalFormat","offset","repeat","center","rotation","matrixAutoUpdate","matrix","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","colorSpace","userData","onUpdate","isRenderTargetTexture","pmremVersion","updateMatrix","JSON","parse","stringify","textures","metadata","generator","wrap","dispose","transformUv","needsPMREMUpdate","wi","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","setFromMatrixPosition","getZ","getW","Mi","isRenderTarget","depth","scissor","scissorTest","viewport","depthBuffer","stencilBuffer","resolveDepthBuffer","resolveStencilBuffer","depthTexture","samples","count","texture","setSize","Si","isWebGLRenderTarget","_i","isDataArrayTexture","wrapR","layerUpdates","Set","addLayerUpdate","clearLayerUpdates","clear","Ti","isData3DTexture","Ci","isQuaternion","_x","_y","_z","_w","slerpFlat","Number","EPSILON","multiplyQuaternionsFlat","_onChangeCallback","setFromEuler","_order","setFromAxisAngle","setFromRotationMatrix","setFromUnitVectors","rotateTowards","slerp","conjugate","multiplyQuaternions","slerpQuaternions","_onChange","Ii","isVector3","multiplyVectors","applyEuler","applyQuaternion","ki","applyAxisAngle","applyNormalMatrix","project","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","crossVectors","projectOnVector","projectOnPlane","Bi","reflect","setFromSpherical","setFromSphericalCoords","radius","phi","theta","setFromCylindrical","setFromCylindricalCoords","setFromMatrixScale","setFromMatrixColumn","setFromColor","randomDirection","Ei","isBox3","setFromArray","makeEmpty","expandByPoint","Pi","setFromBufferAttribute","setFromPoints","setFromCenterAndSize","setFromObject","expandByObject","isEmpty","getCenter","getSize","expandByVector","expandByScalar","updateWorldMatrix","geometry","getAttribute","isInstancedMesh","isMesh","getVertexPosition","boundingBox","computeBoundingBox","Oi","union","children","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","clampPoint","intersectsPlane","normal","constant","intersectsTriangle","ji","Di","Fi","Ni","Li","Vi","Wi","Ui","Ji","Hi","distanceToPoint","getBoundingSphere","intersect","Ri","qi","Xi","Yi","Zi","Gi","isSphere","getBoundingBox","getMaxScaleOnAxis","$i","Qi","Ki","tr","er","sr","ir","rr","origin","direction","at","lookAt","recast","closestPointToPoint","distanceSqToPoint","distanceSqToSegment","intersectSphere","distanceToPlane","intersectPlane","intersectBox","isNaN","intersectTriangle","nr","isMatrix4","copyPosition","setFromMatrix3","makeBasis","extractRotation","or","makeRotationFromEuler","order","makeRotationFromQuaternion","compose","hr","lr","dr","cr","ur","S","_","setPosition","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeShear","decompose","ar","makePerspective","makeOrthographic","pr","mr","yr","DEFAULT_ORDER","isEuler","asin","setFromQuaternion","setFromVector3","reorder","fr","mask","enable","enableAll","toggle","disable","disableAll","isEnabled","gr","xr","br","vr","wr","Mr","Sr","_r","Ar","Tr","zr","Cr","Ir","Br","child","kr","Er","isObject3D","parent","up","DEFAULT_UP","defineProperties","position","configurable","enumerable","quaternion","modelViewMatrix","normalMatrix","DEFAULT_MATRIX_AUTO_UPDATE","matrixWorldAutoUpdate","DEFAULT_MATRIX_WORLD_AUTO_UPDATE","matrixWorldNeedsUpdate","layers","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","onBeforeShadow","onAfterShadow","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","isLight","error","removeFromParent","remove","attach","getObjectById","getObjectByProperty","getObjectByName","getObjectsByProperty","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","updateMatrixWorld","geometries","materials","shapes","skeletons","nodes","instanceMatrix","instanceColor","isBatchedMesh","perObjectFrustumCulled","sortObjects","drawRanges","_drawRanges","reservedRanges","_reservedRanges","visibility","_visibility","active","_active","bounds","_bounds","map","boxInitialized","boxMin","box","boxMax","sphereInitialized","sphereRadius","sphere","sphereCenter","maxInstanceCount","_maxInstanceCount","maxVertexCount","_maxVertexCount","maxIndexCount","_maxIndexCount","geometryInitialized","_geometryInitialized","geometryCount","_geometryCount","matricesTexture","_matricesTexture","_colorsTexture","colorsTexture","boundingSphere","isScene","background","isColor","environment","isLine","isPoints","parameters","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","object","Rr","Pr","Or","Fr","Nr","Lr","Vr","Wr","Ur","jr","Dr","Hr","qr","Jr","getNormal","getBarycoord","getInterpolation","getInterpolatedAttribute","isFrontFacing","setFromPointsAndIndices","setFromAttributeAndIndices","getArea","getMidpoint","getPlane","setFromCoplanarPoints","Xr","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Yr","Zr","Gr","$r","setHex","setStyle","setRGB","setHSL","parseFloat","exec","parseInt","charAt","setColorName","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","Qr","getHexString","toString","getHSL","getRGB","getStyle","toFixed","offsetHSL","addColors","lerpColors","lerpHSL","NAMES","Kr","tn","isMaterial","blending","side","vertexColors","opacity","transparent","alphaHash","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","blendColor","blendAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaToCoverage","premultipliedAlpha","forceSinglePass","toneMapped","_alphaTest","alphaTest","onBeforeCompile","customProgramCacheKey","setValues","color","roughness","metalness","sheen","sheenColor","sheenRoughness","emissive","emissiveIntensity","specular","specularIntensity","specularColor","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","dispersion","iridescence","iridescenceIOR","iridescenceThicknessRange","iridescenceMap","iridescenceThicknessMap","anisotropyRotation","anisotropyMap","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","specularIntensityMap","specularColorMap","envMap","combine","envMapRotation","envMapIntensity","reflectivity","refractionRatio","gradientMap","transmission","transmissionMap","thickness","thicknessMap","attenuationDistance","attenuationColor","size","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","flatShading","fog","onBuild","en","isMeshBasicMaterial","ArrayBuffer","rn","hn","ln","cn","TypeError","isBufferAttribute","array","itemSize","normalized","usage","updateRanges","gpuType","onUploadCallback","setUsage","addUpdateRange","start","clearUpdateRanges","copyAt","copyArray","setXY","setXYZ","setXYZW","onUpload","yn","gn","bn","vn","wn","Mn","Sn","_n","An","Tn","zn","isBufferGeometry","index","indirect","attributes","morphAttributes","morphTargetsRelative","groups","drawRange","getIndex","setIndex","setIndirect","getIndirect","setAttribute","deleteAttribute","hasAttribute","addGroup","materialIndex","clearGroups","setDrawRange","tangent","computeBoundingSphere","isGLBufferAttribute","computeTangents","uv","isFinite","computeVertexNormals","normalizeNormals","toNonIndexed","isInterleavedBufferAttribute","stride","Cn","In","Bn","kn","En","Rn","Pn","On","Fn","Nn","Ln","Vn","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","String","ray","near","far","_computeIntersections","uv1","Wn","faceIndex","face","distance","point","barycoord","Un","widthSegments","heightSegments","depthSegments","fromJSON","jn","Dn","Hn","getRenderTarget","outputColorSpace","isXRRenderTarget","qn","merge","Jn","isShaderMaterial","defines","uniforms","uniformsGroups","vertexShader","fragmentShader","lights","clipping","extensions","clipCullDistance","multiDraw","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","Xn","coordinateSystem","Yn","Zn","Gn","$n","isPerspectiveCamera","fov","zoom","focus","aspect","view","filmGauge","filmOffset","updateProjectionMatrix","setFocalLength","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","getViewBounds","getViewSize","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","Qn","Kn","renderTarget","activeMipmapLevel","updateCoordinateSystem","concat","update","getActiveCubeFace","getActiveMipmapLevel","setRenderTarget","render","to","isCubeTexture","eo","isWebGLCubeRenderTarget","fromEquirectangularTexture","tEquirect","so","isFogExp2","density","ro","backgroundBlurriness","backgroundIntensity","backgroundRotation","environmentIntensity","environmentRotation","overrideMaterial","__THREE_DEVTOOLS__","CustomEvent","detail","no","isInterleavedBuffer","arrayBuffers","buffer","_uuid","oo","ao","log","interleavedBuffers","Co","Io","Bo","ko","Eo","Ro","Po","Oo","Fo","No","bindMatrixInverse","applyBoneTransform","bind","calculateInverses","pose","normalizeSkinWeights","skinWeight","skinIndex","bones","boneInverses","Lo","isBone","Vo","Wo","Uo","jo","boneMatrices","boneTexture","init","computeBoneTexture","getBoneByName","Do","isInstancedBufferAttribute","meshPerAttribute","Ho","qo","Jo","Xo","Yo","Zo","Go","$o","morphTexture","setMatrixAt","getMatrixAt","getColorAt","getMorphAt","instanceId","setColorAt","fill","setMorphAt","Qo","Ko","ta","ea","isPlane","setComponents","setFromNormalAndCoplanarPoint","distanceToSphere","projectPoint","intersectLine","delta","intersectsLine","end","coplanarPoint","sa","ia","ra","planes","setFromProjectionMatrix","intersectsObject","intersectsSprite","pool","list","reset","Sa","isLineBasicMaterial","linecap","linejoin","_a","Aa","Ta","za","Ca","Ia","Ba","ka","computeLineDistances","params","Line","threshold","isLineSegments","Ea","isLineLoop","Ra","Pa","Oa","Fa","Na","isPointsMaterial","La","Va","Wa","Ua","ja","Points","Da","distanceToRay","Ha","isGroup","qa","isVideoTexture","requestVideoFrameCallback","readyState","HAVE_CURRENT_DATA","Xa","isCompressedTexture","Ya","isCompressedArrayTexture","Za","isCompressedCubeTexture","Ga","isCanvasTexture","$a","isDepthTexture","compareFunction","Qa","arcLengthDivisions","getPoint","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","getLength","getLengths","cacheArcLengths","updateArcLengths","getTangent","getTangentAt","computeFrenetFrames","MAX_VALUE","tangents","normals","binormals","Ka","isEllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","eh","initCatmullRom","initNonuniformCatmullRom","calc","sh","ih","rh","nh","ah","hh","lh","ch","isCubicBezierCurve","v0","v1","v2","v3","dh","isLineCurve","mh","isQuadraticBezierCurve","yh","isQuadraticBezierCurve3","fh","isSplineCurve","points","gh","freeze","__proto__","ArcCurve","isArcCurve","CatmullRomCurve3","isCatmullRomCurve3","closed","curveType","tension","CubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","EllipseCurve","LineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","xh","curves","autoClose","closePath","getCurveLengths","cacheLengths","bh","currentPoint","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","splineThru","arc","absarc","absellipse","ellipse","vh","segments","phiStart","phiLength","wh","capSegments","radialSegments","Mh","thetaStart","thetaLength","Sh","radiusTop","radiusBottom","openEnded","_h","Ah","vertices","indices","details","Th","zh","Ch","Ih","Bh","Eh","holes","getPointsHoles","extractPoints","shape","Ph","el","Zh","next","sl","Oh","steiner","Yh","prev","Fh","Hh","prevZ","nextZ","Lh","Nh","Vh","Wh","Jh","Gh","Kh","Xh","tl","Uh","jh","Dh","qh","Qh","$h","il","rl","area","isClockWise","triangulateShape","nl","ol","forEach","sort","Rh","pop","al","options","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","UVGenerator","hl","reverse","sign","generateTopUV","generateSideWallUV","ll","cl","ul","dl","innerRadius","outerRadius","thetaSegments","phiSegments","pl","ml","yl","fl","tube","tubularSegments","gl","xl","path","vl","has","BoxGeometry","CapsuleGeometry","CircleGeometry","ConeGeometry","CylinderGeometry","DodecahedronGeometry","EdgesGeometry","thresholdAngle","index0","index1","ExtrudeGeometry","IcosahedronGeometry","LatheGeometry","OctahedronGeometry","PlaneGeometry","PolyhedronGeometry","RingGeometry","ShapeGeometry","SphereGeometry","TetrahedronGeometry","TorusGeometry","TorusKnotGeometry","TubeGeometry","WireframeGeometry","_l","isMeshStandardMaterial","STANDARD","Al","isMeshPhysicalMaterial","PHYSICAL","ior","get","sheenColorMap","sheenRoughnessMap","_anisotropy","_clearcoat","_dispersion","_iridescence","_sheen","_transmission","Tl","isMeshPhongMaterial","Il","isMeshLambertMaterial","Bl","isMeshDepthMaterial","depthPacking","kl","isMeshDistanceMaterial","Pl","BYTES_PER_ELEMENT","Ol","isView","DataView","Fl","Nl","Ll","time","apply","Wl","parameterPositions","_cachedIndex","resultBuffer","sampleValues","valueSize","settings","DefaultSettings_","evaluate","copySampleValue_","intervalChanged_","interpolate_","getSettings_","Ul","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","jl","Dl","Hl","times","TimeBufferType","values","ValueBufferType","setInterpolation","DefaultInterpolation","interpolation","ValueTypeName","InterpolantFactoryMethodDiscrete","getValueSize","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","createInterpolant","shift","trim","validate","optimize","ql","Jl","Xl","Yl","Zl","Gl","$l","Ql","tracks","duration","blendMode","resetDuration","fps","Kl","CreateFromMorphTargetSequence","findByName","CreateClipsFromMorphTargetSequences","match","parseAnimation","hierarchy","morphTargets","morphTarget","tc","files","ec","onStart","onLoad","onProgress","onError","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","removeHandler","getHandler","global","lastIndex","sc","ic","manager","crossOrigin","withCredentials","resourcePath","requestHeader","load","loadAsync","setCrossOrigin","setWithCredentials","setPath","setResourcePath","setRequestHeader","DEFAULT_MATERIAL_NAME","rc","nc","response","oc","setTimeout","Request","headers","Headers","credentials","mimeType","responseType","fetch","status","ReadableStream","body","getReader","read","_ref","done","close","byteLength","ProgressEvent","lengthComputable","loaded","total","enqueue","Response","statusText","arrayBuffer","blob","text","DOMParser","parseFromString","json","TextDecoder","decode","catch","finally","setResponseType","setMimeType","lc","dc","pc","intensity","groundColor","decay","penumbra","shadow","yc","fc","gc","xc","camera","bias","normalBias","blurSamples","mapSize","mapPass","autoUpdate","_frustum","_frameExtents","_viewportCount","_viewports","getViewportCount","getFrustum","updateMatrices","getViewport","getFrameExtents","bc","isSpotLightShadow","vc","isSpotLight","power","wc","Mc","Sc","_c","isPointLightShadow","_cubeDirections","_cubeUps","Ac","isPointLight","Tc","isOrthographicCamera","left","right","top","bottom","zc","isDirectionalLightShadow","Cc","isDirectionalLight","Ic","isAmbientLight","Pc","decodeText","fromCharCode","decodeURIComponent","escape","extractUrlBase","lastIndexOf","replace","Uc","isImageBitmapLoader","createImageBitmap","setOptions","colorSpaceConversion","Zc","isArrayCamera","cameras","Gc","autoStart","startTime","oldTime","elapsedTime","running","$c","stop","getElapsedTime","getDelta","performance","now","cu","binding","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accumulate","accumulateAdditive","setValue","saveOriginalState","getValue","restoreOriginalState","uu","du","RegExp","pu","mu","yu","fu","gu","parsedPath","parseTrackName","node","findNode","nodeName","rootNode","_getValue_unbound","_setValue_unbound","create","isAnimationObjectGroup","Composite","sanitizeNodeName","objectName","objectIndex","propertyName","propertyIndex","substring","_getValue_unavailable","_setValue_unavailable","_getValue_direct","targetObject","_getValue_array","resolvedProperty","_getValue_arrayElement","_getValue_toArray","_setValue_direct","_setValue_direct_setNeedsUpdate","_setValue_direct_setMatrixWorldNeedsUpdate","_setValue_array","_setValue_array_setNeedsUpdate","_setValue_array_setMatrixWorldNeedsUpdate","_setValue_arrayElement","_setValue_arrayElement_setNeedsUpdate","_setValue_arrayElement_setMatrixWorldNeedsUpdate","_setValue_fromArray","_setValue_fromArray_setNeedsUpdate","_setValue_fromArray_setMatrixWorldNeedsUpdate","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","BindingType","Direct","ArrayElement","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","unbind","_targetGroup","_bindings","subscribe_","nCachedObjects_","bu","_mixer","_clip","_localRoot","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","timeScale","_effectiveTimeScale","weight","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","warp","crossFadeTo","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","_lendControlInterpolant","getMixer","getClip","getRoot","_root","_update","_updateWeight","_updateTimeScale","_updateTime","_setEndings","action","loopDelta","vu","wu","_initMemoryManager","_accuIndex","_bindAction","_bindingsByRootAndName","_addInactiveBinding","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","stats","actions","inUse","bindings","controlInterpolants","actionByRoot","_removeInactiveAction","_removeInactiveBindingsForAction","_removeInactiveBinding","__cacheIndex","clipAction","existingAction","stopAllAction","setTime","uncacheClip","uncacheRoot","uncacheAction","xd","components","requestAnimationFrame","cancelAnimationFrame","setAnimationLoop","setContext","WeakMap","deleteBuffer","delete","bytesPerElement","elementSize","createBuffer","bindBuffer","bufferData","FLOAT","isFloat16BufferAttribute","HALF_FLOAT","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","bufferSubData","revision","window","__THREE__","alphahash_fragment","alphahash_pars_fragment","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","alphatest_pars_fragment","aomap_fragment","aomap_pars_fragment","batching_pars_vertex","batching_vertex","begin_vertex","beginnormal_vertex","bsdfs","iridescence_fragment","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","colorspace_fragment","colorspace_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_pars_fragment","lights_lambert_fragment","lights_lambert_pars_fragment","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphinstance_vertex","morphcolor_vertex","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normal_pars_fragment","normal_pars_vertex","normal_vertex","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","iridescence_pars_fragment","opaque_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","worldpos_vertex","background_vert","background_frag","backgroundCube_vert","backgroundCube_frag","cube_vert","cube_frag","depth_vert","depth_frag","distanceRGBA_vert","distanceRGBA_frag","equirect_vert","equirect_frag","linedashed_vert","linedashed_frag","meshbasic_vert","meshbasic_frag","meshlambert_vert","meshlambert_frag","meshmatcap_vert","meshmatcap_frag","meshnormal_vert","meshnormal_frag","meshphong_vert","meshphong_frag","meshphysical_vert","meshphysical_frag","meshtoon_vert","meshtoon_frag","points_vert","points_frag","shadow_vert","shadow_frag","sprite_vert","sprite_frag","diffuse","mapTransform","alphaMapTransform","specularmap","specularMapTransform","envmap","flipEnvMap","aomap","aoMapTransform","lightmap","lightMapTransform","bumpmap","bumpMapTransform","normalmap","normalMapTransform","displacementmap","displacementMapTransform","emissivemap","emissiveMapTransform","metalnessmap","metalnessMapTransform","roughnessmap","roughnessMapTransform","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowIntensity","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","spotLightShadows","spotLightMap","spotShadowMap","spotLightMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","rectAreaLights","ltc_1","ltc_2","uvTransform","sprite","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","backgroundCube","cube","tCube","tFlip","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","physical","clearcoatMapTransform","clearcoatNormalMapTransform","clearcoatRoughnessMapTransform","iridescenceMapTransform","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessMapTransform","sheenColorMapTransform","sheenRoughnessMapTransform","transmissionMapTransform","transmissionSamplerSize","transmissionSamplerMap","thicknessMapTransform","specularColorMapTransform","specularIntensityMapTransform","anisotropyVector","anisotropyMapTransform","buffers","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","getEnvironmentBlendMode","autoClear","setTest","setMask","autoClearColor","autoClearDepth","autoClearStencil","addToRenderList","toneMapping","unshift","MAX_VERTEX_ATTRIBS","bindVertexArray","deleteVertexArray","program","newAttributes","enabledAttributes","attributeDivisors","enableVertexAttribArray","vertexAttribDivisor","disableVertexAttribArray","vertexAttribIPointer","vertexAttribPointer","setup","createVertexArray","getAttributes","location","attribute","attributesNum","ELEMENT_ARRAY_BUFFER","isInstancedInterleavedBuffer","locationSize","ARRAY_BUFFER","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","resetDefaultState","releaseStatesOfGeometry","releaseStatesOfProgram","initAttributes","enableAttribute","disableUnusedAttributes","drawArraysInstanced","setMode","drawArrays","renderInstances","renderMultiDraw","multiDrawArraysWEBGL","renderMultiDrawInstances","multiDrawArraysInstancedWEBGL","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","logarithmicDepthBuffer","reverseDepthBuffer","MAX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","isWebGL2","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","textureFormatReadable","IMPLEMENTATION_COLOR_READ_FORMAT","textureTypeReadable","IMPLEMENTATION_COLOR_READ_TYPE","maxTextures","maxVertexTextures","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","maxSamples","MAX_SAMPLES","numPlanes","numIntersection","uniform","beginShadows","endShadows","setGlobalState","setState","clippingState","_renderer","_pingPongRenderTarget","_lodMax","_cubeSize","_lodPlanes","_sizeLods","_sigmas","_blurMaterial","_cubemapMaterial","_equirectMaterial","_compileMaterial","fromScene","_setSize","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","fromEquirectangular","_fromTexture","fromCubemap","compileCubemapShader","compileEquirectangularShader","_dispose","log2","ni","_textureToCubeUV","ti","sizeLods","lodPlanes","sigmas","CUBEUV_TEXEL_WIDTH","CUBEUV_TEXEL_HEIGHT","CUBEUV_MAX_MIP","weights","latitudinal","dTheta","mipInt","poleAxis","compile","_halfBlur","exp","oi","getExtension","isInstancedBufferGeometry","memory","G","getWireframeAttribute","drawElementsInstanced","drawElements","multiDrawElementsWEBGL","multiDrawElementsInstancedWEBGL","frame","calls","triangles","lines","programs","autoReset","TRIANGLES","LINES","LINE_STRIP","LINE_LOOP","POINTS","getUniforms","Y","K","Ai","allocateTextureUnit","cache","uniform1f","addr","uniform2f","uniform2fv","uniform3f","uniform3fv","uniform4f","uniform4fv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1i","uniform2i","uniform2iv","uniform3i","uniform3iv","uniform4i","uniform4iv","uniform1ui","uniform2ui","uniform2uiv","uniform3ui","uniform3uiv","uniform4ui","uniform4uiv","zi","SAMPLER_2D_SHADOW","setTexture2D","setTexture3D","setTextureCube","setTexture2DArray","uniform1fv","uniform1iv","uniform1uiv","seq","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","toUpperCase","split","join","getShaderSource","se","numSpotLightShadows","numSpotLightMaps","numSpotLightShadowsWithMaps","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numPointLightShadows","numClippingPlanes","numClipIntersection","Map","shadowMapType","envMapMode","envMapCubeUVHeight","texelWidth","texelHeight","maxMip","extensionClipCullDistance","extensionMultiDraw","filter","createProgram","isRawShaderMaterial","shaderType","shaderName","batching","batchingColor","instancing","instancingColor","instancingMorph","useFog","fogExp2","normalMapObjectSpace","normalMapTangentSpace","mapUv","alphaMapUv","lightMapUv","aoMapUv","emissiveMapUv","bumpMapUv","normalMapUv","displacementMapUv","metalnessMapUv","roughnessMapUv","anisotropyMapUv","clearcoatMapUv","clearcoatNormalMapUv","clearcoatRoughnessMapUv","iridescenceMapUv","iridescenceThicknessMapUv","sheenColorMapUv","sheenRoughnessMapUv","specularMapUv","specularColorMapUv","specularIntensityMapUv","transmissionMapUv","thicknessMapUv","vertexTangents","vertexAlphas","vertexUv1s","vertexUv2s","vertexUv3s","pointsUvs","skinning","morphNormals","morphColors","morphTargetsCount","morphTextureStride","doubleSided","flipSided","shadowMapEnabled","numLightProbes","decodeVideoTexture","decodeVideoTextureEmissive","opaque","useDepthPacking","Z","debug","checkShaderErrors","getProgramInfoLog","LINK_STATUS","onShaderError","getError","VALIDATE_STATUS","diagnostics","runnable","programLog","prefix","deleteShader","ACTIVE_ATTRIBUTES","getActiveAttrib","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","getAttribLocation","attachShader","bindAttribLocation","linkProgram","rendererExtensionParallelShaderCompile","isReady","destroy","deleteProgram","cacheKey","usedTimes","shaderCache","materialCache","_getShaderStage","_getShaderCacheForMaterial","getVertexShaderID","getFragmentShaderID","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","getParameters","state","getReversed","$","Q","re","le","ce","ge","ve","Se","Te","xe","Ae","be","Ce","shaderID","customVertexShaderID","customFragmentShaderID","supportsVertexTextures","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","morphAttributeCount","acquireProgram","releaseProgram","releaseShaderCache","groupOrder","group","transmissive","finish","halfWidth","halfHeight","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","numSpotMaps","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","isLightProbe","coefficients","isRectAreaLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","lightsArray","shadowsArray","transmissionRenderTarget","setupLights","setupLightsView","pushLight","pushShadow","me","VSM_SAMPLES","shadow_pass","resolution","HORIZONTAL_PASS","renderBufferDirect","customDistanceMaterial","customDepthMaterial","localClippingEnabled","light","setBlending","setScissorTest","et","Je","tt","na","colorMask","setLocked","clearColor","setReversed","clipControlEXT","LOWER_LEFT_EXT","ZERO_TO_ONE_EXT","NEGATIVE_ONE_TO_ONE_EXT","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","STENCIL_TEST","stencilMask","setOp","stencilOp","clearStencil","MAX_COMBINED_TEXTURE_IMAGE_UNITS","VERSION","SCISSOR_BOX","VIEWPORT","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_3D","TEXTURE_2D_ARRAY","texImage3D","RGBA","texImage2D","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","CULL_FACE","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","ZERO","ONE","Le","SRC_COLOR","SRC_ALPHA","Ue","SRC_ALPHA_SATURATE","we","DST_COLOR","De","DST_ALPHA","ye","ONE_MINUS_SRC_COLOR","Ie","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_DST_ALPHA","CONSTANT_COLOR","Be","ONE_MINUS_CONSTANT_COLOR","He","CONSTANT_ALPHA","ONE_MINUS_CONSTANT_ALPHA","BLEND","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","POLYGON_OFFSET_FILL","stencil","bindFramebuffer","DRAW_FRAMEBUFFER","FRAMEBUFFER","drawBuffers","COLOR_ATTACHMENT0","useProgram","setMaterial","SAMPLE_ALPHA_TO_COVERAGE","setFlipSided","setCullFace","setLineWidth","lineWidth","setPolygonOffset","SCISSOR_TEST","activeTexture","TEXTURE0","unbindTexture","compressedTexImage2D","compressedTexImage3D","updateUBOMapping","getUniformBlockIndex","uniformBlockBinding","__bindingPointIndex","texStorage2D","texStorage3D","texSubImage2D","texSubImage3D","compressedTexSubImage2D","compressedTexSubImage3D","KEEP","READ_FRAMEBUFFER","canvas","navigator","userAgent","OffscreenCanvas","VideoFrame","generateMipmap","isWebGL3DRenderTarget","isWebGLArrayRenderTarget","RED","R32F","R16F","R8","RED_INTEGER","R8UI","R16UI","R32UI","R8I","R16I","R32I","RG","RG32F","RG16F","RG8","RG_INTEGER","RG8UI","RG16UI","RG32UI","RG8I","RG16I","RG32I","RGB_INTEGER","RGB8UI","RGB16UI","RGB32UI","RGB8I","RGB16I","RGB32I","RGBA_INTEGER","RGBA8UI","RGBA16UI","RGBA32UI","RGBA8I","RGBA16I","RGBA32I","RGB","UNSIGNED_INT_5_9_9_9_REV","RGB9_E5","RGBA32F","RGBA16F","SRGB8_ALPHA8","RGBA8","UNSIGNED_SHORT_4_4_4_4","RGBA4","UNSIGNED_SHORT_5_5_5_1","RGB5_A1","St","DEPTH24_STENCIL8","DEPTH32F_STENCIL8","DEPTH_COMPONENT24","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","isFramebufferTexture","__webglInit","__cacheKey","__webglFramebuffer","deleteFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","__webglTexture","deleteTexture","__version","complete","it","REPEAT","rt","CLAMP_TO_EDGE","MIRRORED_REPEAT","ot","NEAREST_MIPMAP_NEAREST","st","NEAREST_MIPMAP_LINEAR","LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","ut","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_WRAP_R","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","TEXTURE_COMPARE_FUNC","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","NONE","BROWSER_DEFAULT_WEBGL","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","UNPACK_COLORSPACE_CONVERSION_WEBGL","vt","subarray","__renderTarget","__hasExternalTextures","framebufferTexture2DMultisampleEXT","TEXTURE_CUBE_MAP_NEGATIVE_Z","framebufferTexture2D","bindRenderbuffer","RENDERBUFFER","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","renderbufferStorageMultisampleEXT","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","__boundDepthTexture","__depthDisposeCallback","__autoAllocateDepthBuffer","xt","createRenderbuffer","__useRenderToTexture","naturalWidth","naturalHeight","displayWidth","displayHeight","resetTextureUnits","rebindTextures","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","blitFramebuffer","invalidateFramebuffer","setupDepthRenderbuffer","setupFrameBufferTexture","useMultisampledRTT","At","ALPHA","LUMINANCE","LUMINANCE_ALPHA","DEPTH_COMPONENT","DEPTH_STENCIL","Nt","Gt","zt","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","jt","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGBA8_ETC2_EAC","Zt","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR","COMPRESSED_RGBA_ASTC_5x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","COMPRESSED_RGBA_ASTC_5x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","COMPRESSED_RGBA_ASTC_6x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","COMPRESSED_RGBA_ASTC_6x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","COMPRESSED_RGBA_ASTC_8x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","COMPRESSED_RGBA_ASTC_8x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","COMPRESSED_RGBA_ASTC_8x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","COMPRESSED_RGBA_ASTC_10x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","COMPRESSED_RGBA_ASTC_10x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","COMPRESSED_RGBA_ASTC_10x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","COMPRESSED_RGBA_ASTC_10x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","COMPRESSED_RGBA_ASTC_12x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","COMPRESSED_RGBA_ASTC_12x12_KHR","un","pn","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_RGBA_BPTC_UNORM_EXT","COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT","COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT","COMPRESSED_RED_RGTC1_EXT","COMPRESSED_SIGNED_RED_RGTC1_EXT","COMPRESSED_RED_GREEN_RGTC2_EXT","COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT","UNSIGNED_INT_24_8","aa","oa","_targetRay","_grip","_hand","getHandSpace","joints","inputState","pinching","getTargetRaySpace","hasLinearVelocity","linearVelocity","hasAngularVelocity","angularVelocity","getGripSpace","connect","hand","_getHandJoint","disconnect","session","visibilityState","getJointPose","transform","jointRadius","handedness","gripSpace","getPose","targetRaySpace","jointName","mesh","depthNear","depthFar","getMesh","depthColor","depthWidth","depthHeight","getDepthTexture","la","getContextAttributes","inputSource","isPresenting","setPixelRatio","removed","added","cameraAutoUpdate","getController","getControllerGrip","getHand","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setReferenceSpace","getBaseLayer","getBinding","getFrame","getSession","setSession","async","xrCompatible","makeXRCompatible","getPixelRatio","renderState","antialias","alpha","framebufferScaleFactor","XRWebGLLayer","updateRenderState","baseLayer","framebufferWidth","framebufferHeight","colorFormat","depthFormat","scaleFactor","XRWebGLBinding","createProjectionLayer","textureWidth","textureHeight","ignoreDepthValues","setFoveation","requestReferenceSpace","environmentBlendMode","updateCamera","getCamera","getFoveation","fixedFoveation","hasDepthSensing","getDepthSensingMesh","getViewerPose","views","setRenderTargetFramebuffer","framebuffer","getViewSubImage","setRenderTargetTextures","colorTexture","depthStencilTexture","enabledFeatures","includes","getDepthInformation","isValid","detectedPlanes","ca","da","ua","refreshFogUniforms","isFog","refreshMaterialUniforms","isMeshToonMaterial","isMeshMatcapMaterial","isMeshNormalMaterial","isLineDashedMaterial","isSpriteMaterial","isShadowMaterial","fa","MAX_UNIFORM_BUFFER_BINDINGS","boundary","storage","__data","__offset","__size","__cache","UNIFORM_BUFFER","bindBufferBase","pa","context","preserveDrawingBuffer","powerPreference","failIfMajorPerformanceCaveat","isWebGLRenderer","WebGLRenderingContext","domElement","_outputColorSpace","xn","toneMappingExposure","ue","fe","pe","message","capabilities","renderLists","info","preventDefault","statusMessage","Ve","ze","forceContextLoss","loseContext","forceContextRestore","restoreContext","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","setOpaqueSort","setTransparentSort","clearBufferuiv","COLOR","clearBufferiv","We","Xe","Ye","needsLights","lightsStateVersion","currentProgram","cameraPosition","LN2","_indirectTexture","isMeshGouraudMaterial","isSprite","_multiDrawInstances","_multiDrawStarts","_multiDrawCounts","_multiDrawCount","instanceCount","compileAsync","ke","je","isLOD","qe","uniformsList","self","__useDefaultFramebuffer","framebufferTextureLayer","readRenderTargetPixels","readPixels","readRenderTargetPixelsAsync","PIXEL_PACK_BUFFER","STREAM_READ","fenceSync","SYNC_GPU_COMMANDS_COMPLETE","flush","clientWaitSync","SYNC_FLUSH_COMMANDS_BIT","WAIT_FAILED","TIMEOUT_EXPIRED","getBufferSubData","deleteSync","copyFramebufferToTexture","copyTexSubImage2D","copyTextureToTexture","UNPACK_ROW_LENGTH","UNPACK_IMAGE_HEIGHT","UNPACK_SKIP_PIXELS","UNPACK_SKIP_ROWS","UNPACK_SKIP_IMAGES","copyTexSubImage3D","copyTextureToTexture3D","initRenderTarget","initTexture","resetState","drawingBufferColorspace","u8","u16","i32","fleb","fdeb","clim","freb","eb","revfl","_b","fd","rev","hMap","cd","mb","co","rvb","sv","r_1","flt","fdt","flrm","fdrm","bits","bits16","shft","slc","err","ind","msg","captureStackTrace","inflt","dat","buf","dict","noBuf","resize","noSt","cbuf","bl","nbuf","final","pos","lm","dm","lbt","dbt","tbts","hLit","hcLen","ldt","clt","clb","clbmsk","clm","lms","dms","lpos","sym","dsym","dend","zls","unzlibSync","opts","dictionary","out","td","stream","queueMicrotask","findSpan","low","high","mid","calcBasisFunctions","span","saved","rv","lv","temp","calcKoverI","nom","denom","calcNURBSDerivatives","nd","Pders","CK","nders","zeroArr","ders","ndu","s1","s2","rk","pk","j2","calcBasisFunctionDerivatives","Pw","Vector4","calcBSplineDerivatives","Aders","wders","Vector3","calcRationalCurveDerivatives","NURBSCurve","Curve","degree","knots","controlPoints","startKnot","endKnot","knotsLength","pointsLength","hpoint","Nj","wNj","NURBSUtils","fbxTree","connections","sceneGraph","FBXLoader","Loader","scope","LoaderUtils","loader","FileLoader","FBXBuffer","CORRECT","convertArrayBufferToString","isFbxFormatBinary","BinaryParser","FBXText","cursor","result","isFbxFormatASCII","getFbxVersion","TextParser","textureLoader","TextureLoader","FBXTreeParser","parseConnections","parseImages","parseTextures","parseMaterials","deformers","parseDeformers","geometryMap","GeometryParser","parseScene","connectionMap","Connections","rawConnection","fromID","toID","relationship","parents","parentRelationship","ID","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","base64Content","parseImage","filename","content","fileName","extension","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","RepeatWrapping","ClampToEdgeWrapping","Scaling","Translation","nonNativeExtensions","FileName","loaderPath","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parseParameters","BumpFactor","Diffuse","Color","DiffuseColor","DisplacementFactor","Emissive","EmissiveColor","EmissiveFactor","TransparencyFactor","Opacity","TransparentColor","ReflectionFactor","Shininess","Specular","SpecularColor","getTexture","EquirectangularReflectionMapping","LayeredTexture","DeformerNodes","Deformer","deformerNode","relationships","attrType","parseSkeleton","geometryID","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","transformLink","Matrix4","TransformLink","Indexes","Weights","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","Group","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","connection","bindSkeleton","addGlobalSceneSettings","transformData","parentMatrix","parentMatrixWorld","generateTransform","AnimationParser","standardAttributes","buildSkeleton","createCamera","createLight","createMesh","createCurve","Bone","PropertyBinding","originalName","attr","getTransformData","bone","subBone","cameraAttribute","NodeAttribute","Object3D","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","innerWidth","innerHeight","AspectWidth","AspectHeight","FieldOfView","focalLength","FocalLength","PerspectiveCamera","lightAttribute","LightType","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","PointLight","DirectionalLight","InnerAngle","MathUtils","OuterAngle","SpotLight","CastShadows","FBX_Deformer","SkinnedMesh","Mesh","reduce","geo","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","Lcl_Rotation","postRotation","PostRotation","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","bindMatrices","parsePoseNodes","geoConnParent","Skeleton","BindPoseNode","Pose","NbPoseNodes","poseNodes","PoseNode","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","AmbientLight","unitScaleFactor","UnitScaleFactor","negativeMaterialIndices","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","BufferGeometry","geoInfo","parseGeoNode","genBuffers","positionAttribute","Float32BufferAttribute","vertex","colors","Uint16BufferAttribute","weightsIndices","vertexWeights","Matrix3","normalAttribute","uvs","uvBuffer","mappingType","prevMaterialIndex","startIndex","currentIndex","lastGroup","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","UV","parseUVs","weightTable","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","getNormalNewell","current","getNormalTangentAndBitangent","normalVector","bitangent","flattenVertex","normalTangent","normalBitangent","Vector2","positions","baseVertexPositions","triangulationInput","ShapeUtils","i0","i1","i2","parentGeo","parentGeoNode","rawTarget","morphGeoNode","genMorphGeometry","basePositions","baseIndices","morphPositionsSparse","morphIndices","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UVIndex","ColorNode","Colors","ColorIndex","ColorManagement","SRGBColorSpace","MaterialNode","materialIndexBuffer","Materials","materialIndices","Order","KnotVector","pointsValues","Form","animationClips","rawClips","parseClips","key","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","rawCurves","animationCurve","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","rawTracks","generateTracks","AnimationClip","Quaternion","positionTrack","generateVectorTrack","rotationTrack","generateRotationTrack","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","defaultEulerOrder","Euler","euler","quaternionValues","QuaternionKeyframeTrack","val","morphNum","NumberKeyframeTrack","targetIndex","lastValue","currentValue","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","curvex","curvey","curvez","initialValueRad","currentValueRad","valuesSpan","absoluteSpan","numSubIntervals","E1","E2","Q1","Q2","initialTime","timeSpan","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","FBXTree","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","rest","elem","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","BinaryReader","skip","getUint32","endOfContent","parseNode","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","fflate","reader2","littleEndian","dv","_textDecoder","nullByte","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lParentLX","lGlobalT","lLRM","lParentGRM","lParentTM","lParentGRSM","lParentGSM","lLSM","lGlobalRS","lParentLSM_inv","lParentGSM_noLocal","lRotationPivotM_inv","lScalingPivotM_inv","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","MeshoptDecoder","detector","wasmpack","WebAssembly","supported","instance","wasm","ready","instantiate","unpack","__wasm_call_ctors","charCodeAt","write","fun","sbrk","count4","tp","sp","heap","res","filters","OCTAHEDRAL","QUATERNION","EXPONENTIAL","decoders","ATTRIBUTES","INDICES","workers","requestId","createWorker","worker","Worker","pending","requests","onmessage","event","initWorkers","workerProcess","revokeObjectURL","mode","postMessage","useWorkers","decodeVertexBuffer","meshopt_decodeVertexBuffer","decodeIndexBuffer","meshopt_decodeIndexBuffer","decodeIndexSequence","meshopt_decodeIndexSequence","decodeGltfBuffer","decodeGltfBufferAsync","reject","decodeWorker","toTrianglesDrawMode","drawMode","numberOfTriangles","newIndices","newGeometry","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFMaterialsDispersionExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsAnisotropyExtension","GLTFMaterialsBumpExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","relativeUrl","_onError","gltf","setDRACOLoader","setKTX2Loader","setMeshoptDecoder","callback","unregister","plugins","textDecoder","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","GLTFRegistry","objects","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_DISPERSION","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_MATERIALS_BUMP","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","refs","uses","_markDefs","nodeDefs","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","dependency","lightDef","lightNode","LinearSRGBColorSpace","range","innerConeAngle","outerConeAngle","assignExtrasToUserData","createUniqueName","getDependency","createNodeAttachment","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","all","extendMaterialParams","emissiveStrength","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","iridescenceFactor","iridescenceTexture","iridescenceIor","iridescenceThicknessTexture","sheenColorFactor","colorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmissionTexture","thicknessFactor","thicknessTexture","Infinity","colorArray","specularFactor","specularTexture","specularColorFactor","specularColorTexture","bumpFactor","bumpTexture","anisotropyStrength","anisotropyTexture","textureIndex","textureDef","loadTextureImage","isSupported","uri","handler","detectSupport","Image","onload","onerror","loadBufferView","bufferView","bufferViews","extensionDef","decoder","byteOffset","byteStride","createNodeMesh","meshDef","meshes","primitive","primitives","WEBGL_CONSTANTS","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","accessor","results","nodeObject","instancedMeshes","instancedMesh","InstancedMesh","TRANSLATION","ROTATION","SCALE","attributeName","InstancedBufferAttribute","assignFinalMaterial","BINARY_EXTENSION_CHUNK_TYPES","headerView","header","magic","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","decodePrimitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","decodeDracoFile","extendTexture","texCoord","GLTFCubicSplineInterpolant","Interpolant","sampleSize","t0","t1","stride2","stride3","pp","ppp","offset1","offset0","s3","s0","p0","m0","p1","m1","_q","GLTFCubicSplineQuaternionInterpolant","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","SAMPLER_2D","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","MirroredRepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","TEXCOORD_3","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","gltfDef","extras","targetNames","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","targets","attributesKey","getNormalizedComponentScale","_identityMatrix","associations","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","safariVersion","isFirefox","firefoxVersion","safariMatch","ImageBitmapLoader","_invokeAll","ext","beforeRoot","getDependencies","dependencies","scene","scenes","afterRoot","skinDefs","skins","meshDefs","skinLength","skin","ref","updateMappings","original","mappings","entries","_invokeOne","func","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","accessorIndex","sparse","TypedArray","BufferAttribute","pendingBufferViews","elementBytes","itemBytes","bufferAttribute","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","sourceIndex","sourceDef","sampler","promise","loadImageSource","startsWith","samplers","webkitURL","sourceURI","isObjectURL","imageBitmap","search","mapName","mapDef","gltfReference","useDerivativeTangents","useVertexColors","useFlatShading","pointsMaterial","lineMaterial","cachedMaterial","materialType","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","alphaMode","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","sanitizedName","loadGeometries","createDracoPrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","LineSegments","LineLoop","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","jointNodes","jointNode","mat","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","output","inputAccessors","outputAccessors","inputAccessor","outputAccessor","createdTracks","_createAnimationTracks","nodePending","childPending","childrenDef","skeletonPending","meshPromise","sceneIndex","sceneDef","nodeIds","reducedAssociations","reduceAssociations","targetName","TypedKeyframeTrack","outputArray","_getArrayFromAccessor","track","_createCubicSplineTrackInterpolant","scaled","isInterpolantFactoryMethodGLTFCubicSpline","assignAttributeAccessor","gltfAttributeName","Box3","boxScale","maxDisplacement","vector","Sphere","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","_taskCache","DRACOLoader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","attributeIDs","attributeTypes","vertexColorSpace","taskConfig","useUniqueIDs","decodeGeometry","taskKey","cachedTask","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","_createGeometry","_releaseTask","geometryData","_assignVertexColorSpace","inputColorSpace","_color","_loadLibrary","_initDecoder","useJS","librariesPending","libraries","jsContent","wasmBinary","fn","DRACOWorker","_taskCosts","_taskLoad","terminate","decodeAttribute","draco","dracoGeometry","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","Decoder","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeArrayToMesh","POINT_CLOUD","PointCloud","DecodeArrayToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","attributeResult","numFaces","num_faces","numIndices","GetTrianglesUInt32Array","decodeIndex","WorkerPool","queue","workersResolve","workerStatus","_initWorker","workerId","workerCreator","_onMessage","_getIdleWorker","setWorkerCreator","Ct","vkFormat","typeSize","pixelWidth","pixelHeight","pixelDepth","layerCount","faceCount","supercompressionScheme","levels","dataFormatDescriptor","vendorId","descriptorType","descriptorBlockSize","versionNumber","colorModel","colorPrimaries","transferFunction","flags","texelBlockDimension","bytesPlane","keyValue","globalData","_dataView","_littleEndian","_offset","_nextUint8","_nextUint16","getUint16","_nextUint32","_nextUint64","_nextInt32","_nextUint8Array","_skip","_scan","env","emscripten_notify_memory_growth","_init","Buffer","malloc","ZSTD_findDecompressedSize","ZSTD_decompress","free","DisplayP3ColorSpace","_zstd","_activeLoaders","KTX2Loader","transcoderPath","transcoderBinary","transcoderPending","workerConfig","MSC_TRANSCODER","setTranscoderPath","num","detectSupportAsync","renderer","astcSupported","hasFeatureAsync","astcHDRSupported","etc1Supported","etc2Supported","dxtSupported","bptcSupported","pvrtcSupported","isWebGPURenderer","hasFeature","getSupportedProfiles","jsLoader","binaryLoader","binaryContent","BasisWorker","EngineFormat","EngineType","TranscoderFormat","BasisFormat","_createTexture","_createTextureFrom","transcodeResult","container","messageType","faces","dfdFlags","CompressedCubeTexture","CompressedArrayTexture","CompressedTexture","parseColorSpace","levelData","uncompressedByteLength","bitOffset","bitLength","channelType","samplePosition","sampleLower","sampleUpper","imageFlags","rgbSliceByteOffset","rgbSliceByteLength","alphaSliceByteOffset","alphaSliceByteLength","endpointCount","selectorCount","imageDescs","endpointsData","selectorsData","tablesData","extendedData","isBasisHDR","VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT","FORMAT_MAP","zstd","ZSTDDecoder","levelIndex","levelWidth","levelHeight","levelDepth","level","TYPE_MAP","FloatType","HalfFloatType","UNCOMPRESSED_FORMATS","DataTexture","Data3DTexture","createRawTexture","texturePending","ETC1S","UASTC","UASTC_HDR","ETC1","ETC2","BC1","BC3","BC4","BC5","BC7_M6_OPAQUE_ONLY","BC7_M5","PVRTC1_4_RGB","PVRTC1_4_RGBA","ASTC_4x4","ATC_RGB","ATC_RGBA_INTERPOLATED_ALPHA","RGBA32","RGB565","BGR565","RGBA4444","BC6H","RGB_HALF","RGBA_HALF","RGBAFormat","RGBA_ASTC_4x4_Format","RGB_BPTC_UNSIGNED_Format","RGBA_BPTC_Format","RGBA_ETC2_EAC_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT5_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGB_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT1_Format","UnsignedByteType","BasisModule","_EngineFormat","_EngineType","_TranscoderFormat","_BasisFormat","onRuntimeInitialized","BASIS","initializeBasis","KTX2File","hasAlpha","ktx2File","cleanup","basisFormat","isUASTC","isETC1S","isHDR","getWidth","getHeight","getLayers","levelCount","getLevels","getFaces","getHasAlpha","getDFDFlags","transcoderFormat","engineFormat","engineType","OPTIONS","opt","if","needsPowerOfTwo","isPowerOfTwo","getTranscoderFormat","startTranscoding","mip","layerMips","mipWidth","mipHeight","levelInfo","getImageLevelInfo","origWidth","origHeight","dst","getImageTranscodedSizeInBytes","transcodeImage","mipData","transcode","FORMAT_OPTIONS","priorityETC1S","priorityUASTC","priorityHDR","arrays","totalByteLength","RGFormat","RedFormat","VK_FORMAT_R32G32B32A32_SFLOAT","VK_FORMAT_R16G16B16A16_SFLOAT","VK_FORMAT_R8G8B8A8_UNORM","VK_FORMAT_R8G8B8A8_SRGB","VK_FORMAT_R32G32_SFLOAT","VK_FORMAT_R16G16_SFLOAT","VK_FORMAT_R8G8_UNORM","VK_FORMAT_R8G8_SRGB","VK_FORMAT_R32_SFLOAT","VK_FORMAT_R16_SFLOAT","VK_FORMAT_R8_SRGB","VK_FORMAT_R8_UNORM","VK_FORMAT_ASTC_6x6_SRGB_BLOCK","RGBA_ASTC_6x6_Format","VK_FORMAT_ASTC_6x6_UNORM_BLOCK","dfd","NoColorSpace","VERBOSE_LEVEL","ANTI_ALIASING","RENDER_LAYER","SKY_HAZE","COLLIDER_TYPE","GEOMETRY_SIDE","DEVICE_ACTION","HUD_ELEMENT","HUD_ACTION","HUD_DRAW","pxlEnums","FRAMEWORK","FILE_TYPE","SHADOW_MAP","CAMERA_EVENT","COLOR_SHIFT","USER_SPEED","DEVICE_TYPE","DEVICE_EVENT","DEVICE_BUTTON","FileIO","folderDict","pxlTimer","pxlUtils","pxlQuality","pxlVideo","pxlCamera","pxlAutoCam","pxlUser","pxlEnv","pxlAnim","pxlDevice","pxlShaders","pxlColliders","verbose","pxlOptions","runDebugger","assetRoot","findInDict","guiRoot","roomRoot","vidRoot","workerList","oneTwoPFour","twelvePNineTwoDiv","onePOFiveFiveDiv","setDependencies","pxlNav","setLogging","enableLogging","DEBUG","_len","logger","_key","WARN","_len2","_key2","_len3","_key3","toggleDebugger","hasOwnProperty","convertVertColor","meshObj","space","convertColor","checkForUserData","envObj","envScene","pSystem","pSystemBuild","pSystemList","GlowPass","geoList","GLOW","GLOW_MASK","Shader","shaderGeoList","Emitter","emitterList","Hover","hasHoverables","hoverableList","Click","hasClickables","clickableList","checkObjectInstancing","rot","checkForMeshSettings","meshObject","baseMaterial","meshSettings","frontSided","canAppendChildren","ret","Scripted","canAddToScene","valid","baseInstancesNames","Instance","checkIsGlassLiquid","matList","isGlass","isLiquid","glassGroup","glassGrp","cBackMat","glassList","cFrontGeo","cFrontMat","cFrontMesh","curPos","curRot","curScale","baseInstancesList","lodInstanceRegex","lodNumberRegex","lodDistRegex","lodSkipRegex","lodMeshes","instObjectData","hasLods","foundInstLODLevels","dataKey","curLevelNumber","curDist","curSkip","ERROR","lodChildren","curUserData","curKey","curDataObj","lodKeysList","curMesh","instBaseName","mobile","MobileInstance","instBase","hasColor","userDataKeys","userDataKeysLower","hasFitScale","minScale","maxScale","pointRecorder","instanceMatricies","entry","flattenArrayToStr","curUp","randomNormal","curInstScale","curScalar","altInstPlacement","fixInstMatrix","particlePositions","hasColorAttr","particleColors","pPositionArray","pointBufferGeo","zero","particleList","loadSceneFBX","objPath","imgPath","transList","verboseLoading","meshKey","addToScene","geoLoadListComplete","geoLoadList","fbxLoader","curFbx","groupTypes","groupNames","curName","toPos","cameraPrevPos","cameraPos","cameraBooted","camInitPos","camThumbPos","toLookAt","cameraAimTarget","cameraPrevLookAt","camInitLookAt","camThumbLookAt","camReturnPos","camReturnLookAt","touchMouseData","initialQuat","baseMtl","lowGravMtl","lizardKingMtl","infinityZoomMtl","ShaderMaterial","cloudNoise","cloud3dTexture","msRunner","rate","itemRotateRate","itemVert","itemFrag","core","defaultVert","itemZoomFrag","itemList","itemBaseRotateRate","itemBaseVert","itemBaseFrag","itemBaseList","itemGroupList","itemListNames","getSettings","AUTO","readSettings","roomObj","settingsObj","curSettings","filePath","sceneFile","fileType","FBX","GLB","GLTF","getName","verified","verifySettings","loadPath","loadRoom","loadRoomFBX","loadRoomGLTF","gltfLoader","meshOptLoader","engine","loadRoomFile","loaderObject","materialList","curScene","curGroup","defaultCamLocation","DefaultCam","rootCamObjects","parentName","camLocation","curLoc","autoCamPaths","autoPathDict","detailLimit","curMap","lightList","groupId","Show","SCENE","curSide","curMatList","addChildren","colliderParent","colliderGroups","collidersExist","pName","curChildren","antiColliderActive","antiColliderList","antiColliderTopActive","antiColliderTopList","hasRoomWarp","roomWarp","colliderActive","colliderList","hasColliderType","FLOOR","prepColliders","WALL","WALL_TOP","ROOM","hasPortalExit","portalList","mtl","mtlMap","_c$material","_c$material2","_envScene$renderTarge","curMat","noiseTexture","camNear","camFar","resUV","screenRes","skyObjectVert","skyObjectFrag","skyHaze","SKY","envDiffuse","uValues","glowTexture","glowColor","freq","vertShader","animated","animTextureVert","fragShader","animTextureFrag","scrollScreenSeed","speed","scrollTexture","seed","boostPerc","scrollingTextureVert","scrollingTextureFrag","userScreenSeed","maskArray","maskPaths","modMaskId","modPathId","modMax","camExists","userScreenIntensity","ratio","videoFeed","maskChannel","maskMap","userScreenVert","userScreenFrag","camScreenData","screenGeoList","objectClickableObjectList","objectClickable","marker","fbxPostLoad","loadAnimFBX","rigPath","animPath","stateConnections","initObject","animLoader","promisList","animKey","curAnimPath","animPromise","animFbx","addClips","setStateConnections","animPostLoad","pxlShaderBuilder","customUniforms","shaderOptions","removeChildren","curObj","removedCount","findMesh","getBBoxCentroid","objBBox","objCentroid","loadScript","script","createElement","onreadystatechange","head","appendChild","xmlHttp","XMLHttpRequest","ActiveXObject","getURLContent","xhrRequest","open","send","getExternalHTML","responseText","responceType","fetchURLStatus","cmdRun","resolveDict","method","urlExistsFallback","DONE","ontimeout","urlExists","resp","pxlUserSettings","NATIVE","LOW","BASIC","OFF","shaderHeader","FloatingDust","pxlEffects","pxlParticles","SaltFlatsEnvironment","RoomEnvironment","assetPath","animInitCycle","animRigName","animSource","animMixer","pxlCamFOV","pxlCamZoom","pxlCamAspect","pxlCamNearClipping","pxlCamFarClipping","fogExp","FogExp2","perspectiveInstances","eyeBlinkInf","eyeBlinkMinMaxDelay","eyeBlinkMinMaxRate","eyeBlinkNext","eyeBlinkAnim","eyeBlinkRate","pxlAssetRoot","hasScripted","locObj","parentObj","locPos","locRot","locScale","hasClip","playClip","step","checkEyeBlink","scrollGrp","scrollLimit","sawAnim","randomFloat","buildDust","systemName","dustSystem","dustSystemSettings","dupeArray","setAtlasPath","build","terraceObjMtl","booted","fallback","newSkinnedMtl","setSkinnedMaterial","ShaderChunk","rabbitDruidVert","bindObj","skinnedMtlUniforms","UniformsUtils","UniformsLib","diffuseTexture","areTexture","skinnedMaterial","pxlFile","curCharacter","envGroundUniforms","envGroundVert","envGroundFrag","salioaPlanUniforms","salioaMtl","salioaPlantVert","salioaPlantFrag","CopyShader","Pass","isPass","needsSwap","renderToScreen","_camera","_geometry","FullScreenQuad","_mesh","ShaderPass","shader","textureID","fsQuad","writeBuffer","readBuffer","MaskPass","inverse","writeValue","clearValue","REPLACE","ClearMaskPass","EffectComposer","_pixelRatio","_width","_height","WebGLRenderTarget","renderTarget1","renderTarget2","passes","copyPass","clock","Clock","swapBuffers","addPass","pass","insertPass","removePass","isLastEnabledPass","passIndex","deltaTime","currentRenderTarget","maskActive","effectiveWidth","effectiveHeight","pixelRatio","RenderPass","clearAlpha","_oldClearColor","oldAutoClear","oldClearAlpha","oldOverrideMaterial","LuminosityHighPassShader","UnrealBloomPass","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","resy","renderTargetBright","renderTargetHorizontal","renderTargetVertical","highPassShader","highPassUniforms","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomTintColors","copyShader","copyUniforms","blendMaterial","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","SVGUtils","svgPromise","svgStyle","svgObj","getElementById","classList","svgPromiseObj","innerHTML","svg","getElementsByTagName","svgRawPromise","tmpDiv","svgIconPromise","clickEvent","curVal","tmpThis","eventType","parentNode","iconEvent","svgNS","svgHeight","svgWidth","curChild","iconButton","hover","toggleOpacity","cId","mute","transformOrigin","transition","loaderStyle","minWH","cx","cy","loadingPath","animation","animationDuration","animationPlayState","indicator","toggleIcon","caret","flipIcon","waiting","svgButtonPromise","obj","button","svgBG","onclick","svgCheckClick","ontouchstart","svgStylize","ontouchend","onmouseover","onmouseout","GUIManager","projectTitle","pxlCookie","pxlAudio","pxlNavCanvas","introHelpActive","branding","title","logo","medalion","stack","loaderPhrases","lableBoxSize","optionWidthRound","optionWidthAdd","deviceOptionHeight","pxlLoader","pxlLoaderCount","pxlLoaderTotal","hudBlock","userControlBlock","hudVisibility","hudIcons","hudElements","guiWindows","msgCount","hudMedalionBar","userProfileMessageInput","userProfileReturnMessage","userCountObj","userCountCur","messageCountObj","messageCountCur","chatMessageDisplay","chatMessageInput","camChoicesActive","micChoicesActive","pxlNavData","gui","fpsSet","djPlayerObj","buildGuiStatus","hud","userTopBar","bottomBar","djPlayer","roomControls","verseList","loadingBranding","settingsFields","requestVerseList","verseUserCounts","verseTitlePrefix","verseTitleSuffix","multiverseData","fromVerse","toVerse","electedVerse","mitosisState","mitosisBufferTime","mitosisTime","mitosisUpdateTime","textDescriptions","chatIcon","multiverseIcon","djPlayerVolumeParent","speakerIcon","micIcon","camIcon","helpIcon","infoIconParent","settingsIcon","muteAllIcon","fullScreenIcon","videoQualityIcon","statsIcon","usersIcon","ft2Button","ft3Button","hud_userCount","loading","disclaimer","mapPrompt","mapPromptBG","delayLoadChatWindow","renderSettings","controlSettings","shaderEditorDisplay","radioControls","controlState","controlToggle","buttonPadding","qualityText","activeItem","jmaWindowVis","actionPopUp","ctaLocalDocURL","ctaContentLoading","googleDocHTML","googleDocURL","readCookie","renderSettingsCookie","controlModeCookie","subscribe","cssBuildClasses","createContainer","createFailState","buildConsole","addToContainer","failState","addToFailState","prepLoader","loaderMsgObj","loaderMsg","canvasCrashBG","inner","canvasCrash","crashLink","crashLinkTrigger","stepLoader","curPerc","borderRadius","INFO","setLoaderPhrases","phrases","setLoaderObjMessage","ranEntry","buildHudBlock","buildTopBar","buildBottomBar","buildGuiWindowContainer","buildUserControlBlock","buildRawHtml","prepPageDisplay","_this$pxlUser","updateGuiPositions","checkItemWearOff","prevMS","hideItemHud","pxlNavDataUpdate","resetHelpTextPlacement","optionBlockId","curIcon","camChoiceIcon","micChoiceIcon","speakerChoiceIcon","optionBlock","curWidth","getBoundingClientRect","bbox","sH","hudBottomBar","setUserControlPosition","inviteUserPosition","setArtistInfoSizing","textDesc","helpObj","pad","parentBox","helpBox","toX","toY","pOffset","sW","refreshPage","reload","retSearch","splitter","guiToggleVisibility","hudTopBar","origDisplay","fastTravelBar","removeAttribute","topStyle","artistInfo","faderStyle","prepPromptFader","startVis","promptFader","faderObj","vis","_faderObj$classList","fadeOutLimit","deleteOnEnd","contains","curParent","removeChild","consoleBlock","buildMessageBlock","messageBlock","closeBtn","removeMessage","messageTopBar","messageHeader","messageContent","print","consoleMsg","toggleHudBlock","hudObjDisplay","checkOpenWindows","guiList","openStatus","togglePxlNavDataDisplay","checkFocus","inviteUserGui","toggleInviteUser","topBar","html","subHtml","pnDataDisplayParent","pnDataDisplay","activeList","userList","mutedList","userControlsBlock","buildMedalionBar","medalionBar","mIcon","mTitle","medalionIcon","chatBlock","gridAutoColumns","margin","prepArtistInfo","_this$pxlEnv","postIntro","artistInfoParent","artistInfoButton","toggleArtistInfo","artistInfoButtonText","buttonText","artistInfoButtonSvg","artistInfoInner","closeSvg","artistInfoButtonPrep","run","curSVG","fromX","onAnim","offAnim","iHeight","clientHeight","iWidth","clientWidth","bHeight","bWidth","baseHeight","baseWidth","tWidth","maxWidth","maxHeight","padding","beginElement","_this$pxlEnv2","togglePageDisplay","setPageToDisplay","_this$hudElements","toggleChatBox","djPlayerMuteToggle","djMuted","setUserControls","curType","helpActive","helpGui","helpGuiToggle","infoActive","infoGui","infoGuiToggle","settingsActive","settingsGui","settingsGuiToggle","toggleUserProfile","setMicVolumeLevel","volLevel","volumeMask","timer","yVal","loadingCheck","loadingType","loadingDeviceChange","loadingState","curButton","djBuildPlayer","djPlayerHtml","djUrlSource","musicIcon","buildItemHud","objName","textShadow","fontSize","mapPrepPrompts","cLen","stillLoading","pBB","cW","cH","cT","cL","togglGuiWindow","guiName","toggleAutoCam","toggleGuiWindowContainer","stateObj","hoverObj","renderQualitySettings","percent","screenResPerc","mapAutoQualityUpdate","resizeRenderResolution","_this$pxlNavData","innerText","bgDiv","guiWindowBG","closeWindows","targetId","blur","helpGuiBuild","_this$pxlOptions$onbo","_this$pxlOptions$onbo2","_this$pxlOptions$onbo3","helpGuiDiv","messageText","messageHTML","onboarding","formatWelcomeMessage","messageStyles","messageStyle","buttonStyles","buttonStyle","guiClose","postHelpIntro","infoGuiBuild","infoGuiDiv","applyCookies","settingsGuiBuild","settingsGuiDiv","changeUsername","qualitySlider","radioList","rLength","msgInput","onkeyup","keyUsernameSet","onkeydown","keyDownUsernameSet","usernameInput","sendUsernameUpdate","retMessage","usernameReturn","advObj","customObj","rad","setRadioStyle","setQualityLevel","setRadioValues","checked","setGraphicsSettings","setQualityCookie","bloom","leftRight","mouse","cur","aLen","addStyle","qualitySettings","radioBlock","settingsGuiAdvObjSizing","oHeight","offsetHeight","_this$guiWindows","_this$guiWindows$sett","_this$pxlNavData2","toHeight","renderRadius","mapGlowPass","roomBloomPass","renderThreshold","renderGlowRadius","renderResolution","inviteUserBuild","inviteUserGuiDiv","urlDisplay","utils","iuCopy","copyRoomUrl","timeout","clearTimeout","iuBB","minHeight","buildMobileWelcome","_this$pxlOptions$onbo4","_this$pxlOptions$onbo6","_this$pxlOptions$onbo7","mobileGui","mobileWelcomeGuiDiv","welcomeText","welcomeHTML","_this$pxlOptions$onbo5","welcomeStyle","toggleMobileWelcome","requestFullScreen","ctaBuildPopup","ctaDisplayPopup","bodyOnly","apuInner","iframe","referrerpolicy","srcElement","getUserControls","curId","curAvatar","curGui","userStatusGui","curAudio","audio","curAudioMuted","audioMuted","curAudioGui","userSoundGui","displayName","curNameGui","userNameGui","curVerse","verse","curTop","htbr","buildUserSpeaker","retSpeaker","cloneNode","remoteMuted","volPrev","volChildren","volLines","remoteMutedLines","addUserControls","setUserControlMute","userControlsParent","userSpeakerParent","userSpeaker","userNameParent","setUserControlColor","setUserControlVolume","audioLevel","smoothing","volume","muted","setUserControlRemoteMute","inVerse","base","remoteS1","remoteS2","setUserControlVis","proxVisOff","curIdEl","deleteUserControlVis","userControlsSwap","idFrom","idTo","verseCompare","toggleUserControls","ShaderEditor","pxlCore","guiManager","isEditing","uniformsObj","vertObj","fragObj","currentShader","clickThroughListener","clickThroughCheck","shaderSliderValues","editorWidthMinMax","addSlider","label","args","sliderParent","gridAutoFlow","alignItems","slider","numberDisp","onchange","oninput","updateShaderTextFields","roomShader","vert","frag","objRead","currentRoom","mainRoom","roomSceneList","getCurrentShader","readShader","typeDict","buildShaderEditor","shaderDiv","pxlGuiDraws","shaderHelpDiv","help","curRoom","geoKeys","objectShaderOptions","curOpt","spacer","shaderSliders","peSliderValues","sliderSetShader","shaderParentObj","shaderEditor","headerBar","titleParentObj","titleObj","pulldownHeaderObj","updateObj","helpDiv","shaderList","shaderFieldParent","shaderSelect","textSizeObj","justifySelf","marginTop","marginRight","userSelect","shiftFontSize","toggleShaderEditor","unis","stripper","setShader","onfocus","focusShaderMessage","keyShaderMessage","onmousedown","mDownShaderMessage","clickShaderMessage","ondblclick","dblclickShaderMessage","mouseX","mouseY","prevSelectStart","prevSelectEnd","inc","newSize","unisObj","resizeShaderElements","updateHeaderBar","dcActive","dx","dy","textObj","posStart","selectionStart","posEnd","selectionEnd","selectStr","selectMatcher","setSelectionRange","keyHit","keyCode","shiftKey","ctrl","ctrlKey","numPad","altKey","cs","getComputedStyle","csSize","textValue","reg","searchBin","cpos","searchStr","mLineMatches","matchAll","searchPos","cposEnd","taRect","csFont","font","taSplitter","overflowY","spanOffsetTop","querySelector","offsetTop","scrollTo","click","repStr","hasSel","preBuffer","substr","postBuffer","postPos","vType","execCommand","prevValues","newStart","origEnd","selection","searchSelection","strPos","forward","cStart","cEnd","cText","newEnd","selPush","insertList","refStart","refEnd","ss","prevValuesList","curLine","inText","cPosStart","cPosEnd","curSel","textValueArray","cursorPos","updateShaderList","pulldown","editables","getShaderList","getSelected","bBarHeight","vertTextTop","pHeight","fieldBodyHeight","emit","blurShaderEditor","activeElement","curPulldown","disconnectFocusListener","_this$children","guiWindow","vertSize","fragSize","minSize","sizeShift","connectFocusListener","clickX","clickY","clickTargetStack","elementsFromPoint","ElementBase","REGION","touchId","isDown","isDragging","dragCount","dragThreshold","startPos","currentPos","previousPos","startDelta","stepDelta","defaultObject","DEFAULT","defaultObjectStyleEntry","objectStyles","objectStyleKeys","callbacks","emptyObj","createMainElement","ontouchmove","updateStyle","callbackFn","DragRegion","DRAG_REGION","dragEmptyObj","Thumbstick","THUMBSTICK","block","currentState","innerObj","blockStyleOverrides","parentStyleOverrides","innerStyleOverrides","blockObj","blockIndex","parentIndex","innerIndex","getTouchId","touches","identifier","retId","curTouch","getTouchInfo","touchInfo","stopPropagation","clientX","clientY","_this$currentPos","_this$currentPos2","userSettings","deadZone","touch","tempX","tempY","prevPos","toggleStyle","HOVER","ACTIVE","parentRect","parentCenterX","parentCenterY","pushX","pushY","pushInnerX","pushInnerY","dist","overrides","actionList","actionIndex","pxlBase","Utils","texLoader","ImageLoader","textLoaderArray","channelFormats","RGBFormat","DepthFormat","curMS","updateUrl","history","replaceState","pushState","tmpFocus","tmpText","select","checkInt","degToRad","deg","toHundreths","isInteger","toTenths","getDateTime","Date","getFullYear","padStart","getMonth","getDate","getHours","getMinutes","getSeconds","cleanStrict","messageString","strip","matcher","cleanBasic","cleanString","toNearestStr","arrayToStr","arr","retArr","delimiter","screenToNDC","componentToHex","rgbToHex","hexToRgb","hex","stringToRgb","string","boost","zoFit","stringColor","sLength","charCode","ccLength","maxCd","minCd","boostCd","colorTosRGB","tosRGB","colorToLinear","toLinear","gammaCorrectColor","gammaIn","gammaOut","gammaCorrect","gammaCorrection","linearChannel","retColor","sRGB_TO_LINEAR","LINEAR_TO_sRGB","WINDOWS_TO_UNIX","UNIX_TO_WINDOWS","LINEAR_TO_WINDOWS","WINDOWS_TO_LINEAR","LINEAR_TO_UNIX","UNIX_TO_LINEAR","randomizeArray","inputArr","tmpArr","rand","getRandom","applyTransformList","vec2","vec3","mods","modKeys","tex","getVideoTexture","videoObject","videoTexture","VideoTexture","getCanvasTexture","CanvasTexture","QualityController","searchParms","msLog","getTime","autoQuality","mBlurPercMult","bloomPercMult","bufferPercMult","renderTargetScale","percentSteps","fpsCounter","countAtLevel","shiftRate","moduleQualityList","qualityStep","qualityMaxSteps","qualityStepValues","benchmarkStart","benchmarkTime","benchmarkRating","benchmarkTimes","setFromBenchmark","benchmarkQuality","benchmarkQualityRange","settingsQualityChoice","detailLimitOverride","graphics","motion","settingsLow","settingsMedium","settingsHigh","settingsCustom","hasCookie","parseCookie","parseDict","qualitySetting","mapFpsQualitCheck","attachModule","startBenchmark","endBenchmark","bDelta","percStep","setDependentSettings","dir","toPerc","percUpdate","graphicsPreset","checkCustomDict","setComponentQuality","colliderPrevObjHit","reapplySettings","setLowQuality","setMediumQuality","setHighQuality","setCustomQuality","sourceDict","setCookie","component","pointScale","pBaseScale","mapOverlayHeavyPass","mapOverlayPass","mapOverlaySlimPass","mapBoxAAPass","mapCrossAAPass","portaluserScreenIntensity","cdMult","roomGlowPass","mapMotionBlurPass","multVal","portalIntensity","circleGateBloom","circleGateColor","mapMotionBlurPassEnabled","mapOverlayHeavyPassEnabled","mapOverlayPassEnabled","mapOverlaySlimPassEnabled","mapBoxAAPassEnabled","mapCrossAAPassEnabled","_this$pxlEnv$mapCompo","_this$pxlEnv2$roomGlo","mapComposerGlow","cGate","bloomBoost","cVid","colliderCurObjHit","CookieManager","expiration","prepPrepend","prepend","deleteDate","getExpiration","toGMTString","isEqual","cName","variableToString","getRegexp","getClearCookieRegexp","pullData","cookie","curCookies","cData","valueToString","evalCookie","addDictionary","cDict","cKeys","clearCookie","Timer","fpsStats","_msRate","baseRate","msTime","_bootMS","_prevWorldMS","_curMS","_prevMS","avgDeltaTime","avgDeltaRate","videoFeeds","runtime","updateTime","scaleTime","pause","toggleMSLog","prevTime","msDelta","getLerpRate","getLerpAvgRate","User","Stats","jmaConnectObj","jmaServer","jmaRoom","jmaUserId","jmaUserName","jmaTempUserIdActive","welcome","tankStrafe","invertMouse","moveSpeed","moveSpeedSlow","moveSpeedBase","moveSpeedBoost","tankStrageCookie","invertMouseCookie","rootUserCookie","adminUserCookie","localUserMoved","localUserTurned","itemRunTime","itemActiveList","itemInactiveCmd","itemActiveTimer","itemBobRate","itemBobMag","mPick","activeEffects","lowGrav","lKing","lKingInactive","lKingActive","lKingWarp","lizardKingPass","sField","sFieldWarp","starFieldPass","iZoom","iZoomWarp","crystallinePass","setSlowSpeed","setBaseSpeed","setBoostSpeed","setSpeed","enumType","STOP","SLOW","BASE","BOOST","curTime","cmd","checkItemPickUp","itemName","toggleTankRotate","tankStrageText","toggleMouseInf","invertMouseText","toggleFpsStats","Device","allowCursorSwap","longTouchLength","lookRange","lookXScalar","lookYScalar","touchScreen","screenAspect","screenRatio","origRes","screenResDeltaPerc","mapW","mapH","lightShift","firefox","inputActive","endPos","dragTotal","latched","windowHidden","keyDownCount","directionKeyDown","directionKeysPressed","controlKey","objectPercList","objectPercFuncList","objectPerc","startX","startY","percX","percY","offsetPercX","offsetPercY","canCursorLock","cursorLockActive","cursorRightButtonLockActive","gyroGravity","subscriptableEvents","callbackList","setGammaCorrection","staticCamera","allowStaticRotation","onmousemove","onmouseup","touchstart","passive","touchmove","touchend","oncontextmenu","onVisibilityChange","onblur","resetUserInput","returnValue","mapLockCursor","reason","addMoveDelta","toGamma","shadowShift","shadowBoost","isWindows","isMac","getRenderScalar","renderScalar","renderScale","setCanvasSize","overscanFit","runHiddenCalcs","hidden","workerFunc","camJumpKey","deviceKey","endTouch","mapOnUp","documentElement","requestMethod","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","mapOnMove","mapOnDown","startTouch","doTouch","keyDownCall","keyUpCall","setCursor","cursorType","hideAddressBar","getMouseXY","pageX","pageY","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","lock","curCanvas","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","pointerLockElement","exitPointerLock","which","curDistance","curStepDistance","touchBlender","xyDeltaTemp","netDistance","velocity","netDistYPerc","curFadeOut","hoverUserDetect","djVolumeParentObj","down","releaseTime","setNextTrigger","clickUserDetect","getNextPath","setFogHue","deviceAction","RUN","JUMP","kCode","isTrusted","tmpResSave","mapRender","dlData","atob","cameraData","fileSuffix","tempLink","download","href","setRoom","preAutoCamToggle","_this$pxlUser$itemIna","infoIcon","PAUSE","MOVE","LOOK","addLookDelta","ACTION","ACTION_ALT","ITEM","MENU","togglePause","MAP","absDeltaX","absDeltaY","startDeltaX","startDeltaY","xRatio","yRatio","movement","cameraMovement","userInputMoveScalar","cameraMovementEase","iWidthBase","iHeightBase","rU","ratioU","mBlurVelInf","renderWorldPos","mapComposer","roomComposer","delayComposer","devicePixelRatio","setAspect","safeAspect","aspectMult","updateCompUniforms","roomNameList","_this$pxlEnv$roomScen","unsubscribe","Colliders","hashGridSizing","colliderBoundsReference","roomColliderData","baseGridSize","epsilon","prevGridKey","pxlRoomObj","colliderType","gridSize","hasColliders","gridSizeInv","HOVERABLE","CLICKABLE","prepInteractables","roomName","collidersForHashing","getColliders","vertexLocations","colliderMinMax","collider","colliderVertices","colliderVertexCount","colliderSize","maxColliderSize","gridSizeScalar","origGridSize","colliderBaseName","colliderTriCount","colliderFaceVerts","colliderFaceCount","colliderMatrix","baseIndex","minX","maxX","minZ","maxZ","minGridX","maxGridX","minGridZ","maxGridZ","edge0","edge1","faceNormal","dotE0E0","dotE0E1","dotE1E1","areaInv","curColliderName","faceKey","getGridKey","flattenVector3","faceVerts","addFaceToGridLocation","gx","gz","faceGridGroupKeys","curEntry","curInteractables","curInteractableName","isGridEdgeIntersecting","edgeStart","edgeSegment","gridXMin","gridXMax","gridZMin","gridZMax","dz","txMin","txMax","tzMin","tzMax","tMin","tMax","vec","gridX","gridZ","gridKey","castRay","geoSide","DOUBLE","roomData","backFaceCheck","frontFaceCheck","faceKeys","retHits","directionCross","isFacing","edgeOrig","crossOrig","factor","intersectionPoint","distKeys","curFace","setHelperActiveFace","castGravityRay","multiHits","faceGridGroup","gridKeyArr","faceIds","retPositions","edgeOrigin","distToFace","projection","edgeProj","dotE0EOrigin","dotE1EOrigin","intersectData","castInteractRay","objectInteractList","screenUV","cameraRay","rayOrigin","fovRadians","tanFov","dirX","dirY","rayDirection","retClickedObjects","objFaceVerts","curFaceKey","NDotRay","intersection","va","vb","nb","curIntersect","toColorId","faceId","limit","limitInv","redLimit","getRandomColorIdList","colorIdList","stepSize","randomColorIdList","curComponent","buildHelper","triCount","colorId","colorLimit","curColorId","verticesArray","colorIdArray","visibilityArray","visibleFaceId","stepHelper","helperMesh","faceIdx","animName","objNames","idx","Animation","animInitEntry","animRoot","runCount","checkList","meshCount","boneCount","SkinnedMeshCount","GroupCount","outDict","AnimationMixer","clipName","newClip","getRig","getFallbackCycle","clipNames","setWeight","disableOthers","clipKey","nonClip","stateKeys","curState","nextStates","randState","Environment","parentGroupList","parentNameList","prevRenderMS","prevRuntimeMS","nextRenderMS","Mobile","PC","renderInterval","pxlRoomName","pxlRoomAbsRoot","splitRoot","pxlRoomLclRoot","pxlRoomRoot","bootRoom","bootLocation","roomSubList","roomPostGuiCalls","jmaCheckConnection","checkContext","activeContext","warpPortalTextures","warpZoneRenderTarget","currentAudioZone","softNoiseTexture","detailNoiseTexture","chroAberUVTexture","chroAberUVAlpha","blockAnimTexture","portalMtlRate","fogMult","fogColorSky","listener","posted","camLobbyPos","camLobbyLookAt","groupList","returnPortalGlowList","roomWarpVisuals","proximityGeo","userAvatarGroup","warpVisualActive","warpVisualMaxTime","warpVisualStartTime","warpVisualFader","warpVisualCmd","stepShaderFuncArr","mapCopyMotionBlurPass","mapWorldPosMaterial","mapGlowMotionBlur","mapComposerMotionBlur","mapComposerBloom","chromaticAberrationPass","chroAberrationRoomPass","lizardKingRoomPass","mapComposerWarpPass","blurScreenMerge","pxlRenderSettings","exposureShiftActive","delayPass","chroAberMult","blurDirCur","blurDirPrev","shaderPasses","roomRenderPass","blurComposer","glowPassMask","clickablePrevActiveObject","promoClickable","promoClickableObjectList","promoPrevActiveObject","promoClickableLinks","remoteVideoTextureList","remoteUserNameList","remoteUserMediaList","remoteUserVideoList","remoteUserAudioList","prevCount","checkUserCount","checkVideoStatus","findCamCount","videoObjectList","screenClickable","screenMtlUniforms","userDataList","camFindInfoList","curUserCount","prevUserCount","_len4","_key4","optionKeys","boot","setBootRoom","postBoot","showOnboarding","colliderValid","eventCheckStatus","colliderShiftActive","nearestFloorObjName","proximityScaleTrigger","initPlay","jogServerMemory","stepWarpPass","tmpCanvas","setExposure","loadReadRoomModule","framework","curImportPath","rooms","loadRoomModule","Scene","DepthTexture","UnsignedShortType","startAllRooms","startRoom","room","newSubRoom","roomObject","addToRooms","roomObjDict","dupe","addToRoomLayers","addToRoomParents","newGroup","buildRoomEnvironments","getArtistInfo","orig","atanVals","hRot","setFog","objShader","geoRead","setShaderMtl","getAssetTexture","assetName","curTexturePath","assetExt","buildBackgroundObject","bgVert","bgFrag","bgUniforms","bgScreenVert","bgScreenFrag","bgMesh","curRoomObj","mouseScreenSpace","rayHits","curObjList","objHit","clickableActions","promoHit","promoActions","pLink","video","exposure","mult","sendRoomMessage","messageValue","onMessage","buildComposers","_this$pxlCamera$camer","_this$pxlCamera$camer2","rendering","worldPositionVert","worldPositionFrag","blurXShaderPass","tDiffuse","pDiffuse","directionalBlurPass","renderGlowTarget","dirBlurCopyPass","blurYShaderPass","scatterMixShaderPass","mixBlurShaderPass","antiAliasing","MEDIUM","HIGH","rDiffuse","camRotXYZ","motionBlurPostProcess","renderGlowPass","mtDiffuse","compLayersPostProcess","glowCopyPassBlur","gamma","camPos","bloomTexture","sceneDepth","scenePos","proximityMult","finalOverlayHeavyShader","finalOverlayShader","finalOverlaySlimShader","glowPassPostProcess","lKingPostProcess","starTexture","sFieldPostProcessVert","sFieldPostProcessFrag","tDiffusePrev","iZoomPostProcess","postProcessPasses","warpMult","chroAberPostProcess","fader","animTexture","camPosVert","warpPostProcess","boxAntiAliasPass","crossAntiAliasPass","bootScene","curPass","applyRoomPass","bloomThresh","bloomStrength","bloomRadius","gDiffuse","tDiffusePrevRoom","textureStorePass","curExp","uniformScalars","exposureUniformBase","warpType","fUp","fDown","warpActive","warpCamRun","stopWarpVisual","checkUserVideoStatus","remoteUserUpdateMedia","userRemoveRemoteData","stepShaderValues","stepAnimatedObjects","initWarpVisual","visualType","prepPortalRender","cleanupPortalRender","setPortalTexture","toRoom","warpPortalQueue","getSceneSnapshot","prepRoom","anim","mapRenderBlurStack","subTickCalculations","PARTICLES","bgCd","curgb","GUI","HUD","hudParent","huds","mobileHUD","createMobileHUD","addToHUD","hudElement","addItem","curRegion","createRegion","createDragRegion","BUTTON","createButton","createThumbstick","SLIDER","createSlider","IMAGE","createImage","TEXT","createText","region","dragRegion","thumbstickObj","curElement","curData","mobileHudParent","noneState","hoverState","activeState","deltas","mobileDeligate","Camera","standingHeight","movementScalar","hasMovementLimit","movementMax","jumpScalar","userScale","maxStepHeight","cameraEasing","touchMaxSensitivity","cameraJumpImpulse","cameraMaxJumpHold","gravityCount","gravityRate","gravityMax","gravityUPS","socket","canMove","HDRView","camUpdated","hasMoved","hasRotated","hasJumped","hasJumpLock","hasGravity","userInputLookScalar","roomStandingHeight","standingHeightGravInfluence","standingMaxGravityOffset","walkBounceSeed","walkBounceHeight","walkBounce","walkBouncePerc","walkBounceRate","walkBounceEaseIn","walkBounceEaseOut","posRotEasingThreshold","cameraMoveLength","cameraMoveLengthMult","camPosBlend","camRotPitch","cameraJumpActive","cameraAllowJump","cameraJumpHeight","cameraJumpVelocity","cameraJumpVelocityEaseOut","cameraJumpInAir","floorColliderInitialHit","colliderValidityChecked","nearestFloorHit","nearestFloorHitPrev","nearestFloorObjNamePrev","gravitySourceActive","gravityDirection","gravityEaseOutRate","jump","releaseJumpLockTime","releaseJumpLockDelay","runMain","workerActive","workerTransfers","workerMessage","roomWarpZone","colliderFail","warpObj","warpTarget","hotKeyTriggered","colliderAdjustPerc","colliderAdjustRate","cameraPose","beta","alphaOffset","betaOffset","gammaOffset","orientation","posOffset","rx","ry","rz","accelZeroed","accelCalibration","accelCalDiv","accelCalCount","accelTotal","accelPrev","accelDelta","accelClearDelta","darkBase","brightBase","cameraPosLookAtNames","cameraAim","cameraCross","lookAtTargetActive","lookAtPerc","lookAtLockPerc","lookAtLockFader","lookAtLockFadeRate","prevQuaternion","touchSensitivityLimits","updateMainValues","setUserHeight","setMaxStepHeight","setUserScale","setMovementScalar","setMovementMax","setMovementEase","setPositionBlend","setInputMovementMult","setJumpScalar","setJumpImpulse","setJumpHoldMax","setJumpRepeatDelay","setCameraRotateEasing","setTouchSensitivity","setGravityRate","setGravityMax","setWalkBounceHeight","setWalkBounceRate","setWalkBounceEaseIn","setWalkBounceEaseOut","setUserSettings","userSettingsObject","standing","scalar","easing","headBounce","easeIn","easeOut","impulse","holdMax","repeatDelay","gravity","ups","updateMovement","camInitJump","camJump","killJumpImpulse","lowQualityUpdates","midQualityUpdates","eventCheck","eventTrigger","warpEventTriggered","updateDeviceValues","velEaseMag","tankRotate","curEasing","moveMult","buildDeviceMonitors","updateCameraMatrices","resetCameraCalculations","newPosition","setFOV","setStats","setTransform","resetGravity","setToObj","colliderCheck","warpToRoom","objTarget","roomKeys","roomEnv","camLocName","hasCurrentRoom","prevRoom","holdCamera","camHoldWarpPos","isMainRoom","tDiff","tDiffPrev","posName","lookAtName","curFOV","getUserHeight","emitCameraTransforms","checkStatus","warpToRoomSnapshot","fastTravel","hotkey","autoCamActive","timeDelta","jumpPerc","jumpRate","toImpulse","updateGravity","gMult","jumpLanding","curCamPos","movementBlocked","castDir","castPos","castHeight","hitColliders","rayTopHits","pullBack","closestDist","curCollisionPos","validHitCheck","curHit","validHit","getStandingHeight","stepUpDist","firstDist","camDist","itemCheck","checkColliderValid","validDist","checkValid","checkObject","volMult","curExposure","animPerc","setFadeActive","proxMult","curNameBase","itemActive","itemTrigger","setItem","finCmd","toggleMovement","canMoveVal","strafe","dolly","easingMode","turnRate","dollyRate","initFrameCamPosition","userMovement","moveScalar","minimumMoveSpeed","applyGravity","nPrev","fallStatus","retHeight","walkBounceAdd","walkBounceOffset","camApplyMobileRotation","dtor","halfSqrt","camPoseQuat","viewNormal","poseQuat","initPoseQuat","smoothedQuat","cameraLimit","updateRoamRotation","xGrav","invertLook","look","updateStaticRotation","blendOut","lookAtTargetLock","origCamQuat","targetCamQuat","uPitch","uRot","viewDirection","shaderCamRot","sWHalf","sHHalf","fromWorldPos","toWorldPos","motionBlurMaxDist","toDir","blurDir","force","didUpdate","hasCallback","cb","AutoCamera","prevCamChange","nextCamChange","delayRange","autoCamMode","resetAutoCam","autoCamPrevPos","autoCamPrevLookAt","autoCamId","camMode","curModeCount","curRoomIndex","curPath","roomList","pathCounts","forceNewRoom","curRoomCount","avatarMin","avatarValid","clusterReturn","curCluster","clusterValid","clusterRotation","clusterRotRate","getAutoCamData","updateAutoCamera","triggerMult","checkCamMode","setCamMode","stepDroneCam","setAutoCamMode","applyTouchRotate","prevCamMode","autoCamData","timeMult","unique","randDelay","camPathCount","setNextRoom","nextRoom","roomCount","setAutoCamPath","curMode","setPosQuat","quat","origActive","curAutoCamGroup","totalLoopDuration","autoCamPositions","autoCamLookAt","autoCamUp","numControlPoints","autoCamStartTime","prevNextAutoCam","manual","getAutoCamValueFromCurve","curIndex","t_lerp","nextIndex","x2","y2","z2","nextPos","camLookAt","camUp","Extensions","MusicUtils","audioObject","Audio","pxlSocket","audioTimer","audioEq","audioWorker","audioProcessor","djAudioVolume","djAudioVolumeMax","djAudioVolumeMin","djAudioVolumeScalar","djAudioObj","djTimecodeObj","djVolumeObj","roomAudioStopped","videoStreamObjects","colliderVolActive","isVideoObject","activeObject","fadeActive","fadeAdjustRate","fadeDir","fadePerc","audioContext","avm","enter","audioClickMonitor","byScript","audioObj","djPlayerAdjustVolume","djPlayerSetSliderGui","fadeAudioEvent","isPaused","pausePlayback","canUnmute","setVolume","setMuted","djDevice","prepAudioProcessor","stepAudioProcessor","recieveAudioProcessor","buildRemoteAudioMixer","pID","domObj","loadStreamPromise","pw","offsetWidth","perc","curVolume","videojs","Hls","IVSPlayer","djStreamUrl","performerStreamUrl","screenVideoBlock","screenVideos","videoStreams","videoStreamFailCount","videoStreamFailMax","videoAudioEvent","dj","performer","checkForDjStream","checkForPerformerStream","videoStills","buildVideoBlock","buildPromoVideos","svbObj","curIntensity","curBoost","curFile","file","curLand","landscape","curFilePath","controls","fileList","curTexture","videoObjList","buildVideoPlayer","streamId","djStreamObj","buildVideoStream","curVid","checkVideoStreamStatus","setScreensToStreams","isActive","retTexture","buildVideoTexture","disposeVideoTexture","forceValue","resetvideoTexture","resetEnvSettings","hlsPreflight","ms","MediaSource","WebKitMediaSource","isTypeSupported","sb","SourceBuffer","WebKitSourceBuffer","appendBuffer","buildIvsPlayer","ivsScriptUrl","buildVhsPlayer","player","vhsClickMonitor","ns","networkState","on","currentTime","prevDur","curDur","ended","buildFallbackPlayer","buildHlsPlayer","hls","attachMedia","Events","MEDIA_ATTACHED","BUFFER_CREATED","MANIFEST_PARSED","streamController","onMediaEnded","hlsErr","errDetails","fatal","recoverMediaError","STREAM_STATE_TRANSITION","previousState","nextState","currentLevel","sendModMessage","sendErrorMsg","isPlayerSupported","attachHTMLVideoElement","setAutoplay","setLogLevel","playerState","PlayerState","READY","PLAYING","ENDED","playerEvent","PlayerEventType","unload","destroyPlayer","m3u8Url","loadSource","newStream","nameId","vol","getStreamState","curStream","isLoaded","lastCurrentTime","checkVideoError","curPlayer","videoWidth","webkitDecodedFrameCount","nextLoadLevel","nextLevel","restart","vidObj","liveTracker","atLiveEdge","djSource","errorData","detachMedia","streamState","streamData","djVidStopped","performerVidStopped","curStreamData","defaultShiftVert","discardFrag","clickableBevelVert","clickableBevelFrag","portalBaseVert","portalBaseFrag","rgbaMapFrag","pxlPrincipledVert","shadows","pxlPrincipledFrag","ShaderParms","useColor","pointLightCount","hasSpecular","specularMult","hasVertColor","PointColor","hasSurfaceNoise","surfaceNoiseMult","SurfaceNoise","toFloatStr","surfaceNoiseBaseStr","surfaceNoiseStr","surfaceNoiseNoShadowStr","emberWispsSettings","emberWispsVert","shaderSettings","BaseSpeed","EmberSpread","EmberFadeDistance","ShiftFromZero","MultPosXZ","emberWispsFrag","dustSettings","dustVert","userDustData","pOpacity","fadeOutScalar","wanderInf","wanderRate","wanderFrequency","proxDist","hasLights","dustFrag","heightMapSettings","heightMapVert","jumpHeightMult","heightMapFrag","smokeSettings","smokeVert","BaseSpread","SmokeBrightness","InnerBulster","SmokeDensity","WindInfluenceBoost","TightenBaseSpread","TightenMidSpread","TightenTipSpread","smokeFrag","snowSettings","snowFallVert","ProxDist","LandHeight","CalculateCollisions","snowFallFrag","retFrag","xyDir","blurCounts","stepRate","sres","mobileBool","VAPOR","particles","ParticleBase","pscale","atlasPath","atlasAlphaPath","hasAlphaMap","knownKeys","curShaderSettings","curSettingKeys","elementDuplicator","additiveBlend","setGeometry","vertCount","setSettings","pScale","vertexCount","atlasMtl","atlasRes","atlasPicks","randomRanges","randomAtlas","blendAdditive","atlasPicker","atlasRandomGen","atlasArrayPicker","newMaterial","verts","seeds","atlasId","genSeed","genAtlas","seedAttribute","atlasAttribute","posAttribute","psystem","sortParticles","dSize","atlasDiv","atlasRandomList","flat","findLightPositions","lightPos","lightCount","hasPointLights","alphaPath","setSystemMtl","lightPosArr","dustUniforms","atlasTexture","atlasAlphaTexture","smoothNoiseTexture","BillowSmoke","smokeUniforms","windDir","offsetPos","EmberWisps","emberUniforms","positionOffset","HeightMap","heightMapPath","spawnMapPath","spawnMapMode","setHeightMapPath","setSpawnMapPath","objectRef","sizeX","sizeY","sizeZ","SizeX","SizeY","SizeZ","tankSize","heightMap","spawnMap","tint","pxlHUD","initScene","animFile","animClips","spiralizerUniforms","packedTextureMaterial","coreTextureMaterial","projectedMaterial","voidMaterial","holoMaterial","flag","initPos","finalPos","midPos","runTime","lodList","enableRaycast","hoverableObj","clickableObj","colliderHashMap","warpPortalTexture","worldPosMaterial","worldPosRenderTarget","spiralizerPass","bloomPreState","hasHelpers","helperObjects","resetCamera","retList","sliderVectorObj","sliders","Particles","isClick","mButton","mouseRayHits","castableObjects","objRaycast","setFromCamera","intersectObjects","hasCollidersOfType","CEILING","PORTAL_WARP","ROOM_WARP","SCRIPTED","forHashing","addColliderHelper","stepColliderHelper","toCameraPos","positionName","lightTypeList","shaderUniforms","useLights","useShadows","dTexture","detailTexture","animMixers","msgType","msgValue","pxlNavVersion","startingRoom","roomBootList","loaderStepTotalCount","assetsToLoadDict","knownPostProcessPasses","uriHashParms","findHashParms","isMobile","autoCam","getHashParm","loadPercent","validEvents","validEventsKeys","loadEnvAssetFile","pxlExtensions","bootTimer","detectJSFramework","checkPxlOptions","buildGui","tickLoader","bootEnvironment","bootEngine","cameraRunAnimatorMobile","postProcessKeys","knownPassKeys","assetKey","__NEXT_DATA__","__NEXT_ROUTER__","NEXT","__REACT_DEVTOOLS_GLOBAL_HOOK__","REACT","process","NEXT_RUNTIME","__NEXT_ROUTER_BASEPATH","REACT_APP_","mozExitPointerLock","webkitExitPointerLock","hashParms","hashStr","hashList","curParm","parm","promiseList","WebGLRenderer","shadowMapBiasing","UnsignedIntType","transformList","ident","tListIdent","mobileSuffix","SOFT","ambLight","dirLight","stillLoadingCheck","_tmpThis$pxlEnv$roomS","initRoomList","monitorRoomLoad","maxAttempts","bootOnFirst","_tmpThis$pxlEnv$roomS2","runPrepDrawScenes","runner","jumpCam","cmdList","exitingRoom","pxlNavPrepSettings","startPxlNav","postGuiEvent","stopTimer","pauseTimer","addRooms","phraseList","initExtension","extName","onFinishFn","onErrorFn","startExtension","stopExtension","extensionStatus","trigger","eventValue","eventObj","curEventVal","roomEventType","roomEventValue","callbackFunc","eventSplit","camEventType","ROTATE","FALL","LANDED","COLLISION","retValue","statusValue","pxlAvailableEtxensions","forceReload","pluginInstance","default","bootErr","loadErr","curEtx","webpackAsyncContext","__webpack_require__","ids"],"sourceRoot":""}