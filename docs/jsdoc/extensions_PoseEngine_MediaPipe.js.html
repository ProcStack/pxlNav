<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>extensions/PoseEngine/MediaPipe.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://procstack.github.io/Outlet.htm" target="_blank" class="menu-item" id="pxlNav_Example" >pxlNav Example : The Outlet</a></h2><h3>Classes</h3><ul><li><a href="Camera.html">Camera</a><ul class='methods'><li data-type='method'><a href="Camera.html#applyGravity">applyGravity</a></li><li data-type='method'><a href="Camera.html#buildDeviceMonitors">buildDeviceMonitors</a></li><li data-type='method'><a href="Camera.html#camApplyMobileRotation">camApplyMobileRotation</a></li><li data-type='method'><a href="Camera.html#camInitJump">camInitJump</a></li><li data-type='method'><a href="Camera.html#camJump">camJump</a></li><li data-type='method'><a href="Camera.html#camJumpKey">camJumpKey</a></li><li data-type='method'><a href="Camera.html#checkColliderValid">checkColliderValid</a></li><li data-type='method'><a href="Camera.html#colliderCheck">colliderCheck</a></li><li data-type='method'><a href="Camera.html#emitCameraTransforms">emitCameraTransforms</a></li><li data-type='method'><a href="Camera.html#eventCheck">eventCheck</a></li><li data-type='method'><a href="Camera.html#eventTrigger">eventTrigger</a></li><li data-type='method'><a href="Camera.html#fastTravel">fastTravel</a></li><li data-type='method'><a href="Camera.html#getStandingHeight">getStandingHeight</a></li><li data-type='method'><a href="Camera.html#getUserHeight">getUserHeight</a></li><li data-type='method'><a href="Camera.html#init">init</a></li><li data-type='method'><a href="Camera.html#initFrameCamPosition">initFrameCamPosition</a></li><li data-type='method'><a href="Camera.html#itemActive">itemActive</a></li><li data-type='method'><a href="Camera.html#itemCheck">itemCheck</a></li><li data-type='method'><a href="Camera.html#itemTrigger">itemTrigger</a></li><li data-type='method'><a href="Camera.html#jogServerMemory">jogServerMemory</a></li><li data-type='method'><a href="Camera.html#jumpLanding">jumpLanding</a></li><li data-type='method'><a href="Camera.html#killJumpImpulse">killJumpImpulse</a></li><li data-type='method'><a href="Camera.html#lookAtTargetLock">lookAtTargetLock</a></li><li data-type='method'><a href="Camera.html#lowQualityUpdates">lowQualityUpdates</a></li><li data-type='method'><a href="Camera.html#midQualityUpdates">midQualityUpdates</a></li><li data-type='method'><a href="Camera.html#resetCameraCalculations">resetCameraCalculations</a></li><li data-type='method'><a href="Camera.html#resetGravity">resetGravity</a></li><li data-type='method'><a href="Camera.html#setDependencies">setDependencies</a></li><li data-type='method'><a href="Camera.html#setFOV">setFOV</a></li><li data-type='method'><a href="Camera.html#setStats">setStats</a></li><li data-type='method'><a href="Camera.html#setToObj">setToObj</a></li><li data-type='method'><a href="Camera.html#setTransform">setTransform</a></li><li data-type='method'><a href="Camera.html#step">step</a></li><li data-type='method'><a href="Camera.html#updateCamera">updateCamera</a></li><li data-type='method'><a href="Camera.html#updateCameraMatrices">updateCameraMatrices</a></li><li data-type='method'><a href="Camera.html#updateDeviceValues">updateDeviceValues</a></li><li data-type='method'><a href="Camera.html#updateGravity">updateGravity</a></li><li data-type='method'><a href="Camera.html#updateMainValues">updateMainValues</a></li><li data-type='method'><a href="Camera.html#updateMovement">updateMovement</a></li><li data-type='method'><a href="Camera.html#updateRoamCameraRotation">updateRoamCameraRotation</a></li><li data-type='method'><a href="Camera.html#warpCamRun">warpCamRun</a></li><li data-type='method'><a href="Camera.html#warpEventTriggered">warpEventTriggered</a></li><li data-type='method'><a href="Camera.html#warpToRoom">warpToRoom</a></li></ul></li><li><a href="HUD.html">HUD</a><ul class='methods'><li data-type='method'><a href="HUD.html#addItem">addItem</a></li><li data-type='method'><a href="HUD.html#addToHUD">addToHUD</a></li><li data-type='method'><a href="HUD.html#createButton">createButton</a></li><li data-type='method'><a href="HUD.html#createDragRegion">createDragRegion</a></li><li data-type='method'><a href="HUD.html#createImage">createImage</a></li><li data-type='method'><a href="HUD.html#createMobileHUD">createMobileHUD</a></li><li data-type='method'><a href="HUD.html#createRegion">createRegion</a></li><li data-type='method'><a href="HUD.html#createSlider">createSlider</a></li><li data-type='method'><a href="HUD.html#createText">createText</a></li><li data-type='method'><a href="HUD.html#createThumbstick">createThumbstick</a></li><li data-type='method'><a href="HUD.html#emit">emit</a></li><li data-type='method'><a href="HUD.html#init">init</a></li><li data-type='method'><a href="HUD.html#mobileDeligate">mobileDeligate</a></li><li data-type='method'><a href="HUD.html#setDependencies">setDependencies</a></li><li data-type='method'><a href="HUD.html#subscribe">subscribe</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">extensions/PoseEngine/MediaPipe.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>export class MediaPipePlugin {
  constructor() {
    this.workerScriptUrl = "./PoseEngine_worker.js";
    this.worker = null;
    this.booted = false;
  }

  /**
   * Dynamically loads a script with progress tracking
   * @param {string} src - The URL of the script
   * @param {Function} onProgress - Callback for progress updates
   */
  static async loadScriptWithProgress(src, onProgress) {
    return new Promise((resolve, reject) => {
      const xhr = new XMLHttpRequest();
      xhr.open("GET", src, true);
      xhr.responseType = "text";

      xhr.onprogress = (event) => {
        if (event.lengthComputable &amp;&amp; typeof onProgress === "function") {
          const progress = Math.round((event.loaded / event.total) * 100);
          onProgress(progress);
        }
      };

      xhr.onload = () => {
        if (xhr.status === 200) {
          const script = document.createElement("script");
          script.textContent = xhr.responseText;
          document.head.appendChild(script);
          resolve();
        } else {
          reject(new Error(`Failed to load script: ${src}`));
        }
      };

      xhr.onerror = () => reject(new Error(`Network error while loading: ${src}`));
      xhr.send();
    });
  }

  /**
   * Initializes the MediaPipe library and WebWorker
   * @param {Function} onProgress - Callback for script loading progress
   */
  async init(onProgress) {
    const mediaPipeUrl = "https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js";

    try {
      // Load MediaPipe from CDN
      console.log("Loading MediaPipe...");
      await MediaPipePlugin.loadScriptWithProgress(mediaPipeUrl, onProgress);

      // Initialize WebWorker
      this.worker = new Worker(this.workerScriptUrl);
      this.booted = true;
      console.log("MediaPipe Plugin Initialized");
    } catch (error) {
      console.error("Error initializing MediaPipePlugin:", error);
    }
  }

  // -- -- --
  // Worker Helper Functions

  sendMessage(message) {
    if (!this.booted) {
      console.warn("MediaPipePlugin is not initialized.");
      return;
    }
    this.worker.postMessage(message);
  }

  onMessage(callback) {
    if (!this.worker) {
      console.warn("WebWorker not initialized.");
      return;
    }
    this.worker.onmessage = (event) => callback(event.data);
  }

  terminateWorker() {
    if (this.worker) {
      this.worker.terminate();
      this.worker = null;
      console.log("WebWorker terminated.");
    }
  }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Mon Mar 03 2025 01:52:46 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



    <script src="https://unpkg.com/mermaid/dist/mermaid.js"></script>
    
    <script src="docs-init.js"></script>
    
</body>
</html>
